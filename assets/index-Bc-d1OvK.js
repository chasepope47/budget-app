(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const c of u.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function e(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function s(o){if(o.ep)return;o.ep=!0;const u=e(o);fetch(o.href,u)}})();function pS(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var jm={exports:{}},jl={};var mv;function gS(){if(mv)return jl;mv=1;var i=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(s,o,u){var c=null;if(u!==void 0&&(c=""+u),o.key!==void 0&&(c=""+o.key),"key"in o){u={};for(var m in o)m!=="key"&&(u[m]=o[m])}else u=o;return o=u.ref,{$$typeof:i,type:s,key:c,ref:o!==void 0?o:null,props:u}}return jl.Fragment=t,jl.jsx=e,jl.jsxs=e,jl}var pv;function yS(){return pv||(pv=1,jm.exports=gS()),jm.exports}var _=yS(),Lm={exports:{}},Ot={};var gv;function _S(){if(gv)return Ot;gv=1;var i=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),c=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),E=Symbol.for("react.activity"),T=Symbol.iterator;function I(O){return O===null||typeof O!="object"?null:(O=T&&O[T]||O["@@iterator"],typeof O=="function"?O:null)}var P={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},B=Object.assign,X={};function ft(O,K,ut){this.props=O,this.context=K,this.refs=X,this.updater=ut||P}ft.prototype.isReactComponent={},ft.prototype.setState=function(O,K){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,K,"setState")},ft.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function $(){}$.prototype=ft.prototype;function tt(O,K,ut){this.props=O,this.context=K,this.refs=X,this.updater=ut||P}var nt=tt.prototype=new $;nt.constructor=tt,B(nt,ft.prototype),nt.isPureReactComponent=!0;var mt=Array.isArray;function ht(){}var C={H:null,A:null,T:null,S:null},A=Object.prototype.hasOwnProperty;function R(O,K,ut){var dt=ut.ref;return{$$typeof:i,type:O,key:K,ref:dt!==void 0?dt:null,props:ut}}function V(O,K){return R(O.type,K,O.props)}function M(O){return typeof O=="object"&&O!==null&&O.$$typeof===i}function D(O){var K={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(ut){return K[ut]})}var S=/\/+/g;function ot(O,K){return typeof O=="object"&&O!==null&&O.key!=null?D(""+O.key):K.toString(36)}function F(O){switch(O.status){case"fulfilled":return O.value;case"rejected":throw O.reason;default:switch(typeof O.status=="string"?O.then(ht,ht):(O.status="pending",O.then(function(K){O.status==="pending"&&(O.status="fulfilled",O.value=K)},function(K){O.status==="pending"&&(O.status="rejected",O.reason=K)})),O.status){case"fulfilled":return O.value;case"rejected":throw O.reason}}throw O}function j(O,K,ut,dt,yt){var st=typeof O;(st==="undefined"||st==="boolean")&&(O=null);var gt=!1;if(O===null)gt=!0;else switch(st){case"bigint":case"string":case"number":gt=!0;break;case"object":switch(O.$$typeof){case i:case t:gt=!0;break;case v:return gt=O._init,j(gt(O._payload),K,ut,dt,yt)}}if(gt)return yt=yt(O),gt=dt===""?"."+ot(O,0):dt,mt(yt)?(ut="",gt!=null&&(ut=gt.replace(S,"$&/")+"/"),j(yt,K,ut,"",function(ae){return ae})):yt!=null&&(M(yt)&&(yt=V(yt,ut+(yt.key==null||O&&O.key===yt.key?"":(""+yt.key).replace(S,"$&/")+"/")+gt)),K.push(yt)),1;gt=0;var wt=dt===""?".":dt+":";if(mt(O))for(var St=0;St<O.length;St++)dt=O[St],st=wt+ot(dt,St),gt+=j(dt,K,ut,st,yt);else if(St=I(O),typeof St=="function")for(O=St.call(O),St=0;!(dt=O.next()).done;)dt=dt.value,st=wt+ot(dt,St++),gt+=j(dt,K,ut,st,yt);else if(st==="object"){if(typeof O.then=="function")return j(F(O),K,ut,dt,yt);throw K=String(O),Error("Objects are not valid as a React child (found: "+(K==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":K)+"). If you meant to render a collection of children, use an array instead.")}return gt}function U(O,K,ut){if(O==null)return O;var dt=[],yt=0;return j(O,dt,"","",function(st){return K.call(ut,st,yt++)}),dt}function J(O){if(O._status===-1){var K=O._result;K=K(),K.then(function(ut){(O._status===0||O._status===-1)&&(O._status=1,O._result=ut)},function(ut){(O._status===0||O._status===-1)&&(O._status=2,O._result=ut)}),O._status===-1&&(O._status=0,O._result=K)}if(O._status===1)return O._result.default;throw O._result}var Y=typeof reportError=="function"?reportError:function(O){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var K=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof O=="object"&&O!==null&&typeof O.message=="string"?String(O.message):String(O),error:O});if(!window.dispatchEvent(K))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",O);return}console.error(O)},rt={map:U,forEach:function(O,K,ut){U(O,function(){K.apply(this,arguments)},ut)},count:function(O){var K=0;return U(O,function(){K++}),K},toArray:function(O){return U(O,function(K){return K})||[]},only:function(O){if(!M(O))throw Error("React.Children.only expected to receive a single React element child.");return O}};return Ot.Activity=E,Ot.Children=rt,Ot.Component=ft,Ot.Fragment=e,Ot.Profiler=o,Ot.PureComponent=tt,Ot.StrictMode=s,Ot.Suspense=p,Ot.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=C,Ot.__COMPILER_RUNTIME={__proto__:null,c:function(O){return C.H.useMemoCache(O)}},Ot.cache=function(O){return function(){return O.apply(null,arguments)}},Ot.cacheSignal=function(){return null},Ot.cloneElement=function(O,K,ut){if(O==null)throw Error("The argument must be a React element, but you passed "+O+".");var dt=B({},O.props),yt=O.key;if(K!=null)for(st in K.key!==void 0&&(yt=""+K.key),K)!A.call(K,st)||st==="key"||st==="__self"||st==="__source"||st==="ref"&&K.ref===void 0||(dt[st]=K[st]);var st=arguments.length-2;if(st===1)dt.children=ut;else if(1<st){for(var gt=Array(st),wt=0;wt<st;wt++)gt[wt]=arguments[wt+2];dt.children=gt}return R(O.type,yt,dt)},Ot.createContext=function(O){return O={$$typeof:c,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null},O.Provider=O,O.Consumer={$$typeof:u,_context:O},O},Ot.createElement=function(O,K,ut){var dt,yt={},st=null;if(K!=null)for(dt in K.key!==void 0&&(st=""+K.key),K)A.call(K,dt)&&dt!=="key"&&dt!=="__self"&&dt!=="__source"&&(yt[dt]=K[dt]);var gt=arguments.length-2;if(gt===1)yt.children=ut;else if(1<gt){for(var wt=Array(gt),St=0;St<gt;St++)wt[St]=arguments[St+2];yt.children=wt}if(O&&O.defaultProps)for(dt in gt=O.defaultProps,gt)yt[dt]===void 0&&(yt[dt]=gt[dt]);return R(O,st,yt)},Ot.createRef=function(){return{current:null}},Ot.forwardRef=function(O){return{$$typeof:m,render:O}},Ot.isValidElement=M,Ot.lazy=function(O){return{$$typeof:v,_payload:{_status:-1,_result:O},_init:J}},Ot.memo=function(O,K){return{$$typeof:g,type:O,compare:K===void 0?null:K}},Ot.startTransition=function(O){var K=C.T,ut={};C.T=ut;try{var dt=O(),yt=C.S;yt!==null&&yt(ut,dt),typeof dt=="object"&&dt!==null&&typeof dt.then=="function"&&dt.then(ht,Y)}catch(st){Y(st)}finally{K!==null&&ut.types!==null&&(K.types=ut.types),C.T=K}},Ot.unstable_useCacheRefresh=function(){return C.H.useCacheRefresh()},Ot.use=function(O){return C.H.use(O)},Ot.useActionState=function(O,K,ut){return C.H.useActionState(O,K,ut)},Ot.useCallback=function(O,K){return C.H.useCallback(O,K)},Ot.useContext=function(O){return C.H.useContext(O)},Ot.useDebugValue=function(){},Ot.useDeferredValue=function(O,K){return C.H.useDeferredValue(O,K)},Ot.useEffect=function(O,K){return C.H.useEffect(O,K)},Ot.useEffectEvent=function(O){return C.H.useEffectEvent(O)},Ot.useId=function(){return C.H.useId()},Ot.useImperativeHandle=function(O,K,ut){return C.H.useImperativeHandle(O,K,ut)},Ot.useInsertionEffect=function(O,K){return C.H.useInsertionEffect(O,K)},Ot.useLayoutEffect=function(O,K){return C.H.useLayoutEffect(O,K)},Ot.useMemo=function(O,K){return C.H.useMemo(O,K)},Ot.useOptimistic=function(O,K){return C.H.useOptimistic(O,K)},Ot.useReducer=function(O,K,ut){return C.H.useReducer(O,K,ut)},Ot.useRef=function(O){return C.H.useRef(O)},Ot.useState=function(O){return C.H.useState(O)},Ot.useSyncExternalStore=function(O,K,ut){return C.H.useSyncExternalStore(O,K,ut)},Ot.useTransition=function(){return C.H.useTransition()},Ot.version="19.2.1",Ot}var yv;function Zp(){return yv||(yv=1,Lm.exports=_S()),Lm.exports}var Lt=Zp();const xt=pS(Lt);var Pm={exports:{}},Ll={},Um={exports:{}},zm={};var _v;function vS(){return _v||(_v=1,(function(i){function t(j,U){var J=j.length;j.push(U);t:for(;0<J;){var Y=J-1>>>1,rt=j[Y];if(0<o(rt,U))j[Y]=U,j[J]=rt,J=Y;else break t}}function e(j){return j.length===0?null:j[0]}function s(j){if(j.length===0)return null;var U=j[0],J=j.pop();if(J!==U){j[0]=J;t:for(var Y=0,rt=j.length,O=rt>>>1;Y<O;){var K=2*(Y+1)-1,ut=j[K],dt=K+1,yt=j[dt];if(0>o(ut,J))dt<rt&&0>o(yt,ut)?(j[Y]=yt,j[dt]=J,Y=dt):(j[Y]=ut,j[K]=J,Y=K);else if(dt<rt&&0>o(yt,J))j[Y]=yt,j[dt]=J,Y=dt;else break t}}return U}function o(j,U){var J=j.sortIndex-U.sortIndex;return J!==0?J:j.id-U.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;i.unstable_now=function(){return u.now()}}else{var c=Date,m=c.now();i.unstable_now=function(){return c.now()-m}}var p=[],g=[],v=1,E=null,T=3,I=!1,P=!1,B=!1,X=!1,ft=typeof setTimeout=="function"?setTimeout:null,$=typeof clearTimeout=="function"?clearTimeout:null,tt=typeof setImmediate<"u"?setImmediate:null;function nt(j){for(var U=e(g);U!==null;){if(U.callback===null)s(g);else if(U.startTime<=j)s(g),U.sortIndex=U.expirationTime,t(p,U);else break;U=e(g)}}function mt(j){if(B=!1,nt(j),!P)if(e(p)!==null)P=!0,ht||(ht=!0,D());else{var U=e(g);U!==null&&F(mt,U.startTime-j)}}var ht=!1,C=-1,A=5,R=-1;function V(){return X?!0:!(i.unstable_now()-R<A)}function M(){if(X=!1,ht){var j=i.unstable_now();R=j;var U=!0;try{t:{P=!1,B&&(B=!1,$(C),C=-1),I=!0;var J=T;try{e:{for(nt(j),E=e(p);E!==null&&!(E.expirationTime>j&&V());){var Y=E.callback;if(typeof Y=="function"){E.callback=null,T=E.priorityLevel;var rt=Y(E.expirationTime<=j);if(j=i.unstable_now(),typeof rt=="function"){E.callback=rt,nt(j),U=!0;break e}E===e(p)&&s(p),nt(j)}else s(p);E=e(p)}if(E!==null)U=!0;else{var O=e(g);O!==null&&F(mt,O.startTime-j),U=!1}}break t}finally{E=null,T=J,I=!1}U=void 0}}finally{U?D():ht=!1}}}var D;if(typeof tt=="function")D=function(){tt(M)};else if(typeof MessageChannel<"u"){var S=new MessageChannel,ot=S.port2;S.port1.onmessage=M,D=function(){ot.postMessage(null)}}else D=function(){ft(M,0)};function F(j,U){C=ft(function(){j(i.unstable_now())},U)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(j){j.callback=null},i.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<j?Math.floor(1e3/j):5},i.unstable_getCurrentPriorityLevel=function(){return T},i.unstable_next=function(j){switch(T){case 1:case 2:case 3:var U=3;break;default:U=T}var J=T;T=U;try{return j()}finally{T=J}},i.unstable_requestPaint=function(){X=!0},i.unstable_runWithPriority=function(j,U){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var J=T;T=j;try{return U()}finally{T=J}},i.unstable_scheduleCallback=function(j,U,J){var Y=i.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?Y+J:Y):J=Y,j){case 1:var rt=-1;break;case 2:rt=250;break;case 5:rt=1073741823;break;case 4:rt=1e4;break;default:rt=5e3}return rt=J+rt,j={id:v++,callback:U,priorityLevel:j,startTime:J,expirationTime:rt,sortIndex:-1},J>Y?(j.sortIndex=J,t(g,j),e(p)===null&&j===e(g)&&(B?($(C),C=-1):B=!0,F(mt,J-Y))):(j.sortIndex=rt,t(p,j),P||I||(P=!0,ht||(ht=!0,D()))),j},i.unstable_shouldYield=V,i.unstable_wrapCallback=function(j){var U=T;return function(){var J=T;T=U;try{return j.apply(this,arguments)}finally{T=J}}}})(zm)),zm}var vv;function bS(){return vv||(vv=1,Um.exports=vS()),Um.exports}var Bm={exports:{}},We={};var bv;function ES(){if(bv)return We;bv=1;var i=Zp();function t(p){var g="https://react.dev/errors/"+p;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)g+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+p+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var s={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(p,g,v){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:E==null?null:""+E,children:p,containerInfo:g,implementation:v}}var c=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(p,g){if(p==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return We.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,We.createPortal=function(p,g){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(t(299));return u(p,g,null,v)},We.flushSync=function(p){var g=c.T,v=s.p;try{if(c.T=null,s.p=2,p)return p()}finally{c.T=g,s.p=v,s.d.f()}},We.preconnect=function(p,g){typeof p=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,s.d.C(p,g))},We.prefetchDNS=function(p){typeof p=="string"&&s.d.D(p)},We.preinit=function(p,g){if(typeof p=="string"&&g&&typeof g.as=="string"){var v=g.as,E=m(v,g.crossOrigin),T=typeof g.integrity=="string"?g.integrity:void 0,I=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;v==="style"?s.d.S(p,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:E,integrity:T,fetchPriority:I}):v==="script"&&s.d.X(p,{crossOrigin:E,integrity:T,fetchPriority:I,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},We.preinitModule=function(p,g){if(typeof p=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var v=m(g.as,g.crossOrigin);s.d.M(p,{crossOrigin:v,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&s.d.M(p)},We.preload=function(p,g){if(typeof p=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var v=g.as,E=m(v,g.crossOrigin);s.d.L(p,v,{crossOrigin:E,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},We.preloadModule=function(p,g){if(typeof p=="string")if(g){var v=m(g.as,g.crossOrigin);s.d.m(p,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:v,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else s.d.m(p)},We.requestFormReset=function(p){s.d.r(p)},We.unstable_batchedUpdates=function(p,g){return p(g)},We.useFormState=function(p,g,v){return c.H.useFormState(p,g,v)},We.useFormStatus=function(){return c.H.useHostTransitionStatus()},We.version="19.2.1",We}var Ev;function xS(){if(Ev)return Bm.exports;Ev=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(t){console.error(t)}}return i(),Bm.exports=ES(),Bm.exports}var xv;function TS(){if(xv)return Ll;xv=1;var i=bS(),t=Zp(),e=xS();function s(n){var r="https://react.dev/errors/"+n;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)r+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+n+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function u(n){var r=n,a=n;if(n.alternate)for(;r.return;)r=r.return;else{n=r;do r=n,(r.flags&4098)!==0&&(a=r.return),n=r.return;while(n)}return r.tag===3?a:null}function c(n){if(n.tag===13){var r=n.memoizedState;if(r===null&&(n=n.alternate,n!==null&&(r=n.memoizedState)),r!==null)return r.dehydrated}return null}function m(n){if(n.tag===31){var r=n.memoizedState;if(r===null&&(n=n.alternate,n!==null&&(r=n.memoizedState)),r!==null)return r.dehydrated}return null}function p(n){if(u(n)!==n)throw Error(s(188))}function g(n){var r=n.alternate;if(!r){if(r=u(n),r===null)throw Error(s(188));return r!==n?null:n}for(var a=n,l=r;;){var f=a.return;if(f===null)break;var d=f.alternate;if(d===null){if(l=f.return,l!==null){a=l;continue}break}if(f.child===d.child){for(d=f.child;d;){if(d===a)return p(f),n;if(d===l)return p(f),r;d=d.sibling}throw Error(s(188))}if(a.return!==l.return)a=f,l=d;else{for(var b=!1,w=f.child;w;){if(w===a){b=!0,a=f,l=d;break}if(w===l){b=!0,l=f,a=d;break}w=w.sibling}if(!b){for(w=d.child;w;){if(w===a){b=!0,a=d,l=f;break}if(w===l){b=!0,l=d,a=f;break}w=w.sibling}if(!b)throw Error(s(189))}}if(a.alternate!==l)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?n:r}function v(n){var r=n.tag;if(r===5||r===26||r===27||r===6)return n;for(n=n.child;n!==null;){if(r=v(n),r!==null)return r;n=n.sibling}return null}var E=Object.assign,T=Symbol.for("react.element"),I=Symbol.for("react.transitional.element"),P=Symbol.for("react.portal"),B=Symbol.for("react.fragment"),X=Symbol.for("react.strict_mode"),ft=Symbol.for("react.profiler"),$=Symbol.for("react.consumer"),tt=Symbol.for("react.context"),nt=Symbol.for("react.forward_ref"),mt=Symbol.for("react.suspense"),ht=Symbol.for("react.suspense_list"),C=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),V=Symbol.for("react.memo_cache_sentinel"),M=Symbol.iterator;function D(n){return n===null||typeof n!="object"?null:(n=M&&n[M]||n["@@iterator"],typeof n=="function"?n:null)}var S=Symbol.for("react.client.reference");function ot(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===S?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case B:return"Fragment";case ft:return"Profiler";case X:return"StrictMode";case mt:return"Suspense";case ht:return"SuspenseList";case R:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case P:return"Portal";case tt:return n.displayName||"Context";case $:return(n._context.displayName||"Context")+".Consumer";case nt:var r=n.render;return n=n.displayName,n||(n=r.displayName||r.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case C:return r=n.displayName||null,r!==null?r:ot(n.type)||"Memo";case A:r=n._payload,n=n._init;try{return ot(n(r))}catch{}}return null}var F=Array.isArray,j=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,U=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,J={pending:!1,data:null,method:null,action:null},Y=[],rt=-1;function O(n){return{current:n}}function K(n){0>rt||(n.current=Y[rt],Y[rt]=null,rt--)}function ut(n,r){rt++,Y[rt]=n.current,n.current=r}var dt=O(null),yt=O(null),st=O(null),gt=O(null);function wt(n,r){switch(ut(st,r),ut(yt,n),ut(dt,null),r.nodeType){case 9:case 11:n=(n=r.documentElement)&&(n=n.namespaceURI)?L_(n):0;break;default:if(n=r.tagName,r=r.namespaceURI)r=L_(r),n=P_(r,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}K(dt),ut(dt,n)}function St(){K(dt),K(yt),K(st)}function ae(n){n.memoizedState!==null&&ut(gt,n);var r=dt.current,a=P_(r,n.type);r!==a&&(ut(yt,n),ut(dt,a))}function Dt(n){yt.current===n&&(K(dt),K(yt)),gt.current===n&&(K(gt),Ol._currentValue=J)}var ee,sn;function Ve(n){if(ee===void 0)try{throw Error()}catch(a){var r=a.stack.trim().match(/\n( *(at )?)/);ee=r&&r[1]||"",sn=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ee+n+sn}var $n=!1;function ui(n,r){if(!n||$n)return"";$n=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(r){var at=function(){throw Error()};if(Object.defineProperty(at.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(at,[])}catch(W){var Q=W}Reflect.construct(n,[],at)}else{try{at.call()}catch(W){Q=W}n.call(at.prototype)}}else{try{throw Error()}catch(W){Q=W}(at=n())&&typeof at.catch=="function"&&at.catch(function(){})}}catch(W){if(W&&Q&&typeof W.stack=="string")return[W.stack,Q.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=l.DetermineComponentFrameRoot(),b=d[0],w=d[1];if(b&&w){var k=b.split(`
`),G=w.split(`
`);for(f=l=0;l<k.length&&!k[l].includes("DetermineComponentFrameRoot");)l++;for(;f<G.length&&!G[f].includes("DetermineComponentFrameRoot");)f++;if(l===k.length||f===G.length)for(l=k.length-1,f=G.length-1;1<=l&&0<=f&&k[l]!==G[f];)f--;for(;1<=l&&0<=f;l--,f--)if(k[l]!==G[f]){if(l!==1||f!==1)do if(l--,f--,0>f||k[l]!==G[f]){var et=`
`+k[l].replace(" at new "," at ");return n.displayName&&et.includes("<anonymous>")&&(et=et.replace("<anonymous>",n.displayName)),et}while(1<=l&&0<=f);break}}}finally{$n=!1,Error.prepareStackTrace=a}return(a=n?n.displayName||n.name:"")?Ve(a):""}function Ts(n,r){switch(n.tag){case 26:case 27:case 5:return Ve(n.type);case 16:return Ve("Lazy");case 13:return n.child!==r&&r!==null?Ve("Suspense Fallback"):Ve("Suspense");case 19:return Ve("SuspenseList");case 0:case 15:return ui(n.type,!1);case 11:return ui(n.type.render,!1);case 1:return ui(n.type,!0);case 31:return Ve("Activity");default:return""}}function xr(n){try{var r="",a=null;do r+=Ts(n,a),a=n,n=n.return;while(n);return r}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var pe=Object.prototype.hasOwnProperty,ge=i.unstable_scheduleCallback,Tr=i.unstable_cancelCallback,Pf=i.unstable_shouldYield,Mu=i.unstable_requestPaint,an=i.unstable_now,ws=i.unstable_getCurrentPriorityLevel,Vo=i.unstable_ImmediatePriority,jo=i.unstable_UserBlockingPriority,wr=i.unstable_NormalPriority,Uf=i.unstable_LowPriority,ku=i.unstable_IdlePriority,Vu=i.log,ju=i.unstable_setDisableYieldValue,Yn=null,qe=null;function Dn(n){if(typeof Vu=="function"&&ju(n),qe&&typeof qe.setStrictMode=="function")try{qe.setStrictMode(Yn,n)}catch{}}var ve=Math.clz32?Math.clz32:Pu,Lu=Math.log,ya=Math.LN2;function Pu(n){return n>>>=0,n===0?32:31-(Lu(n)/ya|0)|0}var ci=256,Ss=262144,we=4194304;function hi(n){var r=n&42;if(r!==0)return r;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function fi(n,r,a){var l=n.pendingLanes;if(l===0)return 0;var f=0,d=n.suspendedLanes,b=n.pingedLanes;n=n.warmLanes;var w=l&134217727;return w!==0?(l=w&~d,l!==0?f=hi(l):(b&=w,b!==0?f=hi(b):a||(a=w&~n,a!==0&&(f=hi(a))))):(w=l&~d,w!==0?f=hi(w):b!==0?f=hi(b):a||(a=l&~n,a!==0&&(f=hi(a)))),f===0?0:r!==0&&r!==f&&(r&d)===0&&(d=f&-f,a=r&-r,d>=a||d===32&&(a&4194048)!==0)?r:f}function Qn(n,r){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&r)===0}function zf(n,r){switch(n){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Uu(){var n=we;return we<<=1,(we&62914560)===0&&(we=4194304),n}function di(n){for(var r=[],a=0;31>a;a++)r.push(n);return r}function As(n,r){n.pendingLanes|=r,r!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function Bf(n,r,a,l,f,d){var b=n.pendingLanes;n.pendingLanes=a,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=a,n.entangledLanes&=a,n.errorRecoveryDisabledLanes&=a,n.shellSuspendCounter=0;var w=n.entanglements,k=n.expirationTimes,G=n.hiddenUpdates;for(a=b&~a;0<a;){var et=31-ve(a),at=1<<et;w[et]=0,k[et]=-1;var Q=G[et];if(Q!==null)for(G[et]=null,et=0;et<Q.length;et++){var W=Q[et];W!==null&&(W.lane&=-536870913)}a&=~at}l!==0&&Ns(n,l,0),d!==0&&f===0&&n.tag!==0&&(n.suspendedLanes|=d&~(b&~r))}function Ns(n,r,a){n.pendingLanes|=r,n.suspendedLanes&=~r;var l=31-ve(r);n.entangledLanes|=r,n.entanglements[l]=n.entanglements[l]|1073741824|a&261930}function Lo(n,r){var a=n.entangledLanes|=r;for(n=n.entanglements;a;){var l=31-ve(a),f=1<<l;f&r|n[l]&r&&(n[l]|=r),a&=~f}}function Po(n,r){var a=r&-r;return a=(a&42)!==0?1:Cs(a),(a&(n.suspendedLanes|r))!==0?0:a}function Cs(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function Hi(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function zu(){var n=U.p;return n!==0?n:(n=window.event,n===void 0?32:ov(n.type))}function Kn(n,r){var a=U.p;try{return U.p=n,r()}finally{U.p=a}}var Xn=Math.random().toString(36).slice(2),Se="__reactFiber$"+Xn,Ue="__reactProps$"+Xn,mi="__reactContainer$"+Xn,_a="__reactEvents$"+Xn,Ff="__reactListeners$"+Xn,Bu="__reactHandles$"+Xn,Fu="__reactResources$"+Xn,pi="__reactMarker$"+Xn;function va(n){delete n[Se],delete n[Ue],delete n[_a],delete n[Ff],delete n[Bu]}function gi(n){var r=n[Se];if(r)return r;for(var a=n.parentNode;a;){if(r=a[mi]||a[Se]){if(a=r.alternate,r.child!==null||a!==null&&a.child!==null)for(n=G_(n);n!==null;){if(a=n[Se])return a;n=G_(n)}return r}n=a,a=n.parentNode}return null}function On(n){if(n=n[Se]||n[mi]){var r=n.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return n}return null}function vn(n){var r=n.tag;if(r===5||r===26||r===27||r===6)return n.stateNode;throw Error(s(33))}function yi(n){var r=n[Fu];return r||(r=n[Fu]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function Ae(n){n[pi]=!0}var Uo=new Set,zo={};function _i(n,r){vi(n,r),vi(n+"Capture",r)}function vi(n,r){for(zo[n]=r,n=0;n<r.length;n++)Uo.add(r[n])}var Bo=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Fo={},qo={};function qu(n){return pe.call(qo,n)?!0:pe.call(Fo,n)?!1:Bo.test(n)?qo[n]=!0:(Fo[n]=!0,!1)}function ba(n,r,a){if(qu(r))if(a===null)n.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":n.removeAttribute(r);return;case"boolean":var l=r.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){n.removeAttribute(r);return}}n.setAttribute(r,""+a)}}function bn(n,r,a){if(a===null)n.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(r);return}n.setAttribute(r,""+a)}}function Ne(n,r,a,l){if(l===null)n.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(a);return}n.setAttributeNS(r,a,""+l)}}function ze(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Sr(n){var r=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function Ho(n,r,a){var l=Object.getOwnPropertyDescriptor(n.constructor.prototype,r);if(!n.hasOwnProperty(r)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var f=l.get,d=l.set;return Object.defineProperty(n,r,{configurable:!0,get:function(){return f.call(this)},set:function(b){a=""+b,d.call(this,b)}}),Object.defineProperty(n,r,{enumerable:l.enumerable}),{getValue:function(){return a},setValue:function(b){a=""+b},stopTracking:function(){n._valueTracker=null,delete n[r]}}}}function Jt(n){if(!n._valueTracker){var r=Sr(n)?"checked":"value";n._valueTracker=Ho(n,r,""+n[r])}}function Rs(n){if(!n)return!1;var r=n._valueTracker;if(!r)return!0;var a=r.getValue(),l="";return n&&(l=Sr(n)?n.checked?"true":"false":n.value),n=l,n!==a?(r.setValue(n),!0):!1}function bi(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var Is=/[\n"\\]/g;function un(n){return n.replace(Is,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function Ea(n,r,a,l,f,d,b,w){n.name="",b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?n.type=b:n.removeAttribute("type"),r!=null?b==="number"?(r===0&&n.value===""||n.value!=r)&&(n.value=""+ze(r)):n.value!==""+ze(r)&&(n.value=""+ze(r)):b!=="submit"&&b!=="reset"||n.removeAttribute("value"),r!=null?Go(n,b,ze(r)):a!=null?Go(n,b,ze(a)):l!=null&&n.removeAttribute("value"),f==null&&d!=null&&(n.defaultChecked=!!d),f!=null&&(n.checked=f&&typeof f!="function"&&typeof f!="symbol"),w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?n.name=""+ze(w):n.removeAttribute("name")}function Hu(n,r,a,l,f,d,b,w){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(n.type=d),r!=null||a!=null){if(!(d!=="submit"&&d!=="reset"||r!=null)){Jt(n);return}a=a!=null?""+ze(a):"",r=r!=null?""+ze(r):a,w||r===n.value||(n.value=r),n.defaultValue=r}l=l??f,l=typeof l!="function"&&typeof l!="symbol"&&!!l,n.checked=w?n.checked:!!l,n.defaultChecked=!!l,b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(n.name=b),Jt(n)}function Go(n,r,a){r==="number"&&bi(n.ownerDocument)===n||n.defaultValue===""+a||(n.defaultValue=""+a)}function Ar(n,r,a,l){if(n=n.options,r){r={};for(var f=0;f<a.length;f++)r["$"+a[f]]=!0;for(a=0;a<n.length;a++)f=r.hasOwnProperty("$"+n[a].value),n[a].selected!==f&&(n[a].selected=f),f&&l&&(n[a].defaultSelected=!0)}else{for(a=""+ze(a),r=null,f=0;f<n.length;f++){if(n[f].value===a){n[f].selected=!0,l&&(n[f].defaultSelected=!0);return}r!==null||n[f].disabled||(r=n[f])}r!==null&&(r.selected=!0)}}function Gu(n,r,a){if(r!=null&&(r=""+ze(r),r!==n.value&&(n.value=r),a==null)){n.defaultValue!==r&&(n.defaultValue=r);return}n.defaultValue=a!=null?""+ze(a):""}function Nr(n,r,a,l){if(r==null){if(l!=null){if(a!=null)throw Error(s(92));if(F(l)){if(1<l.length)throw Error(s(93));l=l[0]}a=l}a==null&&(a=""),r=a}a=ze(r),n.defaultValue=a,l=n.textContent,l===a&&l!==""&&l!==null&&(n.value=l),Jt(n)}function cn(n,r){if(r){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=r;return}}n.textContent=r}var $u=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function $o(n,r,a){var l=r.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?n.setProperty(r,""):r==="float"?n.cssFloat="":n[r]="":l?n.setProperty(r,a):typeof a!="number"||a===0||$u.has(r)?r==="float"?n.cssFloat=a:n[r]=(""+a).trim():n[r]=a+"px"}function Yo(n,r,a){if(r!=null&&typeof r!="object")throw Error(s(62));if(n=n.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||r!=null&&r.hasOwnProperty(l)||(l.indexOf("--")===0?n.setProperty(l,""):l==="float"?n.cssFloat="":n[l]="");for(var f in r)l=r[f],r.hasOwnProperty(f)&&a[f]!==l&&$o(n,f,l)}else for(var d in r)r.hasOwnProperty(d)&&$o(n,d,r[d])}function xa(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Yu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Cr=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ta(n){return Cr.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function Zn(){}var Qo=null;function Mn(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Rr=null,Ei=null;function Ds(n){var r=On(n);if(r&&(n=r.stateNode)){var a=n[Ue]||null;t:switch(n=r.stateNode,r.type){case"input":if(Ea(n,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),r=a.name,a.type==="radio"&&r!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+un(""+r)+'"][type="radio"]'),r=0;r<a.length;r++){var l=a[r];if(l!==n&&l.form===n.form){var f=l[Ue]||null;if(!f)throw Error(s(90));Ea(l,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(r=0;r<a.length;r++)l=a[r],l.form===n.form&&Rs(l)}break t;case"textarea":Gu(n,a.value,a.defaultValue);break t;case"select":r=a.value,r!=null&&Ar(n,!!a.multiple,r,!1)}}}var wa=!1;function Ir(n,r,a){if(wa)return n(r,a);wa=!0;try{var l=n(r);return l}finally{if(wa=!1,(Rr!==null||Ei!==null)&&(zc(),Rr&&(r=Rr,n=Ei,Ei=Rr=null,Ds(r),n)))for(r=0;r<n.length;r++)Ds(n[r])}}function Jn(n,r){var a=n.stateNode;if(a===null)return null;var l=a[Ue]||null;if(l===null)return null;a=l[r];t:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(n=n.type,l=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!l;break t;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(s(231,r,typeof a));return a}var kn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Os=!1;if(kn)try{var ne={};Object.defineProperty(ne,"passive",{get:function(){Os=!0}}),window.addEventListener("test",ne,ne),window.removeEventListener("test",ne,ne)}catch{Os=!1}var xi=null,Ko=null,Ms=null;function Xo(){if(Ms)return Ms;var n,r=Ko,a=r.length,l,f="value"in xi?xi.value:xi.textContent,d=f.length;for(n=0;n<a&&r[n]===f[n];n++);var b=a-n;for(l=1;l<=b&&r[a-l]===f[d-l];l++);return Ms=f.slice(n,1<l?1-l:void 0)}function ks(n){var r=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&r===13&&(n=13)):n=r,n===10&&(n=13),32<=n||n===13?n:0}function Gi(){return!0}function Wn(){return!1}function He(n){function r(a,l,f,d,b){this._reactName=a,this._targetInst=f,this.type=l,this.nativeEvent=d,this.target=b,this.currentTarget=null;for(var w in n)n.hasOwnProperty(w)&&(a=n[w],this[w]=a?a(d):d[w]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?Gi:Wn,this.isPropagationStopped=Wn,this}return E(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Gi)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Gi)},persist:function(){},isPersistent:Gi}),r}var $i={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ti=He($i),Dr=E({},$i,{view:0,detail:0}),Zo=He(Dr),Or,Sa,wi,Aa=E({},Dr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Mr,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==wi&&(wi&&n.type==="mousemove"?(Or=n.screenX-wi.screenX,Sa=n.screenY-wi.screenY):Sa=Or=0,wi=n),Or)},movementY:function(n){return"movementY"in n?n.movementY:Sa}}),Jo=He(Aa),Vs=E({},Aa,{dataTransfer:0}),Qu=He(Vs),Ku=E({},Dr,{relatedTarget:0}),js=He(Ku),Wo=E({},$i,{animationName:0,elapsedTime:0,pseudoElement:0}),Xu=He(Wo),Na=E({},$i,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Zu=He(Na),Ju=E({},$i,{data:0}),Si=He(Ju),Wu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},tc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ec={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function nc(n){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(n):(n=ec[n])?!!r[n]:!1}function Mr(){return nc}var on=E({},Dr,{key:function(n){if(n.key){var r=Wu[n.key]||n.key;if(r!=="Unidentified")return r}return n.type==="keypress"?(n=ks(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?tc[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Mr,charCode:function(n){return n.type==="keypress"?ks(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?ks(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),ic=He(on),rc=E({},Aa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Yi=He(rc),h=E({},Dr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Mr}),y=He(h),x=E({},$i,{propertyName:0,elapsedTime:0,pseudoElement:0}),N=He(x),q=E({},Aa,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Z=He(q),pt=E({},$i,{newState:0,oldState:0}),kt=He(pt),be=[9,13,27,32],Kt=kn&&"CompositionEvent"in window,he=null;kn&&"documentMode"in document&&(he=document.documentMode);var Vn=kn&&"TextEvent"in window&&!he,Ai=kn&&(!Kt||he&&8<he&&11>=he),ti=" ",ei=!1;function Ls(n,r){switch(n){case"keyup":return be.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ca(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Ra=!1;function U1(n,r){switch(n){case"compositionend":return Ca(r);case"keypress":return r.which!==32?null:(ei=!0,ti);case"textInput":return n=r.data,n===ti&&ei?null:n;default:return null}}function z1(n,r){if(Ra)return n==="compositionend"||!Kt&&Ls(n,r)?(n=Xo(),Ms=Ko=xi=null,Ra=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return Ai&&r.locale!=="ko"?null:r.data;default:return null}}var B1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Qg(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r==="input"?!!B1[n.type]:r==="textarea"}function Kg(n,r,a,l){Rr?Ei?Ei.push(l):Ei=[l]:Rr=l,r=Yc(r,"onChange"),0<r.length&&(a=new Ti("onChange","change",null,a,l),n.push({event:a,listeners:r}))}var tl=null,el=null;function F1(n){D_(n,0)}function sc(n){var r=vn(n);if(Rs(r))return n}function Xg(n,r){if(n==="change")return r}var Zg=!1;if(kn){var qf;if(kn){var Hf="oninput"in document;if(!Hf){var Jg=document.createElement("div");Jg.setAttribute("oninput","return;"),Hf=typeof Jg.oninput=="function"}qf=Hf}else qf=!1;Zg=qf&&(!document.documentMode||9<document.documentMode)}function Wg(){tl&&(tl.detachEvent("onpropertychange",ty),el=tl=null)}function ty(n){if(n.propertyName==="value"&&sc(el)){var r=[];Kg(r,el,n,Mn(n)),Ir(F1,r)}}function q1(n,r,a){n==="focusin"?(Wg(),tl=r,el=a,tl.attachEvent("onpropertychange",ty)):n==="focusout"&&Wg()}function H1(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return sc(el)}function G1(n,r){if(n==="click")return sc(r)}function $1(n,r){if(n==="input"||n==="change")return sc(r)}function Y1(n,r){return n===r&&(n!==0||1/n===1/r)||n!==n&&r!==r}var En=typeof Object.is=="function"?Object.is:Y1;function nl(n,r){if(En(n,r))return!0;if(typeof n!="object"||n===null||typeof r!="object"||r===null)return!1;var a=Object.keys(n),l=Object.keys(r);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var f=a[l];if(!pe.call(r,f)||!En(n[f],r[f]))return!1}return!0}function ey(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function ny(n,r){var a=ey(n);n=0;for(var l;a;){if(a.nodeType===3){if(l=n+a.textContent.length,n<=r&&l>=r)return{node:a,offset:r-n};n=l}t:{for(;a;){if(a.nextSibling){a=a.nextSibling;break t}a=a.parentNode}a=void 0}a=ey(a)}}function iy(n,r){return n&&r?n===r?!0:n&&n.nodeType===3?!1:r&&r.nodeType===3?iy(n,r.parentNode):"contains"in n?n.contains(r):n.compareDocumentPosition?!!(n.compareDocumentPosition(r)&16):!1:!1}function ry(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var r=bi(n.document);r instanceof n.HTMLIFrameElement;){try{var a=typeof r.contentWindow.location.href=="string"}catch{a=!1}if(a)n=r.contentWindow;else break;r=bi(n.document)}return r}function Gf(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r&&(r==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||r==="textarea"||n.contentEditable==="true")}var Q1=kn&&"documentMode"in document&&11>=document.documentMode,Ia=null,$f=null,il=null,Yf=!1;function sy(n,r,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Yf||Ia==null||Ia!==bi(l)||(l=Ia,"selectionStart"in l&&Gf(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),il&&nl(il,l)||(il=l,l=Yc($f,"onSelect"),0<l.length&&(r=new Ti("onSelect","select",null,r,a),n.push({event:r,listeners:l}),r.target=Ia)))}function Ps(n,r){var a={};return a[n.toLowerCase()]=r.toLowerCase(),a["Webkit"+n]="webkit"+r,a["Moz"+n]="moz"+r,a}var Da={animationend:Ps("Animation","AnimationEnd"),animationiteration:Ps("Animation","AnimationIteration"),animationstart:Ps("Animation","AnimationStart"),transitionrun:Ps("Transition","TransitionRun"),transitionstart:Ps("Transition","TransitionStart"),transitioncancel:Ps("Transition","TransitionCancel"),transitionend:Ps("Transition","TransitionEnd")},Qf={},ay={};kn&&(ay=document.createElement("div").style,"AnimationEvent"in window||(delete Da.animationend.animation,delete Da.animationiteration.animation,delete Da.animationstart.animation),"TransitionEvent"in window||delete Da.transitionend.transition);function Us(n){if(Qf[n])return Qf[n];if(!Da[n])return n;var r=Da[n],a;for(a in r)if(r.hasOwnProperty(a)&&a in ay)return Qf[n]=r[a];return n}var oy=Us("animationend"),ly=Us("animationiteration"),uy=Us("animationstart"),K1=Us("transitionrun"),X1=Us("transitionstart"),Z1=Us("transitioncancel"),cy=Us("transitionend"),hy=new Map,Kf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Kf.push("scrollEnd");function ni(n,r){hy.set(n,r),_i(r,[n])}var ac=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},jn=[],Oa=0,Xf=0;function oc(){for(var n=Oa,r=Xf=Oa=0;r<n;){var a=jn[r];jn[r++]=null;var l=jn[r];jn[r++]=null;var f=jn[r];jn[r++]=null;var d=jn[r];if(jn[r++]=null,l!==null&&f!==null){var b=l.pending;b===null?f.next=f:(f.next=b.next,b.next=f),l.pending=f}d!==0&&fy(a,f,d)}}function lc(n,r,a,l){jn[Oa++]=n,jn[Oa++]=r,jn[Oa++]=a,jn[Oa++]=l,Xf|=l,n.lanes|=l,n=n.alternate,n!==null&&(n.lanes|=l)}function Zf(n,r,a,l){return lc(n,r,a,l),uc(n)}function zs(n,r){return lc(n,null,null,r),uc(n)}function fy(n,r,a){n.lanes|=a;var l=n.alternate;l!==null&&(l.lanes|=a);for(var f=!1,d=n.return;d!==null;)d.childLanes|=a,l=d.alternate,l!==null&&(l.childLanes|=a),d.tag===22&&(n=d.stateNode,n===null||n._visibility&1||(f=!0)),n=d,d=d.return;return n.tag===3?(d=n.stateNode,f&&r!==null&&(f=31-ve(a),n=d.hiddenUpdates,l=n[f],l===null?n[f]=[r]:l.push(r),r.lane=a|536870912),d):null}function uc(n){if(50<Sl)throw Sl=0,am=null,Error(s(185));for(var r=n.return;r!==null;)n=r,r=n.return;return n.tag===3?n.stateNode:null}var Ma={};function J1(n,r,a,l){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function xn(n,r,a,l){return new J1(n,r,a,l)}function Jf(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Qi(n,r){var a=n.alternate;return a===null?(a=xn(n.tag,r,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=r,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&65011712,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,r=n.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a.refCleanup=n.refCleanup,a}function dy(n,r){n.flags&=65011714;var a=n.alternate;return a===null?(n.childLanes=0,n.lanes=r,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=a.childLanes,n.lanes=a.lanes,n.child=a.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=a.memoizedProps,n.memoizedState=a.memoizedState,n.updateQueue=a.updateQueue,n.type=a.type,r=a.dependencies,n.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),n}function cc(n,r,a,l,f,d){var b=0;if(l=n,typeof n=="function")Jf(n)&&(b=1);else if(typeof n=="string")b=iS(n,a,dt.current)?26:n==="html"||n==="head"||n==="body"?27:5;else t:switch(n){case R:return n=xn(31,a,r,f),n.elementType=R,n.lanes=d,n;case B:return Bs(a.children,f,d,r);case X:b=8,f|=24;break;case ft:return n=xn(12,a,r,f|2),n.elementType=ft,n.lanes=d,n;case mt:return n=xn(13,a,r,f),n.elementType=mt,n.lanes=d,n;case ht:return n=xn(19,a,r,f),n.elementType=ht,n.lanes=d,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case tt:b=10;break t;case $:b=9;break t;case nt:b=11;break t;case C:b=14;break t;case A:b=16,l=null;break t}b=29,a=Error(s(130,n===null?"null":typeof n,"")),l=null}return r=xn(b,a,r,f),r.elementType=n,r.type=l,r.lanes=d,r}function Bs(n,r,a,l){return n=xn(7,n,l,r),n.lanes=a,n}function Wf(n,r,a){return n=xn(6,n,null,r),n.lanes=a,n}function my(n){var r=xn(18,null,null,0);return r.stateNode=n,r}function td(n,r,a){return r=xn(4,n.children!==null?n.children:[],n.key,r),r.lanes=a,r.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},r}var py=new WeakMap;function Ln(n,r){if(typeof n=="object"&&n!==null){var a=py.get(n);return a!==void 0?a:(r={value:n,source:r,stack:xr(r)},py.set(n,r),r)}return{value:n,source:r,stack:xr(r)}}var ka=[],Va=0,hc=null,rl=0,Pn=[],Un=0,kr=null,Ni=1,Ci="";function Ki(n,r){ka[Va++]=rl,ka[Va++]=hc,hc=n,rl=r}function gy(n,r,a){Pn[Un++]=Ni,Pn[Un++]=Ci,Pn[Un++]=kr,kr=n;var l=Ni;n=Ci;var f=32-ve(l)-1;l&=~(1<<f),a+=1;var d=32-ve(r)+f;if(30<d){var b=f-f%5;d=(l&(1<<b)-1).toString(32),l>>=b,f-=b,Ni=1<<32-ve(r)+f|a<<f|l,Ci=d+n}else Ni=1<<d|a<<f|l,Ci=n}function ed(n){n.return!==null&&(Ki(n,1),gy(n,1,0))}function nd(n){for(;n===hc;)hc=ka[--Va],ka[Va]=null,rl=ka[--Va],ka[Va]=null;for(;n===kr;)kr=Pn[--Un],Pn[Un]=null,Ci=Pn[--Un],Pn[Un]=null,Ni=Pn[--Un],Pn[Un]=null}function yy(n,r){Pn[Un++]=Ni,Pn[Un++]=Ci,Pn[Un++]=kr,Ni=r.id,Ci=r.overflow,kr=n}var Ge=null,le=null,Gt=!1,Vr=null,zn=!1,id=Error(s(519));function jr(n){var r=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw sl(Ln(r,n)),id}function _y(n){var r=n.stateNode,a=n.type,l=n.memoizedProps;switch(r[Se]=n,r[Ue]=l,a){case"dialog":Ut("cancel",r),Ut("close",r);break;case"iframe":case"object":case"embed":Ut("load",r);break;case"video":case"audio":for(a=0;a<Nl.length;a++)Ut(Nl[a],r);break;case"source":Ut("error",r);break;case"img":case"image":case"link":Ut("error",r),Ut("load",r);break;case"details":Ut("toggle",r);break;case"input":Ut("invalid",r),Hu(r,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":Ut("invalid",r);break;case"textarea":Ut("invalid",r),Nr(r,l.value,l.defaultValue,l.children)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||r.textContent===""+a||l.suppressHydrationWarning===!0||V_(r.textContent,a)?(l.popover!=null&&(Ut("beforetoggle",r),Ut("toggle",r)),l.onScroll!=null&&Ut("scroll",r),l.onScrollEnd!=null&&Ut("scrollend",r),l.onClick!=null&&(r.onclick=Zn),r=!0):r=!1,r||jr(n,!0)}function vy(n){for(Ge=n.return;Ge;)switch(Ge.tag){case 5:case 31:case 13:zn=!1;return;case 27:case 3:zn=!0;return;default:Ge=Ge.return}}function ja(n){if(n!==Ge)return!1;if(!Gt)return vy(n),Gt=!0,!1;var r=n.tag,a;if((a=r!==3&&r!==27)&&((a=r===5)&&(a=n.type,a=!(a!=="form"&&a!=="button")||Em(n.type,n.memoizedProps)),a=!a),a&&le&&jr(n),vy(n),r===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(317));le=H_(n)}else if(r===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(317));le=H_(n)}else r===27?(r=le,Xr(n.type)?(n=Am,Am=null,le=n):le=r):le=Ge?Fn(n.stateNode.nextSibling):null;return!0}function Fs(){le=Ge=null,Gt=!1}function rd(){var n=Vr;return n!==null&&(mn===null?mn=n:mn.push.apply(mn,n),Vr=null),n}function sl(n){Vr===null?Vr=[n]:Vr.push(n)}var sd=O(null),qs=null,Xi=null;function Lr(n,r,a){ut(sd,r._currentValue),r._currentValue=a}function Zi(n){n._currentValue=sd.current,K(sd)}function ad(n,r,a){for(;n!==null;){var l=n.alternate;if((n.childLanes&r)!==r?(n.childLanes|=r,l!==null&&(l.childLanes|=r)):l!==null&&(l.childLanes&r)!==r&&(l.childLanes|=r),n===a)break;n=n.return}}function od(n,r,a,l){var f=n.child;for(f!==null&&(f.return=n);f!==null;){var d=f.dependencies;if(d!==null){var b=f.child;d=d.firstContext;t:for(;d!==null;){var w=d;d=f;for(var k=0;k<r.length;k++)if(w.context===r[k]){d.lanes|=a,w=d.alternate,w!==null&&(w.lanes|=a),ad(d.return,a,n),l||(b=null);break t}d=w.next}}else if(f.tag===18){if(b=f.return,b===null)throw Error(s(341));b.lanes|=a,d=b.alternate,d!==null&&(d.lanes|=a),ad(b,a,n),b=null}else b=f.child;if(b!==null)b.return=f;else for(b=f;b!==null;){if(b===n){b=null;break}if(f=b.sibling,f!==null){f.return=b.return,b=f;break}b=b.return}f=b}}function La(n,r,a,l){n=null;for(var f=r,d=!1;f!==null;){if(!d){if((f.flags&524288)!==0)d=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var b=f.alternate;if(b===null)throw Error(s(387));if(b=b.memoizedProps,b!==null){var w=f.type;En(f.pendingProps.value,b.value)||(n!==null?n.push(w):n=[w])}}else if(f===gt.current){if(b=f.alternate,b===null)throw Error(s(387));b.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(n!==null?n.push(Ol):n=[Ol])}f=f.return}n!==null&&od(r,n,a,l),r.flags|=262144}function fc(n){for(n=n.firstContext;n!==null;){if(!En(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function Hs(n){qs=n,Xi=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function $e(n){return by(qs,n)}function dc(n,r){return qs===null&&Hs(n),by(n,r)}function by(n,r){var a=r._currentValue;if(r={context:r,memoizedValue:a,next:null},Xi===null){if(n===null)throw Error(s(308));Xi=r,n.dependencies={lanes:0,firstContext:r},n.flags|=524288}else Xi=Xi.next=r;return a}var W1=typeof AbortController<"u"?AbortController:function(){var n=[],r=this.signal={aborted:!1,addEventListener:function(a,l){n.push(l)}};this.abort=function(){r.aborted=!0,n.forEach(function(a){return a()})}},tw=i.unstable_scheduleCallback,ew=i.unstable_NormalPriority,Ce={$$typeof:tt,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ld(){return{controller:new W1,data:new Map,refCount:0}}function al(n){n.refCount--,n.refCount===0&&tw(ew,function(){n.controller.abort()})}var ol=null,ud=0,Pa=0,Ua=null;function nw(n,r){if(ol===null){var a=ol=[];ud=0,Pa=fm(),Ua={status:"pending",value:void 0,then:function(l){a.push(l)}}}return ud++,r.then(Ey,Ey),r}function Ey(){if(--ud===0&&ol!==null){Ua!==null&&(Ua.status="fulfilled");var n=ol;ol=null,Pa=0,Ua=null;for(var r=0;r<n.length;r++)(0,n[r])()}}function iw(n,r){var a=[],l={status:"pending",value:null,reason:null,then:function(f){a.push(f)}};return n.then(function(){l.status="fulfilled",l.value=r;for(var f=0;f<a.length;f++)(0,a[f])(r)},function(f){for(l.status="rejected",l.reason=f,f=0;f<a.length;f++)(0,a[f])(void 0)}),l}var xy=j.S;j.S=function(n,r){s_=an(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&nw(n,r),xy!==null&&xy(n,r)};var Gs=O(null);function cd(){var n=Gs.current;return n!==null?n:oe.pooledCache}function mc(n,r){r===null?ut(Gs,Gs.current):ut(Gs,r.pool)}function Ty(){var n=cd();return n===null?null:{parent:Ce._currentValue,pool:n}}var za=Error(s(460)),hd=Error(s(474)),pc=Error(s(542)),gc={then:function(){}};function wy(n){return n=n.status,n==="fulfilled"||n==="rejected"}function Sy(n,r,a){switch(a=n[a],a===void 0?n.push(r):a!==r&&(r.then(Zn,Zn),r=a),r.status){case"fulfilled":return r.value;case"rejected":throw n=r.reason,Ny(n),n;default:if(typeof r.status=="string")r.then(Zn,Zn);else{if(n=oe,n!==null&&100<n.shellSuspendCounter)throw Error(s(482));n=r,n.status="pending",n.then(function(l){if(r.status==="pending"){var f=r;f.status="fulfilled",f.value=l}},function(l){if(r.status==="pending"){var f=r;f.status="rejected",f.reason=l}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw n=r.reason,Ny(n),n}throw Ys=r,za}}function $s(n){try{var r=n._init;return r(n._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(Ys=a,za):a}}var Ys=null;function Ay(){if(Ys===null)throw Error(s(459));var n=Ys;return Ys=null,n}function Ny(n){if(n===za||n===pc)throw Error(s(483))}var Ba=null,ll=0;function yc(n){var r=ll;return ll+=1,Ba===null&&(Ba=[]),Sy(Ba,n,r)}function ul(n,r){r=r.props.ref,n.ref=r!==void 0?r:null}function _c(n,r){throw r.$$typeof===T?Error(s(525)):(n=Object.prototype.toString.call(r),Error(s(31,n==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":n)))}function Cy(n){function r(z,L){if(n){var H=z.deletions;H===null?(z.deletions=[L],z.flags|=16):H.push(L)}}function a(z,L){if(!n)return null;for(;L!==null;)r(z,L),L=L.sibling;return null}function l(z){for(var L=new Map;z!==null;)z.key!==null?L.set(z.key,z):L.set(z.index,z),z=z.sibling;return L}function f(z,L){return z=Qi(z,L),z.index=0,z.sibling=null,z}function d(z,L,H){return z.index=H,n?(H=z.alternate,H!==null?(H=H.index,H<L?(z.flags|=67108866,L):H):(z.flags|=67108866,L)):(z.flags|=1048576,L)}function b(z){return n&&z.alternate===null&&(z.flags|=67108866),z}function w(z,L,H,it){return L===null||L.tag!==6?(L=Wf(H,z.mode,it),L.return=z,L):(L=f(L,H),L.return=z,L)}function k(z,L,H,it){var Tt=H.type;return Tt===B?et(z,L,H.props.children,it,H.key):L!==null&&(L.elementType===Tt||typeof Tt=="object"&&Tt!==null&&Tt.$$typeof===A&&$s(Tt)===L.type)?(L=f(L,H.props),ul(L,H),L.return=z,L):(L=cc(H.type,H.key,H.props,null,z.mode,it),ul(L,H),L.return=z,L)}function G(z,L,H,it){return L===null||L.tag!==4||L.stateNode.containerInfo!==H.containerInfo||L.stateNode.implementation!==H.implementation?(L=td(H,z.mode,it),L.return=z,L):(L=f(L,H.children||[]),L.return=z,L)}function et(z,L,H,it,Tt){return L===null||L.tag!==7?(L=Bs(H,z.mode,it,Tt),L.return=z,L):(L=f(L,H),L.return=z,L)}function at(z,L,H){if(typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint")return L=Wf(""+L,z.mode,H),L.return=z,L;if(typeof L=="object"&&L!==null){switch(L.$$typeof){case I:return H=cc(L.type,L.key,L.props,null,z.mode,H),ul(H,L),H.return=z,H;case P:return L=td(L,z.mode,H),L.return=z,L;case A:return L=$s(L),at(z,L,H)}if(F(L)||D(L))return L=Bs(L,z.mode,H,null),L.return=z,L;if(typeof L.then=="function")return at(z,yc(L),H);if(L.$$typeof===tt)return at(z,dc(z,L),H);_c(z,L)}return null}function Q(z,L,H,it){var Tt=L!==null?L.key:null;if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return Tt!==null?null:w(z,L,""+H,it);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case I:return H.key===Tt?k(z,L,H,it):null;case P:return H.key===Tt?G(z,L,H,it):null;case A:return H=$s(H),Q(z,L,H,it)}if(F(H)||D(H))return Tt!==null?null:et(z,L,H,it,null);if(typeof H.then=="function")return Q(z,L,yc(H),it);if(H.$$typeof===tt)return Q(z,L,dc(z,H),it);_c(z,H)}return null}function W(z,L,H,it,Tt){if(typeof it=="string"&&it!==""||typeof it=="number"||typeof it=="bigint")return z=z.get(H)||null,w(L,z,""+it,Tt);if(typeof it=="object"&&it!==null){switch(it.$$typeof){case I:return z=z.get(it.key===null?H:it.key)||null,k(L,z,it,Tt);case P:return z=z.get(it.key===null?H:it.key)||null,G(L,z,it,Tt);case A:return it=$s(it),W(z,L,H,it,Tt)}if(F(it)||D(it))return z=z.get(H)||null,et(L,z,it,Tt,null);if(typeof it.then=="function")return W(z,L,H,yc(it),Tt);if(it.$$typeof===tt)return W(z,L,H,dc(L,it),Tt);_c(L,it)}return null}function vt(z,L,H,it){for(var Tt=null,Yt=null,bt=L,jt=L=0,Bt=null;bt!==null&&jt<H.length;jt++){bt.index>jt?(Bt=bt,bt=null):Bt=bt.sibling;var Qt=Q(z,bt,H[jt],it);if(Qt===null){bt===null&&(bt=Bt);break}n&&bt&&Qt.alternate===null&&r(z,bt),L=d(Qt,L,jt),Yt===null?Tt=Qt:Yt.sibling=Qt,Yt=Qt,bt=Bt}if(jt===H.length)return a(z,bt),Gt&&Ki(z,jt),Tt;if(bt===null){for(;jt<H.length;jt++)bt=at(z,H[jt],it),bt!==null&&(L=d(bt,L,jt),Yt===null?Tt=bt:Yt.sibling=bt,Yt=bt);return Gt&&Ki(z,jt),Tt}for(bt=l(bt);jt<H.length;jt++)Bt=W(bt,z,jt,H[jt],it),Bt!==null&&(n&&Bt.alternate!==null&&bt.delete(Bt.key===null?jt:Bt.key),L=d(Bt,L,jt),Yt===null?Tt=Bt:Yt.sibling=Bt,Yt=Bt);return n&&bt.forEach(function(es){return r(z,es)}),Gt&&Ki(z,jt),Tt}function Nt(z,L,H,it){if(H==null)throw Error(s(151));for(var Tt=null,Yt=null,bt=L,jt=L=0,Bt=null,Qt=H.next();bt!==null&&!Qt.done;jt++,Qt=H.next()){bt.index>jt?(Bt=bt,bt=null):Bt=bt.sibling;var es=Q(z,bt,Qt.value,it);if(es===null){bt===null&&(bt=Bt);break}n&&bt&&es.alternate===null&&r(z,bt),L=d(es,L,jt),Yt===null?Tt=es:Yt.sibling=es,Yt=es,bt=Bt}if(Qt.done)return a(z,bt),Gt&&Ki(z,jt),Tt;if(bt===null){for(;!Qt.done;jt++,Qt=H.next())Qt=at(z,Qt.value,it),Qt!==null&&(L=d(Qt,L,jt),Yt===null?Tt=Qt:Yt.sibling=Qt,Yt=Qt);return Gt&&Ki(z,jt),Tt}for(bt=l(bt);!Qt.done;jt++,Qt=H.next())Qt=W(bt,z,jt,Qt.value,it),Qt!==null&&(n&&Qt.alternate!==null&&bt.delete(Qt.key===null?jt:Qt.key),L=d(Qt,L,jt),Yt===null?Tt=Qt:Yt.sibling=Qt,Yt=Qt);return n&&bt.forEach(function(mS){return r(z,mS)}),Gt&&Ki(z,jt),Tt}function se(z,L,H,it){if(typeof H=="object"&&H!==null&&H.type===B&&H.key===null&&(H=H.props.children),typeof H=="object"&&H!==null){switch(H.$$typeof){case I:t:{for(var Tt=H.key;L!==null;){if(L.key===Tt){if(Tt=H.type,Tt===B){if(L.tag===7){a(z,L.sibling),it=f(L,H.props.children),it.return=z,z=it;break t}}else if(L.elementType===Tt||typeof Tt=="object"&&Tt!==null&&Tt.$$typeof===A&&$s(Tt)===L.type){a(z,L.sibling),it=f(L,H.props),ul(it,H),it.return=z,z=it;break t}a(z,L);break}else r(z,L);L=L.sibling}H.type===B?(it=Bs(H.props.children,z.mode,it,H.key),it.return=z,z=it):(it=cc(H.type,H.key,H.props,null,z.mode,it),ul(it,H),it.return=z,z=it)}return b(z);case P:t:{for(Tt=H.key;L!==null;){if(L.key===Tt)if(L.tag===4&&L.stateNode.containerInfo===H.containerInfo&&L.stateNode.implementation===H.implementation){a(z,L.sibling),it=f(L,H.children||[]),it.return=z,z=it;break t}else{a(z,L);break}else r(z,L);L=L.sibling}it=td(H,z.mode,it),it.return=z,z=it}return b(z);case A:return H=$s(H),se(z,L,H,it)}if(F(H))return vt(z,L,H,it);if(D(H)){if(Tt=D(H),typeof Tt!="function")throw Error(s(150));return H=Tt.call(H),Nt(z,L,H,it)}if(typeof H.then=="function")return se(z,L,yc(H),it);if(H.$$typeof===tt)return se(z,L,dc(z,H),it);_c(z,H)}return typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint"?(H=""+H,L!==null&&L.tag===6?(a(z,L.sibling),it=f(L,H),it.return=z,z=it):(a(z,L),it=Wf(H,z.mode,it),it.return=z,z=it),b(z)):a(z,L)}return function(z,L,H,it){try{ll=0;var Tt=se(z,L,H,it);return Ba=null,Tt}catch(bt){if(bt===za||bt===pc)throw bt;var Yt=xn(29,bt,null,z.mode);return Yt.lanes=it,Yt.return=z,Yt}finally{}}}var Qs=Cy(!0),Ry=Cy(!1),Pr=!1;function fd(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function dd(n,r){n=n.updateQueue,r.updateQueue===n&&(r.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function Ur(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function zr(n,r,a){var l=n.updateQueue;if(l===null)return null;if(l=l.shared,(Xt&2)!==0){var f=l.pending;return f===null?r.next=r:(r.next=f.next,f.next=r),l.pending=r,r=uc(n),fy(n,null,a),r}return lc(n,l,r,a),uc(n)}function cl(n,r,a){if(r=r.updateQueue,r!==null&&(r=r.shared,(a&4194048)!==0)){var l=r.lanes;l&=n.pendingLanes,a|=l,r.lanes=a,Lo(n,a)}}function md(n,r){var a=n.updateQueue,l=n.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var f=null,d=null;if(a=a.firstBaseUpdate,a!==null){do{var b={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};d===null?f=d=b:d=d.next=b,a=a.next}while(a!==null);d===null?f=d=r:d=d.next=r}else f=d=r;a={baseState:l.baseState,firstBaseUpdate:f,lastBaseUpdate:d,shared:l.shared,callbacks:l.callbacks},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=r:n.next=r,a.lastBaseUpdate=r}var pd=!1;function hl(){if(pd){var n=Ua;if(n!==null)throw n}}function fl(n,r,a,l){pd=!1;var f=n.updateQueue;Pr=!1;var d=f.firstBaseUpdate,b=f.lastBaseUpdate,w=f.shared.pending;if(w!==null){f.shared.pending=null;var k=w,G=k.next;k.next=null,b===null?d=G:b.next=G,b=k;var et=n.alternate;et!==null&&(et=et.updateQueue,w=et.lastBaseUpdate,w!==b&&(w===null?et.firstBaseUpdate=G:w.next=G,et.lastBaseUpdate=k))}if(d!==null){var at=f.baseState;b=0,et=G=k=null,w=d;do{var Q=w.lane&-536870913,W=Q!==w.lane;if(W?(zt&Q)===Q:(l&Q)===Q){Q!==0&&Q===Pa&&(pd=!0),et!==null&&(et=et.next={lane:0,tag:w.tag,payload:w.payload,callback:null,next:null});t:{var vt=n,Nt=w;Q=r;var se=a;switch(Nt.tag){case 1:if(vt=Nt.payload,typeof vt=="function"){at=vt.call(se,at,Q);break t}at=vt;break t;case 3:vt.flags=vt.flags&-65537|128;case 0:if(vt=Nt.payload,Q=typeof vt=="function"?vt.call(se,at,Q):vt,Q==null)break t;at=E({},at,Q);break t;case 2:Pr=!0}}Q=w.callback,Q!==null&&(n.flags|=64,W&&(n.flags|=8192),W=f.callbacks,W===null?f.callbacks=[Q]:W.push(Q))}else W={lane:Q,tag:w.tag,payload:w.payload,callback:w.callback,next:null},et===null?(G=et=W,k=at):et=et.next=W,b|=Q;if(w=w.next,w===null){if(w=f.shared.pending,w===null)break;W=w,w=W.next,W.next=null,f.lastBaseUpdate=W,f.shared.pending=null}}while(!0);et===null&&(k=at),f.baseState=k,f.firstBaseUpdate=G,f.lastBaseUpdate=et,d===null&&(f.shared.lanes=0),Gr|=b,n.lanes=b,n.memoizedState=at}}function Iy(n,r){if(typeof n!="function")throw Error(s(191,n));n.call(r)}function Dy(n,r){var a=n.callbacks;if(a!==null)for(n.callbacks=null,n=0;n<a.length;n++)Iy(a[n],r)}var Fa=O(null),vc=O(0);function Oy(n,r){n=ar,ut(vc,n),ut(Fa,r),ar=n|r.baseLanes}function gd(){ut(vc,ar),ut(Fa,Fa.current)}function yd(){ar=vc.current,K(Fa),K(vc)}var Tn=O(null),Bn=null;function Br(n){var r=n.alternate;ut(Ee,Ee.current&1),ut(Tn,n),Bn===null&&(r===null||Fa.current!==null||r.memoizedState!==null)&&(Bn=n)}function _d(n){ut(Ee,Ee.current),ut(Tn,n),Bn===null&&(Bn=n)}function My(n){n.tag===22?(ut(Ee,Ee.current),ut(Tn,n),Bn===null&&(Bn=n)):Fr()}function Fr(){ut(Ee,Ee.current),ut(Tn,Tn.current)}function wn(n){K(Tn),Bn===n&&(Bn=null),K(Ee)}var Ee=O(0);function bc(n){for(var r=n;r!==null;){if(r.tag===13){var a=r.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||wm(a)||Sm(a)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var Ji=0,Vt=null,ie=null,Re=null,Ec=!1,qa=!1,Ks=!1,xc=0,dl=0,Ha=null,rw=0;function ye(){throw Error(s(321))}function vd(n,r){if(r===null)return!1;for(var a=0;a<r.length&&a<n.length;a++)if(!En(n[a],r[a]))return!1;return!0}function bd(n,r,a,l,f,d){return Ji=d,Vt=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,j.H=n===null||n.memoizedState===null?g0:Vd,Ks=!1,d=a(l,f),Ks=!1,qa&&(d=Vy(r,a,l,f)),ky(n),d}function ky(n){j.H=gl;var r=ie!==null&&ie.next!==null;if(Ji=0,Re=ie=Vt=null,Ec=!1,dl=0,Ha=null,r)throw Error(s(300));n===null||Ie||(n=n.dependencies,n!==null&&fc(n)&&(Ie=!0))}function Vy(n,r,a,l){Vt=n;var f=0;do{if(qa&&(Ha=null),dl=0,qa=!1,25<=f)throw Error(s(301));if(f+=1,Re=ie=null,n.updateQueue!=null){var d=n.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}j.H=y0,d=r(a,l)}while(qa);return d}function sw(){var n=j.H,r=n.useState()[0];return r=typeof r.then=="function"?ml(r):r,n=n.useState()[0],(ie!==null?ie.memoizedState:null)!==n&&(Vt.flags|=1024),r}function Ed(){var n=xc!==0;return xc=0,n}function xd(n,r,a){r.updateQueue=n.updateQueue,r.flags&=-2053,n.lanes&=~a}function Td(n){if(Ec){for(n=n.memoizedState;n!==null;){var r=n.queue;r!==null&&(r.pending=null),n=n.next}Ec=!1}Ji=0,Re=ie=Vt=null,qa=!1,dl=xc=0,Ha=null}function ln(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Re===null?Vt.memoizedState=Re=n:Re=Re.next=n,Re}function xe(){if(ie===null){var n=Vt.alternate;n=n!==null?n.memoizedState:null}else n=ie.next;var r=Re===null?Vt.memoizedState:Re.next;if(r!==null)Re=r,ie=n;else{if(n===null)throw Vt.alternate===null?Error(s(467)):Error(s(310));ie=n,n={memoizedState:ie.memoizedState,baseState:ie.baseState,baseQueue:ie.baseQueue,queue:ie.queue,next:null},Re===null?Vt.memoizedState=Re=n:Re=Re.next=n}return Re}function Tc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ml(n){var r=dl;return dl+=1,Ha===null&&(Ha=[]),n=Sy(Ha,n,r),r=Vt,(Re===null?r.memoizedState:Re.next)===null&&(r=r.alternate,j.H=r===null||r.memoizedState===null?g0:Vd),n}function wc(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return ml(n);if(n.$$typeof===tt)return $e(n)}throw Error(s(438,String(n)))}function wd(n){var r=null,a=Vt.updateQueue;if(a!==null&&(r=a.memoCache),r==null){var l=Vt.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(r={data:l.data.map(function(f){return f.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),a===null&&(a=Tc(),Vt.updateQueue=a),a.memoCache=r,a=r.data[r.index],a===void 0)for(a=r.data[r.index]=Array(n),l=0;l<n;l++)a[l]=V;return r.index++,a}function Wi(n,r){return typeof r=="function"?r(n):r}function Sc(n){var r=xe();return Sd(r,ie,n)}function Sd(n,r,a){var l=n.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=a;var f=n.baseQueue,d=l.pending;if(d!==null){if(f!==null){var b=f.next;f.next=d.next,d.next=b}r.baseQueue=f=d,l.pending=null}if(d=n.baseState,f===null)n.memoizedState=d;else{r=f.next;var w=b=null,k=null,G=r,et=!1;do{var at=G.lane&-536870913;if(at!==G.lane?(zt&at)===at:(Ji&at)===at){var Q=G.revertLane;if(Q===0)k!==null&&(k=k.next={lane:0,revertLane:0,gesture:null,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null}),at===Pa&&(et=!0);else if((Ji&Q)===Q){G=G.next,Q===Pa&&(et=!0);continue}else at={lane:0,revertLane:G.revertLane,gesture:null,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},k===null?(w=k=at,b=d):k=k.next=at,Vt.lanes|=Q,Gr|=Q;at=G.action,Ks&&a(d,at),d=G.hasEagerState?G.eagerState:a(d,at)}else Q={lane:at,revertLane:G.revertLane,gesture:G.gesture,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},k===null?(w=k=Q,b=d):k=k.next=Q,Vt.lanes|=at,Gr|=at;G=G.next}while(G!==null&&G!==r);if(k===null?b=d:k.next=w,!En(d,n.memoizedState)&&(Ie=!0,et&&(a=Ua,a!==null)))throw a;n.memoizedState=d,n.baseState=b,n.baseQueue=k,l.lastRenderedState=d}return f===null&&(l.lanes=0),[n.memoizedState,l.dispatch]}function Ad(n){var r=xe(),a=r.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=n;var l=a.dispatch,f=a.pending,d=r.memoizedState;if(f!==null){a.pending=null;var b=f=f.next;do d=n(d,b.action),b=b.next;while(b!==f);En(d,r.memoizedState)||(Ie=!0),r.memoizedState=d,r.baseQueue===null&&(r.baseState=d),a.lastRenderedState=d}return[d,l]}function jy(n,r,a){var l=Vt,f=xe(),d=Gt;if(d){if(a===void 0)throw Error(s(407));a=a()}else a=r();var b=!En((ie||f).memoizedState,a);if(b&&(f.memoizedState=a,Ie=!0),f=f.queue,Rd(Uy.bind(null,l,f,n),[n]),f.getSnapshot!==r||b||Re!==null&&Re.memoizedState.tag&1){if(l.flags|=2048,Ga(9,{destroy:void 0},Py.bind(null,l,f,a,r),null),oe===null)throw Error(s(349));d||(Ji&127)!==0||Ly(l,r,a)}return a}function Ly(n,r,a){n.flags|=16384,n={getSnapshot:r,value:a},r=Vt.updateQueue,r===null?(r=Tc(),Vt.updateQueue=r,r.stores=[n]):(a=r.stores,a===null?r.stores=[n]:a.push(n))}function Py(n,r,a,l){r.value=a,r.getSnapshot=l,zy(r)&&By(n)}function Uy(n,r,a){return a(function(){zy(r)&&By(n)})}function zy(n){var r=n.getSnapshot;n=n.value;try{var a=r();return!En(n,a)}catch{return!0}}function By(n){var r=zs(n,2);r!==null&&pn(r,n,2)}function Nd(n){var r=ln();if(typeof n=="function"){var a=n;if(n=a(),Ks){Dn(!0);try{a()}finally{Dn(!1)}}}return r.memoizedState=r.baseState=n,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wi,lastRenderedState:n},r}function Fy(n,r,a,l){return n.baseState=a,Sd(n,ie,typeof l=="function"?l:Wi)}function aw(n,r,a,l,f){if(Cc(n))throw Error(s(485));if(n=r.action,n!==null){var d={payload:f,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(b){d.listeners.push(b)}};j.T!==null?a(!0):d.isTransition=!1,l(d),a=r.pending,a===null?(d.next=r.pending=d,qy(r,d)):(d.next=a.next,r.pending=a.next=d)}}function qy(n,r){var a=r.action,l=r.payload,f=n.state;if(r.isTransition){var d=j.T,b={};j.T=b;try{var w=a(f,l),k=j.S;k!==null&&k(b,w),Hy(n,r,w)}catch(G){Cd(n,r,G)}finally{d!==null&&b.types!==null&&(d.types=b.types),j.T=d}}else try{d=a(f,l),Hy(n,r,d)}catch(G){Cd(n,r,G)}}function Hy(n,r,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){Gy(n,r,l)},function(l){return Cd(n,r,l)}):Gy(n,r,a)}function Gy(n,r,a){r.status="fulfilled",r.value=a,$y(r),n.state=a,r=n.pending,r!==null&&(a=r.next,a===r?n.pending=null:(a=a.next,r.next=a,qy(n,a)))}function Cd(n,r,a){var l=n.pending;if(n.pending=null,l!==null){l=l.next;do r.status="rejected",r.reason=a,$y(r),r=r.next;while(r!==l)}n.action=null}function $y(n){n=n.listeners;for(var r=0;r<n.length;r++)(0,n[r])()}function Yy(n,r){return r}function Qy(n,r){if(Gt){var a=oe.formState;if(a!==null){t:{var l=Vt;if(Gt){if(le){e:{for(var f=le,d=zn;f.nodeType!==8;){if(!d){f=null;break e}if(f=Fn(f.nextSibling),f===null){f=null;break e}}d=f.data,f=d==="F!"||d==="F"?f:null}if(f){le=Fn(f.nextSibling),l=f.data==="F!";break t}}jr(l)}l=!1}l&&(r=a[0])}}return a=ln(),a.memoizedState=a.baseState=r,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Yy,lastRenderedState:r},a.queue=l,a=d0.bind(null,Vt,l),l.dispatch=a,l=Nd(!1),d=kd.bind(null,Vt,!1,l.queue),l=ln(),f={state:r,dispatch:null,action:n,pending:null},l.queue=f,a=aw.bind(null,Vt,f,d,a),f.dispatch=a,l.memoizedState=n,[r,a,!1]}function Ky(n){var r=xe();return Xy(r,ie,n)}function Xy(n,r,a){if(r=Sd(n,r,Yy)[0],n=Sc(Wi)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var l=ml(r)}catch(b){throw b===za?pc:b}else l=r;r=xe();var f=r.queue,d=f.dispatch;return a!==r.memoizedState&&(Vt.flags|=2048,Ga(9,{destroy:void 0},ow.bind(null,f,a),null)),[l,d,n]}function ow(n,r){n.action=r}function Zy(n){var r=xe(),a=ie;if(a!==null)return Xy(r,a,n);xe(),r=r.memoizedState,a=xe();var l=a.queue.dispatch;return a.memoizedState=n,[r,l,!1]}function Ga(n,r,a,l){return n={tag:n,create:a,deps:l,inst:r,next:null},r=Vt.updateQueue,r===null&&(r=Tc(),Vt.updateQueue=r),a=r.lastEffect,a===null?r.lastEffect=n.next=n:(l=a.next,a.next=n,n.next=l,r.lastEffect=n),n}function Jy(){return xe().memoizedState}function Ac(n,r,a,l){var f=ln();Vt.flags|=n,f.memoizedState=Ga(1|r,{destroy:void 0},a,l===void 0?null:l)}function Nc(n,r,a,l){var f=xe();l=l===void 0?null:l;var d=f.memoizedState.inst;ie!==null&&l!==null&&vd(l,ie.memoizedState.deps)?f.memoizedState=Ga(r,d,a,l):(Vt.flags|=n,f.memoizedState=Ga(1|r,d,a,l))}function Wy(n,r){Ac(8390656,8,n,r)}function Rd(n,r){Nc(2048,8,n,r)}function lw(n){Vt.flags|=4;var r=Vt.updateQueue;if(r===null)r=Tc(),Vt.updateQueue=r,r.events=[n];else{var a=r.events;a===null?r.events=[n]:a.push(n)}}function t0(n){var r=xe().memoizedState;return lw({ref:r,nextImpl:n}),function(){if((Xt&2)!==0)throw Error(s(440));return r.impl.apply(void 0,arguments)}}function e0(n,r){return Nc(4,2,n,r)}function n0(n,r){return Nc(4,4,n,r)}function i0(n,r){if(typeof r=="function"){n=n();var a=r(n);return function(){typeof a=="function"?a():r(null)}}if(r!=null)return n=n(),r.current=n,function(){r.current=null}}function r0(n,r,a){a=a!=null?a.concat([n]):null,Nc(4,4,i0.bind(null,r,n),a)}function Id(){}function s0(n,r){var a=xe();r=r===void 0?null:r;var l=a.memoizedState;return r!==null&&vd(r,l[1])?l[0]:(a.memoizedState=[n,r],n)}function a0(n,r){var a=xe();r=r===void 0?null:r;var l=a.memoizedState;if(r!==null&&vd(r,l[1]))return l[0];if(l=n(),Ks){Dn(!0);try{n()}finally{Dn(!1)}}return a.memoizedState=[l,r],l}function Dd(n,r,a){return a===void 0||(Ji&1073741824)!==0&&(zt&261930)===0?n.memoizedState=r:(n.memoizedState=a,n=o_(),Vt.lanes|=n,Gr|=n,a)}function o0(n,r,a,l){return En(a,r)?a:Fa.current!==null?(n=Dd(n,a,l),En(n,r)||(Ie=!0),n):(Ji&42)===0||(Ji&1073741824)!==0&&(zt&261930)===0?(Ie=!0,n.memoizedState=a):(n=o_(),Vt.lanes|=n,Gr|=n,r)}function l0(n,r,a,l,f){var d=U.p;U.p=d!==0&&8>d?d:8;var b=j.T,w={};j.T=w,kd(n,!1,r,a);try{var k=f(),G=j.S;if(G!==null&&G(w,k),k!==null&&typeof k=="object"&&typeof k.then=="function"){var et=iw(k,l);pl(n,r,et,Nn(n))}else pl(n,r,l,Nn(n))}catch(at){pl(n,r,{then:function(){},status:"rejected",reason:at},Nn())}finally{U.p=d,b!==null&&w.types!==null&&(b.types=w.types),j.T=b}}function uw(){}function Od(n,r,a,l){if(n.tag!==5)throw Error(s(476));var f=u0(n).queue;l0(n,f,r,J,a===null?uw:function(){return c0(n),a(l)})}function u0(n){var r=n.memoizedState;if(r!==null)return r;r={memoizedState:J,baseState:J,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wi,lastRenderedState:J},next:null};var a={};return r.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wi,lastRenderedState:a},next:null},n.memoizedState=r,n=n.alternate,n!==null&&(n.memoizedState=r),r}function c0(n){var r=u0(n);r.next===null&&(r=n.alternate.memoizedState),pl(n,r.next.queue,{},Nn())}function Md(){return $e(Ol)}function h0(){return xe().memoizedState}function f0(){return xe().memoizedState}function cw(n){for(var r=n.return;r!==null;){switch(r.tag){case 24:case 3:var a=Nn();n=Ur(a);var l=zr(r,n,a);l!==null&&(pn(l,r,a),cl(l,r,a)),r={cache:ld()},n.payload=r;return}r=r.return}}function hw(n,r,a){var l=Nn();a={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Cc(n)?m0(r,a):(a=Zf(n,r,a,l),a!==null&&(pn(a,n,l),p0(a,r,l)))}function d0(n,r,a){var l=Nn();pl(n,r,a,l)}function pl(n,r,a,l){var f={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(Cc(n))m0(r,f);else{var d=n.alternate;if(n.lanes===0&&(d===null||d.lanes===0)&&(d=r.lastRenderedReducer,d!==null))try{var b=r.lastRenderedState,w=d(b,a);if(f.hasEagerState=!0,f.eagerState=w,En(w,b))return lc(n,r,f,0),oe===null&&oc(),!1}catch{}finally{}if(a=Zf(n,r,f,l),a!==null)return pn(a,n,l),p0(a,r,l),!0}return!1}function kd(n,r,a,l){if(l={lane:2,revertLane:fm(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Cc(n)){if(r)throw Error(s(479))}else r=Zf(n,a,l,2),r!==null&&pn(r,n,2)}function Cc(n){var r=n.alternate;return n===Vt||r!==null&&r===Vt}function m0(n,r){qa=Ec=!0;var a=n.pending;a===null?r.next=r:(r.next=a.next,a.next=r),n.pending=r}function p0(n,r,a){if((a&4194048)!==0){var l=r.lanes;l&=n.pendingLanes,a|=l,r.lanes=a,Lo(n,a)}}var gl={readContext:$e,use:wc,useCallback:ye,useContext:ye,useEffect:ye,useImperativeHandle:ye,useLayoutEffect:ye,useInsertionEffect:ye,useMemo:ye,useReducer:ye,useRef:ye,useState:ye,useDebugValue:ye,useDeferredValue:ye,useTransition:ye,useSyncExternalStore:ye,useId:ye,useHostTransitionStatus:ye,useFormState:ye,useActionState:ye,useOptimistic:ye,useMemoCache:ye,useCacheRefresh:ye};gl.useEffectEvent=ye;var g0={readContext:$e,use:wc,useCallback:function(n,r){return ln().memoizedState=[n,r===void 0?null:r],n},useContext:$e,useEffect:Wy,useImperativeHandle:function(n,r,a){a=a!=null?a.concat([n]):null,Ac(4194308,4,i0.bind(null,r,n),a)},useLayoutEffect:function(n,r){return Ac(4194308,4,n,r)},useInsertionEffect:function(n,r){Ac(4,2,n,r)},useMemo:function(n,r){var a=ln();r=r===void 0?null:r;var l=n();if(Ks){Dn(!0);try{n()}finally{Dn(!1)}}return a.memoizedState=[l,r],l},useReducer:function(n,r,a){var l=ln();if(a!==void 0){var f=a(r);if(Ks){Dn(!0);try{a(r)}finally{Dn(!1)}}}else f=r;return l.memoizedState=l.baseState=f,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:f},l.queue=n,n=n.dispatch=hw.bind(null,Vt,n),[l.memoizedState,n]},useRef:function(n){var r=ln();return n={current:n},r.memoizedState=n},useState:function(n){n=Nd(n);var r=n.queue,a=d0.bind(null,Vt,r);return r.dispatch=a,[n.memoizedState,a]},useDebugValue:Id,useDeferredValue:function(n,r){var a=ln();return Dd(a,n,r)},useTransition:function(){var n=Nd(!1);return n=l0.bind(null,Vt,n.queue,!0,!1),ln().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,r,a){var l=Vt,f=ln();if(Gt){if(a===void 0)throw Error(s(407));a=a()}else{if(a=r(),oe===null)throw Error(s(349));(zt&127)!==0||Ly(l,r,a)}f.memoizedState=a;var d={value:a,getSnapshot:r};return f.queue=d,Wy(Uy.bind(null,l,d,n),[n]),l.flags|=2048,Ga(9,{destroy:void 0},Py.bind(null,l,d,a,r),null),a},useId:function(){var n=ln(),r=oe.identifierPrefix;if(Gt){var a=Ci,l=Ni;a=(l&~(1<<32-ve(l)-1)).toString(32)+a,r="_"+r+"R_"+a,a=xc++,0<a&&(r+="H"+a.toString(32)),r+="_"}else a=rw++,r="_"+r+"r_"+a.toString(32)+"_";return n.memoizedState=r},useHostTransitionStatus:Md,useFormState:Qy,useActionState:Qy,useOptimistic:function(n){var r=ln();r.memoizedState=r.baseState=n;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=a,r=kd.bind(null,Vt,!0,a),a.dispatch=r,[n,r]},useMemoCache:wd,useCacheRefresh:function(){return ln().memoizedState=cw.bind(null,Vt)},useEffectEvent:function(n){var r=ln(),a={impl:n};return r.memoizedState=a,function(){if((Xt&2)!==0)throw Error(s(440));return a.impl.apply(void 0,arguments)}}},Vd={readContext:$e,use:wc,useCallback:s0,useContext:$e,useEffect:Rd,useImperativeHandle:r0,useInsertionEffect:e0,useLayoutEffect:n0,useMemo:a0,useReducer:Sc,useRef:Jy,useState:function(){return Sc(Wi)},useDebugValue:Id,useDeferredValue:function(n,r){var a=xe();return o0(a,ie.memoizedState,n,r)},useTransition:function(){var n=Sc(Wi)[0],r=xe().memoizedState;return[typeof n=="boolean"?n:ml(n),r]},useSyncExternalStore:jy,useId:h0,useHostTransitionStatus:Md,useFormState:Ky,useActionState:Ky,useOptimistic:function(n,r){var a=xe();return Fy(a,ie,n,r)},useMemoCache:wd,useCacheRefresh:f0};Vd.useEffectEvent=t0;var y0={readContext:$e,use:wc,useCallback:s0,useContext:$e,useEffect:Rd,useImperativeHandle:r0,useInsertionEffect:e0,useLayoutEffect:n0,useMemo:a0,useReducer:Ad,useRef:Jy,useState:function(){return Ad(Wi)},useDebugValue:Id,useDeferredValue:function(n,r){var a=xe();return ie===null?Dd(a,n,r):o0(a,ie.memoizedState,n,r)},useTransition:function(){var n=Ad(Wi)[0],r=xe().memoizedState;return[typeof n=="boolean"?n:ml(n),r]},useSyncExternalStore:jy,useId:h0,useHostTransitionStatus:Md,useFormState:Zy,useActionState:Zy,useOptimistic:function(n,r){var a=xe();return ie!==null?Fy(a,ie,n,r):(a.baseState=n,[n,a.queue.dispatch])},useMemoCache:wd,useCacheRefresh:f0};y0.useEffectEvent=t0;function jd(n,r,a,l){r=n.memoizedState,a=a(l,r),a=a==null?r:E({},r,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var Ld={enqueueSetState:function(n,r,a){n=n._reactInternals;var l=Nn(),f=Ur(l);f.payload=r,a!=null&&(f.callback=a),r=zr(n,f,l),r!==null&&(pn(r,n,l),cl(r,n,l))},enqueueReplaceState:function(n,r,a){n=n._reactInternals;var l=Nn(),f=Ur(l);f.tag=1,f.payload=r,a!=null&&(f.callback=a),r=zr(n,f,l),r!==null&&(pn(r,n,l),cl(r,n,l))},enqueueForceUpdate:function(n,r){n=n._reactInternals;var a=Nn(),l=Ur(a);l.tag=2,r!=null&&(l.callback=r),r=zr(n,l,a),r!==null&&(pn(r,n,a),cl(r,n,a))}};function _0(n,r,a,l,f,d,b){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(l,d,b):r.prototype&&r.prototype.isPureReactComponent?!nl(a,l)||!nl(f,d):!0}function v0(n,r,a,l){n=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(a,l),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(a,l),r.state!==n&&Ld.enqueueReplaceState(r,r.state,null)}function Xs(n,r){var a=r;if("ref"in r){a={};for(var l in r)l!=="ref"&&(a[l]=r[l])}if(n=n.defaultProps){a===r&&(a=E({},a));for(var f in n)a[f]===void 0&&(a[f]=n[f])}return a}function b0(n){ac(n)}function E0(n){console.error(n)}function x0(n){ac(n)}function Rc(n,r){try{var a=n.onUncaughtError;a(r.value,{componentStack:r.stack})}catch(l){setTimeout(function(){throw l})}}function T0(n,r,a){try{var l=n.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function Pd(n,r,a){return a=Ur(a),a.tag=3,a.payload={element:null},a.callback=function(){Rc(n,r)},a}function w0(n){return n=Ur(n),n.tag=3,n}function S0(n,r,a,l){var f=a.type.getDerivedStateFromError;if(typeof f=="function"){var d=l.value;n.payload=function(){return f(d)},n.callback=function(){T0(r,a,l)}}var b=a.stateNode;b!==null&&typeof b.componentDidCatch=="function"&&(n.callback=function(){T0(r,a,l),typeof f!="function"&&($r===null?$r=new Set([this]):$r.add(this));var w=l.stack;this.componentDidCatch(l.value,{componentStack:w!==null?w:""})})}function fw(n,r,a,l,f){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(r=a.alternate,r!==null&&La(r,a,f,!0),a=Tn.current,a!==null){switch(a.tag){case 31:case 13:return Bn===null?Bc():a.alternate===null&&_e===0&&(_e=3),a.flags&=-257,a.flags|=65536,a.lanes=f,l===gc?a.flags|=16384:(r=a.updateQueue,r===null?a.updateQueue=new Set([l]):r.add(l),um(n,l,f)),!1;case 22:return a.flags|=65536,l===gc?a.flags|=16384:(r=a.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=r):(a=r.retryQueue,a===null?r.retryQueue=new Set([l]):a.add(l)),um(n,l,f)),!1}throw Error(s(435,a.tag))}return um(n,l,f),Bc(),!1}if(Gt)return r=Tn.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=f,l!==id&&(n=Error(s(422),{cause:l}),sl(Ln(n,a)))):(l!==id&&(r=Error(s(423),{cause:l}),sl(Ln(r,a))),n=n.current.alternate,n.flags|=65536,f&=-f,n.lanes|=f,l=Ln(l,a),f=Pd(n.stateNode,l,f),md(n,f),_e!==4&&(_e=2)),!1;var d=Error(s(520),{cause:l});if(d=Ln(d,a),wl===null?wl=[d]:wl.push(d),_e!==4&&(_e=2),r===null)return!0;l=Ln(l,a),a=r;do{switch(a.tag){case 3:return a.flags|=65536,n=f&-f,a.lanes|=n,n=Pd(a.stateNode,l,n),md(a,n),!1;case 1:if(r=a.type,d=a.stateNode,(a.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&($r===null||!$r.has(d))))return a.flags|=65536,f&=-f,a.lanes|=f,f=w0(f),S0(f,n,a,l),md(a,f),!1}a=a.return}while(a!==null);return!1}var Ud=Error(s(461)),Ie=!1;function Ye(n,r,a,l){r.child=n===null?Ry(r,null,a,l):Qs(r,n.child,a,l)}function A0(n,r,a,l,f){a=a.render;var d=r.ref;if("ref"in l){var b={};for(var w in l)w!=="ref"&&(b[w]=l[w])}else b=l;return Hs(r),l=bd(n,r,a,b,d,f),w=Ed(),n!==null&&!Ie?(xd(n,r,f),tr(n,r,f)):(Gt&&w&&ed(r),r.flags|=1,Ye(n,r,l,f),r.child)}function N0(n,r,a,l,f){if(n===null){var d=a.type;return typeof d=="function"&&!Jf(d)&&d.defaultProps===void 0&&a.compare===null?(r.tag=15,r.type=d,C0(n,r,d,l,f)):(n=cc(a.type,null,l,r,r.mode,f),n.ref=r.ref,n.return=r,r.child=n)}if(d=n.child,!Yd(n,f)){var b=d.memoizedProps;if(a=a.compare,a=a!==null?a:nl,a(b,l)&&n.ref===r.ref)return tr(n,r,f)}return r.flags|=1,n=Qi(d,l),n.ref=r.ref,n.return=r,r.child=n}function C0(n,r,a,l,f){if(n!==null){var d=n.memoizedProps;if(nl(d,l)&&n.ref===r.ref)if(Ie=!1,r.pendingProps=l=d,Yd(n,f))(n.flags&131072)!==0&&(Ie=!0);else return r.lanes=n.lanes,tr(n,r,f)}return zd(n,r,a,l,f)}function R0(n,r,a,l){var f=l.children,d=n!==null?n.memoizedState:null;if(n===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((r.flags&128)!==0){if(d=d!==null?d.baseLanes|a:a,n!==null){for(l=r.child=n.child,f=0;l!==null;)f=f|l.lanes|l.childLanes,l=l.sibling;l=f&~d}else l=0,r.child=null;return I0(n,r,d,a,l)}if((a&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},n!==null&&mc(r,d!==null?d.cachePool:null),d!==null?Oy(r,d):gd(),My(r);else return l=r.lanes=536870912,I0(n,r,d!==null?d.baseLanes|a:a,a,l)}else d!==null?(mc(r,d.cachePool),Oy(r,d),Fr(),r.memoizedState=null):(n!==null&&mc(r,null),gd(),Fr());return Ye(n,r,f,a),r.child}function yl(n,r){return n!==null&&n.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function I0(n,r,a,l,f){var d=cd();return d=d===null?null:{parent:Ce._currentValue,pool:d},r.memoizedState={baseLanes:a,cachePool:d},n!==null&&mc(r,null),gd(),My(r),n!==null&&La(n,r,l,!0),r.childLanes=f,null}function Ic(n,r){return r=Oc({mode:r.mode,children:r.children},n.mode),r.ref=n.ref,n.child=r,r.return=n,r}function D0(n,r,a){return Qs(r,n.child,null,a),n=Ic(r,r.pendingProps),n.flags|=2,wn(r),r.memoizedState=null,n}function dw(n,r,a){var l=r.pendingProps,f=(r.flags&128)!==0;if(r.flags&=-129,n===null){if(Gt){if(l.mode==="hidden")return n=Ic(r,l),r.lanes=536870912,yl(null,n);if(_d(r),(n=le)?(n=q_(n,zn),n=n!==null&&n.data==="&"?n:null,n!==null&&(r.memoizedState={dehydrated:n,treeContext:kr!==null?{id:Ni,overflow:Ci}:null,retryLane:536870912,hydrationErrors:null},a=my(n),a.return=r,r.child=a,Ge=r,le=null)):n=null,n===null)throw jr(r);return r.lanes=536870912,null}return Ic(r,l)}var d=n.memoizedState;if(d!==null){var b=d.dehydrated;if(_d(r),f)if(r.flags&256)r.flags&=-257,r=D0(n,r,a);else if(r.memoizedState!==null)r.child=n.child,r.flags|=128,r=null;else throw Error(s(558));else if(Ie||La(n,r,a,!1),f=(a&n.childLanes)!==0,Ie||f){if(l=oe,l!==null&&(b=Po(l,a),b!==0&&b!==d.retryLane))throw d.retryLane=b,zs(n,b),pn(l,n,b),Ud;Bc(),r=D0(n,r,a)}else n=d.treeContext,le=Fn(b.nextSibling),Ge=r,Gt=!0,Vr=null,zn=!1,n!==null&&yy(r,n),r=Ic(r,l),r.flags|=4096;return r}return n=Qi(n.child,{mode:l.mode,children:l.children}),n.ref=r.ref,r.child=n,n.return=r,n}function Dc(n,r){var a=r.ref;if(a===null)n!==null&&n.ref!==null&&(r.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(n===null||n.ref!==a)&&(r.flags|=4194816)}}function zd(n,r,a,l,f){return Hs(r),a=bd(n,r,a,l,void 0,f),l=Ed(),n!==null&&!Ie?(xd(n,r,f),tr(n,r,f)):(Gt&&l&&ed(r),r.flags|=1,Ye(n,r,a,f),r.child)}function O0(n,r,a,l,f,d){return Hs(r),r.updateQueue=null,a=Vy(r,l,a,f),ky(n),l=Ed(),n!==null&&!Ie?(xd(n,r,d),tr(n,r,d)):(Gt&&l&&ed(r),r.flags|=1,Ye(n,r,a,d),r.child)}function M0(n,r,a,l,f){if(Hs(r),r.stateNode===null){var d=Ma,b=a.contextType;typeof b=="object"&&b!==null&&(d=$e(b)),d=new a(l,d),r.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=Ld,r.stateNode=d,d._reactInternals=r,d=r.stateNode,d.props=l,d.state=r.memoizedState,d.refs={},fd(r),b=a.contextType,d.context=typeof b=="object"&&b!==null?$e(b):Ma,d.state=r.memoizedState,b=a.getDerivedStateFromProps,typeof b=="function"&&(jd(r,a,b,l),d.state=r.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(b=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),b!==d.state&&Ld.enqueueReplaceState(d,d.state,null),fl(r,l,d,f),hl(),d.state=r.memoizedState),typeof d.componentDidMount=="function"&&(r.flags|=4194308),l=!0}else if(n===null){d=r.stateNode;var w=r.memoizedProps,k=Xs(a,w);d.props=k;var G=d.context,et=a.contextType;b=Ma,typeof et=="object"&&et!==null&&(b=$e(et));var at=a.getDerivedStateFromProps;et=typeof at=="function"||typeof d.getSnapshotBeforeUpdate=="function",w=r.pendingProps!==w,et||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(w||G!==b)&&v0(r,d,l,b),Pr=!1;var Q=r.memoizedState;d.state=Q,fl(r,l,d,f),hl(),G=r.memoizedState,w||Q!==G||Pr?(typeof at=="function"&&(jd(r,a,at,l),G=r.memoizedState),(k=Pr||_0(r,a,k,l,Q,G,b))?(et||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(r.flags|=4194308)):(typeof d.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=l,r.memoizedState=G),d.props=l,d.state=G,d.context=b,l=k):(typeof d.componentDidMount=="function"&&(r.flags|=4194308),l=!1)}else{d=r.stateNode,dd(n,r),b=r.memoizedProps,et=Xs(a,b),d.props=et,at=r.pendingProps,Q=d.context,G=a.contextType,k=Ma,typeof G=="object"&&G!==null&&(k=$e(G)),w=a.getDerivedStateFromProps,(G=typeof w=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(b!==at||Q!==k)&&v0(r,d,l,k),Pr=!1,Q=r.memoizedState,d.state=Q,fl(r,l,d,f),hl();var W=r.memoizedState;b!==at||Q!==W||Pr||n!==null&&n.dependencies!==null&&fc(n.dependencies)?(typeof w=="function"&&(jd(r,a,w,l),W=r.memoizedState),(et=Pr||_0(r,a,et,l,Q,W,k)||n!==null&&n.dependencies!==null&&fc(n.dependencies))?(G||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(l,W,k),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(l,W,k)),typeof d.componentDidUpdate=="function"&&(r.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof d.componentDidUpdate!="function"||b===n.memoizedProps&&Q===n.memoizedState||(r.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||b===n.memoizedProps&&Q===n.memoizedState||(r.flags|=1024),r.memoizedProps=l,r.memoizedState=W),d.props=l,d.state=W,d.context=k,l=et):(typeof d.componentDidUpdate!="function"||b===n.memoizedProps&&Q===n.memoizedState||(r.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||b===n.memoizedProps&&Q===n.memoizedState||(r.flags|=1024),l=!1)}return d=l,Dc(n,r),l=(r.flags&128)!==0,d||l?(d=r.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:d.render(),r.flags|=1,n!==null&&l?(r.child=Qs(r,n.child,null,f),r.child=Qs(r,null,a,f)):Ye(n,r,a,f),r.memoizedState=d.state,n=r.child):n=tr(n,r,f),n}function k0(n,r,a,l){return Fs(),r.flags|=256,Ye(n,r,a,l),r.child}var Bd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Fd(n){return{baseLanes:n,cachePool:Ty()}}function qd(n,r,a){return n=n!==null?n.childLanes&~a:0,r&&(n|=An),n}function V0(n,r,a){var l=r.pendingProps,f=!1,d=(r.flags&128)!==0,b;if((b=d)||(b=n!==null&&n.memoizedState===null?!1:(Ee.current&2)!==0),b&&(f=!0,r.flags&=-129),b=(r.flags&32)!==0,r.flags&=-33,n===null){if(Gt){if(f?Br(r):Fr(),(n=le)?(n=q_(n,zn),n=n!==null&&n.data!=="&"?n:null,n!==null&&(r.memoizedState={dehydrated:n,treeContext:kr!==null?{id:Ni,overflow:Ci}:null,retryLane:536870912,hydrationErrors:null},a=my(n),a.return=r,r.child=a,Ge=r,le=null)):n=null,n===null)throw jr(r);return Sm(n)?r.lanes=32:r.lanes=536870912,null}var w=l.children;return l=l.fallback,f?(Fr(),f=r.mode,w=Oc({mode:"hidden",children:w},f),l=Bs(l,f,a,null),w.return=r,l.return=r,w.sibling=l,r.child=w,l=r.child,l.memoizedState=Fd(a),l.childLanes=qd(n,b,a),r.memoizedState=Bd,yl(null,l)):(Br(r),Hd(r,w))}var k=n.memoizedState;if(k!==null&&(w=k.dehydrated,w!==null)){if(d)r.flags&256?(Br(r),r.flags&=-257,r=Gd(n,r,a)):r.memoizedState!==null?(Fr(),r.child=n.child,r.flags|=128,r=null):(Fr(),w=l.fallback,f=r.mode,l=Oc({mode:"visible",children:l.children},f),w=Bs(w,f,a,null),w.flags|=2,l.return=r,w.return=r,l.sibling=w,r.child=l,Qs(r,n.child,null,a),l=r.child,l.memoizedState=Fd(a),l.childLanes=qd(n,b,a),r.memoizedState=Bd,r=yl(null,l));else if(Br(r),Sm(w)){if(b=w.nextSibling&&w.nextSibling.dataset,b)var G=b.dgst;b=G,l=Error(s(419)),l.stack="",l.digest=b,sl({value:l,source:null,stack:null}),r=Gd(n,r,a)}else if(Ie||La(n,r,a,!1),b=(a&n.childLanes)!==0,Ie||b){if(b=oe,b!==null&&(l=Po(b,a),l!==0&&l!==k.retryLane))throw k.retryLane=l,zs(n,l),pn(b,n,l),Ud;wm(w)||Bc(),r=Gd(n,r,a)}else wm(w)?(r.flags|=192,r.child=n.child,r=null):(n=k.treeContext,le=Fn(w.nextSibling),Ge=r,Gt=!0,Vr=null,zn=!1,n!==null&&yy(r,n),r=Hd(r,l.children),r.flags|=4096);return r}return f?(Fr(),w=l.fallback,f=r.mode,k=n.child,G=k.sibling,l=Qi(k,{mode:"hidden",children:l.children}),l.subtreeFlags=k.subtreeFlags&65011712,G!==null?w=Qi(G,w):(w=Bs(w,f,a,null),w.flags|=2),w.return=r,l.return=r,l.sibling=w,r.child=l,yl(null,l),l=r.child,w=n.child.memoizedState,w===null?w=Fd(a):(f=w.cachePool,f!==null?(k=Ce._currentValue,f=f.parent!==k?{parent:k,pool:k}:f):f=Ty(),w={baseLanes:w.baseLanes|a,cachePool:f}),l.memoizedState=w,l.childLanes=qd(n,b,a),r.memoizedState=Bd,yl(n.child,l)):(Br(r),a=n.child,n=a.sibling,a=Qi(a,{mode:"visible",children:l.children}),a.return=r,a.sibling=null,n!==null&&(b=r.deletions,b===null?(r.deletions=[n],r.flags|=16):b.push(n)),r.child=a,r.memoizedState=null,a)}function Hd(n,r){return r=Oc({mode:"visible",children:r},n.mode),r.return=n,n.child=r}function Oc(n,r){return n=xn(22,n,null,r),n.lanes=0,n}function Gd(n,r,a){return Qs(r,n.child,null,a),n=Hd(r,r.pendingProps.children),n.flags|=2,r.memoizedState=null,n}function j0(n,r,a){n.lanes|=r;var l=n.alternate;l!==null&&(l.lanes|=r),ad(n.return,r,a)}function $d(n,r,a,l,f,d){var b=n.memoizedState;b===null?n.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:f,treeForkCount:d}:(b.isBackwards=r,b.rendering=null,b.renderingStartTime=0,b.last=l,b.tail=a,b.tailMode=f,b.treeForkCount=d)}function L0(n,r,a){var l=r.pendingProps,f=l.revealOrder,d=l.tail;l=l.children;var b=Ee.current,w=(b&2)!==0;if(w?(b=b&1|2,r.flags|=128):b&=1,ut(Ee,b),Ye(n,r,l,a),l=Gt?rl:0,!w&&n!==null&&(n.flags&128)!==0)t:for(n=r.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&j0(n,a,r);else if(n.tag===19)j0(n,a,r);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===r)break t;for(;n.sibling===null;){if(n.return===null||n.return===r)break t;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(f){case"forwards":for(a=r.child,f=null;a!==null;)n=a.alternate,n!==null&&bc(n)===null&&(f=a),a=a.sibling;a=f,a===null?(f=r.child,r.child=null):(f=a.sibling,a.sibling=null),$d(r,!1,f,a,d,l);break;case"backwards":case"unstable_legacy-backwards":for(a=null,f=r.child,r.child=null;f!==null;){if(n=f.alternate,n!==null&&bc(n)===null){r.child=f;break}n=f.sibling,f.sibling=a,a=f,f=n}$d(r,!0,a,null,d,l);break;case"together":$d(r,!1,null,null,void 0,l);break;default:r.memoizedState=null}return r.child}function tr(n,r,a){if(n!==null&&(r.dependencies=n.dependencies),Gr|=r.lanes,(a&r.childLanes)===0)if(n!==null){if(La(n,r,a,!1),(a&r.childLanes)===0)return null}else return null;if(n!==null&&r.child!==n.child)throw Error(s(153));if(r.child!==null){for(n=r.child,a=Qi(n,n.pendingProps),r.child=a,a.return=r;n.sibling!==null;)n=n.sibling,a=a.sibling=Qi(n,n.pendingProps),a.return=r;a.sibling=null}return r.child}function Yd(n,r){return(n.lanes&r)!==0?!0:(n=n.dependencies,!!(n!==null&&fc(n)))}function mw(n,r,a){switch(r.tag){case 3:wt(r,r.stateNode.containerInfo),Lr(r,Ce,n.memoizedState.cache),Fs();break;case 27:case 5:ae(r);break;case 4:wt(r,r.stateNode.containerInfo);break;case 10:Lr(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,_d(r),null;break;case 13:var l=r.memoizedState;if(l!==null)return l.dehydrated!==null?(Br(r),r.flags|=128,null):(a&r.child.childLanes)!==0?V0(n,r,a):(Br(r),n=tr(n,r,a),n!==null?n.sibling:null);Br(r);break;case 19:var f=(n.flags&128)!==0;if(l=(a&r.childLanes)!==0,l||(La(n,r,a,!1),l=(a&r.childLanes)!==0),f){if(l)return L0(n,r,a);r.flags|=128}if(f=r.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),ut(Ee,Ee.current),l)break;return null;case 22:return r.lanes=0,R0(n,r,a,r.pendingProps);case 24:Lr(r,Ce,n.memoizedState.cache)}return tr(n,r,a)}function P0(n,r,a){if(n!==null)if(n.memoizedProps!==r.pendingProps)Ie=!0;else{if(!Yd(n,a)&&(r.flags&128)===0)return Ie=!1,mw(n,r,a);Ie=(n.flags&131072)!==0}else Ie=!1,Gt&&(r.flags&1048576)!==0&&gy(r,rl,r.index);switch(r.lanes=0,r.tag){case 16:t:{var l=r.pendingProps;if(n=$s(r.elementType),r.type=n,typeof n=="function")Jf(n)?(l=Xs(n,l),r.tag=1,r=M0(null,r,n,l,a)):(r.tag=0,r=zd(null,r,n,l,a));else{if(n!=null){var f=n.$$typeof;if(f===nt){r.tag=11,r=A0(null,r,n,l,a);break t}else if(f===C){r.tag=14,r=N0(null,r,n,l,a);break t}}throw r=ot(n)||n,Error(s(306,r,""))}}return r;case 0:return zd(n,r,r.type,r.pendingProps,a);case 1:return l=r.type,f=Xs(l,r.pendingProps),M0(n,r,l,f,a);case 3:t:{if(wt(r,r.stateNode.containerInfo),n===null)throw Error(s(387));l=r.pendingProps;var d=r.memoizedState;f=d.element,dd(n,r),fl(r,l,null,a);var b=r.memoizedState;if(l=b.cache,Lr(r,Ce,l),l!==d.cache&&od(r,[Ce],a,!0),hl(),l=b.element,d.isDehydrated)if(d={element:l,isDehydrated:!1,cache:b.cache},r.updateQueue.baseState=d,r.memoizedState=d,r.flags&256){r=k0(n,r,l,a);break t}else if(l!==f){f=Ln(Error(s(424)),r),sl(f),r=k0(n,r,l,a);break t}else{switch(n=r.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(le=Fn(n.firstChild),Ge=r,Gt=!0,Vr=null,zn=!0,a=Ry(r,null,l,a),r.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Fs(),l===f){r=tr(n,r,a);break t}Ye(n,r,l,a)}r=r.child}return r;case 26:return Dc(n,r),n===null?(a=K_(r.type,null,r.pendingProps,null))?r.memoizedState=a:Gt||(a=r.type,n=r.pendingProps,l=Qc(st.current).createElement(a),l[Se]=r,l[Ue]=n,Qe(l,a,n),Ae(l),r.stateNode=l):r.memoizedState=K_(r.type,n.memoizedProps,r.pendingProps,n.memoizedState),null;case 27:return ae(r),n===null&&Gt&&(l=r.stateNode=$_(r.type,r.pendingProps,st.current),Ge=r,zn=!0,f=le,Xr(r.type)?(Am=f,le=Fn(l.firstChild)):le=f),Ye(n,r,r.pendingProps.children,a),Dc(n,r),n===null&&(r.flags|=4194304),r.child;case 5:return n===null&&Gt&&((f=l=le)&&(l=Hw(l,r.type,r.pendingProps,zn),l!==null?(r.stateNode=l,Ge=r,le=Fn(l.firstChild),zn=!1,f=!0):f=!1),f||jr(r)),ae(r),f=r.type,d=r.pendingProps,b=n!==null?n.memoizedProps:null,l=d.children,Em(f,d)?l=null:b!==null&&Em(f,b)&&(r.flags|=32),r.memoizedState!==null&&(f=bd(n,r,sw,null,null,a),Ol._currentValue=f),Dc(n,r),Ye(n,r,l,a),r.child;case 6:return n===null&&Gt&&((n=a=le)&&(a=Gw(a,r.pendingProps,zn),a!==null?(r.stateNode=a,Ge=r,le=null,n=!0):n=!1),n||jr(r)),null;case 13:return V0(n,r,a);case 4:return wt(r,r.stateNode.containerInfo),l=r.pendingProps,n===null?r.child=Qs(r,null,l,a):Ye(n,r,l,a),r.child;case 11:return A0(n,r,r.type,r.pendingProps,a);case 7:return Ye(n,r,r.pendingProps,a),r.child;case 8:return Ye(n,r,r.pendingProps.children,a),r.child;case 12:return Ye(n,r,r.pendingProps.children,a),r.child;case 10:return l=r.pendingProps,Lr(r,r.type,l.value),Ye(n,r,l.children,a),r.child;case 9:return f=r.type._context,l=r.pendingProps.children,Hs(r),f=$e(f),l=l(f),r.flags|=1,Ye(n,r,l,a),r.child;case 14:return N0(n,r,r.type,r.pendingProps,a);case 15:return C0(n,r,r.type,r.pendingProps,a);case 19:return L0(n,r,a);case 31:return dw(n,r,a);case 22:return R0(n,r,a,r.pendingProps);case 24:return Hs(r),l=$e(Ce),n===null?(f=cd(),f===null&&(f=oe,d=ld(),f.pooledCache=d,d.refCount++,d!==null&&(f.pooledCacheLanes|=a),f=d),r.memoizedState={parent:l,cache:f},fd(r),Lr(r,Ce,f)):((n.lanes&a)!==0&&(dd(n,r),fl(r,null,null,a),hl()),f=n.memoizedState,d=r.memoizedState,f.parent!==l?(f={parent:l,cache:l},r.memoizedState=f,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=f),Lr(r,Ce,l)):(l=d.cache,Lr(r,Ce,l),l!==f.cache&&od(r,[Ce],a,!0))),Ye(n,r,r.pendingProps.children,a),r.child;case 29:throw r.pendingProps}throw Error(s(156,r.tag))}function er(n){n.flags|=4}function Qd(n,r,a,l,f){if((r=(n.mode&32)!==0)&&(r=!1),r){if(n.flags|=16777216,(f&335544128)===f)if(n.stateNode.complete)n.flags|=8192;else if(h_())n.flags|=8192;else throw Ys=gc,hd}else n.flags&=-16777217}function U0(n,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!tv(r))if(h_())n.flags|=8192;else throw Ys=gc,hd}function Mc(n,r){r!==null&&(n.flags|=4),n.flags&16384&&(r=n.tag!==22?Uu():536870912,n.lanes|=r,Ka|=r)}function _l(n,r){if(!Gt)switch(n.tailMode){case"hidden":r=n.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?r||n.tail===null?n.tail=null:n.tail.sibling=null:l.sibling=null}}function ue(n){var r=n.alternate!==null&&n.alternate.child===n.child,a=0,l=0;if(r)for(var f=n.child;f!==null;)a|=f.lanes|f.childLanes,l|=f.subtreeFlags&65011712,l|=f.flags&65011712,f.return=n,f=f.sibling;else for(f=n.child;f!==null;)a|=f.lanes|f.childLanes,l|=f.subtreeFlags,l|=f.flags,f.return=n,f=f.sibling;return n.subtreeFlags|=l,n.childLanes=a,r}function pw(n,r,a){var l=r.pendingProps;switch(nd(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ue(r),null;case 1:return ue(r),null;case 3:return a=r.stateNode,l=null,n!==null&&(l=n.memoizedState.cache),r.memoizedState.cache!==l&&(r.flags|=2048),Zi(Ce),St(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(n===null||n.child===null)&&(ja(r)?er(r):n===null||n.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,rd())),ue(r),null;case 26:var f=r.type,d=r.memoizedState;return n===null?(er(r),d!==null?(ue(r),U0(r,d)):(ue(r),Qd(r,f,null,l,a))):d?d!==n.memoizedState?(er(r),ue(r),U0(r,d)):(ue(r),r.flags&=-16777217):(n=n.memoizedProps,n!==l&&er(r),ue(r),Qd(r,f,n,l,a)),null;case 27:if(Dt(r),a=st.current,f=r.type,n!==null&&r.stateNode!=null)n.memoizedProps!==l&&er(r);else{if(!l){if(r.stateNode===null)throw Error(s(166));return ue(r),null}n=dt.current,ja(r)?_y(r):(n=$_(f,l,a),r.stateNode=n,er(r))}return ue(r),null;case 5:if(Dt(r),f=r.type,n!==null&&r.stateNode!=null)n.memoizedProps!==l&&er(r);else{if(!l){if(r.stateNode===null)throw Error(s(166));return ue(r),null}if(d=dt.current,ja(r))_y(r);else{var b=Qc(st.current);switch(d){case 1:d=b.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:d=b.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":d=b.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":d=b.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":d=b.createElement("div"),d.innerHTML="<script><\/script>",d=d.removeChild(d.firstChild);break;case"select":d=typeof l.is=="string"?b.createElement("select",{is:l.is}):b.createElement("select"),l.multiple?d.multiple=!0:l.size&&(d.size=l.size);break;default:d=typeof l.is=="string"?b.createElement(f,{is:l.is}):b.createElement(f)}}d[Se]=r,d[Ue]=l;t:for(b=r.child;b!==null;){if(b.tag===5||b.tag===6)d.appendChild(b.stateNode);else if(b.tag!==4&&b.tag!==27&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===r)break t;for(;b.sibling===null;){if(b.return===null||b.return===r)break t;b=b.return}b.sibling.return=b.return,b=b.sibling}r.stateNode=d;t:switch(Qe(d,f,l),f){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break t;case"img":l=!0;break t;default:l=!1}l&&er(r)}}return ue(r),Qd(r,r.type,n===null?null:n.memoizedProps,r.pendingProps,a),null;case 6:if(n&&r.stateNode!=null)n.memoizedProps!==l&&er(r);else{if(typeof l!="string"&&r.stateNode===null)throw Error(s(166));if(n=st.current,ja(r)){if(n=r.stateNode,a=r.memoizedProps,l=null,f=Ge,f!==null)switch(f.tag){case 27:case 5:l=f.memoizedProps}n[Se]=r,n=!!(n.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||V_(n.nodeValue,a)),n||jr(r,!0)}else n=Qc(n).createTextNode(l),n[Se]=r,r.stateNode=n}return ue(r),null;case 31:if(a=r.memoizedState,n===null||n.memoizedState!==null){if(l=ja(r),a!==null){if(n===null){if(!l)throw Error(s(318));if(n=r.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(557));n[Se]=r}else Fs(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;ue(r),n=!1}else a=rd(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=a),n=!0;if(!n)return r.flags&256?(wn(r),r):(wn(r),null);if((r.flags&128)!==0)throw Error(s(558))}return ue(r),null;case 13:if(l=r.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(f=ja(r),l!==null&&l.dehydrated!==null){if(n===null){if(!f)throw Error(s(318));if(f=r.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(s(317));f[Se]=r}else Fs(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;ue(r),f=!1}else f=rd(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=f),f=!0;if(!f)return r.flags&256?(wn(r),r):(wn(r),null)}return wn(r),(r.flags&128)!==0?(r.lanes=a,r):(a=l!==null,n=n!==null&&n.memoizedState!==null,a&&(l=r.child,f=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(f=l.alternate.memoizedState.cachePool.pool),d=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(d=l.memoizedState.cachePool.pool),d!==f&&(l.flags|=2048)),a!==n&&a&&(r.child.flags|=8192),Mc(r,r.updateQueue),ue(r),null);case 4:return St(),n===null&&gm(r.stateNode.containerInfo),ue(r),null;case 10:return Zi(r.type),ue(r),null;case 19:if(K(Ee),l=r.memoizedState,l===null)return ue(r),null;if(f=(r.flags&128)!==0,d=l.rendering,d===null)if(f)_l(l,!1);else{if(_e!==0||n!==null&&(n.flags&128)!==0)for(n=r.child;n!==null;){if(d=bc(n),d!==null){for(r.flags|=128,_l(l,!1),n=d.updateQueue,r.updateQueue=n,Mc(r,n),r.subtreeFlags=0,n=a,a=r.child;a!==null;)dy(a,n),a=a.sibling;return ut(Ee,Ee.current&1|2),Gt&&Ki(r,l.treeForkCount),r.child}n=n.sibling}l.tail!==null&&an()>Pc&&(r.flags|=128,f=!0,_l(l,!1),r.lanes=4194304)}else{if(!f)if(n=bc(d),n!==null){if(r.flags|=128,f=!0,n=n.updateQueue,r.updateQueue=n,Mc(r,n),_l(l,!0),l.tail===null&&l.tailMode==="hidden"&&!d.alternate&&!Gt)return ue(r),null}else 2*an()-l.renderingStartTime>Pc&&a!==536870912&&(r.flags|=128,f=!0,_l(l,!1),r.lanes=4194304);l.isBackwards?(d.sibling=r.child,r.child=d):(n=l.last,n!==null?n.sibling=d:r.child=d,l.last=d)}return l.tail!==null?(n=l.tail,l.rendering=n,l.tail=n.sibling,l.renderingStartTime=an(),n.sibling=null,a=Ee.current,ut(Ee,f?a&1|2:a&1),Gt&&Ki(r,l.treeForkCount),n):(ue(r),null);case 22:case 23:return wn(r),yd(),l=r.memoizedState!==null,n!==null?n.memoizedState!==null!==l&&(r.flags|=8192):l&&(r.flags|=8192),l?(a&536870912)!==0&&(r.flags&128)===0&&(ue(r),r.subtreeFlags&6&&(r.flags|=8192)):ue(r),a=r.updateQueue,a!==null&&Mc(r,a.retryQueue),a=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),l=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(l=r.memoizedState.cachePool.pool),l!==a&&(r.flags|=2048),n!==null&&K(Gs),null;case 24:return a=null,n!==null&&(a=n.memoizedState.cache),r.memoizedState.cache!==a&&(r.flags|=2048),Zi(Ce),ue(r),null;case 25:return null;case 30:return null}throw Error(s(156,r.tag))}function gw(n,r){switch(nd(r),r.tag){case 1:return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 3:return Zi(Ce),St(),n=r.flags,(n&65536)!==0&&(n&128)===0?(r.flags=n&-65537|128,r):null;case 26:case 27:case 5:return Dt(r),null;case 31:if(r.memoizedState!==null){if(wn(r),r.alternate===null)throw Error(s(340));Fs()}return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 13:if(wn(r),n=r.memoizedState,n!==null&&n.dehydrated!==null){if(r.alternate===null)throw Error(s(340));Fs()}return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 19:return K(Ee),null;case 4:return St(),null;case 10:return Zi(r.type),null;case 22:case 23:return wn(r),yd(),n!==null&&K(Gs),n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 24:return Zi(Ce),null;case 25:return null;default:return null}}function z0(n,r){switch(nd(r),r.tag){case 3:Zi(Ce),St();break;case 26:case 27:case 5:Dt(r);break;case 4:St();break;case 31:r.memoizedState!==null&&wn(r);break;case 13:wn(r);break;case 19:K(Ee);break;case 10:Zi(r.type);break;case 22:case 23:wn(r),yd(),n!==null&&K(Gs);break;case 24:Zi(Ce)}}function vl(n,r){try{var a=r.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var f=l.next;a=f;do{if((a.tag&n)===n){l=void 0;var d=a.create,b=a.inst;l=d(),b.destroy=l}a=a.next}while(a!==f)}}catch(w){te(r,r.return,w)}}function qr(n,r,a){try{var l=r.updateQueue,f=l!==null?l.lastEffect:null;if(f!==null){var d=f.next;l=d;do{if((l.tag&n)===n){var b=l.inst,w=b.destroy;if(w!==void 0){b.destroy=void 0,f=r;var k=a,G=w;try{G()}catch(et){te(f,k,et)}}}l=l.next}while(l!==d)}}catch(et){te(r,r.return,et)}}function B0(n){var r=n.updateQueue;if(r!==null){var a=n.stateNode;try{Dy(r,a)}catch(l){te(n,n.return,l)}}}function F0(n,r,a){a.props=Xs(n.type,n.memoizedProps),a.state=n.memoizedState;try{a.componentWillUnmount()}catch(l){te(n,r,l)}}function bl(n,r){try{var a=n.ref;if(a!==null){switch(n.tag){case 26:case 27:case 5:var l=n.stateNode;break;case 30:l=n.stateNode;break;default:l=n.stateNode}typeof a=="function"?n.refCleanup=a(l):a.current=l}}catch(f){te(n,r,f)}}function Ri(n,r){var a=n.ref,l=n.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(f){te(n,r,f)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(f){te(n,r,f)}else a.current=null}function q0(n){var r=n.type,a=n.memoizedProps,l=n.stateNode;try{t:switch(r){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break t;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(f){te(n,n.return,f)}}function Kd(n,r,a){try{var l=n.stateNode;Pw(l,n.type,a,r),l[Ue]=r}catch(f){te(n,n.return,f)}}function H0(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&Xr(n.type)||n.tag===4}function Xd(n){t:for(;;){for(;n.sibling===null;){if(n.return===null||H0(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&Xr(n.type)||n.flags&2||n.child===null||n.tag===4)continue t;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Zd(n,r,a){var l=n.tag;if(l===5||l===6)n=n.stateNode,r?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(n,r):(r=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,r.appendChild(n),a=a._reactRootContainer,a!=null||r.onclick!==null||(r.onclick=Zn));else if(l!==4&&(l===27&&Xr(n.type)&&(a=n.stateNode,r=null),n=n.child,n!==null))for(Zd(n,r,a),n=n.sibling;n!==null;)Zd(n,r,a),n=n.sibling}function kc(n,r,a){var l=n.tag;if(l===5||l===6)n=n.stateNode,r?a.insertBefore(n,r):a.appendChild(n);else if(l!==4&&(l===27&&Xr(n.type)&&(a=n.stateNode),n=n.child,n!==null))for(kc(n,r,a),n=n.sibling;n!==null;)kc(n,r,a),n=n.sibling}function G0(n){var r=n.stateNode,a=n.memoizedProps;try{for(var l=n.type,f=r.attributes;f.length;)r.removeAttributeNode(f[0]);Qe(r,l,a),r[Se]=n,r[Ue]=a}catch(d){te(n,n.return,d)}}var nr=!1,De=!1,Jd=!1,$0=typeof WeakSet=="function"?WeakSet:Set,Be=null;function yw(n,r){if(n=n.containerInfo,vm=eh,n=ry(n),Gf(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else t:{a=(a=n.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var f=l.anchorOffset,d=l.focusNode;l=l.focusOffset;try{a.nodeType,d.nodeType}catch{a=null;break t}var b=0,w=-1,k=-1,G=0,et=0,at=n,Q=null;e:for(;;){for(var W;at!==a||f!==0&&at.nodeType!==3||(w=b+f),at!==d||l!==0&&at.nodeType!==3||(k=b+l),at.nodeType===3&&(b+=at.nodeValue.length),(W=at.firstChild)!==null;)Q=at,at=W;for(;;){if(at===n)break e;if(Q===a&&++G===f&&(w=b),Q===d&&++et===l&&(k=b),(W=at.nextSibling)!==null)break;at=Q,Q=at.parentNode}at=W}a=w===-1||k===-1?null:{start:w,end:k}}else a=null}a=a||{start:0,end:0}}else a=null;for(bm={focusedElem:n,selectionRange:a},eh=!1,Be=r;Be!==null;)if(r=Be,n=r.child,(r.subtreeFlags&1028)!==0&&n!==null)n.return=r,Be=n;else for(;Be!==null;){switch(r=Be,d=r.alternate,n=r.flags,r.tag){case 0:if((n&4)!==0&&(n=r.updateQueue,n=n!==null?n.events:null,n!==null))for(a=0;a<n.length;a++)f=n[a],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&d!==null){n=void 0,a=r,f=d.memoizedProps,d=d.memoizedState,l=a.stateNode;try{var vt=Xs(a.type,f);n=l.getSnapshotBeforeUpdate(vt,d),l.__reactInternalSnapshotBeforeUpdate=n}catch(Nt){te(a,a.return,Nt)}}break;case 3:if((n&1024)!==0){if(n=r.stateNode.containerInfo,a=n.nodeType,a===9)Tm(n);else if(a===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":Tm(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(s(163))}if(n=r.sibling,n!==null){n.return=r.return,Be=n;break}Be=r.return}}function Y0(n,r,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:rr(n,a),l&4&&vl(5,a);break;case 1:if(rr(n,a),l&4)if(n=a.stateNode,r===null)try{n.componentDidMount()}catch(b){te(a,a.return,b)}else{var f=Xs(a.type,r.memoizedProps);r=r.memoizedState;try{n.componentDidUpdate(f,r,n.__reactInternalSnapshotBeforeUpdate)}catch(b){te(a,a.return,b)}}l&64&&B0(a),l&512&&bl(a,a.return);break;case 3:if(rr(n,a),l&64&&(n=a.updateQueue,n!==null)){if(r=null,a.child!==null)switch(a.child.tag){case 27:case 5:r=a.child.stateNode;break;case 1:r=a.child.stateNode}try{Dy(n,r)}catch(b){te(a,a.return,b)}}break;case 27:r===null&&l&4&&G0(a);case 26:case 5:rr(n,a),r===null&&l&4&&q0(a),l&512&&bl(a,a.return);break;case 12:rr(n,a);break;case 31:rr(n,a),l&4&&X0(n,a);break;case 13:rr(n,a),l&4&&Z0(n,a),l&64&&(n=a.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(a=Aw.bind(null,a),$w(n,a))));break;case 22:if(l=a.memoizedState!==null||nr,!l){r=r!==null&&r.memoizedState!==null||De,f=nr;var d=De;nr=l,(De=r)&&!d?sr(n,a,(a.subtreeFlags&8772)!==0):rr(n,a),nr=f,De=d}break;case 30:break;default:rr(n,a)}}function Q0(n){var r=n.alternate;r!==null&&(n.alternate=null,Q0(r)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(r=n.stateNode,r!==null&&va(r)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var fe=null,hn=!1;function ir(n,r,a){for(a=a.child;a!==null;)K0(n,r,a),a=a.sibling}function K0(n,r,a){if(qe&&typeof qe.onCommitFiberUnmount=="function")try{qe.onCommitFiberUnmount(Yn,a)}catch{}switch(a.tag){case 26:De||Ri(a,r),ir(n,r,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:De||Ri(a,r);var l=fe,f=hn;Xr(a.type)&&(fe=a.stateNode,hn=!1),ir(n,r,a),Rl(a.stateNode),fe=l,hn=f;break;case 5:De||Ri(a,r);case 6:if(l=fe,f=hn,fe=null,ir(n,r,a),fe=l,hn=f,fe!==null)if(hn)try{(fe.nodeType===9?fe.body:fe.nodeName==="HTML"?fe.ownerDocument.body:fe).removeChild(a.stateNode)}catch(d){te(a,r,d)}else try{fe.removeChild(a.stateNode)}catch(d){te(a,r,d)}break;case 18:fe!==null&&(hn?(n=fe,B_(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,a.stateNode),io(n)):B_(fe,a.stateNode));break;case 4:l=fe,f=hn,fe=a.stateNode.containerInfo,hn=!0,ir(n,r,a),fe=l,hn=f;break;case 0:case 11:case 14:case 15:qr(2,a,r),De||qr(4,a,r),ir(n,r,a);break;case 1:De||(Ri(a,r),l=a.stateNode,typeof l.componentWillUnmount=="function"&&F0(a,r,l)),ir(n,r,a);break;case 21:ir(n,r,a);break;case 22:De=(l=De)||a.memoizedState!==null,ir(n,r,a),De=l;break;default:ir(n,r,a)}}function X0(n,r){if(r.memoizedState===null&&(n=r.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{io(n)}catch(a){te(r,r.return,a)}}}function Z0(n,r){if(r.memoizedState===null&&(n=r.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{io(n)}catch(a){te(r,r.return,a)}}function _w(n){switch(n.tag){case 31:case 13:case 19:var r=n.stateNode;return r===null&&(r=n.stateNode=new $0),r;case 22:return n=n.stateNode,r=n._retryCache,r===null&&(r=n._retryCache=new $0),r;default:throw Error(s(435,n.tag))}}function Vc(n,r){var a=_w(n);r.forEach(function(l){if(!a.has(l)){a.add(l);var f=Nw.bind(null,n,l);l.then(f,f)}})}function fn(n,r){var a=r.deletions;if(a!==null)for(var l=0;l<a.length;l++){var f=a[l],d=n,b=r,w=b;t:for(;w!==null;){switch(w.tag){case 27:if(Xr(w.type)){fe=w.stateNode,hn=!1;break t}break;case 5:fe=w.stateNode,hn=!1;break t;case 3:case 4:fe=w.stateNode.containerInfo,hn=!0;break t}w=w.return}if(fe===null)throw Error(s(160));K0(d,b,f),fe=null,hn=!1,d=f.alternate,d!==null&&(d.return=null),f.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)J0(r,n),r=r.sibling}var ii=null;function J0(n,r){var a=n.alternate,l=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:fn(r,n),dn(n),l&4&&(qr(3,n,n.return),vl(3,n),qr(5,n,n.return));break;case 1:fn(r,n),dn(n),l&512&&(De||a===null||Ri(a,a.return)),l&64&&nr&&(n=n.updateQueue,n!==null&&(l=n.callbacks,l!==null&&(a=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var f=ii;if(fn(r,n),dn(n),l&512&&(De||a===null||Ri(a,a.return)),l&4){var d=a!==null?a.memoizedState:null;if(l=n.memoizedState,a===null)if(l===null)if(n.stateNode===null){t:{l=n.type,a=n.memoizedProps,f=f.ownerDocument||f;e:switch(l){case"title":d=f.getElementsByTagName("title")[0],(!d||d[pi]||d[Se]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=f.createElement(l),f.head.insertBefore(d,f.querySelector("head > title"))),Qe(d,l,a),d[Se]=n,Ae(d),l=d;break t;case"link":var b=J_("link","href",f).get(l+(a.href||""));if(b){for(var w=0;w<b.length;w++)if(d=b[w],d.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&d.getAttribute("rel")===(a.rel==null?null:a.rel)&&d.getAttribute("title")===(a.title==null?null:a.title)&&d.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){b.splice(w,1);break e}}d=f.createElement(l),Qe(d,l,a),f.head.appendChild(d);break;case"meta":if(b=J_("meta","content",f).get(l+(a.content||""))){for(w=0;w<b.length;w++)if(d=b[w],d.getAttribute("content")===(a.content==null?null:""+a.content)&&d.getAttribute("name")===(a.name==null?null:a.name)&&d.getAttribute("property")===(a.property==null?null:a.property)&&d.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&d.getAttribute("charset")===(a.charSet==null?null:a.charSet)){b.splice(w,1);break e}}d=f.createElement(l),Qe(d,l,a),f.head.appendChild(d);break;default:throw Error(s(468,l))}d[Se]=n,Ae(d),l=d}n.stateNode=l}else W_(f,n.type,n.stateNode);else n.stateNode=Z_(f,l,n.memoizedProps);else d!==l?(d===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):d.count--,l===null?W_(f,n.type,n.stateNode):Z_(f,l,n.memoizedProps)):l===null&&n.stateNode!==null&&Kd(n,n.memoizedProps,a.memoizedProps)}break;case 27:fn(r,n),dn(n),l&512&&(De||a===null||Ri(a,a.return)),a!==null&&l&4&&Kd(n,n.memoizedProps,a.memoizedProps);break;case 5:if(fn(r,n),dn(n),l&512&&(De||a===null||Ri(a,a.return)),n.flags&32){f=n.stateNode;try{cn(f,"")}catch(vt){te(n,n.return,vt)}}l&4&&n.stateNode!=null&&(f=n.memoizedProps,Kd(n,f,a!==null?a.memoizedProps:f)),l&1024&&(Jd=!0);break;case 6:if(fn(r,n),dn(n),l&4){if(n.stateNode===null)throw Error(s(162));l=n.memoizedProps,a=n.stateNode;try{a.nodeValue=l}catch(vt){te(n,n.return,vt)}}break;case 3:if(Zc=null,f=ii,ii=Kc(r.containerInfo),fn(r,n),ii=f,dn(n),l&4&&a!==null&&a.memoizedState.isDehydrated)try{io(r.containerInfo)}catch(vt){te(n,n.return,vt)}Jd&&(Jd=!1,W0(n));break;case 4:l=ii,ii=Kc(n.stateNode.containerInfo),fn(r,n),dn(n),ii=l;break;case 12:fn(r,n),dn(n);break;case 31:fn(r,n),dn(n),l&4&&(l=n.updateQueue,l!==null&&(n.updateQueue=null,Vc(n,l)));break;case 13:fn(r,n),dn(n),n.child.flags&8192&&n.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Lc=an()),l&4&&(l=n.updateQueue,l!==null&&(n.updateQueue=null,Vc(n,l)));break;case 22:f=n.memoizedState!==null;var k=a!==null&&a.memoizedState!==null,G=nr,et=De;if(nr=G||f,De=et||k,fn(r,n),De=et,nr=G,dn(n),l&8192)t:for(r=n.stateNode,r._visibility=f?r._visibility&-2:r._visibility|1,f&&(a===null||k||nr||De||Zs(n)),a=null,r=n;;){if(r.tag===5||r.tag===26){if(a===null){k=a=r;try{if(d=k.stateNode,f)b=d.style,typeof b.setProperty=="function"?b.setProperty("display","none","important"):b.display="none";else{w=k.stateNode;var at=k.memoizedProps.style,Q=at!=null&&at.hasOwnProperty("display")?at.display:null;w.style.display=Q==null||typeof Q=="boolean"?"":(""+Q).trim()}}catch(vt){te(k,k.return,vt)}}}else if(r.tag===6){if(a===null){k=r;try{k.stateNode.nodeValue=f?"":k.memoizedProps}catch(vt){te(k,k.return,vt)}}}else if(r.tag===18){if(a===null){k=r;try{var W=k.stateNode;f?F_(W,!0):F_(k.stateNode,!1)}catch(vt){te(k,k.return,vt)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===n)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===n)break t;for(;r.sibling===null;){if(r.return===null||r.return===n)break t;a===r&&(a=null),r=r.return}a===r&&(a=null),r.sibling.return=r.return,r=r.sibling}l&4&&(l=n.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,Vc(n,a))));break;case 19:fn(r,n),dn(n),l&4&&(l=n.updateQueue,l!==null&&(n.updateQueue=null,Vc(n,l)));break;case 30:break;case 21:break;default:fn(r,n),dn(n)}}function dn(n){var r=n.flags;if(r&2){try{for(var a,l=n.return;l!==null;){if(H0(l)){a=l;break}l=l.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var f=a.stateNode,d=Xd(n);kc(n,d,f);break;case 5:var b=a.stateNode;a.flags&32&&(cn(b,""),a.flags&=-33);var w=Xd(n);kc(n,w,b);break;case 3:case 4:var k=a.stateNode.containerInfo,G=Xd(n);Zd(n,G,k);break;default:throw Error(s(161))}}catch(et){te(n,n.return,et)}n.flags&=-3}r&4096&&(n.flags&=-4097)}function W0(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var r=n;W0(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),n=n.sibling}}function rr(n,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)Y0(n,r.alternate,r),r=r.sibling}function Zs(n){for(n=n.child;n!==null;){var r=n;switch(r.tag){case 0:case 11:case 14:case 15:qr(4,r,r.return),Zs(r);break;case 1:Ri(r,r.return);var a=r.stateNode;typeof a.componentWillUnmount=="function"&&F0(r,r.return,a),Zs(r);break;case 27:Rl(r.stateNode);case 26:case 5:Ri(r,r.return),Zs(r);break;case 22:r.memoizedState===null&&Zs(r);break;case 30:Zs(r);break;default:Zs(r)}n=n.sibling}}function sr(n,r,a){for(a=a&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var l=r.alternate,f=n,d=r,b=d.flags;switch(d.tag){case 0:case 11:case 15:sr(f,d,a),vl(4,d);break;case 1:if(sr(f,d,a),l=d,f=l.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(G){te(l,l.return,G)}if(l=d,f=l.updateQueue,f!==null){var w=l.stateNode;try{var k=f.shared.hiddenCallbacks;if(k!==null)for(f.shared.hiddenCallbacks=null,f=0;f<k.length;f++)Iy(k[f],w)}catch(G){te(l,l.return,G)}}a&&b&64&&B0(d),bl(d,d.return);break;case 27:G0(d);case 26:case 5:sr(f,d,a),a&&l===null&&b&4&&q0(d),bl(d,d.return);break;case 12:sr(f,d,a);break;case 31:sr(f,d,a),a&&b&4&&X0(f,d);break;case 13:sr(f,d,a),a&&b&4&&Z0(f,d);break;case 22:d.memoizedState===null&&sr(f,d,a),bl(d,d.return);break;case 30:break;default:sr(f,d,a)}r=r.sibling}}function Wd(n,r){var a=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),n=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(n=r.memoizedState.cachePool.pool),n!==a&&(n!=null&&n.refCount++,a!=null&&al(a))}function tm(n,r){n=null,r.alternate!==null&&(n=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==n&&(r.refCount++,n!=null&&al(n))}function ri(n,r,a,l){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)t_(n,r,a,l),r=r.sibling}function t_(n,r,a,l){var f=r.flags;switch(r.tag){case 0:case 11:case 15:ri(n,r,a,l),f&2048&&vl(9,r);break;case 1:ri(n,r,a,l);break;case 3:ri(n,r,a,l),f&2048&&(n=null,r.alternate!==null&&(n=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==n&&(r.refCount++,n!=null&&al(n)));break;case 12:if(f&2048){ri(n,r,a,l),n=r.stateNode;try{var d=r.memoizedProps,b=d.id,w=d.onPostCommit;typeof w=="function"&&w(b,r.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(k){te(r,r.return,k)}}else ri(n,r,a,l);break;case 31:ri(n,r,a,l);break;case 13:ri(n,r,a,l);break;case 23:break;case 22:d=r.stateNode,b=r.alternate,r.memoizedState!==null?d._visibility&2?ri(n,r,a,l):El(n,r):d._visibility&2?ri(n,r,a,l):(d._visibility|=2,$a(n,r,a,l,(r.subtreeFlags&10256)!==0||!1)),f&2048&&Wd(b,r);break;case 24:ri(n,r,a,l),f&2048&&tm(r.alternate,r);break;default:ri(n,r,a,l)}}function $a(n,r,a,l,f){for(f=f&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var d=n,b=r,w=a,k=l,G=b.flags;switch(b.tag){case 0:case 11:case 15:$a(d,b,w,k,f),vl(8,b);break;case 23:break;case 22:var et=b.stateNode;b.memoizedState!==null?et._visibility&2?$a(d,b,w,k,f):El(d,b):(et._visibility|=2,$a(d,b,w,k,f)),f&&G&2048&&Wd(b.alternate,b);break;case 24:$a(d,b,w,k,f),f&&G&2048&&tm(b.alternate,b);break;default:$a(d,b,w,k,f)}r=r.sibling}}function El(n,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var a=n,l=r,f=l.flags;switch(l.tag){case 22:El(a,l),f&2048&&Wd(l.alternate,l);break;case 24:El(a,l),f&2048&&tm(l.alternate,l);break;default:El(a,l)}r=r.sibling}}var xl=8192;function Ya(n,r,a){if(n.subtreeFlags&xl)for(n=n.child;n!==null;)e_(n,r,a),n=n.sibling}function e_(n,r,a){switch(n.tag){case 26:Ya(n,r,a),n.flags&xl&&n.memoizedState!==null&&rS(a,ii,n.memoizedState,n.memoizedProps);break;case 5:Ya(n,r,a);break;case 3:case 4:var l=ii;ii=Kc(n.stateNode.containerInfo),Ya(n,r,a),ii=l;break;case 22:n.memoizedState===null&&(l=n.alternate,l!==null&&l.memoizedState!==null?(l=xl,xl=16777216,Ya(n,r,a),xl=l):Ya(n,r,a));break;default:Ya(n,r,a)}}function n_(n){var r=n.alternate;if(r!==null&&(n=r.child,n!==null)){r.child=null;do r=n.sibling,n.sibling=null,n=r;while(n!==null)}}function Tl(n){var r=n.deletions;if((n.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var l=r[a];Be=l,r_(l,n)}n_(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)i_(n),n=n.sibling}function i_(n){switch(n.tag){case 0:case 11:case 15:Tl(n),n.flags&2048&&qr(9,n,n.return);break;case 3:Tl(n);break;case 12:Tl(n);break;case 22:var r=n.stateNode;n.memoizedState!==null&&r._visibility&2&&(n.return===null||n.return.tag!==13)?(r._visibility&=-3,jc(n)):Tl(n);break;default:Tl(n)}}function jc(n){var r=n.deletions;if((n.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var l=r[a];Be=l,r_(l,n)}n_(n)}for(n=n.child;n!==null;){switch(r=n,r.tag){case 0:case 11:case 15:qr(8,r,r.return),jc(r);break;case 22:a=r.stateNode,a._visibility&2&&(a._visibility&=-3,jc(r));break;default:jc(r)}n=n.sibling}}function r_(n,r){for(;Be!==null;){var a=Be;switch(a.tag){case 0:case 11:case 15:qr(8,a,r);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:al(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,Be=l;else t:for(a=n;Be!==null;){l=Be;var f=l.sibling,d=l.return;if(Q0(l),l===a){Be=null;break t}if(f!==null){f.return=d,Be=f;break t}Be=d}}}var vw={getCacheForType:function(n){var r=$e(Ce),a=r.data.get(n);return a===void 0&&(a=n(),r.data.set(n,a)),a},cacheSignal:function(){return $e(Ce).controller.signal}},bw=typeof WeakMap=="function"?WeakMap:Map,Xt=0,oe=null,Pt=null,zt=0,Wt=0,Sn=null,Hr=!1,Qa=!1,em=!1,ar=0,_e=0,Gr=0,Js=0,nm=0,An=0,Ka=0,wl=null,mn=null,im=!1,Lc=0,s_=0,Pc=1/0,Uc=null,$r=null,je=0,Yr=null,Xa=null,or=0,rm=0,sm=null,a_=null,Sl=0,am=null;function Nn(){return(Xt&2)!==0&&zt!==0?zt&-zt:j.T!==null?fm():zu()}function o_(){if(An===0)if((zt&536870912)===0||Gt){var n=Ss;Ss<<=1,(Ss&3932160)===0&&(Ss=262144),An=n}else An=536870912;return n=Tn.current,n!==null&&(n.flags|=32),An}function pn(n,r,a){(n===oe&&(Wt===2||Wt===9)||n.cancelPendingCommit!==null)&&(Za(n,0),Qr(n,zt,An,!1)),As(n,a),((Xt&2)===0||n!==oe)&&(n===oe&&((Xt&2)===0&&(Js|=a),_e===4&&Qr(n,zt,An,!1)),Ii(n))}function l_(n,r,a){if((Xt&6)!==0)throw Error(s(327));var l=!a&&(r&127)===0&&(r&n.expiredLanes)===0||Qn(n,r),f=l?Tw(n,r):lm(n,r,!0),d=l;do{if(f===0){Qa&&!l&&Qr(n,r,0,!1);break}else{if(a=n.current.alternate,d&&!Ew(a)){f=lm(n,r,!1),d=!1;continue}if(f===2){if(d=r,n.errorRecoveryDisabledLanes&d)var b=0;else b=n.pendingLanes&-536870913,b=b!==0?b:b&536870912?536870912:0;if(b!==0){r=b;t:{var w=n;f=wl;var k=w.current.memoizedState.isDehydrated;if(k&&(Za(w,b).flags|=256),b=lm(w,b,!1),b!==2){if(em&&!k){w.errorRecoveryDisabledLanes|=d,Js|=d,f=4;break t}d=mn,mn=f,d!==null&&(mn===null?mn=d:mn.push.apply(mn,d))}f=b}if(d=!1,f!==2)continue}}if(f===1){Za(n,0),Qr(n,r,0,!0);break}t:{switch(l=n,d=f,d){case 0:case 1:throw Error(s(345));case 4:if((r&4194048)!==r)break;case 6:Qr(l,r,An,!Hr);break t;case 2:mn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((r&62914560)===r&&(f=Lc+300-an(),10<f)){if(Qr(l,r,An,!Hr),fi(l,0,!0)!==0)break t;or=r,l.timeoutHandle=U_(u_.bind(null,l,a,mn,Uc,im,r,An,Js,Ka,Hr,d,"Throttled",-0,0),f);break t}u_(l,a,mn,Uc,im,r,An,Js,Ka,Hr,d,null,-0,0)}}break}while(!0);Ii(n)}function u_(n,r,a,l,f,d,b,w,k,G,et,at,Q,W){if(n.timeoutHandle=-1,at=r.subtreeFlags,at&8192||(at&16785408)===16785408){at={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Zn},e_(r,d,at);var vt=(d&62914560)===d?Lc-an():(d&4194048)===d?s_-an():0;if(vt=sS(at,vt),vt!==null){or=d,n.cancelPendingCommit=vt(y_.bind(null,n,r,d,a,l,f,b,w,k,et,at,null,Q,W)),Qr(n,d,b,!G);return}}y_(n,r,d,a,l,f,b,w,k)}function Ew(n){for(var r=n;;){var a=r.tag;if((a===0||a===11||a===15)&&r.flags&16384&&(a=r.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var f=a[l],d=f.getSnapshot;f=f.value;try{if(!En(d(),f))return!1}catch{return!1}}if(a=r.child,r.subtreeFlags&16384&&a!==null)a.return=r,r=a;else{if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Qr(n,r,a,l){r&=~nm,r&=~Js,n.suspendedLanes|=r,n.pingedLanes&=~r,l&&(n.warmLanes|=r),l=n.expirationTimes;for(var f=r;0<f;){var d=31-ve(f),b=1<<d;l[d]=-1,f&=~b}a!==0&&Ns(n,a,r)}function zc(){return(Xt&6)===0?(Al(0),!1):!0}function om(){if(Pt!==null){if(Wt===0)var n=Pt.return;else n=Pt,Xi=qs=null,Td(n),Ba=null,ll=0,n=Pt;for(;n!==null;)z0(n.alternate,n),n=n.return;Pt=null}}function Za(n,r){var a=n.timeoutHandle;a!==-1&&(n.timeoutHandle=-1,Bw(a)),a=n.cancelPendingCommit,a!==null&&(n.cancelPendingCommit=null,a()),or=0,om(),oe=n,Pt=a=Qi(n.current,null),zt=r,Wt=0,Sn=null,Hr=!1,Qa=Qn(n,r),em=!1,Ka=An=nm=Js=Gr=_e=0,mn=wl=null,im=!1,(r&8)!==0&&(r|=r&32);var l=n.entangledLanes;if(l!==0)for(n=n.entanglements,l&=r;0<l;){var f=31-ve(l),d=1<<f;r|=n[f],l&=~d}return ar=r,oc(),a}function c_(n,r){Vt=null,j.H=gl,r===za||r===pc?(r=Ay(),Wt=3):r===hd?(r=Ay(),Wt=4):Wt=r===Ud?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,Sn=r,Pt===null&&(_e=1,Rc(n,Ln(r,n.current)))}function h_(){var n=Tn.current;return n===null?!0:(zt&4194048)===zt?Bn===null:(zt&62914560)===zt||(zt&536870912)!==0?n===Bn:!1}function f_(){var n=j.H;return j.H=gl,n===null?gl:n}function d_(){var n=j.A;return j.A=vw,n}function Bc(){_e=4,Hr||(zt&4194048)!==zt&&Tn.current!==null||(Qa=!0),(Gr&134217727)===0&&(Js&134217727)===0||oe===null||Qr(oe,zt,An,!1)}function lm(n,r,a){var l=Xt;Xt|=2;var f=f_(),d=d_();(oe!==n||zt!==r)&&(Uc=null,Za(n,r)),r=!1;var b=_e;t:do try{if(Wt!==0&&Pt!==null){var w=Pt,k=Sn;switch(Wt){case 8:om(),b=6;break t;case 3:case 2:case 9:case 6:Tn.current===null&&(r=!0);var G=Wt;if(Wt=0,Sn=null,Ja(n,w,k,G),a&&Qa){b=0;break t}break;default:G=Wt,Wt=0,Sn=null,Ja(n,w,k,G)}}xw(),b=_e;break}catch(et){c_(n,et)}while(!0);return r&&n.shellSuspendCounter++,Xi=qs=null,Xt=l,j.H=f,j.A=d,Pt===null&&(oe=null,zt=0,oc()),b}function xw(){for(;Pt!==null;)m_(Pt)}function Tw(n,r){var a=Xt;Xt|=2;var l=f_(),f=d_();oe!==n||zt!==r?(Uc=null,Pc=an()+500,Za(n,r)):Qa=Qn(n,r);t:do try{if(Wt!==0&&Pt!==null){r=Pt;var d=Sn;e:switch(Wt){case 1:Wt=0,Sn=null,Ja(n,r,d,1);break;case 2:case 9:if(wy(d)){Wt=0,Sn=null,p_(r);break}r=function(){Wt!==2&&Wt!==9||oe!==n||(Wt=7),Ii(n)},d.then(r,r);break t;case 3:Wt=7;break t;case 4:Wt=5;break t;case 7:wy(d)?(Wt=0,Sn=null,p_(r)):(Wt=0,Sn=null,Ja(n,r,d,7));break;case 5:var b=null;switch(Pt.tag){case 26:b=Pt.memoizedState;case 5:case 27:var w=Pt;if(b?tv(b):w.stateNode.complete){Wt=0,Sn=null;var k=w.sibling;if(k!==null)Pt=k;else{var G=w.return;G!==null?(Pt=G,Fc(G)):Pt=null}break e}}Wt=0,Sn=null,Ja(n,r,d,5);break;case 6:Wt=0,Sn=null,Ja(n,r,d,6);break;case 8:om(),_e=6;break t;default:throw Error(s(462))}}ww();break}catch(et){c_(n,et)}while(!0);return Xi=qs=null,j.H=l,j.A=f,Xt=a,Pt!==null?0:(oe=null,zt=0,oc(),_e)}function ww(){for(;Pt!==null&&!Pf();)m_(Pt)}function m_(n){var r=P0(n.alternate,n,ar);n.memoizedProps=n.pendingProps,r===null?Fc(n):Pt=r}function p_(n){var r=n,a=r.alternate;switch(r.tag){case 15:case 0:r=O0(a,r,r.pendingProps,r.type,void 0,zt);break;case 11:r=O0(a,r,r.pendingProps,r.type.render,r.ref,zt);break;case 5:Td(r);default:z0(a,r),r=Pt=dy(r,ar),r=P0(a,r,ar)}n.memoizedProps=n.pendingProps,r===null?Fc(n):Pt=r}function Ja(n,r,a,l){Xi=qs=null,Td(r),Ba=null,ll=0;var f=r.return;try{if(fw(n,f,r,a,zt)){_e=1,Rc(n,Ln(a,n.current)),Pt=null;return}}catch(d){if(f!==null)throw Pt=f,d;_e=1,Rc(n,Ln(a,n.current)),Pt=null;return}r.flags&32768?(Gt||l===1?n=!0:Qa||(zt&536870912)!==0?n=!1:(Hr=n=!0,(l===2||l===9||l===3||l===6)&&(l=Tn.current,l!==null&&l.tag===13&&(l.flags|=16384))),g_(r,n)):Fc(r)}function Fc(n){var r=n;do{if((r.flags&32768)!==0){g_(r,Hr);return}n=r.return;var a=pw(r.alternate,r,ar);if(a!==null){Pt=a;return}if(r=r.sibling,r!==null){Pt=r;return}Pt=r=n}while(r!==null);_e===0&&(_e=5)}function g_(n,r){do{var a=gw(n.alternate,n);if(a!==null){a.flags&=32767,Pt=a;return}if(a=n.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!r&&(n=n.sibling,n!==null)){Pt=n;return}Pt=n=a}while(n!==null);_e=6,Pt=null}function y_(n,r,a,l,f,d,b,w,k){n.cancelPendingCommit=null;do qc();while(je!==0);if((Xt&6)!==0)throw Error(s(327));if(r!==null){if(r===n.current)throw Error(s(177));if(d=r.lanes|r.childLanes,d|=Xf,Bf(n,a,d,b,w,k),n===oe&&(Pt=oe=null,zt=0),Xa=r,Yr=n,or=a,rm=d,sm=f,a_=l,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,Cw(wr,function(){return x_(),null})):(n.callbackNode=null,n.callbackPriority=0),l=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||l){l=j.T,j.T=null,f=U.p,U.p=2,b=Xt,Xt|=4;try{yw(n,r,a)}finally{Xt=b,U.p=f,j.T=l}}je=1,__(),v_(),b_()}}function __(){if(je===1){je=0;var n=Yr,r=Xa,a=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||a){a=j.T,j.T=null;var l=U.p;U.p=2;var f=Xt;Xt|=4;try{J0(r,n);var d=bm,b=ry(n.containerInfo),w=d.focusedElem,k=d.selectionRange;if(b!==w&&w&&w.ownerDocument&&iy(w.ownerDocument.documentElement,w)){if(k!==null&&Gf(w)){var G=k.start,et=k.end;if(et===void 0&&(et=G),"selectionStart"in w)w.selectionStart=G,w.selectionEnd=Math.min(et,w.value.length);else{var at=w.ownerDocument||document,Q=at&&at.defaultView||window;if(Q.getSelection){var W=Q.getSelection(),vt=w.textContent.length,Nt=Math.min(k.start,vt),se=k.end===void 0?Nt:Math.min(k.end,vt);!W.extend&&Nt>se&&(b=se,se=Nt,Nt=b);var z=ny(w,Nt),L=ny(w,se);if(z&&L&&(W.rangeCount!==1||W.anchorNode!==z.node||W.anchorOffset!==z.offset||W.focusNode!==L.node||W.focusOffset!==L.offset)){var H=at.createRange();H.setStart(z.node,z.offset),W.removeAllRanges(),Nt>se?(W.addRange(H),W.extend(L.node,L.offset)):(H.setEnd(L.node,L.offset),W.addRange(H))}}}}for(at=[],W=w;W=W.parentNode;)W.nodeType===1&&at.push({element:W,left:W.scrollLeft,top:W.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<at.length;w++){var it=at[w];it.element.scrollLeft=it.left,it.element.scrollTop=it.top}}eh=!!vm,bm=vm=null}finally{Xt=f,U.p=l,j.T=a}}n.current=r,je=2}}function v_(){if(je===2){je=0;var n=Yr,r=Xa,a=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||a){a=j.T,j.T=null;var l=U.p;U.p=2;var f=Xt;Xt|=4;try{Y0(n,r.alternate,r)}finally{Xt=f,U.p=l,j.T=a}}je=3}}function b_(){if(je===4||je===3){je=0,Mu();var n=Yr,r=Xa,a=or,l=a_;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?je=5:(je=0,Xa=Yr=null,E_(n,n.pendingLanes));var f=n.pendingLanes;if(f===0&&($r=null),Hi(a),r=r.stateNode,qe&&typeof qe.onCommitFiberRoot=="function")try{qe.onCommitFiberRoot(Yn,r,void 0,(r.current.flags&128)===128)}catch{}if(l!==null){r=j.T,f=U.p,U.p=2,j.T=null;try{for(var d=n.onRecoverableError,b=0;b<l.length;b++){var w=l[b];d(w.value,{componentStack:w.stack})}}finally{j.T=r,U.p=f}}(or&3)!==0&&qc(),Ii(n),f=n.pendingLanes,(a&261930)!==0&&(f&42)!==0?n===am?Sl++:(Sl=0,am=n):Sl=0,Al(0)}}function E_(n,r){(n.pooledCacheLanes&=r)===0&&(r=n.pooledCache,r!=null&&(n.pooledCache=null,al(r)))}function qc(){return __(),v_(),b_(),x_()}function x_(){if(je!==5)return!1;var n=Yr,r=rm;rm=0;var a=Hi(or),l=j.T,f=U.p;try{U.p=32>a?32:a,j.T=null,a=sm,sm=null;var d=Yr,b=or;if(je=0,Xa=Yr=null,or=0,(Xt&6)!==0)throw Error(s(331));var w=Xt;if(Xt|=4,i_(d.current),t_(d,d.current,b,a),Xt=w,Al(0,!1),qe&&typeof qe.onPostCommitFiberRoot=="function")try{qe.onPostCommitFiberRoot(Yn,d)}catch{}return!0}finally{U.p=f,j.T=l,E_(n,r)}}function T_(n,r,a){r=Ln(a,r),r=Pd(n.stateNode,r,2),n=zr(n,r,2),n!==null&&(As(n,2),Ii(n))}function te(n,r,a){if(n.tag===3)T_(n,n,a);else for(;r!==null;){if(r.tag===3){T_(r,n,a);break}else if(r.tag===1){var l=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&($r===null||!$r.has(l))){n=Ln(a,n),a=w0(2),l=zr(r,a,2),l!==null&&(S0(a,l,r,n),As(l,2),Ii(l));break}}r=r.return}}function um(n,r,a){var l=n.pingCache;if(l===null){l=n.pingCache=new bw;var f=new Set;l.set(r,f)}else f=l.get(r),f===void 0&&(f=new Set,l.set(r,f));f.has(a)||(em=!0,f.add(a),n=Sw.bind(null,n,r,a),r.then(n,n))}function Sw(n,r,a){var l=n.pingCache;l!==null&&l.delete(r),n.pingedLanes|=n.suspendedLanes&a,n.warmLanes&=~a,oe===n&&(zt&a)===a&&(_e===4||_e===3&&(zt&62914560)===zt&&300>an()-Lc?(Xt&2)===0&&Za(n,0):nm|=a,Ka===zt&&(Ka=0)),Ii(n)}function w_(n,r){r===0&&(r=Uu()),n=zs(n,r),n!==null&&(As(n,r),Ii(n))}function Aw(n){var r=n.memoizedState,a=0;r!==null&&(a=r.retryLane),w_(n,a)}function Nw(n,r){var a=0;switch(n.tag){case 31:case 13:var l=n.stateNode,f=n.memoizedState;f!==null&&(a=f.retryLane);break;case 19:l=n.stateNode;break;case 22:l=n.stateNode._retryCache;break;default:throw Error(s(314))}l!==null&&l.delete(r),w_(n,a)}function Cw(n,r){return ge(n,r)}var Hc=null,Wa=null,cm=!1,Gc=!1,hm=!1,Kr=0;function Ii(n){n!==Wa&&n.next===null&&(Wa===null?Hc=Wa=n:Wa=Wa.next=n),Gc=!0,cm||(cm=!0,Iw())}function Al(n,r){if(!hm&&Gc){hm=!0;do for(var a=!1,l=Hc;l!==null;){if(n!==0){var f=l.pendingLanes;if(f===0)var d=0;else{var b=l.suspendedLanes,w=l.pingedLanes;d=(1<<31-ve(42|n)+1)-1,d&=f&~(b&~w),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(a=!0,C_(l,d))}else d=zt,d=fi(l,l===oe?d:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(d&3)===0||Qn(l,d)||(a=!0,C_(l,d));l=l.next}while(a);hm=!1}}function Rw(){S_()}function S_(){Gc=cm=!1;var n=0;Kr!==0&&zw()&&(n=Kr);for(var r=an(),a=null,l=Hc;l!==null;){var f=l.next,d=A_(l,r);d===0?(l.next=null,a===null?Hc=f:a.next=f,f===null&&(Wa=a)):(a=l,(n!==0||(d&3)!==0)&&(Gc=!0)),l=f}je!==0&&je!==5||Al(n),Kr!==0&&(Kr=0)}function A_(n,r){for(var a=n.suspendedLanes,l=n.pingedLanes,f=n.expirationTimes,d=n.pendingLanes&-62914561;0<d;){var b=31-ve(d),w=1<<b,k=f[b];k===-1?((w&a)===0||(w&l)!==0)&&(f[b]=zf(w,r)):k<=r&&(n.expiredLanes|=w),d&=~w}if(r=oe,a=zt,a=fi(n,n===r?a:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),l=n.callbackNode,a===0||n===r&&(Wt===2||Wt===9)||n.cancelPendingCommit!==null)return l!==null&&l!==null&&Tr(l),n.callbackNode=null,n.callbackPriority=0;if((a&3)===0||Qn(n,a)){if(r=a&-a,r===n.callbackPriority)return r;switch(l!==null&&Tr(l),Hi(a)){case 2:case 8:a=jo;break;case 32:a=wr;break;case 268435456:a=ku;break;default:a=wr}return l=N_.bind(null,n),a=ge(a,l),n.callbackPriority=r,n.callbackNode=a,r}return l!==null&&l!==null&&Tr(l),n.callbackPriority=2,n.callbackNode=null,2}function N_(n,r){if(je!==0&&je!==5)return n.callbackNode=null,n.callbackPriority=0,null;var a=n.callbackNode;if(qc()&&n.callbackNode!==a)return null;var l=zt;return l=fi(n,n===oe?l:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),l===0?null:(l_(n,l,r),A_(n,an()),n.callbackNode!=null&&n.callbackNode===a?N_.bind(null,n):null)}function C_(n,r){if(qc())return null;l_(n,r,!0)}function Iw(){Fw(function(){(Xt&6)!==0?ge(Vo,Rw):S_()})}function fm(){if(Kr===0){var n=Pa;n===0&&(n=ci,ci<<=1,(ci&261888)===0&&(ci=256)),Kr=n}return Kr}function R_(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:Ta(""+n)}function I_(n,r){var a=r.ownerDocument.createElement("input");return a.name=r.name,a.value=r.value,n.id&&a.setAttribute("form",n.id),r.parentNode.insertBefore(a,r),n=new FormData(n),a.parentNode.removeChild(a),n}function Dw(n,r,a,l,f){if(r==="submit"&&a&&a.stateNode===f){var d=R_((f[Ue]||null).action),b=l.submitter;b&&(r=(r=b[Ue]||null)?R_(r.formAction):b.getAttribute("formAction"),r!==null&&(d=r,b=null));var w=new Ti("action","action",null,l,f);n.push({event:w,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Kr!==0){var k=b?I_(f,b):new FormData(f);Od(a,{pending:!0,data:k,method:f.method,action:d},null,k)}}else typeof d=="function"&&(w.preventDefault(),k=b?I_(f,b):new FormData(f),Od(a,{pending:!0,data:k,method:f.method,action:d},d,k))},currentTarget:f}]})}}for(var dm=0;dm<Kf.length;dm++){var mm=Kf[dm],Ow=mm.toLowerCase(),Mw=mm[0].toUpperCase()+mm.slice(1);ni(Ow,"on"+Mw)}ni(oy,"onAnimationEnd"),ni(ly,"onAnimationIteration"),ni(uy,"onAnimationStart"),ni("dblclick","onDoubleClick"),ni("focusin","onFocus"),ni("focusout","onBlur"),ni(K1,"onTransitionRun"),ni(X1,"onTransitionStart"),ni(Z1,"onTransitionCancel"),ni(cy,"onTransitionEnd"),vi("onMouseEnter",["mouseout","mouseover"]),vi("onMouseLeave",["mouseout","mouseover"]),vi("onPointerEnter",["pointerout","pointerover"]),vi("onPointerLeave",["pointerout","pointerover"]),_i("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),_i("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),_i("onBeforeInput",["compositionend","keypress","textInput","paste"]),_i("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),_i("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),_i("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Nl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),kw=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Nl));function D_(n,r){r=(r&4)!==0;for(var a=0;a<n.length;a++){var l=n[a],f=l.event;l=l.listeners;t:{var d=void 0;if(r)for(var b=l.length-1;0<=b;b--){var w=l[b],k=w.instance,G=w.currentTarget;if(w=w.listener,k!==d&&f.isPropagationStopped())break t;d=w,f.currentTarget=G;try{d(f)}catch(et){ac(et)}f.currentTarget=null,d=k}else for(b=0;b<l.length;b++){if(w=l[b],k=w.instance,G=w.currentTarget,w=w.listener,k!==d&&f.isPropagationStopped())break t;d=w,f.currentTarget=G;try{d(f)}catch(et){ac(et)}f.currentTarget=null,d=k}}}}function Ut(n,r){var a=r[_a];a===void 0&&(a=r[_a]=new Set);var l=n+"__bubble";a.has(l)||(O_(r,n,2,!1),a.add(l))}function pm(n,r,a){var l=0;r&&(l|=4),O_(a,n,l,r)}var $c="_reactListening"+Math.random().toString(36).slice(2);function gm(n){if(!n[$c]){n[$c]=!0,Uo.forEach(function(a){a!=="selectionchange"&&(kw.has(a)||pm(a,!1,n),pm(a,!0,n))});var r=n.nodeType===9?n:n.ownerDocument;r===null||r[$c]||(r[$c]=!0,pm("selectionchange",!1,r))}}function O_(n,r,a,l){switch(ov(r)){case 2:var f=lS;break;case 8:f=uS;break;default:f=Dm}a=f.bind(null,r,a,n),f=void 0,!Os||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(f=!0),l?f!==void 0?n.addEventListener(r,a,{capture:!0,passive:f}):n.addEventListener(r,a,!0):f!==void 0?n.addEventListener(r,a,{passive:f}):n.addEventListener(r,a,!1)}function ym(n,r,a,l,f){var d=l;if((r&1)===0&&(r&2)===0&&l!==null)t:for(;;){if(l===null)return;var b=l.tag;if(b===3||b===4){var w=l.stateNode.containerInfo;if(w===f)break;if(b===4)for(b=l.return;b!==null;){var k=b.tag;if((k===3||k===4)&&b.stateNode.containerInfo===f)return;b=b.return}for(;w!==null;){if(b=gi(w),b===null)return;if(k=b.tag,k===5||k===6||k===26||k===27){l=d=b;continue t}w=w.parentNode}}l=l.return}Ir(function(){var G=d,et=Mn(a),at=[];t:{var Q=hy.get(n);if(Q!==void 0){var W=Ti,vt=n;switch(n){case"keypress":if(ks(a)===0)break t;case"keydown":case"keyup":W=ic;break;case"focusin":vt="focus",W=js;break;case"focusout":vt="blur",W=js;break;case"beforeblur":case"afterblur":W=js;break;case"click":if(a.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":W=Jo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":W=Qu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":W=y;break;case oy:case ly:case uy:W=Xu;break;case cy:W=N;break;case"scroll":case"scrollend":W=Zo;break;case"wheel":W=Z;break;case"copy":case"cut":case"paste":W=Zu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":W=Yi;break;case"toggle":case"beforetoggle":W=kt}var Nt=(r&4)!==0,se=!Nt&&(n==="scroll"||n==="scrollend"),z=Nt?Q!==null?Q+"Capture":null:Q;Nt=[];for(var L=G,H;L!==null;){var it=L;if(H=it.stateNode,it=it.tag,it!==5&&it!==26&&it!==27||H===null||z===null||(it=Jn(L,z),it!=null&&Nt.push(Cl(L,it,H))),se)break;L=L.return}0<Nt.length&&(Q=new W(Q,vt,null,a,et),at.push({event:Q,listeners:Nt}))}}if((r&7)===0){t:{if(Q=n==="mouseover"||n==="pointerover",W=n==="mouseout"||n==="pointerout",Q&&a!==Qo&&(vt=a.relatedTarget||a.fromElement)&&(gi(vt)||vt[mi]))break t;if((W||Q)&&(Q=et.window===et?et:(Q=et.ownerDocument)?Q.defaultView||Q.parentWindow:window,W?(vt=a.relatedTarget||a.toElement,W=G,vt=vt?gi(vt):null,vt!==null&&(se=u(vt),Nt=vt.tag,vt!==se||Nt!==5&&Nt!==27&&Nt!==6)&&(vt=null)):(W=null,vt=G),W!==vt)){if(Nt=Jo,it="onMouseLeave",z="onMouseEnter",L="mouse",(n==="pointerout"||n==="pointerover")&&(Nt=Yi,it="onPointerLeave",z="onPointerEnter",L="pointer"),se=W==null?Q:vn(W),H=vt==null?Q:vn(vt),Q=new Nt(it,L+"leave",W,a,et),Q.target=se,Q.relatedTarget=H,it=null,gi(et)===G&&(Nt=new Nt(z,L+"enter",vt,a,et),Nt.target=H,Nt.relatedTarget=se,it=Nt),se=it,W&&vt)e:{for(Nt=Vw,z=W,L=vt,H=0,it=z;it;it=Nt(it))H++;it=0;for(var Tt=L;Tt;Tt=Nt(Tt))it++;for(;0<H-it;)z=Nt(z),H--;for(;0<it-H;)L=Nt(L),it--;for(;H--;){if(z===L||L!==null&&z===L.alternate){Nt=z;break e}z=Nt(z),L=Nt(L)}Nt=null}else Nt=null;W!==null&&M_(at,Q,W,Nt,!1),vt!==null&&se!==null&&M_(at,se,vt,Nt,!0)}}t:{if(Q=G?vn(G):window,W=Q.nodeName&&Q.nodeName.toLowerCase(),W==="select"||W==="input"&&Q.type==="file")var Yt=Xg;else if(Qg(Q))if(Zg)Yt=$1;else{Yt=H1;var bt=q1}else W=Q.nodeName,!W||W.toLowerCase()!=="input"||Q.type!=="checkbox"&&Q.type!=="radio"?G&&xa(G.elementType)&&(Yt=Xg):Yt=G1;if(Yt&&(Yt=Yt(n,G))){Kg(at,Yt,a,et);break t}bt&&bt(n,Q,G),n==="focusout"&&G&&Q.type==="number"&&G.memoizedProps.value!=null&&Go(Q,"number",Q.value)}switch(bt=G?vn(G):window,n){case"focusin":(Qg(bt)||bt.contentEditable==="true")&&(Ia=bt,$f=G,il=null);break;case"focusout":il=$f=Ia=null;break;case"mousedown":Yf=!0;break;case"contextmenu":case"mouseup":case"dragend":Yf=!1,sy(at,a,et);break;case"selectionchange":if(Q1)break;case"keydown":case"keyup":sy(at,a,et)}var jt;if(Kt)t:{switch(n){case"compositionstart":var Bt="onCompositionStart";break t;case"compositionend":Bt="onCompositionEnd";break t;case"compositionupdate":Bt="onCompositionUpdate";break t}Bt=void 0}else Ra?Ls(n,a)&&(Bt="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(Bt="onCompositionStart");Bt&&(Ai&&a.locale!=="ko"&&(Ra||Bt!=="onCompositionStart"?Bt==="onCompositionEnd"&&Ra&&(jt=Xo()):(xi=et,Ko="value"in xi?xi.value:xi.textContent,Ra=!0)),bt=Yc(G,Bt),0<bt.length&&(Bt=new Si(Bt,n,null,a,et),at.push({event:Bt,listeners:bt}),jt?Bt.data=jt:(jt=Ca(a),jt!==null&&(Bt.data=jt)))),(jt=Vn?U1(n,a):z1(n,a))&&(Bt=Yc(G,"onBeforeInput"),0<Bt.length&&(bt=new Si("onBeforeInput","beforeinput",null,a,et),at.push({event:bt,listeners:Bt}),bt.data=jt)),Dw(at,n,G,a,et)}D_(at,r)})}function Cl(n,r,a){return{instance:n,listener:r,currentTarget:a}}function Yc(n,r){for(var a=r+"Capture",l=[];n!==null;){var f=n,d=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||d===null||(f=Jn(n,a),f!=null&&l.unshift(Cl(n,f,d)),f=Jn(n,r),f!=null&&l.push(Cl(n,f,d))),n.tag===3)return l;n=n.return}return[]}function Vw(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function M_(n,r,a,l,f){for(var d=r._reactName,b=[];a!==null&&a!==l;){var w=a,k=w.alternate,G=w.stateNode;if(w=w.tag,k!==null&&k===l)break;w!==5&&w!==26&&w!==27||G===null||(k=G,f?(G=Jn(a,d),G!=null&&b.unshift(Cl(a,G,k))):f||(G=Jn(a,d),G!=null&&b.push(Cl(a,G,k)))),a=a.return}b.length!==0&&n.push({event:r,listeners:b})}var jw=/\r\n?/g,Lw=/\u0000|\uFFFD/g;function k_(n){return(typeof n=="string"?n:""+n).replace(jw,`
`).replace(Lw,"")}function V_(n,r){return r=k_(r),k_(n)===r}function re(n,r,a,l,f,d){switch(a){case"children":typeof l=="string"?r==="body"||r==="textarea"&&l===""||cn(n,l):(typeof l=="number"||typeof l=="bigint")&&r!=="body"&&cn(n,""+l);break;case"className":bn(n,"class",l);break;case"tabIndex":bn(n,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":bn(n,a,l);break;case"style":Yo(n,l,d);break;case"data":if(r!=="object"){bn(n,"data",l);break}case"src":case"href":if(l===""&&(r!=="a"||a!=="href")){n.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){n.removeAttribute(a);break}l=Ta(""+l),n.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){n.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(a==="formAction"?(r!=="input"&&re(n,r,"name",f.name,f,null),re(n,r,"formEncType",f.formEncType,f,null),re(n,r,"formMethod",f.formMethod,f,null),re(n,r,"formTarget",f.formTarget,f,null)):(re(n,r,"encType",f.encType,f,null),re(n,r,"method",f.method,f,null),re(n,r,"target",f.target,f,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){n.removeAttribute(a);break}l=Ta(""+l),n.setAttribute(a,l);break;case"onClick":l!=null&&(n.onclick=Zn);break;case"onScroll":l!=null&&Ut("scroll",n);break;case"onScrollEnd":l!=null&&Ut("scrollend",n);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(f.children!=null)throw Error(s(60));n.innerHTML=a}}break;case"multiple":n.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":n.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){n.removeAttribute("xlink:href");break}a=Ta(""+l),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(a,""+l):n.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(a,""):n.removeAttribute(a);break;case"capture":case"download":l===!0?n.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(a,l):n.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?n.setAttribute(a,l):n.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?n.removeAttribute(a):n.setAttribute(a,l);break;case"popover":Ut("beforetoggle",n),Ut("toggle",n),ba(n,"popover",l);break;case"xlinkActuate":Ne(n,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Ne(n,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Ne(n,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Ne(n,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Ne(n,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Ne(n,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Ne(n,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Ne(n,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Ne(n,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":ba(n,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Yu.get(a)||a,ba(n,a,l))}}function _m(n,r,a,l,f,d){switch(a){case"style":Yo(n,l,d);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(f.children!=null)throw Error(s(60));n.innerHTML=a}}break;case"children":typeof l=="string"?cn(n,l):(typeof l=="number"||typeof l=="bigint")&&cn(n,""+l);break;case"onScroll":l!=null&&Ut("scroll",n);break;case"onScrollEnd":l!=null&&Ut("scrollend",n);break;case"onClick":l!=null&&(n.onclick=Zn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!zo.hasOwnProperty(a))t:{if(a[0]==="o"&&a[1]==="n"&&(f=a.endsWith("Capture"),r=a.slice(2,f?a.length-7:void 0),d=n[Ue]||null,d=d!=null?d[a]:null,typeof d=="function"&&n.removeEventListener(r,d,f),typeof l=="function")){typeof d!="function"&&d!==null&&(a in n?n[a]=null:n.hasAttribute(a)&&n.removeAttribute(a)),n.addEventListener(r,l,f);break t}a in n?n[a]=l:l===!0?n.setAttribute(a,""):ba(n,a,l)}}}function Qe(n,r,a){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ut("error",n),Ut("load",n);var l=!1,f=!1,d;for(d in a)if(a.hasOwnProperty(d)){var b=a[d];if(b!=null)switch(d){case"src":l=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:re(n,r,d,b,a,null)}}f&&re(n,r,"srcSet",a.srcSet,a,null),l&&re(n,r,"src",a.src,a,null);return;case"input":Ut("invalid",n);var w=d=b=f=null,k=null,G=null;for(l in a)if(a.hasOwnProperty(l)){var et=a[l];if(et!=null)switch(l){case"name":f=et;break;case"type":b=et;break;case"checked":k=et;break;case"defaultChecked":G=et;break;case"value":d=et;break;case"defaultValue":w=et;break;case"children":case"dangerouslySetInnerHTML":if(et!=null)throw Error(s(137,r));break;default:re(n,r,l,et,a,null)}}Hu(n,d,w,k,G,b,f,!1);return;case"select":Ut("invalid",n),l=b=d=null;for(f in a)if(a.hasOwnProperty(f)&&(w=a[f],w!=null))switch(f){case"value":d=w;break;case"defaultValue":b=w;break;case"multiple":l=w;default:re(n,r,f,w,a,null)}r=d,a=b,n.multiple=!!l,r!=null?Ar(n,!!l,r,!1):a!=null&&Ar(n,!!l,a,!0);return;case"textarea":Ut("invalid",n),d=f=l=null;for(b in a)if(a.hasOwnProperty(b)&&(w=a[b],w!=null))switch(b){case"value":l=w;break;case"defaultValue":f=w;break;case"children":d=w;break;case"dangerouslySetInnerHTML":if(w!=null)throw Error(s(91));break;default:re(n,r,b,w,a,null)}Nr(n,l,f,d);return;case"option":for(k in a)if(a.hasOwnProperty(k)&&(l=a[k],l!=null))switch(k){case"selected":n.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:re(n,r,k,l,a,null)}return;case"dialog":Ut("beforetoggle",n),Ut("toggle",n),Ut("cancel",n),Ut("close",n);break;case"iframe":case"object":Ut("load",n);break;case"video":case"audio":for(l=0;l<Nl.length;l++)Ut(Nl[l],n);break;case"image":Ut("error",n),Ut("load",n);break;case"details":Ut("toggle",n);break;case"embed":case"source":case"link":Ut("error",n),Ut("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(G in a)if(a.hasOwnProperty(G)&&(l=a[G],l!=null))switch(G){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:re(n,r,G,l,a,null)}return;default:if(xa(r)){for(et in a)a.hasOwnProperty(et)&&(l=a[et],l!==void 0&&_m(n,r,et,l,a,void 0));return}}for(w in a)a.hasOwnProperty(w)&&(l=a[w],l!=null&&re(n,r,w,l,a,null))}function Pw(n,r,a,l){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,d=null,b=null,w=null,k=null,G=null,et=null;for(W in a){var at=a[W];if(a.hasOwnProperty(W)&&at!=null)switch(W){case"checked":break;case"value":break;case"defaultValue":k=at;default:l.hasOwnProperty(W)||re(n,r,W,null,l,at)}}for(var Q in l){var W=l[Q];if(at=a[Q],l.hasOwnProperty(Q)&&(W!=null||at!=null))switch(Q){case"type":d=W;break;case"name":f=W;break;case"checked":G=W;break;case"defaultChecked":et=W;break;case"value":b=W;break;case"defaultValue":w=W;break;case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(s(137,r));break;default:W!==at&&re(n,r,Q,W,l,at)}}Ea(n,b,w,k,G,et,d,f);return;case"select":W=b=w=Q=null;for(d in a)if(k=a[d],a.hasOwnProperty(d)&&k!=null)switch(d){case"value":break;case"multiple":W=k;default:l.hasOwnProperty(d)||re(n,r,d,null,l,k)}for(f in l)if(d=l[f],k=a[f],l.hasOwnProperty(f)&&(d!=null||k!=null))switch(f){case"value":Q=d;break;case"defaultValue":w=d;break;case"multiple":b=d;default:d!==k&&re(n,r,f,d,l,k)}r=w,a=b,l=W,Q!=null?Ar(n,!!a,Q,!1):!!l!=!!a&&(r!=null?Ar(n,!!a,r,!0):Ar(n,!!a,a?[]:"",!1));return;case"textarea":W=Q=null;for(w in a)if(f=a[w],a.hasOwnProperty(w)&&f!=null&&!l.hasOwnProperty(w))switch(w){case"value":break;case"children":break;default:re(n,r,w,null,l,f)}for(b in l)if(f=l[b],d=a[b],l.hasOwnProperty(b)&&(f!=null||d!=null))switch(b){case"value":Q=f;break;case"defaultValue":W=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(s(91));break;default:f!==d&&re(n,r,b,f,l,d)}Gu(n,Q,W);return;case"option":for(var vt in a)if(Q=a[vt],a.hasOwnProperty(vt)&&Q!=null&&!l.hasOwnProperty(vt))switch(vt){case"selected":n.selected=!1;break;default:re(n,r,vt,null,l,Q)}for(k in l)if(Q=l[k],W=a[k],l.hasOwnProperty(k)&&Q!==W&&(Q!=null||W!=null))switch(k){case"selected":n.selected=Q&&typeof Q!="function"&&typeof Q!="symbol";break;default:re(n,r,k,Q,l,W)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Nt in a)Q=a[Nt],a.hasOwnProperty(Nt)&&Q!=null&&!l.hasOwnProperty(Nt)&&re(n,r,Nt,null,l,Q);for(G in l)if(Q=l[G],W=a[G],l.hasOwnProperty(G)&&Q!==W&&(Q!=null||W!=null))switch(G){case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(s(137,r));break;default:re(n,r,G,Q,l,W)}return;default:if(xa(r)){for(var se in a)Q=a[se],a.hasOwnProperty(se)&&Q!==void 0&&!l.hasOwnProperty(se)&&_m(n,r,se,void 0,l,Q);for(et in l)Q=l[et],W=a[et],!l.hasOwnProperty(et)||Q===W||Q===void 0&&W===void 0||_m(n,r,et,Q,l,W);return}}for(var z in a)Q=a[z],a.hasOwnProperty(z)&&Q!=null&&!l.hasOwnProperty(z)&&re(n,r,z,null,l,Q);for(at in l)Q=l[at],W=a[at],!l.hasOwnProperty(at)||Q===W||Q==null&&W==null||re(n,r,at,Q,l,W)}function j_(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Uw(){if(typeof performance.getEntriesByType=="function"){for(var n=0,r=0,a=performance.getEntriesByType("resource"),l=0;l<a.length;l++){var f=a[l],d=f.transferSize,b=f.initiatorType,w=f.duration;if(d&&w&&j_(b)){for(b=0,w=f.responseEnd,l+=1;l<a.length;l++){var k=a[l],G=k.startTime;if(G>w)break;var et=k.transferSize,at=k.initiatorType;et&&j_(at)&&(k=k.responseEnd,b+=et*(k<w?1:(w-G)/(k-G)))}if(--l,r+=8*(d+b)/(f.duration/1e3),n++,10<n)break}}if(0<n)return r/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var vm=null,bm=null;function Qc(n){return n.nodeType===9?n:n.ownerDocument}function L_(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function P_(n,r){if(n===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&r==="foreignObject"?0:n}function Em(n,r){return n==="textarea"||n==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var xm=null;function zw(){var n=window.event;return n&&n.type==="popstate"?n===xm?!1:(xm=n,!0):(xm=null,!1)}var U_=typeof setTimeout=="function"?setTimeout:void 0,Bw=typeof clearTimeout=="function"?clearTimeout:void 0,z_=typeof Promise=="function"?Promise:void 0,Fw=typeof queueMicrotask=="function"?queueMicrotask:typeof z_<"u"?function(n){return z_.resolve(null).then(n).catch(qw)}:U_;function qw(n){setTimeout(function(){throw n})}function Xr(n){return n==="head"}function B_(n,r){var a=r,l=0;do{var f=a.nextSibling;if(n.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"||a==="/&"){if(l===0){n.removeChild(f),io(r);return}l--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")l++;else if(a==="html")Rl(n.ownerDocument.documentElement);else if(a==="head"){a=n.ownerDocument.head,Rl(a);for(var d=a.firstChild;d;){var b=d.nextSibling,w=d.nodeName;d[pi]||w==="SCRIPT"||w==="STYLE"||w==="LINK"&&d.rel.toLowerCase()==="stylesheet"||a.removeChild(d),d=b}}else a==="body"&&Rl(n.ownerDocument.body);a=f}while(a);io(r)}function F_(n,r){var a=n;n=0;do{var l=a.nextSibling;if(a.nodeType===1?r?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(r?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),l&&l.nodeType===8)if(a=l.data,a==="/$"){if(n===0)break;n--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||n++;a=l}while(a)}function Tm(n){var r=n.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var a=r;switch(r=r.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Tm(a),va(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}n.removeChild(a)}}function Hw(n,r,a,l){for(;n.nodeType===1;){var f=a;if(n.nodeName.toLowerCase()!==r.toLowerCase()){if(!l&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(l){if(!n[pi])switch(r){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(d=n.getAttribute("rel"),d==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(d!==f.rel||n.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||n.getAttribute("title")!==(f.title==null?null:f.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(d=n.getAttribute("src"),(d!==(f.src==null?null:f.src)||n.getAttribute("type")!==(f.type==null?null:f.type)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&d&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(r==="input"&&n.type==="hidden"){var d=f.name==null?null:""+f.name;if(f.type==="hidden"&&n.getAttribute("name")===d)return n}else return n;if(n=Fn(n.nextSibling),n===null)break}return null}function Gw(n,r,a){if(r==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!a||(n=Fn(n.nextSibling),n===null))return null;return n}function q_(n,r){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!r||(n=Fn(n.nextSibling),n===null))return null;return n}function wm(n){return n.data==="$?"||n.data==="$~"}function Sm(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function $w(n,r){var a=n.ownerDocument;if(n.data==="$~")n._reactRetry=r;else if(n.data!=="$?"||a.readyState!=="loading")r();else{var l=function(){r(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),n._reactRetry=l}}function Fn(n){for(;n!=null;n=n.nextSibling){var r=n.nodeType;if(r===1||r===3)break;if(r===8){if(r=n.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return n}var Am=null;function H_(n){n=n.nextSibling;for(var r=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"||a==="/&"){if(r===0)return Fn(n.nextSibling);r--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||r++}n=n.nextSibling}return null}function G_(n){n=n.previousSibling;for(var r=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(r===0)return n;r--}else a!=="/$"&&a!=="/&"||r++}n=n.previousSibling}return null}function $_(n,r,a){switch(r=Qc(a),n){case"html":if(n=r.documentElement,!n)throw Error(s(452));return n;case"head":if(n=r.head,!n)throw Error(s(453));return n;case"body":if(n=r.body,!n)throw Error(s(454));return n;default:throw Error(s(451))}}function Rl(n){for(var r=n.attributes;r.length;)n.removeAttributeNode(r[0]);va(n)}var qn=new Map,Y_=new Set;function Kc(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var lr=U.d;U.d={f:Yw,r:Qw,D:Kw,C:Xw,L:Zw,m:Jw,X:tS,S:Ww,M:eS};function Yw(){var n=lr.f(),r=zc();return n||r}function Qw(n){var r=On(n);r!==null&&r.tag===5&&r.type==="form"?c0(r):lr.r(n)}var to=typeof document>"u"?null:document;function Q_(n,r,a){var l=to;if(l&&typeof r=="string"&&r){var f=un(r);f='link[rel="'+n+'"][href="'+f+'"]',typeof a=="string"&&(f+='[crossorigin="'+a+'"]'),Y_.has(f)||(Y_.add(f),n={rel:n,crossOrigin:a,href:r},l.querySelector(f)===null&&(r=l.createElement("link"),Qe(r,"link",n),Ae(r),l.head.appendChild(r)))}}function Kw(n){lr.D(n),Q_("dns-prefetch",n,null)}function Xw(n,r){lr.C(n,r),Q_("preconnect",n,r)}function Zw(n,r,a){lr.L(n,r,a);var l=to;if(l&&n&&r){var f='link[rel="preload"][as="'+un(r)+'"]';r==="image"&&a&&a.imageSrcSet?(f+='[imagesrcset="'+un(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(f+='[imagesizes="'+un(a.imageSizes)+'"]')):f+='[href="'+un(n)+'"]';var d=f;switch(r){case"style":d=eo(n);break;case"script":d=no(n)}qn.has(d)||(n=E({rel:"preload",href:r==="image"&&a&&a.imageSrcSet?void 0:n,as:r},a),qn.set(d,n),l.querySelector(f)!==null||r==="style"&&l.querySelector(Il(d))||r==="script"&&l.querySelector(Dl(d))||(r=l.createElement("link"),Qe(r,"link",n),Ae(r),l.head.appendChild(r)))}}function Jw(n,r){lr.m(n,r);var a=to;if(a&&n){var l=r&&typeof r.as=="string"?r.as:"script",f='link[rel="modulepreload"][as="'+un(l)+'"][href="'+un(n)+'"]',d=f;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=no(n)}if(!qn.has(d)&&(n=E({rel:"modulepreload",href:n},r),qn.set(d,n),a.querySelector(f)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Dl(d)))return}l=a.createElement("link"),Qe(l,"link",n),Ae(l),a.head.appendChild(l)}}}function Ww(n,r,a){lr.S(n,r,a);var l=to;if(l&&n){var f=yi(l).hoistableStyles,d=eo(n);r=r||"default";var b=f.get(d);if(!b){var w={loading:0,preload:null};if(b=l.querySelector(Il(d)))w.loading=5;else{n=E({rel:"stylesheet",href:n,"data-precedence":r},a),(a=qn.get(d))&&Nm(n,a);var k=b=l.createElement("link");Ae(k),Qe(k,"link",n),k._p=new Promise(function(G,et){k.onload=G,k.onerror=et}),k.addEventListener("load",function(){w.loading|=1}),k.addEventListener("error",function(){w.loading|=2}),w.loading|=4,Xc(b,r,l)}b={type:"stylesheet",instance:b,count:1,state:w},f.set(d,b)}}}function tS(n,r){lr.X(n,r);var a=to;if(a&&n){var l=yi(a).hoistableScripts,f=no(n),d=l.get(f);d||(d=a.querySelector(Dl(f)),d||(n=E({src:n,async:!0},r),(r=qn.get(f))&&Cm(n,r),d=a.createElement("script"),Ae(d),Qe(d,"link",n),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(f,d))}}function eS(n,r){lr.M(n,r);var a=to;if(a&&n){var l=yi(a).hoistableScripts,f=no(n),d=l.get(f);d||(d=a.querySelector(Dl(f)),d||(n=E({src:n,async:!0,type:"module"},r),(r=qn.get(f))&&Cm(n,r),d=a.createElement("script"),Ae(d),Qe(d,"link",n),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(f,d))}}function K_(n,r,a,l){var f=(f=st.current)?Kc(f):null;if(!f)throw Error(s(446));switch(n){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(r=eo(a.href),a=yi(f).hoistableStyles,l=a.get(r),l||(l={type:"style",instance:null,count:0,state:null},a.set(r,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){n=eo(a.href);var d=yi(f).hoistableStyles,b=d.get(n);if(b||(f=f.ownerDocument||f,b={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(n,b),(d=f.querySelector(Il(n)))&&!d._p&&(b.instance=d,b.state.loading=5),qn.has(n)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},qn.set(n,a),d||nS(f,n,a,b.state))),r&&l===null)throw Error(s(528,""));return b}if(r&&l!==null)throw Error(s(529,""));return null;case"script":return r=a.async,a=a.src,typeof a=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=no(a),a=yi(f).hoistableScripts,l=a.get(r),l||(l={type:"script",instance:null,count:0,state:null},a.set(r,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,n))}}function eo(n){return'href="'+un(n)+'"'}function Il(n){return'link[rel="stylesheet"]['+n+"]"}function X_(n){return E({},n,{"data-precedence":n.precedence,precedence:null})}function nS(n,r,a,l){n.querySelector('link[rel="preload"][as="style"]['+r+"]")?l.loading=1:(r=n.createElement("link"),l.preload=r,r.addEventListener("load",function(){return l.loading|=1}),r.addEventListener("error",function(){return l.loading|=2}),Qe(r,"link",a),Ae(r),n.head.appendChild(r))}function no(n){return'[src="'+un(n)+'"]'}function Dl(n){return"script[async]"+n}function Z_(n,r,a){if(r.count++,r.instance===null)switch(r.type){case"style":var l=n.querySelector('style[data-href~="'+un(a.href)+'"]');if(l)return r.instance=l,Ae(l),l;var f=E({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(n.ownerDocument||n).createElement("style"),Ae(l),Qe(l,"style",f),Xc(l,a.precedence,n),r.instance=l;case"stylesheet":f=eo(a.href);var d=n.querySelector(Il(f));if(d)return r.state.loading|=4,r.instance=d,Ae(d),d;l=X_(a),(f=qn.get(f))&&Nm(l,f),d=(n.ownerDocument||n).createElement("link"),Ae(d);var b=d;return b._p=new Promise(function(w,k){b.onload=w,b.onerror=k}),Qe(d,"link",l),r.state.loading|=4,Xc(d,a.precedence,n),r.instance=d;case"script":return d=no(a.src),(f=n.querySelector(Dl(d)))?(r.instance=f,Ae(f),f):(l=a,(f=qn.get(d))&&(l=E({},a),Cm(l,f)),n=n.ownerDocument||n,f=n.createElement("script"),Ae(f),Qe(f,"link",l),n.head.appendChild(f),r.instance=f);case"void":return null;default:throw Error(s(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(l=r.instance,r.state.loading|=4,Xc(l,a.precedence,n));return r.instance}function Xc(n,r,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=l.length?l[l.length-1]:null,d=f,b=0;b<l.length;b++){var w=l[b];if(w.dataset.precedence===r)d=w;else if(d!==f)break}d?d.parentNode.insertBefore(n,d.nextSibling):(r=a.nodeType===9?a.head:a,r.insertBefore(n,r.firstChild))}function Nm(n,r){n.crossOrigin==null&&(n.crossOrigin=r.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=r.referrerPolicy),n.title==null&&(n.title=r.title)}function Cm(n,r){n.crossOrigin==null&&(n.crossOrigin=r.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=r.referrerPolicy),n.integrity==null&&(n.integrity=r.integrity)}var Zc=null;function J_(n,r,a){if(Zc===null){var l=new Map,f=Zc=new Map;f.set(a,l)}else f=Zc,l=f.get(a),l||(l=new Map,f.set(a,l));if(l.has(n))return l;for(l.set(n,null),a=a.getElementsByTagName(n),f=0;f<a.length;f++){var d=a[f];if(!(d[pi]||d[Se]||n==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var b=d.getAttribute(r)||"";b=n+b;var w=l.get(b);w?w.push(d):l.set(b,[d])}}return l}function W_(n,r,a){n=n.ownerDocument||n,n.head.insertBefore(a,r==="title"?n.querySelector("head > title"):null)}function iS(n,r,a){if(a===1||r.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return n=r.disabled,typeof r.precedence=="string"&&n==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function tv(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function rS(n,r,a,l){if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var f=eo(l.href),d=r.querySelector(Il(f));if(d){r=d._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(n.count++,n=Jc.bind(n),r.then(n,n)),a.state.loading|=4,a.instance=d,Ae(d);return}d=r.ownerDocument||r,l=X_(l),(f=qn.get(f))&&Nm(l,f),d=d.createElement("link"),Ae(d);var b=d;b._p=new Promise(function(w,k){b.onload=w,b.onerror=k}),Qe(d,"link",l),a.instance=d}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(a,r),(r=a.state.preload)&&(a.state.loading&3)===0&&(n.count++,a=Jc.bind(n),r.addEventListener("load",a),r.addEventListener("error",a))}}var Rm=0;function sS(n,r){return n.stylesheets&&n.count===0&&th(n,n.stylesheets),0<n.count||0<n.imgCount?function(a){var l=setTimeout(function(){if(n.stylesheets&&th(n,n.stylesheets),n.unsuspend){var d=n.unsuspend;n.unsuspend=null,d()}},6e4+r);0<n.imgBytes&&Rm===0&&(Rm=62500*Uw());var f=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&th(n,n.stylesheets),n.unsuspend)){var d=n.unsuspend;n.unsuspend=null,d()}},(n.imgBytes>Rm?50:800)+r);return n.unsuspend=a,function(){n.unsuspend=null,clearTimeout(l),clearTimeout(f)}}:null}function Jc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)th(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var Wc=null;function th(n,r){n.stylesheets=null,n.unsuspend!==null&&(n.count++,Wc=new Map,r.forEach(aS,n),Wc=null,Jc.call(n))}function aS(n,r){if(!(r.state.loading&4)){var a=Wc.get(n);if(a)var l=a.get(null);else{a=new Map,Wc.set(n,a);for(var f=n.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<f.length;d++){var b=f[d];(b.nodeName==="LINK"||b.getAttribute("media")!=="not all")&&(a.set(b.dataset.precedence,b),l=b)}l&&a.set(null,l)}f=r.instance,b=f.getAttribute("data-precedence"),d=a.get(b)||l,d===l&&a.set(null,f),a.set(b,f),this.count++,l=Jc.bind(this),f.addEventListener("load",l),f.addEventListener("error",l),d?d.parentNode.insertBefore(f,d.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(f,n.firstChild)),r.state.loading|=4}}var Ol={$$typeof:tt,Provider:null,Consumer:null,_currentValue:J,_currentValue2:J,_threadCount:0};function oS(n,r,a,l,f,d,b,w,k){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=di(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=di(0),this.hiddenUpdates=di(null),this.identifierPrefix=l,this.onUncaughtError=f,this.onCaughtError=d,this.onRecoverableError=b,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=k,this.incompleteTransitions=new Map}function ev(n,r,a,l,f,d,b,w,k,G,et,at){return n=new oS(n,r,a,b,k,G,et,at,w),r=1,d===!0&&(r|=24),d=xn(3,null,null,r),n.current=d,d.stateNode=n,r=ld(),r.refCount++,n.pooledCache=r,r.refCount++,d.memoizedState={element:l,isDehydrated:a,cache:r},fd(d),n}function nv(n){return n?(n=Ma,n):Ma}function iv(n,r,a,l,f,d){f=nv(f),l.context===null?l.context=f:l.pendingContext=f,l=Ur(r),l.payload={element:a},d=d===void 0?null:d,d!==null&&(l.callback=d),a=zr(n,l,r),a!==null&&(pn(a,n,r),cl(a,n,r))}function rv(n,r){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<r?a:r}}function Im(n,r){rv(n,r),(n=n.alternate)&&rv(n,r)}function sv(n){if(n.tag===13||n.tag===31){var r=zs(n,67108864);r!==null&&pn(r,n,67108864),Im(n,67108864)}}function av(n){if(n.tag===13||n.tag===31){var r=Nn();r=Cs(r);var a=zs(n,r);a!==null&&pn(a,n,r),Im(n,r)}}var eh=!0;function lS(n,r,a,l){var f=j.T;j.T=null;var d=U.p;try{U.p=2,Dm(n,r,a,l)}finally{U.p=d,j.T=f}}function uS(n,r,a,l){var f=j.T;j.T=null;var d=U.p;try{U.p=8,Dm(n,r,a,l)}finally{U.p=d,j.T=f}}function Dm(n,r,a,l){if(eh){var f=Om(l);if(f===null)ym(n,r,l,nh,a),lv(n,l);else if(hS(f,n,r,a,l))l.stopPropagation();else if(lv(n,l),r&4&&-1<cS.indexOf(n)){for(;f!==null;){var d=On(f);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var b=hi(d.pendingLanes);if(b!==0){var w=d;for(w.pendingLanes|=2,w.entangledLanes|=2;b;){var k=1<<31-ve(b);w.entanglements[1]|=k,b&=~k}Ii(d),(Xt&6)===0&&(Pc=an()+500,Al(0))}}break;case 31:case 13:w=zs(d,2),w!==null&&pn(w,d,2),zc(),Im(d,2)}if(d=Om(l),d===null&&ym(n,r,l,nh,a),d===f)break;f=d}f!==null&&l.stopPropagation()}else ym(n,r,l,null,a)}}function Om(n){return n=Mn(n),Mm(n)}var nh=null;function Mm(n){if(nh=null,n=gi(n),n!==null){var r=u(n);if(r===null)n=null;else{var a=r.tag;if(a===13){if(n=c(r),n!==null)return n;n=null}else if(a===31){if(n=m(r),n!==null)return n;n=null}else if(a===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;n=null}else r!==n&&(n=null)}}return nh=n,null}function ov(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ws()){case Vo:return 2;case jo:return 8;case wr:case Uf:return 32;case ku:return 268435456;default:return 32}default:return 32}}var km=!1,Zr=null,Jr=null,Wr=null,Ml=new Map,kl=new Map,ts=[],cS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function lv(n,r){switch(n){case"focusin":case"focusout":Zr=null;break;case"dragenter":case"dragleave":Jr=null;break;case"mouseover":case"mouseout":Wr=null;break;case"pointerover":case"pointerout":Ml.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":kl.delete(r.pointerId)}}function Vl(n,r,a,l,f,d){return n===null||n.nativeEvent!==d?(n={blockedOn:r,domEventName:a,eventSystemFlags:l,nativeEvent:d,targetContainers:[f]},r!==null&&(r=On(r),r!==null&&sv(r)),n):(n.eventSystemFlags|=l,r=n.targetContainers,f!==null&&r.indexOf(f)===-1&&r.push(f),n)}function hS(n,r,a,l,f){switch(r){case"focusin":return Zr=Vl(Zr,n,r,a,l,f),!0;case"dragenter":return Jr=Vl(Jr,n,r,a,l,f),!0;case"mouseover":return Wr=Vl(Wr,n,r,a,l,f),!0;case"pointerover":var d=f.pointerId;return Ml.set(d,Vl(Ml.get(d)||null,n,r,a,l,f)),!0;case"gotpointercapture":return d=f.pointerId,kl.set(d,Vl(kl.get(d)||null,n,r,a,l,f)),!0}return!1}function uv(n){var r=gi(n.target);if(r!==null){var a=u(r);if(a!==null){if(r=a.tag,r===13){if(r=c(a),r!==null){n.blockedOn=r,Kn(n.priority,function(){av(a)});return}}else if(r===31){if(r=m(a),r!==null){n.blockedOn=r,Kn(n.priority,function(){av(a)});return}}else if(r===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function ih(n){if(n.blockedOn!==null)return!1;for(var r=n.targetContainers;0<r.length;){var a=Om(n.nativeEvent);if(a===null){a=n.nativeEvent;var l=new a.constructor(a.type,a);Qo=l,a.target.dispatchEvent(l),Qo=null}else return r=On(a),r!==null&&sv(r),n.blockedOn=a,!1;r.shift()}return!0}function cv(n,r,a){ih(n)&&a.delete(r)}function fS(){km=!1,Zr!==null&&ih(Zr)&&(Zr=null),Jr!==null&&ih(Jr)&&(Jr=null),Wr!==null&&ih(Wr)&&(Wr=null),Ml.forEach(cv),kl.forEach(cv)}function rh(n,r){n.blockedOn===r&&(n.blockedOn=null,km||(km=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,fS)))}var sh=null;function hv(n){sh!==n&&(sh=n,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){sh===n&&(sh=null);for(var r=0;r<n.length;r+=3){var a=n[r],l=n[r+1],f=n[r+2];if(typeof l!="function"){if(Mm(l||a)===null)continue;break}var d=On(a);d!==null&&(n.splice(r,3),r-=3,Od(d,{pending:!0,data:f,method:a.method,action:l},l,f))}}))}function io(n){function r(k){return rh(k,n)}Zr!==null&&rh(Zr,n),Jr!==null&&rh(Jr,n),Wr!==null&&rh(Wr,n),Ml.forEach(r),kl.forEach(r);for(var a=0;a<ts.length;a++){var l=ts[a];l.blockedOn===n&&(l.blockedOn=null)}for(;0<ts.length&&(a=ts[0],a.blockedOn===null);)uv(a),a.blockedOn===null&&ts.shift();if(a=(n.ownerDocument||n).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var f=a[l],d=a[l+1],b=f[Ue]||null;if(typeof d=="function")b||hv(a);else if(b){var w=null;if(d&&d.hasAttribute("formAction")){if(f=d,b=d[Ue]||null)w=b.formAction;else if(Mm(f)!==null)continue}else w=b.action;typeof w=="function"?a[l+1]=w:(a.splice(l,3),l-=3),hv(a)}}}function fv(){function n(d){d.canIntercept&&d.info==="react-transition"&&d.intercept({handler:function(){return new Promise(function(b){return f=b})},focusReset:"manual",scroll:"manual"})}function r(){f!==null&&(f(),f=null),l||setTimeout(a,20)}function a(){if(!l&&!navigation.transition){var d=navigation.currentEntry;d&&d.url!=null&&navigation.navigate(d.url,{state:d.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,f=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(a,100),function(){l=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),f!==null&&(f(),f=null)}}}function Vm(n){this._internalRoot=n}ah.prototype.render=Vm.prototype.render=function(n){var r=this._internalRoot;if(r===null)throw Error(s(409));var a=r.current,l=Nn();iv(a,l,n,r,null,null)},ah.prototype.unmount=Vm.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var r=n.containerInfo;iv(n.current,2,null,n,null,null),zc(),r[mi]=null}};function ah(n){this._internalRoot=n}ah.prototype.unstable_scheduleHydration=function(n){if(n){var r=zu();n={blockedOn:null,target:n,priority:r};for(var a=0;a<ts.length&&r!==0&&r<ts[a].priority;a++);ts.splice(a,0,n),a===0&&uv(n)}};var dv=t.version;if(dv!=="19.2.1")throw Error(s(527,dv,"19.2.1"));U.findDOMNode=function(n){var r=n._reactInternals;if(r===void 0)throw typeof n.render=="function"?Error(s(188)):(n=Object.keys(n).join(","),Error(s(268,n)));return n=g(r),n=n!==null?v(n):null,n=n===null?null:n.stateNode,n};var dS={bundleType:0,version:"19.2.1",rendererPackageName:"react-dom",currentDispatcherRef:j,reconcilerVersion:"19.2.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var oh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!oh.isDisabled&&oh.supportsFiber)try{Yn=oh.inject(dS),qe=oh}catch{}}return Ll.createRoot=function(n,r){if(!o(n))throw Error(s(299));var a=!1,l="",f=b0,d=E0,b=x0;return r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(l=r.identifierPrefix),r.onUncaughtError!==void 0&&(f=r.onUncaughtError),r.onCaughtError!==void 0&&(d=r.onCaughtError),r.onRecoverableError!==void 0&&(b=r.onRecoverableError)),r=ev(n,1,!1,null,null,a,l,null,f,d,b,fv),n[mi]=r.current,gm(n),new Vm(r)},Ll.hydrateRoot=function(n,r,a){if(!o(n))throw Error(s(299));var l=!1,f="",d=b0,b=E0,w=x0,k=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onUncaughtError!==void 0&&(d=a.onUncaughtError),a.onCaughtError!==void 0&&(b=a.onCaughtError),a.onRecoverableError!==void 0&&(w=a.onRecoverableError),a.formState!==void 0&&(k=a.formState)),r=ev(n,1,!0,r,a??null,l,f,k,d,b,w,fv),r.context=nv(null),a=r.current,l=Nn(),l=Cs(l),f=Ur(l),f.callback=null,zr(a,f,l),a=l,r.current.lanes=a,As(r,a),Ii(r),n[mi]=r.current,gm(n),new ah(r)},Ll.version="19.2.1",Ll}var Tv;function wS(){if(Tv)return Pm.exports;Tv=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(t){console.error(t)}}return i(),Pm.exports=TS(),Pm.exports}var SS=wS();const AS=()=>{};var wv={};const RE=function(i){const t=[];let e=0;for(let s=0;s<i.length;s++){let o=i.charCodeAt(s);o<128?t[e++]=o:o<2048?(t[e++]=o>>6|192,t[e++]=o&63|128):(o&64512)===55296&&s+1<i.length&&(i.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(i.charCodeAt(++s)&1023),t[e++]=o>>18|240,t[e++]=o>>12&63|128,t[e++]=o>>6&63|128,t[e++]=o&63|128):(t[e++]=o>>12|224,t[e++]=o>>6&63|128,t[e++]=o&63|128)}return t},NS=function(i){const t=[];let e=0,s=0;for(;e<i.length;){const o=i[e++];if(o<128)t[s++]=String.fromCharCode(o);else if(o>191&&o<224){const u=i[e++];t[s++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=i[e++],c=i[e++],m=i[e++],p=((o&7)<<18|(u&63)<<12|(c&63)<<6|m&63)-65536;t[s++]=String.fromCharCode(55296+(p>>10)),t[s++]=String.fromCharCode(56320+(p&1023))}else{const u=i[e++],c=i[e++];t[s++]=String.fromCharCode((o&15)<<12|(u&63)<<6|c&63)}}return t.join("")},IE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,t){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const e=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<i.length;o+=3){const u=i[o],c=o+1<i.length,m=c?i[o+1]:0,p=o+2<i.length,g=p?i[o+2]:0,v=u>>2,E=(u&3)<<4|m>>4;let T=(m&15)<<2|g>>6,I=g&63;p||(I=64,c||(T=64)),s.push(e[v],e[E],e[T],e[I])}return s.join("")},encodeString(i,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(i):this.encodeByteArray(RE(i),t)},decodeString(i,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(i):NS(this.decodeStringToByteArray(i,t))},decodeStringToByteArray(i,t){this.init_();const e=t?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<i.length;){const u=e[i.charAt(o++)],m=o<i.length?e[i.charAt(o)]:0;++o;const g=o<i.length?e[i.charAt(o)]:64;++o;const E=o<i.length?e[i.charAt(o)]:64;if(++o,u==null||m==null||g==null||E==null)throw new CS;const T=u<<2|m>>4;if(s.push(T),g!==64){const I=m<<4&240|g>>2;if(s.push(I),E!==64){const P=g<<6&192|E;s.push(P)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class CS extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const RS=function(i){const t=RE(i);return IE.encodeByteArray(t,!0)},Lh=function(i){return RS(i).replace(/\./g,"")},DE=function(i){try{return IE.decodeString(i,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function IS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const DS=()=>IS().__FIREBASE_DEFAULTS__,OS=()=>{if(typeof process>"u"||typeof wv>"u")return;const i=wv.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},MS=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=i&&DE(i[1]);return t&&JSON.parse(t)},hf=()=>{try{return AS()||DS()||OS()||MS()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},OE=i=>hf()?.emulatorHosts?.[i],kS=i=>{const t=OE(i);if(!t)return;const e=t.lastIndexOf(":");if(e<=0||e+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const s=parseInt(t.substring(e+1),10);return t[0]==="["?[t.substring(1,e-1),s]:[t.substring(0,e),s]},ME=()=>hf()?.config,kE=i=>hf()?.[`_${i}`];class VS{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}wrapCallback(t){return(e,s)=>{e?this.reject(e):this.resolve(s),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(e):t(e,s))}}}function Co(i){try{return(i.startsWith("http://")||i.startsWith("https://")?new URL(i).hostname:i).endsWith(".cloudworkstations.dev")}catch{return!1}}async function VE(i){return(await fetch(i,{credentials:"include"})).ok}function jS(i,t){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const e={alg:"none",type:"JWT"},s=t||"demo-project",o=i.iat||0,u=i.sub||i.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...i};return[Lh(JSON.stringify(e)),Lh(JSON.stringify(c)),""].join(".")}const Jl={};function LS(){const i={prod:[],emulator:[]};for(const t of Object.keys(Jl))Jl[t]?i.emulator.push(t):i.prod.push(t);return i}function PS(i){let t=document.getElementById(i),e=!1;return t||(t=document.createElement("div"),t.setAttribute("id",i),e=!0),{created:e,element:t}}let Sv=!1;function jE(i,t){if(typeof window>"u"||typeof document>"u"||!Co(window.location.host)||Jl[i]===t||Jl[i]||Sv)return;Jl[i]=t;function e(T){return`__firebase__banner__${T}`}const s="__firebase__banner",u=LS().prod.length>0;function c(){const T=document.getElementById(s);T&&T.remove()}function m(T){T.style.display="flex",T.style.background="#7faaf0",T.style.position="fixed",T.style.bottom="5px",T.style.left="5px",T.style.padding=".5em",T.style.borderRadius="5px",T.style.alignItems="center"}function p(T,I){T.setAttribute("width","24"),T.setAttribute("id",I),T.setAttribute("height","24"),T.setAttribute("viewBox","0 0 24 24"),T.setAttribute("fill","none"),T.style.marginLeft="-6px"}function g(){const T=document.createElement("span");return T.style.cursor="pointer",T.style.marginLeft="16px",T.style.fontSize="24px",T.innerHTML=" &times;",T.onclick=()=>{Sv=!0,c()},T}function v(T,I){T.setAttribute("id",I),T.innerText="Learn more",T.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",T.setAttribute("target","__blank"),T.style.paddingLeft="5px",T.style.textDecoration="underline"}function E(){const T=PS(s),I=e("text"),P=document.getElementById(I)||document.createElement("span"),B=e("learnmore"),X=document.getElementById(B)||document.createElement("a"),ft=e("preprendIcon"),$=document.getElementById(ft)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(T.created){const tt=T.element;m(tt),v(X,B);const nt=g();p($,ft),tt.append($,P,X,nt),document.body.appendChild(tt)}u?(P.innerText="Preview backend disconnected.",$.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):($.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,P.innerText="Preview backend running in this workspace."),P.setAttribute("id",I)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}function rn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function US(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(rn())}function zS(){const i=hf()?.forceEnvironment;if(i==="node")return!0;if(i==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function BS(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function FS(){const i=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof i=="object"&&i.id!==void 0}function qS(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function HS(){const i=rn();return i.indexOf("MSIE ")>=0||i.indexOf("Trident/")>=0}function GS(){return!zS()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function $S(){try{return typeof indexedDB=="object"}catch{return!1}}function YS(){return new Promise((i,t)=>{try{let e=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),e||self.indexedDB.deleteDatabase(s),i(!0)},o.onupgradeneeded=()=>{e=!1},o.onerror=()=>{t(o.error?.message||"")}}catch(e){t(e)}})}const QS="FirebaseError";class vr extends Error{constructor(t,e,s){super(e),this.code=t,this.customData=s,this.name=QS,Object.setPrototypeOf(this,vr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,bu.prototype.create)}}class bu{constructor(t,e,s){this.service=t,this.serviceName=e,this.errors=s}create(t,...e){const s=e[0]||{},o=`${this.service}/${t}`,u=this.errors[t],c=u?KS(u,s):"Error",m=`${this.serviceName}: ${c} (${o}).`;return new vr(o,m,s)}}function KS(i,t){return i.replace(XS,(e,s)=>{const o=t[s];return o!=null?String(o):`<${s}?>`})}const XS=/\{\$([^}]+)}/g;function ZS(i){for(const t in i)if(Object.prototype.hasOwnProperty.call(i,t))return!1;return!0}function la(i,t){if(i===t)return!0;const e=Object.keys(i),s=Object.keys(t);for(const o of e){if(!s.includes(o))return!1;const u=i[o],c=t[o];if(Av(u)&&Av(c)){if(!la(u,c))return!1}else if(u!==c)return!1}for(const o of s)if(!e.includes(o))return!1;return!0}function Av(i){return i!==null&&typeof i=="object"}function Eu(i){const t=[];for(const[e,s]of Object.entries(i))Array.isArray(s)?s.forEach(o=>{t.push(encodeURIComponent(e)+"="+encodeURIComponent(o))}):t.push(encodeURIComponent(e)+"="+encodeURIComponent(s));return t.length?"&"+t.join("&"):""}function ql(i){const t={};return i.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[o,u]=s.split("=");t[decodeURIComponent(o)]=decodeURIComponent(u)}}),t}function Hl(i){const t=i.indexOf("?");if(!t)return"";const e=i.indexOf("#",t);return i.substring(t,e>0?e:void 0)}function JS(i,t){const e=new WS(i,t);return e.subscribe.bind(e)}class WS{constructor(t,e){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(()=>{t(this)}).catch(s=>{this.error(s)})}next(t){this.forEachObserver(e=>{e.next(t)})}error(t){this.forEachObserver(e=>{e.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,e,s){let o;if(t===void 0&&e===void 0&&s===void 0)throw new Error("Missing Observer.");tA(t,["next","error","complete"])?o=t:o={next:t,error:e,complete:s},o.next===void 0&&(o.next=Fm),o.error===void 0&&(o.error=Fm),o.complete===void 0&&(o.complete=Fm);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let e=0;e<this.observers.length;e++)this.sendOne(e,t)}sendOne(t,e){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{e(this.observers[t])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function tA(i,t){if(typeof i!="object"||i===null)return!1;for(const e of t)if(e in i&&typeof i[e]=="function")return!0;return!1}function Fm(){}function Ze(i){return i&&i._delegate?i._delegate:i}class ua{constructor(t,e,s){this.name=t,this.instanceFactory=e,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}const ea="[DEFAULT]";class eA{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const s=new VS;if(this.instancesDeferred.set(e,s),this.isInitialized(e)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:e});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(e).promise}getImmediate(t){const e=this.normalizeInstanceIdentifier(t?.identifier),s=t?.optional??!1;if(this.isInitialized(e)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:e})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(iA(t))try{this.getOrInitializeService({instanceIdentifier:ea})}catch{}for(const[e,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(e);try{const u=this.getOrInitializeService({instanceIdentifier:o});s.resolve(u)}catch{}}}}clearInstance(t=ea){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...t.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=ea){return this.instances.has(t)}getOptions(t=ea){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:e={}}=t,s=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:e});for(const[u,c]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(u);s===m&&c.resolve(o)}return o}onInit(t,e){const s=this.normalizeInstanceIdentifier(e),o=this.onInitCallbacks.get(s)??new Set;o.add(t),this.onInitCallbacks.set(s,o);const u=this.instances.get(s);return u&&t(u,s),()=>{o.delete(t)}}invokeOnInitCallbacks(t,e){const s=this.onInitCallbacks.get(e);if(s)for(const o of s)try{o(t,e)}catch{}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let s=this.instances.get(t);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:nA(t),options:e}),this.instances.set(t,s),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(s,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,s)}catch{}return s||null}normalizeInstanceIdentifier(t=ea){return this.component?this.component.multipleInstances?t:ea:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function nA(i){return i===ea?void 0:i}function iA(i){return i.instantiationMode==="EAGER"}class rA{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new eA(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}var Ft;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(Ft||(Ft={}));const sA={debug:Ft.DEBUG,verbose:Ft.VERBOSE,info:Ft.INFO,warn:Ft.WARN,error:Ft.ERROR,silent:Ft.SILENT},aA=Ft.INFO,oA={[Ft.DEBUG]:"log",[Ft.VERBOSE]:"log",[Ft.INFO]:"info",[Ft.WARN]:"warn",[Ft.ERROR]:"error"},lA=(i,t,...e)=>{if(t<i.logLevel)return;const s=new Date().toISOString(),o=oA[t];if(o)console[o](`[${s}]  ${i.name}:`,...e);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Jp{constructor(t){this.name=t,this._logLevel=aA,this._logHandler=lA,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Ft))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?sA[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Ft.DEBUG,...t),this._logHandler(this,Ft.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Ft.VERBOSE,...t),this._logHandler(this,Ft.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Ft.INFO,...t),this._logHandler(this,Ft.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Ft.WARN,...t),this._logHandler(this,Ft.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Ft.ERROR,...t),this._logHandler(this,Ft.ERROR,...t)}}const uA=(i,t)=>t.some(e=>i instanceof e);let Nv,Cv;function cA(){return Nv||(Nv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function hA(){return Cv||(Cv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const LE=new WeakMap,hp=new WeakMap,PE=new WeakMap,qm=new WeakMap,Wp=new WeakMap;function fA(i){const t=new Promise((e,s)=>{const o=()=>{i.removeEventListener("success",u),i.removeEventListener("error",c)},u=()=>{e(us(i.result)),o()},c=()=>{s(i.error),o()};i.addEventListener("success",u),i.addEventListener("error",c)});return t.then(e=>{e instanceof IDBCursor&&LE.set(e,i)}).catch(()=>{}),Wp.set(t,i),t}function dA(i){if(hp.has(i))return;const t=new Promise((e,s)=>{const o=()=>{i.removeEventListener("complete",u),i.removeEventListener("error",c),i.removeEventListener("abort",c)},u=()=>{e(),o()},c=()=>{s(i.error||new DOMException("AbortError","AbortError")),o()};i.addEventListener("complete",u),i.addEventListener("error",c),i.addEventListener("abort",c)});hp.set(i,t)}let fp={get(i,t,e){if(i instanceof IDBTransaction){if(t==="done")return hp.get(i);if(t==="objectStoreNames")return i.objectStoreNames||PE.get(i);if(t==="store")return e.objectStoreNames[1]?void 0:e.objectStore(e.objectStoreNames[0])}return us(i[t])},set(i,t,e){return i[t]=e,!0},has(i,t){return i instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in i}};function mA(i){fp=i(fp)}function pA(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...e){const s=i.call(Hm(this),t,...e);return PE.set(s,t.sort?t.sort():[t]),us(s)}:hA().includes(i)?function(...t){return i.apply(Hm(this),t),us(LE.get(this))}:function(...t){return us(i.apply(Hm(this),t))}}function gA(i){return typeof i=="function"?pA(i):(i instanceof IDBTransaction&&dA(i),uA(i,cA())?new Proxy(i,fp):i)}function us(i){if(i instanceof IDBRequest)return fA(i);if(qm.has(i))return qm.get(i);const t=gA(i);return t!==i&&(qm.set(i,t),Wp.set(t,i)),t}const Hm=i=>Wp.get(i);function yA(i,t,{blocked:e,upgrade:s,blocking:o,terminated:u}={}){const c=indexedDB.open(i,t),m=us(c);return s&&c.addEventListener("upgradeneeded",p=>{s(us(c.result),p.oldVersion,p.newVersion,us(c.transaction),p)}),e&&c.addEventListener("blocked",p=>e(p.oldVersion,p.newVersion,p)),m.then(p=>{u&&p.addEventListener("close",()=>u()),o&&p.addEventListener("versionchange",g=>o(g.oldVersion,g.newVersion,g))}).catch(()=>{}),m}const _A=["get","getKey","getAll","getAllKeys","count"],vA=["put","add","delete","clear"],Gm=new Map;function Rv(i,t){if(!(i instanceof IDBDatabase&&!(t in i)&&typeof t=="string"))return;if(Gm.get(t))return Gm.get(t);const e=t.replace(/FromIndex$/,""),s=t!==e,o=vA.includes(e);if(!(e in(s?IDBIndex:IDBObjectStore).prototype)||!(o||_A.includes(e)))return;const u=async function(c,...m){const p=this.transaction(c,o?"readwrite":"readonly");let g=p.store;return s&&(g=g.index(m.shift())),(await Promise.all([g[e](...m),o&&p.done]))[0]};return Gm.set(t,u),u}mA(i=>({...i,get:(t,e,s)=>Rv(t,e)||i.get(t,e,s),has:(t,e)=>!!Rv(t,e)||i.has(t,e)}));class bA{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(EA(e)){const s=e.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(e=>e).join(" ")}}function EA(i){return i.getComponent()?.type==="VERSION"}const dp="@firebase/app",Iv="0.14.6";const mr=new Jp("@firebase/app"),xA="@firebase/app-compat",TA="@firebase/analytics-compat",wA="@firebase/analytics",SA="@firebase/app-check-compat",AA="@firebase/app-check",NA="@firebase/auth",CA="@firebase/auth-compat",RA="@firebase/database",IA="@firebase/data-connect",DA="@firebase/database-compat",OA="@firebase/functions",MA="@firebase/functions-compat",kA="@firebase/installations",VA="@firebase/installations-compat",jA="@firebase/messaging",LA="@firebase/messaging-compat",PA="@firebase/performance",UA="@firebase/performance-compat",zA="@firebase/remote-config",BA="@firebase/remote-config-compat",FA="@firebase/storage",qA="@firebase/storage-compat",HA="@firebase/firestore",GA="@firebase/ai",$A="@firebase/firestore-compat",YA="firebase",QA="12.6.0";const mp="[DEFAULT]",KA={[dp]:"fire-core",[xA]:"fire-core-compat",[wA]:"fire-analytics",[TA]:"fire-analytics-compat",[AA]:"fire-app-check",[SA]:"fire-app-check-compat",[NA]:"fire-auth",[CA]:"fire-auth-compat",[RA]:"fire-rtdb",[IA]:"fire-data-connect",[DA]:"fire-rtdb-compat",[OA]:"fire-fn",[MA]:"fire-fn-compat",[kA]:"fire-iid",[VA]:"fire-iid-compat",[jA]:"fire-fcm",[LA]:"fire-fcm-compat",[PA]:"fire-perf",[UA]:"fire-perf-compat",[zA]:"fire-rc",[BA]:"fire-rc-compat",[FA]:"fire-gcs",[qA]:"fire-gcs-compat",[HA]:"fire-fst",[$A]:"fire-fst-compat",[GA]:"fire-vertex","fire-js":"fire-js",[YA]:"fire-js-all"};const Ph=new Map,XA=new Map,pp=new Map;function Dv(i,t){try{i.container.addComponent(t)}catch(e){mr.debug(`Component ${t.name} failed to register with FirebaseApp ${i.name}`,e)}}function _o(i){const t=i.name;if(pp.has(t))return mr.debug(`There were multiple attempts to register component ${t}.`),!1;pp.set(t,i);for(const e of Ph.values())Dv(e,i);for(const e of XA.values())Dv(e,i);return!0}function tg(i,t){const e=i.container.getProvider("heartbeat").getImmediate({optional:!0});return e&&e.triggerHeartbeat(),i.container.getProvider(t)}function Hn(i){return i==null?!1:i.settings!==void 0}const ZA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},cs=new bu("app","Firebase",ZA);class JA{constructor(t,e,s){this._isDeleted=!1,this._options={...t},this._config={...e},this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new ua("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw cs.create("app-deleted",{appName:this._name})}}const Ro=QA;function UE(i,t={}){let e=i;typeof t!="object"&&(t={name:t});const s={name:mp,automaticDataCollectionEnabled:!0,...t},o=s.name;if(typeof o!="string"||!o)throw cs.create("bad-app-name",{appName:String(o)});if(e||(e=ME()),!e)throw cs.create("no-options");const u=Ph.get(o);if(u){if(la(e,u.options)&&la(s,u.config))return u;throw cs.create("duplicate-app",{appName:o})}const c=new rA(o);for(const p of pp.values())c.addComponent(p);const m=new JA(e,s,c);return Ph.set(o,m),m}function zE(i=mp){const t=Ph.get(i);if(!t&&i===mp&&ME())return UE();if(!t)throw cs.create("no-app",{appName:i});return t}function hs(i,t,e){let s=KA[i]??i;e&&(s+=`-${e}`);const o=s.match(/\s|\//),u=t.match(/\s|\//);if(o||u){const c=[`Unable to register library "${s}" with version "${t}":`];o&&c.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&u&&c.push("and"),u&&c.push(`version name "${t}" contains illegal characters (whitespace or "/")`),mr.warn(c.join(" "));return}_o(new ua(`${s}-version`,()=>({library:s,version:t}),"VERSION"))}const WA="firebase-heartbeat-database",tN=1,su="firebase-heartbeat-store";let $m=null;function BE(){return $m||($m=yA(WA,tN,{upgrade:(i,t)=>{switch(t){case 0:try{i.createObjectStore(su)}catch(e){console.warn(e)}}}}).catch(i=>{throw cs.create("idb-open",{originalErrorMessage:i.message})})),$m}async function eN(i){try{const e=(await BE()).transaction(su),s=await e.objectStore(su).get(FE(i));return await e.done,s}catch(t){if(t instanceof vr)mr.warn(t.message);else{const e=cs.create("idb-get",{originalErrorMessage:t?.message});mr.warn(e.message)}}}async function Ov(i,t){try{const s=(await BE()).transaction(su,"readwrite");await s.objectStore(su).put(t,FE(i)),await s.done}catch(e){if(e instanceof vr)mr.warn(e.message);else{const s=cs.create("idb-set",{originalErrorMessage:e?.message});mr.warn(s.message)}}}function FE(i){return`${i.name}!${i.options.appId}`}const nN=1024,iN=30;class rN{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new aN(e),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const e=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Mv();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:e}),this._heartbeatsCache.heartbeats.length>iN){const o=oN(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(t){mr.warn(t)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Mv(),{heartbeatsToSend:e,unsentEntries:s}=sN(this._heartbeatsCache.heartbeats),o=Lh(JSON.stringify({version:2,heartbeats:e}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return mr.warn(t),""}}}function Mv(){return new Date().toISOString().substring(0,10)}function sN(i,t=nN){const e=[];let s=i.slice();for(const o of i){const u=e.find(c=>c.agent===o.agent);if(u){if(u.dates.push(o.date),kv(e)>t){u.dates.pop();break}}else if(e.push({agent:o.agent,dates:[o.date]}),kv(e)>t){e.pop();break}s=s.slice(1)}return{heartbeatsToSend:e,unsentEntries:s}}class aN{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return $S()?YS().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const e=await eN(this.app);return e?.heartbeats?e:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const s=await this.read();return Ov(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const s=await this.read();return Ov(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...t.heartbeats]})}else return}}function kv(i){return Lh(JSON.stringify({version:2,heartbeats:i})).length}function oN(i){if(i.length===0)return-1;let t=0,e=i[0].date;for(let s=1;s<i.length;s++)i[s].date<e&&(e=i[s].date,t=s);return t}function lN(i){_o(new ua("platform-logger",t=>new bA(t),"PRIVATE")),_o(new ua("heartbeat",t=>new rN(t),"PRIVATE")),hs(dp,Iv,i),hs(dp,Iv,"esm2020"),hs("fire-js","")}lN("");var uN="firebase",cN="12.7.0";hs(uN,cN,"app");function qE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const hN=qE,HE=new bu("auth","Firebase",qE());const Uh=new Jp("@firebase/auth");function fN(i,...t){Uh.logLevel<=Ft.WARN&&Uh.warn(`Auth (${Ro}): ${i}`,...t)}function Eh(i,...t){Uh.logLevel<=Ft.ERROR&&Uh.error(`Auth (${Ro}): ${i}`,...t)}function oi(i,...t){throw eg(i,...t)}function Oi(i,...t){return eg(i,...t)}function GE(i,t,e){const s={...hN(),[t]:e};return new bu("auth","Firebase",s).create(t,{appName:i.name})}function dr(i){return GE(i,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function eg(i,...t){if(typeof i!="string"){const e=t[0],s=[...t.slice(1)];return s[0]&&(s[0].appName=i.name),i._errorFactory.create(e,...s)}return HE.create(i,...t)}function Ct(i,t,...e){if(!i)throw eg(t,...e)}function hr(i){const t="INTERNAL ASSERTION FAILED: "+i;throw Eh(t),new Error(t)}function pr(i,t){i||hr(t)}function gp(){return typeof self<"u"&&self.location?.href||""}function dN(){return Vv()==="http:"||Vv()==="https:"}function Vv(){return typeof self<"u"&&self.location?.protocol||null}function mN(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(dN()||FS()||"connection"in navigator)?navigator.onLine:!0}function pN(){if(typeof navigator>"u")return null;const i=navigator;return i.languages&&i.languages[0]||i.language||null}class xu{constructor(t,e){this.shortDelay=t,this.longDelay=e,pr(e>t,"Short delay should be less than long delay!"),this.isMobile=US()||qS()}get(){return mN()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function ng(i,t){pr(i.emulator,"Emulator should always be set here");const{url:e}=i.emulator;return t?`${e}${t.startsWith("/")?t.slice(1):t}`:e}class $E{static initialize(t,e,s){this.fetchImpl=t,e&&(this.headersImpl=e),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;hr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;hr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;hr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const gN={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const yN=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],_N=new xu(3e4,6e4);function br(i,t){return i.tenantId&&!t.tenantId?{...t,tenantId:i.tenantId}:t}async function Er(i,t,e,s,o={}){return YE(i,o,async()=>{let u={},c={};s&&(t==="GET"?c=s:u={body:JSON.stringify(s)});const m=Eu({key:i.config.apiKey,...c}).slice(1),p=await i._getAdditionalHeaders();p["Content-Type"]="application/json",i.languageCode&&(p["X-Firebase-Locale"]=i.languageCode);const g={method:t,headers:p,...u};return BS()||(g.referrerPolicy="no-referrer"),i.emulatorConfig&&Co(i.emulatorConfig.host)&&(g.credentials="include"),$E.fetch()(await QE(i,i.config.apiHost,e,m),g)})}async function YE(i,t,e){i._canInitEmulator=!1;const s={...gN,...t};try{const o=new bN(i),u=await Promise.race([e(),o.promise]);o.clearNetworkTimeout();const c=await u.json();if("needConfirmation"in c)throw lh(i,"account-exists-with-different-credential",c);if(u.ok&&!("errorMessage"in c))return c;{const m=u.ok?c.errorMessage:c.error.message,[p,g]=m.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw lh(i,"credential-already-in-use",c);if(p==="EMAIL_EXISTS")throw lh(i,"email-already-in-use",c);if(p==="USER_DISABLED")throw lh(i,"user-disabled",c);const v=s[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw GE(i,v,g);oi(i,v)}}catch(o){if(o instanceof vr)throw o;oi(i,"network-request-failed",{message:String(o)})}}async function Tu(i,t,e,s,o={}){const u=await Er(i,t,e,s,o);return"mfaPendingCredential"in u&&oi(i,"multi-factor-auth-required",{_serverResponse:u}),u}async function QE(i,t,e,s){const o=`${t}${e}?${s}`,u=i,c=u.config.emulator?ng(i.config,o):`${i.config.apiScheme}://${o}`;return yN.includes(e)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(c).toString():c}function vN(i){switch(i){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class bN{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((e,s)=>{this.timer=setTimeout(()=>s(Oi(this.auth,"network-request-failed")),_N.get())})}}function lh(i,t,e){const s={appName:i.name};e.email&&(s.email=e.email),e.phoneNumber&&(s.phoneNumber=e.phoneNumber);const o=Oi(i,t,s);return o.customData._tokenResponse=e,o}function jv(i){return i!==void 0&&i.enterprise!==void 0}class EN{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const e of this.recaptchaEnforcementState)if(e.provider&&e.provider===t)return vN(e.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function xN(i,t){return Er(i,"GET","/v2/recaptchaConfig",br(i,t))}async function TN(i,t){return Er(i,"POST","/v1/accounts:delete",t)}async function zh(i,t){return Er(i,"POST","/v1/accounts:lookup",t)}function Wl(i){if(i)try{const t=new Date(Number(i));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function wN(i,t=!1){const e=Ze(i),s=await e.getIdToken(t),o=ig(s);Ct(o&&o.exp&&o.auth_time&&o.iat,e.auth,"internal-error");const u=typeof o.firebase=="object"?o.firebase:void 0,c=u?.sign_in_provider;return{claims:o,token:s,authTime:Wl(Ym(o.auth_time)),issuedAtTime:Wl(Ym(o.iat)),expirationTime:Wl(Ym(o.exp)),signInProvider:c||null,signInSecondFactor:u?.sign_in_second_factor||null}}function Ym(i){return Number(i)*1e3}function ig(i){const[t,e,s]=i.split(".");if(t===void 0||e===void 0||s===void 0)return Eh("JWT malformed, contained fewer than 3 sections"),null;try{const o=DE(e);return o?JSON.parse(o):(Eh("Failed to decode base64 JWT payload"),null)}catch(o){return Eh("Caught error parsing JWT payload as JSON",o?.toString()),null}}function Lv(i){const t=ig(i);return Ct(t,"internal-error"),Ct(typeof t.exp<"u","internal-error"),Ct(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}async function au(i,t,e=!1){if(e)return t;try{return await t}catch(s){throw s instanceof vr&&SN(s)&&i.auth.currentUser===i&&await i.auth.signOut(),s}}function SN({code:i}){return i==="auth/user-disabled"||i==="auth/user-token-expired"}class AN{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){const e=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),e}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(t=!1){if(!this.isRunning)return;const e=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},e)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){t?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class yp{constructor(t,e){this.createdAt=t,this.lastLoginAt=e,this._initializeTime()}_initializeTime(){this.lastSignInTime=Wl(this.lastLoginAt),this.creationTime=Wl(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Bh(i){const t=i.auth,e=await i.getIdToken(),s=await au(i,zh(t,{idToken:e}));Ct(s?.users.length,t,"internal-error");const o=s.users[0];i._notifyReloadListener(o);const u=o.providerUserInfo?.length?KE(o.providerUserInfo):[],c=CN(i.providerData,u),m=i.isAnonymous,p=!(i.email&&o.passwordHash)&&!c?.length,g=m?p:!1,v={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new yp(o.createdAt,o.lastLoginAt),isAnonymous:g};Object.assign(i,v)}async function NN(i){const t=Ze(i);await Bh(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function CN(i,t){return[...i.filter(s=>!t.some(o=>o.providerId===s.providerId)),...t]}function KE(i){return i.map(({providerId:t,...e})=>({providerId:t,uid:e.rawId||"",displayName:e.displayName||null,email:e.email||null,phoneNumber:e.phoneNumber||null,photoURL:e.photoUrl||null}))}async function RN(i,t){const e=await YE(i,{},async()=>{const s=Eu({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:o,apiKey:u}=i.config,c=await QE(i,o,"/v1/token",`key=${u}`),m=await i._getAdditionalHeaders();m["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:m,body:s};return i.emulatorConfig&&Co(i.emulatorConfig.host)&&(p.credentials="include"),$E.fetch()(c,p)});return{accessToken:e.access_token,expiresIn:e.expires_in,refreshToken:e.refresh_token}}async function IN(i,t){return Er(i,"POST","/v2/accounts:revokeToken",br(i,t))}class co{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){Ct(t.idToken,"internal-error"),Ct(typeof t.idToken<"u","internal-error"),Ct(typeof t.refreshToken<"u","internal-error");const e="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):Lv(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,e)}updateFromIdToken(t){Ct(t.length!==0,"internal-error");const e=Lv(t);this.updateTokensAndExpiration(t,null,e)}async getToken(t,e=!1){return!e&&this.accessToken&&!this.isExpired?this.accessToken:(Ct(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,e){const{accessToken:s,refreshToken:o,expiresIn:u}=await RN(t,e);this.updateTokensAndExpiration(s,o,Number(u))}updateTokensAndExpiration(t,e,s){this.refreshToken=e||null,this.accessToken=t||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(t,e){const{refreshToken:s,accessToken:o,expirationTime:u}=e,c=new co;return s&&(Ct(typeof s=="string","internal-error",{appName:t}),c.refreshToken=s),o&&(Ct(typeof o=="string","internal-error",{appName:t}),c.accessToken=o),u&&(Ct(typeof u=="number","internal-error",{appName:t}),c.expirationTime=u),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new co,this.toJSON())}_performRefresh(){return hr("not implemented")}}function ns(i,t){Ct(typeof i=="string"||typeof i>"u","internal-error",{appName:t})}class ai{constructor({uid:t,auth:e,stsTokenManager:s,...o}){this.providerId="firebase",this.proactiveRefresh=new AN(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=e,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new yp(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(t){const e=await au(this,this.stsTokenManager.getToken(this.auth,t));return Ct(e,this.auth,"internal-error"),this.accessToken!==e&&(this.accessToken=e,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),e}getIdTokenResult(t){return wN(this,t)}reload(){return NN(this)}_assign(t){this!==t&&(Ct(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(e=>({...e})),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const e=new ai({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return e.metadata._copy(this.metadata),e}_onReload(t){Ct(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,e=!1){let s=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),s=!0),e&&await Bh(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Hn(this.auth.app))return Promise.reject(dr(this.auth));const t=await this.getIdToken();return await au(this,TN(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>({...t})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,e){const s=e.displayName??void 0,o=e.email??void 0,u=e.phoneNumber??void 0,c=e.photoURL??void 0,m=e.tenantId??void 0,p=e._redirectEventId??void 0,g=e.createdAt??void 0,v=e.lastLoginAt??void 0,{uid:E,emailVerified:T,isAnonymous:I,providerData:P,stsTokenManager:B}=e;Ct(E&&B,t,"internal-error");const X=co.fromJSON(this.name,B);Ct(typeof E=="string",t,"internal-error"),ns(s,t.name),ns(o,t.name),Ct(typeof T=="boolean",t,"internal-error"),Ct(typeof I=="boolean",t,"internal-error"),ns(u,t.name),ns(c,t.name),ns(m,t.name),ns(p,t.name),ns(g,t.name),ns(v,t.name);const ft=new ai({uid:E,auth:t,email:o,emailVerified:T,displayName:s,isAnonymous:I,photoURL:c,phoneNumber:u,tenantId:m,stsTokenManager:X,createdAt:g,lastLoginAt:v});return P&&Array.isArray(P)&&(ft.providerData=P.map($=>({...$}))),p&&(ft._redirectEventId=p),ft}static async _fromIdTokenResponse(t,e,s=!1){const o=new co;o.updateFromServerResponse(e);const u=new ai({uid:e.localId,auth:t,stsTokenManager:o,isAnonymous:s});return await Bh(u),u}static async _fromGetAccountInfoResponse(t,e,s){const o=e.users[0];Ct(o.localId!==void 0,"internal-error");const u=o.providerUserInfo!==void 0?KE(o.providerUserInfo):[],c=!(o.email&&o.passwordHash)&&!u?.length,m=new co;m.updateFromIdToken(s);const p=new ai({uid:o.localId,auth:t,stsTokenManager:m,isAnonymous:c}),g={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new yp(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!u?.length};return Object.assign(p,g),p}}const Pv=new Map;function fr(i){pr(i instanceof Function,"Expected a class definition");let t=Pv.get(i);return t?(pr(t instanceof i,"Instance stored in cache mismatched with class"),t):(t=new i,Pv.set(i,t),t)}class XE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,e){this.storage[t]=e}async _get(t){const e=this.storage[t];return e===void 0?null:e}async _remove(t){delete this.storage[t]}_addListener(t,e){}_removeListener(t,e){}}XE.type="NONE";const Uv=XE;function xh(i,t,e){return`firebase:${i}:${t}:${e}`}class ho{constructor(t,e,s){this.persistence=t,this.auth=e,this.userKey=s;const{config:o,name:u}=this.auth;this.fullUserKey=xh(this.userKey,o.apiKey,u),this.fullPersistenceKey=xh("persistence",o.apiKey,u),this.boundEventHandler=e._onStorageEvent.bind(e),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const e=await zh(this.auth,{idToken:t}).catch(()=>{});return e?ai._fromGetAccountInfoResponse(this.auth,e,t):null}return ai._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const e=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,e)return this.setCurrentUser(e)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,e,s="authUser"){if(!e.length)return new ho(fr(Uv),t,s);const o=(await Promise.all(e.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let u=o[0]||fr(Uv);const c=xh(s,t.config.apiKey,t.name);let m=null;for(const g of e)try{const v=await g._get(c);if(v){let E;if(typeof v=="string"){const T=await zh(t,{idToken:v}).catch(()=>{});if(!T)break;E=await ai._fromGetAccountInfoResponse(t,T,v)}else E=ai._fromJSON(t,v);g!==u&&(m=E),u=g;break}}catch{}const p=o.filter(g=>g._shouldAllowMigration);return!u._shouldAllowMigration||!p.length?new ho(u,t,s):(u=p[0],m&&await u._set(c,m.toJSON()),await Promise.all(e.map(async g=>{if(g!==u)try{await g._remove(c)}catch{}})),new ho(u,t,s))}}function zv(i){const t=i.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(tx(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(ZE(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(nx(t))return"Blackberry";if(ix(t))return"Webos";if(JE(t))return"Safari";if((t.includes("chrome/")||WE(t))&&!t.includes("edge/"))return"Chrome";if(ex(t))return"Android";{const e=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=i.match(e);if(s?.length===2)return s[1]}return"Other"}function ZE(i=rn()){return/firefox\//i.test(i)}function JE(i=rn()){const t=i.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function WE(i=rn()){return/crios\//i.test(i)}function tx(i=rn()){return/iemobile/i.test(i)}function ex(i=rn()){return/android/i.test(i)}function nx(i=rn()){return/blackberry/i.test(i)}function ix(i=rn()){return/webos/i.test(i)}function rg(i=rn()){return/iphone|ipad|ipod/i.test(i)||/macintosh/i.test(i)&&/mobile/i.test(i)}function DN(i=rn()){return rg(i)&&!!window.navigator?.standalone}function ON(){return HS()&&document.documentMode===10}function rx(i=rn()){return rg(i)||ex(i)||ix(i)||nx(i)||/windows phone/i.test(i)||tx(i)}function sx(i,t=[]){let e;switch(i){case"Browser":e=zv(rn());break;case"Worker":e=`${zv(rn())}-${i}`;break;default:e=i}const s=t.length?t.join(","):"FirebaseCore-web";return`${e}/JsCore/${Ro}/${s}`}class MN{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,e){const s=u=>new Promise((c,m)=>{try{const p=t(u);c(p)}catch(p){m(p)}});s.onAbort=e,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const e=[];try{for(const s of this.queue)await s(t),s.onAbort&&e.push(s.onAbort)}catch(s){e.reverse();for(const o of e)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}async function kN(i,t={}){return Er(i,"GET","/v2/passwordPolicy",br(i,t))}const VN=6;class jN{constructor(t){const e=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=e.minPasswordLength??VN,e.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=e.maxPasswordLength),e.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=e.containsLowercaseCharacter),e.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=e.containsUppercaseCharacter),e.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=e.containsNumericCharacter),e.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=e.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=t.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){const e={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,e),this.validatePasswordCharacterOptions(t,e),e.isValid&&(e.isValid=e.meetsMinPasswordLength??!0),e.isValid&&(e.isValid=e.meetsMaxPasswordLength??!0),e.isValid&&(e.isValid=e.containsLowercaseLetter??!0),e.isValid&&(e.isValid=e.containsUppercaseLetter??!0),e.isValid&&(e.isValid=e.containsNumericCharacter??!0),e.isValid&&(e.isValid=e.containsNonAlphanumericCharacter??!0),e}validatePasswordLengthOptions(t,e){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(e.meetsMinPasswordLength=t.length>=s),o&&(e.meetsMaxPasswordLength=t.length<=o)}validatePasswordCharacterOptions(t,e){this.updatePasswordCharacterOptionsStatuses(e,!1,!1,!1,!1);let s;for(let o=0;o<t.length;o++)s=t.charAt(o),this.updatePasswordCharacterOptionsStatuses(e,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(t,e,s,o,u){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=e)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=u))}}class LN{constructor(t,e,s,o){this.app=t,this.heartbeatServiceProvider=e,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Bv(this),this.idTokenSubscription=new Bv(this),this.beforeStateQueue=new MN(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=HE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(t,e){return e&&(this._popupRedirectResolver=fr(e)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await ho.create(this,t),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(e),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const e=await zh(this,{idToken:t}),s=await ai._fromGetAccountInfoResponse(this,e,t);await this.directlySetCurrentUser(s)}catch(e){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",e),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){if(Hn(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(c,c))}):this.directlySetCurrentUser(null)}const e=await this.assertedPersistence.getCurrentUser();let s=e,o=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=this.redirectUser?._redirectEventId,c=s?._redirectEventId,m=await this.tryRedirectSignIn(t);(!u||u===c)&&m?.user&&(s=m.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(u){s=e,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Ct(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(t){let e=null;try{e=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return e}async reloadAndSetCurrentUserOrClear(t){try{await Bh(t)}catch(e){if(e?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=pN()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(Hn(this.app))return Promise.reject(dr(this));const e=t?Ze(t):null;return e&&Ct(e.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(e&&e._clone(this))}async _updateCurrentUser(t,e=!1){if(!this._deleted)return t&&Ct(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),e||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return Hn(this.app)?Promise.reject(dr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return Hn(this.app)?Promise.reject(dr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(fr(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const e=this._getPasswordPolicyInternal();return e.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):e.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await kN(this),e=new jN(t);this.tenantId===null?this._projectPasswordPolicy=e:this._tenantPasswordPolicies[this.tenantId]=e}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new bu("auth","Firebase",t())}onAuthStateChanged(t,e,s){return this.registerStateListener(this.authStateSubscription,t,e,s)}beforeAuthStateChanged(t,e){return this.beforeStateQueue.pushCallback(t,e)}onIdTokenChanged(t,e,s){return this.registerStateListener(this.idTokenSubscription,t,e,s)}authStateReady(){return new Promise((t,e)=>{if(this.currentUser)t();else{const s=this.onAuthStateChanged(()=>{s(),t()},e)}})}async revokeAccessToken(t){if(this.currentUser){const e=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:e};this.tenantId!=null&&(s.tenantId=this.tenantId),await IN(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(t,e){const s=await this.getOrInitRedirectPersistenceManager(e);return t===null?s.removeCurrentUser():s.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const e=t&&fr(t)||this._popupRedirectResolver;Ct(e,this,"argument-error"),this.redirectPersistenceManager=await ho.create(this,[fr(e._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===t?this._currentUser:this.redirectUser?._redirectEventId===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=this.currentUser?.uid??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,e,s,o){if(this._deleted)return()=>{};const u=typeof e=="function"?e:e.next.bind(e);let c=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ct(m,this,"internal-error"),m.then(()=>{c||u(this.currentUser)}),typeof e=="function"){const p=t.addObserver(e,s,o);return()=>{c=!0,p()}}else{const p=t.addObserver(e);return()=>{c=!0,p()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return Ct(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=sx(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const e=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();e&&(t["X-Firebase-Client"]=e);const s=await this._getAppCheckToken();return s&&(t["X-Firebase-AppCheck"]=s),t}async _getAppCheckToken(){if(Hn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return t?.error&&fN(`Error while retrieving App Check token: ${t.error}`),t?.token}}function bs(i){return Ze(i)}class Bv{constructor(t){this.auth=t,this.observer=null,this.addObserver=JS(e=>this.observer=e)}get next(){return Ct(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let ff={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function PN(i){ff=i}function ax(i){return ff.loadJS(i)}function UN(){return ff.recaptchaEnterpriseScript}function zN(){return ff.gapiScript}function BN(i){return`__${i}${Math.floor(Math.random()*1e6)}`}class FN{constructor(){this.enterprise=new qN}ready(t){t()}execute(t,e){return Promise.resolve("token")}render(t,e){return""}}class qN{ready(t){t()}execute(t,e){return Promise.resolve("token")}render(t,e){return""}}const HN="recaptcha-enterprise",ox="NO_RECAPTCHA";class GN{constructor(t){this.type=HN,this.auth=bs(t)}async verify(t="verify",e=!1){async function s(u){if(!e){if(u.tenantId==null&&u._agentRecaptchaConfig!=null)return u._agentRecaptchaConfig.siteKey;if(u.tenantId!=null&&u._tenantRecaptchaConfigs[u.tenantId]!==void 0)return u._tenantRecaptchaConfigs[u.tenantId].siteKey}return new Promise(async(c,m)=>{xN(u,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)m(new Error("recaptcha Enterprise site key undefined"));else{const g=new EN(p);return u.tenantId==null?u._agentRecaptchaConfig=g:u._tenantRecaptchaConfigs[u.tenantId]=g,c(g.siteKey)}}).catch(p=>{m(p)})})}function o(u,c,m){const p=window.grecaptcha;jv(p)?p.enterprise.ready(()=>{p.enterprise.execute(u,{action:t}).then(g=>{c(g)}).catch(()=>{c(ox)})}):m(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new FN().execute("siteKey",{action:"verify"}):new Promise((u,c)=>{s(this.auth).then(m=>{if(!e&&jv(window.grecaptcha))o(m,u,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let p=UN();p.length!==0&&(p+=m),ax(p).then(()=>{o(m,u,c)}).catch(g=>{c(g)})}}).catch(m=>{c(m)})})}}async function Fv(i,t,e,s=!1,o=!1){const u=new GN(i);let c;if(o)c=ox;else try{c=await u.verify(e)}catch{c=await u.verify(e,!0)}const m={...t};if(e==="mfaSmsEnrollment"||e==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in m){const p=m.phoneEnrollmentInfo.phoneNumber,g=m.phoneEnrollmentInfo.recaptchaToken;Object.assign(m,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:g,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in m){const p=m.phoneSignInInfo.recaptchaToken;Object.assign(m,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return m}return s?Object.assign(m,{captchaResp:c}):Object.assign(m,{captchaResponse:c}),Object.assign(m,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(m,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),m}async function Fh(i,t,e,s,o){if(i._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await Fv(i,t,e,e==="getOobCode");return s(i,u)}else return s(i,t).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${e} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await Fv(i,t,e,e==="getOobCode");return s(i,c)}else return Promise.reject(u)})}function $N(i,t){const e=tg(i,"auth");if(e.isInitialized()){const o=e.getImmediate(),u=e.getOptions();if(la(u,t??{}))return o;oi(o,"already-initialized")}return e.initialize({options:t})}function YN(i,t){const e=t?.persistence||[],s=(Array.isArray(e)?e:[e]).map(fr);t?.errorMap&&i._updateErrorMap(t.errorMap),i._initializeWithPersistence(s,t?.popupRedirectResolver)}function QN(i,t,e){const s=bs(i);Ct(/^https?:\/\//.test(t),s,"invalid-emulator-scheme");const o=!1,u=lx(t),{host:c,port:m}=KN(t),p=m===null?"":`:${m}`,g={url:`${u}//${c}${p}/`},v=Object.freeze({host:c,port:m,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!s._canInitEmulator){Ct(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Ct(la(g,s.config.emulator)&&la(v,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=g,s.emulatorConfig=v,s.settings.appVerificationDisabledForTesting=!0,Co(c)?(VE(`${u}//${c}${p}`),jE("Auth",!0)):XN()}function lx(i){const t=i.indexOf(":");return t<0?"":i.substr(0,t+1)}function KN(i){const t=lx(i),e=/(\/\/)?([^?#/]+)/.exec(i.substr(t.length));if(!e)return{host:"",port:null};const s=e[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const u=o[1];return{host:u,port:qv(s.substr(u.length+1))}}else{const[u,c]=s.split(":");return{host:u,port:qv(c)}}}function qv(i){if(!i)return null;const t=Number(i);return isNaN(t)?null:t}function XN(){function i(){const t=document.createElement("p"),e=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",e.position="fixed",e.width="100%",e.backgroundColor="#ffffff",e.border=".1em solid #000000",e.color="#b50000",e.bottom="0px",e.left="0px",e.margin="0px",e.zIndex="10000",e.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",i):i())}class sg{constructor(t,e){this.providerId=t,this.signInMethod=e}toJSON(){return hr("not implemented")}_getIdTokenResponse(t){return hr("not implemented")}_linkToIdToken(t,e){return hr("not implemented")}_getReauthenticationResolver(t){return hr("not implemented")}}async function ZN(i,t){return Er(i,"POST","/v1/accounts:signUp",t)}async function JN(i,t){return Tu(i,"POST","/v1/accounts:signInWithPassword",br(i,t))}async function WN(i,t){return Er(i,"POST","/v1/accounts:sendOobCode",br(i,t))}async function t2(i,t){return WN(i,t)}async function e2(i,t){return Tu(i,"POST","/v1/accounts:signInWithEmailLink",br(i,t))}async function n2(i,t){return Tu(i,"POST","/v1/accounts:signInWithEmailLink",br(i,t))}class ou extends sg{constructor(t,e,s,o=null){super("password",s),this._email=t,this._password=e,this._tenantId=o}static _fromEmailAndPassword(t,e){return new ou(t,e,"password")}static _fromEmailAndCode(t,e,s=null){return new ou(t,e,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const e=typeof t=="string"?JSON.parse(t):t;if(e?.email&&e?.password){if(e.signInMethod==="password")return this._fromEmailAndPassword(e.email,e.password);if(e.signInMethod==="emailLink")return this._fromEmailAndCode(e.email,e.password,e.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const e={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Fh(t,e,"signInWithPassword",JN);case"emailLink":return e2(t,{email:this._email,oobCode:this._password});default:oi(t,"internal-error")}}async _linkToIdToken(t,e){switch(this.signInMethod){case"password":const s={idToken:e,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Fh(t,s,"signUpPassword",ZN);case"emailLink":return n2(t,{idToken:e,email:this._email,oobCode:this._password});default:oi(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}async function fo(i,t){return Tu(i,"POST","/v1/accounts:signInWithIdp",br(i,t))}const i2="http://localhost";class ca extends sg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const e=new ca(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(e.idToken=t.idToken),t.accessToken&&(e.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(e.nonce=t.nonce),t.pendingToken&&(e.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(e.accessToken=t.oauthToken,e.secret=t.oauthTokenSecret):oi("argument-error"),e}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const e=typeof t=="string"?JSON.parse(t):t,{providerId:s,signInMethod:o,...u}=e;if(!s||!o)return null;const c=new ca(s,o);return c.idToken=u.idToken||void 0,c.accessToken=u.accessToken||void 0,c.secret=u.secret,c.nonce=u.nonce,c.pendingToken=u.pendingToken||null,c}_getIdTokenResponse(t){const e=this.buildRequest();return fo(t,e)}_linkToIdToken(t,e){const s=this.buildRequest();return s.idToken=e,fo(t,s)}_getReauthenticationResolver(t){const e=this.buildRequest();return e.autoCreate=!1,fo(t,e)}buildRequest(){const t={requestUri:i2,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const e={};this.idToken&&(e.id_token=this.idToken),this.accessToken&&(e.access_token=this.accessToken),this.secret&&(e.oauth_token_secret=this.secret),e.providerId=this.providerId,this.nonce&&!this.pendingToken&&(e.nonce=this.nonce),t.postBody=Eu(e)}return t}}function r2(i){switch(i){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function s2(i){const t=ql(Hl(i)).link,e=t?ql(Hl(t)).deep_link_id:null,s=ql(Hl(i)).deep_link_id;return(s?ql(Hl(s)).link:null)||s||e||t||i}class ag{constructor(t){const e=ql(Hl(t)),s=e.apiKey??null,o=e.oobCode??null,u=r2(e.mode??null);Ct(s&&o&&u,"argument-error"),this.apiKey=s,this.operation=u,this.code=o,this.continueUrl=e.continueUrl??null,this.languageCode=e.lang??null,this.tenantId=e.tenantId??null}static parseLink(t){const e=s2(t);try{return new ag(e)}catch{return null}}}class Io{constructor(){this.providerId=Io.PROVIDER_ID}static credential(t,e){return ou._fromEmailAndPassword(t,e)}static credentialWithLink(t,e){const s=ag.parseLink(e);return Ct(s,"argument-error"),ou._fromEmailAndCode(t,s.code,s.tenantId)}}Io.PROVIDER_ID="password";Io.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Io.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class ux{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}class wu extends ux{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}class rs extends wu{constructor(){super("facebook.com")}static credential(t){return ca._fromParams({providerId:rs.PROVIDER_ID,signInMethod:rs.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return rs.credentialFromTaggedObject(t)}static credentialFromError(t){return rs.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return rs.credential(t.oauthAccessToken)}catch{return null}}}rs.FACEBOOK_SIGN_IN_METHOD="facebook.com";rs.PROVIDER_ID="facebook.com";class ss extends wu{constructor(){super("google.com"),this.addScope("profile")}static credential(t,e){return ca._fromParams({providerId:ss.PROVIDER_ID,signInMethod:ss.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:e})}static credentialFromResult(t){return ss.credentialFromTaggedObject(t)}static credentialFromError(t){return ss.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:e,oauthAccessToken:s}=t;if(!e&&!s)return null;try{return ss.credential(e,s)}catch{return null}}}ss.GOOGLE_SIGN_IN_METHOD="google.com";ss.PROVIDER_ID="google.com";class as extends wu{constructor(){super("github.com")}static credential(t){return ca._fromParams({providerId:as.PROVIDER_ID,signInMethod:as.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return as.credentialFromTaggedObject(t)}static credentialFromError(t){return as.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return as.credential(t.oauthAccessToken)}catch{return null}}}as.GITHUB_SIGN_IN_METHOD="github.com";as.PROVIDER_ID="github.com";class os extends wu{constructor(){super("twitter.com")}static credential(t,e){return ca._fromParams({providerId:os.PROVIDER_ID,signInMethod:os.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:e})}static credentialFromResult(t){return os.credentialFromTaggedObject(t)}static credentialFromError(t){return os.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:e,oauthTokenSecret:s}=t;if(!e||!s)return null;try{return os.credential(e,s)}catch{return null}}}os.TWITTER_SIGN_IN_METHOD="twitter.com";os.PROVIDER_ID="twitter.com";async function a2(i,t){return Tu(i,"POST","/v1/accounts:signUp",br(i,t))}class ha{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,e,s,o=!1){const u=await ai._fromIdTokenResponse(t,s,o),c=Hv(s);return new ha({user:u,providerId:c,_tokenResponse:s,operationType:e})}static async _forOperation(t,e,s){await t._updateTokensIfNecessary(s,!0);const o=Hv(s);return new ha({user:t,providerId:o,_tokenResponse:s,operationType:e})}}function Hv(i){return i.providerId?i.providerId:"phoneNumber"in i?"phone":null}class qh extends vr{constructor(t,e,s,o){super(e.code,e.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,qh.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:e.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(t,e,s,o){return new qh(t,e,s,o)}}function cx(i,t,e,s){return(t==="reauthenticate"?e._getReauthenticationResolver(i):e._getIdTokenResponse(i)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?qh._fromErrorAndOperation(i,u,t,s):u})}async function o2(i,t,e=!1){const s=await au(i,t._linkToIdToken(i.auth,await i.getIdToken()),e);return ha._forOperation(i,"link",s)}async function l2(i,t,e=!1){const{auth:s}=i;if(Hn(s.app))return Promise.reject(dr(s));const o="reauthenticate";try{const u=await au(i,cx(s,o,t,i),e);Ct(u.idToken,s,"internal-error");const c=ig(u.idToken);Ct(c,s,"internal-error");const{sub:m}=c;return Ct(i.uid===m,s,"user-mismatch"),ha._forOperation(i,o,u)}catch(u){throw u?.code==="auth/user-not-found"&&oi(s,"user-mismatch"),u}}async function hx(i,t,e=!1){if(Hn(i.app))return Promise.reject(dr(i));const s="signIn",o=await cx(i,s,t),u=await ha._fromIdTokenResponse(i,s,o);return e||await i._updateCurrentUser(u.user),u}async function u2(i,t){return hx(bs(i),t)}async function fx(i){const t=bs(i);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function c2(i,t,e){const s=bs(i);await Fh(s,{requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"},"getOobCode",t2)}async function h2(i,t,e){if(Hn(i.app))return Promise.reject(dr(i));const s=bs(i),c=await Fh(s,{returnSecureToken:!0,email:t,password:e,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",a2).catch(p=>{throw p.code==="auth/password-does-not-meet-requirements"&&fx(i),p}),m=await ha._fromIdTokenResponse(s,"signIn",c);return await s._updateCurrentUser(m.user),m}function f2(i,t,e){return Hn(i.app)?Promise.reject(dr(i)):u2(Ze(i),Io.credential(t,e)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&fx(i),s})}function d2(i,t,e,s){return Ze(i).onIdTokenChanged(t,e,s)}function m2(i,t,e){return Ze(i).beforeAuthStateChanged(t,e)}function p2(i,t,e,s){return Ze(i).onAuthStateChanged(t,e,s)}function g2(i){return Ze(i).signOut()}const Hh="__sak";class dx{constructor(t,e){this.storageRetriever=t,this.type=e}_isAvailable(){try{return this.storage?(this.storage.setItem(Hh,"1"),this.storage.removeItem(Hh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,e){return this.storage.setItem(t,JSON.stringify(e)),Promise.resolve()}_get(t){const e=this.storage.getItem(t);return Promise.resolve(e?JSON.parse(e):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}const y2=1e3,_2=10;class mx extends dx{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,e)=>this.onStorageEvent(t,e),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=rx(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const e of Object.keys(this.listeners)){const s=this.storage.getItem(e),o=this.localCache[e];s!==o&&t(e,o,s)}}onStorageEvent(t,e=!1){if(!t.key){this.forAllChangedKeys((c,m,p)=>{this.notifyListeners(c,p)});return}const s=t.key;e?this.detachListener():this.stopPolling();const o=()=>{const c=this.storage.getItem(s);!e&&this.localCache[s]===c||this.notifyListeners(s,c)},u=this.storage.getItem(s);ON()&&u!==t.newValue&&t.newValue!==t.oldValue?setTimeout(o,_2):o()}notifyListeners(t,e){this.localCache[t]=e;const s=this.listeners[t];if(s)for(const o of Array.from(s))o(e&&JSON.parse(e))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,e,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:e,newValue:s}),!0)})},y2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,e){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,e){await super._set(t,e),this.localCache[t]=JSON.stringify(e)}async _get(t){const e=await super._get(t);return this.localCache[t]=JSON.stringify(e),e}async _remove(t){await super._remove(t),delete this.localCache[t]}}mx.type="LOCAL";const v2=mx;class px extends dx{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,e){}_removeListener(t,e){}}px.type="SESSION";const gx=px;function b2(i){return Promise.all(i.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(e){return{fulfilled:!1,reason:e}}}))}class df{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const e=this.receivers.find(o=>o.isListeningto(t));if(e)return e;const s=new df(t);return this.receivers.push(s),s}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const e=t,{eventId:s,eventType:o,data:u}=e.data,c=this.handlersMap[o];if(!c?.size)return;e.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const m=Array.from(c).map(async g=>g(e.origin,u)),p=await b2(m);e.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:p})}_subscribe(t,e){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(e)}_unsubscribe(t,e){this.handlersMap[t]&&e&&this.handlersMap[t].delete(e),(!e||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}df.receivers=[];function og(i="",t=10){let e="";for(let s=0;s<t;s++)e+=Math.floor(Math.random()*10);return i+e}class E2{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,e,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let u,c;return new Promise((m,p)=>{const g=og("",20);o.port1.start();const v=setTimeout(()=>{p(new Error("unsupported_event"))},s);c={messageChannel:o,onMessage(E){const T=E;if(T.data.eventId===g)switch(T.data.status){case"ack":clearTimeout(v),u=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),m(T.data.response);break;default:clearTimeout(v),clearTimeout(u),p(new Error("invalid_response"));break}}},this.handlers.add(c),o.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:t,eventId:g,data:e},[o.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}function Mi(){return window}function x2(i){Mi().location.href=i}function yx(){return typeof Mi().WorkerGlobalScope<"u"&&typeof Mi().importScripts=="function"}async function T2(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function w2(){return navigator?.serviceWorker?.controller||null}function S2(){return yx()?self:null}const _x="firebaseLocalStorageDb",A2=1,Gh="firebaseLocalStorage",vx="fbase_key";class Su{constructor(t){this.request=t}toPromise(){return new Promise((t,e)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{e(this.request.error)})})}}function mf(i,t){return i.transaction([Gh],t?"readwrite":"readonly").objectStore(Gh)}function N2(){const i=indexedDB.deleteDatabase(_x);return new Su(i).toPromise()}function _p(){const i=indexedDB.open(_x,A2);return new Promise((t,e)=>{i.addEventListener("error",()=>{e(i.error)}),i.addEventListener("upgradeneeded",()=>{const s=i.result;try{s.createObjectStore(Gh,{keyPath:vx})}catch(o){e(o)}}),i.addEventListener("success",async()=>{const s=i.result;s.objectStoreNames.contains(Gh)?t(s):(s.close(),await N2(),t(await _p()))})})}async function Gv(i,t,e){const s=mf(i,!0).put({[vx]:t,value:e});return new Su(s).toPromise()}async function C2(i,t){const e=mf(i,!1).get(t),s=await new Su(e).toPromise();return s===void 0?null:s.value}function $v(i,t){const e=mf(i,!0).delete(t);return new Su(e).toPromise()}const R2=800,I2=3;class bx{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await _p(),this.db)}async _withRetries(t){let e=0;for(;;)try{const s=await this._openDb();return await t(s)}catch(s){if(e++>I2)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return yx()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=df._getInstance(S2()),this.receiver._subscribe("keyChanged",async(t,e)=>({keyProcessed:(await this._poll()).includes(e.key)})),this.receiver._subscribe("ping",async(t,e)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await T2(),!this.activeServiceWorker)return;this.sender=new E2(this.activeServiceWorker);const t=await this.sender._send("ping",{},800);t&&t[0]?.fulfilled&&t[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||w2()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await _p();return await Gv(t,Hh,"1"),await $v(t,Hh),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,e){return this._withPendingWrite(async()=>(await this._withRetries(s=>Gv(s,t,e)),this.localCache[t]=e,this.notifyServiceWorker(t)))}async _get(t){const e=await this._withRetries(s=>C2(s,t));return this.localCache[t]=e,e}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(e=>$v(e,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(o=>{const u=mf(o,!1).getAll();return new Su(u).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const e=[],s=new Set;if(t.length!==0)for(const{fbase_key:o,value:u}of t)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(u)&&(this.notifyListeners(o,u),e.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),e.push(o));return e}notifyListeners(t,e){this.localCache[t]=e;const s=this.listeners[t];if(s)for(const o of Array.from(s))o(e)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),R2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,e){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}bx.type="LOCAL";const D2=bx;new xu(3e4,6e4);function O2(i,t){return t?fr(t):(Ct(i._popupRedirectResolver,i,"argument-error"),i._popupRedirectResolver)}class lg extends sg{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return fo(t,this._buildIdpRequest())}_linkToIdToken(t,e){return fo(t,this._buildIdpRequest(e))}_getReauthenticationResolver(t){return fo(t,this._buildIdpRequest())}_buildIdpRequest(t){const e={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(e.idToken=t),e}}function M2(i){return hx(i.auth,new lg(i),i.bypassAuthState)}function k2(i){const{auth:t,user:e}=i;return Ct(e,t,"internal-error"),l2(e,new lg(i),i.bypassAuthState)}async function V2(i){const{auth:t,user:e}=i;return Ct(e,t,"internal-error"),o2(e,new lg(i),i.bypassAuthState)}class Ex{constructor(t,e,s,o,u=!1){this.auth=t,this.resolver=s,this.user=o,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(e)?e:[e]}execute(){return new Promise(async(t,e)=>{this.pendingPromise={resolve:t,reject:e};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(t){const{urlResponse:e,sessionId:s,postBody:o,tenantId:u,error:c,type:m}=t;if(c){this.reject(c);return}const p={auth:this.auth,requestUri:e,sessionId:s,tenantId:u||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(p))}catch(g){this.reject(g)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return M2;case"linkViaPopup":case"linkViaRedirect":return V2;case"reauthViaPopup":case"reauthViaRedirect":return k2;default:oi(this.auth,"internal-error")}}resolve(t){pr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){pr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const j2=new xu(2e3,1e4);class lo extends Ex{constructor(t,e,s,o,u){super(t,e,o,u),this.provider=s,this.authWindow=null,this.pollId=null,lo.currentPopupAction&&lo.currentPopupAction.cancel(),lo.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return Ct(t,this.auth,"internal-error"),t}async onExecution(){pr(this.filter.length===1,"Popup operations only handle one event");const t=og();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(Oi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Oi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,lo.currentPopupAction=null}pollUserCancellation(){const t=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Oi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,j2.get())};t()}}lo.currentPopupAction=null;const L2="pendingRedirect",Th=new Map;class P2 extends Ex{constructor(t,e,s=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],e,void 0,s),this.eventId=null}async execute(){let t=Th.get(this.auth._key());if(!t){try{const s=await U2(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(s)}catch(e){t=()=>Promise.reject(e)}Th.set(this.auth._key(),t)}return this.bypassAuthState||Th.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const e=await this.auth._redirectUserForId(t.eventId);if(e)return this.user=e,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function U2(i,t){const e=F2(t),s=B2(i);if(!await s._isAvailable())return!1;const o=await s._get(e)==="true";return await s._remove(e),o}function z2(i,t){Th.set(i._key(),t)}function B2(i){return fr(i._redirectPersistence)}function F2(i){return xh(L2,i.config.apiKey,i.name)}async function q2(i,t,e=!1){if(Hn(i.app))return Promise.reject(dr(i));const s=bs(i),o=O2(s,t),c=await new P2(s,o,e).execute();return c&&!e&&(delete c.user._redirectEventId,await s._persistUserIfCurrent(c.user),await s._setRedirectUser(null,t)),c}const H2=600*1e3;class G2{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let e=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(t,s)&&(e=!0,this.sendToConsumer(t,s),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!$2(t)||(this.hasHandledPotentialRedirect=!0,e||(this.queuedRedirectEvent=t,e=!0)),e}sendToConsumer(t,e){if(t.error&&!xx(t)){const s=t.error.code?.split("auth/")[1]||"internal-error";e.onError(Oi(this.auth,s))}else e.onAuthEvent(t)}isEventForConsumer(t,e){const s=e.eventId===null||!!t.eventId&&t.eventId===e.eventId;return e.filter.includes(t.type)&&s}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=H2&&this.cachedEventUids.clear(),this.cachedEventUids.has(Yv(t))}saveEventToCache(t){this.cachedEventUids.add(Yv(t)),this.lastProcessedEventTime=Date.now()}}function Yv(i){return[i.type,i.eventId,i.sessionId,i.tenantId].filter(t=>t).join("-")}function xx({type:i,error:t}){return i==="unknown"&&t?.code==="auth/no-auth-event"}function $2(i){switch(i.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return xx(i);default:return!1}}async function Y2(i,t={}){return Er(i,"GET","/v1/projects",t)}const Q2=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,K2=/^https?/;async function X2(i){if(i.config.emulator)return;const{authorizedDomains:t}=await Y2(i);for(const e of t)try{if(Z2(e))return}catch{}oi(i,"unauthorized-domain")}function Z2(i){const t=gp(),{protocol:e,hostname:s}=new URL(t);if(i.startsWith("chrome-extension://")){const c=new URL(i);return c.hostname===""&&s===""?e==="chrome-extension:"&&i.replace("chrome-extension://","")===t.replace("chrome-extension://",""):e==="chrome-extension:"&&c.hostname===s}if(!K2.test(e))return!1;if(Q2.test(i))return s===i;const o=i.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}const J2=new xu(3e4,6e4);function Qv(){const i=Mi().___jsl;if(i?.H){for(const t of Object.keys(i.H))if(i.H[t].r=i.H[t].r||[],i.H[t].L=i.H[t].L||[],i.H[t].r=[...i.H[t].L],i.CP)for(let e=0;e<i.CP.length;e++)i.CP[e]=null}}function W2(i){return new Promise((t,e)=>{function s(){Qv(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Qv(),e(Oi(i,"network-request-failed"))},timeout:J2.get()})}if(Mi().gapi?.iframes?.Iframe)t(gapi.iframes.getContext());else if(Mi().gapi?.load)s();else{const o=BN("iframefcb");return Mi()[o]=()=>{gapi.load?s():e(Oi(i,"network-request-failed"))},ax(`${zN()}?onload=${o}`).catch(u=>e(u))}}).catch(t=>{throw wh=null,t})}let wh=null;function tC(i){return wh=wh||W2(i),wh}const eC=new xu(5e3,15e3),nC="__/auth/iframe",iC="emulator/auth/iframe",rC={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},sC=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function aC(i){const t=i.config;Ct(t.authDomain,i,"auth-domain-config-required");const e=t.emulator?ng(t,iC):`https://${i.config.authDomain}/${nC}`,s={apiKey:t.apiKey,appName:i.name,v:Ro},o=sC.get(i.config.apiHost);o&&(s.eid=o);const u=i._getFrameworks();return u.length&&(s.fw=u.join(",")),`${e}?${Eu(s).slice(1)}`}async function oC(i){const t=await tC(i),e=Mi().gapi;return Ct(e,i,"internal-error"),t.open({where:document.body,url:aC(i),messageHandlersFilter:e.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:rC,dontclear:!0},s=>new Promise(async(o,u)=>{await s.restyle({setHideOnLeave:!1});const c=Oi(i,"network-request-failed"),m=Mi().setTimeout(()=>{u(c)},eC.get());function p(){Mi().clearTimeout(m),o(s)}s.ping(p).then(p,()=>{u(c)})}))}const lC={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},uC=500,cC=600,hC="_blank",fC="http://localhost";class Kv{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function dC(i,t,e,s=uC,o=cC){const u=Math.max((window.screen.availHeight-o)/2,0).toString(),c=Math.max((window.screen.availWidth-s)/2,0).toString();let m="";const p={...lC,width:s.toString(),height:o.toString(),top:u,left:c},g=rn().toLowerCase();e&&(m=WE(g)?hC:e),ZE(g)&&(t=t||fC,p.scrollbars="yes");const v=Object.entries(p).reduce((T,[I,P])=>`${T}${I}=${P},`,"");if(DN(g)&&m!=="_self")return mC(t||"",m),new Kv(null);const E=window.open(t||"",m,v);Ct(E,i,"popup-blocked");try{E.focus()}catch{}return new Kv(E)}function mC(i,t){const e=document.createElement("a");e.href=i,e.target=t;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),e.dispatchEvent(s)}const pC="__/auth/handler",gC="emulator/auth/handler",yC=encodeURIComponent("fac");async function Xv(i,t,e,s,o,u){Ct(i.config.authDomain,i,"auth-domain-config-required"),Ct(i.config.apiKey,i,"invalid-api-key");const c={apiKey:i.config.apiKey,appName:i.name,authType:e,redirectUrl:s,v:Ro,eventId:o};if(t instanceof ux){t.setDefaultLanguage(i.languageCode),c.providerId=t.providerId||"",ZS(t.getCustomParameters())||(c.customParameters=JSON.stringify(t.getCustomParameters()));for(const[v,E]of Object.entries({}))c[v]=E}if(t instanceof wu){const v=t.getScopes().filter(E=>E!=="");v.length>0&&(c.scopes=v.join(","))}i.tenantId&&(c.tid=i.tenantId);const m=c;for(const v of Object.keys(m))m[v]===void 0&&delete m[v];const p=await i._getAppCheckToken(),g=p?`#${yC}=${encodeURIComponent(p)}`:"";return`${_C(i)}?${Eu(m).slice(1)}${g}`}function _C({config:i}){return i.emulator?ng(i,gC):`https://${i.authDomain}/${pC}`}const Qm="webStorageSupport";class vC{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=gx,this._completeRedirectFn=q2,this._overrideRedirectResult=z2}async _openPopup(t,e,s,o){pr(this.eventManagers[t._key()]?.manager,"_initialize() not called before _openPopup()");const u=await Xv(t,e,s,gp(),o);return dC(t,u,og())}async _openRedirect(t,e,s,o){await this._originValidation(t);const u=await Xv(t,e,s,gp(),o);return x2(u),new Promise(()=>{})}_initialize(t){const e=t._key();if(this.eventManagers[e]){const{manager:o,promise:u}=this.eventManagers[e];return o?Promise.resolve(o):(pr(u,"If manager is not set, promise should be"),u)}const s=this.initAndGetManager(t);return this.eventManagers[e]={promise:s},s.catch(()=>{delete this.eventManagers[e]}),s}async initAndGetManager(t){const e=await oC(t),s=new G2(t);return e.register("authEvent",o=>(Ct(o?.authEvent,t,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:s},this.iframes[t._key()]=e,s}_isIframeWebStorageSupported(t,e){this.iframes[t._key()].send(Qm,{type:Qm},o=>{const u=o?.[0]?.[Qm];u!==void 0&&e(!!u),oi(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const e=t._key();return this.originValidationPromises[e]||(this.originValidationPromises[e]=X2(t)),this.originValidationPromises[e]}get _shouldInitProactively(){return rx()||JE()||rg()}}const bC=vC;var Zv="@firebase/auth",Jv="1.12.0";class EC{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const e=this.auth.onIdTokenChanged(s=>{t(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(t,e),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const e=this.internalListeners.get(t);e&&(this.internalListeners.delete(t),e(),this.updateProactiveRefresh())}assertAuthConfigured(){Ct(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function xC(i){switch(i){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function TC(i){_o(new ua("auth",(t,{options:e})=>{const s=t.getProvider("app").getImmediate(),o=t.getProvider("heartbeat"),u=t.getProvider("app-check-internal"),{apiKey:c,authDomain:m}=s.options;Ct(c&&!c.includes(":"),"invalid-api-key",{appName:s.name});const p={apiKey:c,authDomain:m,clientPlatform:i,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:sx(i)},g=new LN(s,o,u,p);return YN(g,e),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,s)=>{t.getProvider("auth-internal").initialize()})),_o(new ua("auth-internal",t=>{const e=bs(t.getProvider("auth").getImmediate());return(s=>new EC(s))(e)},"PRIVATE").setInstantiationMode("EXPLICIT")),hs(Zv,Jv,xC(i)),hs(Zv,Jv,"esm2020")}const wC=300,SC=kE("authIdTokenMaxAge")||wC;let Wv=null;const AC=i=>async t=>{const e=t&&await t.getIdTokenResult(),s=e&&(new Date().getTime()-Date.parse(e.issuedAtTime))/1e3;if(s&&s>SC)return;const o=e?.token;Wv!==o&&(Wv=o,await fetch(i,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function NC(i=zE()){const t=tg(i,"auth");if(t.isInitialized())return t.getImmediate();const e=$N(i,{popupRedirectResolver:bC,persistence:[D2,v2,gx]}),s=kE("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(s,location.origin);if(location.origin===u.origin){const c=AC(u.toString());m2(e,c,()=>c(e.currentUser)),d2(e,m=>c(m))}}const o=OE("auth");return o&&QN(e,`http://${o}`),e}function CC(){return document.getElementsByTagName("head")?.[0]??document}PN({loadJS(i){return new Promise((t,e)=>{const s=document.createElement("script");s.setAttribute("src",i),s.onload=t,s.onerror=o=>{const u=Oi("internal-error");u.customData=o,e(u)},s.type="text/javascript",s.charset="UTF-8",CC().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});TC("Browser");var tb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var fs,Tx;(function(){var i;function t(C,A){function R(){}R.prototype=A.prototype,C.F=A.prototype,C.prototype=new R,C.prototype.constructor=C,C.D=function(V,M,D){for(var S=Array(arguments.length-2),ot=2;ot<arguments.length;ot++)S[ot-2]=arguments[ot];return A.prototype[M].apply(V,S)}}function e(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}t(s,e),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(C,A,R){R||(R=0);const V=Array(16);if(typeof A=="string")for(var M=0;M<16;++M)V[M]=A.charCodeAt(R++)|A.charCodeAt(R++)<<8|A.charCodeAt(R++)<<16|A.charCodeAt(R++)<<24;else for(M=0;M<16;++M)V[M]=A[R++]|A[R++]<<8|A[R++]<<16|A[R++]<<24;A=C.g[0],R=C.g[1],M=C.g[2];let D=C.g[3],S;S=A+(D^R&(M^D))+V[0]+3614090360&4294967295,A=R+(S<<7&4294967295|S>>>25),S=D+(M^A&(R^M))+V[1]+3905402710&4294967295,D=A+(S<<12&4294967295|S>>>20),S=M+(R^D&(A^R))+V[2]+606105819&4294967295,M=D+(S<<17&4294967295|S>>>15),S=R+(A^M&(D^A))+V[3]+3250441966&4294967295,R=M+(S<<22&4294967295|S>>>10),S=A+(D^R&(M^D))+V[4]+4118548399&4294967295,A=R+(S<<7&4294967295|S>>>25),S=D+(M^A&(R^M))+V[5]+1200080426&4294967295,D=A+(S<<12&4294967295|S>>>20),S=M+(R^D&(A^R))+V[6]+2821735955&4294967295,M=D+(S<<17&4294967295|S>>>15),S=R+(A^M&(D^A))+V[7]+4249261313&4294967295,R=M+(S<<22&4294967295|S>>>10),S=A+(D^R&(M^D))+V[8]+1770035416&4294967295,A=R+(S<<7&4294967295|S>>>25),S=D+(M^A&(R^M))+V[9]+2336552879&4294967295,D=A+(S<<12&4294967295|S>>>20),S=M+(R^D&(A^R))+V[10]+4294925233&4294967295,M=D+(S<<17&4294967295|S>>>15),S=R+(A^M&(D^A))+V[11]+2304563134&4294967295,R=M+(S<<22&4294967295|S>>>10),S=A+(D^R&(M^D))+V[12]+1804603682&4294967295,A=R+(S<<7&4294967295|S>>>25),S=D+(M^A&(R^M))+V[13]+4254626195&4294967295,D=A+(S<<12&4294967295|S>>>20),S=M+(R^D&(A^R))+V[14]+2792965006&4294967295,M=D+(S<<17&4294967295|S>>>15),S=R+(A^M&(D^A))+V[15]+1236535329&4294967295,R=M+(S<<22&4294967295|S>>>10),S=A+(M^D&(R^M))+V[1]+4129170786&4294967295,A=R+(S<<5&4294967295|S>>>27),S=D+(R^M&(A^R))+V[6]+3225465664&4294967295,D=A+(S<<9&4294967295|S>>>23),S=M+(A^R&(D^A))+V[11]+643717713&4294967295,M=D+(S<<14&4294967295|S>>>18),S=R+(D^A&(M^D))+V[0]+3921069994&4294967295,R=M+(S<<20&4294967295|S>>>12),S=A+(M^D&(R^M))+V[5]+3593408605&4294967295,A=R+(S<<5&4294967295|S>>>27),S=D+(R^M&(A^R))+V[10]+38016083&4294967295,D=A+(S<<9&4294967295|S>>>23),S=M+(A^R&(D^A))+V[15]+3634488961&4294967295,M=D+(S<<14&4294967295|S>>>18),S=R+(D^A&(M^D))+V[4]+3889429448&4294967295,R=M+(S<<20&4294967295|S>>>12),S=A+(M^D&(R^M))+V[9]+568446438&4294967295,A=R+(S<<5&4294967295|S>>>27),S=D+(R^M&(A^R))+V[14]+3275163606&4294967295,D=A+(S<<9&4294967295|S>>>23),S=M+(A^R&(D^A))+V[3]+4107603335&4294967295,M=D+(S<<14&4294967295|S>>>18),S=R+(D^A&(M^D))+V[8]+1163531501&4294967295,R=M+(S<<20&4294967295|S>>>12),S=A+(M^D&(R^M))+V[13]+2850285829&4294967295,A=R+(S<<5&4294967295|S>>>27),S=D+(R^M&(A^R))+V[2]+4243563512&4294967295,D=A+(S<<9&4294967295|S>>>23),S=M+(A^R&(D^A))+V[7]+1735328473&4294967295,M=D+(S<<14&4294967295|S>>>18),S=R+(D^A&(M^D))+V[12]+2368359562&4294967295,R=M+(S<<20&4294967295|S>>>12),S=A+(R^M^D)+V[5]+4294588738&4294967295,A=R+(S<<4&4294967295|S>>>28),S=D+(A^R^M)+V[8]+2272392833&4294967295,D=A+(S<<11&4294967295|S>>>21),S=M+(D^A^R)+V[11]+1839030562&4294967295,M=D+(S<<16&4294967295|S>>>16),S=R+(M^D^A)+V[14]+4259657740&4294967295,R=M+(S<<23&4294967295|S>>>9),S=A+(R^M^D)+V[1]+2763975236&4294967295,A=R+(S<<4&4294967295|S>>>28),S=D+(A^R^M)+V[4]+1272893353&4294967295,D=A+(S<<11&4294967295|S>>>21),S=M+(D^A^R)+V[7]+4139469664&4294967295,M=D+(S<<16&4294967295|S>>>16),S=R+(M^D^A)+V[10]+3200236656&4294967295,R=M+(S<<23&4294967295|S>>>9),S=A+(R^M^D)+V[13]+681279174&4294967295,A=R+(S<<4&4294967295|S>>>28),S=D+(A^R^M)+V[0]+3936430074&4294967295,D=A+(S<<11&4294967295|S>>>21),S=M+(D^A^R)+V[3]+3572445317&4294967295,M=D+(S<<16&4294967295|S>>>16),S=R+(M^D^A)+V[6]+76029189&4294967295,R=M+(S<<23&4294967295|S>>>9),S=A+(R^M^D)+V[9]+3654602809&4294967295,A=R+(S<<4&4294967295|S>>>28),S=D+(A^R^M)+V[12]+3873151461&4294967295,D=A+(S<<11&4294967295|S>>>21),S=M+(D^A^R)+V[15]+530742520&4294967295,M=D+(S<<16&4294967295|S>>>16),S=R+(M^D^A)+V[2]+3299628645&4294967295,R=M+(S<<23&4294967295|S>>>9),S=A+(M^(R|~D))+V[0]+4096336452&4294967295,A=R+(S<<6&4294967295|S>>>26),S=D+(R^(A|~M))+V[7]+1126891415&4294967295,D=A+(S<<10&4294967295|S>>>22),S=M+(A^(D|~R))+V[14]+2878612391&4294967295,M=D+(S<<15&4294967295|S>>>17),S=R+(D^(M|~A))+V[5]+4237533241&4294967295,R=M+(S<<21&4294967295|S>>>11),S=A+(M^(R|~D))+V[12]+1700485571&4294967295,A=R+(S<<6&4294967295|S>>>26),S=D+(R^(A|~M))+V[3]+2399980690&4294967295,D=A+(S<<10&4294967295|S>>>22),S=M+(A^(D|~R))+V[10]+4293915773&4294967295,M=D+(S<<15&4294967295|S>>>17),S=R+(D^(M|~A))+V[1]+2240044497&4294967295,R=M+(S<<21&4294967295|S>>>11),S=A+(M^(R|~D))+V[8]+1873313359&4294967295,A=R+(S<<6&4294967295|S>>>26),S=D+(R^(A|~M))+V[15]+4264355552&4294967295,D=A+(S<<10&4294967295|S>>>22),S=M+(A^(D|~R))+V[6]+2734768916&4294967295,M=D+(S<<15&4294967295|S>>>17),S=R+(D^(M|~A))+V[13]+1309151649&4294967295,R=M+(S<<21&4294967295|S>>>11),S=A+(M^(R|~D))+V[4]+4149444226&4294967295,A=R+(S<<6&4294967295|S>>>26),S=D+(R^(A|~M))+V[11]+3174756917&4294967295,D=A+(S<<10&4294967295|S>>>22),S=M+(A^(D|~R))+V[2]+718787259&4294967295,M=D+(S<<15&4294967295|S>>>17),S=R+(D^(M|~A))+V[9]+3951481745&4294967295,C.g[0]=C.g[0]+A&4294967295,C.g[1]=C.g[1]+(M+(S<<21&4294967295|S>>>11))&4294967295,C.g[2]=C.g[2]+M&4294967295,C.g[3]=C.g[3]+D&4294967295}s.prototype.v=function(C,A){A===void 0&&(A=C.length);const R=A-this.blockSize,V=this.C;let M=this.h,D=0;for(;D<A;){if(M==0)for(;D<=R;)o(this,C,D),D+=this.blockSize;if(typeof C=="string"){for(;D<A;)if(V[M++]=C.charCodeAt(D++),M==this.blockSize){o(this,V),M=0;break}}else for(;D<A;)if(V[M++]=C[D++],M==this.blockSize){o(this,V),M=0;break}}this.h=M,this.o+=A},s.prototype.A=function(){var C=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);C[0]=128;for(var A=1;A<C.length-8;++A)C[A]=0;A=this.o*8;for(var R=C.length-8;R<C.length;++R)C[R]=A&255,A/=256;for(this.v(C),C=Array(16),A=0,R=0;R<4;++R)for(let V=0;V<32;V+=8)C[A++]=this.g[R]>>>V&255;return C};function u(C,A){var R=m;return Object.prototype.hasOwnProperty.call(R,C)?R[C]:R[C]=A(C)}function c(C,A){this.h=A;const R=[];let V=!0;for(let M=C.length-1;M>=0;M--){const D=C[M]|0;V&&D==A||(R[M]=D,V=!1)}this.g=R}var m={};function p(C){return-128<=C&&C<128?u(C,function(A){return new c([A|0],A<0?-1:0)}):new c([C|0],C<0?-1:0)}function g(C){if(isNaN(C)||!isFinite(C))return E;if(C<0)return X(g(-C));const A=[];let R=1;for(let V=0;C>=R;V++)A[V]=C/R|0,R*=4294967296;return new c(A,0)}function v(C,A){if(C.length==0)throw Error("number format error: empty string");if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(C.charAt(0)=="-")return X(v(C.substring(1),A));if(C.indexOf("-")>=0)throw Error('number format error: interior "-" character');const R=g(Math.pow(A,8));let V=E;for(let D=0;D<C.length;D+=8){var M=Math.min(8,C.length-D);const S=parseInt(C.substring(D,D+M),A);M<8?(M=g(Math.pow(A,M)),V=V.j(M).add(g(S))):(V=V.j(R),V=V.add(g(S)))}return V}var E=p(0),T=p(1),I=p(16777216);i=c.prototype,i.m=function(){if(B(this))return-X(this).m();let C=0,A=1;for(let R=0;R<this.g.length;R++){const V=this.i(R);C+=(V>=0?V:4294967296+V)*A,A*=4294967296}return C},i.toString=function(C){if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(P(this))return"0";if(B(this))return"-"+X(this).toString(C);const A=g(Math.pow(C,6));var R=this;let V="";for(;;){const M=nt(R,A).g;R=ft(R,M.j(A));let D=((R.g.length>0?R.g[0]:R.h)>>>0).toString(C);if(R=M,P(R))return D+V;for(;D.length<6;)D="0"+D;V=D+V}},i.i=function(C){return C<0?0:C<this.g.length?this.g[C]:this.h};function P(C){if(C.h!=0)return!1;for(let A=0;A<C.g.length;A++)if(C.g[A]!=0)return!1;return!0}function B(C){return C.h==-1}i.l=function(C){return C=ft(this,C),B(C)?-1:P(C)?0:1};function X(C){const A=C.g.length,R=[];for(let V=0;V<A;V++)R[V]=~C.g[V];return new c(R,~C.h).add(T)}i.abs=function(){return B(this)?X(this):this},i.add=function(C){const A=Math.max(this.g.length,C.g.length),R=[];let V=0;for(let M=0;M<=A;M++){let D=V+(this.i(M)&65535)+(C.i(M)&65535),S=(D>>>16)+(this.i(M)>>>16)+(C.i(M)>>>16);V=S>>>16,D&=65535,S&=65535,R[M]=S<<16|D}return new c(R,R[R.length-1]&-2147483648?-1:0)};function ft(C,A){return C.add(X(A))}i.j=function(C){if(P(this)||P(C))return E;if(B(this))return B(C)?X(this).j(X(C)):X(X(this).j(C));if(B(C))return X(this.j(X(C)));if(this.l(I)<0&&C.l(I)<0)return g(this.m()*C.m());const A=this.g.length+C.g.length,R=[];for(var V=0;V<2*A;V++)R[V]=0;for(V=0;V<this.g.length;V++)for(let M=0;M<C.g.length;M++){const D=this.i(V)>>>16,S=this.i(V)&65535,ot=C.i(M)>>>16,F=C.i(M)&65535;R[2*V+2*M]+=S*F,$(R,2*V+2*M),R[2*V+2*M+1]+=D*F,$(R,2*V+2*M+1),R[2*V+2*M+1]+=S*ot,$(R,2*V+2*M+1),R[2*V+2*M+2]+=D*ot,$(R,2*V+2*M+2)}for(C=0;C<A;C++)R[C]=R[2*C+1]<<16|R[2*C];for(C=A;C<2*A;C++)R[C]=0;return new c(R,0)};function $(C,A){for(;(C[A]&65535)!=C[A];)C[A+1]+=C[A]>>>16,C[A]&=65535,A++}function tt(C,A){this.g=C,this.h=A}function nt(C,A){if(P(A))throw Error("division by zero");if(P(C))return new tt(E,E);if(B(C))return A=nt(X(C),A),new tt(X(A.g),X(A.h));if(B(A))return A=nt(C,X(A)),new tt(X(A.g),A.h);if(C.g.length>30){if(B(C)||B(A))throw Error("slowDivide_ only works with positive integers.");for(var R=T,V=A;V.l(C)<=0;)R=mt(R),V=mt(V);var M=ht(R,1),D=ht(V,1);for(V=ht(V,2),R=ht(R,2);!P(V);){var S=D.add(V);S.l(C)<=0&&(M=M.add(R),D=S),V=ht(V,1),R=ht(R,1)}return A=ft(C,M.j(A)),new tt(M,A)}for(M=E;C.l(A)>=0;){for(R=Math.max(1,Math.floor(C.m()/A.m())),V=Math.ceil(Math.log(R)/Math.LN2),V=V<=48?1:Math.pow(2,V-48),D=g(R),S=D.j(A);B(S)||S.l(C)>0;)R-=V,D=g(R),S=D.j(A);P(D)&&(D=T),M=M.add(D),C=ft(C,S)}return new tt(M,C)}i.B=function(C){return nt(this,C).h},i.and=function(C){const A=Math.max(this.g.length,C.g.length),R=[];for(let V=0;V<A;V++)R[V]=this.i(V)&C.i(V);return new c(R,this.h&C.h)},i.or=function(C){const A=Math.max(this.g.length,C.g.length),R=[];for(let V=0;V<A;V++)R[V]=this.i(V)|C.i(V);return new c(R,this.h|C.h)},i.xor=function(C){const A=Math.max(this.g.length,C.g.length),R=[];for(let V=0;V<A;V++)R[V]=this.i(V)^C.i(V);return new c(R,this.h^C.h)};function mt(C){const A=C.g.length+1,R=[];for(let V=0;V<A;V++)R[V]=C.i(V)<<1|C.i(V-1)>>>31;return new c(R,C.h)}function ht(C,A){const R=A>>5;A%=32;const V=C.g.length-R,M=[];for(let D=0;D<V;D++)M[D]=A>0?C.i(D+R)>>>A|C.i(D+R+1)<<32-A:C.i(D+R);return new c(M,C.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,Tx=s,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=g,c.fromString=v,fs=c}).apply(typeof tb<"u"?tb:typeof self<"u"?self:typeof window<"u"?window:{});var uh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var wx,Gl,Sx,Sh,vp,Ax,Nx,Cx;(function(){var i,t=Object.defineProperty;function e(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof uh=="object"&&uh];for(var y=0;y<h.length;++y){var x=h[y];if(x&&x.Math==Math)return x}throw Error("Cannot find global object")}var s=e(this);function o(h,y){if(y)t:{var x=s;h=h.split(".");for(var N=0;N<h.length-1;N++){var q=h[N];if(!(q in x))break t;x=x[q]}h=h[h.length-1],N=x[h],y=y(N),y!=N&&y!=null&&t(x,h,{configurable:!0,writable:!0,value:y})}}o("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(h){return h||function(y){var x=[],N;for(N in y)Object.prototype.hasOwnProperty.call(y,N)&&x.push([N,y[N]]);return x}});var u=u||{},c=this||self;function m(h){var y=typeof h;return y=="object"&&h!=null||y=="function"}function p(h,y,x){return h.call.apply(h.bind,arguments)}function g(h,y,x){return g=p,g.apply(null,arguments)}function v(h,y){var x=Array.prototype.slice.call(arguments,1);return function(){var N=x.slice();return N.push.apply(N,arguments),h.apply(this,N)}}function E(h,y){function x(){}x.prototype=y.prototype,h.Z=y.prototype,h.prototype=new x,h.prototype.constructor=h,h.Ob=function(N,q,Z){for(var pt=Array(arguments.length-2),kt=2;kt<arguments.length;kt++)pt[kt-2]=arguments[kt];return y.prototype[q].apply(N,pt)}}var T=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function I(h){const y=h.length;if(y>0){const x=Array(y);for(let N=0;N<y;N++)x[N]=h[N];return x}return[]}function P(h,y){for(let N=1;N<arguments.length;N++){const q=arguments[N];var x=typeof q;if(x=x!="object"?x:q?Array.isArray(q)?"array":x:"null",x=="array"||x=="object"&&typeof q.length=="number"){x=h.length||0;const Z=q.length||0;h.length=x+Z;for(let pt=0;pt<Z;pt++)h[x+pt]=q[pt]}else h.push(q)}}class B{constructor(y,x){this.i=y,this.j=x,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function X(h){c.setTimeout(()=>{throw h},0)}function ft(){var h=C;let y=null;return h.g&&(y=h.g,h.g=h.g.next,h.g||(h.h=null),y.next=null),y}class ${constructor(){this.h=this.g=null}add(y,x){const N=tt.get();N.set(y,x),this.h?this.h.next=N:this.g=N,this.h=N}}var tt=new B(()=>new nt,h=>h.reset());class nt{constructor(){this.next=this.g=this.h=null}set(y,x){this.h=y,this.g=x,this.next=null}reset(){this.next=this.g=this.h=null}}let mt,ht=!1,C=new $,A=()=>{const h=Promise.resolve(void 0);mt=()=>{h.then(R)}};function R(){for(var h;h=ft();){try{h.h.call(h.g)}catch(x){X(x)}var y=tt;y.j(h),y.h<100&&(y.h++,h.next=y.g,y.g=h)}ht=!1}function V(){this.u=this.u,this.C=this.C}V.prototype.u=!1,V.prototype.dispose=function(){this.u||(this.u=!0,this.N())},V.prototype[Symbol.dispose]=function(){this.dispose()},V.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function M(h,y){this.type=h,this.g=this.target=y,this.defaultPrevented=!1}M.prototype.h=function(){this.defaultPrevented=!0};var D=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var h=!1,y=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const x=()=>{};c.addEventListener("test",x,y),c.removeEventListener("test",x,y)}catch{}return h})();function S(h){return/^[\s\xa0]*$/.test(h)}function ot(h,y){M.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,y)}E(ot,M),ot.prototype.init=function(h,y){const x=this.type=h.type,N=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=y,y=h.relatedTarget,y||(x=="mouseover"?y=h.fromElement:x=="mouseout"&&(y=h.toElement)),this.relatedTarget=y,N?(this.clientX=N.clientX!==void 0?N.clientX:N.pageX,this.clientY=N.clientY!==void 0?N.clientY:N.pageY,this.screenX=N.screenX||0,this.screenY=N.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&ot.Z.h.call(this)},ot.prototype.h=function(){ot.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var F="closure_listenable_"+(Math.random()*1e6|0),j=0;function U(h,y,x,N,q){this.listener=h,this.proxy=null,this.src=y,this.type=x,this.capture=!!N,this.ha=q,this.key=++j,this.da=this.fa=!1}function J(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function Y(h,y,x){for(const N in h)y.call(x,h[N],N,h)}function rt(h,y){for(const x in h)y.call(void 0,h[x],x,h)}function O(h){const y={};for(const x in h)y[x]=h[x];return y}const K="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ut(h,y){let x,N;for(let q=1;q<arguments.length;q++){N=arguments[q];for(x in N)h[x]=N[x];for(let Z=0;Z<K.length;Z++)x=K[Z],Object.prototype.hasOwnProperty.call(N,x)&&(h[x]=N[x])}}function dt(h){this.src=h,this.g={},this.h=0}dt.prototype.add=function(h,y,x,N,q){const Z=h.toString();h=this.g[Z],h||(h=this.g[Z]=[],this.h++);const pt=st(h,y,N,q);return pt>-1?(y=h[pt],x||(y.fa=!1)):(y=new U(y,this.src,Z,!!N,q),y.fa=x,h.push(y)),y};function yt(h,y){const x=y.type;if(x in h.g){var N=h.g[x],q=Array.prototype.indexOf.call(N,y,void 0),Z;(Z=q>=0)&&Array.prototype.splice.call(N,q,1),Z&&(J(y),h.g[x].length==0&&(delete h.g[x],h.h--))}}function st(h,y,x,N){for(let q=0;q<h.length;++q){const Z=h[q];if(!Z.da&&Z.listener==y&&Z.capture==!!x&&Z.ha==N)return q}return-1}var gt="closure_lm_"+(Math.random()*1e6|0),wt={};function St(h,y,x,N,q){if(Array.isArray(y)){for(let Z=0;Z<y.length;Z++)St(h,y[Z],x,N,q);return null}return x=xr(x),h&&h[F]?h.J(y,x,m(N)?!!N.capture:!1,q):ae(h,y,x,!1,N,q)}function ae(h,y,x,N,q,Z){if(!y)throw Error("Invalid event type");const pt=m(q)?!!q.capture:!!q;let kt=ui(h);if(kt||(h[gt]=kt=new dt(h)),x=kt.add(y,x,N,pt,Z),x.proxy)return x;if(N=Dt(),x.proxy=N,N.src=h,N.listener=x,h.addEventListener)D||(q=pt),q===void 0&&(q=!1),h.addEventListener(y.toString(),N,q);else if(h.attachEvent)h.attachEvent(Ve(y.toString()),N);else if(h.addListener&&h.removeListener)h.addListener(N);else throw Error("addEventListener and attachEvent are unavailable.");return x}function Dt(){function h(x){return y.call(h.src,h.listener,x)}const y=$n;return h}function ee(h,y,x,N,q){if(Array.isArray(y))for(var Z=0;Z<y.length;Z++)ee(h,y[Z],x,N,q);else N=m(N)?!!N.capture:!!N,x=xr(x),h&&h[F]?(h=h.i,Z=String(y).toString(),Z in h.g&&(y=h.g[Z],x=st(y,x,N,q),x>-1&&(J(y[x]),Array.prototype.splice.call(y,x,1),y.length==0&&(delete h.g[Z],h.h--)))):h&&(h=ui(h))&&(y=h.g[y.toString()],h=-1,y&&(h=st(y,x,N,q)),(x=h>-1?y[h]:null)&&sn(x))}function sn(h){if(typeof h!="number"&&h&&!h.da){var y=h.src;if(y&&y[F])yt(y.i,h);else{var x=h.type,N=h.proxy;y.removeEventListener?y.removeEventListener(x,N,h.capture):y.detachEvent?y.detachEvent(Ve(x),N):y.addListener&&y.removeListener&&y.removeListener(N),(x=ui(y))?(yt(x,h),x.h==0&&(x.src=null,y[gt]=null)):J(h)}}}function Ve(h){return h in wt?wt[h]:wt[h]="on"+h}function $n(h,y){if(h.da)h=!0;else{y=new ot(y,this);const x=h.listener,N=h.ha||h.src;h.fa&&sn(h),h=x.call(N,y)}return h}function ui(h){return h=h[gt],h instanceof dt?h:null}var Ts="__closure_events_fn_"+(Math.random()*1e9>>>0);function xr(h){return typeof h=="function"?h:(h[Ts]||(h[Ts]=function(y){return h.handleEvent(y)}),h[Ts])}function pe(){V.call(this),this.i=new dt(this),this.M=this,this.G=null}E(pe,V),pe.prototype[F]=!0,pe.prototype.removeEventListener=function(h,y,x,N){ee(this,h,y,x,N)};function ge(h,y){var x,N=h.G;if(N)for(x=[];N;N=N.G)x.push(N);if(h=h.M,N=y.type||y,typeof y=="string")y=new M(y,h);else if(y instanceof M)y.target=y.target||h;else{var q=y;y=new M(N,h),ut(y,q)}q=!0;let Z,pt;if(x)for(pt=x.length-1;pt>=0;pt--)Z=y.g=x[pt],q=Tr(Z,N,!0,y)&&q;if(Z=y.g=h,q=Tr(Z,N,!0,y)&&q,q=Tr(Z,N,!1,y)&&q,x)for(pt=0;pt<x.length;pt++)Z=y.g=x[pt],q=Tr(Z,N,!1,y)&&q}pe.prototype.N=function(){if(pe.Z.N.call(this),this.i){var h=this.i;for(const y in h.g){const x=h.g[y];for(let N=0;N<x.length;N++)J(x[N]);delete h.g[y],h.h--}}this.G=null},pe.prototype.J=function(h,y,x,N){return this.i.add(String(h),y,!1,x,N)},pe.prototype.K=function(h,y,x,N){return this.i.add(String(h),y,!0,x,N)};function Tr(h,y,x,N){if(y=h.i.g[String(y)],!y)return!0;y=y.concat();let q=!0;for(let Z=0;Z<y.length;++Z){const pt=y[Z];if(pt&&!pt.da&&pt.capture==x){const kt=pt.listener,be=pt.ha||pt.src;pt.fa&&yt(h.i,pt),q=kt.call(be,N)!==!1&&q}}return q&&!N.defaultPrevented}function Pf(h,y){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=g(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:c.setTimeout(h,y||0)}function Mu(h){h.g=Pf(()=>{h.g=null,h.i&&(h.i=!1,Mu(h))},h.l);const y=h.h;h.h=null,h.m.apply(null,y)}class an extends V{constructor(y,x){super(),this.m=y,this.l=x,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:Mu(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ws(h){V.call(this),this.h=h,this.g={}}E(ws,V);var Vo=[];function jo(h){Y(h.g,function(y,x){this.g.hasOwnProperty(x)&&sn(y)},h),h.g={}}ws.prototype.N=function(){ws.Z.N.call(this),jo(this)},ws.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var wr=c.JSON.stringify,Uf=c.JSON.parse,ku=class{stringify(h){return c.JSON.stringify(h,void 0)}parse(h){return c.JSON.parse(h,void 0)}};function Vu(){}function ju(){}var Yn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function qe(){M.call(this,"d")}E(qe,M);function Dn(){M.call(this,"c")}E(Dn,M);var ve={},Lu=null;function ya(){return Lu=Lu||new pe}ve.Ia="serverreachability";function Pu(h){M.call(this,ve.Ia,h)}E(Pu,M);function ci(h){const y=ya();ge(y,new Pu(y))}ve.STAT_EVENT="statevent";function Ss(h,y){M.call(this,ve.STAT_EVENT,h),this.stat=y}E(Ss,M);function we(h){const y=ya();ge(y,new Ss(y,h))}ve.Ja="timingevent";function hi(h,y){M.call(this,ve.Ja,h),this.size=y}E(hi,M);function fi(h,y){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){h()},y)}function Qn(){this.g=!0}Qn.prototype.ua=function(){this.g=!1};function zf(h,y,x,N,q,Z){h.info(function(){if(h.g)if(Z){var pt="",kt=Z.split("&");for(let Kt=0;Kt<kt.length;Kt++){var be=kt[Kt].split("=");if(be.length>1){const he=be[0];be=be[1];const Vn=he.split("_");pt=Vn.length>=2&&Vn[1]=="type"?pt+(he+"="+be+"&"):pt+(he+"=redacted&")}}}else pt=null;else pt=Z;return"XMLHTTP REQ ("+N+") [attempt "+q+"]: "+y+`
`+x+`
`+pt})}function Uu(h,y,x,N,q,Z,pt){h.info(function(){return"XMLHTTP RESP ("+N+") [ attempt "+q+"]: "+y+`
`+x+`
`+Z+" "+pt})}function di(h,y,x,N){h.info(function(){return"XMLHTTP TEXT ("+y+"): "+Bf(h,x)+(N?" "+N:"")})}function As(h,y){h.info(function(){return"TIMEOUT: "+y})}Qn.prototype.info=function(){};function Bf(h,y){if(!h.g)return y;if(!y)return null;try{const Z=JSON.parse(y);if(Z){for(h=0;h<Z.length;h++)if(Array.isArray(Z[h])){var x=Z[h];if(!(x.length<2)){var N=x[1];if(Array.isArray(N)&&!(N.length<1)){var q=N[0];if(q!="noop"&&q!="stop"&&q!="close")for(let pt=1;pt<N.length;pt++)N[pt]=""}}}}return wr(Z)}catch{return y}}var Ns={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Lo={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Po;function Cs(){}E(Cs,Vu),Cs.prototype.g=function(){return new XMLHttpRequest},Po=new Cs;function Hi(h){return encodeURIComponent(String(h))}function zu(h){var y=1;h=h.split(":");const x=[];for(;y>0&&h.length;)x.push(h.shift()),y--;return h.length&&x.push(h.join(":")),x}function Kn(h,y,x,N){this.j=h,this.i=y,this.l=x,this.S=N||1,this.V=new ws(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Xn}function Xn(){this.i=null,this.g="",this.h=!1}var Se={},Ue={};function mi(h,y,x){h.M=1,h.A=Rs(Ne(y)),h.u=x,h.R=!0,_a(h,null)}function _a(h,y){h.F=Date.now(),pi(h),h.B=Ne(h.A);var x=h.B,N=h.S;Array.isArray(N)||(N=[String(N)]),xa(x.i,"t",N),h.C=0,x=h.j.L,h.h=new Xn,h.g=ec(h.j,x?y:null,!h.u),h.P>0&&(h.O=new an(g(h.Y,h,h.g),h.P)),y=h.V,x=h.g,N=h.ba;var q="readystatechange";Array.isArray(q)||(q&&(Vo[0]=q.toString()),q=Vo);for(let Z=0;Z<q.length;Z++){const pt=St(x,q[Z],N||y.handleEvent,!1,y.h||y);if(!pt)break;y.g[pt.key]=pt}y=h.J?O(h.J):{},h.u?(h.v||(h.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,y)):(h.v="GET",h.g.ea(h.B,h.v,null,y)),ci(),zf(h.i,h.v,h.B,h.l,h.S,h.u)}Kn.prototype.ba=function(h){h=h.target;const y=this.O;y&&Wn(h)==3?y.j():this.Y(h)},Kn.prototype.Y=function(h){try{if(h==this.g)t:{const kt=Wn(this.g),be=this.g.ya(),Kt=this.g.ca();if(!(kt<3)&&(kt!=3||this.g&&(this.h.h||this.g.la()||He(this.g)))){this.K||kt!=4||be==7||(be==8||Kt<=0?ci(3):ci(2)),gi(this);var y=this.g.ca();this.X=y;var x=Ff(this);if(this.o=y==200,Uu(this.i,this.v,this.B,this.l,this.S,kt,y),this.o){if(this.U&&!this.L){e:{if(this.g){var N,q=this.g;if((N=q.g?q.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!S(N)){var Z=N;break e}}Z=null}if(h=Z)di(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,yi(this,h);else{this.o=!1,this.m=3,we(12),vn(this),On(this);break t}}if(this.R){h=!0;let he;for(;!this.K&&this.C<x.length;)if(he=Fu(this,x),he==Ue){kt==4&&(this.m=4,we(14),h=!1),di(this.i,this.l,null,"[Incomplete Response]");break}else if(he==Se){this.m=4,we(15),di(this.i,this.l,x,"[Invalid Chunk]"),h=!1;break}else di(this.i,this.l,he,null),yi(this,he);if(Bu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),kt!=4||x.length!=0||this.h.h||(this.m=1,we(16),h=!1),this.o=this.o&&h,!h)di(this.i,this.l,x,"[Invalid Chunked Response]"),vn(this),On(this);else if(x.length>0&&!this.W){this.W=!0;var pt=this.j;pt.g==this&&pt.aa&&!pt.P&&(pt.j.info("Great, no buffering proxy detected. Bytes received: "+x.length),Wo(pt),pt.P=!0,we(11))}}else di(this.i,this.l,x,null),yi(this,x);kt==4&&vn(this),this.o&&!this.K&&(kt==4?Zu(this.j,this):(this.o=!1,pi(this)))}else $i(this.g),y==400&&x.indexOf("Unknown SID")>0?(this.m=3,we(12)):(this.m=0,we(13)),vn(this),On(this)}}}catch{}finally{}};function Ff(h){if(!Bu(h))return h.g.la();const y=He(h.g);if(y==="")return"";let x="";const N=y.length,q=Wn(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return vn(h),On(h),"";h.h.i=new c.TextDecoder}for(let Z=0;Z<N;Z++)h.h.h=!0,x+=h.h.i.decode(y[Z],{stream:!(q&&Z==N-1)});return y.length=0,h.h.g+=x,h.C=0,h.h.g}function Bu(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function Fu(h,y){var x=h.C,N=y.indexOf(`
`,x);return N==-1?Ue:(x=Number(y.substring(x,N)),isNaN(x)?Se:(N+=1,N+x>y.length?Ue:(y=y.slice(N,N+x),h.C=N+x,y)))}Kn.prototype.cancel=function(){this.K=!0,vn(this)};function pi(h){h.T=Date.now()+h.H,va(h,h.H)}function va(h,y){if(h.D!=null)throw Error("WatchDog timer not null");h.D=fi(g(h.aa,h),y)}function gi(h){h.D&&(c.clearTimeout(h.D),h.D=null)}Kn.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(As(this.i,this.B),this.M!=2&&(ci(),we(17)),vn(this),this.m=2,On(this)):va(this,this.T-h)};function On(h){h.j.I==0||h.K||Zu(h.j,h)}function vn(h){gi(h);var y=h.O;y&&typeof y.dispose=="function"&&y.dispose(),h.O=null,jo(h.V),h.g&&(y=h.g,h.g=null,y.abort(),y.dispose())}function yi(h,y){try{var x=h.j;if(x.I!=0&&(x.g==h||vi(x.h,h))){if(!h.L&&vi(x.h,h)&&x.I==3){try{var N=x.Ba.g.parse(y)}catch{N=null}if(Array.isArray(N)&&N.length==3){var q=N;if(q[0]==0){t:if(!x.v){if(x.g)if(x.g.F+3e3<h.F)Na(x),Or(x);else break t;js(x),we(18)}}else x.xa=q[1],0<x.xa-x.K&&q[2]<37500&&x.F&&x.A==0&&!x.C&&(x.C=fi(g(x.Va,x),6e3));_i(x.h)<=1&&x.ta&&(x.ta=void 0)}else Si(x,11)}else if((h.L||x.g==h)&&Na(x),!S(y))for(q=x.Ba.g.parse(y),y=0;y<q.length;y++){let Kt=q[y];const he=Kt[0];if(!(he<=x.K))if(x.K=he,Kt=Kt[1],x.I==2)if(Kt[0]=="c"){x.M=Kt[1],x.ba=Kt[2];const Vn=Kt[3];Vn!=null&&(x.ka=Vn,x.j.info("VER="+x.ka));const Ai=Kt[4];Ai!=null&&(x.za=Ai,x.j.info("SVER="+x.za));const ti=Kt[5];ti!=null&&typeof ti=="number"&&ti>0&&(N=1.5*ti,x.O=N,x.j.info("backChannelRequestTimeoutMs_="+N)),N=x;const ei=h.g;if(ei){const Ls=ei.g?ei.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ls){var Z=N.h;Z.g||Ls.indexOf("spdy")==-1&&Ls.indexOf("quic")==-1&&Ls.indexOf("h2")==-1||(Z.j=Z.l,Z.g=new Set,Z.h&&(Bo(Z,Z.h),Z.h=null))}if(N.G){const Ca=ei.g?ei.g.getResponseHeader("X-HTTP-Session-Id"):null;Ca&&(N.wa=Ca,Jt(N.J,N.G,Ca))}}x.I=3,x.l&&x.l.ra(),x.aa&&(x.T=Date.now()-h.F,x.j.info("Handshake RTT: "+x.T+"ms")),N=x;var pt=h;if(N.na=tc(N,N.L?N.ba:null,N.W),pt.L){Fo(N.h,pt);var kt=pt,be=N.O;be&&(kt.H=be),kt.D&&(gi(kt),pi(kt)),N.g=pt}else Ku(N);x.i.length>0&&wi(x)}else Kt[0]!="stop"&&Kt[0]!="close"||Si(x,7);else x.I==3&&(Kt[0]=="stop"||Kt[0]=="close"?Kt[0]=="stop"?Si(x,7):Zo(x):Kt[0]!="noop"&&x.l&&x.l.qa(Kt),x.A=0)}}ci(4)}catch{}}var Ae=class{constructor(h,y){this.g=h,this.map=y}};function Uo(h){this.l=h||10,c.PerformanceNavigationTiming?(h=c.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function zo(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function _i(h){return h.h?1:h.g?h.g.size:0}function vi(h,y){return h.h?h.h==y:h.g?h.g.has(y):!1}function Bo(h,y){h.g?h.g.add(y):h.h=y}function Fo(h,y){h.h&&h.h==y?h.h=null:h.g&&h.g.has(y)&&h.g.delete(y)}Uo.prototype.cancel=function(){if(this.i=qo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function qo(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let y=h.i;for(const x of h.g.values())y=y.concat(x.G);return y}return I(h.i)}var qu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ba(h,y){if(h){h=h.split("&");for(let x=0;x<h.length;x++){const N=h[x].indexOf("=");let q,Z=null;N>=0?(q=h[x].substring(0,N),Z=h[x].substring(N+1)):q=h[x],y(q,Z?decodeURIComponent(Z.replace(/\+/g," ")):"")}}}function bn(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;h instanceof bn?(this.l=h.l,ze(this,h.j),this.o=h.o,this.g=h.g,Sr(this,h.u),this.h=h.h,Ho(this,Yu(h.i)),this.m=h.m):h&&(y=String(h).match(qu))?(this.l=!1,ze(this,y[1]||"",!0),this.o=bi(y[2]||""),this.g=bi(y[3]||"",!0),Sr(this,y[4]),this.h=bi(y[5]||"",!0),Ho(this,y[6]||"",!0),this.m=bi(y[7]||"")):(this.l=!1,this.i=new Nr(null,this.l))}bn.prototype.toString=function(){const h=[];var y=this.j;y&&h.push(Is(y,Ea,!0),":");var x=this.g;return(x||y=="file")&&(h.push("//"),(y=this.o)&&h.push(Is(y,Ea,!0),"@"),h.push(Hi(x).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),x=this.u,x!=null&&h.push(":",String(x))),(x=this.h)&&(this.g&&x.charAt(0)!="/"&&h.push("/"),h.push(Is(x,x.charAt(0)=="/"?Go:Hu,!0))),(x=this.i.toString())&&h.push("?",x),(x=this.m)&&h.push("#",Is(x,Gu)),h.join("")},bn.prototype.resolve=function(h){const y=Ne(this);let x=!!h.j;x?ze(y,h.j):x=!!h.o,x?y.o=h.o:x=!!h.g,x?y.g=h.g:x=h.u!=null;var N=h.h;if(x)Sr(y,h.u);else if(x=!!h.h){if(N.charAt(0)!="/")if(this.g&&!this.h)N="/"+N;else{var q=y.h.lastIndexOf("/");q!=-1&&(N=y.h.slice(0,q+1)+N)}if(q=N,q==".."||q==".")N="";else if(q.indexOf("./")!=-1||q.indexOf("/.")!=-1){N=q.lastIndexOf("/",0)==0,q=q.split("/");const Z=[];for(let pt=0;pt<q.length;){const kt=q[pt++];kt=="."?N&&pt==q.length&&Z.push(""):kt==".."?((Z.length>1||Z.length==1&&Z[0]!="")&&Z.pop(),N&&pt==q.length&&Z.push("")):(Z.push(kt),N=!0)}N=Z.join("/")}else N=q}return x?y.h=N:x=h.i.toString()!=="",x?Ho(y,Yu(h.i)):x=!!h.m,x&&(y.m=h.m),y};function Ne(h){return new bn(h)}function ze(h,y,x){h.j=x?bi(y,!0):y,h.j&&(h.j=h.j.replace(/:$/,""))}function Sr(h,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);h.u=y}else h.u=null}function Ho(h,y,x){y instanceof Nr?(h.i=y,Ta(h.i,h.l)):(x||(y=Is(y,Ar)),h.i=new Nr(y,h.l))}function Jt(h,y,x){h.i.set(y,x)}function Rs(h){return Jt(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function bi(h,y){return h?y?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Is(h,y,x){return typeof h=="string"?(h=encodeURI(h).replace(y,un),x&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function un(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Ea=/[#\/\?@]/g,Hu=/[#\?:]/g,Go=/[#\?]/g,Ar=/[#\?@]/g,Gu=/#/g;function Nr(h,y){this.h=this.g=null,this.i=h||null,this.j=!!y}function cn(h){h.g||(h.g=new Map,h.h=0,h.i&&ba(h.i,function(y,x){h.add(decodeURIComponent(y.replace(/\+/g," ")),x)}))}i=Nr.prototype,i.add=function(h,y){cn(this),this.i=null,h=Cr(this,h);let x=this.g.get(h);return x||this.g.set(h,x=[]),x.push(y),this.h+=1,this};function $u(h,y){cn(h),y=Cr(h,y),h.g.has(y)&&(h.i=null,h.h-=h.g.get(y).length,h.g.delete(y))}function $o(h,y){return cn(h),y=Cr(h,y),h.g.has(y)}i.forEach=function(h,y){cn(this),this.g.forEach(function(x,N){x.forEach(function(q){h.call(y,q,N,this)},this)},this)};function Yo(h,y){cn(h);let x=[];if(typeof y=="string")$o(h,y)&&(x=x.concat(h.g.get(Cr(h,y))));else for(h=Array.from(h.g.values()),y=0;y<h.length;y++)x=x.concat(h[y]);return x}i.set=function(h,y){return cn(this),this.i=null,h=Cr(this,h),$o(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[y]),this.h+=1,this},i.get=function(h,y){return h?(h=Yo(this,h),h.length>0?String(h[0]):y):y};function xa(h,y,x){$u(h,y),x.length>0&&(h.i=null,h.g.set(Cr(h,y),I(x)),h.h+=x.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],y=Array.from(this.g.keys());for(let N=0;N<y.length;N++){var x=y[N];const q=Hi(x);x=Yo(this,x);for(let Z=0;Z<x.length;Z++){let pt=q;x[Z]!==""&&(pt+="="+Hi(x[Z])),h.push(pt)}}return this.i=h.join("&")};function Yu(h){const y=new Nr;return y.i=h.i,h.g&&(y.g=new Map(h.g),y.h=h.h),y}function Cr(h,y){return y=String(y),h.j&&(y=y.toLowerCase()),y}function Ta(h,y){y&&!h.j&&(cn(h),h.i=null,h.g.forEach(function(x,N){const q=N.toLowerCase();N!=q&&($u(this,N),xa(this,q,x))},h)),h.j=y}function Zn(h,y){const x=new Qn;if(c.Image){const N=new Image;N.onload=v(Mn,x,"TestLoadImage: loaded",!0,y,N),N.onerror=v(Mn,x,"TestLoadImage: error",!1,y,N),N.onabort=v(Mn,x,"TestLoadImage: abort",!1,y,N),N.ontimeout=v(Mn,x,"TestLoadImage: timeout",!1,y,N),c.setTimeout(function(){N.ontimeout&&N.ontimeout()},1e4),N.src=h}else y(!1)}function Qo(h,y){const x=new Qn,N=new AbortController,q=setTimeout(()=>{N.abort(),Mn(x,"TestPingServer: timeout",!1,y)},1e4);fetch(h,{signal:N.signal}).then(Z=>{clearTimeout(q),Z.ok?Mn(x,"TestPingServer: ok",!0,y):Mn(x,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(q),Mn(x,"TestPingServer: error",!1,y)})}function Mn(h,y,x,N,q){try{q&&(q.onload=null,q.onerror=null,q.onabort=null,q.ontimeout=null),N(x)}catch{}}function Rr(){this.g=new ku}function Ei(h){this.i=h.Sb||null,this.h=h.ab||!1}E(Ei,Vu),Ei.prototype.g=function(){return new Ds(this.i,this.h)};function Ds(h,y){pe.call(this),this.H=h,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}E(Ds,pe),i=Ds.prototype,i.open=function(h,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=y,this.readyState=1,Jn(this)},i.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(y.body=h),(this.H||c).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ir(this)),this.readyState=0},i.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Jn(this)),this.g&&(this.readyState=3,Jn(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;wa(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function wa(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}i.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var y=h.value?h.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!h.done}))&&(this.response=this.responseText+=y)}h.done?Ir(this):Jn(this),this.readyState==3&&wa(this)}},i.Oa=function(h){this.g&&(this.response=this.responseText=h,Ir(this))},i.Na=function(h){this.g&&(this.response=h,Ir(this))},i.ga=function(){this.g&&Ir(this)};function Ir(h){h.readyState=4,h.l=null,h.j=null,h.B=null,Jn(h)}i.setRequestHeader=function(h,y){this.A.append(h,y)},i.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],y=this.h.entries();for(var x=y.next();!x.done;)x=x.value,h.push(x[0]+": "+x[1]),x=y.next();return h.join(`\r
`)};function Jn(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Ds.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function kn(h){let y="";return Y(h,function(x,N){y+=N,y+=":",y+=x,y+=`\r
`}),y}function Os(h,y,x){t:{for(N in x){var N=!1;break t}N=!0}N||(x=kn(x),typeof h=="string"?x!=null&&Hi(x):Jt(h,y,x))}function ne(h){pe.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}E(ne,pe);var xi=/^https?$/i,Ko=["POST","PUT"];i=ne.prototype,i.Fa=function(h){this.H=h},i.ea=function(h,y,x,N){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);y=y?y.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Po.g(),this.g.onreadystatechange=T(g(this.Ca,this));try{this.B=!0,this.g.open(y,String(h),!0),this.B=!1}catch(Z){Ms(this,Z);return}if(h=x||"",x=new Map(this.headers),N)if(Object.getPrototypeOf(N)===Object.prototype)for(var q in N)x.set(q,N[q]);else if(typeof N.keys=="function"&&typeof N.get=="function")for(const Z of N.keys())x.set(Z,N.get(Z));else throw Error("Unknown input type for opt_headers: "+String(N));N=Array.from(x.keys()).find(Z=>Z.toLowerCase()=="content-type"),q=c.FormData&&h instanceof c.FormData,!(Array.prototype.indexOf.call(Ko,y,void 0)>=0)||N||q||x.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Z,pt]of x)this.g.setRequestHeader(Z,pt);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(Z){Ms(this,Z)}};function Ms(h,y){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=y,h.o=5,Xo(h),Gi(h)}function Xo(h){h.A||(h.A=!0,ge(h,"complete"),ge(h,"error"))}i.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,ge(this,"complete"),ge(this,"abort"),Gi(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Gi(this,!0)),ne.Z.N.call(this)},i.Ca=function(){this.u||(this.B||this.v||this.j?ks(this):this.Xa())},i.Xa=function(){ks(this)};function ks(h){if(h.h&&typeof u<"u"){if(h.v&&Wn(h)==4)setTimeout(h.Ca.bind(h),0);else if(ge(h,"readystatechange"),Wn(h)==4){h.h=!1;try{const Z=h.ca();t:switch(Z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break t;default:y=!1}var x;if(!(x=y)){var N;if(N=Z===0){let pt=String(h.D).match(qu)[1]||null;!pt&&c.self&&c.self.location&&(pt=c.self.location.protocol.slice(0,-1)),N=!xi.test(pt?pt.toLowerCase():"")}x=N}if(x)ge(h,"complete"),ge(h,"success");else{h.o=6;try{var q=Wn(h)>2?h.g.statusText:""}catch{q=""}h.l=q+" ["+h.ca()+"]",Xo(h)}}finally{Gi(h)}}}}function Gi(h,y){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const x=h.g;h.g=null,y||ge(h,"ready");try{x.onreadystatechange=null}catch{}}}i.isActive=function(){return!!this.g};function Wn(h){return h.g?h.g.readyState:0}i.ca=function(){try{return Wn(this)>2?this.g.status:-1}catch{return-1}},i.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.La=function(h){if(this.g){var y=this.g.responseText;return h&&y.indexOf(h)==0&&(y=y.substring(h.length)),Uf(y)}};function He(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function $i(h){const y={};h=(h.g&&Wn(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let N=0;N<h.length;N++){if(S(h[N]))continue;var x=zu(h[N]);const q=x[0];if(x=x[1],typeof x!="string")continue;x=x.trim();const Z=y[q]||[];y[q]=Z,Z.push(x)}rt(y,function(N){return N.join(", ")})}i.ya=function(){return this.o},i.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ti(h,y,x){return x&&x.internalChannelParams&&x.internalChannelParams[h]||y}function Dr(h){this.za=0,this.i=[],this.j=new Qn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ti("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ti("baseRetryDelayMs",5e3,h),this.Za=Ti("retryDelaySeedMs",1e4,h),this.Ta=Ti("forwardChannelMaxRetries",2,h),this.va=Ti("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new Uo(h&&h.concurrentRequestLimit),this.Ba=new Rr,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}i=Dr.prototype,i.ka=8,i.I=1,i.connect=function(h,y,x,N){we(0),this.W=h,this.H=y||{},x&&N!==void 0&&(this.H.OSID=x,this.H.OAID=N),this.F=this.X,this.J=tc(this,null,this.W),wi(this)};function Zo(h){if(Sa(h),h.I==3){var y=h.V++,x=Ne(h.J);if(Jt(x,"SID",h.M),Jt(x,"RID",y),Jt(x,"TYPE","terminate"),Vs(h,x),y=new Kn(h,h.j,y),y.M=2,y.A=Rs(Ne(x)),x=!1,c.navigator&&c.navigator.sendBeacon)try{x=c.navigator.sendBeacon(y.A.toString(),"")}catch{}!x&&c.Image&&(new Image().src=y.A,x=!0),x||(y.g=ec(y.j,null),y.g.ea(y.A)),y.F=Date.now(),pi(y)}Wu(h)}function Or(h){h.g&&(Wo(h),h.g.cancel(),h.g=null)}function Sa(h){Or(h),h.v&&(c.clearTimeout(h.v),h.v=null),Na(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&c.clearTimeout(h.m),h.m=null)}function wi(h){if(!zo(h.h)&&!h.m){h.m=!0;var y=h.Ea;mt||A(),ht||(mt(),ht=!0),C.add(y,h),h.D=0}}function Aa(h,y){return _i(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=y.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=fi(g(h.Ea,h,y),Ju(h,h.D)),h.D++,!0)}i.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const q=new Kn(this,this.j,h);let Z=this.o;if(this.U&&(Z?(Z=O(Z),ut(Z,this.U)):Z=this.U),this.u!==null||this.R||(q.J=Z,Z=null),this.S)t:{for(var y=0,x=0;x<this.i.length;x++){e:{var N=this.i[x];if("__data__"in N.map&&(N=N.map.__data__,typeof N=="string")){N=N.length;break e}N=void 0}if(N===void 0)break;if(y+=N,y>4096){y=x;break t}if(y===4096||x===this.i.length-1){y=x+1;break t}}y=1e3}else y=1e3;y=Qu(this,q,y),x=Ne(this.J),Jt(x,"RID",h),Jt(x,"CVER",22),this.G&&Jt(x,"X-HTTP-Session-Id",this.G),Vs(this,x),Z&&(this.R?y="headers="+Hi(kn(Z))+"&"+y:this.u&&Os(x,this.u,Z)),Bo(this.h,q),this.Ra&&Jt(x,"TYPE","init"),this.S?(Jt(x,"$req",y),Jt(x,"SID","null"),q.U=!0,mi(q,x,null)):mi(q,x,y),this.I=2}}else this.I==3&&(h?Jo(this,h):this.i.length==0||zo(this.h)||Jo(this))};function Jo(h,y){var x;y?x=y.l:x=h.V++;const N=Ne(h.J);Jt(N,"SID",h.M),Jt(N,"RID",x),Jt(N,"AID",h.K),Vs(h,N),h.u&&h.o&&Os(N,h.u,h.o),x=new Kn(h,h.j,x,h.D+1),h.u===null&&(x.J=h.o),y&&(h.i=y.G.concat(h.i)),y=Qu(h,x,1e3),x.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),Bo(h.h,x),mi(x,N,y)}function Vs(h,y){h.H&&Y(h.H,function(x,N){Jt(y,N,x)}),h.l&&Y({},function(x,N){Jt(y,N,x)})}function Qu(h,y,x){x=Math.min(h.i.length,x);const N=h.l?g(h.l.Ka,h.l,h):null;t:{var q=h.i;let kt=-1;for(;;){const be=["count="+x];kt==-1?x>0?(kt=q[0].g,be.push("ofs="+kt)):kt=0:be.push("ofs="+kt);let Kt=!0;for(let he=0;he<x;he++){var Z=q[he].g;const Vn=q[he].map;if(Z-=kt,Z<0)kt=Math.max(0,q[he].g-100),Kt=!1;else try{Z="req"+Z+"_"||"";try{var pt=Vn instanceof Map?Vn:Object.entries(Vn);for(const[Ai,ti]of pt){let ei=ti;m(ti)&&(ei=wr(ti)),be.push(Z+Ai+"="+encodeURIComponent(ei))}}catch(Ai){throw be.push(Z+"type="+encodeURIComponent("_badmap")),Ai}}catch{N&&N(Vn)}}if(Kt){pt=be.join("&");break t}}pt=void 0}return h=h.i.splice(0,x),y.G=h,pt}function Ku(h){if(!h.g&&!h.v){h.Y=1;var y=h.Da;mt||A(),ht||(mt(),ht=!0),C.add(y,h),h.A=0}}function js(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=fi(g(h.Da,h),Ju(h,h.A)),h.A++,!0)}i.Da=function(){if(this.v=null,Xu(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=fi(g(this.Wa,this),h)}},i.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,we(10),Or(this),Xu(this))};function Wo(h){h.B!=null&&(c.clearTimeout(h.B),h.B=null)}function Xu(h){h.g=new Kn(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var y=Ne(h.na);Jt(y,"RID","rpc"),Jt(y,"SID",h.M),Jt(y,"AID",h.K),Jt(y,"CI",h.F?"0":"1"),!h.F&&h.ia&&Jt(y,"TO",h.ia),Jt(y,"TYPE","xmlhttp"),Vs(h,y),h.u&&h.o&&Os(y,h.u,h.o),h.O&&(h.g.H=h.O);var x=h.g;h=h.ba,x.M=1,x.A=Rs(Ne(y)),x.u=null,x.R=!0,_a(x,h)}i.Va=function(){this.C!=null&&(this.C=null,Or(this),js(this),we(19))};function Na(h){h.C!=null&&(c.clearTimeout(h.C),h.C=null)}function Zu(h,y){var x=null;if(h.g==y){Na(h),Wo(h),h.g=null;var N=2}else if(vi(h.h,y))x=y.G,Fo(h.h,y),N=1;else return;if(h.I!=0){if(y.o)if(N==1){x=y.u?y.u.length:0,y=Date.now()-y.F;var q=h.D;N=ya(),ge(N,new hi(N,x)),wi(h)}else Ku(h);else if(q=y.m,q==3||q==0&&y.X>0||!(N==1&&Aa(h,y)||N==2&&js(h)))switch(x&&x.length>0&&(y=h.h,y.i=y.i.concat(x)),q){case 1:Si(h,5);break;case 4:Si(h,10);break;case 3:Si(h,6);break;default:Si(h,2)}}}function Ju(h,y){let x=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(x*=2),x*y}function Si(h,y){if(h.j.info("Error code "+y),y==2){var x=g(h.bb,h),N=h.Ua;const q=!N;N=new bn(N||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||ze(N,"https"),Rs(N),q?Zn(N.toString(),x):Qo(N.toString(),x)}else we(2);h.I=0,h.l&&h.l.pa(y),Wu(h),Sa(h)}i.bb=function(h){h?(this.j.info("Successfully pinged google.com"),we(2)):(this.j.info("Failed to ping google.com"),we(1))};function Wu(h){if(h.I=0,h.ja=[],h.l){const y=qo(h.h);(y.length!=0||h.i.length!=0)&&(P(h.ja,y),P(h.ja,h.i),h.h.i.length=0,I(h.i),h.i.length=0),h.l.oa()}}function tc(h,y,x){var N=x instanceof bn?Ne(x):new bn(x);if(N.g!="")y&&(N.g=y+"."+N.g),Sr(N,N.u);else{var q=c.location;N=q.protocol,y=y?y+"."+q.hostname:q.hostname,q=+q.port;const Z=new bn(null);N&&ze(Z,N),y&&(Z.g=y),q&&Sr(Z,q),x&&(Z.h=x),N=Z}return x=h.G,y=h.wa,x&&y&&Jt(N,x,y),Jt(N,"VER",h.ka),Vs(h,N),N}function ec(h,y,x){if(y&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=h.Aa&&!h.ma?new ne(new Ei({ab:x})):new ne(h.ma),y.Fa(h.L),y}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function nc(){}i=nc.prototype,i.ra=function(){},i.qa=function(){},i.pa=function(){},i.oa=function(){},i.isActive=function(){return!0},i.Ka=function(){};function Mr(){}Mr.prototype.g=function(h,y){return new on(h,y)};function on(h,y){pe.call(this),this.g=new Dr(y),this.l=h,this.h=y&&y.messageUrlParams||null,h=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(h?h["X-WebChannel-Content-Type"]=y.messageContentType:h={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(h?h["X-WebChannel-Client-Profile"]=y.sa:h={"X-WebChannel-Client-Profile":y.sa}),this.g.U=h,(h=y&&y.Qb)&&!S(h)&&(this.g.u=h),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!S(y)&&(this.g.G=y,h=this.h,h!==null&&y in h&&(h=this.h,y in h&&delete h[y])),this.j=new Yi(this)}E(on,pe),on.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},on.prototype.close=function(){Zo(this.g)},on.prototype.o=function(h){var y=this.g;if(typeof h=="string"){var x={};x.__data__=h,h=x}else this.v&&(x={},x.__data__=wr(h),h=x);y.i.push(new Ae(y.Ya++,h)),y.I==3&&wi(y)},on.prototype.N=function(){this.g.l=null,delete this.j,Zo(this.g),delete this.g,on.Z.N.call(this)};function ic(h){qe.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var y=h.__sm__;if(y){t:{for(const x in y){h=x;break t}h=void 0}(this.i=h)&&(h=this.i,y=y!==null&&h in y?y[h]:void 0),this.data=y}else this.data=h}E(ic,qe);function rc(){Dn.call(this),this.status=1}E(rc,Dn);function Yi(h){this.g=h}E(Yi,nc),Yi.prototype.ra=function(){ge(this.g,"a")},Yi.prototype.qa=function(h){ge(this.g,new ic(h))},Yi.prototype.pa=function(h){ge(this.g,new rc)},Yi.prototype.oa=function(){ge(this.g,"b")},Mr.prototype.createWebChannel=Mr.prototype.g,on.prototype.send=on.prototype.o,on.prototype.open=on.prototype.m,on.prototype.close=on.prototype.close,Cx=function(){return new Mr},Nx=function(){return ya()},Ax=ve,vp={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ns.NO_ERROR=0,Ns.TIMEOUT=8,Ns.HTTP_ERROR=6,Sh=Ns,Lo.COMPLETE="complete",Sx=Lo,ju.EventType=Yn,Yn.OPEN="a",Yn.CLOSE="b",Yn.ERROR="c",Yn.MESSAGE="d",pe.prototype.listen=pe.prototype.J,Gl=ju,ne.prototype.listenOnce=ne.prototype.K,ne.prototype.getLastError=ne.prototype.Ha,ne.prototype.getLastErrorCode=ne.prototype.ya,ne.prototype.getStatus=ne.prototype.ca,ne.prototype.getResponseJson=ne.prototype.La,ne.prototype.getResponseText=ne.prototype.la,ne.prototype.send=ne.prototype.ea,ne.prototype.setWithCredentials=ne.prototype.Fa,wx=ne}).apply(typeof uh<"u"?uh:typeof self<"u"?self:typeof window<"u"?window:{});const eb="@firebase/firestore",nb="4.9.3";class en{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}en.UNAUTHENTICATED=new en(null),en.GOOGLE_CREDENTIALS=new en("google-credentials-uid"),en.FIRST_PARTY=new en("first-party-uid"),en.MOCK_USER=new en("mock-user");let Do="12.7.0";const fa=new Jp("@firebase/firestore");function ro(){return fa.logLevel}function _t(i,...t){if(fa.logLevel<=Ft.DEBUG){const e=t.map(ug);fa.debug(`Firestore (${Do}): ${i}`,...e)}}function gr(i,...t){if(fa.logLevel<=Ft.ERROR){const e=t.map(ug);fa.error(`Firestore (${Do}): ${i}`,...e)}}function vo(i,...t){if(fa.logLevel<=Ft.WARN){const e=t.map(ug);fa.warn(`Firestore (${Do}): ${i}`,...e)}}function ug(i){if(typeof i=="string")return i;try{return(function(e){return JSON.stringify(e)})(i)}catch{return i}}function Rt(i,t,e){let s="Unexpected state";typeof t=="string"?s=t:e=t,Rx(i,s,e)}function Rx(i,t,e){let s=`FIRESTORE (${Do}) INTERNAL ASSERTION FAILED: ${t} (ID: ${i.toString(16)})`;if(e!==void 0)try{s+=" CONTEXT: "+JSON.stringify(e)}catch{s+=" CONTEXT: "+e}throw gr(s),new Error(s)}function Zt(i,t,e,s){let o="Unexpected state";typeof e=="string"?o=e:s=e,i||Rx(t,o,s)}function Mt(i,t){return i}const ct={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Et extends vr{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class ds{constructor(){this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}}class Ix{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class RC{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable((()=>e(en.UNAUTHENTICATED)))}shutdown(){}}class IC{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable((()=>e(this.token.user)))}shutdown(){this.changeListener=null}}class DC{constructor(t){this.t=t,this.currentUser=en.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){Zt(this.o===void 0,42304);let s=this.i;const o=p=>this.i!==s?(s=this.i,e(p)):Promise.resolve();let u=new ds;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new ds,t.enqueueRetryable((()=>o(this.currentUser)))};const c=()=>{const p=u;t.enqueueRetryable((async()=>{await p.promise,await o(this.currentUser)}))},m=p=>{_t("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((p=>m(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?m(p):(_t("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new ds)}}),0),c()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then((s=>this.i!==t?(_t("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Zt(typeof s.accessToken=="string",31837,{l:s}),new Ix(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return Zt(t===null||typeof t=="string",2055,{h:t}),new en(t)}}class OC{constructor(t,e,s){this.P=t,this.T=e,this.I=s,this.type="FirstParty",this.user=en.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class MC{constructor(t,e,s){this.P=t,this.T=e,this.I=s}getToken(){return Promise.resolve(new OC(this.P,this.T,this.I))}start(t,e){t.enqueueRetryable((()=>e(en.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class ib{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class kC{constructor(t,e){this.V=e,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Hn(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,e){Zt(this.o===void 0,3512);const s=u=>{u.error!=null&&_t("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const c=u.token!==this.m;return this.m=u.token,_t("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?e(u.token):Promise.resolve()};this.o=u=>{t.enqueueRetryable((()=>s(u)))};const o=u=>{_t("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>o(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?o(u):_t("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new ib(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((e=>e?(Zt(typeof e.token=="string",44558,{tokenResult:e}),this.m=e.token,new ib(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function VC(i){const t=typeof self<"u"&&(self.crypto||self.msCrypto),e=new Uint8Array(i);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(e);else for(let s=0;s<i;s++)e[s]=Math.floor(256*Math.random());return e}class cg{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=VC(40);for(let u=0;u<o.length;++u)s.length<20&&o[u]<e&&(s+=t.charAt(o[u]%62))}return s}}function qt(i,t){return i<t?-1:i>t?1:0}function bp(i,t){const e=Math.min(i.length,t.length);for(let s=0;s<e;s++){const o=i.charAt(s),u=t.charAt(s);if(o!==u)return Km(o)===Km(u)?qt(o,u):Km(o)?1:-1}return qt(i.length,t.length)}const jC=55296,LC=57343;function Km(i){const t=i.charCodeAt(0);return t>=jC&&t<=LC}function bo(i,t,e){return i.length===t.length&&i.every(((s,o)=>e(s,t[o])))}const rb="__name__";class Di{constructor(t,e,s){e===void 0?e=0:e>t.length&&Rt(637,{offset:e,range:t.length}),s===void 0?s=t.length-e:s>t.length-e&&Rt(1746,{length:s,range:t.length-e}),this.segments=t,this.offset=e,this.len=s}get length(){return this.len}isEqual(t){return Di.comparator(this,t)===0}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof Di?t.forEach((s=>{e.push(s)})):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,s=this.limit();e<s;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const s=Math.min(t.length,e.length);for(let o=0;o<s;o++){const u=Di.compareSegments(t.get(o),e.get(o));if(u!==0)return u}return qt(t.length,e.length)}static compareSegments(t,e){const s=Di.isNumericId(t),o=Di.isNumericId(e);return s&&!o?-1:!s&&o?1:s&&o?Di.extractNumericId(t).compare(Di.extractNumericId(e)):bp(t,e)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return fs.fromString(t.substring(4,t.length-2))}}class de extends Di{construct(t,e,s){return new de(t,e,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const e=[];for(const s of t){if(s.indexOf("//")>=0)throw new Et(ct.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);e.push(...s.split("/").filter((o=>o.length>0)))}return new de(e)}static emptyPath(){return new de([])}}const PC=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Xe extends Di{construct(t,e,s){return new Xe(t,e,s)}static isValidIdentifier(t){return PC.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Xe.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===rb}static keyField(){return new Xe([rb])}static fromServerFormat(t){const e=[];let s="",o=0;const u=()=>{if(s.length===0)throw new Et(ct.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(s),s=""};let c=!1;for(;o<t.length;){const m=t[o];if(m==="\\"){if(o+1===t.length)throw new Et(ct.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const p=t[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new Et(ct.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);s+=p,o+=2}else m==="`"?(c=!c,o++):m!=="."||c?(s+=m,o++):(u(),o++)}if(u(),c)throw new Et(ct.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Xe(e)}static emptyPath(){return new Xe([])}}class At{constructor(t){this.path=t}static fromPath(t){return new At(de.fromString(t))}static fromName(t){return new At(de.fromString(t).popFirst(5))}static empty(){return new At(de.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&de.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,e){return de.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new At(new de(t.slice()))}}function UC(i,t,e){if(!e)throw new Et(ct.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${t}.`)}function zC(i,t,e,s){if(t===!0&&s===!0)throw new Et(ct.INVALID_ARGUMENT,`${i} and ${e} cannot be used together.`)}function sb(i){if(!At.isDocumentKey(i))throw new Et(ct.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function Dx(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}function hg(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const t=(function(s){return s.constructor?s.constructor.name:null})(i);return t?`a custom ${t} object`:"an object"}}return typeof i=="function"?"a function":Rt(12329,{type:typeof i})}function ki(i,t){if("_delegate"in i&&(i=i._delegate),!(i instanceof t)){if(t.name===i.constructor.name)throw new Et(ct.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const e=hg(i);throw new Et(ct.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return i}function Me(i,t){const e={typeString:i};return t&&(e.value=t),e}function Au(i,t){if(!Dx(i))throw new Et(ct.INVALID_ARGUMENT,"JSON must be an object");let e;for(const s in t)if(t[s]){const o=t[s].typeString,u="value"in t[s]?{value:t[s].value}:void 0;if(!(s in i)){e=`JSON missing required field: '${s}'`;break}const c=i[s];if(o&&typeof c!==o){e=`JSON field '${s}' must be a ${o}.`;break}if(u!==void 0&&c!==u.value){e=`Expected '${s}' field to equal '${u.value}'`;break}}if(e)throw new Et(ct.INVALID_ARGUMENT,e);return!0}const ab=-62135596800,ob=1e6;class ce{static now(){return ce.fromMillis(Date.now())}static fromDate(t){return ce.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),s=Math.floor((t-1e3*e)*ob);return new ce(e,s)}constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Et(ct.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Et(ct.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<ab)throw new Et(ct.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Et(ct.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/ob}_compareTo(t){return this.seconds===t.seconds?qt(this.nanoseconds,t.nanoseconds):qt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ce._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(Au(t,ce._jsonSchema))return new ce(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-ab;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ce._jsonSchemaVersion="firestore/timestamp/1.0",ce._jsonSchema={type:Me("string",ce._jsonSchemaVersion),seconds:Me("number"),nanoseconds:Me("number")};class It{static fromTimestamp(t){return new It(t)}static min(){return new It(new ce(0,0))}static max(){return new It(new ce(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const lu=-1;function BC(i,t){const e=i.toTimestamp().seconds,s=i.toTimestamp().nanoseconds+1,o=It.fromTimestamp(s===1e9?new ce(e+1,0):new ce(e,s));return new ms(o,At.empty(),t)}function FC(i){return new ms(i.readTime,i.key,lu)}class ms{constructor(t,e,s){this.readTime=t,this.documentKey=e,this.largestBatchId=s}static min(){return new ms(It.min(),At.empty(),lu)}static max(){return new ms(It.max(),At.empty(),lu)}}function qC(i,t){let e=i.readTime.compareTo(t.readTime);return e!==0?e:(e=At.comparator(i.documentKey,t.documentKey),e!==0?e:qt(i.largestBatchId,t.largestBatchId))}const HC="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class GC{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}async function Oo(i){if(i.code!==ct.FAILED_PRECONDITION||i.message!==HC)throw i;_t("LocalStore","Unexpectedly lost primary lease")}class lt{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&Rt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new lt(((s,o)=>{this.nextCallback=u=>{this.wrapSuccess(t,u).next(s,o)},this.catchCallback=u=>{this.wrapFailure(e,u).next(s,o)}}))}toPromise(){return new Promise(((t,e)=>{this.next(t,e)}))}wrapUserFunction(t){try{const e=t();return e instanceof lt?e:lt.resolve(e)}catch(e){return lt.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction((()=>t(e))):lt.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction((()=>t(e))):lt.reject(e)}static resolve(t){return new lt(((e,s)=>{e(t)}))}static reject(t){return new lt(((e,s)=>{s(t)}))}static waitFor(t){return new lt(((e,s)=>{let o=0,u=0,c=!1;t.forEach((m=>{++o,m.next((()=>{++u,c&&u===o&&e()}),(p=>s(p)))})),c=!0,u===o&&e()}))}static or(t){let e=lt.resolve(!1);for(const s of t)e=e.next((o=>o?lt.resolve(o):s()));return e}static forEach(t,e){const s=[];return t.forEach(((o,u)=>{s.push(e.call(this,o,u))})),this.waitFor(s)}static mapArray(t,e){return new lt(((s,o)=>{const u=t.length,c=new Array(u);let m=0;for(let p=0;p<u;p++){const g=p;e(t[g]).next((v=>{c[g]=v,++m,m===u&&s(c)}),(v=>o(v)))}}))}static doWhile(t,e){return new lt(((s,o)=>{const u=()=>{t()===!0?e().next((()=>{u()}),o):s()};u()}))}}function $C(i){const t=i.match(/Android ([\d.]+)/i),e=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(e)}function Mo(i){return i.name==="IndexedDbTransactionError"}class pf{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>e.writeSequenceNumber(s))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}pf.ce=-1;const fg=-1;function gf(i){return i==null}function $h(i){return i===0&&1/i==-1/0}function YC(i){return typeof i=="number"&&Number.isInteger(i)&&!$h(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}const Ox="";function QC(i){let t="";for(let e=0;e<i.length;e++)t.length>0&&(t=lb(t)),t=KC(i.get(e),t);return lb(t)}function KC(i,t){let e=t;const s=i.length;for(let o=0;o<s;o++){const u=i.charAt(o);switch(u){case"\0":e+="";break;case Ox:e+="";break;default:e+=u}}return e}function lb(i){return i+Ox+""}function ub(i){let t=0;for(const e in i)Object.prototype.hasOwnProperty.call(i,e)&&t++;return t}function Es(i,t){for(const e in i)Object.prototype.hasOwnProperty.call(i,e)&&t(e,i[e])}function Mx(i){for(const t in i)if(Object.prototype.hasOwnProperty.call(i,t))return!1;return!0}class me{constructor(t,e){this.comparator=t,this.root=e||Ke.EMPTY}insert(t,e){return new me(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,Ke.BLACK,null,null))}remove(t){return new me(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Ke.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const s=this.comparator(t,e.key);if(s===0)return e.value;s<0?e=e.left:s>0&&(e=e.right)}return null}indexOf(t){let e=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(t,s.key);if(o===0)return e+s.left.size;o<0?s=s.left:(e+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((e,s)=>(t(e,s),!1)))}toString(){const t=[];return this.inorderTraversal(((e,s)=>(t.push(`${e}:${s}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new ch(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new ch(this.root,t,this.comparator,!1)}getReverseIterator(){return new ch(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new ch(this.root,t,this.comparator,!0)}}class ch{constructor(t,e,s,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!t.isEmpty();)if(u=e?s(t.key,e):1,e&&o&&(u*=-1),u<0)t=this.isReverse?t.left:t.right;else{if(u===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Ke{constructor(t,e,s,o,u){this.key=t,this.value=e,this.color=s??Ke.RED,this.left=o??Ke.EMPTY,this.right=u??Ke.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,s,o,u){return new Ke(t??this.key,e??this.value,s??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,s){let o=this;const u=s(t,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(t,e,s),null):u===0?o.copy(null,e,null,null,null):o.copy(null,null,null,null,o.right.insert(t,e,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Ke.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let s,o=this;if(e(t,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(t,e),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),e(t,o.key)===0){if(o.right.isEmpty())return Ke.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(t,e))}return o.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Ke.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Ke.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Rt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Rt(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw Rt(27949);return t+(this.isRed()?0:1)}}Ke.EMPTY=null,Ke.RED=!0,Ke.BLACK=!1;Ke.EMPTY=new class{constructor(){this.size=0}get key(){throw Rt(57766)}get value(){throw Rt(16141)}get color(){throw Rt(16727)}get left(){throw Rt(29726)}get right(){throw Rt(36894)}copy(t,e,s,o,u){return this}insert(t,e,s){return new Ke(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Pe{constructor(t){this.comparator=t,this.data=new me(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((e,s)=>(t(e),!1)))}forEachInRange(t,e){const s=this.data.getIteratorFrom(t[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,t[1])>=0)return;e(o.key)}}forEachWhile(t,e){let s;for(s=e!==void 0?this.data.getIteratorFrom(e):this.data.getIterator();s.hasNext();)if(!t(s.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new cb(this.data.getIterator())}getIteratorFrom(t){return new cb(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach((s=>{e=e.add(s)})),e}isEqual(t){if(!(t instanceof Pe)||this.size!==t.size)return!1;const e=this.data.getIterator(),s=t.data.getIterator();for(;e.hasNext();){const o=e.getNext().key,u=s.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const t=[];return this.forEach((e=>{t.push(e)})),t}toString(){const t=[];return this.forEach((e=>t.push(e))),"SortedSet("+t.toString()+")"}copy(t){const e=new Pe(this.comparator);return e.data=t,e}}class cb{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Cn{constructor(t){this.fields=t,t.sort(Xe.comparator)}static empty(){return new Cn([])}unionWith(t){let e=new Pe(Xe.comparator);for(const s of this.fields)e=e.add(s);for(const s of t)e=e.add(s);return new Cn(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return bo(this.fields,t.fields,((e,s)=>e.isEqual(s)))}}class kx extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Je{constructor(t){this.binaryString=t}static fromBase64String(t){const e=(function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new kx("Invalid base64 string: "+u):u}})(t);return new Je(e)}static fromUint8Array(t){const e=(function(o){let u="";for(let c=0;c<o.length;++c)u+=String.fromCharCode(o[c]);return u})(t);return new Je(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(e){return btoa(e)})(this.binaryString)}toUint8Array(){return(function(e){const s=new Uint8Array(e.length);for(let o=0;o<e.length;o++)s[o]=e.charCodeAt(o);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return qt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Je.EMPTY_BYTE_STRING=new Je("");const XC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ps(i){if(Zt(!!i,39018),typeof i=="string"){let t=0;const e=XC.exec(i);if(Zt(!!e,46558,{timestamp:i}),e[1]){let o=e[1];o=(o+"000000000").substr(0,9),t=Number(o)}const s=new Date(i);return{seconds:Math.floor(s.getTime()/1e3),nanos:t}}return{seconds:Te(i.seconds),nanos:Te(i.nanos)}}function Te(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function gs(i){return typeof i=="string"?Je.fromBase64String(i):Je.fromUint8Array(i)}const Vx="server_timestamp",jx="__type__",Lx="__previous_value__",Px="__local_write_time__";function dg(i){return(i?.mapValue?.fields||{})[jx]?.stringValue===Vx}function yf(i){const t=i.mapValue.fields[Lx];return dg(t)?yf(t):t}function uu(i){const t=ps(i.mapValue.fields[Px].timestampValue);return new ce(t.seconds,t.nanos)}class ZC{constructor(t,e,s,o,u,c,m,p,g,v){this.databaseId=t,this.appId=e,this.persistenceKey=s,this.host=o,this.ssl=u,this.forceLongPolling=c,this.autoDetectLongPolling=m,this.longPollingOptions=p,this.useFetchStreams=g,this.isUsingEmulator=v}}const Yh="(default)";class cu{constructor(t,e){this.projectId=t,this.database=e||Yh}static empty(){return new cu("","")}get isDefaultDatabase(){return this.database===Yh}isEqual(t){return t instanceof cu&&t.projectId===this.projectId&&t.database===this.database}}const Ux="__type__",JC="__max__",hh={mapValue:{}},zx="__vector__",Qh="value";function ys(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?dg(i)?4:tR(i)?9007199254740991:WC(i)?10:11:Rt(28295,{value:i})}function Bi(i,t){if(i===t)return!0;const e=ys(i);if(e!==ys(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===t.booleanValue;case 4:return uu(i).isEqual(uu(t));case 3:return(function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const c=ps(o.timestampValue),m=ps(u.timestampValue);return c.seconds===m.seconds&&c.nanos===m.nanos})(i,t);case 5:return i.stringValue===t.stringValue;case 6:return(function(o,u){return gs(o.bytesValue).isEqual(gs(u.bytesValue))})(i,t);case 7:return i.referenceValue===t.referenceValue;case 8:return(function(o,u){return Te(o.geoPointValue.latitude)===Te(u.geoPointValue.latitude)&&Te(o.geoPointValue.longitude)===Te(u.geoPointValue.longitude)})(i,t);case 2:return(function(o,u){if("integerValue"in o&&"integerValue"in u)return Te(o.integerValue)===Te(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const c=Te(o.doubleValue),m=Te(u.doubleValue);return c===m?$h(c)===$h(m):isNaN(c)&&isNaN(m)}return!1})(i,t);case 9:return bo(i.arrayValue.values||[],t.arrayValue.values||[],Bi);case 10:case 11:return(function(o,u){const c=o.mapValue.fields||{},m=u.mapValue.fields||{};if(ub(c)!==ub(m))return!1;for(const p in c)if(c.hasOwnProperty(p)&&(m[p]===void 0||!Bi(c[p],m[p])))return!1;return!0})(i,t);default:return Rt(52216,{left:i})}}function hu(i,t){return(i.values||[]).find((e=>Bi(e,t)))!==void 0}function Eo(i,t){if(i===t)return 0;const e=ys(i),s=ys(t);if(e!==s)return qt(e,s);switch(e){case 0:case 9007199254740991:return 0;case 1:return qt(i.booleanValue,t.booleanValue);case 2:return(function(u,c){const m=Te(u.integerValue||u.doubleValue),p=Te(c.integerValue||c.doubleValue);return m<p?-1:m>p?1:m===p?0:isNaN(m)?isNaN(p)?0:-1:1})(i,t);case 3:return hb(i.timestampValue,t.timestampValue);case 4:return hb(uu(i),uu(t));case 5:return bp(i.stringValue,t.stringValue);case 6:return(function(u,c){const m=gs(u),p=gs(c);return m.compareTo(p)})(i.bytesValue,t.bytesValue);case 7:return(function(u,c){const m=u.split("/"),p=c.split("/");for(let g=0;g<m.length&&g<p.length;g++){const v=qt(m[g],p[g]);if(v!==0)return v}return qt(m.length,p.length)})(i.referenceValue,t.referenceValue);case 8:return(function(u,c){const m=qt(Te(u.latitude),Te(c.latitude));return m!==0?m:qt(Te(u.longitude),Te(c.longitude))})(i.geoPointValue,t.geoPointValue);case 9:return fb(i.arrayValue,t.arrayValue);case 10:return(function(u,c){const m=u.fields||{},p=c.fields||{},g=m[Qh]?.arrayValue,v=p[Qh]?.arrayValue,E=qt(g?.values?.length||0,v?.values?.length||0);return E!==0?E:fb(g,v)})(i.mapValue,t.mapValue);case 11:return(function(u,c){if(u===hh.mapValue&&c===hh.mapValue)return 0;if(u===hh.mapValue)return 1;if(c===hh.mapValue)return-1;const m=u.fields||{},p=Object.keys(m),g=c.fields||{},v=Object.keys(g);p.sort(),v.sort();for(let E=0;E<p.length&&E<v.length;++E){const T=bp(p[E],v[E]);if(T!==0)return T;const I=Eo(m[p[E]],g[v[E]]);if(I!==0)return I}return qt(p.length,v.length)})(i.mapValue,t.mapValue);default:throw Rt(23264,{he:e})}}function hb(i,t){if(typeof i=="string"&&typeof t=="string"&&i.length===t.length)return qt(i,t);const e=ps(i),s=ps(t),o=qt(e.seconds,s.seconds);return o!==0?o:qt(e.nanos,s.nanos)}function fb(i,t){const e=i.values||[],s=t.values||[];for(let o=0;o<e.length&&o<s.length;++o){const u=Eo(e[o],s[o]);if(u)return u}return qt(e.length,s.length)}function xo(i){return Ep(i)}function Ep(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?(function(e){const s=ps(e);return`time(${s.seconds},${s.nanos})`})(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?(function(e){return gs(e).toBase64()})(i.bytesValue):"referenceValue"in i?(function(e){return At.fromName(e).toString()})(i.referenceValue):"geoPointValue"in i?(function(e){return`geo(${e.latitude},${e.longitude})`})(i.geoPointValue):"arrayValue"in i?(function(e){let s="[",o=!0;for(const u of e.values||[])o?o=!1:s+=",",s+=Ep(u);return s+"]"})(i.arrayValue):"mapValue"in i?(function(e){const s=Object.keys(e.fields||{}).sort();let o="{",u=!0;for(const c of s)u?u=!1:o+=",",o+=`${c}:${Ep(e.fields[c])}`;return o+"}"})(i.mapValue):Rt(61005,{value:i})}function Ah(i){switch(ys(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=yf(i);return t?16+Ah(t):16;case 5:return 2*i.stringValue.length;case 6:return gs(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((o,u)=>o+Ah(u)),0)})(i.arrayValue);case 10:case 11:return(function(s){let o=0;return Es(s.fields,((u,c)=>{o+=u.length+Ah(c)})),o})(i.mapValue);default:throw Rt(13486,{value:i})}}function xp(i){return!!i&&"integerValue"in i}function mg(i){return!!i&&"arrayValue"in i}function db(i){return!!i&&"nullValue"in i}function mb(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function Nh(i){return!!i&&"mapValue"in i}function WC(i){return(i?.mapValue?.fields||{})[Ux]?.stringValue===zx}function tu(i){if(i.geoPointValue)return{geoPointValue:{...i.geoPointValue}};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:{...i.timestampValue}};if(i.mapValue){const t={mapValue:{fields:{}}};return Es(i.mapValue.fields,((e,s)=>t.mapValue.fields[e]=tu(s))),t}if(i.arrayValue){const t={arrayValue:{values:[]}};for(let e=0;e<(i.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=tu(i.arrayValue.values[e]);return t}return{...i}}function tR(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue===JC}class yn{constructor(t){this.value=t}static empty(){return new yn({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let s=0;s<t.length-1;++s)if(e=(e.mapValue.fields||{})[t.get(s)],!Nh(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=tu(e)}setAll(t){let e=Xe.emptyPath(),s={},o=[];t.forEach(((c,m)=>{if(!e.isImmediateParentOf(m)){const p=this.getFieldsMap(e);this.applyChanges(p,s,o),s={},o=[],e=m.popLast()}c?s[m.lastSegment()]=tu(c):o.push(m.lastSegment())}));const u=this.getFieldsMap(e);this.applyChanges(u,s,o)}delete(t){const e=this.field(t.popLast());Nh(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return Bi(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let s=0;s<t.length;++s){let o=e.mapValue.fields[t.get(s)];Nh(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},e.mapValue.fields[t.get(s)]=o),e=o}return e.mapValue.fields}applyChanges(t,e,s){Es(e,((o,u)=>t[o]=u));for(const o of s)delete t[o]}clone(){return new yn(tu(this.value))}}function Bx(i){const t=[];return Es(i.fields,((e,s)=>{const o=new Xe([e]);if(Nh(s)){const u=Bx(s.mapValue).fields;if(u.length===0)t.push(o);else for(const c of u)t.push(o.child(c))}else t.push(o)})),new Cn(t)}class nn{constructor(t,e,s,o,u,c,m){this.key=t,this.documentType=e,this.version=s,this.readTime=o,this.createTime=u,this.data=c,this.documentState=m}static newInvalidDocument(t){return new nn(t,0,It.min(),It.min(),It.min(),yn.empty(),0)}static newFoundDocument(t,e,s,o){return new nn(t,1,e,It.min(),s,o,0)}static newNoDocument(t,e){return new nn(t,2,e,It.min(),It.min(),yn.empty(),0)}static newUnknownDocument(t,e){return new nn(t,3,e,It.min(),It.min(),yn.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(It.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=yn.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=yn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=It.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof nn&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new nn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Kh{constructor(t,e){this.position=t,this.inclusive=e}}function pb(i,t,e){let s=0;for(let o=0;o<i.position.length;o++){const u=t[o],c=i.position[o];if(u.field.isKeyField()?s=At.comparator(At.fromName(c.referenceValue),e.key):s=Eo(c,e.data.field(u.field)),u.dir==="desc"&&(s*=-1),s!==0)break}return s}function gb(i,t){if(i===null)return t===null;if(t===null||i.inclusive!==t.inclusive||i.position.length!==t.position.length)return!1;for(let e=0;e<i.position.length;e++)if(!Bi(i.position[e],t.position[e]))return!1;return!0}class Xh{constructor(t,e="asc"){this.field=t,this.dir=e}}function eR(i,t){return i.dir===t.dir&&i.field.isEqual(t.field)}class Fx{}class Le extends Fx{constructor(t,e,s){super(),this.field=t,this.op=e,this.value=s}static create(t,e,s){return t.isKeyField()?e==="in"||e==="not-in"?this.createKeyFieldInFilter(t,e,s):new iR(t,e,s):e==="array-contains"?new aR(t,s):e==="in"?new oR(t,s):e==="not-in"?new lR(t,s):e==="array-contains-any"?new uR(t,s):new Le(t,e,s)}static createKeyFieldInFilter(t,e,s){return e==="in"?new rR(t,s):new sR(t,s)}matches(t){const e=t.data.field(this.field);return this.op==="!="?e!==null&&e.nullValue===void 0&&this.matchesComparison(Eo(e,this.value)):e!==null&&ys(this.value)===ys(e)&&this.matchesComparison(Eo(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return Rt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Fi extends Fx{constructor(t,e){super(),this.filters=t,this.op=e,this.Pe=null}static create(t,e){return new Fi(t,e)}matches(t){return qx(this)?this.filters.find((e=>!e.matches(t)))===void 0:this.filters.find((e=>e.matches(t)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((t,e)=>t.concat(e.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function qx(i){return i.op==="and"}function Hx(i){return nR(i)&&qx(i)}function nR(i){for(const t of i.filters)if(t instanceof Fi)return!1;return!0}function Tp(i){if(i instanceof Le)return i.field.canonicalString()+i.op.toString()+xo(i.value);if(Hx(i))return i.filters.map((t=>Tp(t))).join(",");{const t=i.filters.map((e=>Tp(e))).join(",");return`${i.op}(${t})`}}function Gx(i,t){return i instanceof Le?(function(s,o){return o instanceof Le&&s.op===o.op&&s.field.isEqual(o.field)&&Bi(s.value,o.value)})(i,t):i instanceof Fi?(function(s,o){return o instanceof Fi&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce(((u,c,m)=>u&&Gx(c,o.filters[m])),!0):!1})(i,t):void Rt(19439)}function $x(i){return i instanceof Le?(function(e){return`${e.field.canonicalString()} ${e.op} ${xo(e.value)}`})(i):i instanceof Fi?(function(e){return e.op.toString()+" {"+e.getFilters().map($x).join(" ,")+"}"})(i):"Filter"}class iR extends Le{constructor(t,e,s){super(t,e,s),this.key=At.fromName(s.referenceValue)}matches(t){const e=At.comparator(t.key,this.key);return this.matchesComparison(e)}}class rR extends Le{constructor(t,e){super(t,"in",e),this.keys=Yx("in",e)}matches(t){return this.keys.some((e=>e.isEqual(t.key)))}}class sR extends Le{constructor(t,e){super(t,"not-in",e),this.keys=Yx("not-in",e)}matches(t){return!this.keys.some((e=>e.isEqual(t.key)))}}function Yx(i,t){return(t.arrayValue?.values||[]).map((e=>At.fromName(e.referenceValue)))}class aR extends Le{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return mg(e)&&hu(e.arrayValue,this.value)}}class oR extends Le{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return e!==null&&hu(this.value.arrayValue,e)}}class lR extends Le{constructor(t,e){super(t,"not-in",e)}matches(t){if(hu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return e!==null&&e.nullValue===void 0&&!hu(this.value.arrayValue,e)}}class uR extends Le{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!mg(e)||!e.arrayValue.values)&&e.arrayValue.values.some((s=>hu(this.value.arrayValue,s)))}}class cR{constructor(t,e=null,s=[],o=[],u=null,c=null,m=null){this.path=t,this.collectionGroup=e,this.orderBy=s,this.filters=o,this.limit=u,this.startAt=c,this.endAt=m,this.Te=null}}function yb(i,t=null,e=[],s=[],o=null,u=null,c=null){return new cR(i,t,e,s,o,u,c)}function pg(i){const t=Mt(i);if(t.Te===null){let e=t.path.canonicalString();t.collectionGroup!==null&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((s=>Tp(s))).join(","),e+="|ob:",e+=t.orderBy.map((s=>(function(u){return u.field.canonicalString()+u.dir})(s))).join(","),gf(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((s=>xo(s))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((s=>xo(s))).join(",")),t.Te=e}return t.Te}function gg(i,t){if(i.limit!==t.limit||i.orderBy.length!==t.orderBy.length)return!1;for(let e=0;e<i.orderBy.length;e++)if(!eR(i.orderBy[e],t.orderBy[e]))return!1;if(i.filters.length!==t.filters.length)return!1;for(let e=0;e<i.filters.length;e++)if(!Gx(i.filters[e],t.filters[e]))return!1;return i.collectionGroup===t.collectionGroup&&!!i.path.isEqual(t.path)&&!!gb(i.startAt,t.startAt)&&gb(i.endAt,t.endAt)}function wp(i){return At.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}class _f{constructor(t,e=null,s=[],o=[],u=null,c="F",m=null,p=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=s,this.filters=o,this.limit=u,this.limitType=c,this.startAt=m,this.endAt=p,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function hR(i,t,e,s,o,u,c,m){return new _f(i,t,e,s,o,u,c,m)}function vf(i){return new _f(i)}function _b(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function fR(i){return i.collectionGroup!==null}function eu(i){const t=Mt(i);if(t.Ie===null){t.Ie=[];const e=new Set;for(const u of t.explicitOrderBy)t.Ie.push(u),e.add(u.field.canonicalString());const s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(c){let m=new Pe(Xe.comparator);return c.filters.forEach((p=>{p.getFlattenedFilters().forEach((g=>{g.isInequality()&&(m=m.add(g.field))}))})),m})(t).forEach((u=>{e.has(u.canonicalString())||u.isKeyField()||t.Ie.push(new Xh(u,s))})),e.has(Xe.keyField().canonicalString())||t.Ie.push(new Xh(Xe.keyField(),s))}return t.Ie}function Vi(i){const t=Mt(i);return t.Ee||(t.Ee=dR(t,eu(i))),t.Ee}function dR(i,t){if(i.limitType==="F")return yb(i.path,i.collectionGroup,t,i.filters,i.limit,i.startAt,i.endAt);{t=t.map((o=>{const u=o.dir==="desc"?"asc":"desc";return new Xh(o.field,u)}));const e=i.endAt?new Kh(i.endAt.position,i.endAt.inclusive):null,s=i.startAt?new Kh(i.startAt.position,i.startAt.inclusive):null;return yb(i.path,i.collectionGroup,t,i.filters,i.limit,e,s)}}function Sp(i,t,e){return new _f(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),t,e,i.startAt,i.endAt)}function bf(i,t){return gg(Vi(i),Vi(t))&&i.limitType===t.limitType}function Qx(i){return`${pg(Vi(i))}|lt:${i.limitType}`}function so(i){return`Query(target=${(function(e){let s=e.path.canonicalString();return e.collectionGroup!==null&&(s+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(s+=`, filters: [${e.filters.map((o=>$x(o))).join(", ")}]`),gf(e.limit)||(s+=", limit: "+e.limit),e.orderBy.length>0&&(s+=`, orderBy: [${e.orderBy.map((o=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(o))).join(", ")}]`),e.startAt&&(s+=", startAt: ",s+=e.startAt.inclusive?"b:":"a:",s+=e.startAt.position.map((o=>xo(o))).join(",")),e.endAt&&(s+=", endAt: ",s+=e.endAt.inclusive?"a:":"b:",s+=e.endAt.position.map((o=>xo(o))).join(",")),`Target(${s})`})(Vi(i))}; limitType=${i.limitType})`}function Ef(i,t){return t.isFoundDocument()&&(function(s,o){const u=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(u):At.isDocumentKey(s.path)?s.path.isEqual(u):s.path.isImmediateParentOf(u)})(i,t)&&(function(s,o){for(const u of eu(s))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0})(i,t)&&(function(s,o){for(const u of s.filters)if(!u.matches(o))return!1;return!0})(i,t)&&(function(s,o){return!(s.startAt&&!(function(c,m,p){const g=pb(c,m,p);return c.inclusive?g<=0:g<0})(s.startAt,eu(s),o)||s.endAt&&!(function(c,m,p){const g=pb(c,m,p);return c.inclusive?g>=0:g>0})(s.endAt,eu(s),o))})(i,t)}function mR(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function Kx(i){return(t,e)=>{let s=!1;for(const o of eu(i)){const u=pR(o,t,e);if(u!==0)return u;s=s||o.field.isKeyField()}return 0}}function pR(i,t,e){const s=i.field.isKeyField()?At.comparator(t.key,e.key):(function(u,c,m){const p=c.data.field(u),g=m.data.field(u);return p!==null&&g!==null?Eo(p,g):Rt(42886)})(i.field,t,e);switch(i.dir){case"asc":return s;case"desc":return-1*s;default:return Rt(19790,{direction:i.dir})}}class pa{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),s=this.inner[e];if(s!==void 0){for(const[o,u]of s)if(this.equalsFn(o,t))return u}}has(t){return this.get(t)!==void 0}set(t,e){const s=this.mapKeyFn(t),o=this.inner[s];if(o===void 0)return this.inner[s]=[[t,e]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],t))return void(o[u]=[t,e]);o.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),s=this.inner[e];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],t))return s.length===1?delete this.inner[e]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(t){Es(this.inner,((e,s)=>{for(const[o,u]of s)t(o,u)}))}isEmpty(){return Mx(this.inner)}size(){return this.innerSize}}const gR=new me(At.comparator);function yr(){return gR}const Xx=new me(At.comparator);function $l(...i){let t=Xx;for(const e of i)t=t.insert(e.key,e);return t}function Zx(i){let t=Xx;return i.forEach(((e,s)=>t=t.insert(e,s.overlayedDocument))),t}function ra(){return nu()}function Jx(){return nu()}function nu(){return new pa((i=>i.toString()),((i,t)=>i.isEqual(t)))}const yR=new me(At.comparator),_R=new Pe(At.comparator);function Ht(...i){let t=_R;for(const e of i)t=t.add(e);return t}const vR=new Pe(qt);function bR(){return vR}function yg(i,t){if(i.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:$h(t)?"-0":t}}function Wx(i){return{integerValue:""+i}}function ER(i,t){return YC(t)?Wx(t):yg(i,t)}class xf{constructor(){this._=void 0}}function xR(i,t,e){return i instanceof fu?(function(o,u){const c={fields:{[jx]:{stringValue:Vx},[Px]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&dg(u)&&(u=yf(u)),u&&(c.fields[Lx]=u),{mapValue:c}})(e,t):i instanceof du?eT(i,t):i instanceof mu?nT(i,t):(function(o,u){const c=tT(o,u),m=vb(c)+vb(o.Ae);return xp(c)&&xp(o.Ae)?Wx(m):yg(o.serializer,m)})(i,t)}function TR(i,t,e){return i instanceof du?eT(i,t):i instanceof mu?nT(i,t):e}function tT(i,t){return i instanceof Zh?(function(s){return xp(s)||(function(u){return!!u&&"doubleValue"in u})(s)})(t)?t:{integerValue:0}:null}class fu extends xf{}class du extends xf{constructor(t){super(),this.elements=t}}function eT(i,t){const e=iT(t);for(const s of i.elements)e.some((o=>Bi(o,s)))||e.push(s);return{arrayValue:{values:e}}}class mu extends xf{constructor(t){super(),this.elements=t}}function nT(i,t){let e=iT(t);for(const s of i.elements)e=e.filter((o=>!Bi(o,s)));return{arrayValue:{values:e}}}class Zh extends xf{constructor(t,e){super(),this.serializer=t,this.Ae=e}}function vb(i){return Te(i.integerValue||i.doubleValue)}function iT(i){return mg(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}class wR{constructor(t,e){this.field=t,this.transform=e}}function SR(i,t){return i.field.isEqual(t.field)&&(function(s,o){return s instanceof du&&o instanceof du||s instanceof mu&&o instanceof mu?bo(s.elements,o.elements,Bi):s instanceof Zh&&o instanceof Zh?Bi(s.Ae,o.Ae):s instanceof fu&&o instanceof fu})(i.transform,t.transform)}class AR{constructor(t,e){this.version=t,this.transformResults=e}}class ji{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new ji}static exists(t){return new ji(void 0,t)}static updateTime(t){return new ji(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Ch(i,t){return i.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(i.updateTime):i.exists===void 0||i.exists===t.isFoundDocument()}class Tf{}function rT(i,t){if(!i.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return i.isNoDocument()?new aT(i.key,ji.none()):new Nu(i.key,i.data,ji.none());{const e=i.data,s=yn.empty();let o=new Pe(Xe.comparator);for(let u of t.fields)if(!o.has(u)){let c=e.field(u);c===null&&u.length>1&&(u=u.popLast(),c=e.field(u)),c===null?s.delete(u):s.set(u,c),o=o.add(u)}return new xs(i.key,s,new Cn(o.toArray()),ji.none())}}function NR(i,t,e){i instanceof Nu?(function(o,u,c){const m=o.value.clone(),p=Eb(o.fieldTransforms,u,c.transformResults);m.setAll(p),u.convertToFoundDocument(c.version,m).setHasCommittedMutations()})(i,t,e):i instanceof xs?(function(o,u,c){if(!Ch(o.precondition,u))return void u.convertToUnknownDocument(c.version);const m=Eb(o.fieldTransforms,u,c.transformResults),p=u.data;p.setAll(sT(o)),p.setAll(m),u.convertToFoundDocument(c.version,p).setHasCommittedMutations()})(i,t,e):(function(o,u,c){u.convertToNoDocument(c.version).setHasCommittedMutations()})(0,t,e)}function iu(i,t,e,s){return i instanceof Nu?(function(u,c,m,p){if(!Ch(u.precondition,c))return m;const g=u.value.clone(),v=xb(u.fieldTransforms,p,c);return g.setAll(v),c.convertToFoundDocument(c.version,g).setHasLocalMutations(),null})(i,t,e,s):i instanceof xs?(function(u,c,m,p){if(!Ch(u.precondition,c))return m;const g=xb(u.fieldTransforms,p,c),v=c.data;return v.setAll(sT(u)),v.setAll(g),c.convertToFoundDocument(c.version,v).setHasLocalMutations(),m===null?null:m.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((E=>E.field)))})(i,t,e,s):(function(u,c,m){return Ch(u.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):m})(i,t,e)}function CR(i,t){let e=null;for(const s of i.fieldTransforms){const o=t.data.field(s.field),u=tT(s.transform,o||null);u!=null&&(e===null&&(e=yn.empty()),e.set(s.field,u))}return e||null}function bb(i,t){return i.type===t.type&&!!i.key.isEqual(t.key)&&!!i.precondition.isEqual(t.precondition)&&!!(function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&bo(s,o,((u,c)=>SR(u,c)))})(i.fieldTransforms,t.fieldTransforms)&&(i.type===0?i.value.isEqual(t.value):i.type!==1||i.data.isEqual(t.data)&&i.fieldMask.isEqual(t.fieldMask))}class Nu extends Tf{constructor(t,e,s,o=[]){super(),this.key=t,this.value=e,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class xs extends Tf{constructor(t,e,s,o,u=[]){super(),this.key=t,this.data=e,this.fieldMask=s,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function sT(i){const t=new Map;return i.fieldMask.fields.forEach((e=>{if(!e.isEmpty()){const s=i.data.field(e);t.set(e,s)}})),t}function Eb(i,t,e){const s=new Map;Zt(i.length===e.length,32656,{Re:e.length,Ve:i.length});for(let o=0;o<e.length;o++){const u=i[o],c=u.transform,m=t.data.field(u.field);s.set(u.field,TR(c,m,e[o]))}return s}function xb(i,t,e){const s=new Map;for(const o of i){const u=o.transform,c=e.data.field(o.field);s.set(o.field,xR(u,c,t))}return s}class aT extends Tf{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class RR extends Tf{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class IR{constructor(t,e,s,o){this.batchId=t,this.localWriteTime=e,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(t,e){const s=e.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(t.key)&&NR(u,t,s[o])}}applyToLocalView(t,e){for(const s of this.baseMutations)s.key.isEqual(t.key)&&(e=iu(s,t,e,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(t.key)&&(e=iu(s,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const s=Jx();return this.mutations.forEach((o=>{const u=t.get(o.key),c=u.overlayedDocument;let m=this.applyToLocalView(c,u.mutatedFields);m=e.has(o.key)?null:m;const p=rT(c,m);p!==null&&s.set(o.key,p),c.isValidDocument()||c.convertToNoDocument(It.min())})),s}keys(){return this.mutations.reduce(((t,e)=>t.add(e.key)),Ht())}isEqual(t){return this.batchId===t.batchId&&bo(this.mutations,t.mutations,((e,s)=>bb(e,s)))&&bo(this.baseMutations,t.baseMutations,((e,s)=>bb(e,s)))}}class _g{constructor(t,e,s,o){this.batch=t,this.commitVersion=e,this.mutationResults=s,this.docVersions=o}static from(t,e,s){Zt(t.mutations.length===s.length,58842,{me:t.mutations.length,fe:s.length});let o=(function(){return yR})();const u=t.mutations;for(let c=0;c<u.length;c++)o=o.insert(u[c].key,s[c].version);return new _g(t,e,s,o)}}class DR{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class OR{constructor(t,e){this.count=t,this.unchangedNames=e}}var Oe,$t;function MR(i){switch(i){case ct.OK:return Rt(64938);case ct.CANCELLED:case ct.UNKNOWN:case ct.DEADLINE_EXCEEDED:case ct.RESOURCE_EXHAUSTED:case ct.INTERNAL:case ct.UNAVAILABLE:case ct.UNAUTHENTICATED:return!1;case ct.INVALID_ARGUMENT:case ct.NOT_FOUND:case ct.ALREADY_EXISTS:case ct.PERMISSION_DENIED:case ct.FAILED_PRECONDITION:case ct.ABORTED:case ct.OUT_OF_RANGE:case ct.UNIMPLEMENTED:case ct.DATA_LOSS:return!0;default:return Rt(15467,{code:i})}}function oT(i){if(i===void 0)return gr("GRPC error has no .code"),ct.UNKNOWN;switch(i){case Oe.OK:return ct.OK;case Oe.CANCELLED:return ct.CANCELLED;case Oe.UNKNOWN:return ct.UNKNOWN;case Oe.DEADLINE_EXCEEDED:return ct.DEADLINE_EXCEEDED;case Oe.RESOURCE_EXHAUSTED:return ct.RESOURCE_EXHAUSTED;case Oe.INTERNAL:return ct.INTERNAL;case Oe.UNAVAILABLE:return ct.UNAVAILABLE;case Oe.UNAUTHENTICATED:return ct.UNAUTHENTICATED;case Oe.INVALID_ARGUMENT:return ct.INVALID_ARGUMENT;case Oe.NOT_FOUND:return ct.NOT_FOUND;case Oe.ALREADY_EXISTS:return ct.ALREADY_EXISTS;case Oe.PERMISSION_DENIED:return ct.PERMISSION_DENIED;case Oe.FAILED_PRECONDITION:return ct.FAILED_PRECONDITION;case Oe.ABORTED:return ct.ABORTED;case Oe.OUT_OF_RANGE:return ct.OUT_OF_RANGE;case Oe.UNIMPLEMENTED:return ct.UNIMPLEMENTED;case Oe.DATA_LOSS:return ct.DATA_LOSS;default:return Rt(39323,{code:i})}}($t=Oe||(Oe={}))[$t.OK=0]="OK",$t[$t.CANCELLED=1]="CANCELLED",$t[$t.UNKNOWN=2]="UNKNOWN",$t[$t.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",$t[$t.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",$t[$t.NOT_FOUND=5]="NOT_FOUND",$t[$t.ALREADY_EXISTS=6]="ALREADY_EXISTS",$t[$t.PERMISSION_DENIED=7]="PERMISSION_DENIED",$t[$t.UNAUTHENTICATED=16]="UNAUTHENTICATED",$t[$t.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",$t[$t.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",$t[$t.ABORTED=10]="ABORTED",$t[$t.OUT_OF_RANGE=11]="OUT_OF_RANGE",$t[$t.UNIMPLEMENTED=12]="UNIMPLEMENTED",$t[$t.INTERNAL=13]="INTERNAL",$t[$t.UNAVAILABLE=14]="UNAVAILABLE",$t[$t.DATA_LOSS=15]="DATA_LOSS";function kR(){return new TextEncoder}const VR=new fs([4294967295,4294967295],0);function Tb(i){const t=kR().encode(i),e=new Tx;return e.update(t),new Uint8Array(e.digest())}function wb(i){const t=new DataView(i.buffer),e=t.getUint32(0,!0),s=t.getUint32(4,!0),o=t.getUint32(8,!0),u=t.getUint32(12,!0);return[new fs([e,s],0),new fs([o,u],0)]}class vg{constructor(t,e,s){if(this.bitmap=t,this.padding=e,this.hashCount=s,e<0||e>=8)throw new Yl(`Invalid padding: ${e}`);if(s<0)throw new Yl(`Invalid hash count: ${s}`);if(t.length>0&&this.hashCount===0)throw new Yl(`Invalid hash count: ${s}`);if(t.length===0&&e!==0)throw new Yl(`Invalid padding when bitmap length is 0: ${e}`);this.ge=8*t.length-e,this.pe=fs.fromNumber(this.ge)}ye(t,e,s){let o=t.add(e.multiply(fs.fromNumber(s)));return o.compare(VR)===1&&(o=new fs([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const e=Tb(t),[s,o]=wb(e);for(let u=0;u<this.hashCount;u++){const c=this.ye(s,o,u);if(!this.we(c))return!1}return!0}static create(t,e,s){const o=t%8==0?0:8-t%8,u=new Uint8Array(Math.ceil(t/8)),c=new vg(u,o,e);return s.forEach((m=>c.insert(m))),c}insert(t){if(this.ge===0)return;const e=Tb(t),[s,o]=wb(e);for(let u=0;u<this.hashCount;u++){const c=this.ye(s,o,u);this.Se(c)}}Se(t){const e=Math.floor(t/8),s=t%8;this.bitmap[e]|=1<<s}}class Yl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class wf{constructor(t,e,s,o,u){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(t,e,s){const o=new Map;return o.set(t,Cu.createSynthesizedTargetChangeForCurrentChange(t,e,s)),new wf(It.min(),o,new me(qt),yr(),Ht())}}class Cu{constructor(t,e,s,o,u){this.resumeToken=t,this.current=e,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(t,e,s){return new Cu(s,e,Ht(),Ht(),Ht())}}class Rh{constructor(t,e,s,o){this.be=t,this.removedTargetIds=e,this.key=s,this.De=o}}class lT{constructor(t,e){this.targetId=t,this.Ce=e}}class uT{constructor(t,e,s=Je.EMPTY_BYTE_STRING,o=null){this.state=t,this.targetIds=e,this.resumeToken=s,this.cause=o}}class Sb{constructor(){this.ve=0,this.Fe=Ab(),this.Me=Je.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=Ht(),e=Ht(),s=Ht();return this.Fe.forEach(((o,u)=>{switch(u){case 0:t=t.add(o);break;case 2:e=e.add(o);break;case 1:s=s.add(o);break;default:Rt(38017,{changeType:u})}})),new Cu(this.Me,this.xe,t,e,s)}qe(){this.Oe=!1,this.Fe=Ab()}Qe(t,e){this.Oe=!0,this.Fe=this.Fe.insert(t,e)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,Zt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class jR{constructor(t){this.Ge=t,this.ze=new Map,this.je=yr(),this.Je=fh(),this.He=fh(),this.Ye=new me(qt)}Ze(t){for(const e of t.be)t.De&&t.De.isFoundDocument()?this.Xe(e,t.De):this.et(e,t.key,t.De);for(const e of t.removedTargetIds)this.et(e,t.key,t.De)}tt(t){this.forEachTarget(t,(e=>{const s=this.nt(e);switch(t.state){case 0:this.rt(e)&&s.Le(t.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(t.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(e);break;case 3:this.rt(e)&&(s.We(),s.Le(t.resumeToken));break;case 4:this.rt(e)&&(this.it(e),s.Le(t.resumeToken));break;default:Rt(56790,{state:t.state})}}))}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.ze.forEach(((s,o)=>{this.rt(o)&&e(o)}))}st(t){const e=t.targetId,s=t.Ce.count,o=this.ot(e);if(o){const u=o.target;if(wp(u))if(s===0){const c=new At(u.path);this.et(e,c,nn.newNoDocument(c,It.min()))}else Zt(s===1,20013,{expectedCount:s});else{const c=this._t(e);if(c!==s){const m=this.ut(t),p=m?this.ct(m,t,c):1;if(p!==0){this.it(e);const g=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(e,g)}}}}}ut(t){const e=t.Ce.unchangedNames;if(!e||!e.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:u=0}=e;let c,m;try{c=gs(s).toUint8Array()}catch(p){if(p instanceof kx)return vo("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{m=new vg(c,o,u)}catch(p){return vo(p instanceof Yl?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return m.ge===0?null:m}ct(t,e,s){return e.Ce.count===s-this.Pt(t,e.targetId)?0:2}Pt(t,e){const s=this.Ge.getRemoteKeysForTarget(e);let o=0;return s.forEach((u=>{const c=this.Ge.ht(),m=`projects/${c.projectId}/databases/${c.database}/documents/${u.path.canonicalString()}`;t.mightContain(m)||(this.et(e,u,null),o++)})),o}Tt(t){const e=new Map;this.ze.forEach(((u,c)=>{const m=this.ot(c);if(m){if(u.current&&wp(m.target)){const p=new At(m.target.path);this.It(p).has(c)||this.Et(c,p)||this.et(c,p,nn.newNoDocument(p,t))}u.Be&&(e.set(c,u.ke()),u.qe())}}));let s=Ht();this.He.forEach(((u,c)=>{let m=!0;c.forEachWhile((p=>{const g=this.ot(p);return!g||g.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)})),m&&(s=s.add(u))})),this.je.forEach(((u,c)=>c.setReadTime(t)));const o=new wf(t,e,this.Ye,this.je,s);return this.je=yr(),this.Je=fh(),this.He=fh(),this.Ye=new me(qt),o}Xe(t,e){if(!this.rt(t))return;const s=this.Et(t,e.key)?2:0;this.nt(t).Qe(e.key,s),this.je=this.je.insert(e.key,e),this.Je=this.Je.insert(e.key,this.It(e.key).add(t)),this.He=this.He.insert(e.key,this.dt(e.key).add(t))}et(t,e,s){if(!this.rt(t))return;const o=this.nt(t);this.Et(t,e)?o.Qe(e,1):o.$e(e),this.He=this.He.insert(e,this.dt(e).delete(t)),this.He=this.He.insert(e,this.dt(e).add(t)),s&&(this.je=this.je.insert(e,s))}removeTarget(t){this.ze.delete(t)}_t(t){const e=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let e=this.ze.get(t);return e||(e=new Sb,this.ze.set(t,e)),e}dt(t){let e=this.He.get(t);return e||(e=new Pe(qt),this.He=this.He.insert(t,e)),e}It(t){let e=this.Je.get(t);return e||(e=new Pe(qt),this.Je=this.Je.insert(t,e)),e}rt(t){const e=this.ot(t)!==null;return e||_t("WatchChangeAggregator","Detected inactive target",t),e}ot(t){const e=this.ze.get(t);return e&&e.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new Sb),this.Ge.getRemoteKeysForTarget(t).forEach((e=>{this.et(t,e,null)}))}Et(t,e){return this.Ge.getRemoteKeysForTarget(t).has(e)}}function fh(){return new me(At.comparator)}function Ab(){return new me(At.comparator)}const LR={asc:"ASCENDING",desc:"DESCENDING"},PR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},UR={and:"AND",or:"OR"};class zR{constructor(t,e){this.databaseId=t,this.useProto3Json=e}}function Ap(i,t){return i.useProto3Json||gf(t)?t:{value:t}}function Jh(i,t){return i.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function cT(i,t){return i.useProto3Json?t.toBase64():t.toUint8Array()}function BR(i,t){return Jh(i,t.toTimestamp())}function Li(i){return Zt(!!i,49232),It.fromTimestamp((function(e){const s=ps(e);return new ce(s.seconds,s.nanos)})(i))}function bg(i,t){return Np(i,t).canonicalString()}function Np(i,t){const e=(function(o){return new de(["projects",o.projectId,"databases",o.database])})(i).child("documents");return t===void 0?e:e.child(t)}function hT(i){const t=de.fromString(i);return Zt(gT(t),10190,{key:t.toString()}),t}function Cp(i,t){return bg(i.databaseId,t.path)}function Xm(i,t){const e=hT(t);if(e.get(1)!==i.databaseId.projectId)throw new Et(ct.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+i.databaseId.projectId);if(e.get(3)!==i.databaseId.database)throw new Et(ct.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+i.databaseId.database);return new At(dT(e))}function fT(i,t){return bg(i.databaseId,t)}function FR(i){const t=hT(i);return t.length===4?de.emptyPath():dT(t)}function Rp(i){return new de(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function dT(i){return Zt(i.length>4&&i.get(4)==="documents",29091,{key:i.toString()}),i.popFirst(5)}function Nb(i,t,e){return{name:Cp(i,t),fields:e.value.mapValue.fields}}function qR(i,t){let e;if("targetChange"in t){t.targetChange;const s=(function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:Rt(39313,{state:g})})(t.targetChange.targetChangeType||"NO_CHANGE"),o=t.targetChange.targetIds||[],u=(function(g,v){return g.useProto3Json?(Zt(v===void 0||typeof v=="string",58123),Je.fromBase64String(v||"")):(Zt(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),Je.fromUint8Array(v||new Uint8Array))})(i,t.targetChange.resumeToken),c=t.targetChange.cause,m=c&&(function(g){const v=g.code===void 0?ct.UNKNOWN:oT(g.code);return new Et(v,g.message||"")})(c);e=new uT(s,o,u,m||null)}else if("documentChange"in t){t.documentChange;const s=t.documentChange;s.document,s.document.name,s.document.updateTime;const o=Xm(i,s.document.name),u=Li(s.document.updateTime),c=s.document.createTime?Li(s.document.createTime):It.min(),m=new yn({mapValue:{fields:s.document.fields}}),p=nn.newFoundDocument(o,u,c,m),g=s.targetIds||[],v=s.removedTargetIds||[];e=new Rh(g,v,p.key,p)}else if("documentDelete"in t){t.documentDelete;const s=t.documentDelete;s.document;const o=Xm(i,s.document),u=s.readTime?Li(s.readTime):It.min(),c=nn.newNoDocument(o,u),m=s.removedTargetIds||[];e=new Rh([],m,c.key,c)}else if("documentRemove"in t){t.documentRemove;const s=t.documentRemove;s.document;const o=Xm(i,s.document),u=s.removedTargetIds||[];e=new Rh([],u,o,null)}else{if(!("filter"in t))return Rt(11601,{Rt:t});{t.filter;const s=t.filter;s.targetId;const{count:o=0,unchangedNames:u}=s,c=new OR(o,u),m=s.targetId;e=new lT(m,c)}}return e}function HR(i,t){let e;if(t instanceof Nu)e={update:Nb(i,t.key,t.value)};else if(t instanceof aT)e={delete:Cp(i,t.key)};else if(t instanceof xs)e={update:Nb(i,t.key,t.data),updateMask:WR(t.fieldMask)};else{if(!(t instanceof RR))return Rt(16599,{Vt:t.type});e={verify:Cp(i,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map((s=>(function(u,c){const m=c.transform;if(m instanceof fu)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof du)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof mu)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof Zh)return{fieldPath:c.field.canonicalString(),increment:m.Ae};throw Rt(20930,{transform:c.transform})})(0,s)))),t.precondition.isNone||(e.currentDocument=(function(o,u){return u.updateTime!==void 0?{updateTime:BR(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:Rt(27497)})(i,t.precondition)),e}function GR(i,t){return i&&i.length>0?(Zt(t!==void 0,14353),i.map((e=>(function(o,u){let c=o.updateTime?Li(o.updateTime):Li(u);return c.isEqual(It.min())&&(c=Li(u)),new AR(c,o.transformResults||[])})(e,t)))):[]}function $R(i,t){return{documents:[fT(i,t.path)]}}function YR(i,t){const e={structuredQuery:{}},s=t.path;let o;t.collectionGroup!==null?(o=s,e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(o=s.popLast(),e.structuredQuery.from=[{collectionId:s.lastSegment()}]),e.parent=fT(i,o);const u=(function(g){if(g.length!==0)return pT(Fi.create(g,"and"))})(t.filters);u&&(e.structuredQuery.where=u);const c=(function(g){if(g.length!==0)return g.map((v=>(function(T){return{field:ao(T.field),direction:XR(T.dir)}})(v)))})(t.orderBy);c&&(e.structuredQuery.orderBy=c);const m=Ap(i,t.limit);return m!==null&&(e.structuredQuery.limit=m),t.startAt&&(e.structuredQuery.startAt=(function(g){return{before:g.inclusive,values:g.position}})(t.startAt)),t.endAt&&(e.structuredQuery.endAt=(function(g){return{before:!g.inclusive,values:g.position}})(t.endAt)),{ft:e,parent:o}}function QR(i){let t=FR(i.parent);const e=i.structuredQuery,s=e.from?e.from.length:0;let o=null;if(s>0){Zt(s===1,65062);const v=e.from[0];v.allDescendants?o=v.collectionId:t=t.child(v.collectionId)}let u=[];e.where&&(u=(function(E){const T=mT(E);return T instanceof Fi&&Hx(T)?T.getFilters():[T]})(e.where));let c=[];e.orderBy&&(c=(function(E){return E.map((T=>(function(P){return new Xh(oo(P.field),(function(X){switch(X){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(P.direction))})(T)))})(e.orderBy));let m=null;e.limit&&(m=(function(E){let T;return T=typeof E=="object"?E.value:E,gf(T)?null:T})(e.limit));let p=null;e.startAt&&(p=(function(E){const T=!!E.before,I=E.values||[];return new Kh(I,T)})(e.startAt));let g=null;return e.endAt&&(g=(function(E){const T=!E.before,I=E.values||[];return new Kh(I,T)})(e.endAt)),hR(t,o,c,u,m,"F",p,g)}function KR(i,t){const e=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Rt(28987,{purpose:o})}})(t.purpose);return e==null?null:{"goog-listen-tags":e}}function mT(i){return i.unaryFilter!==void 0?(function(e){switch(e.unaryFilter.op){case"IS_NAN":const s=oo(e.unaryFilter.field);return Le.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=oo(e.unaryFilter.field);return Le.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=oo(e.unaryFilter.field);return Le.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=oo(e.unaryFilter.field);return Le.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Rt(61313);default:return Rt(60726)}})(i):i.fieldFilter!==void 0?(function(e){return Le.create(oo(e.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Rt(58110);default:return Rt(50506)}})(e.fieldFilter.op),e.fieldFilter.value)})(i):i.compositeFilter!==void 0?(function(e){return Fi.create(e.compositeFilter.filters.map((s=>mT(s))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Rt(1026)}})(e.compositeFilter.op))})(i):Rt(30097,{filter:i})}function XR(i){return LR[i]}function ZR(i){return PR[i]}function JR(i){return UR[i]}function ao(i){return{fieldPath:i.canonicalString()}}function oo(i){return Xe.fromServerFormat(i.fieldPath)}function pT(i){return i instanceof Le?(function(e){if(e.op==="=="){if(mb(e.value))return{unaryFilter:{field:ao(e.field),op:"IS_NAN"}};if(db(e.value))return{unaryFilter:{field:ao(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(mb(e.value))return{unaryFilter:{field:ao(e.field),op:"IS_NOT_NAN"}};if(db(e.value))return{unaryFilter:{field:ao(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ao(e.field),op:ZR(e.op),value:e.value}}})(i):i instanceof Fi?(function(e){const s=e.getFilters().map((o=>pT(o)));return s.length===1?s[0]:{compositeFilter:{op:JR(e.op),filters:s}}})(i):Rt(54877,{filter:i})}function WR(i){const t=[];return i.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function gT(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}class ls{constructor(t,e,s,o,u=It.min(),c=It.min(),m=Je.EMPTY_BYTE_STRING,p=null){this.target=t,this.targetId=e,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=m,this.expectedCount=p}withSequenceNumber(t){return new ls(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,e){return new ls(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new ls(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new ls(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}class tI{constructor(t){this.yt=t}}function eI(i){const t=QR({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?Sp(t,t.limit,"L"):t}class nI{constructor(){this.Cn=new iI}addToCollectionParentIndex(t,e){return this.Cn.add(e),lt.resolve()}getCollectionParents(t,e){return lt.resolve(this.Cn.getEntries(e))}addFieldIndex(t,e){return lt.resolve()}deleteFieldIndex(t,e){return lt.resolve()}deleteAllFieldIndexes(t){return lt.resolve()}createTargetIndexes(t,e){return lt.resolve()}getDocumentsMatchingTarget(t,e){return lt.resolve(null)}getIndexType(t,e){return lt.resolve(0)}getFieldIndexes(t,e){return lt.resolve([])}getNextCollectionGroupToUpdate(t){return lt.resolve(null)}getMinOffset(t,e){return lt.resolve(ms.min())}getMinOffsetFromCollectionGroup(t,e){return lt.resolve(ms.min())}updateCollectionGroup(t,e,s){return lt.resolve()}updateIndexEntries(t,e){return lt.resolve()}}class iI{constructor(){this.index={}}add(t){const e=t.lastSegment(),s=t.popLast(),o=this.index[e]||new Pe(de.comparator),u=!o.has(s);return this.index[e]=o.add(s),u}has(t){const e=t.lastSegment(),s=t.popLast(),o=this.index[e];return o&&o.has(s)}getEntries(t){return(this.index[t]||new Pe(de.comparator)).toArray()}}const Cb={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},yT=41943040;class gn{static withCacheSize(t){return new gn(t,gn.DEFAULT_COLLECTION_PERCENTILE,gn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,e,s){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=s}}gn.DEFAULT_COLLECTION_PERCENTILE=10,gn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,gn.DEFAULT=new gn(yT,gn.DEFAULT_COLLECTION_PERCENTILE,gn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),gn.DISABLED=new gn(-1,0,0);class To{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new To(0)}static cr(){return new To(-1)}}const Rb="LruGarbageCollector",rI=1048576;function Ib([i,t],[e,s]){const o=qt(i,e);return o===0?qt(t,s):o}class sI{constructor(t){this.Ir=t,this.buffer=new Pe(Ib),this.Er=0}dr(){return++this.Er}Ar(t){const e=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(e);else{const s=this.buffer.last();Ib(e,s)<0&&(this.buffer=this.buffer.delete(s).add(e))}}get maxValue(){return this.buffer.last()[0]}}class aI{constructor(t,e,s){this.garbageCollector=t,this.asyncQueue=e,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){_t(Rb,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){Mo(e)?_t(Rb,"Ignoring IndexedDB error during garbage collection: ",e):await Oo(e)}await this.Vr(3e5)}))}}class oI{constructor(t,e){this.mr=t,this.params=e}calculateTargetCount(t,e){return this.mr.gr(t).next((s=>Math.floor(e/100*s)))}nthSequenceNumber(t,e){if(e===0)return lt.resolve(pf.ce);const s=new sI(e);return this.mr.forEachTarget(t,(o=>s.Ar(o.sequenceNumber))).next((()=>this.mr.pr(t,(o=>s.Ar(o))))).next((()=>s.maxValue))}removeTargets(t,e,s){return this.mr.removeTargets(t,e,s)}removeOrphanedDocuments(t,e){return this.mr.removeOrphanedDocuments(t,e)}collect(t,e){return this.params.cacheSizeCollectionThreshold===-1?(_t("LruGarbageCollector","Garbage collection skipped; disabled"),lt.resolve(Cb)):this.getCacheSize(t).next((s=>s<this.params.cacheSizeCollectionThreshold?(_t("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Cb):this.yr(t,e)))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,e){let s,o,u,c,m,p,g;const v=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(_t("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),o=this.params.maximumSequenceNumbersToCollect):o=E,c=Date.now(),this.nthSequenceNumber(t,o)))).next((E=>(s=E,m=Date.now(),this.removeTargets(t,s,e)))).next((E=>(u=E,p=Date.now(),this.removeOrphanedDocuments(t,s)))).next((E=>(g=Date.now(),ro()<=Ft.DEBUG&&_t("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-v}ms
	Determined least recently used ${o} in `+(m-c)+`ms
	Removed ${u} targets in `+(p-m)+`ms
	Removed ${E} documents in `+(g-p)+`ms
Total Duration: ${g-v}ms`),lt.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:E}))))}}function lI(i,t){return new oI(i,t)}class uI{constructor(){this.changes=new pa((t=>t.toString()),((t,e)=>t.isEqual(e))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,nn.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const s=this.changes.get(e);return s!==void 0?lt.resolve(s):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}class cI{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}class hI{constructor(t,e,s,o){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=s,this.indexManager=o}getDocument(t,e){let s=null;return this.documentOverlayCache.getOverlay(t,e).next((o=>(s=o,this.remoteDocumentCache.getEntry(t,e)))).next((o=>(s!==null&&iu(s.mutation,o,Cn.empty(),ce.now()),o)))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next((s=>this.getLocalViewOfDocuments(t,s,Ht()).next((()=>s))))}getLocalViewOfDocuments(t,e,s=Ht()){const o=ra();return this.populateOverlays(t,o,e).next((()=>this.computeViews(t,e,o,s).next((u=>{let c=$l();return u.forEach(((m,p)=>{c=c.insert(m,p.overlayedDocument)})),c}))))}getOverlayedDocuments(t,e){const s=ra();return this.populateOverlays(t,s,e).next((()=>this.computeViews(t,e,s,Ht())))}populateOverlays(t,e,s){const o=[];return s.forEach((u=>{e.has(u)||o.push(u)})),this.documentOverlayCache.getOverlays(t,o).next((u=>{u.forEach(((c,m)=>{e.set(c,m)}))}))}computeViews(t,e,s,o){let u=yr();const c=nu(),m=(function(){return nu()})();return e.forEach(((p,g)=>{const v=s.get(g.key);o.has(g.key)&&(v===void 0||v.mutation instanceof xs)?u=u.insert(g.key,g):v!==void 0?(c.set(g.key,v.mutation.getFieldMask()),iu(v.mutation,g,v.mutation.getFieldMask(),ce.now())):c.set(g.key,Cn.empty())})),this.recalculateAndSaveOverlays(t,u).next((p=>(p.forEach(((g,v)=>c.set(g,v))),e.forEach(((g,v)=>m.set(g,new cI(v,c.get(g)??null)))),m)))}recalculateAndSaveOverlays(t,e){const s=nu();let o=new me(((c,m)=>c-m)),u=Ht();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next((c=>{for(const m of c)m.keys().forEach((p=>{const g=e.get(p);if(g===null)return;let v=s.get(p)||Cn.empty();v=m.applyToLocalView(g,v),s.set(p,v);const E=(o.get(m.batchId)||Ht()).add(p);o=o.insert(m.batchId,E)}))})).next((()=>{const c=[],m=o.getReverseIterator();for(;m.hasNext();){const p=m.getNext(),g=p.key,v=p.value,E=Jx();v.forEach((T=>{if(!u.has(T)){const I=rT(e.get(T),s.get(T));I!==null&&E.set(T,I),u=u.add(T)}})),c.push(this.documentOverlayCache.saveOverlays(t,g,E))}return lt.waitFor(c)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next((s=>this.recalculateAndSaveOverlays(t,s)))}getDocumentsMatchingQuery(t,e,s,o){return(function(c){return At.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0})(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):fR(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,s,o):this.getDocumentsMatchingCollectionQuery(t,e,s,o)}getNextDocuments(t,e,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,s,o).next((u=>{const c=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,s.largestBatchId,o-u.size):lt.resolve(ra());let m=lu,p=u;return c.next((g=>lt.forEach(g,((v,E)=>(m<E.largestBatchId&&(m=E.largestBatchId),u.get(v)?lt.resolve():this.remoteDocumentCache.getEntry(t,v).next((T=>{p=p.insert(v,T)}))))).next((()=>this.populateOverlays(t,g,u))).next((()=>this.computeViews(t,p,g,Ht()))).next((v=>({batchId:m,changes:Zx(v)})))))}))}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new At(e)).next((s=>{let o=$l();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o}))}getDocumentsMatchingCollectionGroupQuery(t,e,s,o){const u=e.collectionGroup;let c=$l();return this.indexManager.getCollectionParents(t,u).next((m=>lt.forEach(m,(p=>{const g=(function(E,T){return new _f(T,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(e,p.child(u));return this.getDocumentsMatchingCollectionQuery(t,g,s,o).next((v=>{v.forEach(((E,T)=>{c=c.insert(E,T)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(t,e,s,o){let u;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,s.largestBatchId).next((c=>(u=c,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,s,u,o)))).next((c=>{u.forEach(((p,g)=>{const v=g.getKey();c.get(v)===null&&(c=c.insert(v,nn.newInvalidDocument(v)))}));let m=$l();return c.forEach(((p,g)=>{const v=u.get(p);v!==void 0&&iu(v.mutation,g,Cn.empty(),ce.now()),Ef(e,g)&&(m=m.insert(p,g))})),m}))}}class fI{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,e){return lt.resolve(this.Lr.get(e))}saveBundleMetadata(t,e){return this.Lr.set(e.id,(function(o){return{id:o.id,version:o.version,createTime:Li(o.createTime)}})(e)),lt.resolve()}getNamedQuery(t,e){return lt.resolve(this.kr.get(e))}saveNamedQuery(t,e){return this.kr.set(e.name,(function(o){return{name:o.name,query:eI(o.bundledQuery),readTime:Li(o.readTime)}})(e)),lt.resolve()}}class dI{constructor(){this.overlays=new me(At.comparator),this.qr=new Map}getOverlay(t,e){return lt.resolve(this.overlays.get(e))}getOverlays(t,e){const s=ra();return lt.forEach(e,(o=>this.getOverlay(t,o).next((u=>{u!==null&&s.set(o,u)})))).next((()=>s))}saveOverlays(t,e,s){return s.forEach(((o,u)=>{this.St(t,e,u)})),lt.resolve()}removeOverlaysForBatchId(t,e,s){const o=this.qr.get(s);return o!==void 0&&(o.forEach((u=>this.overlays=this.overlays.remove(u))),this.qr.delete(s)),lt.resolve()}getOverlaysForCollection(t,e,s){const o=ra(),u=e.length+1,c=new At(e.child("")),m=this.overlays.getIteratorFrom(c);for(;m.hasNext();){const p=m.getNext().value,g=p.getKey();if(!e.isPrefixOf(g.path))break;g.path.length===u&&p.largestBatchId>s&&o.set(p.getKey(),p)}return lt.resolve(o)}getOverlaysForCollectionGroup(t,e,s,o){let u=new me(((g,v)=>g-v));const c=this.overlays.getIterator();for(;c.hasNext();){const g=c.getNext().value;if(g.getKey().getCollectionGroup()===e&&g.largestBatchId>s){let v=u.get(g.largestBatchId);v===null&&(v=ra(),u=u.insert(g.largestBatchId,v)),v.set(g.getKey(),g)}}const m=ra(),p=u.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((g,v)=>m.set(g,v))),!(m.size()>=o)););return lt.resolve(m)}St(t,e,s){const o=this.overlays.get(s.key);if(o!==null){const c=this.qr.get(o.largestBatchId).delete(s.key);this.qr.set(o.largestBatchId,c)}this.overlays=this.overlays.insert(s.key,new DR(e,s));let u=this.qr.get(e);u===void 0&&(u=Ht(),this.qr.set(e,u)),this.qr.set(e,u.add(s.key))}}class mI{constructor(){this.sessionToken=Je.EMPTY_BYTE_STRING}getSessionToken(t){return lt.resolve(this.sessionToken)}setSessionToken(t,e){return this.sessionToken=e,lt.resolve()}}class Eg{constructor(){this.Qr=new Pe(Fe.$r),this.Ur=new Pe(Fe.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,e){const s=new Fe(t,e);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(t,e){t.forEach((s=>this.addReference(s,e)))}removeReference(t,e){this.Gr(new Fe(t,e))}zr(t,e){t.forEach((s=>this.removeReference(s,e)))}jr(t){const e=new At(new de([])),s=new Fe(e,t),o=new Fe(e,t+1),u=[];return this.Ur.forEachInRange([s,o],(c=>{this.Gr(c),u.push(c.key)})),u}Jr(){this.Qr.forEach((t=>this.Gr(t)))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const e=new At(new de([])),s=new Fe(e,t),o=new Fe(e,t+1);let u=Ht();return this.Ur.forEachInRange([s,o],(c=>{u=u.add(c.key)})),u}containsKey(t){const e=new Fe(t,0),s=this.Qr.firstAfterOrEqual(e);return s!==null&&t.isEqual(s.key)}}class Fe{constructor(t,e){this.key=t,this.Yr=e}static $r(t,e){return At.comparator(t.key,e.key)||qt(t.Yr,e.Yr)}static Kr(t,e){return qt(t.Yr,e.Yr)||At.comparator(t.key,e.key)}}class pI{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.tr=1,this.Zr=new Pe(Fe.$r)}checkEmpty(t){return lt.resolve(this.mutationQueue.length===0)}addMutationBatch(t,e,s,o){const u=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new IR(u,e,s,o);this.mutationQueue.push(c);for(const m of o)this.Zr=this.Zr.add(new Fe(m.key,u)),this.indexManager.addToCollectionParentIndex(t,m.key.path.popLast());return lt.resolve(c)}lookupMutationBatch(t,e){return lt.resolve(this.Xr(e))}getNextMutationBatchAfterBatchId(t,e){const s=e+1,o=this.ei(s),u=o<0?0:o;return lt.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return lt.resolve(this.mutationQueue.length===0?fg:this.tr-1)}getAllMutationBatches(t){return lt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const s=new Fe(e,0),o=new Fe(e,Number.POSITIVE_INFINITY),u=[];return this.Zr.forEachInRange([s,o],(c=>{const m=this.Xr(c.Yr);u.push(m)})),lt.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(t,e){let s=new Pe(qt);return e.forEach((o=>{const u=new Fe(o,0),c=new Fe(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([u,c],(m=>{s=s.add(m.Yr)}))})),lt.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(t,e){const s=e.path,o=s.length+1;let u=s;At.isDocumentKey(u)||(u=u.child(""));const c=new Fe(new At(u),0);let m=new Pe(qt);return this.Zr.forEachWhile((p=>{const g=p.key.path;return!!s.isPrefixOf(g)&&(g.length===o&&(m=m.add(p.Yr)),!0)}),c),lt.resolve(this.ti(m))}ti(t){const e=[];return t.forEach((s=>{const o=this.Xr(s);o!==null&&e.push(o)})),e}removeMutationBatch(t,e){Zt(this.ni(e.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return lt.forEach(e.mutations,(o=>{const u=new Fe(o.key,e.batchId);return s=s.delete(u),this.referenceDelegate.markPotentiallyOrphaned(t,o.key)})).next((()=>{this.Zr=s}))}ir(t){}containsKey(t,e){const s=new Fe(e,0),o=this.Zr.firstAfterOrEqual(s);return lt.resolve(e.isEqual(o&&o.key))}performConsistencyCheck(t){return this.mutationQueue.length,lt.resolve()}ni(t,e){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const e=this.ei(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}class gI{constructor(t){this.ri=t,this.docs=(function(){return new me(At.comparator)})(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const s=e.key,o=this.docs.get(s),u=o?o.size:0,c=this.ri(e);return this.docs=this.docs.insert(s,{document:e.mutableCopy(),size:c}),this.size+=c-u,this.indexManager.addToCollectionParentIndex(t,s.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const s=this.docs.get(e);return lt.resolve(s?s.document.mutableCopy():nn.newInvalidDocument(e))}getEntries(t,e){let s=yr();return e.forEach((o=>{const u=this.docs.get(o);s=s.insert(o,u?u.document.mutableCopy():nn.newInvalidDocument(o))})),lt.resolve(s)}getDocumentsMatchingQuery(t,e,s,o){let u=yr();const c=e.path,m=new At(c.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(m);for(;p.hasNext();){const{key:g,value:{document:v}}=p.getNext();if(!c.isPrefixOf(g.path))break;g.path.length>c.length+1||qC(FC(v),s)<=0||(o.has(v.key)||Ef(e,v))&&(u=u.insert(v.key,v.mutableCopy()))}return lt.resolve(u)}getAllFromCollectionGroup(t,e,s,o){Rt(9500)}ii(t,e){return lt.forEach(this.docs,(s=>e(s)))}newChangeBuffer(t){return new yI(this)}getSize(t){return lt.resolve(this.size)}}class yI extends uI{constructor(t){super(),this.Nr=t}applyChanges(t){const e=[];return this.changes.forEach(((s,o)=>{o.isValidDocument()?e.push(this.Nr.addEntry(t,o)):this.Nr.removeEntry(s)})),lt.waitFor(e)}getFromCache(t,e){return this.Nr.getEntry(t,e)}getAllFromCache(t,e){return this.Nr.getEntries(t,e)}}class _I{constructor(t){this.persistence=t,this.si=new pa((e=>pg(e)),gg),this.lastRemoteSnapshotVersion=It.min(),this.highestTargetId=0,this.oi=0,this._i=new Eg,this.targetCount=0,this.ai=To.ur()}forEachTarget(t,e){return this.si.forEach(((s,o)=>e(o))),lt.resolve()}getLastRemoteSnapshotVersion(t){return lt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return lt.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),lt.resolve(this.highestTargetId)}setTargetsMetadata(t,e,s){return s&&(this.lastRemoteSnapshotVersion=s),e>this.oi&&(this.oi=e),lt.resolve()}Pr(t){this.si.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.ai=new To(e),this.highestTargetId=e),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,e){return this.Pr(e),this.targetCount+=1,lt.resolve()}updateTargetData(t,e){return this.Pr(e),lt.resolve()}removeTargetData(t,e){return this.si.delete(e.target),this._i.jr(e.targetId),this.targetCount-=1,lt.resolve()}removeTargets(t,e,s){let o=0;const u=[];return this.si.forEach(((c,m)=>{m.sequenceNumber<=e&&s.get(m.targetId)===null&&(this.si.delete(c),u.push(this.removeMatchingKeysForTargetId(t,m.targetId)),o++)})),lt.waitFor(u).next((()=>o))}getTargetCount(t){return lt.resolve(this.targetCount)}getTargetData(t,e){const s=this.si.get(e)||null;return lt.resolve(s)}addMatchingKeys(t,e,s){return this._i.Wr(e,s),lt.resolve()}removeMatchingKeys(t,e,s){this._i.zr(e,s);const o=this.persistence.referenceDelegate,u=[];return o&&e.forEach((c=>{u.push(o.markPotentiallyOrphaned(t,c))})),lt.waitFor(u)}removeMatchingKeysForTargetId(t,e){return this._i.jr(e),lt.resolve()}getMatchingKeysForTargetId(t,e){const s=this._i.Hr(e);return lt.resolve(s)}containsKey(t,e){return lt.resolve(this._i.containsKey(e))}}class _T{constructor(t,e){this.ui={},this.overlays={},this.ci=new pf(0),this.li=!1,this.li=!0,this.hi=new mI,this.referenceDelegate=t(this),this.Pi=new _I(this),this.indexManager=new nI,this.remoteDocumentCache=(function(o){return new gI(o)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new tI(e),this.Ii=new fI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new dI,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let s=this.ui[t.toKey()];return s||(s=new pI(e,this.referenceDelegate),this.ui[t.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,e,s){_t("MemoryPersistence","Starting transaction:",t);const o=new vI(this.ci.next());return this.referenceDelegate.Ei(),s(o).next((u=>this.referenceDelegate.di(o).next((()=>u)))).toPromise().then((u=>(o.raiseOnCommittedEvent(),u)))}Ai(t,e){return lt.or(Object.values(this.ui).map((s=>()=>s.containsKey(t,e))))}}class vI extends GC{constructor(t){super(),this.currentSequenceNumber=t}}class xg{constructor(t){this.persistence=t,this.Ri=new Eg,this.Vi=null}static mi(t){return new xg(t)}get fi(){if(this.Vi)return this.Vi;throw Rt(60996)}addReference(t,e,s){return this.Ri.addReference(s,e),this.fi.delete(s.toString()),lt.resolve()}removeReference(t,e,s){return this.Ri.removeReference(s,e),this.fi.add(s.toString()),lt.resolve()}markPotentiallyOrphaned(t,e){return this.fi.add(e.toString()),lt.resolve()}removeTarget(t,e){this.Ri.jr(e.targetId).forEach((o=>this.fi.add(o.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(t,e.targetId).next((o=>{o.forEach((u=>this.fi.add(u.toString())))})).next((()=>s.removeTargetData(t,e)))}Ei(){this.Vi=new Set}di(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return lt.forEach(this.fi,(s=>{const o=At.fromPath(s);return this.gi(t,o).next((u=>{u||e.removeEntry(o,It.min())}))})).next((()=>(this.Vi=null,e.apply(t))))}updateLimboDocument(t,e){return this.gi(t,e).next((s=>{s?this.fi.delete(e.toString()):this.fi.add(e.toString())}))}Ti(t){return 0}gi(t,e){return lt.or([()=>lt.resolve(this.Ri.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Ai(t,e)])}}class Wh{constructor(t,e){this.persistence=t,this.pi=new pa((s=>QC(s.path)),((s,o)=>s.isEqual(o))),this.garbageCollector=lI(this,e)}static mi(t,e){return new Wh(t,e)}Ei(){}di(t){return lt.resolve()}forEachTarget(t,e){return this.persistence.getTargetCache().forEachTarget(t,e)}gr(t){const e=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next((s=>e.next((o=>s+o))))}wr(t){let e=0;return this.pr(t,(s=>{e++})).next((()=>e))}pr(t,e){return lt.forEach(this.pi,((s,o)=>this.br(t,s,o).next((u=>u?lt.resolve():e(o)))))}removeTargets(t,e,s){return this.persistence.getTargetCache().removeTargets(t,e,s)}removeOrphanedDocuments(t,e){let s=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.ii(t,(c=>this.br(t,c,e).next((m=>{m||(s++,u.removeEntry(c,It.min()))})))).next((()=>u.apply(t))).next((()=>s))}markPotentiallyOrphaned(t,e){return this.pi.set(e,t.currentSequenceNumber),lt.resolve()}removeTarget(t,e){const s=e.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,s)}addReference(t,e,s){return this.pi.set(s,t.currentSequenceNumber),lt.resolve()}removeReference(t,e,s){return this.pi.set(s,t.currentSequenceNumber),lt.resolve()}updateLimboDocument(t,e){return this.pi.set(e,t.currentSequenceNumber),lt.resolve()}Ti(t){let e=t.key.toString().length;return t.isFoundDocument()&&(e+=Ah(t.data.value)),e}br(t,e,s){return lt.or([()=>this.persistence.Ai(t,e),()=>this.persistence.getTargetCache().containsKey(t,e),()=>{const o=this.pi.get(e);return lt.resolve(o!==void 0&&o>s)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}class Tg{constructor(t,e,s,o){this.targetId=t,this.fromCache=e,this.Es=s,this.ds=o}static As(t,e){let s=Ht(),o=Ht();for(const u of e.docChanges)switch(u.type){case 0:s=s.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new Tg(t,e.fromCache,s,o)}}class bI{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}class EI{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return GS()?8:$C(rn())>0?6:4})()}initialize(t,e){this.ps=t,this.indexManager=e,this.Rs=!0}getDocumentsMatchingQuery(t,e,s,o){const u={result:null};return this.ys(t,e).next((c=>{u.result=c})).next((()=>{if(!u.result)return this.ws(t,e,o,s).next((c=>{u.result=c}))})).next((()=>{if(u.result)return;const c=new bI;return this.Ss(t,e,c).next((m=>{if(u.result=m,this.Vs)return this.bs(t,e,c,m.size)}))})).next((()=>u.result))}bs(t,e,s,o){return s.documentReadCount<this.fs?(ro()<=Ft.DEBUG&&_t("QueryEngine","SDK will not create cache indexes for query:",so(e),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),lt.resolve()):(ro()<=Ft.DEBUG&&_t("QueryEngine","Query:",so(e),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.gs*o?(ro()<=Ft.DEBUG&&_t("QueryEngine","The SDK decides to create cache indexes for query:",so(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Vi(e))):lt.resolve())}ys(t,e){if(_b(e))return lt.resolve(null);let s=Vi(e);return this.indexManager.getIndexType(t,s).next((o=>o===0?null:(e.limit!==null&&o===1&&(e=Sp(e,null,"F"),s=Vi(e)),this.indexManager.getDocumentsMatchingTarget(t,s).next((u=>{const c=Ht(...u);return this.ps.getDocuments(t,c).next((m=>this.indexManager.getMinOffset(t,s).next((p=>{const g=this.Ds(e,m);return this.Cs(e,g,c,p.readTime)?this.ys(t,Sp(e,null,"F")):this.vs(t,g,e,p)}))))})))))}ws(t,e,s,o){return _b(e)||o.isEqual(It.min())?lt.resolve(null):this.ps.getDocuments(t,s).next((u=>{const c=this.Ds(e,u);return this.Cs(e,c,s,o)?lt.resolve(null):(ro()<=Ft.DEBUG&&_t("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),so(e)),this.vs(t,c,e,BC(o,lu)).next((m=>m)))}))}Ds(t,e){let s=new Pe(Kx(t));return e.forEach(((o,u)=>{Ef(t,u)&&(s=s.add(u))})),s}Cs(t,e,s,o){if(t.limit===null)return!1;if(s.size!==e.size)return!0;const u=t.limitType==="F"?e.last():e.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Ss(t,e,s){return ro()<=Ft.DEBUG&&_t("QueryEngine","Using full collection scan to execute query:",so(e)),this.ps.getDocumentsMatchingQuery(t,e,ms.min(),s)}vs(t,e,s,o){return this.ps.getDocumentsMatchingQuery(t,s,o).next((u=>(e.forEach((c=>{u=u.insert(c.key,c)})),u)))}}const wg="LocalStore",xI=3e8;class TI{constructor(t,e,s,o){this.persistence=t,this.Fs=e,this.serializer=o,this.Ms=new me(qt),this.xs=new pa((u=>pg(u)),gg),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(s)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new hI(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(e=>t.collect(e,this.Ms)))}}function wI(i,t,e,s){return new TI(i,t,e,s)}async function vT(i,t){const e=Mt(i);return await e.persistence.runTransaction("Handle user change","readonly",(s=>{let o;return e.mutationQueue.getAllMutationBatches(s).next((u=>(o=u,e.Bs(t),e.mutationQueue.getAllMutationBatches(s)))).next((u=>{const c=[],m=[];let p=Ht();for(const g of o){c.push(g.batchId);for(const v of g.mutations)p=p.add(v.key)}for(const g of u){m.push(g.batchId);for(const v of g.mutations)p=p.add(v.key)}return e.localDocuments.getDocuments(s,p).next((g=>({Ls:g,removedBatchIds:c,addedBatchIds:m})))}))}))}function SI(i,t){const e=Mt(i);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const o=t.batch.keys(),u=e.Ns.newChangeBuffer({trackRemovals:!0});return(function(m,p,g,v){const E=g.batch,T=E.keys();let I=lt.resolve();return T.forEach((P=>{I=I.next((()=>v.getEntry(p,P))).next((B=>{const X=g.docVersions.get(P);Zt(X!==null,48541),B.version.compareTo(X)<0&&(E.applyToRemoteDocument(B,g),B.isValidDocument()&&(B.setReadTime(g.commitVersion),v.addEntry(B)))}))})),I.next((()=>m.mutationQueue.removeMutationBatch(p,E)))})(e,s,t,u).next((()=>u.apply(s))).next((()=>e.mutationQueue.performConsistencyCheck(s))).next((()=>e.documentOverlayCache.removeOverlaysForBatchId(s,o,t.batch.batchId))).next((()=>e.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(m){let p=Ht();for(let g=0;g<m.mutationResults.length;++g)m.mutationResults[g].transformResults.length>0&&(p=p.add(m.batch.mutations[g].key));return p})(t)))).next((()=>e.localDocuments.getDocuments(s,o)))}))}function bT(i){const t=Mt(i);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.Pi.getLastRemoteSnapshotVersion(e)))}function AI(i,t){const e=Mt(i),s=t.snapshotVersion;let o=e.Ms;return e.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const c=e.Ns.newChangeBuffer({trackRemovals:!0});o=e.Ms;const m=[];t.targetChanges.forEach(((v,E)=>{const T=o.get(E);if(!T)return;m.push(e.Pi.removeMatchingKeys(u,v.removedDocuments,E).next((()=>e.Pi.addMatchingKeys(u,v.addedDocuments,E))));let I=T.withSequenceNumber(u.currentSequenceNumber);t.targetMismatches.get(E)!==null?I=I.withResumeToken(Je.EMPTY_BYTE_STRING,It.min()).withLastLimboFreeSnapshotVersion(It.min()):v.resumeToken.approximateByteSize()>0&&(I=I.withResumeToken(v.resumeToken,s)),o=o.insert(E,I),(function(B,X,ft){return B.resumeToken.approximateByteSize()===0||X.snapshotVersion.toMicroseconds()-B.snapshotVersion.toMicroseconds()>=xI?!0:ft.addedDocuments.size+ft.modifiedDocuments.size+ft.removedDocuments.size>0})(T,I,v)&&m.push(e.Pi.updateTargetData(u,I))}));let p=yr(),g=Ht();if(t.documentUpdates.forEach((v=>{t.resolvedLimboDocuments.has(v)&&m.push(e.persistence.referenceDelegate.updateLimboDocument(u,v))})),m.push(NI(u,c,t.documentUpdates).next((v=>{p=v.ks,g=v.qs}))),!s.isEqual(It.min())){const v=e.Pi.getLastRemoteSnapshotVersion(u).next((E=>e.Pi.setTargetsMetadata(u,u.currentSequenceNumber,s)));m.push(v)}return lt.waitFor(m).next((()=>c.apply(u))).next((()=>e.localDocuments.getLocalViewOfDocuments(u,p,g))).next((()=>p))})).then((u=>(e.Ms=o,u)))}function NI(i,t,e){let s=Ht(),o=Ht();return e.forEach((u=>s=s.add(u))),t.getEntries(i,s).next((u=>{let c=yr();return e.forEach(((m,p)=>{const g=u.get(m);p.isFoundDocument()!==g.isFoundDocument()&&(o=o.add(m)),p.isNoDocument()&&p.version.isEqual(It.min())?(t.removeEntry(m,p.readTime),c=c.insert(m,p)):!g.isValidDocument()||p.version.compareTo(g.version)>0||p.version.compareTo(g.version)===0&&g.hasPendingWrites?(t.addEntry(p),c=c.insert(m,p)):_t(wg,"Ignoring outdated watch update for ",m,". Current version:",g.version," Watch version:",p.version)})),{ks:c,qs:o}}))}function CI(i,t){const e=Mt(i);return e.persistence.runTransaction("Get next mutation batch","readonly",(s=>(t===void 0&&(t=fg),e.mutationQueue.getNextMutationBatchAfterBatchId(s,t))))}function RI(i,t){const e=Mt(i);return e.persistence.runTransaction("Allocate target","readwrite",(s=>{let o;return e.Pi.getTargetData(s,t).next((u=>u?(o=u,lt.resolve(o)):e.Pi.allocateTargetId(s).next((c=>(o=new ls(t,c,"TargetPurposeListen",s.currentSequenceNumber),e.Pi.addTargetData(s,o).next((()=>o)))))))})).then((s=>{const o=e.Ms.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(e.Ms=e.Ms.insert(s.targetId,s),e.xs.set(t,s.targetId)),s}))}async function Ip(i,t,e){const s=Mt(i),o=s.Ms.get(t),u=e?"readwrite":"readwrite-primary";try{e||await s.persistence.runTransaction("Release target",u,(c=>s.persistence.referenceDelegate.removeTarget(c,o)))}catch(c){if(!Mo(c))throw c;_t(wg,`Failed to update sequence numbers for target ${t}: ${c}`)}s.Ms=s.Ms.remove(t),s.xs.delete(o.target)}function Db(i,t,e){const s=Mt(i);let o=It.min(),u=Ht();return s.persistence.runTransaction("Execute query","readwrite",(c=>(function(p,g,v){const E=Mt(p),T=E.xs.get(v);return T!==void 0?lt.resolve(E.Ms.get(T)):E.Pi.getTargetData(g,v)})(s,c,Vi(t)).next((m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(c,m.targetId).next((p=>{u=p}))})).next((()=>s.Fs.getDocumentsMatchingQuery(c,t,e?o:It.min(),e?u:Ht()))).next((m=>(II(s,mR(t),m),{documents:m,Qs:u})))))}function II(i,t,e){let s=i.Os.get(t)||It.min();e.forEach(((o,u)=>{u.readTime.compareTo(s)>0&&(s=u.readTime)})),i.Os.set(t,s)}class Ob{constructor(){this.activeTargetIds=bR()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class DI{constructor(){this.Mo=new Ob,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,s){}addLocalQueryTarget(t,e=!0){return e&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,e,s){this.xo[t]=e}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new Ob,Promise.resolve()}handleUserChange(t,e,s){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}class OI{Oo(t){}shutdown(){}}const Mb="ConnectivityMonitor";class kb{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){_t(Mb,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){_t(Mb,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let dh=null;function Dp(){return dh===null?dh=(function(){return 268435456+Math.round(2147483648*Math.random())})():dh++,"0x"+dh.toString(16)}const Zm="RestConnection",MI={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class kI{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const e=t.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=e+"://"+t.host,this.Ko=`projects/${s}/databases/${o}`,this.Wo=this.databaseId.database===Yh?`project_id=${s}`:`project_id=${s}&database_id=${o}`}Go(t,e,s,o,u){const c=Dp(),m=this.zo(t,e.toUriEncodedString());_t(Zm,`Sending RPC '${t}' ${c}:`,m,s);const p={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(p,o,u);const{host:g}=new URL(m),v=Co(g);return this.Jo(t,m,p,s,v).then((E=>(_t(Zm,`Received RPC '${t}' ${c}: `,E),E)),(E=>{throw vo(Zm,`RPC '${t}' ${c} failed with error: `,E,"url: ",m,"request:",s),E}))}Ho(t,e,s,o,u,c){return this.Go(t,e,s,o,u)}jo(t,e,s){t["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Do})(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach(((o,u)=>t[u]=o)),s&&s.headers.forEach(((o,u)=>t[u]=o))}zo(t,e){const s=MI[t];return`${this.Uo}/v1/${e}:${s}`}terminate(){}}class VI{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}const tn="WebChannelConnection";class jI extends kI{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,e,s,o,u){const c=Dp();return new Promise(((m,p)=>{const g=new wx;g.setWithCredentials(!0),g.listenOnce(Sx.COMPLETE,(()=>{try{switch(g.getLastErrorCode()){case Sh.NO_ERROR:const E=g.getResponseJson();_t(tn,`XHR for RPC '${t}' ${c} received:`,JSON.stringify(E)),m(E);break;case Sh.TIMEOUT:_t(tn,`RPC '${t}' ${c} timed out`),p(new Et(ct.DEADLINE_EXCEEDED,"Request time out"));break;case Sh.HTTP_ERROR:const T=g.getStatus();if(_t(tn,`RPC '${t}' ${c} failed with status:`,T,"response text:",g.getResponseText()),T>0){let I=g.getResponseJson();Array.isArray(I)&&(I=I[0]);const P=I?.error;if(P&&P.status&&P.message){const B=(function(ft){const $=ft.toLowerCase().replace(/_/g,"-");return Object.values(ct).indexOf($)>=0?$:ct.UNKNOWN})(P.status);p(new Et(B,P.message))}else p(new Et(ct.UNKNOWN,"Server responded with status "+g.getStatus()))}else p(new Et(ct.UNAVAILABLE,"Connection failed."));break;default:Rt(9055,{l_:t,streamId:c,h_:g.getLastErrorCode(),P_:g.getLastError()})}}finally{_t(tn,`RPC '${t}' ${c} completed.`)}}));const v=JSON.stringify(o);_t(tn,`RPC '${t}' ${c} sending request:`,o),g.send(e,"POST",v,s,15)}))}T_(t,e,s){const o=Dp(),u=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],c=Cx(),m=Nx(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(p.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(p.useFetchStreams=!0),this.jo(p.initMessageHeaders,e,s),p.encodeInitMessageHeaders=!0;const v=u.join("");_t(tn,`Creating RPC '${t}' stream ${o}: ${v}`,p);const E=c.createWebChannel(v,p);this.I_(E);let T=!1,I=!1;const P=new VI({Yo:X=>{I?_t(tn,`Not sending because RPC '${t}' stream ${o} is closed:`,X):(T||(_t(tn,`Opening RPC '${t}' stream ${o} transport.`),E.open(),T=!0),_t(tn,`RPC '${t}' stream ${o} sending:`,X),E.send(X))},Zo:()=>E.close()}),B=(X,ft,$)=>{X.listen(ft,(tt=>{try{$(tt)}catch(nt){setTimeout((()=>{throw nt}),0)}}))};return B(E,Gl.EventType.OPEN,(()=>{I||(_t(tn,`RPC '${t}' stream ${o} transport opened.`),P.o_())})),B(E,Gl.EventType.CLOSE,(()=>{I||(I=!0,_t(tn,`RPC '${t}' stream ${o} transport closed`),P.a_(),this.E_(E))})),B(E,Gl.EventType.ERROR,(X=>{I||(I=!0,vo(tn,`RPC '${t}' stream ${o} transport errored. Name:`,X.name,"Message:",X.message),P.a_(new Et(ct.UNAVAILABLE,"The operation could not be completed")))})),B(E,Gl.EventType.MESSAGE,(X=>{if(!I){const ft=X.data[0];Zt(!!ft,16349);const $=ft,tt=$?.error||$[0]?.error;if(tt){_t(tn,`RPC '${t}' stream ${o} received error:`,tt);const nt=tt.status;let mt=(function(A){const R=Oe[A];if(R!==void 0)return oT(R)})(nt),ht=tt.message;mt===void 0&&(mt=ct.INTERNAL,ht="Unknown error status: "+nt+" with message "+tt.message),I=!0,P.a_(new Et(mt,ht)),E.close()}else _t(tn,`RPC '${t}' stream ${o} received:`,ft),P.u_(ft)}})),B(m,Ax.STAT_EVENT,(X=>{X.stat===vp.PROXY?_t(tn,`RPC '${t}' stream ${o} detected buffering proxy`):X.stat===vp.NOPROXY&&_t(tn,`RPC '${t}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{P.__()}),0),P}terminate(){this.c_.forEach((t=>t.close())),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter((e=>e===t))}}function Jm(){return typeof document<"u"?document:null}function Sf(i){return new zR(i,!0)}class ET{constructor(t,e,s=1e3,o=1.5,u=6e4){this.Mi=t,this.timerId=e,this.d_=s,this.A_=o,this.R_=u,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const e=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),o=Math.max(0,e-s);o>0&&_t("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${e} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),t()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const Vb="PersistentStream";class xT{constructor(t,e,s,o,u,c,m,p){this.Mi=t,this.S_=s,this.b_=o,this.connection=u,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=m,this.listener=p,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new ET(t,e)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,e){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():e&&e.code===ct.RESOURCE_EXHAUSTED?(gr(e.toString()),gr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):e&&e.code===ct.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(e)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),e=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,o])=>{this.D_===e&&this.G_(s,o)}),(s=>{t((()=>{const o=new Et(ct.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(o)}))}))}G_(t,e){const s=this.W_(this.D_);this.stream=this.j_(t,e),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{s((()=>this.z_(o)))})),this.stream.onMessage((o=>{s((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(t){return _t(Vb,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return e=>{this.Mi.enqueueAndForget((()=>this.D_===t?e():(_t(Vb,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class LI extends xT{constructor(t,e,s,o,u,c){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,s,o,c),this.serializer=u}j_(t,e){return this.connection.T_("Listen",t,e)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const e=qR(this.serializer,t),s=(function(u){if(!("targetChange"in u))return It.min();const c=u.targetChange;return c.targetIds&&c.targetIds.length?It.min():c.readTime?Li(c.readTime):It.min()})(t);return this.listener.H_(e,s)}Y_(t){const e={};e.database=Rp(this.serializer),e.addTarget=(function(u,c){let m;const p=c.target;if(m=wp(p)?{documents:$R(u,p)}:{query:YR(u,p).ft},m.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){m.resumeToken=cT(u,c.resumeToken);const g=Ap(u,c.expectedCount);g!==null&&(m.expectedCount=g)}else if(c.snapshotVersion.compareTo(It.min())>0){m.readTime=Jh(u,c.snapshotVersion.toTimestamp());const g=Ap(u,c.expectedCount);g!==null&&(m.expectedCount=g)}return m})(this.serializer,t);const s=KR(this.serializer,t);s&&(e.labels=s),this.q_(e)}Z_(t){const e={};e.database=Rp(this.serializer),e.removeTarget=t,this.q_(e)}}class PI extends xT{constructor(t,e,s,o,u,c){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,s,o,c),this.serializer=u}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,e){return this.connection.T_("Write",t,e)}J_(t){return Zt(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,Zt(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){Zt(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const e=GR(t.writeResults,t.commitTime),s=Li(t.commitTime);return this.listener.na(s,e)}ra(){const t={};t.database=Rp(this.serializer),this.q_(t)}ea(t){const e={streamToken:this.lastStreamToken,writes:t.map((s=>HR(this.serializer,s)))};this.q_(e)}}class UI{}class zI extends UI{constructor(t,e,s,o){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=s,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new Et(ct.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,e,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,c])=>this.connection.Go(t,Np(e,s),o,u,c))).catch((u=>{throw u.name==="FirebaseError"?(u.code===ct.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Et(ct.UNKNOWN,u.toString())}))}Ho(t,e,s,o,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,m])=>this.connection.Ho(t,Np(e,s),o,c,m,u))).catch((c=>{throw c.name==="FirebaseError"?(c.code===ct.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new Et(ct.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class BI{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const e=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(gr(e),this.aa=!1):_t("OnlineStateTracker",e)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const da="RemoteStore";class FI{constructor(t,e,s,o,u){this.localStore=t,this.datastore=e,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=u,this.Aa.Oo((c=>{s.enqueueAndForget((async()=>{ga(this)&&(_t(da,"Restarting streams for network reachability change."),await(async function(p){const g=Mt(p);g.Ea.add(4),await Ru(g),g.Ra.set("Unknown"),g.Ea.delete(4),await Af(g)})(this))}))})),this.Ra=new BI(s,o)}}async function Af(i){if(ga(i))for(const t of i.da)await t(!0)}async function Ru(i){for(const t of i.da)await t(!1)}function TT(i,t){const e=Mt(i);e.Ia.has(t.targetId)||(e.Ia.set(t.targetId,t),Cg(e)?Ng(e):ko(e).O_()&&Ag(e,t))}function Sg(i,t){const e=Mt(i),s=ko(e);e.Ia.delete(t),s.O_()&&wT(e,t),e.Ia.size===0&&(s.O_()?s.L_():ga(e)&&e.Ra.set("Unknown"))}function Ag(i,t){if(i.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(It.min())>0){const e=i.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(e)}ko(i).Y_(t)}function wT(i,t){i.Va.Ue(t),ko(i).Z_(t)}function Ng(i){i.Va=new jR({getRemoteKeysForTarget:t=>i.remoteSyncer.getRemoteKeysForTarget(t),At:t=>i.Ia.get(t)||null,ht:()=>i.datastore.serializer.databaseId}),ko(i).start(),i.Ra.ua()}function Cg(i){return ga(i)&&!ko(i).x_()&&i.Ia.size>0}function ga(i){return Mt(i).Ea.size===0}function ST(i){i.Va=void 0}async function qI(i){i.Ra.set("Online")}async function HI(i){i.Ia.forEach(((t,e)=>{Ag(i,t)}))}async function GI(i,t){ST(i),Cg(i)?(i.Ra.ha(t),Ng(i)):i.Ra.set("Unknown")}async function $I(i,t,e){if(i.Ra.set("Online"),t instanceof uT&&t.state===2&&t.cause)try{await(async function(o,u){const c=u.cause;for(const m of u.targetIds)o.Ia.has(m)&&(await o.remoteSyncer.rejectListen(m,c),o.Ia.delete(m),o.Va.removeTarget(m))})(i,t)}catch(s){_t(da,"Failed to remove targets %s: %s ",t.targetIds.join(","),s),await tf(i,s)}else if(t instanceof Rh?i.Va.Ze(t):t instanceof lT?i.Va.st(t):i.Va.tt(t),!e.isEqual(It.min()))try{const s=await bT(i.localStore);e.compareTo(s)>=0&&await(function(u,c){const m=u.Va.Tt(c);return m.targetChanges.forEach(((p,g)=>{if(p.resumeToken.approximateByteSize()>0){const v=u.Ia.get(g);v&&u.Ia.set(g,v.withResumeToken(p.resumeToken,c))}})),m.targetMismatches.forEach(((p,g)=>{const v=u.Ia.get(p);if(!v)return;u.Ia.set(p,v.withResumeToken(Je.EMPTY_BYTE_STRING,v.snapshotVersion)),wT(u,p);const E=new ls(v.target,p,g,v.sequenceNumber);Ag(u,E)})),u.remoteSyncer.applyRemoteEvent(m)})(i,e)}catch(s){_t(da,"Failed to raise snapshot:",s),await tf(i,s)}}async function tf(i,t,e){if(!Mo(t))throw t;i.Ea.add(1),await Ru(i),i.Ra.set("Offline"),e||(e=()=>bT(i.localStore)),i.asyncQueue.enqueueRetryable((async()=>{_t(da,"Retrying IndexedDB access"),await e(),i.Ea.delete(1),await Af(i)}))}function AT(i,t){return t().catch((e=>tf(i,e,t)))}async function Nf(i){const t=Mt(i),e=_s(t);let s=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:fg;for(;YI(t);)try{const o=await CI(t.localStore,s);if(o===null){t.Ta.length===0&&e.L_();break}s=o.batchId,QI(t,o)}catch(o){await tf(t,o)}NT(t)&&CT(t)}function YI(i){return ga(i)&&i.Ta.length<10}function QI(i,t){i.Ta.push(t);const e=_s(i);e.O_()&&e.X_&&e.ea(t.mutations)}function NT(i){return ga(i)&&!_s(i).x_()&&i.Ta.length>0}function CT(i){_s(i).start()}async function KI(i){_s(i).ra()}async function XI(i){const t=_s(i);for(const e of i.Ta)t.ea(e.mutations)}async function ZI(i,t,e){const s=i.Ta.shift(),o=_g.from(s,t,e);await AT(i,(()=>i.remoteSyncer.applySuccessfulWrite(o))),await Nf(i)}async function JI(i,t){t&&_s(i).X_&&await(async function(s,o){if((function(c){return MR(c)&&c!==ct.ABORTED})(o.code)){const u=s.Ta.shift();_s(s).B_(),await AT(s,(()=>s.remoteSyncer.rejectFailedWrite(u.batchId,o))),await Nf(s)}})(i,t),NT(i)&&CT(i)}async function jb(i,t){const e=Mt(i);e.asyncQueue.verifyOperationInProgress(),_t(da,"RemoteStore received new credentials");const s=ga(e);e.Ea.add(3),await Ru(e),s&&e.Ra.set("Unknown"),await e.remoteSyncer.handleCredentialChange(t),e.Ea.delete(3),await Af(e)}async function WI(i,t){const e=Mt(i);t?(e.Ea.delete(2),await Af(e)):t||(e.Ea.add(2),await Ru(e),e.Ra.set("Unknown"))}function ko(i){return i.ma||(i.ma=(function(e,s,o){const u=Mt(e);return u.sa(),new LI(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(i.datastore,i.asyncQueue,{Xo:qI.bind(null,i),t_:HI.bind(null,i),r_:GI.bind(null,i),H_:$I.bind(null,i)}),i.da.push((async t=>{t?(i.ma.B_(),Cg(i)?Ng(i):i.Ra.set("Unknown")):(await i.ma.stop(),ST(i))}))),i.ma}function _s(i){return i.fa||(i.fa=(function(e,s,o){const u=Mt(e);return u.sa(),new PI(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(i.datastore,i.asyncQueue,{Xo:()=>Promise.resolve(),t_:KI.bind(null,i),r_:JI.bind(null,i),ta:XI.bind(null,i),na:ZI.bind(null,i)}),i.da.push((async t=>{t?(i.fa.B_(),await Nf(i)):(await i.fa.stop(),i.Ta.length>0&&(_t(da,`Stopping write stream with ${i.Ta.length} pending writes`),i.Ta=[]))}))),i.fa}class Rg{constructor(t,e,s,o,u){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=s,this.op=o,this.removalCallback=u,this.deferred=new ds,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,e,s,o,u){const c=Date.now()+s,m=new Rg(t,e,c,o,u);return m.start(s),m}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Et(ct.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ig(i,t){if(gr("AsyncQueue",`${t}: ${i}`),Mo(i))return new Et(ct.UNAVAILABLE,`${t}: ${i}`);throw i}class mo{static emptySet(t){return new mo(t.comparator)}constructor(t){this.comparator=t?(e,s)=>t(e,s)||At.comparator(e.key,s.key):(e,s)=>At.comparator(e.key,s.key),this.keyedMap=$l(),this.sortedSet=new me(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((e,s)=>(t(e),!1)))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof mo)||this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),s=t.sortedSet.getIterator();for(;e.hasNext();){const o=e.getNext().key,u=s.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const t=[];return this.forEach((e=>{t.push(e.toString())})),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,e){const s=new mo;return s.comparator=this.comparator,s.keyedMap=t,s.sortedSet=e,s}}class Lb{constructor(){this.ga=new me(At.comparator)}track(t){const e=t.doc.key,s=this.ga.get(e);s?t.type!==0&&s.type===3?this.ga=this.ga.insert(e,t):t.type===3&&s.type!==1?this.ga=this.ga.insert(e,{type:s.type,doc:t.doc}):t.type===2&&s.type===2?this.ga=this.ga.insert(e,{type:2,doc:t.doc}):t.type===2&&s.type===0?this.ga=this.ga.insert(e,{type:0,doc:t.doc}):t.type===1&&s.type===0?this.ga=this.ga.remove(e):t.type===1&&s.type===2?this.ga=this.ga.insert(e,{type:1,doc:s.doc}):t.type===0&&s.type===1?this.ga=this.ga.insert(e,{type:2,doc:t.doc}):Rt(63341,{Rt:t,pa:s}):this.ga=this.ga.insert(e,t)}ya(){const t=[];return this.ga.inorderTraversal(((e,s)=>{t.push(s)})),t}}class wo{constructor(t,e,s,o,u,c,m,p,g){this.query=t,this.docs=e,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=u,this.fromCache=c,this.syncStateChanged=m,this.excludesMetadataChanges=p,this.hasCachedResults=g}static fromInitialDocuments(t,e,s,o,u){const c=[];return e.forEach((m=>{c.push({type:0,doc:m})})),new wo(t,e,mo.emptySet(e),c,s,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&bf(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,s=t.docChanges;if(e.length!==s.length)return!1;for(let o=0;o<e.length;o++)if(e[o].type!==s[o].type||!e[o].doc.isEqual(s[o].doc))return!1;return!0}}class tD{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((t=>t.Da()))}}class eD{constructor(){this.queries=Pb(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(e,s){const o=Mt(e),u=o.queries;o.queries=Pb(),u.forEach(((c,m)=>{for(const p of m.Sa)p.onError(s)}))})(this,new Et(ct.ABORTED,"Firestore shutting down"))}}function Pb(){return new pa((i=>Qx(i)),bf)}async function RT(i,t){const e=Mt(i);let s=3;const o=t.query;let u=e.queries.get(o);u?!u.ba()&&t.Da()&&(s=2):(u=new tD,s=t.Da()?0:1);try{switch(s){case 0:u.wa=await e.onListen(o,!0);break;case 1:u.wa=await e.onListen(o,!1);break;case 2:await e.onFirstRemoteStoreListen(o)}}catch(c){const m=Ig(c,`Initialization of query '${so(t.query)}' failed`);return void t.onError(m)}e.queries.set(o,u),u.Sa.push(t),t.va(e.onlineState),u.wa&&t.Fa(u.wa)&&Dg(e)}async function IT(i,t){const e=Mt(i),s=t.query;let o=3;const u=e.queries.get(s);if(u){const c=u.Sa.indexOf(t);c>=0&&(u.Sa.splice(c,1),u.Sa.length===0?o=t.Da()?0:1:!u.ba()&&t.Da()&&(o=2))}switch(o){case 0:return e.queries.delete(s),e.onUnlisten(s,!0);case 1:return e.queries.delete(s),e.onUnlisten(s,!1);case 2:return e.onLastRemoteStoreUnlisten(s);default:return}}function nD(i,t){const e=Mt(i);let s=!1;for(const o of t){const u=o.query,c=e.queries.get(u);if(c){for(const m of c.Sa)m.Fa(o)&&(s=!0);c.wa=o}}s&&Dg(e)}function iD(i,t,e){const s=Mt(i),o=s.queries.get(t);if(o)for(const u of o.Sa)u.onError(e);s.queries.delete(t)}function Dg(i){i.Ca.forEach((t=>{t.next()}))}var Op,Ub;(Ub=Op||(Op={})).Ma="default",Ub.Cache="cache";class DT{constructor(t,e,s){this.query=t,this.xa=e,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(t){if(!this.options.includeMetadataChanges){const s=[];for(const o of t.docChanges)o.type!==3&&s.push(o);t=new wo(t.query,t.docs,t.oldDocs,s,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),e=!0):this.La(t,this.onlineState)&&(this.ka(t),e=!0),this.Na=t,e}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let e=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),e=!0),e}La(t,e){if(!t.fromCache||!this.Da())return!0;const s=e!=="Offline";return(!this.options.qa||!s)&&(!t.docs.isEmpty()||t.hasCachedResults||e==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const e=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&this.options.includeMetadataChanges===!0}ka(t){t=wo.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==Op.Cache}}class OT{constructor(t){this.key=t}}class MT{constructor(t){this.key=t}}class rD{constructor(t,e){this.query=t,this.Ya=e,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ht(),this.mutatedKeys=Ht(),this.eu=Kx(t),this.tu=new mo(this.eu)}get nu(){return this.Ya}ru(t,e){const s=e?e.iu:new Lb,o=e?e.tu:this.tu;let u=e?e.mutatedKeys:this.mutatedKeys,c=o,m=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,g=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(t.inorderTraversal(((v,E)=>{const T=o.get(v),I=Ef(this.query,E)?E:null,P=!!T&&this.mutatedKeys.has(T.key),B=!!I&&(I.hasLocalMutations||this.mutatedKeys.has(I.key)&&I.hasCommittedMutations);let X=!1;T&&I?T.data.isEqual(I.data)?P!==B&&(s.track({type:3,doc:I}),X=!0):this.su(T,I)||(s.track({type:2,doc:I}),X=!0,(p&&this.eu(I,p)>0||g&&this.eu(I,g)<0)&&(m=!0)):!T&&I?(s.track({type:0,doc:I}),X=!0):T&&!I&&(s.track({type:1,doc:T}),X=!0,(p||g)&&(m=!0)),X&&(I?(c=c.add(I),u=B?u.add(v):u.delete(v)):(c=c.delete(v),u=u.delete(v)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const v=this.query.limitType==="F"?c.last():c.first();c=c.delete(v.key),u=u.delete(v.key),s.track({type:1,doc:v})}return{tu:c,iu:s,Cs:m,mutatedKeys:u}}su(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,s,o){const u=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const c=t.iu.ya();c.sort(((v,E)=>(function(I,P){const B=X=>{switch(X){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Rt(20277,{Rt:X})}};return B(I)-B(P)})(v.type,E.type)||this.eu(v.doc,E.doc))),this.ou(s),o=o??!1;const m=e&&!o?this._u():[],p=this.Xa.size===0&&this.current&&!o?1:0,g=p!==this.Za;return this.Za=p,c.length!==0||g?{snapshot:new wo(this.query,t.tu,u,c,t.mutatedKeys,p===0,g,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:m}:{au:m}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Lb,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach((e=>this.Ya=this.Ya.add(e))),t.modifiedDocuments.forEach((e=>{})),t.removedDocuments.forEach((e=>this.Ya=this.Ya.delete(e))),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=Ht(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const e=[];return t.forEach((s=>{this.Xa.has(s)||e.push(new MT(s))})),this.Xa.forEach((s=>{t.has(s)||e.push(new OT(s))})),e}cu(t){this.Ya=t.Qs,this.Xa=Ht();const e=this.ru(t.documents);return this.applyChanges(e,!0)}lu(){return wo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Og="SyncEngine";class sD{constructor(t,e,s){this.query=t,this.targetId=e,this.view=s}}class aD{constructor(t){this.key=t,this.hu=!1}}class oD{constructor(t,e,s,o,u,c){this.localStore=t,this.remoteStore=e,this.eventManager=s,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new pa((m=>Qx(m)),bf),this.Iu=new Map,this.Eu=new Set,this.du=new me(At.comparator),this.Au=new Map,this.Ru=new Eg,this.Vu={},this.mu=new Map,this.fu=To.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function lD(i,t,e=!0){const s=UT(i);let o;const u=s.Tu.get(t);return u?(s.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.lu()):o=await kT(s,t,e,!0),o}async function uD(i,t){const e=UT(i);await kT(e,t,!0,!1)}async function kT(i,t,e,s){const o=await RI(i.localStore,Vi(t)),u=o.targetId,c=i.sharedClientState.addLocalQueryTarget(u,e);let m;return s&&(m=await cD(i,t,u,c==="current",o.resumeToken)),i.isPrimaryClient&&e&&TT(i.remoteStore,o),m}async function cD(i,t,e,s,o){i.pu=(E,T,I)=>(async function(B,X,ft,$){let tt=X.view.ru(ft);tt.Cs&&(tt=await Db(B.localStore,X.query,!1).then((({documents:C})=>X.view.ru(C,tt))));const nt=$&&$.targetChanges.get(X.targetId),mt=$&&$.targetMismatches.get(X.targetId)!=null,ht=X.view.applyChanges(tt,B.isPrimaryClient,nt,mt);return Bb(B,X.targetId,ht.au),ht.snapshot})(i,E,T,I);const u=await Db(i.localStore,t,!0),c=new rD(t,u.Qs),m=c.ru(u.documents),p=Cu.createSynthesizedTargetChangeForCurrentChange(e,s&&i.onlineState!=="Offline",o),g=c.applyChanges(m,i.isPrimaryClient,p);Bb(i,e,g.au);const v=new sD(t,e,c);return i.Tu.set(t,v),i.Iu.has(e)?i.Iu.get(e).push(t):i.Iu.set(e,[t]),g.snapshot}async function hD(i,t,e){const s=Mt(i),o=s.Tu.get(t),u=s.Iu.get(o.targetId);if(u.length>1)return s.Iu.set(o.targetId,u.filter((c=>!bf(c,t)))),void s.Tu.delete(t);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await Ip(s.localStore,o.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(o.targetId),e&&Sg(s.remoteStore,o.targetId),Mp(s,o.targetId)})).catch(Oo)):(Mp(s,o.targetId),await Ip(s.localStore,o.targetId,!0))}async function fD(i,t){const e=Mt(i),s=e.Tu.get(t),o=e.Iu.get(s.targetId);e.isPrimaryClient&&o.length===1&&(e.sharedClientState.removeLocalQueryTarget(s.targetId),Sg(e.remoteStore,s.targetId))}async function dD(i,t,e){const s=bD(i);try{const o=await(function(c,m){const p=Mt(c),g=ce.now(),v=m.reduce(((I,P)=>I.add(P.key)),Ht());let E,T;return p.persistence.runTransaction("Locally write mutations","readwrite",(I=>{let P=yr(),B=Ht();return p.Ns.getEntries(I,v).next((X=>{P=X,P.forEach(((ft,$)=>{$.isValidDocument()||(B=B.add(ft))}))})).next((()=>p.localDocuments.getOverlayedDocuments(I,P))).next((X=>{E=X;const ft=[];for(const $ of m){const tt=CR($,E.get($.key).overlayedDocument);tt!=null&&ft.push(new xs($.key,tt,Bx(tt.value.mapValue),ji.exists(!0)))}return p.mutationQueue.addMutationBatch(I,g,ft,m)})).next((X=>{T=X;const ft=X.applyToLocalDocumentSet(E,B);return p.documentOverlayCache.saveOverlays(I,X.batchId,ft)}))})).then((()=>({batchId:T.batchId,changes:Zx(E)})))})(s.localStore,t);s.sharedClientState.addPendingMutation(o.batchId),(function(c,m,p){let g=c.Vu[c.currentUser.toKey()];g||(g=new me(qt)),g=g.insert(m,p),c.Vu[c.currentUser.toKey()]=g})(s,o.batchId,e),await Iu(s,o.changes),await Nf(s.remoteStore)}catch(o){const u=Ig(o,"Failed to persist write");e.reject(u)}}async function VT(i,t){const e=Mt(i);try{const s=await AI(e.localStore,t);t.targetChanges.forEach(((o,u)=>{const c=e.Au.get(u);c&&(Zt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?c.hu=!0:o.modifiedDocuments.size>0?Zt(c.hu,14607):o.removedDocuments.size>0&&(Zt(c.hu,42227),c.hu=!1))})),await Iu(e,s,t)}catch(s){await Oo(s)}}function zb(i,t,e){const s=Mt(i);if(s.isPrimaryClient&&e===0||!s.isPrimaryClient&&e===1){const o=[];s.Tu.forEach(((u,c)=>{const m=c.view.va(t);m.snapshot&&o.push(m.snapshot)})),(function(c,m){const p=Mt(c);p.onlineState=m;let g=!1;p.queries.forEach(((v,E)=>{for(const T of E.Sa)T.va(m)&&(g=!0)})),g&&Dg(p)})(s.eventManager,t),o.length&&s.Pu.H_(o),s.onlineState=t,s.isPrimaryClient&&s.sharedClientState.setOnlineState(t)}}async function mD(i,t,e){const s=Mt(i);s.sharedClientState.updateQueryState(t,"rejected",e);const o=s.Au.get(t),u=o&&o.key;if(u){let c=new me(At.comparator);c=c.insert(u,nn.newNoDocument(u,It.min()));const m=Ht().add(u),p=new wf(It.min(),new Map,new me(qt),c,m);await VT(s,p),s.du=s.du.remove(u),s.Au.delete(t),Mg(s)}else await Ip(s.localStore,t,!1).then((()=>Mp(s,t,e))).catch(Oo)}async function pD(i,t){const e=Mt(i),s=t.batch.batchId;try{const o=await SI(e.localStore,t);LT(e,s,null),jT(e,s),e.sharedClientState.updateMutationState(s,"acknowledged"),await Iu(e,o)}catch(o){await Oo(o)}}async function gD(i,t,e){const s=Mt(i);try{const o=await(function(c,m){const p=Mt(c);return p.persistence.runTransaction("Reject batch","readwrite-primary",(g=>{let v;return p.mutationQueue.lookupMutationBatch(g,m).next((E=>(Zt(E!==null,37113),v=E.keys(),p.mutationQueue.removeMutationBatch(g,E)))).next((()=>p.mutationQueue.performConsistencyCheck(g))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(g,v,m))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,v))).next((()=>p.localDocuments.getDocuments(g,v)))}))})(s.localStore,t);LT(s,t,e),jT(s,t),s.sharedClientState.updateMutationState(t,"rejected",e),await Iu(s,o)}catch(o){await Oo(o)}}function jT(i,t){(i.mu.get(t)||[]).forEach((e=>{e.resolve()})),i.mu.delete(t)}function LT(i,t,e){const s=Mt(i);let o=s.Vu[s.currentUser.toKey()];if(o){const u=o.get(t);u&&(e?u.reject(e):u.resolve(),o=o.remove(t)),s.Vu[s.currentUser.toKey()]=o}}function Mp(i,t,e=null){i.sharedClientState.removeLocalQueryTarget(t);for(const s of i.Iu.get(t))i.Tu.delete(s),e&&i.Pu.yu(s,e);i.Iu.delete(t),i.isPrimaryClient&&i.Ru.jr(t).forEach((s=>{i.Ru.containsKey(s)||PT(i,s)}))}function PT(i,t){i.Eu.delete(t.path.canonicalString());const e=i.du.get(t);e!==null&&(Sg(i.remoteStore,e),i.du=i.du.remove(t),i.Au.delete(e),Mg(i))}function Bb(i,t,e){for(const s of e)s instanceof OT?(i.Ru.addReference(s.key,t),yD(i,s)):s instanceof MT?(_t(Og,"Document no longer in limbo: "+s.key),i.Ru.removeReference(s.key,t),i.Ru.containsKey(s.key)||PT(i,s.key)):Rt(19791,{wu:s})}function yD(i,t){const e=t.key,s=e.path.canonicalString();i.du.get(e)||i.Eu.has(s)||(_t(Og,"New document in limbo: "+e),i.Eu.add(s),Mg(i))}function Mg(i){for(;i.Eu.size>0&&i.du.size<i.maxConcurrentLimboResolutions;){const t=i.Eu.values().next().value;i.Eu.delete(t);const e=new At(de.fromString(t)),s=i.fu.next();i.Au.set(s,new aD(e)),i.du=i.du.insert(e,s),TT(i.remoteStore,new ls(Vi(vf(e.path)),s,"TargetPurposeLimboResolution",pf.ce))}}async function Iu(i,t,e){const s=Mt(i),o=[],u=[],c=[];s.Tu.isEmpty()||(s.Tu.forEach(((m,p)=>{c.push(s.pu(p,t,e).then((g=>{if((g||e)&&s.isPrimaryClient){const v=g?!g.fromCache:e?.targetChanges.get(p.targetId)?.current;s.sharedClientState.updateQueryState(p.targetId,v?"current":"not-current")}if(g){o.push(g);const v=Tg.As(p.targetId,g);u.push(v)}})))})),await Promise.all(c),s.Pu.H_(o),await(async function(p,g){const v=Mt(p);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>lt.forEach(g,(T=>lt.forEach(T.Es,(I=>v.persistence.referenceDelegate.addReference(E,T.targetId,I))).next((()=>lt.forEach(T.ds,(I=>v.persistence.referenceDelegate.removeReference(E,T.targetId,I)))))))))}catch(E){if(!Mo(E))throw E;_t(wg,"Failed to update sequence numbers: "+E)}for(const E of g){const T=E.targetId;if(!E.fromCache){const I=v.Ms.get(T),P=I.snapshotVersion,B=I.withLastLimboFreeSnapshotVersion(P);v.Ms=v.Ms.insert(T,B)}}})(s.localStore,u))}async function _D(i,t){const e=Mt(i);if(!e.currentUser.isEqual(t)){_t(Og,"User change. New user:",t.toKey());const s=await vT(e.localStore,t);e.currentUser=t,(function(u,c){u.mu.forEach((m=>{m.forEach((p=>{p.reject(new Et(ct.CANCELLED,c))}))})),u.mu.clear()})(e,"'waitForPendingWrites' promise is rejected due to a user change."),e.sharedClientState.handleUserChange(t,s.removedBatchIds,s.addedBatchIds),await Iu(e,s.Ls)}}function vD(i,t){const e=Mt(i),s=e.Au.get(t);if(s&&s.hu)return Ht().add(s.key);{let o=Ht();const u=e.Iu.get(t);if(!u)return o;for(const c of u){const m=e.Tu.get(c);o=o.unionWith(m.view.nu)}return o}}function UT(i){const t=Mt(i);return t.remoteStore.remoteSyncer.applyRemoteEvent=VT.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=vD.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=mD.bind(null,t),t.Pu.H_=nD.bind(null,t.eventManager),t.Pu.yu=iD.bind(null,t.eventManager),t}function bD(i){const t=Mt(i);return t.remoteStore.remoteSyncer.applySuccessfulWrite=pD.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=gD.bind(null,t),t}class ef{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Sf(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,e){return null}Mu(t,e){return null}vu(t){return wI(this.persistence,new EI,t.initialUser,this.serializer)}Cu(t){return new _T(xg.mi,this.serializer)}Du(t){return new DI}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}ef.provider={build:()=>new ef};class ED extends ef{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,e){Zt(this.persistence.referenceDelegate instanceof Wh,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new aI(s,t.asyncQueue,e)}Cu(t){const e=this.cacheSizeBytes!==void 0?gn.withCacheSize(this.cacheSizeBytes):gn.DEFAULT;return new _T((s=>Wh.mi(s,e)),this.serializer)}}class kp{async initialize(t,e){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>zb(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=_D.bind(null,this.syncEngine),await WI(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new eD})()}createDatastore(t){const e=Sf(t.databaseInfo.databaseId),s=(function(u){return new jI(u)})(t.databaseInfo);return(function(u,c,m,p){return new zI(u,c,m,p)})(t.authCredentials,t.appCheckCredentials,s,e)}createRemoteStore(t){return(function(s,o,u,c,m){return new FI(s,o,u,c,m)})(this.localStore,this.datastore,t.asyncQueue,(e=>zb(this.syncEngine,e,0)),(function(){return kb.v()?new kb:new OI})())}createSyncEngine(t,e){return(function(o,u,c,m,p,g,v){const E=new oD(o,u,c,m,p,g);return v&&(E.gu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}async terminate(){await(async function(e){const s=Mt(e);_t(da,"RemoteStore shutting down."),s.Ea.add(5),await Ru(s),s.Aa.shutdown(),s.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}kp.provider={build:()=>new kp};class zT{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):gr("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,e){setTimeout((()=>{this.muted||t(e)}),0)}}const vs="FirestoreClient";class xD{constructor(t,e,s,o,u){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=s,this.databaseInfo=o,this.user=en.UNAUTHENTICATED,this.clientId=cg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(s,(async c=>{_t(vs,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(s,(c=>(_t(vs,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new ds;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){const s=Ig(e,"Failed to shutdown persistence");t.reject(s)}})),t.promise}}async function Wm(i,t){i.asyncQueue.verifyOperationInProgress(),_t(vs,"Initializing OfflineComponentProvider");const e=i.configuration;await t.initialize(e);let s=e.initialUser;i.setCredentialChangeListener((async o=>{s.isEqual(o)||(await vT(t.localStore,o),s=o)})),t.persistence.setDatabaseDeletedListener((()=>i.terminate())),i._offlineComponents=t}async function Fb(i,t){i.asyncQueue.verifyOperationInProgress();const e=await TD(i);_t(vs,"Initializing OnlineComponentProvider"),await t.initialize(e,i.configuration),i.setCredentialChangeListener((s=>jb(t.remoteStore,s))),i.setAppCheckTokenChangeListener(((s,o)=>jb(t.remoteStore,o))),i._onlineComponents=t}async function TD(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){_t(vs,"Using user provided OfflineComponentProvider");try{await Wm(i,i._uninitializedComponentsProvider._offline)}catch(t){const e=t;if(!(function(o){return o.name==="FirebaseError"?o.code===ct.FAILED_PRECONDITION||o.code===ct.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(e))throw e;vo("Error using user provided cache. Falling back to memory cache: "+e),await Wm(i,new ef)}}else _t(vs,"Using default OfflineComponentProvider"),await Wm(i,new ED(void 0));return i._offlineComponents}async function BT(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(_t(vs,"Using user provided OnlineComponentProvider"),await Fb(i,i._uninitializedComponentsProvider._online)):(_t(vs,"Using default OnlineComponentProvider"),await Fb(i,new kp))),i._onlineComponents}function wD(i){return BT(i).then((t=>t.syncEngine))}async function Vp(i){const t=await BT(i),e=t.eventManager;return e.onListen=lD.bind(null,t.syncEngine),e.onUnlisten=hD.bind(null,t.syncEngine),e.onFirstRemoteStoreListen=uD.bind(null,t.syncEngine),e.onLastRemoteStoreUnlisten=fD.bind(null,t.syncEngine),e}function SD(i,t,e={}){const s=new ds;return i.asyncQueue.enqueueAndForget((async()=>(function(u,c,m,p,g){const v=new zT({next:T=>{v.Nu(),c.enqueueAndForget((()=>IT(u,E)));const I=T.docs.has(m);!I&&T.fromCache?g.reject(new Et(ct.UNAVAILABLE,"Failed to get document because the client is offline.")):I&&T.fromCache&&p&&p.source==="server"?g.reject(new Et(ct.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(T)},error:T=>g.reject(T)}),E=new DT(vf(m.path),v,{includeMetadataChanges:!0,qa:!0});return RT(u,E)})(await Vp(i),i.asyncQueue,t,e,s))),s.promise}function FT(i){const t={};return i.timeoutSeconds!==void 0&&(t.timeoutSeconds=i.timeoutSeconds),t}const qb=new Map;const qT="firestore.googleapis.com",Hb=!0;class Gb{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new Et(ct.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=qT,this.ssl=Hb}else this.host=t.host,this.ssl=t.ssl??Hb;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=yT;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<rI)throw new Et(ct.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}zC("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=FT(t.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Et(ct.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Et(ct.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Et(ct.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&(function(s,o){return s.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class kg{constructor(t,e,s,o){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Gb({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Et(ct.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new Et(ct.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Gb(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new RC;switch(s.type){case"firstParty":return new MC(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new Et(ct.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(e){const s=qb.get(e);s&&(_t("ComponentProvider","Removing Datastore"),qb.delete(e),s.terminate())})(this),Promise.resolve()}}function AD(i,t,e,s={}){i=ki(i,kg);const o=Co(t),u=i._getSettings(),c={...u,emulatorOptions:i._getEmulatorOptions()},m=`${t}:${e}`;o&&(VE(`https://${m}`),jE("Firestore",!0)),u.host!==qT&&u.host!==m&&vo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p={...u,host:m,ssl:o,emulatorOptions:s};if(!la(p,c)&&(i._setSettings(p),s.mockUserToken)){let g,v;if(typeof s.mockUserToken=="string")g=s.mockUserToken,v=en.MOCK_USER;else{g=jS(s.mockUserToken,i._app?.options.projectId);const E=s.mockUserToken.sub||s.mockUserToken.user_id;if(!E)throw new Et(ct.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new en(E)}i._authCredentials=new IC(new Ix(g,v))}}class Cf{constructor(t,e,s){this.converter=e,this._query=s,this.type="query",this.firestore=t}withConverter(t){return new Cf(this.firestore,t,this._query)}}class ke{constructor(t,e,s){this.converter=e,this._key=s,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new pu(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new ke(this.firestore,t,this._key)}toJSON(){return{type:ke._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,e,s){if(Au(e,ke._jsonSchema))return new ke(t,s||null,new At(de.fromString(e.referencePath)))}}ke._jsonSchemaVersion="firestore/documentReference/1.0",ke._jsonSchema={type:Me("string",ke._jsonSchemaVersion),referencePath:Me("string")};class pu extends Cf{constructor(t,e,s){super(t,e,vf(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new ke(this.firestore,null,new At(t))}withConverter(t){return new pu(this.firestore,t,this._path)}}function Rf(i,t,...e){if(i=Ze(i),arguments.length===1&&(t=cg.newId()),UC("doc","path",t),i instanceof kg){const s=de.fromString(t,...e);return sb(s),new ke(i,null,new At(s))}{if(!(i instanceof ke||i instanceof pu))throw new Et(ct.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(de.fromString(t,...e));return sb(s),new ke(i.firestore,i instanceof pu?i.converter:null,new At(s))}}const $b="AsyncQueue";class Yb{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new ET(this,"async_queue_retry"),this._c=()=>{const s=Jm();s&&_t($b,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=t;const e=Jm();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const e=Jm();e&&typeof e.removeEventListener=="function"&&e.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise((()=>{}));const e=new ds;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(t().then(e.resolve,e.reject),e.promise))).then((()=>e.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Xu.push(t),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!Mo(t))throw t;_t($b,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(t){const e=this.ac.then((()=>(this.rc=!0,t().catch((s=>{throw this.nc=s,this.rc=!1,gr("INTERNAL UNHANDLED ERROR: ",Qb(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=e,e}enqueueAfterDelay(t,e,s){this.uc(),this.oc.indexOf(t)>-1&&(e=0);const o=Rg.createAndSchedule(this,t,e,s,(u=>this.hc(u)));return this.tc.push(o),o}uc(){this.nc&&Rt(47125,{Pc:Qb(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const e of this.tc)if(e.timerId===t)return!0;return!1}Ec(t){return this.Tc().then((()=>{this.tc.sort(((e,s)=>e.targetTimeMs-s.targetTimeMs));for(const e of this.tc)if(e.skipDelay(),t!=="all"&&e.timerId===t)break;return this.Tc()}))}dc(t){this.oc.push(t)}hc(t){const e=this.tc.indexOf(t);this.tc.splice(e,1)}}function Qb(i){let t=i.message||"";return i.stack&&(t=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),t}function Kb(i){return(function(e,s){if(typeof e!="object"||e===null)return!1;const o=e;for(const u of s)if(u in o&&typeof o[u]=="function")return!0;return!1})(i,["next","error","complete"])}class So extends kg{constructor(t,e,s,o){super(t,e,s,o),this.type="firestore",this._queue=new Yb,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new Yb(t),this._firestoreClient=void 0,await t}}}function ND(i,t){const e=typeof i=="object"?i:zE(),s=typeof i=="string"?i:Yh,o=tg(e,"firestore").getImmediate({identifier:s});if(!o._initialized){const u=kS("firestore");u&&AD(o,...u)}return o}function Vg(i){if(i._terminated)throw new Et(ct.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||CD(i),i._firestoreClient}function CD(i){const t=i._freezeSettings(),e=(function(o,u,c,m){return new ZC(o,u,c,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,FT(m.experimentalLongPollingOptions),m.useFetchStreams,m.isUsingEmulator)})(i._databaseId,i._app?.options.appId||"",i._persistenceKey,t);i._componentsProvider||t.localCache?._offlineComponentProvider&&t.localCache?._onlineComponentProvider&&(i._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),i._firestoreClient=new xD(i._authCredentials,i._appCheckCredentials,i._queue,e,i._componentsProvider&&(function(o){const u=o?._online.build();return{_offline:o?._offline.build(u),_online:u}})(i._componentsProvider))}class Gn{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Gn(Je.fromBase64String(t))}catch(e){throw new Et(ct.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new Gn(Je.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:Gn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(Au(t,Gn._jsonSchema))return Gn.fromBase64String(t.bytes)}}Gn._jsonSchemaVersion="firestore/bytes/1.0",Gn._jsonSchema={type:Me("string",Gn._jsonSchemaVersion),bytes:Me("string")};class If{constructor(...t){for(let e=0;e<t.length;++e)if(t[e].length===0)throw new Et(ct.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Xe(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}class Df{constructor(t){this._methodName=t}}class Pi{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new Et(ct.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Et(ct.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return qt(this._lat,t._lat)||qt(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Pi._jsonSchemaVersion}}static fromJSON(t){if(Au(t,Pi._jsonSchema))return new Pi(t.latitude,t.longitude)}}Pi._jsonSchemaVersion="firestore/geoPoint/1.0",Pi._jsonSchema={type:Me("string",Pi._jsonSchemaVersion),latitude:Me("number"),longitude:Me("number")};class Ui{constructor(t){this._values=(t||[]).map((e=>e))}toArray(){return this._values.map((t=>t))}isEqual(t){return(function(s,o){if(s.length!==o.length)return!1;for(let u=0;u<s.length;++u)if(s[u]!==o[u])return!1;return!0})(this._values,t._values)}toJSON(){return{type:Ui._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(Au(t,Ui._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every((e=>typeof e=="number")))return new Ui(t.vectorValues);throw new Et(ct.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ui._jsonSchemaVersion="firestore/vectorValue/1.0",Ui._jsonSchema={type:Me("string",Ui._jsonSchemaVersion),vectorValues:Me("object")};const RD=/^__.*__$/;class ID{constructor(t,e,s){this.data=t,this.fieldMask=e,this.fieldTransforms=s}toMutation(t,e){return this.fieldMask!==null?new xs(t,this.data,this.fieldMask,e,this.fieldTransforms):new Nu(t,this.data,e,this.fieldTransforms)}}class HT{constructor(t,e,s){this.data=t,this.fieldMask=e,this.fieldTransforms=s}toMutation(t,e){return new xs(t,this.data,this.fieldMask,e,this.fieldTransforms)}}function GT(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Rt(40011,{Ac:i})}}class jg{constructor(t,e,s,o,u,c){this.settings=t,this.databaseId=e,this.serializer=s,this.ignoreUndefinedProperties=o,u===void 0&&this.Rc(),this.fieldTransforms=u||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new jg({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){const e=this.path?.child(t),s=this.Vc({path:e,fc:!1});return s.gc(t),s}yc(t){const e=this.path?.child(t),s=this.Vc({path:e,fc:!1});return s.Rc(),s}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return nf(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find((e=>t.isPrefixOf(e)))!==void 0||this.fieldTransforms.find((e=>t.isPrefixOf(e.field)))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(GT(this.Ac)&&RD.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class DD{constructor(t,e,s){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=s||Sf(t)}Cc(t,e,s,o=!1){return new jg({Ac:t,methodName:e,Dc:s,path:Xe.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function $T(i){const t=i._freezeSettings(),e=Sf(i._databaseId);return new DD(i._databaseId,!!t.ignoreUndefinedProperties,e)}function OD(i,t,e,s,o,u={}){const c=i.Cc(u.merge||u.mergeFields?2:0,t,e,o);Pg("Data must be an object, but it was:",c,s);const m=YT(s,c);let p,g;if(u.merge)p=new Cn(c.fieldMask),g=c.fieldTransforms;else if(u.mergeFields){const v=[];for(const E of u.mergeFields){const T=jp(t,E,e);if(!c.contains(T))throw new Et(ct.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);KT(v,T)||v.push(T)}p=new Cn(v),g=c.fieldTransforms.filter((E=>p.covers(E.field)))}else p=null,g=c.fieldTransforms;return new ID(new yn(m),p,g)}class Of extends Df{_toFieldTransform(t){if(t.Ac!==2)throw t.Ac===1?t.Sc(`${this._methodName}() can only appear at the top level of your update data`):t.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof Of}}class Lg extends Df{_toFieldTransform(t){return new wR(t.path,new fu)}isEqual(t){return t instanceof Lg}}function MD(i,t,e,s){const o=i.Cc(1,t,e);Pg("Data must be an object, but it was:",o,s);const u=[],c=yn.empty();Es(s,((p,g)=>{const v=Ug(t,p,e);g=Ze(g);const E=o.yc(v);if(g instanceof Of)u.push(v);else{const T=Mf(g,E);T!=null&&(u.push(v),c.set(v,T))}}));const m=new Cn(u);return new HT(c,m,o.fieldTransforms)}function kD(i,t,e,s,o,u){const c=i.Cc(1,t,e),m=[jp(t,s,e)],p=[o];if(u.length%2!=0)throw new Et(ct.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<u.length;T+=2)m.push(jp(t,u[T])),p.push(u[T+1]);const g=[],v=yn.empty();for(let T=m.length-1;T>=0;--T)if(!KT(g,m[T])){const I=m[T];let P=p[T];P=Ze(P);const B=c.yc(I);if(P instanceof Of)g.push(I);else{const X=Mf(P,B);X!=null&&(g.push(I),v.set(I,X))}}const E=new Cn(g);return new HT(v,E,c.fieldTransforms)}function Mf(i,t){if(QT(i=Ze(i)))return Pg("Unsupported field value:",t,i),YT(i,t);if(i instanceof Df)return(function(s,o){if(!GT(o.Ac))throw o.Sc(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${s._methodName}() is not currently supported inside arrays`);const u=s._toFieldTransform(o);u&&o.fieldTransforms.push(u)})(i,t),null;if(i===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),i instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return(function(s,o){const u=[];let c=0;for(const m of s){let p=Mf(m,o.wc(c));p==null&&(p={nullValue:"NULL_VALUE"}),u.push(p),c++}return{arrayValue:{values:u}}})(i,t)}return(function(s,o){if((s=Ze(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return ER(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const u=ce.fromDate(s);return{timestampValue:Jh(o.serializer,u)}}if(s instanceof ce){const u=new ce(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Jh(o.serializer,u)}}if(s instanceof Pi)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Gn)return{bytesValue:cT(o.serializer,s._byteString)};if(s instanceof ke){const u=o.databaseId,c=s.firestore._databaseId;if(!c.isEqual(u))throw o.Sc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:bg(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof Ui)return(function(c,m){return{mapValue:{fields:{[Ux]:{stringValue:zx},[Qh]:{arrayValue:{values:c.toArray().map((g=>{if(typeof g!="number")throw m.Sc("VectorValues must only contain numeric values.");return yg(m.serializer,g)}))}}}}}})(s,o);throw o.Sc(`Unsupported field value: ${hg(s)}`)})(i,t)}function YT(i,t){const e={};return Mx(i)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Es(i,((s,o)=>{const u=Mf(o,t.mc(s));u!=null&&(e[s]=u)})),{mapValue:{fields:e}}}function QT(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof ce||i instanceof Pi||i instanceof Gn||i instanceof ke||i instanceof Df||i instanceof Ui)}function Pg(i,t,e){if(!QT(e)||!Dx(e)){const s=hg(e);throw s==="an object"?t.Sc(i+" a custom object"):t.Sc(i+" "+s)}}function jp(i,t,e){if((t=Ze(t))instanceof If)return t._internalPath;if(typeof t=="string")return Ug(i,t);throw nf("Field path arguments must be of type string or ",i,!1,void 0,e)}const VD=new RegExp("[~\\*/\\[\\]]");function Ug(i,t,e){if(t.search(VD)>=0)throw nf(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,e);try{return new If(...t.split("."))._internalPath}catch{throw nf(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,e)}}function nf(i,t,e,s,o){const u=s&&!s.isEmpty(),c=o!==void 0;let m=`Function ${t}() called with invalid data`;e&&(m+=" (via `toFirestore()`)"),m+=". ";let p="";return(u||c)&&(p+=" (found",u&&(p+=` in field ${s}`),c&&(p+=` in document ${o}`),p+=")"),new Et(ct.INVALID_ARGUMENT,m+i+p)}function KT(i,t){return i.some((e=>e.isEqual(t)))}class XT{constructor(t,e,s,o,u){this._firestore=t,this._userDataWriter=e,this._key=s,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new ke(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new jD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(ZT("DocumentSnapshot.get",t));if(e!==null)return this._userDataWriter.convertValue(e)}}}class jD extends XT{data(){return super.data()}}function ZT(i,t){return typeof t=="string"?Ug(i,t):t instanceof If?t._internalPath:t._delegate._internalPath}function LD(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new Et(ct.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class PD{convertValue(t,e="none"){switch(ys(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Te(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(gs(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 11:return this.convertObject(t.mapValue,e);case 10:return this.convertVectorValue(t.mapValue);default:throw Rt(62114,{value:t})}}convertObject(t,e){return this.convertObjectMap(t.fields,e)}convertObjectMap(t,e="none"){const s={};return Es(t,((o,u)=>{s[o]=this.convertValue(u,e)})),s}convertVectorValue(t){const e=t.fields?.[Qh].arrayValue?.values?.map((s=>Te(s.doubleValue)));return new Ui(e)}convertGeoPoint(t){return new Pi(Te(t.latitude),Te(t.longitude))}convertArray(t,e){return(t.values||[]).map((s=>this.convertValue(s,e)))}convertServerTimestamp(t,e){switch(e){case"previous":const s=yf(t);return s==null?null:this.convertValue(s,e);case"estimate":return this.convertTimestamp(uu(t));default:return null}}convertTimestamp(t){const e=ps(t);return new ce(e.seconds,e.nanos)}convertDocumentKey(t,e){const s=de.fromString(t);Zt(gT(s),9688,{name:t});const o=new cu(s.get(1),s.get(3)),u=new At(s.popFirst(5));return o.isEqual(e)||gr(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),u}}function UD(i,t,e){let s;return s=i?e&&(e.merge||e.mergeFields)?i.toFirestore(t,e):i.toFirestore(t):t,s}class Ql{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class aa extends XT{constructor(t,e,s,o,u,c){super(t,e,s,o,c),this._firestore=t,this._firestoreImpl=t,this.metadata=u}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new Ih(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const s=this._document.data.field(ZT("DocumentSnapshot.get",t));if(s!==null)return this._userDataWriter.convertValue(s,e.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Et(ct.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,e={};return e.type=aa._jsonSchemaVersion,e.bundle="",e.bundleSource="DocumentSnapshot",e.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?e:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),e.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),e)}}aa._jsonSchemaVersion="firestore/documentSnapshot/1.0",aa._jsonSchema={type:Me("string",aa._jsonSchemaVersion),bundleSource:Me("string","DocumentSnapshot"),bundleName:Me("string"),bundle:Me("string")};class Ih extends aa{data(t={}){return super.data(t)}}class po{constructor(t,e,s,o){this._firestore=t,this._userDataWriter=e,this._snapshot=o,this.metadata=new Ql(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const t=[];return this.forEach((e=>t.push(e))),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,e){this._snapshot.docs.forEach((s=>{t.call(e,new Ih(this._firestore,this._userDataWriter,s.key,s,new Ql(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Et(ct.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=(function(o,u){if(o._snapshot.oldDocs.isEmpty()){let c=0;return o._snapshot.docChanges.map((m=>{const p=new Ih(o._firestore,o._userDataWriter,m.doc.key,m.doc,new Ql(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:p,oldIndex:-1,newIndex:c++}}))}{let c=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((m=>u||m.type!==3)).map((m=>{const p=new Ih(o._firestore,o._userDataWriter,m.doc.key,m.doc,new Ql(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let g=-1,v=-1;return m.type!==0&&(g=c.indexOf(m.doc.key),c=c.delete(m.doc.key)),m.type!==1&&(c=c.add(m.doc),v=c.indexOf(m.doc.key)),{type:zD(m.type),doc:p,oldIndex:g,newIndex:v}}))}})(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Et(ct.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=po._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=cg.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const e=[],s=[],o=[];return this.docs.forEach((u=>{u._document!==null&&(e.push(u._document),s.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),o.push(u.ref.path))})),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function zD(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Rt(61501,{type:i})}}function JT(i){i=ki(i,ke);const t=ki(i.firestore,So);return SD(Vg(t),i._key).then((e=>i1(t,i,e)))}po._jsonSchemaVersion="firestore/querySnapshot/1.0",po._jsonSchema={type:Me("string",po._jsonSchemaVersion),bundleSource:Me("string","QuerySnapshot"),bundleName:Me("string"),bundle:Me("string")};class WT extends PD{constructor(t){super(),this.firestore=t}convertBytes(t){return new Gn(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new ke(this.firestore,null,e)}}function t1(i,t,e){i=ki(i,ke);const s=ki(i.firestore,So),o=UD(i.converter,t,e);return n1(s,[OD($T(s),"setDoc",i._key,o,i.converter!==null,e).toMutation(i._key,ji.none())])}function e1(i,t,e,...s){i=ki(i,ke);const o=ki(i.firestore,So),u=$T(o);let c;return c=typeof(t=Ze(t))=="string"||t instanceof If?kD(u,"updateDoc",i._key,t,e,s):MD(u,"updateDoc",i._key,t),n1(o,[c.toMutation(i._key,ji.exists(!0))])}function BD(i,...t){i=Ze(i);let e={includeMetadataChanges:!1,source:"default"},s=0;typeof t[s]!="object"||Kb(t[s])||(e=t[s++]);const o={includeMetadataChanges:e.includeMetadataChanges,source:e.source};if(Kb(t[s])){const p=t[s];t[s]=p.next?.bind(p),t[s+1]=p.error?.bind(p),t[s+2]=p.complete?.bind(p)}let u,c,m;if(i instanceof ke)c=ki(i.firestore,So),m=vf(i._key.path),u={next:p=>{t[s]&&t[s](i1(c,i,p))},error:t[s+1],complete:t[s+2]};else{const p=ki(i,Cf);c=ki(p.firestore,So),m=p._query;const g=new WT(c);u={next:v=>{t[s]&&t[s](new po(c,g,p,v))},error:t[s+1],complete:t[s+2]},LD(i._query)}return(function(g,v,E,T){const I=new zT(T),P=new DT(v,I,E);return g.asyncQueue.enqueueAndForget((async()=>RT(await Vp(g),P))),()=>{I.Nu(),g.asyncQueue.enqueueAndForget((async()=>IT(await Vp(g),P)))}})(Vg(c),m,o,u)}function n1(i,t){return(function(s,o){const u=new ds;return s.asyncQueue.enqueueAndForget((async()=>dD(await wD(s),o,u))),u.promise})(Vg(i),t)}function i1(i,t,e){const s=e.docs.get(t._key),o=new WT(i);return new aa(i,o,t._key,s,new Ql(e.hasPendingWrites,e.fromCache),t.converter)}function Lp(){return new Lg("serverTimestamp")}(function(t,e=!0){(function(o){Do=o})(Ro),_o(new ua("firestore",((s,{instanceIdentifier:o,options:u})=>{const c=s.getProvider("app").getImmediate(),m=new So(new DC(s.getProvider("auth-internal")),new kC(c,s.getProvider("app-check-internal")),(function(g,v){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new Et(ct.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new cu(g.options.projectId,v)})(c,o),c);return u={useFetchStreams:e,...u},m._setSettings(u),m}),"PUBLIC").setMultipleInstances(!0)),hs(eb,nb,t),hs(eb,nb,"esm2020")})();const FD={apiKey:"AIzaSyDJLZ07IsSV0efiWNzZDvSDltscm7yFMGc",authDomain:"flowmetrics-a7669.firebaseapp.com",projectId:"flowmetrics-a7669",storageBucket:"flowmetrics-a7669.appspot.com",messagingSenderId:"13206232192",appId:"1:13206232192:web:97d4b158974350ed5ada65"},r1=UE(FD),Pl=NC(r1),kf=ND(r1),s1=Lt.createContext(null);function qD({children:i}){const[t,e]=Lt.useState(null),[s,o]=Lt.useState(!0);Lt.useEffect(()=>{const g=p2(Pl,v=>{e(v??null),o(!1)});return()=>g()},[]);async function u(g,v){await f2(Pl,g,v)}async function c(g,v){return await h2(Pl,g,v)}async function m(){await g2(Pl),e(null)}async function p(g){await c2(Pl,g)}return _.jsx(s1.Provider,{value:{user:t,authLoading:s,signInWithEmail:u,signUpWithEmail:c,signOut:m,resetPassword:p},children:i})}function HD(){const i=Lt.useContext(s1);if(!i)throw new Error("useFirebaseAuth must be used inside FirebaseAuthProvider");return i}function Pp(i){if(i!==void 0){if(i===null)return null;if(typeof i=="number")return Number.isFinite(i)?i:null;if(i instanceof Date)return i.toISOString();if(Array.isArray(i))return i.map(Pp).filter(e=>e!==void 0);if(typeof i=="object"){const t={};for(const[e,s]of Object.entries(i)){const o=Pp(s);o!==void 0&&(t[e]=o)}return t}return i}}async function GD(i,t){if(!i)return;const e=Rf(kf,"workspaces",i),s=Pp(t);try{return await e1(e,{state:s,updatedAt:Lp()}),!0}catch(o){if(o?.code==="not-found")return await t1(e,{state:s,updatedAt:Lp()},{merge:!0}),!0;throw console.error("saveWorkspaceState failed",o),o}}const ru=["","","","","","","","","",""];function $D(i=""){let t=0;for(let e=0;e<i.length;e++)t=(t<<5)-t+i.charCodeAt(e),t|=0;return Math.abs(t)}function a1(i,t="Budgeteer"){if(!i)return t;const e=i.trim();return e&&e.replace(/[^a-zA-Z0-9_\- ]+/g,"").slice(0,32)||t}function YD(i){const t=i?.email?.split("@")[0]??"",e=a1(t,"Budgeteer"),s=i?.uid||i?.email||e||String(Date.now()),o=$D(s)%ru.length;return{username:e,avatarEmoji:ru[o]}}async function QD(i){const t=i?.uid;if(!t)return null;const e=Rf(kf,"users",t),s=await JT(e);if(s.exists())return s.data();const o=YD(i);return await t1(e,{...o,createdAt:Lp()},{merge:!0}),o}async function KD(i,{username:t,avatarEmoji:e}={}){if(!i)throw new Error("Missing uid");const s={};typeof t=="string"&&(s.username=a1(t)),typeof e=="string"&&(s.avatarEmoji=e);const o=Rf(kf,"users",i);return await e1(o,s),(await JT(o)).data()}function Ul({label:i,active:t,onClick:e}){return _.jsx("button",{onClick:e,className:`px-3 py-1 rounded-full border text-xs transition
      ${t?"border-cyan-400 bg-cyan-500/10 text-cyan-200":"border-slate-600/60 text-slate-300 hover:border-cyan-400/60 hover:text-cyan-200"}`,children:i})}const Up=[{key:"dark",label:"Cyber Dark",description:"Charcoal with neon cyan highlights",shellClass:"bg-[#05060A] text-slate-100",headerClass:"border-[#1f2937] bg-[#05060F]/90",pillClass:"border-slate-600/70 bg-black/20 hover:bg-black/40",previewGradient:"from-[#020617] via-[#05060f] to-[#020617]"},{key:"light",label:"Soft Light",description:"Warm whites with slate ink",shellClass:"bg-slate-50 text-slate-900",headerClass:"border-slate-200 bg-white/80",pillClass:"border-slate-300 bg-white/70 hover:bg-slate-100",previewGradient:"from-white via-slate-100 to-slate-200"},{key:"midnight",label:"Midnight Pulse",description:"Indigo mist with electric purple",shellClass:"bg-[#070718] text-indigo-100",headerClass:"border-[#191d3a] bg-gradient-to-r from-[#0f1032cc] to-[#1b0d3fcc]",pillClass:"border-indigo-600/50 bg-indigo-900/40 hover:bg-indigo-900/70",previewGradient:"from-[#0b1433] via-[#25124f] to-[#3b0f49]"},{key:"aurora",label:"Aurora Mist",description:"Deep teal with aurora glow",shellClass:"bg-gradient-to-br from-[#041b1f] via-[#082831] to-[#041b1f] text-emerald-50",headerClass:"border-emerald-900/40 bg-[#051f25]/90",pillClass:"border-emerald-500/40 bg-emerald-900/40 hover:bg-emerald-900/70",previewGradient:"from-[#052528] via-[#0b4b4f] to-[#0f766e]"},{key:"crimson",label:"Crimson Bloom",description:"Deep burgundy with neon rose edges",shellClass:"bg-gradient-to-br from-[#19070a] via-[#2b0d12] to-[#19070a] text-rose-50",headerClass:"border-rose-900/40 bg-[#2b0d12]/90",pillClass:"border-rose-500/50 bg-rose-900/40 hover:bg-rose-900/70",previewGradient:"from-[#300911] via-[#5b0a1c] to-[#be123c]"}];function XD(i){return Up.find(t=>t.key===i)||Up[0]}function ZD({option:i,active:t,onSelect:e}){return _.jsxs("button",{type:"button",onClick:()=>e(i.key),className:`w-full text-left rounded-xl border px-3 py-2 transition ${t?"border-cyan-400 bg-cyan-500/10":"border-white/10 hover:border-cyan-400/60"}`,children:[_.jsx("div",{className:`h-10 rounded-lg bg-gradient-to-r ${i.previewGradient} mb-2`}),_.jsx("p",{className:"text-sm font-semibold text-white",children:i.label}),_.jsx("p",{className:"text-[11px] text-slate-300",children:i.description})]})}function JD({value:i,onChange:t,variant:e="default",onAfterSelect:s=()=>{}}){const[o,u]=Lt.useState(!1),c=Lt.useMemo(()=>XD(i),[i]),m=e==="menu";function p(E){t?.(E),u(!1),s?.()}const g=m?"w-full text-left px-3 py-2 text-slate-200 hover:bg-slate-800/80 rounded-md transition":`px-2 py-1 rounded border transition ${c.pillClass}`,v=`absolute ${m?"left-0":"right-0"} ${m?"mt-1":"mt-2"} w-64 rounded-2xl border border-white/15 bg-[#05060F]/95 p-3 shadow-xl backdrop-blur z-50 transition-all duration-150 ${o?"opacity-100 translate-y-0 pointer-events-auto":"opacity-0 -translate-y-1 pointer-events-none"}`;return _.jsxs("div",{className:`relative text-xs ${m?"w-full":""}`,children:[_.jsxs("button",{type:"button",onClick:()=>u(E=>!E),className:g,children:["Theme: ",c.label]}),_.jsx("div",{className:v,children:_.jsx("div",{className:"space-y-2",children:Up.map(E=>_.jsx(ZD,{option:E,active:E.key===c.key,onSelect:p},E.key))})})]})}function WD({customizeMode:i,setCustomizeMode:t,onReset:e,onSignOut:s,themeValue:o,onChangeTheme:u=()=>{}}){const[c,m]=Lt.useState(!1);return _.jsxs("div",{className:"relative",children:[_.jsx("button",{type:"button",className:"flex items-center justify-center w-9 h-9 rounded-full border border-slate-600/70 text-slate-300 hover:border-cyan-400/60 hover:text-cyan-200 transition",onClick:()=>m(p=>!p),children:_.jsxs("span",{className:"relative flex flex-col justify-between w-4 h-3",children:[_.jsx("span",{className:`h-[2px] rounded-full bg-current transition-transform duration-200 ${c?"translate-y-[5px] rotate-45":""}`}),_.jsx("span",{className:`h-[2px] rounded-full bg-current transition-opacity duration-200 ${c?"opacity-0":"opacity-100"}`}),_.jsx("span",{className:`h-[2px] rounded-full bg-current transition-transform duration-200 ${c?"-translate-y-[5px] -rotate-45":""}`})]})}),_.jsxs("div",{className:`absolute right-0 mt-2 w-52 bg-[#0B0C14] border border-slate-700/70 rounded-lg shadow-lg z-50 text-xs origin-top-right transform transition-all duration-150 ${c?"opacity-100 scale-100 translate-y-0 pointer-events-auto":"opacity-0 scale-95 -translate-y-1 pointer-events-none"}`,children:[_.jsx("div",{className:"px-2 py-2 border-b border-slate-800/70",children:_.jsx(JD,{value:o,onChange:u,variant:"menu",onAfterSelect:()=>m(!1)})}),_.jsx("button",{type:"button",className:"w-full text-left px-3 py-2 hover:bg-slate-800/80 text-slate-200",onClick:()=>{t(p=>!p),m(!1)},children:i?"Finish Customizing":"Customize Layout"}),_.jsx("button",{type:"button",className:"w-full text-left px-3 py-2 hover:bg-slate-800/80 text-rose-300",onClick:()=>{m(!1),e()},children:"Reset Data"}),_.jsx("button",{type:"button",className:"w-full text-left px-3 py-2 hover:bg-slate-800/80 text-slate-200",onClick:async()=>{m(!1);try{await s()}catch(p){console.error("Sign out failed:",p)}},children:"Sign Out"})]})]})}function t4({onSignIn:i,onSignUp:t,onResetPassword:e,loading:s}){const[o,u]=xt.useState("signin"),[c,m]=xt.useState(""),[p,g]=xt.useState(""),[v,E]=xt.useState(null),[T,I]=xt.useState(null),[P,B]=xt.useState(!1),[X,ft]=xt.useState(!1);async function $(){if(E(null),I(null),!c){E("Please enter your email first, then click 'Forgot password?'.");return}if(e){ft(!0);try{await e(c),I("If an account exists with that email, a reset link has been sent. Check your inbox.")}catch(nt){E(nt.message||"Failed to start password reset.")}finally{ft(!1)}}}async function tt(nt){nt.preventDefault(),E(null),I(null),B(!0);try{if(o==="signin")await i(c,p);else{const mt=await t(c,p),ht=mt?.user||null,C=mt?.session||null;I(ht&&!C?"Account created! Check your email and click the confirmation link.":"Account created!")}}catch(mt){E(mt.message||"Something went wrong.")}finally{B(!1)}}return s?_.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-950 text-slate-200",children:_.jsx("div",{className:"text-sm text-slate-400",children:"Checking session..."})}):_.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-950 text-slate-100 px-4",children:_.jsxs("div",{className:"w-full max-w-md space-y-6 rounded-2xl border border-white/10 bg-black/30 p-8 shadow-[0_20px_50px_rgba(8,8,12,0.8)]",children:[_.jsxs("div",{className:"space-y-2 text-center",children:[_.jsx("p",{className:"text-xs tracking-[0.4em] uppercase text-cyan-300",children:"Budget Center"}),_.jsx("h1",{className:"text-2xl font-semibold text-white",children:"Access portal"}),_.jsx("p",{className:"text-sm text-slate-400",children:o==="signin"?"Sign in to load your encrypted budgets.":"Create an account to sync your budgets and goals across devices."})]}),_.jsxs("div",{className:"grid grid-cols-2 rounded-full bg-white/5 p-1 text-sm",children:[_.jsx("button",{type:"button",onClick:()=>u("signin"),className:`rounded-full py-2 font-medium transition ${o==="signin"?"bg-cyan-500 text-black":"text-slate-400 hover:text-white"}`,children:"Sign in"}),_.jsx("button",{type:"button",onClick:()=>u("signup"),className:`rounded-full py-2 font-medium transition ${o==="signup"?"bg-cyan-500 text-black":"text-slate-400 hover:text-white"}`,children:"Create account"})]}),v&&_.jsx("div",{className:"rounded border border-red-500/60 bg-red-500/10 px-3 py-2 text-sm text-red-100",children:v}),T&&_.jsx("div",{className:"rounded border border-emerald-400/60 bg-emerald-400/10 px-3 py-2 text-sm text-emerald-100",children:T}),_.jsxs("form",{onSubmit:tt,className:"space-y-4",children:[_.jsxs("label",{className:"block text-sm",children:[_.jsx("span",{className:"text-slate-300",children:"Email"}),_.jsx("input",{type:"email",required:!0,value:c,onChange:nt=>m(nt.target.value),className:"mt-1 w-full rounded-lg border border-white/10 bg-black/40 px-3 py-2 text-sm text-white placeholder-slate-500 focus:border-cyan-400 focus:outline-none",placeholder:"you@email.com",autoComplete:"email"})]}),_.jsxs("label",{className:"block text-sm",children:[_.jsx("span",{className:"text-slate-300",children:"Password"}),_.jsx("input",{type:"password",required:!0,minLength:6,value:p,onChange:nt=>g(nt.target.value),className:"mt-1 w-full rounded-lg border border-white/10 bg-black/40 px-3 py-2 text-sm text-white placeholder-slate-500 focus:border-cyan-400 focus:outline-none",placeholder:"",autoComplete:o==="signin"?"current-password":"new-password"})]}),_.jsx("button",{type:"submit",disabled:P,className:"w-full rounded-lg bg-cyan-500 py-2 text-sm font-semibold text-black transition hover:bg-cyan-400 disabled:opacity-60",children:P?"Please wait...":o==="signin"?"Sign in":"Create account"})]}),_.jsx("div",{className:"text-center text-sm text-slate-400",children:_.jsx("button",{type:"button",className:"font-medium text-cyan-300 hover:text-cyan-200 disabled:opacity-60",onClick:$,disabled:X,children:X?"Sending reset link...":"Forgot password?"})})]})})}function e4({message:i,variant:t="info",actionLabel:e,onAction:s,onClose:o}){const u=t==="success";return _.jsx("div",{className:"fixed bottom-4 right-4 z-50 max-w-xs sm:max-w-sm",children:_.jsxs("div",{className:`toast-enter flex items-start gap-3 rounded-xl border px-4 py-3 text-xs shadow-xl bg-[#05060F]/95 backdrop-blur
        ${u?"border-emerald-400/80 text-emerald-100":"border-cyan-400/80 text-cyan-100"}`,children:[_.jsx("div",{className:"mt-[2px] text-lg",children:u?"":""}),_.jsxs("div",{className:"flex-1 space-y-1",children:[_.jsx("p",{className:"leading-snug",children:i}),e&&s&&_.jsxs("button",{onClick:s,className:"inline-flex items-center gap-1 text-[0.7rem] mt-1 px-2 py-1 rounded-full border border-cyan-400/70 text-cyan-100 hover:bg-cyan-500/10 hover:border-cyan-300 transition",children:[_.jsx("span",{children:e}),_.jsx("span",{className:"text-[0.75rem]",children:""})]})]}),o&&_.jsx("button",{className:"ml-1 text-[0.7rem] text-slate-500 hover:text-slate-200",onClick:o,children:""})]})})}function n4({emoji:i,active:t,onSelect:e}){return _.jsx("button",{type:"button",onClick:()=>e(i),className:`w-9 h-9 text-lg rounded-full border transition flex items-center justify-center
      ${t?"border-cyan-400/80 bg-cyan-500/10":"border-slate-600/60 bg-black/30 hover:border-cyan-400/40"}`,children:i})}function i4({profile:i,email:t,loading:e,onUpdateProfile:s}){const[o,u]=Lt.useState(!1),[c,m]=Lt.useState(i?.username??""),[p,g]=Lt.useState(i?.avatar_emoji??ru[0]),[v,E]=Lt.useState(!1);Lt.useEffect(()=>{m(i?.username??""),g(i?.avatar_emoji??ru[0])},[i?.username,i?.avatar_emoji]);async function T(B){if(B.preventDefault(),!s)return;E(!0);const X=await s({username:c,avatar_emoji:p});E(!1),X&&u(!1)}const I=i?.avatar_emoji??"",P=i?.username||"Budgeteer";return _.jsxs("div",{className:"relative",children:[_.jsxs("button",{type:"button",onClick:()=>u(B=>!B),className:"flex items-center gap-2 rounded-full border border-slate-600/70 bg-black/20 px-2 py-1 text-left hover:border-cyan-400/60 transition",children:[_.jsx("span",{className:"inline-flex h-8 w-8 items-center justify-center rounded-full bg-cyan-500/10 text-lg",children:I}),_.jsxs("span",{className:"flex flex-col leading-tight text-xs text-slate-300",children:[_.jsx("span",{className:"text-cyan-200",children:P}),_.jsx("span",{className:"text-[10px] text-slate-500",children:e?"Syncing...":"Profile"})]})]}),_.jsxs("form",{className:`absolute right-0 mt-2 w-64 rounded-xl border border-slate-700/70 bg-[#05060F] p-4 text-xs shadow-xl transition-all duration-150 ${o?"opacity-100 translate-y-0 pointer-events-auto":"opacity-0 -translate-y-1 pointer-events-none"}`,onSubmit:T,children:[_.jsxs("div",{className:"space-y-2",children:[_.jsx("p",{className:"text-[11px] text-slate-400",children:t?`Signed in as ${t}`:"Signed in"}),_.jsxs("label",{className:"block",children:[_.jsx("span",{className:"text-slate-300",children:"Display name"}),_.jsx("input",{type:"text",value:c,onChange:B=>m(B.target.value),placeholder:"Budgeteer",className:"mt-1 w-full rounded-lg border border-white/10 bg-black/40 px-3 py-2 text-xs text-white placeholder-slate-500 focus:border-cyan-400 focus:outline-none"})]})]}),_.jsxs("div",{className:"mt-3",children:[_.jsx("p",{className:"mb-2 text-slate-300",children:"Avatar"}),_.jsx("div",{className:"grid grid-cols-5 gap-2",children:ru.map(B=>_.jsx(n4,{emoji:B,active:p===B,onSelect:g},B))})]}),_.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[_.jsx("button",{type:"button",className:"text-[11px] text-slate-500 hover:text-slate-200",onClick:()=>u(!1),children:"Cancel"}),_.jsx("button",{type:"submit",disabled:v,className:"rounded-full bg-cyan-500 px-3 py-1 text-[11px] font-semibold text-black transition hover:bg-cyan-400 disabled:opacity-60",children:v?"Saving...":"Save changes"})]})]})]})}function Rn({title:i,actions:t=null,className:e="",children:s}){return _.jsxs("section",{className:`card-surface border rounded-xl p-4 ${e}`,children:[(i||t)&&_.jsxs("div",{className:"flex items-center justify-between gap-3 mb-3",children:[i?_.jsx("h2",{className:"text-xs font-semibold tracking-[0.25em] text-slate-400 uppercase",children:i}):_.jsx("div",{}),t?_.jsx("div",{className:"shrink-0",children:t}):null]}),s]})}function zg({value:i=0}){const t=Math.max(0,Math.min(100,Number.isNaN(i)?0:i));return _.jsx("div",{className:"progress-bar",children:_.jsx("div",{className:"progress-bar-filled",style:{width:`${t}%`},children:t>2&&_.jsx("div",{className:"progress-shine shine"})})})}function r4(i){switch(i){case"sunset":return"bg-gradient-to-br from-orange-500/70 via-pink-500/60 to-rose-500/60 border-rose-400/60";case"forest":return"bg-gradient-to-br from-emerald-900/70 via-emerald-800/60 to-emerald-700/60 border-emerald-400/60";case"midnight":return"bg-gradient-to-br from-indigo-900/70 via-purple-900/60 to-indigo-900/70 border-indigo-400/60";case"cyber":default:return"bg-[#090a11] border-slate-800"}}function o1({goal:i,onClick:t,onEdit:e}){const s=Number(i?.saved??i?.current??0),o=Number(i?.target??0),u=Number(i?.monthlyPlan??0),c=i?.icon||i?.emoji||"",m=i?.name||"Untitled Goal",p=o>0?Math.min(100,s/o*100):0,g=r4(i?.theme),v=typeof t=="function",E=typeof e=="function";return _.jsxs("div",{className:`relative rounded-xl border p-3 ${g} ${v?"hover:border-cyan-400/70 hover:shadow-[0_0_18px_rgba(34,211,238,0.35)] transition":""}`,children:[_.jsxs("button",{type:"button",onClick:v?t:void 0,className:`w-full text-left ${v?"cursor-pointer":"cursor-default"}`,"aria-label":v?`Open goal ${m}`:`Goal ${m}`,children:[_.jsxs("div",{className:"flex items-center justify-between mb-1.5 pr-10",children:[_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx("span",{className:"text-lg",children:c}),_.jsx("span",{className:"text-sm font-medium text-slate-100",children:m})]}),_.jsxs("span",{className:"text-[0.7rem] text-slate-400",children:["Plan: $",Number.isFinite(u)?u.toFixed(0):"0","/mo"]})]}),_.jsxs("div",{className:"text-xs text-slate-400 mb-1",children:["$",Number.isFinite(s)?s.toFixed(0):"0"," / $",Number.isFinite(o)?o.toFixed(0):"0"]}),_.jsx(zg,{value:p})]}),E&&_.jsx("button",{type:"button",onClick:T=>{T.preventDefault(),T.stopPropagation(),e(i?.id)},className:"absolute top-2 right-2 px-2 py-1 rounded-md border border-slate-700/80 bg-slate-900/40 text-slate-100 text-xs hover:border-cyan-400/70 hover:bg-slate-900/60 transition","aria-label":"Edit goal",title:"Edit",children:""})]})}const s4="modulepreload",a4=function(i){return"/budget-app/"+i},Xb={},o4=function(t,e,s){let o=Promise.resolve();if(e&&e.length>0){let p=function(g){return Promise.all(g.map(v=>Promise.resolve(v).then(E=>({status:"fulfilled",value:E}),E=>({status:"rejected",reason:E}))))};document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),m=c?.nonce||c?.getAttribute("nonce");o=p(e.map(g=>{if(g=a4(g),g in Xb)return;Xb[g]=!0;const v=g.endsWith(".css"),E=v?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${g}"]${E}`))return;const T=document.createElement("link");if(T.rel=v?"stylesheet":s4,v||(T.as="script"),T.crossOrigin="",T.href=g,m&&T.setAttribute("nonce",m),document.head.appendChild(T),v)return new Promise((I,P)=>{T.addEventListener("load",I),T.addEventListener("error",()=>P(new Error(`Unable to preload CSS for ${g}`)))})}))}function u(c){const m=new Event("vite:preloadError",{cancelable:!0});if(m.payload=c,window.dispatchEvent(m),!m.defaultPrevented)throw c}return o.then(c=>{for(const m of c||[])m.status==="rejected"&&u(m.reason);return t().catch(u)})},l4=[{key:"chase",label:"Chase"},{key:"capitalone",label:"Capital One"},{key:"wellsfargo",label:"Wells Fargo"},{key:"americanexpress",label:"Amex"},{key:"discover",label:"Discover"},{key:"navyfederal",label:"Navy Federal"},{key:"mountainamerica",label:"Mountain America"},{key:"bankofamerica",label:"Bank of America"},{key:"usbank",label:"US Bank"},{key:"pnc",label:"PNC"}];function u4(i=""){return i.toLowerCase().replace(/[^a-z0-9]/g,"")}function Zb(i="",t=""){const e=u4((t||"")+" "+i.slice(0,4e3));for(const s of l4)if(e.includes(s.key))return s.label;return null}function Bg(i=""){const t=i.split(/\r\n|\n|\r/).find(p=>p.trim().length>0)||"";let e=0,s=0,o=0,u=0,c=!1;for(let p=0;p<t.length;p++){const g=t[p];if(g==='"'){c=!c;continue}c||(g===","?e++:g===";"?s++:g==="	"?o++:g==="|"&&u++)}const m=[{d:",",c:e},{d:";",c:s},{d:"	",c:o},{d:"|",c:u}].sort((p,g)=>g.c-p.c);return m[0].c>0?m[0].d:","}function go(i,t=","){const e=[];let s="",o=!1;for(let u=0;u<i.length;u++){const c=i[u];if(c==='"'){if(o&&i[u+1]==='"'){s+='"',u+=1;continue}o=!o;continue}c===t&&!o?(e.push(s),s=""):s+=c}return e.push(s),e}function cr(i){if(i==null)return NaN;let t=String(i).trim();t=t.replace(/"/g,"");let e=!1;t.startsWith("(")&&t.endsWith(")")&&(e=!0,t=t.slice(1,-1));let s=!1,o=!1;if(/[a-z]/i.test(t.slice(-1))&&(t.trim().toUpperCase().endsWith("CR")?(s=!0,t=t.replace(/cr$/i,"")):t.trim().toUpperCase().endsWith("DR")&&(o=!0,t=t.replace(/dr$/i,""))),t=t.replace(/[$,]/g,""),t.endsWith("-")&&(t="-"+t.slice(0,-1)),t.endsWith("+")&&(t=t.slice(0,-1)),t=t.replace(/^\+/,""),t==="")return NaN;const u=Number(t);if(Number.isNaN(u))return NaN;let c=e?-u:u;return s&&(c=Math.abs(c)),o&&(c=-Math.abs(c)),c}function l1(i,t){const e=(i||"").toLowerCase();return t>0?e.includes("payroll")||e.includes("direct deposit")?"Income  Paycheck":e.includes("refund")||e.includes("rebate")?"Income  Refund":"Income  Other":e.includes("uber")||e.includes("lyft")||e.includes("taxi")?"Transport  Rideshare":e.includes("shell")||e.includes("chevron")||e.includes("exxon")||e.includes("gas")||e.includes("fuel")?"Transport  Gas":e.includes("walmart")||e.includes("costco")||e.includes("grocery")||e.includes("smith")||e.includes("kroger")?"Groceries":e.includes("starbucks")||e.includes("coffee")||e.includes("mcdonald")||e.includes("taco bell")||e.includes("restaurant")||e.includes("cafe")?"Food & Dining":e.includes("netflix")||e.includes("spotify")||e.includes("hulu")||e.includes("disney")||e.includes("subscription")||e.includes("prime")?"Subscriptions":e.includes("rent")||e.includes("landlord")||e.includes("mortgage")?"Housing  Rent/Mortgage":e.includes("power")||e.includes("electric")||e.includes("water")||e.includes("utility")||e.includes("utilities")?"Utilities":e.includes("gym")||e.includes("fitness")?"Health & Fitness":e.includes("insurance")||e.includes("geico")||e.includes("allstate")?"Insurance":e.includes("amazon")||e.includes("target")||e.includes("best buy")||e.includes("shop")?"Shopping":"Other"}const Ws={date:["date","transaction date","posted date","posting date","trans date"],description:["description","details","memo","payee","transaction description","narrative"],debit:["debit","withdrawal","outflow","money out","charge","dr"],credit:["credit","deposit","inflow","money in","payment","credit amount","cr"],amount:["amount","amt","transaction amount","value","amount (usd)","amount (cad)"],type:["type","dr/cr","transaction type","debit/credit"],balance:["balance","running balance","current balance","ending balance","available balance","ledger balance"]};function c4(i,t=","){return go(i,t).map(s=>s.trim()).map(s=>{let o=s.toLowerCase().replace(/"/g,"");return o=o.replace(/\s+/g," ").trim(),o})}function ta(i,t){return i.findIndex(e=>t.includes(e)||t.some(s=>e.includes(s)))}function u1(i){if(!i)return"";let t=String(i).trim().replace(/"/g,"");if(!t)return"";let e=t.match(/^(\d{4})[-/.](\d{1,2})[-/.](\d{1,2})$/);if(e){const[,o,u,c]=e;return`${o}-${u.padStart(2,"0")}-${c.padStart(2,"0")}`}if(e=t.match(/^(\d{4})(\d{2})(\d{2})$/),e){const[,o,u,c]=e;return`${o}-${u}-${c}`}if(e=t.match(/^(\d{1,2})[\/.-](\d{1,2})[\/.-](\d{2,4})$/),e){let[,o,u,c]=e,m=c.length===2?Number(c)>=70?`19${c}`:`20${c}`:c;const p=Number(o),g=Number(u);let v,E;return p>12&&g<=12?(E=p,v=g):(v=p,E=g),`${m}-${String(v).padStart(2,"0")}-${String(E).padStart(2,"0")}`}if(e=t.match(/^(\d{1,2})\s+([A-Za-z]{3,})\s+(\d{2,4})$/),e){const[,o,u,c]=e,m=c.length===2?`20${c}`:c,g=["jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"].indexOf(u.toLowerCase().slice(0,3));if(g>=0){const v=String(g+1).padStart(2,"0"),E=String(o).padStart(2,"0");return`${m}-${v}-${E}`}}if(e=t.match(/^([A-Za-z]{3,})\s+(\d{1,2}),?\s+(\d{2,4})$/),e){const[,o,u,c]=e,m=c.length===2?`20${c}`:c,g=["jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"].indexOf(o.toLowerCase().slice(0,3));if(g>=0){const v=String(g+1).padStart(2,"0"),E=String(u).padStart(2,"0");return`${m}-${v}-${E}`}}const s=new Date(t);return Number.isNaN(s.getTime())?t:s.toISOString().slice(0,10)}function h4(i){const t=Bg(i),e=i.split(/\r?\n/).find(u=>u.trim().length>0)||"";if(!e)return[];const s=go(e,t).map(u=>u.trim().replace(/^"|"$/g,""));return s.some(u=>/[a-zA-Z]/.test(u))?s.map((u,c)=>u||`Column ${c+1}`):s.map((u,c)=>`Column ${c+1}`)}function f4(i){if(!i)return[];const t=i.replace(/^\uFEFF/,""),e=Bg(t),s=t.split(/\r\n|\n|\r/).filter($=>$.trim()!=="");if(s.length===0)return[];let o=c4(s[0],e),u=1;function c($){const tt=ta($,Ws.date),nt=ta($,Ws.description),mt=ta($,Ws.amount),ht=ta($,Ws.debit),C=ta($,Ws.credit),A=ta($,Ws.type),R=ta($,Ws.balance);return{dateIndex:tt,descIndex:nt,amountIndex:mt,debitIndex:ht,creditIndex:C,typeIndex:A,balanceIndex:R}}let{dateIndex:m,descIndex:p,amountIndex:g,debitIndex:v,creditIndex:E,typeIndex:T,balanceIndex:I}=c(o);if(m<0&&p<0&&g<0&&v<0&&E<0&&I<0){const $=go(s[0],e).map(nt=>nt.trim());o=$.map((nt,mt)=>mt===0?"date":mt===1?"description":mt===2||mt===$.length-1?"amount":`col${mt+1}`),u=0,{dateIndex:m,descIndex:p,amountIndex:g,debitIndex:v,creditIndex:E,typeIndex:T,balanceIndex:I}=c(o)}function B(){const $=Math.min(s.length,25),tt=[];for(let ht=u;ht<$;ht++)go(s[ht],e).forEach((A,R)=>{const V=cr(A);Number.isNaN(V)||(tt[R]=(tt[R]||0)+1)});let nt=-1,mt=0;return tt.forEach((ht,C)=>{ht>mt&&(mt=ht,nt=C)}),mt>=2?nt:-1}if(g<0&&v<0&&E<0){const $=B();$>=0&&(g=$)}function X($,tt){if(!tt||T<0)return $;const nt=tt[T]?.toString().toLowerCase()||"";if(!nt)return $;const mt=nt.includes("debit")||nt.includes("withdrawal")||nt.includes("payment")||nt.includes("dr")||nt==="d",ht=nt.includes("credit")||nt.includes("deposit")||nt.includes("refund")||nt.includes("cr")||nt==="c";return mt?-Math.abs($):ht?Math.abs($):$}const ft=[];for(let $=u;$<s.length;$++){const tt=s[$],nt=go(tt,e).map(D=>D.trim());if(nt.length===0||nt.every(D=>D===""))continue;const mt=m>=0?nt[m]:"",ht=u1(mt),C=p>=0?nt[p]:"";let A=NaN;if(g>=0)A=cr(nt[g]),A=X(A,nt);else if(v>=0||E>=0){const D=v>=0?cr(nt[v]):0,S=E>=0?cr(nt[E]):0,ot=Number.isFinite(D)?D:0;A=(Number.isFinite(S)?S:0)-ot}let R=NaN;if(I>=0&&(R=cr(nt[I])),!ht&&!C&&Number.isNaN(A)&&Number.isNaN(R)||typeof A!="number"||Number.isNaN(A))continue;const V=l1(C,A),M={date:ht,description:C,amount:A,category:V};typeof R=="number"&&!Number.isNaN(R)&&(M.balance=R),ft.push(M)}return ft}function Jb(i,{dateIndex:t=null,descIndex:e=null,amountIndex:s=null,debitIndex:o=null,creditIndex:u=null,typeIndex:c=null,balanceIndex:m=null}={}){if(!i)return[];const p=i.replace(/^\uFEFF/,""),g=Bg(p),v=p.split(/\r\n|\n|\r/).filter(I=>I.trim()!=="");if(v.length===0)return[];const E=(I,P)=>{if(!P||c==null||c<0)return I;const B=P[c]?.toString().toLowerCase()||"";if(!B)return I;const X=B.includes("debit")||B.includes("withdrawal")||B.includes("payment")||B.includes("dr")||B==="d",ft=B.includes("credit")||B.includes("deposit")||B.includes("refund")||B.includes("cr")||B==="c";return X?-Math.abs(I):ft?Math.abs(I):I},T=[];for(let I=1;I<v.length;I++){const P=v[I],B=go(P,g).map(C=>C.trim());if(B.length===0||B.every(C=>C===""))continue;const X=t!=null&&t>=0?B[t]:"",ft=u1(X),$=e!=null&&e>=0?B[e]:"";let tt=NaN;if(s!=null&&s>=0)tt=cr(B[s]),tt=E(tt,B);else if(o!=null||u!=null){const C=o!=null&&o>=0?cr(B[o]):0,A=u!=null&&u>=0?cr(B[u]):0,R=Number.isFinite(C)?C:0;tt=(Number.isFinite(A)?A:0)-R}let nt=NaN;if(m!=null&&m>=0&&(nt=cr(B[m])),!ft&&!$&&Number.isNaN(tt)&&Number.isNaN(nt)||typeof tt!="number"||Number.isNaN(tt))continue;const mt=l1($,tt),ht={date:ft,description:$,amount:tt,category:mt};typeof nt=="number"&&!Number.isNaN(nt)&&(ht.balance=nt),T.push(ht)}return T}function d4(i){return new Promise((t,e)=>{const s=new FileReader;s.onload=o=>t(String(o.target?.result||"")),s.onerror=()=>e(new Error("Failed to read file")),s.readAsText(i)})}function mh(i){i.preventDefault(),i.stopPropagation()}function m4(){return typeof crypto<"u"&&crypto.randomUUID?crypto.randomUUID():`f-${Date.now()}-${Math.random().toString(16).slice(2)}`}function p4(i){return(i?.name||"").toLowerCase().endsWith(".pdf")||i?.type==="application/pdf"?"pdf":"csv"}function g4(i){return{id:m4(),file:i,name:i?.name||"unknown",kind:p4(i),detectedBank:"",rawText:"",columns:[],mapping:{date:"",description:"",amount:""},previewRows:[],status:"pending",error:"",importedCount:0,createdAt:Date.now()}}function y4(i=[]){const t=T=>String(T||"").trim().toLowerCase(),e=["date","posting date","posted date","transaction date","trans date"],s=["description","desc","merchant","name","memo","details","payee"],o=["amount","amt","value","total"],u=["debit","withdrawal","outflow","charge","money out"],c=["credit","deposit","inflow","payment","money in"],m=(T,I)=>{const P=t(T);if(!P)return 0;let B=0;for(const X of I)P===X?B+=10:P.includes(X)&&(B+=6);return B},p=T=>{let I={idx:null,s:0};for(let P=0;P<i.length;P++){const B=m(i[P],T);B>I.s&&(I={idx:P,s:B})}return I.s>0?I.idx:null},g=p(e),v=p(s);let E=p(o);if(E==null){const T=p(u),I=p(c);T!=null&&I==null&&(E=T),I!=null&&T==null&&(E=I),T!=null&&I!=null&&(E=I)}return{date:g,description:v,amount:E}}function Wb(i,t,e){const s=e&&(e.date!==""||e.description!==""||e.amount!==""),o=v=>({dateIndex:v?.date===""?null:Number.parseInt(v.date,10),descIndex:v?.description===""?null:Number.parseInt(v.description,10),amountIndex:v?.amount===""?null:Number.parseInt(v.amount,10)}),u=f4(i);if(Array.isArray(u)&&u.length)return{rows:u,status:"ready",error:"",nextMapping:e};if(s){const v=Jb(i,o(e));return Array.isArray(v)&&v.length?{rows:v,status:"ready",error:"",nextMapping:e}:{rows:[],status:"needsMapping",error:"No rows were parsed with that mapping. Try different columns.",nextMapping:e}}const c=y4(t),m={date:c.date==null?"":String(c.date),description:c.description==null?"":String(c.description),amount:c.amount==null?"":String(c.amount)},p=o(m);if(p.dateIndex!=null&&p.descIndex!=null&&p.amountIndex!=null){const v=Jb(i,p);if(Array.isArray(v)&&v.length)return{rows:v,status:"ready",error:"",nextMapping:m}}return{rows:[],status:"needsMapping",error:"We couldn't automatically detect the right columns. Pick Date/Description/Amount below  it will re-parse automatically.",nextMapping:m}}function _4({onTransactionsParsed:i=()=>{}}){const[t,e]=xt.useState([]),[s,o]=xt.useState(null),[u,c]=xt.useState(!1),[m,p]=xt.useState(!0),g=xt.useRef(t);xt.useEffect(()=>{g.current=t},[t]);const v=xt.useMemo(()=>t.find(D=>D.id===s)||null,[t,s]),E=t.filter(D=>D.status==="imported").length,T=t.filter(D=>D.status==="ready").length,I=t.filter(D=>D.status==="pending"||D.status==="parsing").length,P=t.filter(D=>D.status==="needsMapping").length,B=t.filter(D=>D.status==="error").length;function X(D=[]){const S=Array.from(D||[]).filter(Boolean);if(!S.length)return;const ot=S.map(g4);e(F=>{const j=new Set(F.map(J=>`${J.name}::${J.file?.size}::${J.file?.lastModified}`)),U=ot.filter(J=>{const Y=`${J.name}::${J.file?.size}::${J.file?.lastModified}`;return j.has(Y)?!1:(j.add(Y),!0)});return[...F,...U]}),o(F=>F||ot[0].id)}async function ft(D){e(ot=>ot.map(F=>F.id===D?{...F,status:"parsing",error:""}:F));const S=g.current.find(ot=>ot.id===D);if(S)try{if(S.kind==="pdf"){const{parsePdfTransactions:J}=await o4(async()=>{const{parsePdfTransactions:ut}=await import("./pdf-DihcZ5lA.js");return{parsePdfTransactions:ut}},[]),{text:Y,rows:rt}=await J(S.file),O=Zb(Y,S.name||""),K=Array.isArray(rt)?rt:[];e(ut=>ut.map(dt=>dt.id!==D?dt:K.length?{...dt,rawText:Y||"",detectedBank:O||"",previewRows:K,columns:[],status:"ready",error:""}:{...dt,rawText:Y||"",detectedBank:O||"",previewRows:[],columns:[],status:"error",error:"We couldn't detect any transactions in that PDF. Try CSV instead."}));return}const ot=await d4(S.file),F=Zb(ot,S.name||""),j=h4(ot),U=Wb(ot,j,S.mapping);e(J=>J.map(Y=>Y.id!==D?Y:{...Y,rawText:ot,detectedBank:F||"",columns:j,mapping:U.nextMapping??Y.mapping,previewRows:U.rows,status:U.status,error:U.error||""}))}catch(ot){console.error("Parse error:",ot),e(F=>F.map(j=>j.id===D?{...j,status:"error",error:j.kind==="pdf"?"We couldn't read this PDF. Try downloading it as CSV.":"We couldn't understand this CSV. Try a different export format."}:j))}}xt.useEffect(()=>{const D=t.find(ot=>ot.status==="pending");if(!D)return;const S=setTimeout(()=>ft(D.id),0);return()=>clearTimeout(S)},[t]);const $=xt.useRef(null);function tt(D,S){v&&(e(ot=>ot.map(F=>F.id===v.id?{...F,mapping:{...F.mapping,[D]:S},status:F.kind==="csv"?"parsing":F.status,error:""}:F)),$.current&&clearTimeout($.current),$.current=setTimeout(()=>{const ot=g.current.find(U=>U.id===v.id);if(!ot||ot.kind!=="csv"||!ot.rawText)return;const F=ot.columns||[],j=Wb(ot.rawText,F,ot.mapping);e(U=>U.map(J=>J.id!==ot.id?J:{...J,mapping:j.nextMapping??J.mapping,previewRows:j.rows,status:j.status,error:j.error||""}))},120))}function nt(D){return new Promise(S=>{e(ot=>{const F=ot.find(U=>U.id===D);if(!F||F.status!=="ready")return ot;const j=ot.map(U=>U.id===D?{...U,status:"importing"}:U);return queueMicrotask(()=>{try{i(F.previewRows,{rawText:F.rawText,bank:F.detectedBank||"",filename:F.name||"",kind:F.kind||"csv"}),e(U=>U.map(J=>J.id===D?{...J,status:"imported",importedCount:F.previewRows.length,error:""}:J)),S(!0)}catch(U){console.error("Import error:",U),e(J=>J.map(Y=>Y.id===D?{...Y,status:"error",error:U?.message||"Import failed."}:Y)),S(!1)}}),j})})}async function mt(){const D=g.current.filter(S=>S.status==="ready");for(const S of D)await nt(S.id)}const ht=xt.useRef(!1);xt.useEffect(()=>{!m||ht.current||!t.some(S=>S.status==="ready")||(ht.current=!0,(async()=>{try{for(;;){const S=g.current.find(ot=>ot.status==="ready");if(!S)break;await nt(S.id)}}finally{ht.current=!1}})())},[t,m]);function C(D){if(e(S=>S.filter(ot=>ot.id!==D)),s===D){const S=g.current.filter(ot=>ot.id!==D);o(S[0]?.id||null)}}function A(){$.current&&clearTimeout($.current),e([]),o(null),c(!1)}const R=Math.min(10,v?.previewRows?.length||0),V=(v?.previewRows||[]).slice(0,R).reduce((D,S)=>D+(typeof S.amount=="number"?S.amount:0),0),M=v&&v.kind==="csv"&&v.rawText&&v.columns.length>0&&(v.status==="needsMapping"||v.error);return _.jsxs("div",{className:`space-y-2 text-xs rounded-xl border p-3 transition ${u?"border-cyan-400/70 bg-cyan-500/5":"border-slate-800 bg-slate-950/30"}`,onDragEnter:D=>{mh(D),c(!0)},onDragOver:D=>{mh(D),c(!0)},onDragLeave:D=>{mh(D),c(!1)},onDrop:D=>{mh(D),c(!1),X(D.dataTransfer?.files||[])},children:[_.jsxs("p",{className:"text-slate-400",children:["Upload ",_.jsx("span",{className:"text-cyan-300 font-semibold",children:".csv"})," or"," ",_.jsx("span",{className:"text-cyan-300 font-semibold",children:".pdf"})," bank statements. Drop multiple files. Most files will auto-parse and (optionally) auto-import."]}),_.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[_.jsxs("label",{className:"inline-flex items-center gap-2 px-3 py-1.5 rounded-md border border-cyan-400/70 text-cyan-200 bg-cyan-500/10 hover:bg-cyan-500/20 cursor-pointer transition",children:[_.jsx("span",{children:"Choose file(s)"}),_.jsx("input",{type:"file",accept:".csv,.pdf,text/csv,application/pdf,text/plain",multiple:!0,className:"hidden",onChange:D=>{X(D.target.files||[]),D.target.value=""}})]}),_.jsxs("label",{className:"inline-flex items-center gap-2 px-2 py-1.5 rounded-md border border-slate-700 text-slate-200 bg-black/20",children:[_.jsx("input",{type:"checkbox",checked:m,onChange:D=>p(D.target.checked)}),_.jsx("span",{className:"text-[0.7rem] text-slate-300",children:"Auto-import when ready"})]}),t.length>0&&_.jsxs(_.Fragment,{children:[_.jsxs("button",{type:"button",onClick:mt,disabled:T===0,className:"px-3 py-1.5 rounded-md border border-emerald-400/70 text-emerald-100 bg-emerald-500/10 hover:bg-emerald-500/20 transition disabled:opacity-40 disabled:cursor-not-allowed",children:["Import all ready (",T,")"]}),_.jsx("button",{type:"button",onClick:A,className:"px-3 py-1.5 rounded-md border border-slate-600 text-slate-200 hover:border-slate-400 transition",children:"Clear"}),_.jsxs("div",{className:"text-[0.7rem] text-slate-500",children:["Imported ",_.jsx("span",{className:"text-slate-200 font-mono",children:E}),"/",_.jsx("span",{className:"text-slate-200 font-mono",children:t.length}),I?_.jsxs("span",{className:"ml-2 text-slate-400",children:["(",I," parsing)"]}):null,P?_.jsxs("span",{className:"ml-2 text-amber-300",children:["(",P," need mapping)"]}):null,B?_.jsxs("span",{className:"ml-2 text-rose-400",children:["(",B," error",B===1?"":"s",")"]}):null]})]})]}),t.length>0&&_.jsx("div",{className:"flex gap-2 overflow-x-auto pb-1",children:t.slice().sort((D,S)=>D.createdAt-S.createdAt).map(D=>{const S=D.id===s,ot=D.status==="imported"?"text-emerald-300":D.status==="ready"?"text-cyan-300":D.status==="error"?"text-rose-400":D.status==="needsMapping"?"text-amber-300":D.status==="parsing"?"text-slate-300":"text-slate-400";return _.jsxs("div",{className:`flex items-center gap-2 px-2 py-1.5 rounded-md border text-[0.7rem] whitespace-nowrap ${S?"border-cyan-400/70 bg-cyan-500/10 text-cyan-200":"border-slate-700 text-slate-300 hover:border-slate-500"}`,children:[_.jsxs("button",{type:"button",onClick:()=>o(D.id),children:[D.name,_.jsxs("span",{className:`ml-2 ${ot}`,children:[" ",D.status]})]}),_.jsx("button",{type:"button",className:"ml-1 text-slate-500 hover:text-slate-200",title:"Remove",onClick:()=>C(D.id),children:""})]},D.id)})}),v&&_.jsxs("div",{className:"mt-1 space-y-2",children:[_.jsxs("div",{className:"rounded-md border border-slate-800 bg-black/20 p-2 text-[0.7rem] text-slate-400",children:[_.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-1",children:[_.jsxs("div",{children:[_.jsx("span",{className:"text-slate-200 font-semibold",children:v.name})," ",_.jsxs("span",{className:"text-slate-500",children:["(",v.kind.toUpperCase(),")"]})]}),_.jsxs("div",{className:"text-slate-500",children:["Rows:"," ",_.jsx("span",{className:"text-slate-200 font-mono",children:v.previewRows?.length||0}),v.detectedBank?_.jsxs(_.Fragment,{children:[" "," Bank:"," ",_.jsx("span",{className:"text-cyan-300 font-semibold",children:v.detectedBank})]}):null]})]}),v.error?_.jsx("div",{className:"mt-1 text-rose-400",children:v.error}):null]}),M&&_.jsxs("div",{className:"border border-slate-700 rounded-md p-2 space-y-2",children:[_.jsx("p",{className:"text-[0.7rem] text-slate-400",children:"Quick fix: choose the correct columns below  it will re-parse automatically."}),_.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-2",children:["date","description","amount"].map(D=>_.jsxs("label",{className:"flex flex-col gap-1 text-[0.7rem]",children:[_.jsx("span",{className:"uppercase tracking-[0.16em] text-slate-500",children:D}),_.jsxs("select",{className:"bg-[#05060F] border border-slate-700 rounded px-2 py-1 text-slate-200",value:v.mapping?.[D]??"",onChange:S=>tt(D,S.target.value),children:[_.jsx("option",{value:"",children:"Auto detect"}),v.columns.map((S,ot)=>_.jsxs("option",{value:ot,children:[S," (column ",ot+1,")"]},ot))]})]},D))}),v.status==="needsMapping"?_.jsx("p",{className:"text-[0.7rem] text-amber-300",children:"Pick Date/Description/Amount and it should become ready."}):null]}),v.previewRows?.length>0&&_.jsxs("div",{className:"border border-slate-700 rounded-md p-2 space-y-2",children:[_.jsxs("div",{className:"flex items-center justify-between text-[0.7rem] text-slate-400",children:[_.jsxs("span",{children:["Previewing ",R," of ",v.previewRows.length," rows"]}),_.jsxs("span",{children:["Net amount (preview):"," ",_.jsxs("span",{className:V<0?"text-rose-300":"text-emerald-300",children:[V<0?"-":"","$",Math.abs(V).toFixed(2)]})]})]}),_.jsx("div",{className:"max-h-40 overflow-auto text-[0.7rem]",children:_.jsxs("table",{className:"w-full text-left border-collapse",children:[_.jsx("thead",{className:"sticky top-0 bg-[#05060F]",children:_.jsxs("tr",{className:"border-b border-slate-700",children:[_.jsx("th",{className:"py-1 pr-2 font-semibold text-slate-300",children:"Date"}),_.jsx("th",{className:"py-1 pr-2 font-semibold text-slate-300",children:"Description"}),_.jsx("th",{className:"py-1 text-right font-semibold text-slate-300",children:"Amount"})]})}),_.jsx("tbody",{children:v.previewRows.slice(0,R).map((D,S)=>_.jsxs("tr",{className:"border-b border-slate-800/60",children:[_.jsx("td",{className:"py-1 pr-2 text-slate-200",children:D.date}),_.jsx("td",{className:"py-1 pr-2 text-slate-300",children:D.description}),_.jsxs("td",{className:`py-1 text-right ${D.amount<0?"text-rose-300":"text-emerald-300"}`,children:[D.amount<0?"-":"","$",Math.abs(D.amount).toFixed(2)]})]},S))})]})}),_.jsxs("div",{className:"flex flex-wrap gap-2 mt-1",children:[_.jsx("button",{type:"button",onClick:()=>nt(v.id),disabled:v.status!=="ready",className:"px-3 py-1.5 text-[0.7rem] rounded-md border border-emerald-400/70 text-emerald-100 bg-emerald-500/10 hover:bg-emerald-500/20 transition disabled:opacity-40 disabled:cursor-not-allowed",children:"Import this file"}),_.jsx("button",{type:"button",onClick:()=>ft(v.id),className:"px-3 py-1.5 text-[0.7rem] rounded-md border border-slate-600 text-slate-200 hover:border-slate-400 transition",children:"Re-parse"})]})]})]}),_.jsx("p",{className:"text-[0.7rem] text-slate-500",children:"Tip: Most banks let you export recent transactions as CSV from their website."})]})}function ph({label:i,value:t,accent:e}){return _.jsxs("div",{className:"flex flex-col",children:[_.jsx("span",{className:"text-[0.65rem] uppercase tracking-[0.22em] text-slate-500",children:i}),_.jsxs("span",{className:`text-base font-semibold ${e}`,children:["$",t.toFixed(2)]})]})}function tp(i){const t=Number(i);return Number.isFinite(t)?t.toLocaleString(void 0,{style:"currency",currency:"USD"}):""}function tE(i){if(i==null)return null;const t=String(i).trim();if(!t)return null;const e=/^\(.*\)$/.test(t),s=t.replace(/[(),$]/g,"").replace(/\s+/g,""),o=Number(s);return Number.isFinite(o)?e?-o:o:null}function v4({open:i,onClose:t,onConfirm:e,accountName:s,statementRangeLabel:o,suggestedEndingBalance:u,transactionSum:c}){const[m,p]=Lt.useState(""),[g,v]=Lt.useState("");Lt.useEffect(()=>{i&&(v(""),p(Number.isFinite(u)?String(u):""))},[i,u]);const E=Lt.useMemo(()=>tE(m),[m]),T=Lt.useMemo(()=>Number.isFinite(E)?E-(Number.isFinite(c)?c:0):null,[E,c]);if(!i)return null;function I(){v("");const P=tE(m);if(!Number.isFinite(P)){v("Please enter a valid ending balance (example: 1284.32).");return}e({endingBalance:P,startingBalance:T})}return _.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[_.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:t}),_.jsxs("div",{className:"relative w-[92vw] max-w-xl rounded-2xl bg-white p-5 shadow-xl",children:[_.jsxs("div",{className:"flex items-start justify-between gap-3",children:[_.jsxs("div",{children:[_.jsx("h2",{className:"text-lg font-semibold",children:"Confirm statement balance"}),_.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["This statement doesnt include a running balance. Enter the"," ",_.jsx("b",{children:"Ending Balance"})," shown on your statement so we can set the correct account balance."]})]}),_.jsx("button",{onClick:t,className:"rounded-xl px-3 py-1 text-sm bg-gray-100 hover:bg-gray-200",children:""})]}),_.jsxs("div",{className:"mt-4 space-y-2",children:[_.jsxs("div",{className:"text-sm text-gray-700",children:[_.jsxs("div",{children:[_.jsx("b",{children:"Account:"})," ",s||"New account"]}),o?_.jsxs("div",{children:[_.jsx("b",{children:"Statement:"})," ",o]}):null,Number.isFinite(c)?_.jsxs("div",{children:[_.jsx("b",{children:"Transactions total:"})," ",tp(c)]}):null]}),Number.isFinite(u)?_.jsxs("button",{type:"button",onClick:()=>p(String(u)),className:"w-full rounded-xl border px-3 py-2 text-left hover:bg-gray-50",title:"Use last known ending balance",children:["Use last ending balance: ",_.jsx("b",{children:tp(u)})]}):null,_.jsx("label",{className:"block text-sm font-medium mt-2",children:"Ending Balance"}),_.jsx("input",{value:m,onChange:P=>p(P.target.value),placeholder:"e.g. 1284.32",className:"w-full rounded-xl border px-3 py-2 outline-none focus:ring",inputMode:"decimal"}),Number.isFinite(T)?_.jsxs("div",{className:"text-sm text-gray-700",children:["Starting balance will be: ",_.jsx("b",{children:tp(T)})]}):null,g?_.jsx("div",{className:"text-sm text-red-600",children:g}):null]}),_.jsxs("div",{className:"mt-5 flex justify-end gap-2",children:[_.jsx("button",{onClick:t,className:"rounded-xl px-4 py-2 text-sm bg-gray-100 hover:bg-gray-200",children:"Cancel"}),_.jsx("button",{onClick:I,className:"rounded-xl px-4 py-2 text-sm bg-black text-white hover:opacity-90",children:"Confirm & Import"})]})]})]})}function b4(i){if(i==null)return null;const t=String(i).trim();if(!t)return null;const e=/^\(.*\)$/.test(t),s=t.replace(/[(),$]/g,"").replace(/\s+/g,""),o=Number(s);return Number.isFinite(o)?e?-o:o:null}function E4(i,t="Amount"){let e=0;for(const s of i||[]){const o=b4(s?.[t]);Number.isFinite(o)&&(e+=o)}return e}function x4(i){const t=new Date(i);return Number.isFinite(t.getTime())?t:null}function T4(i,t="Date"){let e=null,s=null;for(const o of i||[]){const u=x4(o?.[t]);u&&((!e||u<e)&&(e=u),(!s||u>s)&&(s=u))}return{start:e,end:s}}function uo(i){if(!(i instanceof Date))return null;const t=i.getFullYear(),e=String(i.getMonth()+1).padStart(2,"0"),s=String(i.getDate()).padStart(2,"0");return`${t}-${e}-${s}`}function w4(i){return!i?.start||!i?.end?null:`${uo(i.start)}_${uo(i.end)}`}const S4=["monthOverview","accountSnapshot","goals","csvImport"];function A4({month:i="",income:t=0,fixed:e=0,variable:s=0,leftover:o=0,goals:u=[],transactions:c=[],accounts:m=[],currentAccountId:p,onChangeCurrentAccount:g=()=>{},onOpenGoal:v=()=>{},onCreateGoal:E=()=>{},onCsvImported:T=()=>{},onTransactionsParsed:I,currentAccountBalance:P=0,totalBalance:B=0,sectionsOrder:X}){const ft=T||I||(()=>{}),$=Number(t)||0,tt=Number(e)||0,nt=Number(s)||0,mt=Number(o)||0,ht=Number(P)||0,C=Number(B)||0,A=$>0?($-mt)/$*100:0,R=X&&X.length?X:S4,V=Array.isArray(c)&&c.length>0,[M,D]=xt.useState(!1);xt.useEffect(()=>{D(!1)},[c]);const[S,ot]=xt.useState(!1),[F,j]=xt.useState(!1),[U,J]=xt.useState(null);return _.jsxs("div",{className:"space-y-6",children:[_.jsxs("div",{className:"flex items-center justify-between",children:[_.jsx("h1",{className:"text-lg font-semibold text-slate-100",children:i}),_.jsx("span",{className:"text-xs text-slate-400",children:"Overview of this month's money flow"})]}),R.map(Y=>{switch(Y){case"monthOverview":return _.jsxs(Rn,{title:"MONTH OVERVIEW",children:[_.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 text-sm",children:[_.jsx(ph,{label:"Income",value:$,accent:"text-emerald-300"}),_.jsx(ph,{label:"Fixed",value:tt,accent:"text-rose-300"}),_.jsx(ph,{label:"Variable",value:nt,accent:"text-amber-300"}),_.jsx(ph,{label:"Leftover",value:mt,accent:"text-cyan-300"})]}),_.jsxs("div",{className:"mt-4",children:[_.jsx("p",{className:"text-xs text-slate-400 mb-1",children:"Allocation this month"}),_.jsx(zg,{value:A})]})]},"monthOverview");case"accountSnapshot":return _.jsxs(Rn,{title:"ACCOUNT SNAPSHOT",children:[_.jsxs("div",{className:"flex items-center justify-between",children:[_.jsxs("div",{className:"flex flex-col",children:[_.jsx("span",{className:"text-[0.65rem] uppercase tracking-[0.18em] text-slate-500",children:"Current account"}),_.jsx("select",{className:"mt-1 bg-[#05060F] border border-slate-700 rounded-md px-2 py-1 text-[0.75rem] text-slate-100",value:p,onChange:rt=>g(rt.target.value),children:(m||[]).map(rt=>_.jsx("option",{value:rt.id,children:rt.name},rt.id))})]}),_.jsxs("div",{className:"text-right",children:[_.jsx("div",{className:"text-[0.65rem] uppercase tracking-[0.18em] text-slate-500",children:"Balance"}),_.jsxs("div",{className:"text-2xl font-semibold text-cyan-300",children:["$",ht.toFixed(2)]}),_.jsxs("div",{className:"text-[0.7rem] text-slate-500",children:["of $",C.toFixed(2)," total"]})]})]}),_.jsx("hr",{className:"my-3 border-slate-800"}),_.jsxs("div",{children:[_.jsx("div",{className:"text-[0.65rem] uppercase tracking-[0.2em] text-slate-500",children:"All accounts"}),_.jsxs("div",{className:"mt-1 text-xl font-semibold text-emerald-300",children:["$",C.toFixed(2)]}),_.jsx("p",{className:"mt-1 text-[0.7rem] text-slate-500",children:"Total estimated cash across all linked accounts."})]})]},"accountSnapshot");case"goals":return _.jsxs("div",{className:"space-y-3",children:[_.jsx("h2",{className:"text-xs tracking-[0.25em] text-slate-400 uppercase",children:"Goals"}),_.jsx("div",{className:"grid md:grid-cols-2 gap-3",children:(Array.isArray(u)?u:[]).map(rt=>_.jsx(o1,{goal:rt,onClick:null,onEdit:()=>v(rt.id)},rt.id))}),_.jsx("button",{type:"button",onClick:E,className:"mt-1 px-4 py-2 rounded-lg border border-cyan-400/70 text-xs text-cyan-200 bg-cyan-500/10 hover:bg-cyan-500/20 transition",children:"+ Add Goal"})]},"goals");case"csvImport":return _.jsxs(Rn,{title:"BANK STATEMENT IMPORT (CSV)",children:[_.jsx(_4,{onTransactionsParsed:async(rt,O)=>{D(!1);const K=E4(rt,"amount"),ut=T4(rt,"date"),dt=w4(ut),yt=(m||[]).find(wt=>wt.id===p)||null,st=[...rt||[]].reverse().find(wt=>typeof wt?.balance=="number"&&Number.isFinite(wt.balance));if(st){const wt=Number(st.balance),St=wt-Number(K||0),ae=ut?.start?uo(ut.start):"",Dt=ut?.end?uo(ut.end):"";await ft(rt,{...O,accountId:p,statement:{startISO:ae,endISO:Dt,statementKey:dt,transactionSum:K,endingBalance:wt,startingBalance:St,balanceSource:"csv"}});return}const gt=yt&&Number.isFinite(Number(yt.lastConfirmedEndingBalance))?Number(yt.lastConfirmedEndingBalance):null;J({rows:rt,raw:O,transactionSum:K,range:ut,statementKey:dt,accountId:p,accountName:yt?.name||"",suggestedEndingBalance:gt}),ot(!0)}}),V&&_.jsxs("div",{className:"mt-4 space-y-2",children:[_.jsxs("div",{className:"flex items-center justify-between",children:[_.jsx("h3",{className:"text-xs uppercase tracking-[0.18em] text-slate-400",children:"Current account transactions"}),_.jsx("button",{type:"button",className:"text-[0.7rem] px-2 py-1 rounded-md border border-slate-600 text-slate-200 hover:border-cyan-400 transition",onClick:()=>D(rt=>!rt),children:M?"Hide":"Show"})]}),M&&_.jsx("div",{className:"max-h-64 overflow-auto border border-slate-800 rounded-lg",children:_.jsxs("table",{className:"w-full text-xs text-left",children:[_.jsx("thead",{className:"bg-slate-900 text-slate-300",children:_.jsxs("tr",{children:[_.jsx("th",{className:"px-2 py-1",children:"Date"}),_.jsx("th",{className:"px-2 py-1",children:"Description"}),_.jsx("th",{className:"px-2 py-1",children:"Category"}),_.jsx("th",{className:"px-2 py-1 text-right",children:"Amount"})]})}),_.jsx("tbody",{className:"divide-y divide-slate-800",children:c.map((rt,O)=>_.jsxs("tr",{className:"hover:bg-slate-900/70",children:[_.jsx("td",{className:"px-2 py-1 text-slate-300",children:rt.date||"-"}),_.jsx("td",{className:"px-2 py-1 text-slate-200",children:rt.description||"-"}),_.jsx("td",{className:"px-2 py-1 text-slate-300",children:rt.category||"Other"}),_.jsx("td",{className:`px-2 py-1 text-right ${typeof rt.amount=="number"&&rt.amount<0?"text-rose-300":"text-emerald-300"}`,children:typeof rt.amount!="number"||Number.isNaN(rt.amount)?"-":`$${rt.amount.toFixed(2)}`})]},O))})]})})]})]},"csvImport");default:return null}}),_.jsx(v4,{open:S,busy:F,accountName:U?.accountName||"",statementLabel:U?.range?.start&&U?.range?.end?`${U.range.start.toLocaleDateString()}  ${U.range.end.toLocaleDateString()}`:"",transactionSum:U?.transactionSum??0,suggestedEndingBalance:U?.suggestedEndingBalance??null,onClose:()=>{F||(ot(!1),J(null))},onConfirm:async({endingBalance:Y,startingBalance:rt})=>{if(U){j(!0);try{const O=U.range?.start?uo(U.range.start):"",K=U.range?.end?uo(U.range.end):"";await ft(U.rows,{...U.raw,accountId:U.accountId,statement:{startISO:O,endISO:K,statementKey:U.statementKey,transactionSum:U.transactionSum,endingBalance:Y,startingBalance:rt,balanceSource:"user"}}),ot(!1),J(null)}finally{j(!1)}}}})]})}function N4(i){return(Array.isArray(i?.transactions)?i.transactions:[]).reduce((e,s)=>e+(typeof s.amount=="number"?s.amount:0),0)}function ep(i){const t=Number(i);return Number.isFinite(t)?`$${t.toFixed(2)}`:"-"}function C4(i){if(!i)return"";const t=Date.parse(i);return Number.isFinite(t)?new Date(t).toLocaleDateString():""}function R4({accounts:i=[],currentAccountId:t,onChangeCurrentAccount:e=()=>{},onCreateAccount:s=()=>{},onDeleteAccount:o=()=>{},onSetAccountBalance:u=()=>{},onRenameAccount:c=()=>{}}){const m=Array.isArray(i)&&i.length>0,[p,g]=Lt.useState([]),v=E=>{g(T=>T.includes(E)?T.filter(I=>I!==E):[...T,E])};return _.jsxs("div",{className:"space-y-4",children:[_.jsxs("header",{className:"flex items-center justify-between",children:[_.jsx("h1",{className:"text-lg font-semibold text-slate-100",children:"Accounts"}),_.jsx("button",{type:"button",onClick:s,className:"px-2 py-1 rounded-md bg-emerald-500 hover:bg-emerald-400 text-xs font-medium text-slate-900",children:"+ New account"})]}),_.jsxs(Rn,{title:"ALL ACCOUNTS",children:[!m&&_.jsx("p",{className:"text-xs text-slate-400",children:"No accounts yet. Create one to start tracking balances."}),m&&_.jsx("div",{className:"space-y-2",children:i.map(E=>{const T=Array.isArray(E.transactions)?E.transactions.length:0,I=N4(E),P=(typeof E.startingBalance=="number"?E.startingBalance:0)+I,B=Number.isFinite(Number(E.currentBalance)),X=B?Number(E.currentBalance):P,ft=B?C4(E.currentBalanceAsOf):"",$=E.lastStatementKey||"",tt=Number.isFinite(Number(E.lastConfirmedEndingBalance))?Number(E.lastConfirmedEndingBalance):null,mt=($&&E.statementBalances&&typeof E.statementBalances=="object"&&E.statementBalances[$]||null)?.balanceSource||"",ht=Array.isArray(E.transactions)?E.transactions.slice().filter(R=>R&&typeof R=="object").sort((R,V)=>{const M=Date.parse(R.date),D=Date.parse(V.date),S=Number.isFinite(M),ot=Number.isFinite(D);return!S&&!ot?0:S?ot?D-M:-1:1}):[],C=ht.length>0,A=p.includes(E.id);return _.jsxs("div",{className:`space-y-2 rounded-md px-3 py-2 text-xs ${E.id===t?"bg-slate-800/70 border border-cyan-400/50":"bg-slate-900/60 border border-slate-700/70"}`,children:[_.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[_.jsxs("div",{className:"flex-1",children:[_.jsx("input",{className:"bg-transparent text-slate-100 font-medium text-xs w-full focus:outline-none",value:E.name,onChange:R=>c(E.id,R.target.value)}),_.jsxs("p",{className:"text-[11px] text-slate-400",children:["Type: ",E.type||"checking"]}),_.jsxs("p",{className:"text-[11px] text-slate-400",children:["Transactions:"," ",_.jsx("span",{className:"text-slate-200",children:T}),"  Net:"," ",_.jsx("span",{className:I>=0?"text-emerald-300":"text-rose-300",children:ep(I)}),"  ","Current:"," ",_.jsx("span",{className:X>=0?"text-emerald-300":"text-rose-300",children:ep(X)}),B?_.jsxs("span",{className:"text-slate-500",children:[" ","(confirmed",ft?` as of ${ft}`:"",")"]}):_.jsx("span",{className:"text-slate-500",children:" (computed)"})]}),B&&_.jsxs("p",{className:"text-[11px] text-slate-500",children:["Last statement:"," ",_.jsx("span",{className:"text-slate-300",children:$||""}),mt?_.jsxs("span",{className:"text-slate-500",children:[" "," source:"," ",_.jsx("span",{className:"text-slate-300",children:mt})]}):null,tt!=null?_.jsxs("span",{className:"text-slate-500",children:[" "," ending:"," ",_.jsx("span",{className:"text-slate-300",children:ep(tt)})]}):null]})]}),_.jsxs("div",{className:"flex flex-col items-end gap-2",children:[_.jsxs("div",{className:"flex flex-col items-end",children:[_.jsx("label",{className:"text-[11px] text-slate-400",children:"Starting balance"}),_.jsx("input",{type:"number",className:"w-24 bg-slate-900/80 border border-slate-700 rounded px-1 py-0.5 text-right text-xs font-mono text-slate-100 focus:outline-none focus:ring-1 focus:ring-cyan-400",value:E.startingBalance??0,onChange:R=>u(E.id,parseFloat(R.target.value||"0"))})]}),B&&_.jsx("button",{type:"button",className:"px-2 py-0.5 rounded text-[11px] border border-slate-500 hover:border-cyan-400 text-slate-200",onClick:()=>u(E.id,X),title:"Sets starting balance to the confirmed current balance",children:"Use current as starting"})]}),_.jsxs("div",{className:"flex flex-col items-end gap-1",children:[_.jsx("button",{type:"button",onClick:()=>{e(E.id),v(E.id)},className:"px-2 py-0.5 rounded text-[11px] border border-slate-500 hover:border-cyan-400",children:A?"Hide":"View"}),_.jsx("button",{type:"button",onClick:()=>o(E.id),className:"px-2 py-0.5 rounded text-[11px] text-red-300 hover:bg-red-500/10",children:"Delete"})]})]}),_.jsxs("div",{className:"border-t border-slate-800/70 pt-2",children:[!C&&_.jsx("p",{className:"mt-1 text-[0.65rem] text-slate-500",children:"No transactions imported yet."}),A&&C&&_.jsx("div",{className:"mt-2 max-h-72 overflow-auto rounded-md border border-slate-800/50",children:_.jsxs("table",{className:"w-full text-[0.7rem] text-left",children:[_.jsx("thead",{className:"bg-slate-900 text-slate-300 sticky top-0",children:_.jsxs("tr",{children:[_.jsx("th",{className:"px-2 py-1",children:"Date"}),_.jsx("th",{className:"px-2 py-1",children:"Description"}),_.jsx("th",{className:"px-2 py-1",children:"Category"}),_.jsx("th",{className:"px-2 py-1 text-right",children:"Amount"})]})}),_.jsx("tbody",{className:"divide-y divide-slate-800/70",children:ht.map((R,V)=>{const M=Number(R.amount),D=Number.isFinite(M)?`$${M.toFixed(2)}`:"-";return _.jsxs("tr",{children:[_.jsx("td",{className:"px-2 py-1 text-slate-300",children:R.date||"-"}),_.jsx("td",{className:"px-2 py-1 text-slate-200",children:R.description||"Transaction"}),_.jsx("td",{className:"px-2 py-1 text-slate-400",children:R.category||"Other"}),_.jsx("td",{className:`px-2 py-1 text-right ${M<0?"text-rose-300":"text-emerald-300"}`,children:D})]},R.id||`${E.id}-full-${V}`)})})]})})]})]},E.id)})})]})]})}function zl(){const i=new Date,t=i.getFullYear(),e=String(i.getMonth()+1).padStart(2,"0"),s=String(i.getDate()).padStart(2,"0");return`${t}-${e}-${s}`}function ia(i){if(!i||typeof i!="string")return null;const t=i.match(/^(\d{4})-(\d{2})-(\d{2})$/);if(!t)return null;const e=Number(t[1]),s=Number(t[2])-1,o=Number(t[3]),u=new Date(e,s,o);return u.setHours(0,0,0,0),u}function Dh(i){const t=new Date(i),e=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),o=String(t.getDate()).padStart(2,"0");return`${e}-${s}-${o}`}function zp(i,t){const e=new Date(i);return e.setDate(e.getDate()+t),e}function eE(i,t){const e=new Date(i),s=e.getDate();e.setDate(1),e.setMonth(e.getMonth()+t);const o=new Date(e.getFullYear(),e.getMonth()+1,0).getDate();return e.setDate(Math.min(s,o)),e}function Oh(i){const t=Number(i);return Number.isFinite(t)?t:0}function gh(i){return!i||typeof i!="string"?"":i.slice(0,7)}function Mh(i,t){return`${i}|${t}`}function I4(i=[],t){if(!t||typeof t!="string"||t.length<7)return[];const e=ia(`${t}-01`);if(!e)return[];const s=new Date(e.getFullYear(),e.getMonth()+1,0);s.setHours(0,0,0,0);const o=Array.isArray(i)?i:[],u=[],c=(m,p)=>{if(!p)return;const g=new Date(p);g.setHours(0,0,0,0),!(g<e||g>s)&&u.push({templateId:m.id,label:m.label||"Due item",amount:Number.isFinite(Number(m.amount))?Number(m.amount):0,dueDate:Dh(g)})};for(const m of o){if(!m?.id)continue;const p=String(m.cadence||"once").toLowerCase(),g=ia(m.startDate);if(g){if(p==="once"){c(m,g);continue}if(p==="weekly"||p==="biweekly"){const v=p==="weekly"?7:14;let E=new Date(g);if(E.setHours(0,0,0,0),E<e){const T=Math.floor((e-E)/864e5),I=Math.ceil(T/v);E=zp(E,I*v)}for(;E<=s;)c(m,E),E=zp(E,v);continue}if(p==="monthly"){const v=Number(m.dayOfMonth)||g.getDate();let E=new Date(g);for(E.setHours(0,0,0,0);E<e;)E=eE(E,1);for(;E<=s;){const T=new Date(E.getFullYear(),E.getMonth(),1),I=new Date(T.getFullYear(),T.getMonth()+1,0).getDate(),P=new Date(T.getFullYear(),T.getMonth(),Math.min(v,I));P.setHours(0,0,0,0),c(m,P),E=eE(E,1)}continue}if(p==="yearly"){const v=new Date(e.getFullYear(),g.getMonth(),g.getDate());v.setHours(0,0,0,0),c(m,v);continue}c(m,g)}}return u.sort((m,p)=>m.dueDate>p.dueDate?1:m.dueDate<p.dueDate?-1:0),u}function D4(i=[]){return(Array.isArray(i)?i:[]).reduce((e,s)=>{const o=Number(s?.amount);if(!Number.isFinite(o))return e;const u=(s?.flowType||"").toLowerCase();return u==="income"?e+Math.max(0,o):u==="expense"||u==="transfer"||u==="ignore"?e:o>0?e+o:e},0)}function O4({month:i,budget:t,totals:e={},onBudgetChange:s,scheduledTemplates:o=[],scheduleChecks:u={},onScheduledTemplatesChange:c=()=>{},onScheduleChecksChange:m=()=>{},accounts:p=[],currentAccountId:g="main",onAddTransaction:v=()=>{}}){const E=Number(e?.fixed??e?.fixedTotal??0),T=Number(e?.variable??e?.variableTotal??0),I=Array.isArray(t?.fixed)?t.fixed:[],P=Array.isArray(t?.variable)?t.variable:[],B=Array.isArray(t?.transactions)?t.transactions:[],X=Number.isFinite(Number(t?.estimatedIncome))?Number(t.estimatedIncome):Number.isFinite(Number(t?.income))?Number(t.income):0,ft=xt.useMemo(()=>D4(B),[B]),$=!!t?.useActualIncome,nt=($?ft:X)-E-T,[mt,ht]=xt.useState(()=>zl()),[C,A]=xt.useState(()=>`${gh(mt)}-01`);xt.useEffect(()=>{if(!mt)return;const st=gh(mt);A(`${st}-01`)},[mt]);const R=xt.useMemo(()=>gh(C),[C]),V=xt.useMemo(()=>I4(o,R),[o,R]),M=xt.useMemo(()=>{const st={};for(const gt of Array.isArray(o)?o:[])gt?.id&&(st[gt.id]=gt);return st},[o]),S=xt.useMemo(()=>{const st=new Map;for(const gt of V){const wt=gt?.dueDate;if(!wt)continue;const St=st.get(wt)||[];St.push(gt),st.set(wt,St)}return st},[V]).get(mt)||[],ot=xt.useMemo(()=>ia(zl()),[]),F=xt.useMemo(()=>ot?Dh(ot):"",[ot]),j=xt.useMemo(()=>ot?zp(ot,7):null,[ot]),U=xt.useMemo(()=>{const gt=V.map(Dt=>{const ee=ia(Dt?.dueDate);return{...Dt,_due:ee,paid:!!u[Mh(Dt.templateId,Dt.dueDate)]?.paid,cadence:M[Dt.templateId]?.cadence||"once"}}).filter(Dt=>Dt._due).filter(Dt=>!Dt.paid),wt=gt.filter(Dt=>ot&&Dt._due<ot).sort((Dt,ee)=>Dt._due-ee._due),St=gt.filter(Dt=>Dt.dueDate===F).sort((Dt,ee)=>Oh(ee.amount)-Oh(Dt.amount)),ae=gt.filter(Dt=>j&&ot&&Dt._due>ot&&Dt._due<=j).sort((Dt,ee)=>Dt._due-ee._due);return{overdue:wt,dueToday:St,upcoming:ae}},[V,u,M,ot,F,j]);function J(){const st=window.prompt("Estimated monthly income amount:",X.toString());if(st===null)return;const gt=Number(st);if(!Number.isFinite(gt)){window.alert("Enter a valid number for estimated income.");return}s({...t,estimatedIncome:gt,income:gt})}function Y(){s({...t,useActualIncome:!$})}function rt(st){const gt=st==="income",wt=gt?"Paycheck":"Expense",St=window.prompt("Description:",wt);if(!St)return;const ae=window.prompt(`Amount (${gt?"positive":"positive (we'll store as negative)"})`,"0");if(ae===null)return;const Dt=Number(ae);if(!Number.isFinite(Dt)){window.alert("Please enter a valid number for amount.");return}const ee=window.prompt("Date (YYYY-MM-DD):",mt||zl());if(!ee)return;if(!/^\d{4}-\d{2}-\d{2}$/.test(ee)){window.alert("Use YYYY-MM-DD format for dates.");return}const sn=window.prompt("Category (optional):",gt?"Income":""),Ve=gt?Math.abs(Dt):-Math.abs(Dt);v({description:St.trim(),amount:Ve,date:ee,category:(sn||"").trim(),accountId:g||"main",flowType:gt?"income":"expense"})}function O({label:st,amount:gt,kind:wt,source:St,defaultDateISO:ae}){if(!window.confirm("Add to calendar as repeating due item?"))return null;const ee=window.prompt("Start date (YYYY-MM-DD):",ae||zl());if(!ee)return null;if(!/^\d{4}-\d{2}-\d{2}$/.test(ee))return window.alert("Please use YYYY-MM-DD format (example: 2026-01-15)."),null;const sn=ia(ee);if(!sn)return window.alert("Could not parse that date. Try again with YYYY-MM-DD."),null;const Ve=window.prompt("Cadence? (once, weekly, biweekly, monthly, yearly)","monthly");if(Ve===null)return null;const $n=["once","weekly","biweekly","monthly","yearly"],ui=(Ve||"monthly").trim().toLowerCase(),Ts=$n.includes(ui)?ui:"monthly",xr={id:`sched-${Date.now()}`,label:(st||"").trim()||"Due item",amount:Number(gt)||0,kind:wt,source:St,startDate:Dh(sn),cadence:Ts,dayOfMonth:sn.getDate(),accountId:g||"main"},pe=Array.isArray(o)?o:[];c([...pe,xr]);const ge=Dh(sn);return ht(ge),A(`${gh(ge)}-01`),xr.id}function K(st){const gt=window.prompt(`New ${st} item name:`);if(!gt)return;const wt=window.prompt(`Amount for "${gt}" (numbers only):`),St=Number(wt);if(!Number.isFinite(St)){window.alert("That didn't look like a valid number.");return}const Dt=O({label:gt,amount:St,kind:"expense",source:st==="fixed"?"budget-fixed":"budget-variable",defaultDateISO:mt||zl()}),ee={id:`budget-${st}-${Date.now()}`,label:gt,amount:St,templateId:Dt||void 0},Ve=[...st==="fixed"?I:P,ee];s({...t,[st]:Ve})}function ut(st,gt){const wt=st==="fixed"?I:P,St=wt[gt];if(!window.confirm("Delete this item?"))return;if(St?.templateId&&window.confirm("This item is linked to a calendar due item. Delete that too?")){const ee=Array.isArray(o)?o:[];c(ee.filter($n=>$n.id!==St.templateId));const Ve=Object.entries(u||{}).filter(([$n])=>!$n.startsWith(`${St.templateId}|`));m(Object.fromEntries(Ve))}const ae=wt.filter((Dt,ee)=>ee!==gt);s({...t,[st]:ae})}function dt(st){if(!st?.templateId||!st?.dueDate)return;const gt=Mh(st.templateId,st.dueDate),wt=!!u[gt]?.paid;m({...u||{},[gt]:{paid:!wt}})}function yt(st){if(!st||!window.confirm("Delete this repeating due item?"))return;const wt=(Array.isArray(o)?o:[]).filter(Dt=>Dt.id!==st);c(wt);const ae=Object.entries(u||{}).filter(([Dt])=>!Dt.startsWith(`${st}|`));m(Object.fromEntries(ae))}return _.jsxs("div",{className:"space-y-6",children:[_.jsxs("div",{className:"flex items-center justify-between",children:[_.jsxs("h1",{className:"text-lg font-semibold text-slate-100",children:[i," Budget"]}),_.jsx("span",{className:"text-xs text-slate-400",children:"Income + Expenses + Goals"})]}),_.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[_.jsx(Rn,{title:"INCOME",children:_.jsxs("div",{className:"grid gap-2",children:[_.jsxs("div",{className:"flex items-end justify-between",children:[_.jsxs("div",{children:[_.jsx("div",{className:"text-[0.7rem] uppercase tracking-[0.18em] text-slate-500",children:"Estimated"}),_.jsxs("div",{className:"text-2xl font-semibold text-emerald-300",children:["$",X.toFixed(2)]})]}),_.jsxs("div",{className:"text-right",children:[_.jsx("div",{className:"text-[0.7rem] uppercase tracking-[0.18em] text-slate-500",children:"Actual so far"}),_.jsxs("div",{className:"text-2xl font-semibold text-cyan-200",children:["$",ft.toFixed(2)]})]})]}),_.jsxs("div",{className:"text-xs text-slate-400",children:["Leftover (using ",$?"actual":"estimated","):"," ",_.jsxs("span",{className:"text-slate-100 font-semibold",children:["$",nt.toFixed(2)]})]}),_.jsxs("div",{className:"flex flex-wrap gap-2 pt-1",children:[_.jsx("button",{className:"px-3 py-1.5 text-xs rounded-md border border-emerald-400/70 text-emerald-200 bg-emerald-500/10 hover:bg-emerald-500/20 transition",onClick:J,type:"button",children:"Edit estimate"}),_.jsx("button",{className:"px-3 py-1.5 text-xs rounded-md border border-cyan-400/70 text-cyan-200 bg-cyan-500/10 hover:bg-cyan-500/20 transition",onClick:Y,type:"button",title:"Use actual income from your logged income transactions",children:$?"Using actual ":"Use actual income"}),_.jsx("button",{className:"px-3 py-1.5 text-xs rounded-md border border-cyan-400/70 text-cyan-200 bg-cyan-500/10 hover:bg-cyan-500/20 transition",onClick:()=>rt("income"),type:"button",title:"Add a paycheck / income transaction (no CSV needed)",children:"+ Add income"})]}),_.jsx("p",{className:"text-[0.7rem] text-slate-500",children:"Tip: Add paychecks here to build Actual income automatically."})]})}),_.jsxs(Rn,{title:"FIXED EXPENSES",children:[_.jsx(nE,{items:I,total:E,onDelete:st=>ut("fixed",st)}),_.jsxs("div",{className:"mt-3 flex flex-wrap gap-2",children:[_.jsx("button",{className:"px-3 py-1.5 text-xs rounded-md border border-rose-400/70 text-rose-200 bg-rose-500/10 hover:bg-rose-500/20 transition",onClick:()=>K("fixed"),type:"button",children:"+ Add Fixed Expense"}),_.jsx("button",{className:"px-3 py-1.5 text-xs rounded-md border border-rose-400/60 text-rose-200 bg-black/10 hover:bg-rose-500/10 transition",onClick:()=>rt("expense"),type:"button",title:"Add an expense transaction (no CSV needed)",children:"+ Add expense"})]})]}),_.jsxs(Rn,{title:"VARIABLE SPENDING",children:[_.jsx(nE,{items:P,total:T,onDelete:st=>ut("variable",st)}),_.jsxs("div",{className:"mt-3 flex flex-wrap gap-2",children:[_.jsx("button",{className:"px-3 py-1.5 text-xs rounded-md border border-amber-400/70 text-amber-200 bg-amber-500/10 hover:bg-amber-500/20 transition",onClick:()=>K("variable"),type:"button",children:"+ Add Variable Expense"}),_.jsx("button",{className:"px-3 py-1.5 text-xs rounded-md border border-amber-400/60 text-amber-200 bg-black/10 hover:bg-amber-500/10 transition",onClick:()=>rt("expense"),type:"button",title:"Add an expense transaction (no CSV needed)",children:"+ Add expense"})]})]}),_.jsxs(Rn,{title:"MONTHLY DUE DATES",children:[_.jsx("div",{className:"grid gap-3 md:grid-cols-2",children:_.jsxs("div",{className:"space-y-3",children:[_.jsx(np,{title:"OVERDUE",subtitle:"Due before today",emptyText:"No overdue items ",items:U.overdue,tone:"rose",templateLookup:M,scheduleChecks:u,onJump:st=>ht(st),onTogglePaid:dt,onDelete:st=>yt(st.templateId)}),_.jsx(np,{title:"DUE TODAY",subtitle:F,emptyText:"Nothing due today.",items:U.dueToday,tone:"amber",templateLookup:M,scheduleChecks:u,onJump:st=>ht(st),onTogglePaid:dt,onDelete:st=>yt(st.templateId)}),_.jsx(np,{title:"UPCOMING",subtitle:"Next 7 days",emptyText:"No upcoming items.",items:U.upcoming,tone:"cyan",templateLookup:M,scheduleChecks:u,onJump:st=>ht(st),onTogglePaid:dt,onDelete:st=>yt(st.templateId)})]})}),_.jsxs("div",{className:"mt-4 text-xs text-slate-400",children:["Due on ",_.jsx("span",{className:"text-slate-200",children:mt})]}),_.jsx("div",{className:"mt-2 space-y-2 text-sm",children:S.length===0?_.jsx("p",{className:"text-xs text-slate-500",children:"No items due that day."}):S.map(st=>{const gt=Oh(st?.amount),wt=!!u[Mh(st.templateId,st.dueDate)]?.paid,St=!wt&&!!ot&&ia(st.dueDate)&&ia(st.dueDate)<ot,ae=M[st.templateId]?.cadence||"once";return _.jsxs("div",{className:["flex items-center justify-between gap-2 rounded-md border bg-black/20 px-3 py-2",St?"border-rose-400/60":"border-slate-700/70"].join(" "),children:[_.jsxs("div",{className:"flex-1",children:[_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx("span",{className:"text-slate-200",children:st.label}),_.jsxs("span",{className:"text-slate-400",children:["$",gt.toFixed(2)]}),St&&_.jsx("span",{className:"text-[0.65rem] rounded-full border border-rose-400/60 px-2 py-0.5 text-rose-200 bg-rose-500/10",children:"overdue"})]}),_.jsxs("div",{className:"text-[0.7rem] text-slate-500",children:[ae,"  ",wt?"paid":"unpaid"]})]}),_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx("button",{className:"px-2 py-1 text-[0.7rem] rounded-md border border-slate-600/70 text-slate-200 hover:border-cyan-400/60",onClick:()=>dt(st),type:"button",children:wt?"Unpay":"Paid"}),_.jsx("button",{className:"text-[0.75rem] text-slate-500 hover:text-rose-400",onClick:()=>yt(st.templateId),type:"button","aria-label":"Delete due item",children:""})]})]},`${st.templateId}-${st.dueDate}`)})})]})]})]})}function nE({items:i=[],total:t=0,onDelete:e}){return _.jsxs("div",{className:"space-y-2 text-sm",children:[i.length===0&&_.jsx("p",{className:"text-xs text-slate-500",children:"No items yet."}),i.map((s,o)=>{const u=Number(s?.amount??0),c=s?.label||s?.name||`Item ${o+1}`,m=!!s?.templateId;return _.jsxs("div",{className:"flex items-center justify-between text-slate-200 gap-2",children:[_.jsxs("div",{className:"flex-1 flex justify-between items-center",children:[_.jsxs("span",{className:"flex items-center gap-2",children:[c,m&&_.jsx("span",{className:"rounded-full border border-slate-600/70 px-2 py-[2px] text-[0.65rem] text-slate-200 bg-black/20",children:"linked"})]}),_.jsxs("span",{className:"text-slate-300",children:["$",u.toFixed(2)]})]}),e&&_.jsx("button",{className:"text-[0.65rem] text-slate-500 hover:text-rose-400",onClick:()=>e(o),type:"button","aria-label":"Delete item",children:""})]},(s?.id||c)+o)}),_.jsxs("div",{className:"mt-2 pt-2 border-t border-slate-700 flex items-center justify-between text-xs",children:[_.jsx("span",{className:"uppercase tracking-[0.18em] text-slate-500",children:"Total"}),_.jsxs("span",{className:"text-slate-100",children:["$",Number(t).toFixed(2)]})]})]})}function np({title:i,subtitle:t,items:e=[],emptyText:s,tone:o="cyan",templateLookup:u={},scheduleChecks:c={},onJump:m=()=>{},onTogglePaid:p=()=>{},onDelete:g=()=>{}}){const v={rose:"border-rose-400/30 text-rose-200 bg-rose-500/5",amber:"border-amber-400/30 text-amber-200 bg-amber-500/5",cyan:"border-cyan-400/30 text-cyan-200 bg-cyan-500/5"};return _.jsxs("div",{className:`rounded-md border ${v[o]||v.cyan} p-3`,children:[_.jsxs("div",{className:"flex items-baseline justify-between",children:[_.jsx("div",{className:"text-[0.7rem] tracking-[0.18em] uppercase",children:i}),_.jsx("div",{className:"text-[0.7rem] text-slate-400",children:t})]}),_.jsxs("div",{className:"mt-2 space-y-2",children:[e.length===0?_.jsx("div",{className:"text-xs text-slate-500",children:s}):e.slice(0,5).map(E=>{const T=Oh(E?.amount),I=u[E.templateId]?.cadence||"once",P=!!c[Mh(E.templateId,E.dueDate)]?.paid;return _.jsxs("div",{className:"flex items-center justify-between gap-2 rounded-md border border-slate-700/60 bg-black/20 px-2 py-2",children:[_.jsxs("button",{type:"button",className:"flex-1 text-left",onClick:()=>m(E.dueDate),title:"Jump to this day",children:[_.jsxs("div",{className:"text-xs text-slate-200 leading-4",children:[E.label,_.jsxs("span",{className:"text-slate-400",children:["  $",T.toFixed(2)]}),P&&_.jsx("span",{className:"ml-2 text-[0.65rem] rounded-full border border-emerald-400/50 px-2 py-[2px] text-emerald-200 bg-emerald-500/10",children:"paid"})]}),_.jsxs("div",{className:"text-[0.7rem] text-slate-500",children:[E.dueDate,"  ",I]})]}),_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx("button",{type:"button",className:"px-2 py-1 text-[0.7rem] rounded-md border border-slate-600/70 text-slate-200 hover:border-cyan-400/60",onClick:()=>p(E),children:P?"Unpay":"Paid"}),_.jsx("button",{type:"button",className:"text-[0.75rem] text-slate-500 hover:text-rose-400",onClick:()=>g(E),"aria-label":"Delete due item",children:""})]})]},`${E.templateId}-${E.dueDate}`)}),e.length>5&&_.jsxs("div",{className:"text-[0.7rem] text-slate-500",children:["+",e.length-5," more"]})]})]})}function iE(){const i=new Date,t=i.getFullYear(),e=String(i.getMonth()+1).padStart(2,"0"),s=String(i.getDate()).padStart(2,"0");return`${t}-${e}-${s}`}function M4(i){return typeof i=="string"&&/^\d{4}-\d{2}-\d{2}$/.test(i)}function k4({open:i,title:t="Add Transaction",initial:e={},accounts:s=[],defaultAccountId:o="main",onClose:u=()=>{},onSave:c=()=>{},allowRecurring:m=!1,onCreateRecurring:p=()=>{}}){const[g,v]=xt.useState(""),[E,T]=xt.useState(""),[I,P]=xt.useState(iE()),[B,X]=xt.useState(""),[ft,$]=xt.useState(o),[tt,nt]=xt.useState(!1),[mt,ht]=xt.useState("monthly");if(xt.useEffect(()=>{i&&(v(String(e.description||"")),T(e.amount===0||typeof e.amount=="number"?String(e.amount):String(e.amount||"")),P(String(e.date||iE())),X(String(e.category||"")),$(String(e.accountId||o)),nt(!1),ht("monthly"))},[i,e,o]),!i)return null;function C(){const R=g.trim();if(!R)return window.alert("Please enter a description.");const V=Number(E);if(!Number.isFinite(V))return window.alert("Please enter a valid number for amount.");if(!M4(I))return window.alert("Use YYYY-MM-DD format for dates.");const M={description:R,amount:V,date:I,category:B.trim(),accountId:ft||o||"main"};if(c(M),m&&tt){const S=["once","weekly","biweekly","monthly","yearly"].includes(mt)?mt:"monthly",ot=I.match(/^\d{4}-\d{2}-(\d{2})$/),F=ot?Number(ot[1]):void 0;p({label:M.description||"Transaction",amount:V,kind:V>=0?"income":"expense",source:"transaction",startDate:I,cadence:S,dayOfMonth:F,accountId:M.accountId,category:M.category||void 0})}u()}const A=Array.isArray(s)&&s.length>0;return _.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4",children:[_.jsx("div",{className:"absolute inset-0 bg-black/70",onClick:u,role:"button","aria-label":"Close modal",tabIndex:-1}),_.jsxs("div",{className:"relative w-full max-w-lg rounded-2xl border border-slate-700/70 bg-[#05060F] p-4 shadow-xl",children:[_.jsxs("div",{className:"flex items-center justify-between",children:[_.jsx("div",{className:"text-sm font-semibold text-slate-100",children:t}),_.jsx("button",{type:"button",onClick:u,className:"text-slate-400 hover:text-rose-300 transition","aria-label":"Close",children:""})]}),_.jsxs("div",{className:"mt-3 grid gap-3",children:[_.jsxs("div",{children:[_.jsx("label",{className:"text-[0.65rem] uppercase tracking-[0.18em] text-slate-500",children:"Description"}),_.jsx("input",{value:g,onChange:R=>v(R.target.value),className:"mt-1 h-9 w-full rounded-md bg-slate-900/70 px-3 text-[0.8rem] text-slate-100 outline-none ring-1 ring-slate-700 focus:ring-2 focus:ring-cyan-500",placeholder:"Walmart, Rent, Paycheck..."})]}),_.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[_.jsxs("div",{children:[_.jsx("label",{className:"text-[0.65rem] uppercase tracking-[0.18em] text-slate-500",children:"Amount"}),_.jsx("input",{value:E,onChange:R=>T(R.target.value),inputMode:"decimal",className:"mt-1 h-9 w-full rounded-md bg-slate-900/70 px-3 text-[0.8rem] text-slate-100 outline-none ring-1 ring-slate-700 focus:ring-2 focus:ring-cyan-500",placeholder:"-45.21 or 1200"}),_.jsx("div",{className:"mt-1 text-[0.65rem] text-slate-500",children:"Negative = expense, positive = income"})]}),_.jsxs("div",{children:[_.jsx("label",{className:"text-[0.65rem] uppercase tracking-[0.18em] text-slate-500",children:"Date"}),_.jsx("input",{value:I,onChange:R=>P(R.target.value),className:"mt-1 h-9 w-full rounded-md bg-slate-900/70 px-3 text-[0.8rem] text-slate-100 outline-none ring-1 ring-slate-700 focus:ring-2 focus:ring-cyan-500",placeholder:"YYYY-MM-DD"})]})]}),_.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[_.jsxs("div",{children:[_.jsx("label",{className:"text-[0.65rem] uppercase tracking-[0.18em] text-slate-500",children:"Category (optional)"}),_.jsx("input",{value:B,onChange:R=>X(R.target.value),className:"mt-1 h-9 w-full rounded-md bg-slate-900/70 px-3 text-[0.8rem] text-slate-100 outline-none ring-1 ring-slate-700 focus:ring-2 focus:ring-cyan-500",placeholder:"Groceries, Rent..."})]}),_.jsxs("div",{children:[_.jsx("label",{className:"text-[0.65rem] uppercase tracking-[0.18em] text-slate-500",children:"Account"}),A?_.jsx("select",{value:ft,onChange:R=>$(R.target.value),className:"mt-1 h-9 w-full rounded-md bg-slate-900/70 px-2 text-[0.8rem] text-slate-100 outline-none ring-1 ring-slate-700 focus:ring-2 focus:ring-cyan-500",children:s.map(R=>_.jsx("option",{value:R.id,children:R.name||R.id},R.id))}):_.jsx("input",{value:ft,onChange:R=>$(R.target.value),className:"mt-1 h-9 w-full rounded-md bg-slate-900/70 px-3 text-[0.8rem] text-slate-100 outline-none ring-1 ring-slate-700 focus:ring-2 focus:ring-cyan-500",placeholder:"main"})]})]}),m&&_.jsxs("div",{className:"rounded-xl border border-slate-700/60 bg-black/20 p-3",children:[_.jsxs("label",{className:"flex items-center gap-2 text-xs text-slate-200",children:[_.jsx("input",{type:"checkbox",checked:tt,onChange:R=>nt(R.target.checked)}),"Add to calendar as repeating due item"]}),tt&&_.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[_.jsx("span",{className:"text-[0.65rem] uppercase tracking-[0.18em] text-slate-500",children:"Cadence"}),_.jsxs("select",{value:mt,onChange:R=>ht(R.target.value),className:"h-8 rounded-md bg-slate-900/70 px-2 text-[0.75rem] text-slate-100 outline-none ring-1 ring-slate-700 focus:ring-2 focus:ring-cyan-500",children:[_.jsx("option",{value:"once",children:"Once"}),_.jsx("option",{value:"weekly",children:"Weekly"}),_.jsx("option",{value:"biweekly",children:"Biweekly"}),_.jsx("option",{value:"monthly",children:"Monthly"}),_.jsx("option",{value:"yearly",children:"Yearly"})]})]})]}),_.jsxs("div",{className:"mt-1 flex items-center justify-end gap-2",children:[_.jsx("button",{type:"button",onClick:u,className:"h-9 px-3 rounded-md border border-slate-600 text-slate-200 hover:border-cyan-400 hover:text-cyan-200 transition",children:"Cancel"}),_.jsx("button",{type:"button",onClick:C,className:"h-9 px-3 rounded-md border border-cyan-500/60 text-cyan-200 hover:bg-cyan-500/10 transition",children:"Save"})]})]})]})]})}const V4=[{value:"auto",label:"Auto (detect)"},{value:"income",label:"Income"},{value:"expense",label:"Expense"},{value:"transfer",label:"Transfer"},{value:"ignore",label:"Ignore"}],j4={income:"Income",expense:"Expense",transfer:"Transfer",ignore:"Ignored",unknown:"Unknown"};function L4(){const i=new Date,t=i.getFullYear(),e=String(i.getMonth()+1).padStart(2,"0"),s=String(i.getDate()).padStart(2,"0");return`${t}-${e}-${s}`}function P4(i){const{transactions:t=[],accountName:e="",accounts:s=[],currentAccountId:o="main",onAddTransaction:u=()=>{},onUpdateTransaction:c=()=>{},onDeleteTransaction:m=()=>{},typeHints:p=[],scheduledTemplates:g=[],onScheduledTemplatesChange:v=()=>{},filter:E,onFilterChange:T,filterText:I,onChangeFilterText:P}=i,B=Array.isArray(s)&&s.length>0?s.find(Y=>Y.id===o):null,X=e||B?.name||"",ft=(I??E??"").toString(),$=P??T??(()=>{}),tt=Array.isArray(t)&&t.length>0,[nt,mt]=Lt.useState({query:"",minAmount:"",maxAmount:""}),[ht,C]=Lt.useState("date"),[A,R]=Lt.useState("desc"),[V,M]=Lt.useState(!1);Lt.useEffect(()=>{const Y=(ft||"").trim();Y&&mt(rt=>({...rt,query:Y}))},[ft]);const D=Y=>rt=>{const O=rt.target.value;mt(K=>({...K,[Y]:O})),Y==="query"&&$(O)},S=()=>{mt({query:"",minAmount:"",maxAmount:""}),$("")},ot=nt.query||nt.minAmount||nt.maxAmount,F=()=>{R(Y=>Y==="asc"?"desc":"asc")},j=Lt.useMemo(()=>tt?[...t.map((K,ut)=>({tx:K,index:ut})).filter(({tx:K})=>{const ut=nt.query.trim().toLowerCase(),dt=Number(K.amount);if(ut&&![K.description||"",K.category||""].join(" ").toLowerCase().includes(ut))return!1;if(nt.minAmount!==""){const yt=Number(nt.minAmount);if(!Number.isNaN(yt)&&!Number.isNaN(dt)&&dt<yt)return!1}if(nt.maxAmount!==""){const yt=Number(nt.maxAmount);if(!Number.isNaN(yt)&&!Number.isNaN(dt)&&dt>yt)return!1}return!0})].sort((K,ut)=>{const dt=K.tx,yt=ut.tx,st=A==="asc"?1:-1;if(ht==="amount"){const St=Number(dt.amount)||0,ae=Number(yt.amount)||0;return(St-ae)*st}if(ht==="description"||ht==="category"){const St=(dt[ht]||"").toLowerCase(),ae=(yt[ht]||"").toLowerCase();return St.localeCompare(ae)*st}const gt=Date.parse(dt.date)||0,wt=Date.parse(yt.date)||0;return(gt-wt)*st}):[],[t,nt,ht,A,tt]);function U(Y){u({...Y,accountId:Y.accountId||o||"main"})}function J(Y){const rt={id:`sched-${Date.now()}`,...Y},O=Array.isArray(g)?g:[];v([...O,rt])}return _.jsxs("div",{className:"space-y-4 w-full",children:[_.jsxs("header",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2",children:[_.jsxs("div",{children:[_.jsx("h1",{className:"text-lg font-semibold text-slate-100",children:"Transactions"}),_.jsx("span",{className:"text-xs text-slate-400",children:"Imported + manual entries"}),_.jsxs("p",{className:"text-[0.65rem] text-slate-500",children:["Currently viewing:"," ",_.jsx("span",{className:"font-semibold text-cyan-200",children:X||"None"})]}),!!ft.trim()&&_.jsxs("div",{className:"mt-2 inline-flex items-center gap-2 rounded-lg border border-cyan-500/40 bg-cyan-500/10 px-2 py-1 text-[0.65rem] text-cyan-200",children:[_.jsx("span",{className:"font-mono",children:"Report filter:"}),_.jsx("span",{className:"text-slate-100",children:ft}),_.jsx("button",{type:"button",onClick:S,className:"ml-1 rounded border border-cyan-500/40 px-2 py-[2px] text-[0.65rem] hover:bg-cyan-500/10",children:"Clear"})]})]}),tt&&_.jsxs("span",{className:"text-[0.65rem] text-slate-500",children:["Showing ",j.length," of ",t.length]})]}),_.jsxs(Rn,{title:"ALL TRANSACTIONS",children:[_.jsx("div",{className:"mb-3 flex justify-end",children:_.jsx("button",{type:"button",onClick:()=>M(!0),className:"h-8 px-3 rounded-md border border-cyan-500/60 text-[0.7rem] font-medium text-cyan-200 hover:bg-cyan-500/10",children:"+ Add Transaction"})}),!tt&&_.jsx("p",{className:"text-xs text-slate-400",children:"No transactions yet. Import a CSV on the Dashboard or add one manually."}),tt&&_.jsxs(_.Fragment,{children:[_.jsxs("div",{className:"mb-3 flex flex-col gap-3 md:flex-row md:items-end md:justify-between",children:[_.jsxs("div",{className:"flex flex-col gap-1 w-full md:w-auto",children:[_.jsx("label",{className:"text-[0.65rem] uppercase tracking-[0.18em] text-slate-500",children:"Search"}),_.jsx("input",{type:"text",value:nt.query,onChange:D("query"),placeholder:"Search description or category...",className:"h-8 w-full md:w-64 rounded-md bg-slate-900/70 px-2 text-[0.7rem] text-slate-100 outline-none ring-1 ring-slate-700 focus:ring-2 focus:ring-cyan-500"})]}),_.jsxs("div",{className:"flex flex-col gap-2 md:flex-row md:items-end md:justify-end",children:[_.jsxs("div",{className:"flex gap-2",children:[_.jsxs("div",{className:"flex flex-col gap-1",children:[_.jsx("label",{className:"text-[0.65rem] uppercase tracking-[0.18em] text-slate-500",children:"Min"}),_.jsx("input",{type:"number",value:nt.minAmount,onChange:D("minAmount"),className:"h-8 w-24 rounded-md bg-slate-900/70 px-2 text-[0.7rem] text-slate-100 outline-none ring-1 ring-slate-700 focus:ring-2 focus:ring-cyan-500"})]}),_.jsxs("div",{className:"flex flex-col gap-1",children:[_.jsx("label",{className:"text-[0.65rem] uppercase tracking-[0.18em] text-slate-500",children:"Max"}),_.jsx("input",{type:"number",value:nt.maxAmount,onChange:D("maxAmount"),className:"h-8 w-24 rounded-md bg-slate-900/70 px-2 text-[0.7rem] text-slate-100 outline-none ring-1 ring-slate-700 focus:ring-2 focus:ring-cyan-500"})]})]}),_.jsx("button",{type:"button",onClick:S,disabled:!ot,className:"h-8 px-3 rounded-md border text-[0.7rem] font-medium transition border-slate-600 text-slate-200 hover:border-cyan-400 hover:text-cyan-200 disabled:opacity-40 disabled:cursor-not-allowed",children:"Clear filters"})]})]}),_.jsx("div",{className:"mb-3 flex flex-col sm:flex-row sm:items-center sm:justify-end gap-2 text-[0.7rem]",children:_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx("span",{className:"uppercase tracking-[0.18em] text-slate-500",children:"Sort by"}),_.jsxs("select",{value:ht,onChange:Y=>C(Y.target.value),className:"h-8 rounded-md bg-slate-900/70 px-2 text-[0.7rem] text-slate-100 outline-none ring-1 ring-slate-700 focus:ring-2 focus:ring-cyan-500",children:[_.jsx("option",{value:"date",children:"Date"}),_.jsx("option",{value:"amount",children:"Amount"}),_.jsx("option",{value:"description",children:"Description"}),_.jsx("option",{value:"category",children:"Category"})]}),_.jsx("button",{type:"button",onClick:F,className:"h-8 px-3 rounded-md border border-slate-600 text-slate-200 hover:border-cyan-400 hover:text-cyan-200 transition",children:A==="asc"?"Asc ":"Desc "})]})})]}),tt&&j.length===0&&_.jsx("p",{className:"text-xs text-slate-400",children:"No transactions match your current filters."}),tt&&j.length>0&&_.jsx("div",{className:"hScroll",children:_.jsx("div",{className:"min-w-[640px] max-h-[65vh] overflow-y-auto border border-slate-800 rounded-lg",children:_.jsxs("table",{className:"w-full text-[0.7rem] sm:text-xs text-left",children:[_.jsx("thead",{className:"bg-slate-900 text-slate-300 sticky top-0",children:_.jsxs("tr",{children:[_.jsx("th",{className:"px-2 py-1",children:"Date"}),_.jsx("th",{className:"px-2 py-1",children:"Description"}),_.jsx("th",{className:"px-2 py-1 hidden sm:table-cell",children:"Category"}),_.jsx("th",{className:"px-2 py-1 hidden sm:table-cell",children:"Type"}),_.jsx("th",{className:"px-2 py-1 text-right",children:"Amount"}),_.jsx("th",{className:"px-2 py-1 text-right",children:"Actions"})]})}),_.jsx("tbody",{className:"divide-y divide-slate-800",children:j.map(({tx:Y,index:rt})=>_.jsxs("tr",{className:"hover:bg-slate-900/70",children:[_.jsx("td",{className:"px-2 py-1 text-slate-300 whitespace-nowrap",children:Y.date||"-"}),_.jsxs("td",{className:"px-2 py-1 text-slate-200",children:[_.jsx("input",{className:"w-full bg-transparent border-b border-slate-700 focus:outline-none focus:border-cyan-400 text-[0.7rem] sm:text-xs",value:Y.description||"",onChange:O=>c(rt,{description:O.target.value})}),_.jsx("div",{className:"sm:hidden mt-1 text-[0.65rem] text-slate-500",children:(Y.category||"").trim()?Y.category:"Uncategorized"})]}),_.jsx("td",{className:"px-2 py-1 text-slate-300 hidden sm:table-cell",children:_.jsx("input",{className:"w-full bg-transparent border-b border-slate-700 focus:outline-none focus:border-cyan-400 text-[0.7rem] sm:text-xs",value:Y.category||"",onChange:O=>c(rt,{category:O.target.value})})}),_.jsx("td",{className:"px-2 py-1 text-slate-300 hidden sm:table-cell",children:_.jsxs("div",{className:"flex flex-col gap-1",children:[_.jsx("select",{className:"w-full bg-slate-900/40 rounded-md border border-slate-700 px-2 py-1 text-[0.65rem] focus:outline-none focus:border-cyan-400",value:Y.flowType||"auto",onChange:O=>{const K=O.target.value;c(rt,{flowType:K==="auto"?void 0:K})},children:V4.map(O=>_.jsx("option",{value:O.value,children:O.label},O.value))}),_.jsxs("span",{className:"text-[0.6rem] text-slate-500",children:["Detected: ",j4[p[rt]]||"Unknown"]})]})}),_.jsx("td",{className:`px-2 py-1 text-right whitespace-nowrap ${Y.amount<0?"text-rose-300":"text-emerald-300"}`,children:Number.isFinite(Number(Y.amount))?`$${Number(Y.amount).toFixed(2)}`:"-"}),_.jsx("td",{className:"px-2 py-1 text-right",children:_.jsx("button",{className:"text-[0.7rem] px-2 py-1 rounded-md border border-rose-500/60 text-rose-300 hover:bg-rose-400/10",onClick:()=>{window.confirm("Delete this transaction from this account?")&&m(rt)},children:"Delete"})})]},rt))})]})})})]}),_.jsx(k4,{open:V,title:"Add Transaction",accounts:s,defaultAccountId:o||"main",initial:{date:L4(),accountId:o||"main"},allowRecurring:!0,onCreateRecurring:J,onSave:U,onClose:()=>M(!1)})]})}function U4({onViewAll:i,onEdit:t,onDelete:e,onDuplicate:s,onExport:o}){const[u,c]=Lt.useState(!1);function m(){c(!1),e?.()}return _.jsxs("div",{className:"relative",children:[_.jsx("button",{type:"button",className:"rounded-full border border-slate-600/70 px-3 py-1 text-xs text-slate-300 hover:border-cyan-400/60",onClick:()=>c(p=>!p),children:"Manage goal "}),_.jsxs("div",{className:`absolute right-0 mt-2 w-40 rounded-xl border border-slate-700/70 bg-[#05060F] text-xs shadow-lg transition-all duration-150 ${u?"opacity-100 translate-y-0 pointer-events-auto":"opacity-0 -translate-y-1 pointer-events-none"}`,children:[_.jsx("button",{type:"button",className:"block w-full px-3 py-2 text-left text-slate-200 hover:bg-slate-800/70",onClick:()=>{c(!1),i?.()},children:"View all goals"}),_.jsx("div",{className:"h-px bg-slate-800/80"}),_.jsx("button",{type:"button",className:"block w-full px-3 py-2 text-left text-slate-200 hover:bg-slate-800/70",onClick:()=>{c(!1),t?.()},children:"Edit goal"}),_.jsx("button",{type:"button",className:"block w-full px-3 py-2 text-left text-slate-200 hover:bg-slate-800/70",onClick:()=>{c(!1),s?.()},children:"Duplicate goal"}),_.jsx("button",{type:"button",className:"block w-full px-3 py-2 text-left text-slate-200 hover:bg-slate-800/70",onClick:()=>{c(!1),o?.()},children:"Export progress"}),_.jsx("button",{type:"button",className:"block w-full px-3 py-2 text-left text-rose-300 hover:bg-slate-800/70",onClick:()=>{window.confirm("Delete this goal?")&&m()},children:"Delete goal"})]})]})}function ip(i,t=0){const e=Number(i);return Number.isFinite(e)?e:t}function z4({goals:i=[],onSelectGoal:t=()=>{},goal:e,mode:s="edit",onRequestCreateGoal:o=()=>{},onEditGoal:u=()=>{},onDeleteGoal:c=()=>{},onDuplicateGoal:m=()=>{},onExportGoal:p=()=>{},onAddContributionRequest:g=()=>{}}){const[v,E]=xt.useState("detail");if(xt.useEffect(()=>{s==="create"&&(e?.id||o())},[s,e?.id]),xt.useEffect(()=>{e?.id||E("all")},[e?.id]),v==="all"){const $=Array.isArray(i)?i:[];return _.jsxs("div",{className:"space-y-5",children:[_.jsxs("header",{className:"flex items-center justify-between gap-3",children:[_.jsxs("div",{className:"space-y-1",children:[_.jsx("h1",{className:"text-xl font-semibold text-slate-100",children:"All Goals"}),_.jsx("p",{className:"text-xs text-slate-400",children:"Select a goal to view details, or create a new one."})]}),_.jsx("button",{type:"button",className:"px-3 py-1.5 rounded-md border border-cyan-400/70 text-xs text-cyan-200 bg-cyan-500/10 hover:bg-cyan-500/20 transition",onClick:()=>o(),children:"+ New Goal"})]}),$.length===0?_.jsx(Rn,{title:"NO GOALS YET",children:_.jsx("p",{className:"text-sm text-slate-300",children:"You dont have any goals yet. Create one to get started."})}):_.jsx("div",{className:"grid md:grid-cols-2 gap-3",children:$.map(tt=>_.jsx(o1,{goal:tt,onClick:()=>{t(tt.id),E("detail")},onEdit:()=>{t(tt.id),E("detail")}},tt.id))})]})}if(!e)return _.jsx("div",{className:"space-y-4",children:_.jsxs(Rn,{title:"GOALS",children:[_.jsx("p",{className:"text-sm text-slate-300",children:"No goal selected."}),_.jsxs("div",{className:"mt-3 flex gap-2",children:[_.jsx("button",{type:"button",onClick:()=>E("all"),className:"px-4 py-2 rounded-lg border border-slate-700 text-xs text-slate-200 bg-slate-900/40 hover:border-cyan-400/70 transition",children:"View all goals"}),_.jsx("button",{type:"button",onClick:o,className:"px-4 py-2 rounded-lg border border-cyan-400/70 text-xs text-cyan-200 bg-cyan-500/10 hover:bg-cyan-500/20 transition",children:"+ Create a goal"})]})]})});const T=ip(e?.saved??e?.current??0,0),I=ip(e?.target??0,0),P=ip(e?.monthlyPlan??0,0),B=e?.icon||e?.emoji||"",X=e?.name||"Untitled Goal",ft=I>0?Math.min(100,T/I*100):0;return _.jsxs("div",{className:"space-y-5",children:[_.jsxs("header",{className:"flex items-center justify-between gap-3",children:[_.jsx("div",{className:"space-y-1",children:_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx("span",{className:"text-2xl",children:B}),_.jsxs("div",{children:[_.jsx("h1",{className:"text-xl font-semibold text-slate-100",children:X}),_.jsx("p",{className:"text-xs text-slate-400",children:"Personalized goal view  future: themed backgrounds & animations."})]})]})}),_.jsx(U4,{onViewAll:()=>E("all"),onEdit:()=>u(e?.id),onDelete:()=>e?.id&&c(e.id),onDuplicate:()=>m(e?.id),onExport:()=>p(e?.id)})]}),_.jsx(Rn,{title:"PROGRESS",children:_.jsxs("div",{className:"flex flex-col gap-2 text-sm",children:[_.jsxs("span",{className:"text-slate-200",children:["$",T.toFixed(2)," / $",I.toFixed(2)]}),_.jsx(zg,{value:ft}),_.jsxs("span",{className:"text-xs text-slate-400",children:[ft.toFixed(1),"% complete"]})]})}),_.jsxs(Rn,{title:"PLAN",children:[_.jsxs("p",{className:"text-sm text-slate-200",children:["Recommended monthly contribution:",_.jsxs("span",{className:"ml-1 text-cyan-300 font-semibold",children:["$",P.toFixed(2)]})]}),_.jsx("div",{className:"mt-3 flex flex-wrap gap-2 text-xs",children:_.jsx("button",{type:"button",className:"px-3 py-1.5 text-xs rounded-md border border-pink-400/70 text-pink-200 bg-pink-500/10 hover:bg-pink-500/20 transition",onClick:()=>g(e?.id),children:"Add Contribution"})})]})]})}var B4={value:()=>{}};function c1(){for(var i=0,t=arguments.length,e={},s;i<t;++i){if(!(s=arguments[i]+"")||s in e||/[\s.]/.test(s))throw new Error("illegal type: "+s);e[s]=[]}return new kh(e)}function kh(i){this._=i}function F4(i,t){return i.trim().split(/^|\s+/).map(function(e){var s="",o=e.indexOf(".");if(o>=0&&(s=e.slice(o+1),e=e.slice(0,o)),e&&!t.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:s}})}kh.prototype=c1.prototype={constructor:kh,on:function(i,t){var e=this._,s=F4(i+"",e),o,u=-1,c=s.length;if(arguments.length<2){for(;++u<c;)if((o=(i=s[u]).type)&&(o=q4(e[o],i.name)))return o;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++u<c;)if(o=(i=s[u]).type)e[o]=rE(e[o],i.name,t);else if(t==null)for(o in e)e[o]=rE(e[o],i.name,null);return this},copy:function(){var i={},t=this._;for(var e in t)i[e]=t[e].slice();return new kh(i)},call:function(i,t){if((o=arguments.length-2)>0)for(var e=new Array(o),s=0,o,u;s<o;++s)e[s]=arguments[s+2];if(!this._.hasOwnProperty(i))throw new Error("unknown type: "+i);for(u=this._[i],s=0,o=u.length;s<o;++s)u[s].value.apply(t,e)},apply:function(i,t,e){if(!this._.hasOwnProperty(i))throw new Error("unknown type: "+i);for(var s=this._[i],o=0,u=s.length;o<u;++o)s[o].value.apply(t,e)}};function q4(i,t){for(var e=0,s=i.length,o;e<s;++e)if((o=i[e]).name===t)return o.value}function rE(i,t,e){for(var s=0,o=i.length;s<o;++s)if(i[s].name===t){i[s]=B4,i=i.slice(0,s).concat(i.slice(s+1));break}return e!=null&&i.push({name:t,value:e}),i}var Bp="http://www.w3.org/1999/xhtml";const sE={svg:"http://www.w3.org/2000/svg",xhtml:Bp,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Vf(i){var t=i+="",e=t.indexOf(":");return e>=0&&(t=i.slice(0,e))!=="xmlns"&&(i=i.slice(e+1)),sE.hasOwnProperty(t)?{space:sE[t],local:i}:i}function H4(i){return function(){var t=this.ownerDocument,e=this.namespaceURI;return e===Bp&&t.documentElement.namespaceURI===Bp?t.createElement(i):t.createElementNS(e,i)}}function G4(i){return function(){return this.ownerDocument.createElementNS(i.space,i.local)}}function h1(i){var t=Vf(i);return(t.local?G4:H4)(t)}function $4(){}function Fg(i){return i==null?$4:function(){return this.querySelector(i)}}function Y4(i){typeof i!="function"&&(i=Fg(i));for(var t=this._groups,e=t.length,s=new Array(e),o=0;o<e;++o)for(var u=t[o],c=u.length,m=s[o]=new Array(c),p,g,v=0;v<c;++v)(p=u[v])&&(g=i.call(p,p.__data__,v,u))&&("__data__"in p&&(g.__data__=p.__data__),m[v]=g);return new In(s,this._parents)}function Q4(i){return i==null?[]:Array.isArray(i)?i:Array.from(i)}function K4(){return[]}function f1(i){return i==null?K4:function(){return this.querySelectorAll(i)}}function X4(i){return function(){return Q4(i.apply(this,arguments))}}function Z4(i){typeof i=="function"?i=X4(i):i=f1(i);for(var t=this._groups,e=t.length,s=[],o=[],u=0;u<e;++u)for(var c=t[u],m=c.length,p,g=0;g<m;++g)(p=c[g])&&(s.push(i.call(p,p.__data__,g,c)),o.push(p));return new In(s,o)}function d1(i){return function(){return this.matches(i)}}function m1(i){return function(t){return t.matches(i)}}var J4=Array.prototype.find;function W4(i){return function(){return J4.call(this.children,i)}}function tO(){return this.firstElementChild}function eO(i){return this.select(i==null?tO:W4(typeof i=="function"?i:m1(i)))}var nO=Array.prototype.filter;function iO(){return Array.from(this.children)}function rO(i){return function(){return nO.call(this.children,i)}}function sO(i){return this.selectAll(i==null?iO:rO(typeof i=="function"?i:m1(i)))}function aO(i){typeof i!="function"&&(i=d1(i));for(var t=this._groups,e=t.length,s=new Array(e),o=0;o<e;++o)for(var u=t[o],c=u.length,m=s[o]=[],p,g=0;g<c;++g)(p=u[g])&&i.call(p,p.__data__,g,u)&&m.push(p);return new In(s,this._parents)}function p1(i){return new Array(i.length)}function oO(){return new In(this._enter||this._groups.map(p1),this._parents)}function rf(i,t){this.ownerDocument=i.ownerDocument,this.namespaceURI=i.namespaceURI,this._next=null,this._parent=i,this.__data__=t}rf.prototype={constructor:rf,appendChild:function(i){return this._parent.insertBefore(i,this._next)},insertBefore:function(i,t){return this._parent.insertBefore(i,t)},querySelector:function(i){return this._parent.querySelector(i)},querySelectorAll:function(i){return this._parent.querySelectorAll(i)}};function lO(i){return function(){return i}}function uO(i,t,e,s,o,u){for(var c=0,m,p=t.length,g=u.length;c<g;++c)(m=t[c])?(m.__data__=u[c],s[c]=m):e[c]=new rf(i,u[c]);for(;c<p;++c)(m=t[c])&&(o[c]=m)}function cO(i,t,e,s,o,u,c){var m,p,g=new Map,v=t.length,E=u.length,T=new Array(v),I;for(m=0;m<v;++m)(p=t[m])&&(T[m]=I=c.call(p,p.__data__,m,t)+"",g.has(I)?o[m]=p:g.set(I,p));for(m=0;m<E;++m)I=c.call(i,u[m],m,u)+"",(p=g.get(I))?(s[m]=p,p.__data__=u[m],g.delete(I)):e[m]=new rf(i,u[m]);for(m=0;m<v;++m)(p=t[m])&&g.get(T[m])===p&&(o[m]=p)}function hO(i){return i.__data__}function fO(i,t){if(!arguments.length)return Array.from(this,hO);var e=t?cO:uO,s=this._parents,o=this._groups;typeof i!="function"&&(i=lO(i));for(var u=o.length,c=new Array(u),m=new Array(u),p=new Array(u),g=0;g<u;++g){var v=s[g],E=o[g],T=E.length,I=dO(i.call(v,v&&v.__data__,g,s)),P=I.length,B=m[g]=new Array(P),X=c[g]=new Array(P),ft=p[g]=new Array(T);e(v,E,B,X,ft,I,t);for(var $=0,tt=0,nt,mt;$<P;++$)if(nt=B[$]){for($>=tt&&(tt=$+1);!(mt=X[tt])&&++tt<P;);nt._next=mt||null}}return c=new In(c,s),c._enter=m,c._exit=p,c}function dO(i){return typeof i=="object"&&"length"in i?i:Array.from(i)}function mO(){return new In(this._exit||this._groups.map(p1),this._parents)}function pO(i,t,e){var s=this.enter(),o=this,u=this.exit();return typeof i=="function"?(s=i(s),s&&(s=s.selection())):s=s.append(i+""),t!=null&&(o=t(o),o&&(o=o.selection())),e==null?u.remove():e(u),s&&o?s.merge(o).order():o}function gO(i){for(var t=i.selection?i.selection():i,e=this._groups,s=t._groups,o=e.length,u=s.length,c=Math.min(o,u),m=new Array(o),p=0;p<c;++p)for(var g=e[p],v=s[p],E=g.length,T=m[p]=new Array(E),I,P=0;P<E;++P)(I=g[P]||v[P])&&(T[P]=I);for(;p<o;++p)m[p]=e[p];return new In(m,this._parents)}function yO(){for(var i=this._groups,t=-1,e=i.length;++t<e;)for(var s=i[t],o=s.length-1,u=s[o],c;--o>=0;)(c=s[o])&&(u&&c.compareDocumentPosition(u)^4&&u.parentNode.insertBefore(c,u),u=c);return this}function _O(i){i||(i=vO);function t(E,T){return E&&T?i(E.__data__,T.__data__):!E-!T}for(var e=this._groups,s=e.length,o=new Array(s),u=0;u<s;++u){for(var c=e[u],m=c.length,p=o[u]=new Array(m),g,v=0;v<m;++v)(g=c[v])&&(p[v]=g);p.sort(t)}return new In(o,this._parents).order()}function vO(i,t){return i<t?-1:i>t?1:i>=t?0:NaN}function bO(){var i=arguments[0];return arguments[0]=this,i.apply(null,arguments),this}function EO(){return Array.from(this)}function xO(){for(var i=this._groups,t=0,e=i.length;t<e;++t)for(var s=i[t],o=0,u=s.length;o<u;++o){var c=s[o];if(c)return c}return null}function TO(){let i=0;for(const t of this)++i;return i}function wO(){return!this.node()}function SO(i){for(var t=this._groups,e=0,s=t.length;e<s;++e)for(var o=t[e],u=0,c=o.length,m;u<c;++u)(m=o[u])&&i.call(m,m.__data__,u,o);return this}function AO(i){return function(){this.removeAttribute(i)}}function NO(i){return function(){this.removeAttributeNS(i.space,i.local)}}function CO(i,t){return function(){this.setAttribute(i,t)}}function RO(i,t){return function(){this.setAttributeNS(i.space,i.local,t)}}function IO(i,t){return function(){var e=t.apply(this,arguments);e==null?this.removeAttribute(i):this.setAttribute(i,e)}}function DO(i,t){return function(){var e=t.apply(this,arguments);e==null?this.removeAttributeNS(i.space,i.local):this.setAttributeNS(i.space,i.local,e)}}function OO(i,t){var e=Vf(i);if(arguments.length<2){var s=this.node();return e.local?s.getAttributeNS(e.space,e.local):s.getAttribute(e)}return this.each((t==null?e.local?NO:AO:typeof t=="function"?e.local?DO:IO:e.local?RO:CO)(e,t))}function g1(i){return i.ownerDocument&&i.ownerDocument.defaultView||i.document&&i||i.defaultView}function MO(i){return function(){this.style.removeProperty(i)}}function kO(i,t,e){return function(){this.style.setProperty(i,t,e)}}function VO(i,t,e){return function(){var s=t.apply(this,arguments);s==null?this.style.removeProperty(i):this.style.setProperty(i,s,e)}}function jO(i,t,e){return arguments.length>1?this.each((t==null?MO:typeof t=="function"?VO:kO)(i,t,e??"")):Ao(this.node(),i)}function Ao(i,t){return i.style.getPropertyValue(t)||g1(i).getComputedStyle(i,null).getPropertyValue(t)}function LO(i){return function(){delete this[i]}}function PO(i,t){return function(){this[i]=t}}function UO(i,t){return function(){var e=t.apply(this,arguments);e==null?delete this[i]:this[i]=e}}function zO(i,t){return arguments.length>1?this.each((t==null?LO:typeof t=="function"?UO:PO)(i,t)):this.node()[i]}function y1(i){return i.trim().split(/^|\s+/)}function qg(i){return i.classList||new _1(i)}function _1(i){this._node=i,this._names=y1(i.getAttribute("class")||"")}_1.prototype={add:function(i){var t=this._names.indexOf(i);t<0&&(this._names.push(i),this._node.setAttribute("class",this._names.join(" ")))},remove:function(i){var t=this._names.indexOf(i);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(i){return this._names.indexOf(i)>=0}};function v1(i,t){for(var e=qg(i),s=-1,o=t.length;++s<o;)e.add(t[s])}function b1(i,t){for(var e=qg(i),s=-1,o=t.length;++s<o;)e.remove(t[s])}function BO(i){return function(){v1(this,i)}}function FO(i){return function(){b1(this,i)}}function qO(i,t){return function(){(t.apply(this,arguments)?v1:b1)(this,i)}}function HO(i,t){var e=y1(i+"");if(arguments.length<2){for(var s=qg(this.node()),o=-1,u=e.length;++o<u;)if(!s.contains(e[o]))return!1;return!0}return this.each((typeof t=="function"?qO:t?BO:FO)(e,t))}function GO(){this.textContent=""}function $O(i){return function(){this.textContent=i}}function YO(i){return function(){var t=i.apply(this,arguments);this.textContent=t??""}}function QO(i){return arguments.length?this.each(i==null?GO:(typeof i=="function"?YO:$O)(i)):this.node().textContent}function KO(){this.innerHTML=""}function XO(i){return function(){this.innerHTML=i}}function ZO(i){return function(){var t=i.apply(this,arguments);this.innerHTML=t??""}}function JO(i){return arguments.length?this.each(i==null?KO:(typeof i=="function"?ZO:XO)(i)):this.node().innerHTML}function WO(){this.nextSibling&&this.parentNode.appendChild(this)}function tM(){return this.each(WO)}function eM(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function nM(){return this.each(eM)}function iM(i){var t=typeof i=="function"?i:h1(i);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function rM(){return null}function sM(i,t){var e=typeof i=="function"?i:h1(i),s=t==null?rM:typeof t=="function"?t:Fg(t);return this.select(function(){return this.insertBefore(e.apply(this,arguments),s.apply(this,arguments)||null)})}function aM(){var i=this.parentNode;i&&i.removeChild(this)}function oM(){return this.each(aM)}function lM(){var i=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(i,this.nextSibling):i}function uM(){var i=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(i,this.nextSibling):i}function cM(i){return this.select(i?uM:lM)}function hM(i){return arguments.length?this.property("__data__",i):this.node().__data__}function fM(i){return function(t){i.call(this,t,this.__data__)}}function dM(i){return i.trim().split(/^|\s+/).map(function(t){var e="",s=t.indexOf(".");return s>=0&&(e=t.slice(s+1),t=t.slice(0,s)),{type:t,name:e}})}function mM(i){return function(){var t=this.__on;if(t){for(var e=0,s=-1,o=t.length,u;e<o;++e)u=t[e],(!i.type||u.type===i.type)&&u.name===i.name?this.removeEventListener(u.type,u.listener,u.options):t[++s]=u;++s?t.length=s:delete this.__on}}}function pM(i,t,e){return function(){var s=this.__on,o,u=fM(t);if(s){for(var c=0,m=s.length;c<m;++c)if((o=s[c]).type===i.type&&o.name===i.name){this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=u,o.options=e),o.value=t;return}}this.addEventListener(i.type,u,e),o={type:i.type,name:i.name,value:t,listener:u,options:e},s?s.push(o):this.__on=[o]}}function gM(i,t,e){var s=dM(i+""),o,u=s.length,c;if(arguments.length<2){var m=this.node().__on;if(m){for(var p=0,g=m.length,v;p<g;++p)for(o=0,v=m[p];o<u;++o)if((c=s[o]).type===v.type&&c.name===v.name)return v.value}return}for(m=t?pM:mM,o=0;o<u;++o)this.each(m(s[o],t,e));return this}function E1(i,t,e){var s=g1(i),o=s.CustomEvent;typeof o=="function"?o=new o(t,e):(o=s.document.createEvent("Event"),e?(o.initEvent(t,e.bubbles,e.cancelable),o.detail=e.detail):o.initEvent(t,!1,!1)),i.dispatchEvent(o)}function yM(i,t){return function(){return E1(this,i,t)}}function _M(i,t){return function(){return E1(this,i,t.apply(this,arguments))}}function vM(i,t){return this.each((typeof t=="function"?_M:yM)(i,t))}function*bM(){for(var i=this._groups,t=0,e=i.length;t<e;++t)for(var s=i[t],o=0,u=s.length,c;o<u;++o)(c=s[o])&&(yield c)}var x1=[null];function In(i,t){this._groups=i,this._parents=t}function Du(){return new In([[document.documentElement]],x1)}function EM(){return this}In.prototype=Du.prototype={constructor:In,select:Y4,selectAll:Z4,selectChild:eO,selectChildren:sO,filter:aO,data:fO,enter:oO,exit:mO,join:pO,merge:gO,selection:EM,order:yO,sort:_O,call:bO,nodes:EO,node:xO,size:TO,empty:wO,each:SO,attr:OO,style:jO,property:zO,classed:HO,text:QO,html:JO,raise:tM,lower:nM,append:iM,insert:sM,remove:oM,clone:cM,datum:hM,on:gM,dispatch:vM,[Symbol.iterator]:bM};function xM(i){return typeof i=="string"?new In([[document.querySelector(i)]],[document.documentElement]):new In([[i]],x1)}function Hg(i,t,e){i.prototype=t.prototype=e,e.constructor=i}function T1(i,t){var e=Object.create(i.prototype);for(var s in t)e[s]=t[s];return e}function Ou(){}var gu=.7,sf=1/gu,yo="\\s*([+-]?\\d+)\\s*",yu="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",zi="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",TM=/^#([0-9a-f]{3,8})$/,wM=new RegExp(`^rgb\\(${yo},${yo},${yo}\\)$`),SM=new RegExp(`^rgb\\(${zi},${zi},${zi}\\)$`),AM=new RegExp(`^rgba\\(${yo},${yo},${yo},${yu}\\)$`),NM=new RegExp(`^rgba\\(${zi},${zi},${zi},${yu}\\)$`),CM=new RegExp(`^hsl\\(${yu},${zi},${zi}\\)$`),RM=new RegExp(`^hsla\\(${yu},${zi},${zi},${yu}\\)$`),aE={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Hg(Ou,_u,{copy(i){return Object.assign(new this.constructor,this,i)},displayable(){return this.rgb().displayable()},hex:oE,formatHex:oE,formatHex8:IM,formatHsl:DM,formatRgb:lE,toString:lE});function oE(){return this.rgb().formatHex()}function IM(){return this.rgb().formatHex8()}function DM(){return w1(this).formatHsl()}function lE(){return this.rgb().formatRgb()}function _u(i){var t,e;return i=(i+"").trim().toLowerCase(),(t=TM.exec(i))?(e=t[1].length,t=parseInt(t[1],16),e===6?uE(t):e===3?new _n(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):e===8?yh(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):e===4?yh(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=wM.exec(i))?new _n(t[1],t[2],t[3],1):(t=SM.exec(i))?new _n(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=AM.exec(i))?yh(t[1],t[2],t[3],t[4]):(t=NM.exec(i))?yh(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=CM.exec(i))?fE(t[1],t[2]/100,t[3]/100,1):(t=RM.exec(i))?fE(t[1],t[2]/100,t[3]/100,t[4]):aE.hasOwnProperty(i)?uE(aE[i]):i==="transparent"?new _n(NaN,NaN,NaN,0):null}function uE(i){return new _n(i>>16&255,i>>8&255,i&255,1)}function yh(i,t,e,s){return s<=0&&(i=t=e=NaN),new _n(i,t,e,s)}function OM(i){return i instanceof Ou||(i=_u(i)),i?(i=i.rgb(),new _n(i.r,i.g,i.b,i.opacity)):new _n}function Fp(i,t,e,s){return arguments.length===1?OM(i):new _n(i,t,e,s??1)}function _n(i,t,e,s){this.r=+i,this.g=+t,this.b=+e,this.opacity=+s}Hg(_n,Fp,T1(Ou,{brighter(i){return i=i==null?sf:Math.pow(sf,i),new _n(this.r*i,this.g*i,this.b*i,this.opacity)},darker(i){return i=i==null?gu:Math.pow(gu,i),new _n(this.r*i,this.g*i,this.b*i,this.opacity)},rgb(){return this},clamp(){return new _n(oa(this.r),oa(this.g),oa(this.b),af(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:cE,formatHex:cE,formatHex8:MM,formatRgb:hE,toString:hE}));function cE(){return`#${sa(this.r)}${sa(this.g)}${sa(this.b)}`}function MM(){return`#${sa(this.r)}${sa(this.g)}${sa(this.b)}${sa((isNaN(this.opacity)?1:this.opacity)*255)}`}function hE(){const i=af(this.opacity);return`${i===1?"rgb(":"rgba("}${oa(this.r)}, ${oa(this.g)}, ${oa(this.b)}${i===1?")":`, ${i})`}`}function af(i){return isNaN(i)?1:Math.max(0,Math.min(1,i))}function oa(i){return Math.max(0,Math.min(255,Math.round(i)||0))}function sa(i){return i=oa(i),(i<16?"0":"")+i.toString(16)}function fE(i,t,e,s){return s<=0?i=t=e=NaN:e<=0||e>=1?i=t=NaN:t<=0&&(i=NaN),new si(i,t,e,s)}function w1(i){if(i instanceof si)return new si(i.h,i.s,i.l,i.opacity);if(i instanceof Ou||(i=_u(i)),!i)return new si;if(i instanceof si)return i;i=i.rgb();var t=i.r/255,e=i.g/255,s=i.b/255,o=Math.min(t,e,s),u=Math.max(t,e,s),c=NaN,m=u-o,p=(u+o)/2;return m?(t===u?c=(e-s)/m+(e<s)*6:e===u?c=(s-t)/m+2:c=(t-e)/m+4,m/=p<.5?u+o:2-u-o,c*=60):m=p>0&&p<1?0:c,new si(c,m,p,i.opacity)}function kM(i,t,e,s){return arguments.length===1?w1(i):new si(i,t,e,s??1)}function si(i,t,e,s){this.h=+i,this.s=+t,this.l=+e,this.opacity=+s}Hg(si,kM,T1(Ou,{brighter(i){return i=i==null?sf:Math.pow(sf,i),new si(this.h,this.s,this.l*i,this.opacity)},darker(i){return i=i==null?gu:Math.pow(gu,i),new si(this.h,this.s,this.l*i,this.opacity)},rgb(){var i=this.h%360+(this.h<0)*360,t=isNaN(i)||isNaN(this.s)?0:this.s,e=this.l,s=e+(e<.5?e:1-e)*t,o=2*e-s;return new _n(rp(i>=240?i-240:i+120,o,s),rp(i,o,s),rp(i<120?i+240:i-120,o,s),this.opacity)},clamp(){return new si(dE(this.h),_h(this.s),_h(this.l),af(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const i=af(this.opacity);return`${i===1?"hsl(":"hsla("}${dE(this.h)}, ${_h(this.s)*100}%, ${_h(this.l)*100}%${i===1?")":`, ${i})`}`}}));function dE(i){return i=(i||0)%360,i<0?i+360:i}function _h(i){return Math.max(0,Math.min(1,i||0))}function rp(i,t,e){return(i<60?t+(e-t)*i/60:i<180?e:i<240?t+(e-t)*(240-i)/60:t)*255}const S1=i=>()=>i;function VM(i,t){return function(e){return i+e*t}}function jM(i,t,e){return i=Math.pow(i,e),t=Math.pow(t,e)-i,e=1/e,function(s){return Math.pow(i+s*t,e)}}function LM(i){return(i=+i)==1?A1:function(t,e){return e-t?jM(t,e,i):S1(isNaN(t)?e:t)}}function A1(i,t){var e=t-i;return e?VM(i,e):S1(isNaN(i)?t:i)}const mE=(function i(t){var e=LM(t);function s(o,u){var c=e((o=Fp(o)).r,(u=Fp(u)).r),m=e(o.g,u.g),p=e(o.b,u.b),g=A1(o.opacity,u.opacity);return function(v){return o.r=c(v),o.g=m(v),o.b=p(v),o.opacity=g(v),o+""}}return s.gamma=i,s})(1);function is(i,t){return i=+i,t=+t,function(e){return i*(1-e)+t*e}}var qp=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,sp=new RegExp(qp.source,"g");function PM(i){return function(){return i}}function UM(i){return function(t){return i(t)+""}}function zM(i,t){var e=qp.lastIndex=sp.lastIndex=0,s,o,u,c=-1,m=[],p=[];for(i=i+"",t=t+"";(s=qp.exec(i))&&(o=sp.exec(t));)(u=o.index)>e&&(u=t.slice(e,u),m[c]?m[c]+=u:m[++c]=u),(s=s[0])===(o=o[0])?m[c]?m[c]+=o:m[++c]=o:(m[++c]=null,p.push({i:c,x:is(s,o)})),e=sp.lastIndex;return e<t.length&&(u=t.slice(e),m[c]?m[c]+=u:m[++c]=u),m.length<2?p[0]?UM(p[0].x):PM(t):(t=p.length,function(g){for(var v=0,E;v<t;++v)m[(E=p[v]).i]=E.x(g);return m.join("")})}var pE=180/Math.PI,Hp={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function N1(i,t,e,s,o,u){var c,m,p;return(c=Math.sqrt(i*i+t*t))&&(i/=c,t/=c),(p=i*e+t*s)&&(e-=i*p,s-=t*p),(m=Math.sqrt(e*e+s*s))&&(e/=m,s/=m,p/=m),i*s<t*e&&(i=-i,t=-t,p=-p,c=-c),{translateX:o,translateY:u,rotate:Math.atan2(t,i)*pE,skewX:Math.atan(p)*pE,scaleX:c,scaleY:m}}var vh;function BM(i){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(i+"");return t.isIdentity?Hp:N1(t.a,t.b,t.c,t.d,t.e,t.f)}function FM(i){return i==null||(vh||(vh=document.createElementNS("http://www.w3.org/2000/svg","g")),vh.setAttribute("transform",i),!(i=vh.transform.baseVal.consolidate()))?Hp:(i=i.matrix,N1(i.a,i.b,i.c,i.d,i.e,i.f))}function C1(i,t,e,s){function o(g){return g.length?g.pop()+" ":""}function u(g,v,E,T,I,P){if(g!==E||v!==T){var B=I.push("translate(",null,t,null,e);P.push({i:B-4,x:is(g,E)},{i:B-2,x:is(v,T)})}else(E||T)&&I.push("translate("+E+t+T+e)}function c(g,v,E,T){g!==v?(g-v>180?v+=360:v-g>180&&(g+=360),T.push({i:E.push(o(E)+"rotate(",null,s)-2,x:is(g,v)})):v&&E.push(o(E)+"rotate("+v+s)}function m(g,v,E,T){g!==v?T.push({i:E.push(o(E)+"skewX(",null,s)-2,x:is(g,v)}):v&&E.push(o(E)+"skewX("+v+s)}function p(g,v,E,T,I,P){if(g!==E||v!==T){var B=I.push(o(I)+"scale(",null,",",null,")");P.push({i:B-4,x:is(g,E)},{i:B-2,x:is(v,T)})}else(E!==1||T!==1)&&I.push(o(I)+"scale("+E+","+T+")")}return function(g,v){var E=[],T=[];return g=i(g),v=i(v),u(g.translateX,g.translateY,v.translateX,v.translateY,E,T),c(g.rotate,v.rotate,E,T),m(g.skewX,v.skewX,E,T),p(g.scaleX,g.scaleY,v.scaleX,v.scaleY,E,T),g=v=null,function(I){for(var P=-1,B=T.length,X;++P<B;)E[(X=T[P]).i]=X.x(I);return E.join("")}}}var qM=C1(BM,"px, ","px)","deg)"),HM=C1(FM,", ",")",")"),No=0,Kl=0,Bl=0,R1=1e3,of,Xl,lf=0,ma=0,jf=0,vu=typeof performance=="object"&&performance.now?performance:Date,I1=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(i){setTimeout(i,17)};function Gg(){return ma||(I1(GM),ma=vu.now()+jf)}function GM(){ma=0}function uf(){this._call=this._time=this._next=null}uf.prototype=D1.prototype={constructor:uf,restart:function(i,t,e){if(typeof i!="function")throw new TypeError("callback is not a function");e=(e==null?Gg():+e)+(t==null?0:+t),!this._next&&Xl!==this&&(Xl?Xl._next=this:of=this,Xl=this),this._call=i,this._time=e,Gp()},stop:function(){this._call&&(this._call=null,this._time=1/0,Gp())}};function D1(i,t,e){var s=new uf;return s.restart(i,t,e),s}function $M(){Gg(),++No;for(var i=of,t;i;)(t=ma-i._time)>=0&&i._call.call(void 0,t),i=i._next;--No}function gE(){ma=(lf=vu.now())+jf,No=Kl=0;try{$M()}finally{No=0,QM(),ma=0}}function YM(){var i=vu.now(),t=i-lf;t>R1&&(jf-=t,lf=i)}function QM(){for(var i,t=of,e,s=1/0;t;)t._call?(s>t._time&&(s=t._time),i=t,t=t._next):(e=t._next,t._next=null,t=i?i._next=e:of=e);Xl=i,Gp(s)}function Gp(i){if(!No){Kl&&(Kl=clearTimeout(Kl));var t=i-ma;t>24?(i<1/0&&(Kl=setTimeout(gE,i-vu.now()-jf)),Bl&&(Bl=clearInterval(Bl))):(Bl||(lf=vu.now(),Bl=setInterval(YM,R1)),No=1,I1(gE))}}function yE(i,t,e){var s=new uf;return t=t==null?0:+t,s.restart(o=>{s.stop(),i(o+t)},t,e),s}var KM=c1("start","end","cancel","interrupt"),XM=[],O1=0,_E=1,$p=2,Vh=3,vE=4,Yp=5,jh=6;function Lf(i,t,e,s,o,u){var c=i.__transition;if(!c)i.__transition={};else if(e in c)return;ZM(i,e,{name:t,index:s,group:o,on:KM,tween:XM,time:u.time,delay:u.delay,duration:u.duration,ease:u.ease,timer:null,state:O1})}function $g(i,t){var e=li(i,t);if(e.state>O1)throw new Error("too late; already scheduled");return e}function qi(i,t){var e=li(i,t);if(e.state>Vh)throw new Error("too late; already running");return e}function li(i,t){var e=i.__transition;if(!e||!(e=e[t]))throw new Error("transition not found");return e}function ZM(i,t,e){var s=i.__transition,o;s[t]=e,e.timer=D1(u,0,e.time);function u(g){e.state=_E,e.timer.restart(c,e.delay,e.time),e.delay<=g&&c(g-e.delay)}function c(g){var v,E,T,I;if(e.state!==_E)return p();for(v in s)if(I=s[v],I.name===e.name){if(I.state===Vh)return yE(c);I.state===vE?(I.state=jh,I.timer.stop(),I.on.call("interrupt",i,i.__data__,I.index,I.group),delete s[v]):+v<t&&(I.state=jh,I.timer.stop(),I.on.call("cancel",i,i.__data__,I.index,I.group),delete s[v])}if(yE(function(){e.state===Vh&&(e.state=vE,e.timer.restart(m,e.delay,e.time),m(g))}),e.state=$p,e.on.call("start",i,i.__data__,e.index,e.group),e.state===$p){for(e.state=Vh,o=new Array(T=e.tween.length),v=0,E=-1;v<T;++v)(I=e.tween[v].value.call(i,i.__data__,e.index,e.group))&&(o[++E]=I);o.length=E+1}}function m(g){for(var v=g<e.duration?e.ease.call(null,g/e.duration):(e.timer.restart(p),e.state=Yp,1),E=-1,T=o.length;++E<T;)o[E].call(i,v);e.state===Yp&&(e.on.call("end",i,i.__data__,e.index,e.group),p())}function p(){e.state=jh,e.timer.stop(),delete s[t];for(var g in s)return;delete i.__transition}}function JM(i,t){var e=i.__transition,s,o,u=!0,c;if(e){t=t==null?null:t+"";for(c in e){if((s=e[c]).name!==t){u=!1;continue}o=s.state>$p&&s.state<Yp,s.state=jh,s.timer.stop(),s.on.call(o?"interrupt":"cancel",i,i.__data__,s.index,s.group),delete e[c]}u&&delete i.__transition}}function WM(i){return this.each(function(){JM(this,i)})}function tk(i,t){var e,s;return function(){var o=qi(this,i),u=o.tween;if(u!==e){s=e=u;for(var c=0,m=s.length;c<m;++c)if(s[c].name===t){s=s.slice(),s.splice(c,1);break}}o.tween=s}}function ek(i,t,e){var s,o;if(typeof e!="function")throw new Error;return function(){var u=qi(this,i),c=u.tween;if(c!==s){o=(s=c).slice();for(var m={name:t,value:e},p=0,g=o.length;p<g;++p)if(o[p].name===t){o[p]=m;break}p===g&&o.push(m)}u.tween=o}}function nk(i,t){var e=this._id;if(i+="",arguments.length<2){for(var s=li(this.node(),e).tween,o=0,u=s.length,c;o<u;++o)if((c=s[o]).name===i)return c.value;return null}return this.each((t==null?tk:ek)(e,i,t))}function Yg(i,t,e){var s=i._id;return i.each(function(){var o=qi(this,s);(o.value||(o.value={}))[t]=e.apply(this,arguments)}),function(o){return li(o,s).value[t]}}function M1(i,t){var e;return(typeof t=="number"?is:t instanceof _u?mE:(e=_u(t))?(t=e,mE):zM)(i,t)}function ik(i){return function(){this.removeAttribute(i)}}function rk(i){return function(){this.removeAttributeNS(i.space,i.local)}}function sk(i,t,e){var s,o=e+"",u;return function(){var c=this.getAttribute(i);return c===o?null:c===s?u:u=t(s=c,e)}}function ak(i,t,e){var s,o=e+"",u;return function(){var c=this.getAttributeNS(i.space,i.local);return c===o?null:c===s?u:u=t(s=c,e)}}function ok(i,t,e){var s,o,u;return function(){var c,m=e(this),p;return m==null?void this.removeAttribute(i):(c=this.getAttribute(i),p=m+"",c===p?null:c===s&&p===o?u:(o=p,u=t(s=c,m)))}}function lk(i,t,e){var s,o,u;return function(){var c,m=e(this),p;return m==null?void this.removeAttributeNS(i.space,i.local):(c=this.getAttributeNS(i.space,i.local),p=m+"",c===p?null:c===s&&p===o?u:(o=p,u=t(s=c,m)))}}function uk(i,t){var e=Vf(i),s=e==="transform"?HM:M1;return this.attrTween(i,typeof t=="function"?(e.local?lk:ok)(e,s,Yg(this,"attr."+i,t)):t==null?(e.local?rk:ik)(e):(e.local?ak:sk)(e,s,t))}function ck(i,t){return function(e){this.setAttribute(i,t.call(this,e))}}function hk(i,t){return function(e){this.setAttributeNS(i.space,i.local,t.call(this,e))}}function fk(i,t){var e,s;function o(){var u=t.apply(this,arguments);return u!==s&&(e=(s=u)&&hk(i,u)),e}return o._value=t,o}function dk(i,t){var e,s;function o(){var u=t.apply(this,arguments);return u!==s&&(e=(s=u)&&ck(i,u)),e}return o._value=t,o}function mk(i,t){var e="attr."+i;if(arguments.length<2)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;var s=Vf(i);return this.tween(e,(s.local?fk:dk)(s,t))}function pk(i,t){return function(){$g(this,i).delay=+t.apply(this,arguments)}}function gk(i,t){return t=+t,function(){$g(this,i).delay=t}}function yk(i){var t=this._id;return arguments.length?this.each((typeof i=="function"?pk:gk)(t,i)):li(this.node(),t).delay}function _k(i,t){return function(){qi(this,i).duration=+t.apply(this,arguments)}}function vk(i,t){return t=+t,function(){qi(this,i).duration=t}}function bk(i){var t=this._id;return arguments.length?this.each((typeof i=="function"?_k:vk)(t,i)):li(this.node(),t).duration}function Ek(i,t){if(typeof t!="function")throw new Error;return function(){qi(this,i).ease=t}}function xk(i){var t=this._id;return arguments.length?this.each(Ek(t,i)):li(this.node(),t).ease}function Tk(i,t){return function(){var e=t.apply(this,arguments);if(typeof e!="function")throw new Error;qi(this,i).ease=e}}function wk(i){if(typeof i!="function")throw new Error;return this.each(Tk(this._id,i))}function Sk(i){typeof i!="function"&&(i=d1(i));for(var t=this._groups,e=t.length,s=new Array(e),o=0;o<e;++o)for(var u=t[o],c=u.length,m=s[o]=[],p,g=0;g<c;++g)(p=u[g])&&i.call(p,p.__data__,g,u)&&m.push(p);return new _r(s,this._parents,this._name,this._id)}function Ak(i){if(i._id!==this._id)throw new Error;for(var t=this._groups,e=i._groups,s=t.length,o=e.length,u=Math.min(s,o),c=new Array(s),m=0;m<u;++m)for(var p=t[m],g=e[m],v=p.length,E=c[m]=new Array(v),T,I=0;I<v;++I)(T=p[I]||g[I])&&(E[I]=T);for(;m<s;++m)c[m]=t[m];return new _r(c,this._parents,this._name,this._id)}function Nk(i){return(i+"").trim().split(/^|\s+/).every(function(t){var e=t.indexOf(".");return e>=0&&(t=t.slice(0,e)),!t||t==="start"})}function Ck(i,t,e){var s,o,u=Nk(t)?$g:qi;return function(){var c=u(this,i),m=c.on;m!==s&&(o=(s=m).copy()).on(t,e),c.on=o}}function Rk(i,t){var e=this._id;return arguments.length<2?li(this.node(),e).on.on(i):this.each(Ck(e,i,t))}function Ik(i){return function(){var t=this.parentNode;for(var e in this.__transition)if(+e!==i)return;t&&t.removeChild(this)}}function Dk(){return this.on("end.remove",Ik(this._id))}function Ok(i){var t=this._name,e=this._id;typeof i!="function"&&(i=Fg(i));for(var s=this._groups,o=s.length,u=new Array(o),c=0;c<o;++c)for(var m=s[c],p=m.length,g=u[c]=new Array(p),v,E,T=0;T<p;++T)(v=m[T])&&(E=i.call(v,v.__data__,T,m))&&("__data__"in v&&(E.__data__=v.__data__),g[T]=E,Lf(g[T],t,e,T,g,li(v,e)));return new _r(u,this._parents,t,e)}function Mk(i){var t=this._name,e=this._id;typeof i!="function"&&(i=f1(i));for(var s=this._groups,o=s.length,u=[],c=[],m=0;m<o;++m)for(var p=s[m],g=p.length,v,E=0;E<g;++E)if(v=p[E]){for(var T=i.call(v,v.__data__,E,p),I,P=li(v,e),B=0,X=T.length;B<X;++B)(I=T[B])&&Lf(I,t,e,B,T,P);u.push(T),c.push(v)}return new _r(u,c,t,e)}var kk=Du.prototype.constructor;function Vk(){return new kk(this._groups,this._parents)}function jk(i,t){var e,s,o;return function(){var u=Ao(this,i),c=(this.style.removeProperty(i),Ao(this,i));return u===c?null:u===e&&c===s?o:o=t(e=u,s=c)}}function k1(i){return function(){this.style.removeProperty(i)}}function Lk(i,t,e){var s,o=e+"",u;return function(){var c=Ao(this,i);return c===o?null:c===s?u:u=t(s=c,e)}}function Pk(i,t,e){var s,o,u;return function(){var c=Ao(this,i),m=e(this),p=m+"";return m==null&&(p=m=(this.style.removeProperty(i),Ao(this,i))),c===p?null:c===s&&p===o?u:(o=p,u=t(s=c,m))}}function Uk(i,t){var e,s,o,u="style."+t,c="end."+u,m;return function(){var p=qi(this,i),g=p.on,v=p.value[u]==null?m||(m=k1(t)):void 0;(g!==e||o!==v)&&(s=(e=g).copy()).on(c,o=v),p.on=s}}function zk(i,t,e){var s=(i+="")=="transform"?qM:M1;return t==null?this.styleTween(i,jk(i,s)).on("end.style."+i,k1(i)):typeof t=="function"?this.styleTween(i,Pk(i,s,Yg(this,"style."+i,t))).each(Uk(this._id,i)):this.styleTween(i,Lk(i,s,t),e).on("end.style."+i,null)}function Bk(i,t,e){return function(s){this.style.setProperty(i,t.call(this,s),e)}}function Fk(i,t,e){var s,o;function u(){var c=t.apply(this,arguments);return c!==o&&(s=(o=c)&&Bk(i,c,e)),s}return u._value=t,u}function qk(i,t,e){var s="style."+(i+="");if(arguments.length<2)return(s=this.tween(s))&&s._value;if(t==null)return this.tween(s,null);if(typeof t!="function")throw new Error;return this.tween(s,Fk(i,t,e??""))}function Hk(i){return function(){this.textContent=i}}function Gk(i){return function(){var t=i(this);this.textContent=t??""}}function $k(i){return this.tween("text",typeof i=="function"?Gk(Yg(this,"text",i)):Hk(i==null?"":i+""))}function Yk(i){return function(t){this.textContent=i.call(this,t)}}function Qk(i){var t,e;function s(){var o=i.apply(this,arguments);return o!==e&&(t=(e=o)&&Yk(o)),t}return s._value=i,s}function Kk(i){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(i==null)return this.tween(t,null);if(typeof i!="function")throw new Error;return this.tween(t,Qk(i))}function Xk(){for(var i=this._name,t=this._id,e=V1(),s=this._groups,o=s.length,u=0;u<o;++u)for(var c=s[u],m=c.length,p,g=0;g<m;++g)if(p=c[g]){var v=li(p,t);Lf(p,i,e,g,c,{time:v.time+v.delay+v.duration,delay:0,duration:v.duration,ease:v.ease})}return new _r(s,this._parents,i,e)}function Zk(){var i,t,e=this,s=e._id,o=e.size();return new Promise(function(u,c){var m={value:c},p={value:function(){--o===0&&u()}};e.each(function(){var g=qi(this,s),v=g.on;v!==i&&(t=(i=v).copy(),t._.cancel.push(m),t._.interrupt.push(m),t._.end.push(p)),g.on=t}),o===0&&u()})}var Jk=0;function _r(i,t,e,s){this._groups=i,this._parents=t,this._name=e,this._id=s}function V1(){return++Jk}var ur=Du.prototype;_r.prototype={constructor:_r,select:Ok,selectAll:Mk,selectChild:ur.selectChild,selectChildren:ur.selectChildren,filter:Sk,merge:Ak,selection:Vk,transition:Xk,call:ur.call,nodes:ur.nodes,node:ur.node,size:ur.size,empty:ur.empty,each:ur.each,on:Rk,attr:uk,attrTween:mk,style:zk,styleTween:qk,text:$k,textTween:Kk,remove:Dk,tween:nk,delay:yk,duration:bk,ease:xk,easeVarying:wk,end:Zk,[Symbol.iterator]:ur[Symbol.iterator]};function Wk(i){return((i*=2)<=1?i*i*i:(i-=2)*i*i+2)/2}var t3={time:null,delay:0,duration:250,ease:Wk};function e3(i,t){for(var e;!(e=i.__transition)||!(e=e[t]);)if(!(i=i.parentNode))throw new Error(`transition ${t} not found`);return e}function n3(i){var t,e;i instanceof _r?(t=i._id,i=i._name):(t=V1(),(e=t3).time=Gg(),i=i==null?null:i+"");for(var s=this._groups,o=s.length,u=0;u<o;++u)for(var c=s[u],m=c.length,p,g=0;g<m;++g)(p=c[g])&&Lf(p,i,t,g,c,e||e3(p,t));return new _r(s,this._parents,i,t)}Du.prototype.interrupt=WM;Du.prototype.transition=n3;function Zl(i,t,e){this.k=i,this.x=t,this.y=e}Zl.prototype={constructor:Zl,scale:function(i){return i===1?this:new Zl(this.k*i,this.x,this.y)},translate:function(i,t){return i===0&t===0?this:new Zl(this.k,this.x+this.k*i,this.y+this.k*t)},apply:function(i){return[i[0]*this.k+this.x,i[1]*this.k+this.y]},applyX:function(i){return i*this.k+this.x},applyY:function(i){return i*this.k+this.y},invert:function(i){return[(i[0]-this.x)/this.k,(i[1]-this.y)/this.k]},invertX:function(i){return(i-this.x)/this.k},invertY:function(i){return(i-this.y)/this.k},rescaleX:function(i){return i.copy().domain(i.range().map(this.invertX,this).map(i.invert,i))},rescaleY:function(i){return i.copy().domain(i.range().map(this.invertY,this).map(i.invert,i))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};Zl.prototype;function bE(i,t){let e;if(t===void 0)for(const s of i)s!=null&&(e<s||e===void 0&&s>=s)&&(e=s);else{let s=-1;for(let o of i)(o=t(o,++s,i))!=null&&(e<o||e===void 0&&o>=o)&&(e=o)}return e}function i3(i,t){let e;if(t===void 0)for(const s of i)s!=null&&(e>s||e===void 0&&s>=s)&&(e=s);else{let s=-1;for(let o of i)(o=t(o,++s,i))!=null&&(e>o||e===void 0&&o>=o)&&(e=o)}return e}function ap(i,t){let e=0;if(t===void 0)for(let s of i)(s=+s)&&(e+=s);else{let s=-1;for(let o of i)(o=+t(o,++s,i))&&(e+=o)}return e}function r3(i,t){return i.sourceLinks.length?i.depth:t-1}function bh(i){return function(){return i}}function EE(i,t){return cf(i.source,t.source)||i.index-t.index}function xE(i,t){return cf(i.target,t.target)||i.index-t.index}function cf(i,t){return i.y0-t.y0}function op(i){return i.value}function s3(i){return i.index}function a3(i){return i.nodes}function o3(i){return i.links}function TE(i,t){const e=i.get(t);if(!e)throw new Error("missing: "+t);return e}function wE({nodes:i}){for(const t of i){let e=t.y0,s=e;for(const o of t.sourceLinks)o.y0=e+o.width/2,e+=o.width;for(const o of t.targetLinks)o.y1=s+o.width/2,s+=o.width}}function l3(){let i=0,t=0,e=1,s=1,o=24,u=8,c,m=s3,p=r3,g,v,E=a3,T=o3,I=6;function P(){const F={nodes:E.apply(null,arguments),links:T.apply(null,arguments)};return B(F),X(F),ft(F),$(F),mt(F),wE(F),F}P.update=function(F){return wE(F),F},P.nodeId=function(F){return arguments.length?(m=typeof F=="function"?F:bh(F),P):m},P.nodeAlign=function(F){return arguments.length?(p=typeof F=="function"?F:bh(F),P):p},P.nodeSort=function(F){return arguments.length?(g=F,P):g},P.nodeWidth=function(F){return arguments.length?(o=+F,P):o},P.nodePadding=function(F){return arguments.length?(u=c=+F,P):u},P.nodes=function(F){return arguments.length?(E=typeof F=="function"?F:bh(F),P):E},P.links=function(F){return arguments.length?(T=typeof F=="function"?F:bh(F),P):T},P.linkSort=function(F){return arguments.length?(v=F,P):v},P.size=function(F){return arguments.length?(i=t=0,e=+F[0],s=+F[1],P):[e-i,s-t]},P.extent=function(F){return arguments.length?(i=+F[0][0],e=+F[1][0],t=+F[0][1],s=+F[1][1],P):[[i,t],[e,s]]},P.iterations=function(F){return arguments.length?(I=+F,P):I};function B({nodes:F,links:j}){for(const[J,Y]of F.entries())Y.index=J,Y.sourceLinks=[],Y.targetLinks=[];const U=new Map(F.map((J,Y)=>[m(J,Y,F),J]));for(const[J,Y]of j.entries()){Y.index=J;let{source:rt,target:O}=Y;typeof rt!="object"&&(rt=Y.source=TE(U,rt)),typeof O!="object"&&(O=Y.target=TE(U,O)),rt.sourceLinks.push(Y),O.targetLinks.push(Y)}if(v!=null)for(const{sourceLinks:J,targetLinks:Y}of F)J.sort(v),Y.sort(v)}function X({nodes:F}){for(const j of F)j.value=j.fixedValue===void 0?Math.max(ap(j.sourceLinks,op),ap(j.targetLinks,op)):j.fixedValue}function ft({nodes:F}){const j=F.length;let U=new Set(F),J=new Set,Y=0;for(;U.size;){for(const rt of U){rt.depth=Y;for(const{target:O}of rt.sourceLinks)J.add(O)}if(++Y>j)throw new Error("circular link");U=J,J=new Set}}function $({nodes:F}){const j=F.length;let U=new Set(F),J=new Set,Y=0;for(;U.size;){for(const rt of U){rt.height=Y;for(const{source:O}of rt.targetLinks)J.add(O)}if(++Y>j)throw new Error("circular link");U=J,J=new Set}}function tt({nodes:F}){const j=bE(F,Y=>Y.depth)+1,U=(e-i-o)/(j-1),J=new Array(j);for(const Y of F){const rt=Math.max(0,Math.min(j-1,Math.floor(p.call(null,Y,j))));Y.layer=rt,Y.x0=i+rt*U,Y.x1=Y.x0+o,J[rt]?J[rt].push(Y):J[rt]=[Y]}if(g)for(const Y of J)Y.sort(g);return J}function nt(F){const j=i3(F,U=>(s-t-(U.length-1)*c)/ap(U,op));for(const U of F){let J=t;for(const Y of U){Y.y0=J,Y.y1=J+Y.value*j,J=Y.y1+c;for(const rt of Y.sourceLinks)rt.width=rt.value*j}J=(s-J+c)/(U.length+1);for(let Y=0;Y<U.length;++Y){const rt=U[Y];rt.y0+=J*(Y+1),rt.y1+=J*(Y+1)}D(U)}}function mt(F){const j=tt(F);c=Math.min(u,(s-t)/(bE(j,U=>U.length)-1)),nt(j);for(let U=0;U<I;++U){const J=Math.pow(.99,U),Y=Math.max(1-J,(U+1)/I);C(j,J,Y),ht(j,J,Y)}}function ht(F,j,U){for(let J=1,Y=F.length;J<Y;++J){const rt=F[J];for(const O of rt){let K=0,ut=0;for(const{source:yt,value:st}of O.targetLinks){let gt=st*(O.layer-yt.layer);K+=S(yt,O)*gt,ut+=gt}if(!(ut>0))continue;let dt=(K/ut-O.y0)*j;O.y0+=dt,O.y1+=dt,M(O)}g===void 0&&rt.sort(cf),A(rt,U)}}function C(F,j,U){for(let J=F.length,Y=J-2;Y>=0;--Y){const rt=F[Y];for(const O of rt){let K=0,ut=0;for(const{target:yt,value:st}of O.sourceLinks){let gt=st*(yt.layer-O.layer);K+=ot(O,yt)*gt,ut+=gt}if(!(ut>0))continue;let dt=(K/ut-O.y0)*j;O.y0+=dt,O.y1+=dt,M(O)}g===void 0&&rt.sort(cf),A(rt,U)}}function A(F,j){const U=F.length>>1,J=F[U];V(F,J.y0-c,U-1,j),R(F,J.y1+c,U+1,j),V(F,s,F.length-1,j),R(F,t,0,j)}function R(F,j,U,J){for(;U<F.length;++U){const Y=F[U],rt=(j-Y.y0)*J;rt>1e-6&&(Y.y0+=rt,Y.y1+=rt),j=Y.y1+c}}function V(F,j,U,J){for(;U>=0;--U){const Y=F[U],rt=(Y.y1-j)*J;rt>1e-6&&(Y.y0-=rt,Y.y1-=rt),j=Y.y0-c}}function M({sourceLinks:F,targetLinks:j}){if(v===void 0){for(const{source:{sourceLinks:U}}of j)U.sort(xE);for(const{target:{targetLinks:U}}of F)U.sort(EE)}}function D(F){if(v===void 0)for(const{sourceLinks:j,targetLinks:U}of F)j.sort(xE),U.sort(EE)}function S(F,j){let U=F.y0-(F.sourceLinks.length-1)*c/2;for(const{target:J,width:Y}of F.sourceLinks){if(J===j)break;U+=Y+c}for(const{source:J,width:Y}of j.targetLinks){if(J===F)break;U-=Y}return U}function ot(F,j){let U=j.y0-(j.targetLinks.length-1)*c/2;for(const{source:J,width:Y}of j.targetLinks){if(J===F)break;U+=Y+c}for(const{target:J,width:Y}of F.sourceLinks){if(J===j)break;U-=Y}return U}return P}var Qp=Math.PI,Kp=2*Qp,na=1e-6,u3=Kp-na;function Xp(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function j1(){return new Xp}Xp.prototype=j1.prototype={constructor:Xp,moveTo:function(i,t){this._+="M"+(this._x0=this._x1=+i)+","+(this._y0=this._y1=+t)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(i,t){this._+="L"+(this._x1=+i)+","+(this._y1=+t)},quadraticCurveTo:function(i,t,e,s){this._+="Q"+ +i+","+ +t+","+(this._x1=+e)+","+(this._y1=+s)},bezierCurveTo:function(i,t,e,s,o,u){this._+="C"+ +i+","+ +t+","+ +e+","+ +s+","+(this._x1=+o)+","+(this._y1=+u)},arcTo:function(i,t,e,s,o){i=+i,t=+t,e=+e,s=+s,o=+o;var u=this._x1,c=this._y1,m=e-i,p=s-t,g=u-i,v=c-t,E=g*g+v*v;if(o<0)throw new Error("negative radius: "+o);if(this._x1===null)this._+="M"+(this._x1=i)+","+(this._y1=t);else if(E>na)if(!(Math.abs(v*m-p*g)>na)||!o)this._+="L"+(this._x1=i)+","+(this._y1=t);else{var T=e-u,I=s-c,P=m*m+p*p,B=T*T+I*I,X=Math.sqrt(P),ft=Math.sqrt(E),$=o*Math.tan((Qp-Math.acos((P+E-B)/(2*X*ft)))/2),tt=$/ft,nt=$/X;Math.abs(tt-1)>na&&(this._+="L"+(i+tt*g)+","+(t+tt*v)),this._+="A"+o+","+o+",0,0,"+ +(v*T>g*I)+","+(this._x1=i+nt*m)+","+(this._y1=t+nt*p)}},arc:function(i,t,e,s,o,u){i=+i,t=+t,e=+e,u=!!u;var c=e*Math.cos(s),m=e*Math.sin(s),p=i+c,g=t+m,v=1^u,E=u?s-o:o-s;if(e<0)throw new Error("negative radius: "+e);this._x1===null?this._+="M"+p+","+g:(Math.abs(this._x1-p)>na||Math.abs(this._y1-g)>na)&&(this._+="L"+p+","+g),e&&(E<0&&(E=E%Kp+Kp),E>u3?this._+="A"+e+","+e+",0,1,"+v+","+(i-c)+","+(t-m)+"A"+e+","+e+",0,1,"+v+","+(this._x1=p)+","+(this._y1=g):E>na&&(this._+="A"+e+","+e+",0,"+ +(E>=Qp)+","+v+","+(this._x1=i+e*Math.cos(o))+","+(this._y1=t+e*Math.sin(o))))},rect:function(i,t,e,s){this._+="M"+(this._x0=this._x1=+i)+","+(this._y0=this._y1=+t)+"h"+ +e+"v"+ +s+"h"+-e+"Z"},toString:function(){return this._}};function SE(i){return function(){return i}}function c3(i){return i[0]}function h3(i){return i[1]}var f3=Array.prototype.slice;function d3(i){return i.source}function m3(i){return i.target}function p3(i){var t=d3,e=m3,s=c3,o=h3,u=null;function c(){var m,p=f3.call(arguments),g=t.apply(this,p),v=e.apply(this,p);if(u||(u=m=j1()),i(u,+s.apply(this,(p[0]=g,p)),+o.apply(this,p),+s.apply(this,(p[0]=v,p)),+o.apply(this,p)),m)return u=null,m+""||null}return c.source=function(m){return arguments.length?(t=m,c):t},c.target=function(m){return arguments.length?(e=m,c):e},c.x=function(m){return arguments.length?(s=typeof m=="function"?m:SE(+m),c):s},c.y=function(m){return arguments.length?(o=typeof m=="function"?m:SE(+m),c):o},c.context=function(m){return arguments.length?(u=m??null,c):u},c}function g3(i,t,e,s,o){i.moveTo(t,e),i.bezierCurveTo(t=(t+s)/2,e,t,o,s,o)}function y3(){return p3(g3)}function _3(i){return[i.source.x1,i.y0]}function v3(i){return[i.target.x0,i.y1]}function b3(){return y3().source(_3).target(v3)}function E3({data:i,height:t=560,nodeWidth:e=16,nodePadding:s=18,onNodeClick:o}){const u=xt.useRef(null),[c,m]=xt.useState(0);return xt.useEffect(()=>{const p=u.current;if(!p)return;const g=new ResizeObserver(v=>{const E=Math.floor(v[0]?.contentRect?.width||0);m(E)});return g.observe(p),m(Math.floor(p.clientWidth||0)),()=>g.disconnect()},[]),xt.useEffect(()=>{const p=u.current;if(!p)return;p.innerHTML="";const g=Math.max(320,c||p.clientWidth||0),v=xM(p).append("svg").attr("width",g).attr("height",t).attr("viewBox",`0 0 ${g} ${t}`).style("display","block"),E=$=>{v.append("text").attr("x",16).attr("y",28).attr("fill","#e2e8f0").attr("font-size",12).text($)},T={Income:"#22c55e",Fixed:"#f97316",Essential:"#3b82f6",Variable:"#a855f7",Transfers:"#eab308",Leftover:"#10b981"},I=Number(i?.meta?.incomeTotal||0),P=$=>I>0?$/I*100:0,B=$=>`$${Number($||0).toFixed(2)}`,X=g<420?10:12;let ft=requestAnimationFrame(()=>{try{const $=Array.isArray(i?.nodes)?i.nodes:[],tt=Array.isArray(i?.links)?i.links:[];if(!$.length||!tt.length){E("No report data yet  import transactions to see cash flow.");return}const nt=new Set($.map(S=>S?.name).filter(Boolean));for(const S of tt)typeof S?.source=="string"&&nt.add(S.source),typeof S?.target=="string"&&nt.add(S.target);const mt=[...nt],ht=new Map(mt.map((S,ot)=>[S,ot])),C=mt.map(S=>({name:S})),A=tt.map(S=>{const ot=typeof S.source=="string"?ht.get(S.source):S.source,F=typeof S.target=="string"?ht.get(S.target):S.target,j=Number(S.value||0);return typeof ot!="number"||typeof F!="number"||!Number.isFinite(j)||j<=0?null:{source:ot,target:F,value:j}}).filter(Boolean);if(!A.length){E("Report links are empty after validation.");return}const V=l3().nodeWidth(e).nodePadding(s).extent([[12,12],[g-12,t-12]])({nodes:C.map(S=>({...S})),links:A.map(S=>({...S}))});v.append("g").attr("fill","none").attr("stroke-opacity",.35).selectAll("path").data(V.links).join("path").attr("d",b3()).attr("stroke",S=>{const ot=V.nodes[S.source.index]?.name;return T[ot]||"#94a3b8"}).attr("stroke-width",S=>Math.max(1,S.width)).append("title").text(S=>{const ot=Number(S.value||0),F=V.nodes[S.source.index]?.name,j=V.nodes[S.target.index]?.name;return`${F}  ${j}
${B(ot)} (${P(ot).toFixed(1)}% of income)`});const D=v.append("g").selectAll("g").data(V.nodes).join("g");D.append("rect").attr("x",S=>S.x0).attr("y",S=>S.y0).attr("height",S=>Math.max(1,S.y1-S.y0)).attr("width",S=>S.x1-S.x0).attr("rx",6).attr("fill",S=>T[S.name]||"#64748b").attr("opacity",.9).style("cursor",typeof o=="function"?"pointer":"default").on("click",(S,ot)=>{typeof o=="function"&&o(ot.name,ot)}).append("title").text(S=>{const ot=Number(S.value||0);return`${S.name}
${B(ot)} (${P(ot).toFixed(1)}% of income)`}),D.append("text").attr("x",S=>S.x0<g/2?S.x1+8:S.x0-8).attr("y",S=>(S.y0+S.y1)/2).attr("dy","0.35em").attr("text-anchor",S=>S.x0<g/2?"start":"end").attr("font-size",X).attr("fill","#e2e8f0").text(S=>S.name)}catch($){console.error("FlowSankey render error:",$),E(`Sankey render error: ${$?.message||String($)}`)}});return()=>cancelAnimationFrame(ft)},[i,t,e,s,o,c]),_.jsx("div",{ref:u,style:{width:"100%"}})}const lp={topNPerBucket:10,maxRows:2e4,includeTransfers:!0,preset:"Detailed"};function x3(i){return!i||typeof i!="string"||i.length<7?null:i.slice(0,7)}function up(i){const t=Number(i);return Number.isFinite(t)?t:0}function T3(i=""){let t=String(i).trim().toLowerCase();return t=t.replace(/\s+/g," "),t}function w3(i=""){let t=String(i).trim();return t=t.replace(/[*#]{3,}\w{2,}$/g,"").trim(),t=t.replace(/\b(?:\d{3,}|x{3,}\d+)\b/gi,"").trim(),t=t.replace(/\s+/g," "),t.length>28&&(t=t.slice(0,26)+""),t||"Uncategorized"}const S3=["rent","mortgage","apts","apt","apartment","lease","property management","hoa","insurance","internet","phone","utilities","loan","payment"],A3=["amazon prime","prime membership","netflix","hulu","spotify","youtube premium","rocket money","membership","subscription","icloud","google one","dropbox"],N3=["grocery","costco","walmart","gas","fuel","medical","pharmacy","power","water"],C3=["transfer","zelle","venmo","cash app","withdrawal","deposit"];function R3(i=""){const t=i.toLowerCase();return C3.some(e=>t.includes(e))?"Transfers":S3.some(e=>t.includes(e))?"Fixed":A3.some(e=>t.includes(e))?"Subscriptions":N3.some(e=>t.includes(e))?"Essential":"Variable"}function I3(i,t){const e=[];for(const s of i.entries())e.push(s),e.sort((o,u)=>u[1]-o[1]),e.length>t&&(e.length=t);return e}function D3({accounts:i=[],monthKey:t,topNPerBucket:e=10,maxRows:s=2e4,includeTransfers:o=!0}){const u=(i||[]).flatMap($=>$.transactions||[]),c=t?u.filter($=>x3($.date)===t):u,m=c.length>s?c.slice(-s):c,p=m.reduce(($,tt)=>$+(up(tt.amount)>0?up(tt.amount):0),0),g=new Map,v=new Map;for(const $ of m){const tt=up($.amount);if(!(tt<0))continue;const nt=T3($.description||""),mt=w3($.description||""),ht=R3(nt);if(!o&&ht==="Transfers")continue;const C=Math.abs(tt);g.set(ht,(g.get(ht)||0)+C),v.has(ht)||v.set(ht,new Map);const A=v.get(ht);A.set(mt,(A.get(mt)||0)+C)}if(p<=0&&g.size===0)return{nodes:[],links:[],meta:{incomeTotal:0}};const E=o?["Fixed","Subscriptions","Essential","Variable","Transfers"]:["Fixed","Subscriptions","Essential","Variable"],T=[{name:"Income"},...E.map($=>({name:$}))],I=[];for(const $ of E){const tt=g.get($)||0;tt>0&&I.push({source:"Income",target:$,value:tt})}for(const $ of E){const tt=v.get($);if(tt)for(const[nt,mt]of I3(tt,e))T.push({name:nt}),I.push({source:$,target:nt,value:mt})}const P=E.reduce(($,tt)=>tt==="Transfers"?$:$+(g.get(tt)||0),0),B=Math.max(0,p-P);B>0&&(T.push({name:"Leftover"}),I.push({source:"Income",target:"Leftover",value:B}));const X=new Set,ft=[];for(const $ of T)X.has($.name)||(X.add($.name),ft.push($));return{nodes:ft,links:I,meta:{incomeTotal:p,totalIncome:p,spentTotal:P,totalSpent:P,transfersTotal:g.get("Transfers")||0,leftover:B}}}const AE="budgetApp_reportSettings_v1",O3={Minimal:{topNPerBucket:5,maxRows:1e4,includeTransfers:!1,preset:"Minimal"},Detailed:{topNPerBucket:12,maxRows:6e4,includeTransfers:!0,preset:"Detailed"},Audit:{topNPerBucket:30,maxRows:2e5,includeTransfers:!0,preset:"Audit"}};function NE(i,t,e,s){const o=Number(i);return Number.isFinite(o)?Math.max(t,Math.min(e,Math.trunc(o))):s}function M3({accounts:i=[],monthKey:t,onMerchantPick:e}){const[s,o]=xt.useState("overview"),[u,c]=xt.useState({nodes:[],links:[],meta:{incomeTotal:0}}),[m,p]=xt.useState(560);xt.useEffect(()=>{function T(){const I=Math.max(380,Math.min(680,Math.round(window.innerHeight*.55)));p(I)}return T(),window.addEventListener("resize",T),()=>window.removeEventListener("resize",T)},[]);const[g,v]=xt.useState(()=>{try{const T=localStorage.getItem(AE),I=T?JSON.parse(T):null;return{...lp,...I||{}}}catch{return{...lp}}});xt.useEffect(()=>{const T=setTimeout(()=>{c(D3({accounts:i,monthKey:t,topNPerBucket:g.topNPerBucket,maxRows:g.maxRows,includeTransfers:g.includeTransfers}))},0);return()=>clearTimeout(T)},[i,t,g.topNPerBucket,g.maxRows,g.includeTransfers]),xt.useEffect(()=>{const T=setTimeout(()=>{try{localStorage.setItem(AE,JSON.stringify(g))}catch{}},300);return()=>clearTimeout(T)},[g]);function E(T){const I=O3[T];I&&v(P=>({...P,...I,preset:T}))}return _.jsxs("div",{className:"space-y-3",children:[_.jsx("div",{className:"flex items-center justify-between gap-3",children:_.jsxs("div",{className:"inline-flex rounded-xl border border-slate-800 bg-slate-950/40 p-1",children:[_.jsx("button",{onClick:()=>o("overview"),className:`px-3 py-1.5 text-sm rounded-lg ${s==="overview"?"bg-slate-900 text-slate-100":"text-slate-300 hover:text-slate-100"}`,children:"Overview"}),_.jsx("button",{onClick:()=>o("settings"),className:`px-3 py-1.5 text-sm rounded-lg ${s==="settings"?"bg-slate-900 text-slate-100":"text-slate-300 hover:text-slate-100"}`,children:"Settings"})]})}),s==="overview"&&_.jsx("div",{className:"rounded-2xl border border-slate-800 bg-slate-950/40 p-3",children:_.jsx("div",{className:"hScroll",children:_.jsx("div",{style:{minHeight:m},children:_.jsx(E3,{data:u,height:m,onNodeClick:T=>{!["Income","Fixed","Subscriptions","Essential","Variable","Transfers","Leftover"].includes(T)&&typeof e=="function"&&e(T)}})})})}),s==="settings"&&_.jsxs("div",{className:"rounded-2xl border border-slate-800 bg-slate-950/40 p-4 space-y-5",children:[_.jsxs("div",{className:"space-y-2",children:[_.jsx("div",{className:"text-sm font-medium text-slate-100",children:"Presets"}),_.jsxs("div",{className:"flex flex-wrap gap-2",children:[["Minimal","Detailed","Audit"].map(T=>_.jsx("button",{onClick:()=>E(T),className:"text-sm px-3 py-2 rounded-md border border-slate-800 bg-slate-900 hover:bg-slate-800 text-slate-100",children:T},T)),_.jsx("button",{onClick:()=>v({...lp,preset:"Custom"}),className:"text-sm px-3 py-2 rounded-md border border-slate-800 bg-slate-900 hover:bg-slate-800 text-slate-100",children:"Reset"})]})]}),_.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[_.jsxs("div",{className:"space-y-2",children:[_.jsx("label",{className:"text-slate-100 text-sm font-medium",children:"Top merchants per bucket"}),_.jsx("input",{type:"number",min:1,max:50,value:g.topNPerBucket,onChange:T=>v(I=>({...I,topNPerBucket:NE(T.target.value,1,50,10),preset:"Custom"})),className:"w-full bg-slate-900 border border-slate-800 rounded-md px-3 py-2 text-slate-100"})]}),_.jsxs("div",{className:"space-y-2",children:[_.jsx("label",{className:"text-slate-100 text-sm font-medium",children:"Max rows to process"}),_.jsx("input",{type:"number",min:1e3,max:2e5,step:1e3,value:g.maxRows,onChange:T=>v(I=>({...I,maxRows:NE(T.target.value,1e3,2e5,2e4),preset:"Custom"})),className:"w-full bg-slate-900 border border-slate-800 rounded-md px-3 py-2 text-slate-100"})]}),_.jsxs("div",{className:"flex items-center justify-between gap-4 md:col-span-2",children:[_.jsxs("div",{children:[_.jsx("p",{className:"text-slate-100 text-sm font-medium",children:"Include Transfers"}),_.jsx("p",{className:"text-slate-400 text-xs",children:"Show/hide Transfers bucket in the chart."})]}),_.jsx("input",{type:"checkbox",checked:!!g.includeTransfers,onChange:T=>v(I=>({...I,includeTransfers:T.target.checked,preset:"Custom"})),className:"h-5 w-5"})]})]})]})]})}const L1="budgetAppState_v1";function k3(i=L1){if(typeof window>"u")return null;try{const t=window.localStorage.getItem(i);return t?JSON.parse(t):null}catch(t){return console.error("Failed to load stored state",t),null}}function V3(i,t){if(typeof window>"u")return;let e=L1,s=i;typeof i=="string"&&(e=i,s=t);try{window.localStorage.setItem(e,JSON.stringify(s))}catch(o){console.error("Failed to save state",o)}}function j3(i){if(!i||typeof i!="string"||i.length<7)return String(i||"");const[t,e]=i.split("-"),s=Number(t),o=Number(e)-1,u=new Date(s,o,1);return Number.isNaN(u.getTime())?i:u.toLocaleString(void 0,{month:"long",year:"numeric"})}function CE(i){if(!i)return null;if(i.accounts&&Array.isArray(i.accounts))return i;const t={id:"main",name:"Main Account",type:"checking",transactions:Array.isArray(i.transactions)?i.transactions:[]};return{...i,accounts:[t],currentAccountId:i.currentAccountId||"main"}}function P1(){const i=new Date,t=i.getFullYear(),e=String(i.getMonth()+1).padStart(2,"0");return`${t}-${e}`}function Fl(i,t=0){const e=Number(i);return Number.isFinite(e)?e:t}const cp={monthKey:P1(),budgetsByMonth:{},accounts:[{id:"main",name:"Main Account",type:"checking"}],currentAccountId:"main",scheduledTemplates:[],scheduleChecks:{},goals:[],currentGoalId:null,currentPage:"dashboard"};function L3(){const{user:i,workspaceId:t,signOut:e}=HD(),[s,o]=Lt.useState(null),[u,c]=Lt.useState(()=>{const C=CE(k3());return C?{...cp,...C}:cp}),m=Lt.useRef(!1);Lt.useEffect(()=>{V3(u)},[u]),Lt.useEffect(()=>{if(!i||!t)return;const C=Rf(kf,"workspaces",t),A=BD(C,R=>{const V=R.exists()?R.data()?.state:null;V&&c(M=>({...cp,...M,...CE(V)}))},R=>{console.error("onSnapshot(workspace) failed",R),o({kind:"error",message:"Failed to sync workspace."})});return()=>A()},[i,t]),Lt.useEffect(()=>{if(!i||!t||m.current)return;m.current=!0;const C=setTimeout(async()=>{try{await GD(t,u)}catch(A){console.error("saveWorkspaceState failed",A)}finally{m.current=!1}},450);return()=>clearTimeout(C)},[u,i,t]),Lt.useEffect(()=>{i&&QD(i.uid).catch(C=>{console.error("loadOrCreateUserProfile failed",C)})},[i]);const p=u.monthKey||P1(),g=Lt.useMemo(()=>j3(p),[p]),v=Lt.useMemo(()=>u.budgetsByMonth?.[p]||{estimatedIncome:0,useActualIncome:!1,fixed:[],variable:[],goals:[],transactions:[]},[u.budgetsByMonth,p]),E=Array.isArray(v?.transactions)?v.transactions:[],T=Array.isArray(u.accounts)?u.accounts:[],I=u.currentAccountId||"main",P=Lt.useMemo(()=>{const C=(Array.isArray(v.fixed)?v.fixed:[]).reduce((R,V)=>R+Fl(V?.amount),0),A=(Array.isArray(v.variable)?v.variable:[]).reduce((R,V)=>R+Fl(V?.amount),0);return{fixedTotal:C,variableTotal:A,fixed:C,variable:A}},[v.fixed,v.variable]);function B(C){c(A=>({...A,monthKey:C}))}function X(C){c(A=>({...A,budgetsByMonth:{...A.budgetsByMonth||{},[p]:C}}))}function ft(C){const A={id:`tx-${Date.now()}`,description:String(C?.description||"").trim()||"Transaction",amount:Fl(C?.amount),date:String(C?.date||"").slice(0,10),category:String(C?.category||""),accountId:C?.accountId||I,flowType:C?.flowType||void 0};X({...v,transactions:[...E,A]}),o({kind:"success",message:"Transaction added."})}function $(C){c(A=>({...A,scheduledTemplates:C}))}function tt(C){c(A=>({...A,scheduleChecks:C}))}function nt(C){c(A=>({...A,currentPage:C}))}function mt(C){c(A=>({...A,currentGoalId:C,currentPage:"goal"}))}if(!i)return _.jsx(t4,{});const ht=u.currentPage||"dashboard";return _.jsxs("div",{className:"app-shell",children:[_.jsxs("header",{className:"app-header",children:[_.jsx("div",{className:"left",children:_.jsxs("div",{className:"brand",children:[_.jsx("div",{className:"title",children:"FlowMetrics Budget"}),_.jsx("div",{className:"subtitle",children:g})]})}),_.jsxs("div",{className:"right",children:[_.jsx(WD,{monthKey:p,onSetMonthKey:B,onToast:o}),_.jsx(i4,{user:i,onSignOut:e,onUpdateProfile:C=>KD(i.uid,C)})]})]}),_.jsxs("nav",{className:"app-nav",children:[_.jsx(Ul,{active:ht==="dashboard",onClick:()=>nt("dashboard"),children:"Dashboard"}),_.jsx(Ul,{active:ht==="balances",onClick:()=>nt("balances"),children:"Balances"}),_.jsx(Ul,{active:ht==="budget",onClick:()=>nt("budget"),children:"Budget"}),_.jsx(Ul,{active:ht==="transactions",onClick:()=>nt("transactions"),children:"Transactions"}),_.jsx(Ul,{active:ht==="reports",onClick:()=>nt("reports"),children:"Reports"})]}),_.jsx("main",{className:"app-main",children:_.jsxs("div",{className:"w-full max-w-6xl mx-auto px-4 py-4",children:[ht==="dashboard"&&_.jsx(A4,{month:g,income:Fl(v?.estimatedIncome??v?.income),fixed:P.fixedTotal,variable:P.variableTotal,leftover:Fl(v?.estimatedIncome??v?.income)-P.fixedTotal-P.variableTotal,goals:Array.isArray(u.goals)?u.goals:[],transactions:E,accounts:T,currentAccountId:I,onChangeCurrentAccount:C=>c(A=>({...A,currentAccountId:C})),onOpenGoal:mt,onTransactionsUpdate:C=>X({...v,transactions:C}),currentAccountBalance:0,totalBalance:0,sectionsOrder:v?.sectionsOrder}),ht==="balances"&&_.jsx(R4,{accounts:T,currentAccountId:I,onChangeCurrentAccount:C=>c(A=>({...A,currentAccountId:C})),transactions:E}),ht==="budget"&&_.jsx(O4,{month:g,budget:v,totals:P,onBudgetChange:X,scheduledTemplates:u.scheduledTemplates||[],scheduleChecks:u.scheduleChecks||{},onScheduledTemplatesChange:$,onScheduleChecksChange:tt,accounts:T,currentAccountId:I,onAddTransaction:ft}),ht==="transactions"&&_.jsx(P4,{month:g,transactions:E,accounts:T,currentAccountId:I,onChangeCurrentAccount:C=>c(A=>({...A,currentAccountId:C})),onTransactionsChange:C=>X({...v,transactions:C}),onAddTransaction:ft}),ht==="goal"&&_.jsx(z4,{goalId:u.currentGoalId,goals:Array.isArray(u.goals)?u.goals:[],onBack:()=>nt("dashboard"),onUpdateGoals:C=>c(A=>({...A,goals:C}))}),ht==="reports"&&_.jsx(M3,{monthKey:p,month:g,budget:v,transactions:E,accounts:T})]})}),s&&_.jsx(e4,{kind:s.kind,message:s.message,onClose:()=>o(null)})]})}SS.createRoot(document.getElementById("root")).render(_.jsx(Lt.StrictMode,{children:_.jsx(qD,{children:_.jsx(L3,{})})}));export{cr as a,l1 as c,u1 as p};
//# sourceMappingURL=index-Bc-d1OvK.js.map
