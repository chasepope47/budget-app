(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const c of u.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function e(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function s(o){if(o.ep)return;o.ep=!0;const u=e(o);fetch(o.href,u)}})();function Nw(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var Mm={exports:{}},Jl={};var vv;function Cw(){if(vv)return Jl;vv=1;var i=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(s,o,u){var c=null;if(u!==void 0&&(c=""+u),o.key!==void 0&&(c=""+o.key),"key"in o){u={};for(var m in o)m!=="key"&&(u[m]=o[m])}else u=o;return o=u.ref,{$$typeof:i,type:s,key:c,ref:o!==void 0?o:null,props:u}}return Jl.Fragment=t,Jl.jsx=e,Jl.jsxs=e,Jl}var bv;function Rw(){return bv||(bv=1,Mm.exports=Cw()),Mm.exports}var _=Rw(),km={exports:{}},jt={};var Ev;function Iw(){if(Ev)return jt;Ev=1;var i=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),c=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),T=Symbol.for("react.activity"),x=Symbol.iterator;function S(D){return D===null||typeof D!="object"?null:(D=x&&D[x]||D["@@iterator"],typeof D=="function"?D:null)}var U={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},F=Object.assign,Z={};function ot(D,Q,ht){this.props=D,this.context=Q,this.refs=Z,this.updater=ht||U}ot.prototype.isReactComponent={},ot.prototype.setState=function(D,Q){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,Q,"setState")},ot.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function L(){}L.prototype=ot.prototype;function J(D,Q,ht){this.props=D,this.context=Q,this.refs=Z,this.updater=ht||U}var et=J.prototype=new L;et.constructor=J,F(et,ot.prototype),et.isPureReactComponent=!0;var dt=Array.isArray;function rt(){}var O={H:null,A:null,T:null,S:null},C=Object.prototype.hasOwnProperty;function R(D,Q,ht){var mt=ht.ref;return{$$typeof:i,type:D,key:Q,ref:mt!==void 0?mt:null,props:ht}}function j(D,Q){return R(D.type,Q,D.props)}function k(D){return typeof D=="object"&&D!==null&&D.$$typeof===i}function I(D){var Q={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function(ht){return Q[ht]})}var A=/\/+/g;function ct(D,Q){return typeof D=="object"&&D!==null&&D.key!=null?I(""+D.key):Q.toString(36)}function H(D){switch(D.status){case"fulfilled":return D.value;case"rejected":throw D.reason;default:switch(typeof D.status=="string"?D.then(rt,rt):(D.status="pending",D.then(function(Q){D.status==="pending"&&(D.status="fulfilled",D.value=Q)},function(Q){D.status==="pending"&&(D.status="rejected",D.reason=Q)})),D.status){case"fulfilled":return D.value;case"rejected":throw D.reason}}throw D}function M(D,Q,ht,mt,gt){var St=typeof D;(St==="undefined"||St==="boolean")&&(D=null);var Rt=!1;if(D===null)Rt=!0;else switch(St){case"bigint":case"string":case"number":Rt=!0;break;case"object":switch(D.$$typeof){case i:case t:Rt=!0;break;case v:return Rt=D._init,M(Rt(D._payload),Q,ht,mt,gt)}}if(Rt)return gt=gt(D),Rt=mt===""?"."+ct(D,0):mt,dt(gt)?(ht="",Rt!=null&&(ht=Rt.replace(A,"$&/")+"/"),M(gt,Q,ht,"",function(ln){return ln})):gt!=null&&(k(gt)&&(gt=j(gt,ht+(gt.key==null||D&&D.key===gt.key?"":(""+gt.key).replace(A,"$&/")+"/")+Rt)),Q.push(gt)),1;Rt=0;var Jt=mt===""?".":mt+":";if(dt(D))for(var Xt=0;Xt<D.length;Xt++)mt=D[Xt],St=Jt+ct(mt,Xt),Rt+=M(mt,Q,ht,St,gt);else if(Xt=S(D),typeof Xt=="function")for(D=Xt.call(D),Xt=0;!(mt=D.next()).done;)mt=mt.value,St=Jt+ct(mt,Xt++),Rt+=M(mt,Q,ht,St,gt);else if(St==="object"){if(typeof D.then=="function")return M(H(D),Q,ht,mt,gt);throw Q=String(D),Error("Objects are not valid as a React child (found: "+(Q==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":Q)+"). If you meant to render a collection of children, use an array instead.")}return Rt}function P(D,Q,ht){if(D==null)return D;var mt=[],gt=0;return M(D,mt,"","",function(St){return Q.call(ht,St,gt++)}),mt}function K(D){if(D._status===-1){var Q=D._result;Q=Q(),Q.then(function(ht){(D._status===0||D._status===-1)&&(D._status=1,D._result=ht)},function(ht){(D._status===0||D._status===-1)&&(D._status=2,D._result=ht)}),D._status===-1&&(D._status=0,D._result=Q)}if(D._status===1)return D._result.default;throw D._result}var q=typeof reportError=="function"?reportError:function(D){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Q=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof D=="object"&&D!==null&&typeof D.message=="string"?String(D.message):String(D),error:D});if(!window.dispatchEvent(Q))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",D);return}console.error(D)},it={map:P,forEach:function(D,Q,ht){P(D,function(){Q.apply(this,arguments)},ht)},count:function(D){var Q=0;return P(D,function(){Q++}),Q},toArray:function(D){return P(D,function(Q){return Q})||[]},only:function(D){if(!k(D))throw Error("React.Children.only expected to receive a single React element child.");return D}};return jt.Activity=T,jt.Children=it,jt.Component=ot,jt.Fragment=e,jt.Profiler=o,jt.PureComponent=J,jt.StrictMode=s,jt.Suspense=p,jt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=O,jt.__COMPILER_RUNTIME={__proto__:null,c:function(D){return O.H.useMemoCache(D)}},jt.cache=function(D){return function(){return D.apply(null,arguments)}},jt.cacheSignal=function(){return null},jt.cloneElement=function(D,Q,ht){if(D==null)throw Error("The argument must be a React element, but you passed "+D+".");var mt=F({},D.props),gt=D.key;if(Q!=null)for(St in Q.key!==void 0&&(gt=""+Q.key),Q)!C.call(Q,St)||St==="key"||St==="__self"||St==="__source"||St==="ref"&&Q.ref===void 0||(mt[St]=Q[St]);var St=arguments.length-2;if(St===1)mt.children=ht;else if(1<St){for(var Rt=Array(St),Jt=0;Jt<St;Jt++)Rt[Jt]=arguments[Jt+2];mt.children=Rt}return R(D.type,gt,mt)},jt.createContext=function(D){return D={$$typeof:c,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null},D.Provider=D,D.Consumer={$$typeof:u,_context:D},D},jt.createElement=function(D,Q,ht){var mt,gt={},St=null;if(Q!=null)for(mt in Q.key!==void 0&&(St=""+Q.key),Q)C.call(Q,mt)&&mt!=="key"&&mt!=="__self"&&mt!=="__source"&&(gt[mt]=Q[mt]);var Rt=arguments.length-2;if(Rt===1)gt.children=ht;else if(1<Rt){for(var Jt=Array(Rt),Xt=0;Xt<Rt;Xt++)Jt[Xt]=arguments[Xt+2];gt.children=Jt}if(D&&D.defaultProps)for(mt in Rt=D.defaultProps,Rt)gt[mt]===void 0&&(gt[mt]=Rt[mt]);return R(D,St,gt)},jt.createRef=function(){return{current:null}},jt.forwardRef=function(D){return{$$typeof:m,render:D}},jt.isValidElement=k,jt.lazy=function(D){return{$$typeof:v,_payload:{_status:-1,_result:D},_init:K}},jt.memo=function(D,Q){return{$$typeof:g,type:D,compare:Q===void 0?null:Q}},jt.startTransition=function(D){var Q=O.T,ht={};O.T=ht;try{var mt=D(),gt=O.S;gt!==null&&gt(ht,mt),typeof mt=="object"&&mt!==null&&typeof mt.then=="function"&&mt.then(rt,q)}catch(St){q(St)}finally{Q!==null&&ht.types!==null&&(Q.types=ht.types),O.T=Q}},jt.unstable_useCacheRefresh=function(){return O.H.useCacheRefresh()},jt.use=function(D){return O.H.use(D)},jt.useActionState=function(D,Q,ht){return O.H.useActionState(D,Q,ht)},jt.useCallback=function(D,Q){return O.H.useCallback(D,Q)},jt.useContext=function(D){return O.H.useContext(D)},jt.useDebugValue=function(){},jt.useDeferredValue=function(D,Q){return O.H.useDeferredValue(D,Q)},jt.useEffect=function(D,Q){return O.H.useEffect(D,Q)},jt.useEffectEvent=function(D){return O.H.useEffectEvent(D)},jt.useId=function(){return O.H.useId()},jt.useImperativeHandle=function(D,Q,ht){return O.H.useImperativeHandle(D,Q,ht)},jt.useInsertionEffect=function(D,Q){return O.H.useInsertionEffect(D,Q)},jt.useLayoutEffect=function(D,Q){return O.H.useLayoutEffect(D,Q)},jt.useMemo=function(D,Q){return O.H.useMemo(D,Q)},jt.useOptimistic=function(D,Q){return O.H.useOptimistic(D,Q)},jt.useReducer=function(D,Q,ht){return O.H.useReducer(D,Q,ht)},jt.useRef=function(D){return O.H.useRef(D)},jt.useState=function(D){return O.H.useState(D)},jt.useSyncExternalStore=function(D,Q,ht){return O.H.useSyncExternalStore(D,Q,ht)},jt.useTransition=function(){return O.H.useTransition()},jt.version="19.2.1",jt}var Tv;function Wp(){return Tv||(Tv=1,km.exports=Iw()),km.exports}var yt=Wp();const xt=Nw(yt);var Vm={exports:{}},Wl={},jm={exports:{}},Lm={};var xv;function Dw(){return xv||(xv=1,(function(i){function t(M,P){var K=M.length;M.push(P);t:for(;0<K;){var q=K-1>>>1,it=M[q];if(0<o(it,P))M[q]=P,M[K]=it,K=q;else break t}}function e(M){return M.length===0?null:M[0]}function s(M){if(M.length===0)return null;var P=M[0],K=M.pop();if(K!==P){M[0]=K;t:for(var q=0,it=M.length,D=it>>>1;q<D;){var Q=2*(q+1)-1,ht=M[Q],mt=Q+1,gt=M[mt];if(0>o(ht,K))mt<it&&0>o(gt,ht)?(M[q]=gt,M[mt]=K,q=mt):(M[q]=ht,M[Q]=K,q=Q);else if(mt<it&&0>o(gt,K))M[q]=gt,M[mt]=K,q=mt;else break t}}return P}function o(M,P){var K=M.sortIndex-P.sortIndex;return K!==0?K:M.id-P.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;i.unstable_now=function(){return u.now()}}else{var c=Date,m=c.now();i.unstable_now=function(){return c.now()-m}}var p=[],g=[],v=1,T=null,x=3,S=!1,U=!1,F=!1,Z=!1,ot=typeof setTimeout=="function"?setTimeout:null,L=typeof clearTimeout=="function"?clearTimeout:null,J=typeof setImmediate<"u"?setImmediate:null;function et(M){for(var P=e(g);P!==null;){if(P.callback===null)s(g);else if(P.startTime<=M)s(g),P.sortIndex=P.expirationTime,t(p,P);else break;P=e(g)}}function dt(M){if(F=!1,et(M),!U)if(e(p)!==null)U=!0,rt||(rt=!0,I());else{var P=e(g);P!==null&&H(dt,P.startTime-M)}}var rt=!1,O=-1,C=5,R=-1;function j(){return Z?!0:!(i.unstable_now()-R<C)}function k(){if(Z=!1,rt){var M=i.unstable_now();R=M;var P=!0;try{t:{U=!1,F&&(F=!1,L(O),O=-1),S=!0;var K=x;try{e:{for(et(M),T=e(p);T!==null&&!(T.expirationTime>M&&j());){var q=T.callback;if(typeof q=="function"){T.callback=null,x=T.priorityLevel;var it=q(T.expirationTime<=M);if(M=i.unstable_now(),typeof it=="function"){T.callback=it,et(M),P=!0;break e}T===e(p)&&s(p),et(M)}else s(p);T=e(p)}if(T!==null)P=!0;else{var D=e(g);D!==null&&H(dt,D.startTime-M),P=!1}}break t}finally{T=null,x=K,S=!1}P=void 0}}finally{P?I():rt=!1}}}var I;if(typeof J=="function")I=function(){J(k)};else if(typeof MessageChannel<"u"){var A=new MessageChannel,ct=A.port2;A.port1.onmessage=k,I=function(){ct.postMessage(null)}}else I=function(){ot(k,0)};function H(M,P){O=ot(function(){M(i.unstable_now())},P)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(M){M.callback=null},i.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<M?Math.floor(1e3/M):5},i.unstable_getCurrentPriorityLevel=function(){return x},i.unstable_next=function(M){switch(x){case 1:case 2:case 3:var P=3;break;default:P=x}var K=x;x=P;try{return M()}finally{x=K}},i.unstable_requestPaint=function(){Z=!0},i.unstable_runWithPriority=function(M,P){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var K=x;x=M;try{return P()}finally{x=K}},i.unstable_scheduleCallback=function(M,P,K){var q=i.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?q+K:q):K=q,M){case 1:var it=-1;break;case 2:it=250;break;case 5:it=1073741823;break;case 4:it=1e4;break;default:it=5e3}return it=K+it,M={id:v++,callback:P,priorityLevel:M,startTime:K,expirationTime:it,sortIndex:-1},K>q?(M.sortIndex=K,t(g,M),e(p)===null&&M===e(g)&&(F?(L(O),O=-1):F=!0,H(dt,K-q))):(M.sortIndex=it,t(p,M),U||S||(U=!0,rt||(rt=!0,I()))),M},i.unstable_shouldYield=j,i.unstable_wrapCallback=function(M){var P=x;return function(){var K=x;x=P;try{return M.apply(this,arguments)}finally{x=K}}}})(Lm)),Lm}var Av;function Ow(){return Av||(Av=1,jm.exports=Dw()),jm.exports}var Pm={exports:{}},un={};var wv;function Mw(){if(wv)return un;wv=1;var i=Wp();function t(p){var g="https://react.dev/errors/"+p;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)g+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+p+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var s={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(p,g,v){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:T==null?null:""+T,children:p,containerInfo:g,implementation:v}}var c=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(p,g){if(p==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return un.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,un.createPortal=function(p,g){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(t(299));return u(p,g,null,v)},un.flushSync=function(p){var g=c.T,v=s.p;try{if(c.T=null,s.p=2,p)return p()}finally{c.T=g,s.p=v,s.d.f()}},un.preconnect=function(p,g){typeof p=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,s.d.C(p,g))},un.prefetchDNS=function(p){typeof p=="string"&&s.d.D(p)},un.preinit=function(p,g){if(typeof p=="string"&&g&&typeof g.as=="string"){var v=g.as,T=m(v,g.crossOrigin),x=typeof g.integrity=="string"?g.integrity:void 0,S=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;v==="style"?s.d.S(p,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:T,integrity:x,fetchPriority:S}):v==="script"&&s.d.X(p,{crossOrigin:T,integrity:x,fetchPriority:S,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},un.preinitModule=function(p,g){if(typeof p=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var v=m(g.as,g.crossOrigin);s.d.M(p,{crossOrigin:v,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&s.d.M(p)},un.preload=function(p,g){if(typeof p=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var v=g.as,T=m(v,g.crossOrigin);s.d.L(p,v,{crossOrigin:T,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},un.preloadModule=function(p,g){if(typeof p=="string")if(g){var v=m(g.as,g.crossOrigin);s.d.m(p,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:v,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else s.d.m(p)},un.requestFormReset=function(p){s.d.r(p)},un.unstable_batchedUpdates=function(p,g){return p(g)},un.useFormState=function(p,g,v){return c.H.useFormState(p,g,v)},un.useFormStatus=function(){return c.H.useHostTransitionStatus()},un.version="19.2.1",un}var Sv;function kw(){if(Sv)return Pm.exports;Sv=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(t){console.error(t)}}return i(),Pm.exports=Mw(),Pm.exports}var Nv;function Vw(){if(Nv)return Wl;Nv=1;var i=Ow(),t=Wp(),e=kw();function s(n){var r="https://react.dev/errors/"+n;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)r+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+n+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function u(n){var r=n,a=n;if(n.alternate)for(;r.return;)r=r.return;else{n=r;do r=n,(r.flags&4098)!==0&&(a=r.return),n=r.return;while(n)}return r.tag===3?a:null}function c(n){if(n.tag===13){var r=n.memoizedState;if(r===null&&(n=n.alternate,n!==null&&(r=n.memoizedState)),r!==null)return r.dehydrated}return null}function m(n){if(n.tag===31){var r=n.memoizedState;if(r===null&&(n=n.alternate,n!==null&&(r=n.memoizedState)),r!==null)return r.dehydrated}return null}function p(n){if(u(n)!==n)throw Error(s(188))}function g(n){var r=n.alternate;if(!r){if(r=u(n),r===null)throw Error(s(188));return r!==n?null:n}for(var a=n,l=r;;){var f=a.return;if(f===null)break;var d=f.alternate;if(d===null){if(l=f.return,l!==null){a=l;continue}break}if(f.child===d.child){for(d=f.child;d;){if(d===a)return p(f),n;if(d===l)return p(f),r;d=d.sibling}throw Error(s(188))}if(a.return!==l.return)a=f,l=d;else{for(var b=!1,w=f.child;w;){if(w===a){b=!0,a=f,l=d;break}if(w===l){b=!0,l=f,a=d;break}w=w.sibling}if(!b){for(w=d.child;w;){if(w===a){b=!0,a=d,l=f;break}if(w===l){b=!0,l=d,a=f;break}w=w.sibling}if(!b)throw Error(s(189))}}if(a.alternate!==l)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?n:r}function v(n){var r=n.tag;if(r===5||r===26||r===27||r===6)return n;for(n=n.child;n!==null;){if(r=v(n),r!==null)return r;n=n.sibling}return null}var T=Object.assign,x=Symbol.for("react.element"),S=Symbol.for("react.transitional.element"),U=Symbol.for("react.portal"),F=Symbol.for("react.fragment"),Z=Symbol.for("react.strict_mode"),ot=Symbol.for("react.profiler"),L=Symbol.for("react.consumer"),J=Symbol.for("react.context"),et=Symbol.for("react.forward_ref"),dt=Symbol.for("react.suspense"),rt=Symbol.for("react.suspense_list"),O=Symbol.for("react.memo"),C=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),j=Symbol.for("react.memo_cache_sentinel"),k=Symbol.iterator;function I(n){return n===null||typeof n!="object"?null:(n=k&&n[k]||n["@@iterator"],typeof n=="function"?n:null)}var A=Symbol.for("react.client.reference");function ct(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===A?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case F:return"Fragment";case ot:return"Profiler";case Z:return"StrictMode";case dt:return"Suspense";case rt:return"SuspenseList";case R:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case U:return"Portal";case J:return n.displayName||"Context";case L:return(n._context.displayName||"Context")+".Consumer";case et:var r=n.render;return n=n.displayName,n||(n=r.displayName||r.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case O:return r=n.displayName||null,r!==null?r:ct(n.type)||"Memo";case C:r=n._payload,n=n._init;try{return ct(n(r))}catch{}}return null}var H=Array.isArray,M=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,P=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,K={pending:!1,data:null,method:null,action:null},q=[],it=-1;function D(n){return{current:n}}function Q(n){0>it||(n.current=q[it],q[it]=null,it--)}function ht(n,r){it++,q[it]=n.current,n.current=r}var mt=D(null),gt=D(null),St=D(null),Rt=D(null);function Jt(n,r){switch(ht(St,r),ht(gt,n),ht(mt,null),r.nodeType){case 9:case 11:n=(n=r.documentElement)&&(n=n.namespaceURI)?F_(n):0;break;default:if(n=r.tagName,r=r.namespaceURI)r=F_(r),n=q_(r,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}Q(mt),ht(mt,n)}function Xt(){Q(mt),Q(gt),Q(St)}function ln(n){n.memoizedState!==null&&ht(Rt,n);var r=mt.current,a=q_(r,n.type);r!==a&&(ht(gt,n),ht(mt,a))}function bn(n){gt.current===n&&(Q(mt),Q(gt)),Rt.current===n&&(Q(Rt),Kl._currentValue=K)}var qs,Ur;function Xn(n){if(qs===void 0)try{throw Error()}catch(a){var r=a.stack.trim().match(/\n( *(at )?)/);qs=r&&r[1]||"",Ur=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+qs+n+Ur}var zr=!1;function rr(n,r){if(!n||zr)return"";zr=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(r){var at=function(){throw Error()};if(Object.defineProperty(at.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(at,[])}catch(tt){var X=tt}Reflect.construct(n,[],at)}else{try{at.call()}catch(tt){X=tt}n.call(at.prototype)}}else{try{throw Error()}catch(tt){X=tt}(at=n())&&typeof at.catch=="function"&&at.catch(function(){})}}catch(tt){if(tt&&X&&typeof tt.stack=="string")return[tt.stack,X.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=l.DetermineComponentFrameRoot(),b=d[0],w=d[1];if(b&&w){var V=b.split(`
`),Y=w.split(`
`);for(f=l=0;l<V.length&&!V[l].includes("DetermineComponentFrameRoot");)l++;for(;f<Y.length&&!Y[f].includes("DetermineComponentFrameRoot");)f++;if(l===V.length||f===Y.length)for(l=V.length-1,f=Y.length-1;1<=l&&0<=f&&V[l]!==Y[f];)f--;for(;1<=l&&0<=f;l--,f--)if(V[l]!==Y[f]){if(l!==1||f!==1)do if(l--,f--,0>f||V[l]!==Y[f]){var nt=`
`+V[l].replace(" at new "," at ");return n.displayName&&nt.includes("<anonymous>")&&(nt=nt.replace("<anonymous>",n.displayName)),nt}while(1<=l&&0<=f);break}}}finally{zr=!1,Error.prepareStackTrace=a}return(a=n?n.displayName||n.name:"")?Xn(a):""}function Br(n,r){switch(n.tag){case 26:case 27:case 5:return Xn(n.type);case 16:return Xn("Lazy");case 13:return n.child!==r&&r!==null?Xn("Suspense Fallback"):Xn("Suspense");case 19:return Xn("SuspenseList");case 0:case 15:return rr(n.type,!1);case 11:return rr(n.type.render,!1);case 1:return rr(n.type,!0);case 31:return Xn("Activity");default:return""}}function Mi(n){try{var r="",a=null;do r+=Br(n,a),a=n,n=n.return;while(n);return r}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var ye=Object.prototype.hasOwnProperty,xe=i.unstable_scheduleCallback,jn=i.unstable_cancelCallback,sr=i.unstable_shouldYield,Fr=i.unstable_requestPaint,qe=i.unstable_now,pi=i.unstable_getCurrentPriorityLevel,Hs=i.unstable_ImmediatePriority,En=i.unstable_UserBlockingPriority,Ln=i.unstable_NormalPriority,ja=i.unstable_LowPriority,La=i.unstable_IdlePriority,Pa=i.log,Ua=i.unstable_setDisableYieldValue,Tn=null,He=null;function mn(n){if(typeof Pa=="function"&&Ua(n),He&&typeof He.setStrictMode=="function")try{He.setStrictMode(Tn,n)}catch{}}var be=Math.clz32?Math.clz32:Ba,za=Math.log,qr=Math.LN2;function Ba(n){return n>>>=0,n===0?32:31-(za(n)/qr|0)|0}var xn=256,ki=262144,Ae=4194304;function Zn(n){var r=n&42;if(r!==0)return r;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function Jn(n,r,a){var l=n.pendingLanes;if(l===0)return 0;var f=0,d=n.suspendedLanes,b=n.pingedLanes;n=n.warmLanes;var w=l&134217727;return w!==0?(l=w&~d,l!==0?f=Zn(l):(b&=w,b!==0?f=Zn(b):a||(a=w&~n,a!==0&&(f=Zn(a))))):(w=l&~d,w!==0?f=Zn(w):b!==0?f=Zn(b):a||(a=l&~n,a!==0&&(f=Zn(a)))),f===0?0:r!==0&&r!==f&&(r&d)===0&&(d=f&-f,a=r&-r,d>=a||d===32&&(a&4194048)!==0)?r:f}function ut(n,r){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&r)===0}function bt(n,r){switch(n){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Vt(){var n=Ae;return Ae<<=1,(Ae&62914560)===0&&(Ae=4194304),n}function Et(n){for(var r=[],a=0;31>a;a++)r.push(n);return r}function It(n,r){n.pendingLanes|=r,r!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function ee(n,r,a,l,f,d){var b=n.pendingLanes;n.pendingLanes=a,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=a,n.entangledLanes&=a,n.errorRecoveryDisabledLanes&=a,n.shellSuspendCounter=0;var w=n.entanglements,V=n.expirationTimes,Y=n.hiddenUpdates;for(a=b&~a;0<a;){var nt=31-be(a),at=1<<nt;w[nt]=0,V[nt]=-1;var X=Y[nt];if(X!==null)for(Y[nt]=null,nt=0;nt<X.length;nt++){var tt=X[nt];tt!==null&&(tt.lane&=-536870913)}a&=~at}l!==0&&Mt(n,l,0),d!==0&&f===0&&n.tag!==0&&(n.suspendedLanes|=d&~(b&~r))}function Mt(n,r,a){n.pendingLanes|=r,n.suspendedLanes&=~r;var l=31-be(r);n.entangledLanes|=r,n.entanglements[l]=n.entanglements[l]|1073741824|a&261930}function gi(n,r){var a=n.entangledLanes|=r;for(n=n.entanglements;a;){var l=31-be(a),f=1<<l;f&r|n[l]&r&&(n[l]|=r),a&=~f}}function Wn(n,r){var a=r&-r;return a=(a&42)!==0?1:Pn(a),(a&(n.suspendedLanes|r))!==0?0:a}function Pn(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function Ze(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function Gs(){var n=P.p;return n!==0?n:(n=window.event,n===void 0?32:fv(n.type))}function An(n,r){var a=P.p;try{return P.p=n,r()}finally{P.p=a}}var pn=Math.random().toString(36).slice(2),zt="__reactFiber$"+pn,Oe="__reactProps$"+pn,Un="__reactContainer$"+pn,ar="__reactEvents$"+pn,or="__reactListeners$"+pn,re="__reactHandles$"+pn,yi="__reactResources$"+pn,gn="__reactMarker$"+pn;function Me(n){delete n[zt],delete n[Oe],delete n[ar],delete n[or],delete n[re]}function wn(n){var r=n[zt];if(r)return r;for(var a=n.parentNode;a;){if(r=a[Un]||a[zt]){if(a=r.alternate,r.child!==null||a!==null&&a.child!==null)for(n=X_(n);n!==null;){if(a=n[zt])return a;n=X_(n)}return r}n=a,a=n.parentNode}return null}function yn(n){if(n=n[zt]||n[Un]){var r=n.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return n}return null}function ke(n){var r=n.tag;if(r===5||r===26||r===27||r===6)return n.stateNode;throw Error(s(33))}function ti(n){var r=n[yi];return r||(r=n[yi]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function we(n){n[gn]=!0}var Hr=new Set,$s={};function ei(n,r){Vi(n,r),Vi(n+"Capture",r)}function Vi(n,r){for($s[n]=r,n=0;n<r.length;n++)Hr.add(r[n])}var il=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),rl={},sl={};function Qu(n){return ye.call(sl,n)?!0:ye.call(rl,n)?!1:il.test(n)?sl[n]=!0:(rl[n]=!0,!1)}function Fa(n,r,a){if(Qu(r))if(a===null)n.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":n.removeAttribute(r);return;case"boolean":var l=r.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){n.removeAttribute(r);return}}n.setAttribute(r,""+a)}}function zn(n,r,a){if(a===null)n.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(r);return}n.setAttribute(r,""+a)}}function Ve(n,r,a,l){if(l===null)n.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(a);return}n.setAttributeNS(r,a,""+l)}}function Ke(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Gr(n){var r=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function al(n,r,a){var l=Object.getOwnPropertyDescriptor(n.constructor.prototype,r);if(!n.hasOwnProperty(r)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var f=l.get,d=l.set;return Object.defineProperty(n,r,{configurable:!0,get:function(){return f.call(this)},set:function(b){a=""+b,d.call(this,b)}}),Object.defineProperty(n,r,{enumerable:l.enumerable}),{getValue:function(){return a},setValue:function(b){a=""+b},stopTracking:function(){n._valueTracker=null,delete n[r]}}}}function ae(n){if(!n._valueTracker){var r=Gr(n)?"checked":"value";n._valueTracker=al(n,r,""+n[r])}}function Ys(n){if(!n)return!1;var r=n._valueTracker;if(!r)return!0;var a=r.getValue(),l="";return n&&(l=Gr(n)?n.checked?"true":"false":n.value),n=l,n!==a?(r.setValue(n),!0):!1}function ji(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var Ks=/[\n"\\]/g;function Sn(n){return n.replace(Ks,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function qa(n,r,a,l,f,d,b,w){n.name="",b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?n.type=b:n.removeAttribute("type"),r!=null?b==="number"?(r===0&&n.value===""||n.value!=r)&&(n.value=""+Ke(r)):n.value!==""+Ke(r)&&(n.value=""+Ke(r)):b!=="submit"&&b!=="reset"||n.removeAttribute("value"),r!=null?ol(n,b,Ke(r)):a!=null?ol(n,b,Ke(a)):l!=null&&n.removeAttribute("value"),f==null&&d!=null&&(n.defaultChecked=!!d),f!=null&&(n.checked=f&&typeof f!="function"&&typeof f!="symbol"),w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?n.name=""+Ke(w):n.removeAttribute("name")}function Xu(n,r,a,l,f,d,b,w){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(n.type=d),r!=null||a!=null){if(!(d!=="submit"&&d!=="reset"||r!=null)){ae(n);return}a=a!=null?""+Ke(a):"",r=r!=null?""+Ke(r):a,w||r===n.value||(n.value=r),n.defaultValue=r}l=l??f,l=typeof l!="function"&&typeof l!="symbol"&&!!l,n.checked=w?n.checked:!!l,n.defaultChecked=!!l,b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(n.name=b),ae(n)}function ol(n,r,a){r==="number"&&ji(n.ownerDocument)===n||n.defaultValue===""+a||(n.defaultValue=""+a)}function $r(n,r,a,l){if(n=n.options,r){r={};for(var f=0;f<a.length;f++)r["$"+a[f]]=!0;for(a=0;a<n.length;a++)f=r.hasOwnProperty("$"+n[a].value),n[a].selected!==f&&(n[a].selected=f),f&&l&&(n[a].defaultSelected=!0)}else{for(a=""+Ke(a),r=null,f=0;f<n.length;f++){if(n[f].value===a){n[f].selected=!0,l&&(n[f].defaultSelected=!0);return}r!==null||n[f].disabled||(r=n[f])}r!==null&&(r.selected=!0)}}function Zu(n,r,a){if(r!=null&&(r=""+Ke(r),r!==n.value&&(n.value=r),a==null)){n.defaultValue!==r&&(n.defaultValue=r);return}n.defaultValue=a!=null?""+Ke(a):""}function Yr(n,r,a,l){if(r==null){if(l!=null){if(a!=null)throw Error(s(92));if(H(l)){if(1<l.length)throw Error(s(93));l=l[0]}a=l}a==null&&(a=""),r=a}a=Ke(r),n.defaultValue=a,l=n.textContent,l===a&&l!==""&&l!==null&&(n.value=l),ae(n)}function Nn(n,r){if(r){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=r;return}}n.textContent=r}var Ju=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ll(n,r,a){var l=r.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?n.setProperty(r,""):r==="float"?n.cssFloat="":n[r]="":l?n.setProperty(r,a):typeof a!="number"||a===0||Ju.has(r)?r==="float"?n.cssFloat=a:n[r]=(""+a).trim():n[r]=a+"px"}function ul(n,r,a){if(r!=null&&typeof r!="object")throw Error(s(62));if(n=n.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||r!=null&&r.hasOwnProperty(l)||(l.indexOf("--")===0?n.setProperty(l,""):l==="float"?n.cssFloat="":n[l]="");for(var f in r)l=r[f],r.hasOwnProperty(f)&&a[f]!==l&&ll(n,f,l)}else for(var d in r)r.hasOwnProperty(d)&&ll(n,d,r[d])}function Ha(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Wu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Kr=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ga(n){return Kr.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function _i(){}var cl=null;function ni(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Qr=null,Li=null;function Qs(n){var r=yn(n);if(r&&(n=r.stateNode)){var a=n[Oe]||null;t:switch(n=r.stateNode,r.type){case"input":if(qa(n,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),r=a.name,a.type==="radio"&&r!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Sn(""+r)+'"][type="radio"]'),r=0;r<a.length;r++){var l=a[r];if(l!==n&&l.form===n.form){var f=l[Oe]||null;if(!f)throw Error(s(90));qa(l,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(r=0;r<a.length;r++)l=a[r],l.form===n.form&&Ys(l)}break t;case"textarea":Zu(n,a.value,a.defaultValue);break t;case"select":r=a.value,r!=null&&$r(n,!!a.multiple,r,!1)}}}var $a=!1;function Xr(n,r,a){if($a)return n(r,a);$a=!0;try{var l=n(r);return l}finally{if($a=!1,(Qr!==null||Li!==null)&&($c(),Qr&&(r=Qr,n=Li,Li=Qr=null,Qs(r),n)))for(r=0;r<n.length;r++)Qs(n[r])}}function vi(n,r){var a=n.stateNode;if(a===null)return null;var l=a[Oe]||null;if(l===null)return null;a=l[r];t:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(n=n.type,l=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!l;break t;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(s(231,r,typeof a));return a}var ii=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Xs=!1;if(ii)try{var ue={};Object.defineProperty(ue,"passive",{get:function(){Xs=!0}}),window.addEventListener("test",ue,ue),window.removeEventListener("test",ue,ue)}catch{Xs=!1}var Pi=null,hl=null,Zs=null;function fl(){if(Zs)return Zs;var n,r=hl,a=r.length,l,f="value"in Pi?Pi.value:Pi.textContent,d=f.length;for(n=0;n<a&&r[n]===f[n];n++);var b=a-n;for(l=1;l<=b&&r[a-l]===f[d-l];l++);return Zs=f.slice(n,1<l?1-l:void 0)}function Js(n){var r=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&r===13&&(n=13)):n=r,n===10&&(n=13),32<=n||n===13?n:0}function lr(){return!0}function bi(){return!1}function Je(n){function r(a,l,f,d,b){this._reactName=a,this._targetInst=f,this.type=l,this.nativeEvent=d,this.target=b,this.currentTarget=null;for(var w in n)n.hasOwnProperty(w)&&(a=n[w],this[w]=a?a(d):d[w]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?lr:bi,this.isPropagationStopped=bi,this}return T(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=lr)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=lr)},persist:function(){},isPersistent:lr}),r}var ur={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ui=Je(ur),Zr=T({},ur,{view:0,detail:0}),dl=Je(Zr),Jr,Ya,zi,Ka=T({},Zr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Wr,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==zi&&(zi&&n.type==="mousemove"?(Jr=n.screenX-zi.screenX,Ya=n.screenY-zi.screenY):Ya=Jr=0,zi=n),Jr)},movementY:function(n){return"movementY"in n?n.movementY:Ya}}),ml=Je(Ka),Ws=T({},Ka,{dataTransfer:0}),tc=Je(Ws),ec=T({},Zr,{relatedTarget:0}),ta=Je(ec),pl=T({},ur,{animationName:0,elapsedTime:0,pseudoElement:0}),nc=Je(pl),Qa=T({},ur,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),ic=Je(Qa),rc=T({},ur,{data:0}),Bi=Je(rc),sc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ac={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},oc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function lc(n){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(n):(n=oc[n])?!!r[n]:!1}function Wr(){return lc}var _n=T({},Zr,{key:function(n){if(n.key){var r=sc[n.key]||n.key;if(r!=="Unidentified")return r}return n.type==="keypress"?(n=Js(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?ac[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Wr,charCode:function(n){return n.type==="keypress"?Js(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Js(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),uc=Je(_n),cc=T({},Ka,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),cr=Je(cc),h=T({},Zr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Wr}),y=Je(h),E=T({},ur,{propertyName:0,elapsedTime:0,pseudoElement:0}),N=Je(E),G=T({},Ka,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),W=Je(G),pt=T({},ur,{newState:0,oldState:0}),Pt=Je(pt),Ce=[9,13,27,32],ne=ii&&"CompositionEvent"in window,_e=null;ii&&"documentMode"in document&&(_e=document.documentMode);var ri=ii&&"TextEvent"in window&&!_e,Fi=ii&&(!ne||_e&&8<_e&&11>=_e),Ei=" ",Ti=!1;function ea(n,r){switch(n){case"keyup":return Ce.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Xa(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Za=!1;function Z1(n,r){switch(n){case"compositionend":return Xa(r);case"keypress":return r.which!==32?null:(Ti=!0,Ei);case"textInput":return n=r.data,n===Ei&&Ti?null:n;default:return null}}function J1(n,r){if(Za)return n==="compositionend"||!ne&&ea(n,r)?(n=fl(),Zs=hl=Pi=null,Za=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return Fi&&r.locale!=="ko"?null:r.data;default:return null}}var W1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wg(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r==="input"?!!W1[n.type]:r==="textarea"}function ty(n,r,a,l){Qr?Li?Li.push(l):Li=[l]:Qr=l,r=Wc(r,"onChange"),0<r.length&&(a=new Ui("onChange","change",null,a,l),n.push({event:a,listeners:r}))}var gl=null,yl=null;function tA(n){j_(n,0)}function hc(n){var r=ke(n);if(Ys(r))return n}function ey(n,r){if(n==="change")return r}var ny=!1;if(ii){var zf;if(ii){var Bf="oninput"in document;if(!Bf){var iy=document.createElement("div");iy.setAttribute("oninput","return;"),Bf=typeof iy.oninput=="function"}zf=Bf}else zf=!1;ny=zf&&(!document.documentMode||9<document.documentMode)}function ry(){gl&&(gl.detachEvent("onpropertychange",sy),yl=gl=null)}function sy(n){if(n.propertyName==="value"&&hc(yl)){var r=[];ty(r,yl,n,ni(n)),Xr(tA,r)}}function eA(n,r,a){n==="focusin"?(ry(),gl=r,yl=a,gl.attachEvent("onpropertychange",sy)):n==="focusout"&&ry()}function nA(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return hc(yl)}function iA(n,r){if(n==="click")return hc(r)}function rA(n,r){if(n==="input"||n==="change")return hc(r)}function sA(n,r){return n===r&&(n!==0||1/n===1/r)||n!==n&&r!==r}var Bn=typeof Object.is=="function"?Object.is:sA;function _l(n,r){if(Bn(n,r))return!0;if(typeof n!="object"||n===null||typeof r!="object"||r===null)return!1;var a=Object.keys(n),l=Object.keys(r);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var f=a[l];if(!ye.call(r,f)||!Bn(n[f],r[f]))return!1}return!0}function ay(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function oy(n,r){var a=ay(n);n=0;for(var l;a;){if(a.nodeType===3){if(l=n+a.textContent.length,n<=r&&l>=r)return{node:a,offset:r-n};n=l}t:{for(;a;){if(a.nextSibling){a=a.nextSibling;break t}a=a.parentNode}a=void 0}a=ay(a)}}function ly(n,r){return n&&r?n===r?!0:n&&n.nodeType===3?!1:r&&r.nodeType===3?ly(n,r.parentNode):"contains"in n?n.contains(r):n.compareDocumentPosition?!!(n.compareDocumentPosition(r)&16):!1:!1}function uy(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var r=ji(n.document);r instanceof n.HTMLIFrameElement;){try{var a=typeof r.contentWindow.location.href=="string"}catch{a=!1}if(a)n=r.contentWindow;else break;r=ji(n.document)}return r}function Ff(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r&&(r==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||r==="textarea"||n.contentEditable==="true")}var aA=ii&&"documentMode"in document&&11>=document.documentMode,Ja=null,qf=null,vl=null,Hf=!1;function cy(n,r,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Hf||Ja==null||Ja!==ji(l)||(l=Ja,"selectionStart"in l&&Ff(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),vl&&_l(vl,l)||(vl=l,l=Wc(qf,"onSelect"),0<l.length&&(r=new Ui("onSelect","select",null,r,a),n.push({event:r,listeners:l}),r.target=Ja)))}function na(n,r){var a={};return a[n.toLowerCase()]=r.toLowerCase(),a["Webkit"+n]="webkit"+r,a["Moz"+n]="moz"+r,a}var Wa={animationend:na("Animation","AnimationEnd"),animationiteration:na("Animation","AnimationIteration"),animationstart:na("Animation","AnimationStart"),transitionrun:na("Transition","TransitionRun"),transitionstart:na("Transition","TransitionStart"),transitioncancel:na("Transition","TransitionCancel"),transitionend:na("Transition","TransitionEnd")},Gf={},hy={};ii&&(hy=document.createElement("div").style,"AnimationEvent"in window||(delete Wa.animationend.animation,delete Wa.animationiteration.animation,delete Wa.animationstart.animation),"TransitionEvent"in window||delete Wa.transitionend.transition);function ia(n){if(Gf[n])return Gf[n];if(!Wa[n])return n;var r=Wa[n],a;for(a in r)if(r.hasOwnProperty(a)&&a in hy)return Gf[n]=r[a];return n}var fy=ia("animationend"),dy=ia("animationiteration"),my=ia("animationstart"),oA=ia("transitionrun"),lA=ia("transitionstart"),uA=ia("transitioncancel"),py=ia("transitionend"),gy=new Map,$f="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");$f.push("scrollEnd");function xi(n,r){gy.set(n,r),ei(r,[n])}var fc=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},si=[],to=0,Yf=0;function dc(){for(var n=to,r=Yf=to=0;r<n;){var a=si[r];si[r++]=null;var l=si[r];si[r++]=null;var f=si[r];si[r++]=null;var d=si[r];if(si[r++]=null,l!==null&&f!==null){var b=l.pending;b===null?f.next=f:(f.next=b.next,b.next=f),l.pending=f}d!==0&&yy(a,f,d)}}function mc(n,r,a,l){si[to++]=n,si[to++]=r,si[to++]=a,si[to++]=l,Yf|=l,n.lanes|=l,n=n.alternate,n!==null&&(n.lanes|=l)}function Kf(n,r,a,l){return mc(n,r,a,l),pc(n)}function ra(n,r){return mc(n,null,null,r),pc(n)}function yy(n,r,a){n.lanes|=a;var l=n.alternate;l!==null&&(l.lanes|=a);for(var f=!1,d=n.return;d!==null;)d.childLanes|=a,l=d.alternate,l!==null&&(l.childLanes|=a),d.tag===22&&(n=d.stateNode,n===null||n._visibility&1||(f=!0)),n=d,d=d.return;return n.tag===3?(d=n.stateNode,f&&r!==null&&(f=31-be(a),n=d.hiddenUpdates,l=n[f],l===null?n[f]=[r]:l.push(r),r.lane=a|536870912),d):null}function pc(n){if(50<Bl)throw Bl=0,im=null,Error(s(185));for(var r=n.return;r!==null;)n=r,r=n.return;return n.tag===3?n.stateNode:null}var eo={};function cA(n,r,a,l){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Fn(n,r,a,l){return new cA(n,r,a,l)}function Qf(n){return n=n.prototype,!(!n||!n.isReactComponent)}function hr(n,r){var a=n.alternate;return a===null?(a=Fn(n.tag,r,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=r,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&65011712,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,r=n.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a.refCleanup=n.refCleanup,a}function _y(n,r){n.flags&=65011714;var a=n.alternate;return a===null?(n.childLanes=0,n.lanes=r,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=a.childLanes,n.lanes=a.lanes,n.child=a.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=a.memoizedProps,n.memoizedState=a.memoizedState,n.updateQueue=a.updateQueue,n.type=a.type,r=a.dependencies,n.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),n}function gc(n,r,a,l,f,d){var b=0;if(l=n,typeof n=="function")Qf(n)&&(b=1);else if(typeof n=="string")b=pw(n,a,mt.current)?26:n==="html"||n==="head"||n==="body"?27:5;else t:switch(n){case R:return n=Fn(31,a,r,f),n.elementType=R,n.lanes=d,n;case F:return sa(a.children,f,d,r);case Z:b=8,f|=24;break;case ot:return n=Fn(12,a,r,f|2),n.elementType=ot,n.lanes=d,n;case dt:return n=Fn(13,a,r,f),n.elementType=dt,n.lanes=d,n;case rt:return n=Fn(19,a,r,f),n.elementType=rt,n.lanes=d,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case J:b=10;break t;case L:b=9;break t;case et:b=11;break t;case O:b=14;break t;case C:b=16,l=null;break t}b=29,a=Error(s(130,n===null?"null":typeof n,"")),l=null}return r=Fn(b,a,r,f),r.elementType=n,r.type=l,r.lanes=d,r}function sa(n,r,a,l){return n=Fn(7,n,l,r),n.lanes=a,n}function Xf(n,r,a){return n=Fn(6,n,null,r),n.lanes=a,n}function vy(n){var r=Fn(18,null,null,0);return r.stateNode=n,r}function Zf(n,r,a){return r=Fn(4,n.children!==null?n.children:[],n.key,r),r.lanes=a,r.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},r}var by=new WeakMap;function ai(n,r){if(typeof n=="object"&&n!==null){var a=by.get(n);return a!==void 0?a:(r={value:n,source:r,stack:Mi(r)},by.set(n,r),r)}return{value:n,source:r,stack:Mi(r)}}var no=[],io=0,yc=null,bl=0,oi=[],li=0,ts=null,qi=1,Hi="";function fr(n,r){no[io++]=bl,no[io++]=yc,yc=n,bl=r}function Ey(n,r,a){oi[li++]=qi,oi[li++]=Hi,oi[li++]=ts,ts=n;var l=qi;n=Hi;var f=32-be(l)-1;l&=~(1<<f),a+=1;var d=32-be(r)+f;if(30<d){var b=f-f%5;d=(l&(1<<b)-1).toString(32),l>>=b,f-=b,qi=1<<32-be(r)+f|a<<f|l,Hi=d+n}else qi=1<<d|a<<f|l,Hi=n}function Jf(n){n.return!==null&&(fr(n,1),Ey(n,1,0))}function Wf(n){for(;n===yc;)yc=no[--io],no[io]=null,bl=no[--io],no[io]=null;for(;n===ts;)ts=oi[--li],oi[li]=null,Hi=oi[--li],oi[li]=null,qi=oi[--li],oi[li]=null}function Ty(n,r){oi[li++]=qi,oi[li++]=Hi,oi[li++]=ts,qi=r.id,Hi=r.overflow,ts=n}var We=null,me=null,Qt=!1,es=null,ui=!1,td=Error(s(519));function ns(n){var r=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw El(ai(r,n)),td}function xy(n){var r=n.stateNode,a=n.type,l=n.memoizedProps;switch(r[zt]=n,r[Oe]=l,a){case"dialog":qt("cancel",r),qt("close",r);break;case"iframe":case"object":case"embed":qt("load",r);break;case"video":case"audio":for(a=0;a<ql.length;a++)qt(ql[a],r);break;case"source":qt("error",r);break;case"img":case"image":case"link":qt("error",r),qt("load",r);break;case"details":qt("toggle",r);break;case"input":qt("invalid",r),Xu(r,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":qt("invalid",r);break;case"textarea":qt("invalid",r),Yr(r,l.value,l.defaultValue,l.children)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||r.textContent===""+a||l.suppressHydrationWarning===!0||z_(r.textContent,a)?(l.popover!=null&&(qt("beforetoggle",r),qt("toggle",r)),l.onScroll!=null&&qt("scroll",r),l.onScrollEnd!=null&&qt("scrollend",r),l.onClick!=null&&(r.onclick=_i),r=!0):r=!1,r||ns(n,!0)}function Ay(n){for(We=n.return;We;)switch(We.tag){case 5:case 31:case 13:ui=!1;return;case 27:case 3:ui=!0;return;default:We=We.return}}function ro(n){if(n!==We)return!1;if(!Qt)return Ay(n),Qt=!0,!1;var r=n.tag,a;if((a=r!==3&&r!==27)&&((a=r===5)&&(a=n.type,a=!(a!=="form"&&a!=="button")||_m(n.type,n.memoizedProps)),a=!a),a&&me&&ns(n),Ay(n),r===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(317));me=Q_(n)}else if(r===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(317));me=Q_(n)}else r===27?(r=me,gs(n.type)?(n=xm,xm=null,me=n):me=r):me=We?hi(n.stateNode.nextSibling):null;return!0}function aa(){me=We=null,Qt=!1}function ed(){var n=es;return n!==null&&(Dn===null?Dn=n:Dn.push.apply(Dn,n),es=null),n}function El(n){es===null?es=[n]:es.push(n)}var nd=D(null),oa=null,dr=null;function is(n,r,a){ht(nd,r._currentValue),r._currentValue=a}function mr(n){n._currentValue=nd.current,Q(nd)}function id(n,r,a){for(;n!==null;){var l=n.alternate;if((n.childLanes&r)!==r?(n.childLanes|=r,l!==null&&(l.childLanes|=r)):l!==null&&(l.childLanes&r)!==r&&(l.childLanes|=r),n===a)break;n=n.return}}function rd(n,r,a,l){var f=n.child;for(f!==null&&(f.return=n);f!==null;){var d=f.dependencies;if(d!==null){var b=f.child;d=d.firstContext;t:for(;d!==null;){var w=d;d=f;for(var V=0;V<r.length;V++)if(w.context===r[V]){d.lanes|=a,w=d.alternate,w!==null&&(w.lanes|=a),id(d.return,a,n),l||(b=null);break t}d=w.next}}else if(f.tag===18){if(b=f.return,b===null)throw Error(s(341));b.lanes|=a,d=b.alternate,d!==null&&(d.lanes|=a),id(b,a,n),b=null}else b=f.child;if(b!==null)b.return=f;else for(b=f;b!==null;){if(b===n){b=null;break}if(f=b.sibling,f!==null){f.return=b.return,b=f;break}b=b.return}f=b}}function so(n,r,a,l){n=null;for(var f=r,d=!1;f!==null;){if(!d){if((f.flags&524288)!==0)d=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var b=f.alternate;if(b===null)throw Error(s(387));if(b=b.memoizedProps,b!==null){var w=f.type;Bn(f.pendingProps.value,b.value)||(n!==null?n.push(w):n=[w])}}else if(f===Rt.current){if(b=f.alternate,b===null)throw Error(s(387));b.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(n!==null?n.push(Kl):n=[Kl])}f=f.return}n!==null&&rd(r,n,a,l),r.flags|=262144}function _c(n){for(n=n.firstContext;n!==null;){if(!Bn(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function la(n){oa=n,dr=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function tn(n){return wy(oa,n)}function vc(n,r){return oa===null&&la(n),wy(n,r)}function wy(n,r){var a=r._currentValue;if(r={context:r,memoizedValue:a,next:null},dr===null){if(n===null)throw Error(s(308));dr=r,n.dependencies={lanes:0,firstContext:r},n.flags|=524288}else dr=dr.next=r;return a}var hA=typeof AbortController<"u"?AbortController:function(){var n=[],r=this.signal={aborted:!1,addEventListener:function(a,l){n.push(l)}};this.abort=function(){r.aborted=!0,n.forEach(function(a){return a()})}},fA=i.unstable_scheduleCallback,dA=i.unstable_NormalPriority,je={$$typeof:J,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function sd(){return{controller:new hA,data:new Map,refCount:0}}function Tl(n){n.refCount--,n.refCount===0&&fA(dA,function(){n.controller.abort()})}var xl=null,ad=0,ao=0,oo=null;function mA(n,r){if(xl===null){var a=xl=[];ad=0,ao=um(),oo={status:"pending",value:void 0,then:function(l){a.push(l)}}}return ad++,r.then(Sy,Sy),r}function Sy(){if(--ad===0&&xl!==null){oo!==null&&(oo.status="fulfilled");var n=xl;xl=null,ao=0,oo=null;for(var r=0;r<n.length;r++)(0,n[r])()}}function pA(n,r){var a=[],l={status:"pending",value:null,reason:null,then:function(f){a.push(f)}};return n.then(function(){l.status="fulfilled",l.value=r;for(var f=0;f<a.length;f++)(0,a[f])(r)},function(f){for(l.status="rejected",l.reason=f,f=0;f<a.length;f++)(0,a[f])(void 0)}),l}var Ny=M.S;M.S=function(n,r){c_=qe(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&mA(n,r),Ny!==null&&Ny(n,r)};var ua=D(null);function od(){var n=ua.current;return n!==null?n:de.pooledCache}function bc(n,r){r===null?ht(ua,ua.current):ht(ua,r.pool)}function Cy(){var n=od();return n===null?null:{parent:je._currentValue,pool:n}}var lo=Error(s(460)),ld=Error(s(474)),Ec=Error(s(542)),Tc={then:function(){}};function Ry(n){return n=n.status,n==="fulfilled"||n==="rejected"}function Iy(n,r,a){switch(a=n[a],a===void 0?n.push(r):a!==r&&(r.then(_i,_i),r=a),r.status){case"fulfilled":return r.value;case"rejected":throw n=r.reason,Oy(n),n;default:if(typeof r.status=="string")r.then(_i,_i);else{if(n=de,n!==null&&100<n.shellSuspendCounter)throw Error(s(482));n=r,n.status="pending",n.then(function(l){if(r.status==="pending"){var f=r;f.status="fulfilled",f.value=l}},function(l){if(r.status==="pending"){var f=r;f.status="rejected",f.reason=l}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw n=r.reason,Oy(n),n}throw ha=r,lo}}function ca(n){try{var r=n._init;return r(n._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(ha=a,lo):a}}var ha=null;function Dy(){if(ha===null)throw Error(s(459));var n=ha;return ha=null,n}function Oy(n){if(n===lo||n===Ec)throw Error(s(483))}var uo=null,Al=0;function xc(n){var r=Al;return Al+=1,uo===null&&(uo=[]),Iy(uo,n,r)}function wl(n,r){r=r.props.ref,n.ref=r!==void 0?r:null}function Ac(n,r){throw r.$$typeof===x?Error(s(525)):(n=Object.prototype.toString.call(r),Error(s(31,n==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":n)))}function My(n){function r(B,z){if(n){var $=B.deletions;$===null?(B.deletions=[z],B.flags|=16):$.push(z)}}function a(B,z){if(!n)return null;for(;z!==null;)r(B,z),z=z.sibling;return null}function l(B){for(var z=new Map;B!==null;)B.key!==null?z.set(B.key,B):z.set(B.index,B),B=B.sibling;return z}function f(B,z){return B=hr(B,z),B.index=0,B.sibling=null,B}function d(B,z,$){return B.index=$,n?($=B.alternate,$!==null?($=$.index,$<z?(B.flags|=67108866,z):$):(B.flags|=67108866,z)):(B.flags|=1048576,z)}function b(B){return n&&B.alternate===null&&(B.flags|=67108866),B}function w(B,z,$,st){return z===null||z.tag!==6?(z=Xf($,B.mode,st),z.return=B,z):(z=f(z,$),z.return=B,z)}function V(B,z,$,st){var wt=$.type;return wt===F?nt(B,z,$.props.children,st,$.key):z!==null&&(z.elementType===wt||typeof wt=="object"&&wt!==null&&wt.$$typeof===C&&ca(wt)===z.type)?(z=f(z,$.props),wl(z,$),z.return=B,z):(z=gc($.type,$.key,$.props,null,B.mode,st),wl(z,$),z.return=B,z)}function Y(B,z,$,st){return z===null||z.tag!==4||z.stateNode.containerInfo!==$.containerInfo||z.stateNode.implementation!==$.implementation?(z=Zf($,B.mode,st),z.return=B,z):(z=f(z,$.children||[]),z.return=B,z)}function nt(B,z,$,st,wt){return z===null||z.tag!==7?(z=sa($,B.mode,st,wt),z.return=B,z):(z=f(z,$),z.return=B,z)}function at(B,z,$){if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return z=Xf(""+z,B.mode,$),z.return=B,z;if(typeof z=="object"&&z!==null){switch(z.$$typeof){case S:return $=gc(z.type,z.key,z.props,null,B.mode,$),wl($,z),$.return=B,$;case U:return z=Zf(z,B.mode,$),z.return=B,z;case C:return z=ca(z),at(B,z,$)}if(H(z)||I(z))return z=sa(z,B.mode,$,null),z.return=B,z;if(typeof z.then=="function")return at(B,xc(z),$);if(z.$$typeof===J)return at(B,vc(B,z),$);Ac(B,z)}return null}function X(B,z,$,st){var wt=z!==null?z.key:null;if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return wt!==null?null:w(B,z,""+$,st);if(typeof $=="object"&&$!==null){switch($.$$typeof){case S:return $.key===wt?V(B,z,$,st):null;case U:return $.key===wt?Y(B,z,$,st):null;case C:return $=ca($),X(B,z,$,st)}if(H($)||I($))return wt!==null?null:nt(B,z,$,st,null);if(typeof $.then=="function")return X(B,z,xc($),st);if($.$$typeof===J)return X(B,z,vc(B,$),st);Ac(B,$)}return null}function tt(B,z,$,st,wt){if(typeof st=="string"&&st!==""||typeof st=="number"||typeof st=="bigint")return B=B.get($)||null,w(z,B,""+st,wt);if(typeof st=="object"&&st!==null){switch(st.$$typeof){case S:return B=B.get(st.key===null?$:st.key)||null,V(z,B,st,wt);case U:return B=B.get(st.key===null?$:st.key)||null,Y(z,B,st,wt);case C:return st=ca(st),tt(B,z,$,st,wt)}if(H(st)||I(st))return B=B.get($)||null,nt(z,B,st,wt,null);if(typeof st.then=="function")return tt(B,z,$,xc(st),wt);if(st.$$typeof===J)return tt(B,z,$,vc(z,st),wt);Ac(z,st)}return null}function vt(B,z,$,st){for(var wt=null,Wt=null,Tt=z,Bt=z=0,Gt=null;Tt!==null&&Bt<$.length;Bt++){Tt.index>Bt?(Gt=Tt,Tt=null):Gt=Tt.sibling;var te=X(B,Tt,$[Bt],st);if(te===null){Tt===null&&(Tt=Gt);break}n&&Tt&&te.alternate===null&&r(B,Tt),z=d(te,z,Bt),Wt===null?wt=te:Wt.sibling=te,Wt=te,Tt=Gt}if(Bt===$.length)return a(B,Tt),Qt&&fr(B,Bt),wt;if(Tt===null){for(;Bt<$.length;Bt++)Tt=at(B,$[Bt],st),Tt!==null&&(z=d(Tt,z,Bt),Wt===null?wt=Tt:Wt.sibling=Tt,Wt=Tt);return Qt&&fr(B,Bt),wt}for(Tt=l(Tt);Bt<$.length;Bt++)Gt=tt(Tt,B,Bt,$[Bt],st),Gt!==null&&(n&&Gt.alternate!==null&&Tt.delete(Gt.key===null?Bt:Gt.key),z=d(Gt,z,Bt),Wt===null?wt=Gt:Wt.sibling=Gt,Wt=Gt);return n&&Tt.forEach(function(Es){return r(B,Es)}),Qt&&fr(B,Bt),wt}function Ct(B,z,$,st){if($==null)throw Error(s(151));for(var wt=null,Wt=null,Tt=z,Bt=z=0,Gt=null,te=$.next();Tt!==null&&!te.done;Bt++,te=$.next()){Tt.index>Bt?(Gt=Tt,Tt=null):Gt=Tt.sibling;var Es=X(B,Tt,te.value,st);if(Es===null){Tt===null&&(Tt=Gt);break}n&&Tt&&Es.alternate===null&&r(B,Tt),z=d(Es,z,Bt),Wt===null?wt=Es:Wt.sibling=Es,Wt=Es,Tt=Gt}if(te.done)return a(B,Tt),Qt&&fr(B,Bt),wt;if(Tt===null){for(;!te.done;Bt++,te=$.next())te=at(B,te.value,st),te!==null&&(z=d(te,z,Bt),Wt===null?wt=te:Wt.sibling=te,Wt=te);return Qt&&fr(B,Bt),wt}for(Tt=l(Tt);!te.done;Bt++,te=$.next())te=tt(Tt,B,Bt,te.value,st),te!==null&&(n&&te.alternate!==null&&Tt.delete(te.key===null?Bt:te.key),z=d(te,z,Bt),Wt===null?wt=te:Wt.sibling=te,Wt=te);return n&&Tt.forEach(function(Sw){return r(B,Sw)}),Qt&&fr(B,Bt),wt}function fe(B,z,$,st){if(typeof $=="object"&&$!==null&&$.type===F&&$.key===null&&($=$.props.children),typeof $=="object"&&$!==null){switch($.$$typeof){case S:t:{for(var wt=$.key;z!==null;){if(z.key===wt){if(wt=$.type,wt===F){if(z.tag===7){a(B,z.sibling),st=f(z,$.props.children),st.return=B,B=st;break t}}else if(z.elementType===wt||typeof wt=="object"&&wt!==null&&wt.$$typeof===C&&ca(wt)===z.type){a(B,z.sibling),st=f(z,$.props),wl(st,$),st.return=B,B=st;break t}a(B,z);break}else r(B,z);z=z.sibling}$.type===F?(st=sa($.props.children,B.mode,st,$.key),st.return=B,B=st):(st=gc($.type,$.key,$.props,null,B.mode,st),wl(st,$),st.return=B,B=st)}return b(B);case U:t:{for(wt=$.key;z!==null;){if(z.key===wt)if(z.tag===4&&z.stateNode.containerInfo===$.containerInfo&&z.stateNode.implementation===$.implementation){a(B,z.sibling),st=f(z,$.children||[]),st.return=B,B=st;break t}else{a(B,z);break}else r(B,z);z=z.sibling}st=Zf($,B.mode,st),st.return=B,B=st}return b(B);case C:return $=ca($),fe(B,z,$,st)}if(H($))return vt(B,z,$,st);if(I($)){if(wt=I($),typeof wt!="function")throw Error(s(150));return $=wt.call($),Ct(B,z,$,st)}if(typeof $.then=="function")return fe(B,z,xc($),st);if($.$$typeof===J)return fe(B,z,vc(B,$),st);Ac(B,$)}return typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint"?($=""+$,z!==null&&z.tag===6?(a(B,z.sibling),st=f(z,$),st.return=B,B=st):(a(B,z),st=Xf($,B.mode,st),st.return=B,B=st),b(B)):a(B,z)}return function(B,z,$,st){try{Al=0;var wt=fe(B,z,$,st);return uo=null,wt}catch(Tt){if(Tt===lo||Tt===Ec)throw Tt;var Wt=Fn(29,Tt,null,B.mode);return Wt.lanes=st,Wt.return=B,Wt}finally{}}}var fa=My(!0),ky=My(!1),rs=!1;function ud(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function cd(n,r){n=n.updateQueue,r.updateQueue===n&&(r.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function ss(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function as(n,r,a){var l=n.updateQueue;if(l===null)return null;if(l=l.shared,(ie&2)!==0){var f=l.pending;return f===null?r.next=r:(r.next=f.next,f.next=r),l.pending=r,r=pc(n),yy(n,null,a),r}return mc(n,l,r,a),pc(n)}function Sl(n,r,a){if(r=r.updateQueue,r!==null&&(r=r.shared,(a&4194048)!==0)){var l=r.lanes;l&=n.pendingLanes,a|=l,r.lanes=a,gi(n,a)}}function hd(n,r){var a=n.updateQueue,l=n.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var f=null,d=null;if(a=a.firstBaseUpdate,a!==null){do{var b={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};d===null?f=d=b:d=d.next=b,a=a.next}while(a!==null);d===null?f=d=r:d=d.next=r}else f=d=r;a={baseState:l.baseState,firstBaseUpdate:f,lastBaseUpdate:d,shared:l.shared,callbacks:l.callbacks},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=r:n.next=r,a.lastBaseUpdate=r}var fd=!1;function Nl(){if(fd){var n=oo;if(n!==null)throw n}}function Cl(n,r,a,l){fd=!1;var f=n.updateQueue;rs=!1;var d=f.firstBaseUpdate,b=f.lastBaseUpdate,w=f.shared.pending;if(w!==null){f.shared.pending=null;var V=w,Y=V.next;V.next=null,b===null?d=Y:b.next=Y,b=V;var nt=n.alternate;nt!==null&&(nt=nt.updateQueue,w=nt.lastBaseUpdate,w!==b&&(w===null?nt.firstBaseUpdate=Y:w.next=Y,nt.lastBaseUpdate=V))}if(d!==null){var at=f.baseState;b=0,nt=Y=V=null,w=d;do{var X=w.lane&-536870913,tt=X!==w.lane;if(tt?(Ht&X)===X:(l&X)===X){X!==0&&X===ao&&(fd=!0),nt!==null&&(nt=nt.next={lane:0,tag:w.tag,payload:w.payload,callback:null,next:null});t:{var vt=n,Ct=w;X=r;var fe=a;switch(Ct.tag){case 1:if(vt=Ct.payload,typeof vt=="function"){at=vt.call(fe,at,X);break t}at=vt;break t;case 3:vt.flags=vt.flags&-65537|128;case 0:if(vt=Ct.payload,X=typeof vt=="function"?vt.call(fe,at,X):vt,X==null)break t;at=T({},at,X);break t;case 2:rs=!0}}X=w.callback,X!==null&&(n.flags|=64,tt&&(n.flags|=8192),tt=f.callbacks,tt===null?f.callbacks=[X]:tt.push(X))}else tt={lane:X,tag:w.tag,payload:w.payload,callback:w.callback,next:null},nt===null?(Y=nt=tt,V=at):nt=nt.next=tt,b|=X;if(w=w.next,w===null){if(w=f.shared.pending,w===null)break;tt=w,w=tt.next,tt.next=null,f.lastBaseUpdate=tt,f.shared.pending=null}}while(!0);nt===null&&(V=at),f.baseState=V,f.firstBaseUpdate=Y,f.lastBaseUpdate=nt,d===null&&(f.shared.lanes=0),hs|=b,n.lanes=b,n.memoizedState=at}}function Vy(n,r){if(typeof n!="function")throw Error(s(191,n));n.call(r)}function jy(n,r){var a=n.callbacks;if(a!==null)for(n.callbacks=null,n=0;n<a.length;n++)Vy(a[n],r)}var co=D(null),wc=D(0);function Ly(n,r){n=xr,ht(wc,n),ht(co,r),xr=n|r.baseLanes}function dd(){ht(wc,xr),ht(co,co.current)}function md(){xr=wc.current,Q(co),Q(wc)}var qn=D(null),ci=null;function os(n){var r=n.alternate;ht(Re,Re.current&1),ht(qn,n),ci===null&&(r===null||co.current!==null||r.memoizedState!==null)&&(ci=n)}function pd(n){ht(Re,Re.current),ht(qn,n),ci===null&&(ci=n)}function Py(n){n.tag===22?(ht(Re,Re.current),ht(qn,n),ci===null&&(ci=n)):ls()}function ls(){ht(Re,Re.current),ht(qn,qn.current)}function Hn(n){Q(qn),ci===n&&(ci=null),Q(Re)}var Re=D(0);function Sc(n){for(var r=n;r!==null;){if(r.tag===13){var a=r.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||Em(a)||Tm(a)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var pr=0,Ut=null,ce=null,Le=null,Nc=!1,ho=!1,da=!1,Cc=0,Rl=0,fo=null,gA=0;function Se(){throw Error(s(321))}function gd(n,r){if(r===null)return!1;for(var a=0;a<r.length&&a<n.length;a++)if(!Bn(n[a],r[a]))return!1;return!0}function yd(n,r,a,l,f,d){return pr=d,Ut=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,M.H=n===null||n.memoizedState===null?E0:Od,da=!1,d=a(l,f),da=!1,ho&&(d=zy(r,a,l,f)),Uy(n),d}function Uy(n){M.H=Ol;var r=ce!==null&&ce.next!==null;if(pr=0,Le=ce=Ut=null,Nc=!1,Rl=0,fo=null,r)throw Error(s(300));n===null||Pe||(n=n.dependencies,n!==null&&_c(n)&&(Pe=!0))}function zy(n,r,a,l){Ut=n;var f=0;do{if(ho&&(fo=null),Rl=0,ho=!1,25<=f)throw Error(s(301));if(f+=1,Le=ce=null,n.updateQueue!=null){var d=n.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}M.H=T0,d=r(a,l)}while(ho);return d}function yA(){var n=M.H,r=n.useState()[0];return r=typeof r.then=="function"?Il(r):r,n=n.useState()[0],(ce!==null?ce.memoizedState:null)!==n&&(Ut.flags|=1024),r}function _d(){var n=Cc!==0;return Cc=0,n}function vd(n,r,a){r.updateQueue=n.updateQueue,r.flags&=-2053,n.lanes&=~a}function bd(n){if(Nc){for(n=n.memoizedState;n!==null;){var r=n.queue;r!==null&&(r.pending=null),n=n.next}Nc=!1}pr=0,Le=ce=Ut=null,ho=!1,Rl=Cc=0,fo=null}function vn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Le===null?Ut.memoizedState=Le=n:Le=Le.next=n,Le}function Ie(){if(ce===null){var n=Ut.alternate;n=n!==null?n.memoizedState:null}else n=ce.next;var r=Le===null?Ut.memoizedState:Le.next;if(r!==null)Le=r,ce=n;else{if(n===null)throw Ut.alternate===null?Error(s(467)):Error(s(310));ce=n,n={memoizedState:ce.memoizedState,baseState:ce.baseState,baseQueue:ce.baseQueue,queue:ce.queue,next:null},Le===null?Ut.memoizedState=Le=n:Le=Le.next=n}return Le}function Rc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Il(n){var r=Rl;return Rl+=1,fo===null&&(fo=[]),n=Iy(fo,n,r),r=Ut,(Le===null?r.memoizedState:Le.next)===null&&(r=r.alternate,M.H=r===null||r.memoizedState===null?E0:Od),n}function Ic(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return Il(n);if(n.$$typeof===J)return tn(n)}throw Error(s(438,String(n)))}function Ed(n){var r=null,a=Ut.updateQueue;if(a!==null&&(r=a.memoCache),r==null){var l=Ut.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(r={data:l.data.map(function(f){return f.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),a===null&&(a=Rc(),Ut.updateQueue=a),a.memoCache=r,a=r.data[r.index],a===void 0)for(a=r.data[r.index]=Array(n),l=0;l<n;l++)a[l]=j;return r.index++,a}function gr(n,r){return typeof r=="function"?r(n):r}function Dc(n){var r=Ie();return Td(r,ce,n)}function Td(n,r,a){var l=n.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=a;var f=n.baseQueue,d=l.pending;if(d!==null){if(f!==null){var b=f.next;f.next=d.next,d.next=b}r.baseQueue=f=d,l.pending=null}if(d=n.baseState,f===null)n.memoizedState=d;else{r=f.next;var w=b=null,V=null,Y=r,nt=!1;do{var at=Y.lane&-536870913;if(at!==Y.lane?(Ht&at)===at:(pr&at)===at){var X=Y.revertLane;if(X===0)V!==null&&(V=V.next={lane:0,revertLane:0,gesture:null,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null}),at===ao&&(nt=!0);else if((pr&X)===X){Y=Y.next,X===ao&&(nt=!0);continue}else at={lane:0,revertLane:Y.revertLane,gesture:null,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},V===null?(w=V=at,b=d):V=V.next=at,Ut.lanes|=X,hs|=X;at=Y.action,da&&a(d,at),d=Y.hasEagerState?Y.eagerState:a(d,at)}else X={lane:at,revertLane:Y.revertLane,gesture:Y.gesture,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},V===null?(w=V=X,b=d):V=V.next=X,Ut.lanes|=at,hs|=at;Y=Y.next}while(Y!==null&&Y!==r);if(V===null?b=d:V.next=w,!Bn(d,n.memoizedState)&&(Pe=!0,nt&&(a=oo,a!==null)))throw a;n.memoizedState=d,n.baseState=b,n.baseQueue=V,l.lastRenderedState=d}return f===null&&(l.lanes=0),[n.memoizedState,l.dispatch]}function xd(n){var r=Ie(),a=r.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=n;var l=a.dispatch,f=a.pending,d=r.memoizedState;if(f!==null){a.pending=null;var b=f=f.next;do d=n(d,b.action),b=b.next;while(b!==f);Bn(d,r.memoizedState)||(Pe=!0),r.memoizedState=d,r.baseQueue===null&&(r.baseState=d),a.lastRenderedState=d}return[d,l]}function By(n,r,a){var l=Ut,f=Ie(),d=Qt;if(d){if(a===void 0)throw Error(s(407));a=a()}else a=r();var b=!Bn((ce||f).memoizedState,a);if(b&&(f.memoizedState=a,Pe=!0),f=f.queue,Sd(Hy.bind(null,l,f,n),[n]),f.getSnapshot!==r||b||Le!==null&&Le.memoizedState.tag&1){if(l.flags|=2048,mo(9,{destroy:void 0},qy.bind(null,l,f,a,r),null),de===null)throw Error(s(349));d||(pr&127)!==0||Fy(l,r,a)}return a}function Fy(n,r,a){n.flags|=16384,n={getSnapshot:r,value:a},r=Ut.updateQueue,r===null?(r=Rc(),Ut.updateQueue=r,r.stores=[n]):(a=r.stores,a===null?r.stores=[n]:a.push(n))}function qy(n,r,a,l){r.value=a,r.getSnapshot=l,Gy(r)&&$y(n)}function Hy(n,r,a){return a(function(){Gy(r)&&$y(n)})}function Gy(n){var r=n.getSnapshot;n=n.value;try{var a=r();return!Bn(n,a)}catch{return!0}}function $y(n){var r=ra(n,2);r!==null&&On(r,n,2)}function Ad(n){var r=vn();if(typeof n=="function"){var a=n;if(n=a(),da){mn(!0);try{a()}finally{mn(!1)}}}return r.memoizedState=r.baseState=n,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:gr,lastRenderedState:n},r}function Yy(n,r,a,l){return n.baseState=a,Td(n,ce,typeof l=="function"?l:gr)}function _A(n,r,a,l,f){if(kc(n))throw Error(s(485));if(n=r.action,n!==null){var d={payload:f,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(b){d.listeners.push(b)}};M.T!==null?a(!0):d.isTransition=!1,l(d),a=r.pending,a===null?(d.next=r.pending=d,Ky(r,d)):(d.next=a.next,r.pending=a.next=d)}}function Ky(n,r){var a=r.action,l=r.payload,f=n.state;if(r.isTransition){var d=M.T,b={};M.T=b;try{var w=a(f,l),V=M.S;V!==null&&V(b,w),Qy(n,r,w)}catch(Y){wd(n,r,Y)}finally{d!==null&&b.types!==null&&(d.types=b.types),M.T=d}}else try{d=a(f,l),Qy(n,r,d)}catch(Y){wd(n,r,Y)}}function Qy(n,r,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){Xy(n,r,l)},function(l){return wd(n,r,l)}):Xy(n,r,a)}function Xy(n,r,a){r.status="fulfilled",r.value=a,Zy(r),n.state=a,r=n.pending,r!==null&&(a=r.next,a===r?n.pending=null:(a=a.next,r.next=a,Ky(n,a)))}function wd(n,r,a){var l=n.pending;if(n.pending=null,l!==null){l=l.next;do r.status="rejected",r.reason=a,Zy(r),r=r.next;while(r!==l)}n.action=null}function Zy(n){n=n.listeners;for(var r=0;r<n.length;r++)(0,n[r])()}function Jy(n,r){return r}function Wy(n,r){if(Qt){var a=de.formState;if(a!==null){t:{var l=Ut;if(Qt){if(me){e:{for(var f=me,d=ui;f.nodeType!==8;){if(!d){f=null;break e}if(f=hi(f.nextSibling),f===null){f=null;break e}}d=f.data,f=d==="F!"||d==="F"?f:null}if(f){me=hi(f.nextSibling),l=f.data==="F!";break t}}ns(l)}l=!1}l&&(r=a[0])}}return a=vn(),a.memoizedState=a.baseState=r,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Jy,lastRenderedState:r},a.queue=l,a=_0.bind(null,Ut,l),l.dispatch=a,l=Ad(!1),d=Dd.bind(null,Ut,!1,l.queue),l=vn(),f={state:r,dispatch:null,action:n,pending:null},l.queue=f,a=_A.bind(null,Ut,f,d,a),f.dispatch=a,l.memoizedState=n,[r,a,!1]}function t0(n){var r=Ie();return e0(r,ce,n)}function e0(n,r,a){if(r=Td(n,r,Jy)[0],n=Dc(gr)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var l=Il(r)}catch(b){throw b===lo?Ec:b}else l=r;r=Ie();var f=r.queue,d=f.dispatch;return a!==r.memoizedState&&(Ut.flags|=2048,mo(9,{destroy:void 0},vA.bind(null,f,a),null)),[l,d,n]}function vA(n,r){n.action=r}function n0(n){var r=Ie(),a=ce;if(a!==null)return e0(r,a,n);Ie(),r=r.memoizedState,a=Ie();var l=a.queue.dispatch;return a.memoizedState=n,[r,l,!1]}function mo(n,r,a,l){return n={tag:n,create:a,deps:l,inst:r,next:null},r=Ut.updateQueue,r===null&&(r=Rc(),Ut.updateQueue=r),a=r.lastEffect,a===null?r.lastEffect=n.next=n:(l=a.next,a.next=n,n.next=l,r.lastEffect=n),n}function i0(){return Ie().memoizedState}function Oc(n,r,a,l){var f=vn();Ut.flags|=n,f.memoizedState=mo(1|r,{destroy:void 0},a,l===void 0?null:l)}function Mc(n,r,a,l){var f=Ie();l=l===void 0?null:l;var d=f.memoizedState.inst;ce!==null&&l!==null&&gd(l,ce.memoizedState.deps)?f.memoizedState=mo(r,d,a,l):(Ut.flags|=n,f.memoizedState=mo(1|r,d,a,l))}function r0(n,r){Oc(8390656,8,n,r)}function Sd(n,r){Mc(2048,8,n,r)}function bA(n){Ut.flags|=4;var r=Ut.updateQueue;if(r===null)r=Rc(),Ut.updateQueue=r,r.events=[n];else{var a=r.events;a===null?r.events=[n]:a.push(n)}}function s0(n){var r=Ie().memoizedState;return bA({ref:r,nextImpl:n}),function(){if((ie&2)!==0)throw Error(s(440));return r.impl.apply(void 0,arguments)}}function a0(n,r){return Mc(4,2,n,r)}function o0(n,r){return Mc(4,4,n,r)}function l0(n,r){if(typeof r=="function"){n=n();var a=r(n);return function(){typeof a=="function"?a():r(null)}}if(r!=null)return n=n(),r.current=n,function(){r.current=null}}function u0(n,r,a){a=a!=null?a.concat([n]):null,Mc(4,4,l0.bind(null,r,n),a)}function Nd(){}function c0(n,r){var a=Ie();r=r===void 0?null:r;var l=a.memoizedState;return r!==null&&gd(r,l[1])?l[0]:(a.memoizedState=[n,r],n)}function h0(n,r){var a=Ie();r=r===void 0?null:r;var l=a.memoizedState;if(r!==null&&gd(r,l[1]))return l[0];if(l=n(),da){mn(!0);try{n()}finally{mn(!1)}}return a.memoizedState=[l,r],l}function Cd(n,r,a){return a===void 0||(pr&1073741824)!==0&&(Ht&261930)===0?n.memoizedState=r:(n.memoizedState=a,n=f_(),Ut.lanes|=n,hs|=n,a)}function f0(n,r,a,l){return Bn(a,r)?a:co.current!==null?(n=Cd(n,a,l),Bn(n,r)||(Pe=!0),n):(pr&42)===0||(pr&1073741824)!==0&&(Ht&261930)===0?(Pe=!0,n.memoizedState=a):(n=f_(),Ut.lanes|=n,hs|=n,r)}function d0(n,r,a,l,f){var d=P.p;P.p=d!==0&&8>d?d:8;var b=M.T,w={};M.T=w,Dd(n,!1,r,a);try{var V=f(),Y=M.S;if(Y!==null&&Y(w,V),V!==null&&typeof V=="object"&&typeof V.then=="function"){var nt=pA(V,l);Dl(n,r,nt,Yn(n))}else Dl(n,r,l,Yn(n))}catch(at){Dl(n,r,{then:function(){},status:"rejected",reason:at},Yn())}finally{P.p=d,b!==null&&w.types!==null&&(b.types=w.types),M.T=b}}function EA(){}function Rd(n,r,a,l){if(n.tag!==5)throw Error(s(476));var f=m0(n).queue;d0(n,f,r,K,a===null?EA:function(){return p0(n),a(l)})}function m0(n){var r=n.memoizedState;if(r!==null)return r;r={memoizedState:K,baseState:K,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:gr,lastRenderedState:K},next:null};var a={};return r.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:gr,lastRenderedState:a},next:null},n.memoizedState=r,n=n.alternate,n!==null&&(n.memoizedState=r),r}function p0(n){var r=m0(n);r.next===null&&(r=n.alternate.memoizedState),Dl(n,r.next.queue,{},Yn())}function Id(){return tn(Kl)}function g0(){return Ie().memoizedState}function y0(){return Ie().memoizedState}function TA(n){for(var r=n.return;r!==null;){switch(r.tag){case 24:case 3:var a=Yn();n=ss(a);var l=as(r,n,a);l!==null&&(On(l,r,a),Sl(l,r,a)),r={cache:sd()},n.payload=r;return}r=r.return}}function xA(n,r,a){var l=Yn();a={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},kc(n)?v0(r,a):(a=Kf(n,r,a,l),a!==null&&(On(a,n,l),b0(a,r,l)))}function _0(n,r,a){var l=Yn();Dl(n,r,a,l)}function Dl(n,r,a,l){var f={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(kc(n))v0(r,f);else{var d=n.alternate;if(n.lanes===0&&(d===null||d.lanes===0)&&(d=r.lastRenderedReducer,d!==null))try{var b=r.lastRenderedState,w=d(b,a);if(f.hasEagerState=!0,f.eagerState=w,Bn(w,b))return mc(n,r,f,0),de===null&&dc(),!1}catch{}finally{}if(a=Kf(n,r,f,l),a!==null)return On(a,n,l),b0(a,r,l),!0}return!1}function Dd(n,r,a,l){if(l={lane:2,revertLane:um(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},kc(n)){if(r)throw Error(s(479))}else r=Kf(n,a,l,2),r!==null&&On(r,n,2)}function kc(n){var r=n.alternate;return n===Ut||r!==null&&r===Ut}function v0(n,r){ho=Nc=!0;var a=n.pending;a===null?r.next=r:(r.next=a.next,a.next=r),n.pending=r}function b0(n,r,a){if((a&4194048)!==0){var l=r.lanes;l&=n.pendingLanes,a|=l,r.lanes=a,gi(n,a)}}var Ol={readContext:tn,use:Ic,useCallback:Se,useContext:Se,useEffect:Se,useImperativeHandle:Se,useLayoutEffect:Se,useInsertionEffect:Se,useMemo:Se,useReducer:Se,useRef:Se,useState:Se,useDebugValue:Se,useDeferredValue:Se,useTransition:Se,useSyncExternalStore:Se,useId:Se,useHostTransitionStatus:Se,useFormState:Se,useActionState:Se,useOptimistic:Se,useMemoCache:Se,useCacheRefresh:Se};Ol.useEffectEvent=Se;var E0={readContext:tn,use:Ic,useCallback:function(n,r){return vn().memoizedState=[n,r===void 0?null:r],n},useContext:tn,useEffect:r0,useImperativeHandle:function(n,r,a){a=a!=null?a.concat([n]):null,Oc(4194308,4,l0.bind(null,r,n),a)},useLayoutEffect:function(n,r){return Oc(4194308,4,n,r)},useInsertionEffect:function(n,r){Oc(4,2,n,r)},useMemo:function(n,r){var a=vn();r=r===void 0?null:r;var l=n();if(da){mn(!0);try{n()}finally{mn(!1)}}return a.memoizedState=[l,r],l},useReducer:function(n,r,a){var l=vn();if(a!==void 0){var f=a(r);if(da){mn(!0);try{a(r)}finally{mn(!1)}}}else f=r;return l.memoizedState=l.baseState=f,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:f},l.queue=n,n=n.dispatch=xA.bind(null,Ut,n),[l.memoizedState,n]},useRef:function(n){var r=vn();return n={current:n},r.memoizedState=n},useState:function(n){n=Ad(n);var r=n.queue,a=_0.bind(null,Ut,r);return r.dispatch=a,[n.memoizedState,a]},useDebugValue:Nd,useDeferredValue:function(n,r){var a=vn();return Cd(a,n,r)},useTransition:function(){var n=Ad(!1);return n=d0.bind(null,Ut,n.queue,!0,!1),vn().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,r,a){var l=Ut,f=vn();if(Qt){if(a===void 0)throw Error(s(407));a=a()}else{if(a=r(),de===null)throw Error(s(349));(Ht&127)!==0||Fy(l,r,a)}f.memoizedState=a;var d={value:a,getSnapshot:r};return f.queue=d,r0(Hy.bind(null,l,d,n),[n]),l.flags|=2048,mo(9,{destroy:void 0},qy.bind(null,l,d,a,r),null),a},useId:function(){var n=vn(),r=de.identifierPrefix;if(Qt){var a=Hi,l=qi;a=(l&~(1<<32-be(l)-1)).toString(32)+a,r="_"+r+"R_"+a,a=Cc++,0<a&&(r+="H"+a.toString(32)),r+="_"}else a=gA++,r="_"+r+"r_"+a.toString(32)+"_";return n.memoizedState=r},useHostTransitionStatus:Id,useFormState:Wy,useActionState:Wy,useOptimistic:function(n){var r=vn();r.memoizedState=r.baseState=n;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=a,r=Dd.bind(null,Ut,!0,a),a.dispatch=r,[n,r]},useMemoCache:Ed,useCacheRefresh:function(){return vn().memoizedState=TA.bind(null,Ut)},useEffectEvent:function(n){var r=vn(),a={impl:n};return r.memoizedState=a,function(){if((ie&2)!==0)throw Error(s(440));return a.impl.apply(void 0,arguments)}}},Od={readContext:tn,use:Ic,useCallback:c0,useContext:tn,useEffect:Sd,useImperativeHandle:u0,useInsertionEffect:a0,useLayoutEffect:o0,useMemo:h0,useReducer:Dc,useRef:i0,useState:function(){return Dc(gr)},useDebugValue:Nd,useDeferredValue:function(n,r){var a=Ie();return f0(a,ce.memoizedState,n,r)},useTransition:function(){var n=Dc(gr)[0],r=Ie().memoizedState;return[typeof n=="boolean"?n:Il(n),r]},useSyncExternalStore:By,useId:g0,useHostTransitionStatus:Id,useFormState:t0,useActionState:t0,useOptimistic:function(n,r){var a=Ie();return Yy(a,ce,n,r)},useMemoCache:Ed,useCacheRefresh:y0};Od.useEffectEvent=s0;var T0={readContext:tn,use:Ic,useCallback:c0,useContext:tn,useEffect:Sd,useImperativeHandle:u0,useInsertionEffect:a0,useLayoutEffect:o0,useMemo:h0,useReducer:xd,useRef:i0,useState:function(){return xd(gr)},useDebugValue:Nd,useDeferredValue:function(n,r){var a=Ie();return ce===null?Cd(a,n,r):f0(a,ce.memoizedState,n,r)},useTransition:function(){var n=xd(gr)[0],r=Ie().memoizedState;return[typeof n=="boolean"?n:Il(n),r]},useSyncExternalStore:By,useId:g0,useHostTransitionStatus:Id,useFormState:n0,useActionState:n0,useOptimistic:function(n,r){var a=Ie();return ce!==null?Yy(a,ce,n,r):(a.baseState=n,[n,a.queue.dispatch])},useMemoCache:Ed,useCacheRefresh:y0};T0.useEffectEvent=s0;function Md(n,r,a,l){r=n.memoizedState,a=a(l,r),a=a==null?r:T({},r,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var kd={enqueueSetState:function(n,r,a){n=n._reactInternals;var l=Yn(),f=ss(l);f.payload=r,a!=null&&(f.callback=a),r=as(n,f,l),r!==null&&(On(r,n,l),Sl(r,n,l))},enqueueReplaceState:function(n,r,a){n=n._reactInternals;var l=Yn(),f=ss(l);f.tag=1,f.payload=r,a!=null&&(f.callback=a),r=as(n,f,l),r!==null&&(On(r,n,l),Sl(r,n,l))},enqueueForceUpdate:function(n,r){n=n._reactInternals;var a=Yn(),l=ss(a);l.tag=2,r!=null&&(l.callback=r),r=as(n,l,a),r!==null&&(On(r,n,a),Sl(r,n,a))}};function x0(n,r,a,l,f,d,b){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(l,d,b):r.prototype&&r.prototype.isPureReactComponent?!_l(a,l)||!_l(f,d):!0}function A0(n,r,a,l){n=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(a,l),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(a,l),r.state!==n&&kd.enqueueReplaceState(r,r.state,null)}function ma(n,r){var a=r;if("ref"in r){a={};for(var l in r)l!=="ref"&&(a[l]=r[l])}if(n=n.defaultProps){a===r&&(a=T({},a));for(var f in n)a[f]===void 0&&(a[f]=n[f])}return a}function w0(n){fc(n)}function S0(n){console.error(n)}function N0(n){fc(n)}function Vc(n,r){try{var a=n.onUncaughtError;a(r.value,{componentStack:r.stack})}catch(l){setTimeout(function(){throw l})}}function C0(n,r,a){try{var l=n.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function Vd(n,r,a){return a=ss(a),a.tag=3,a.payload={element:null},a.callback=function(){Vc(n,r)},a}function R0(n){return n=ss(n),n.tag=3,n}function I0(n,r,a,l){var f=a.type.getDerivedStateFromError;if(typeof f=="function"){var d=l.value;n.payload=function(){return f(d)},n.callback=function(){C0(r,a,l)}}var b=a.stateNode;b!==null&&typeof b.componentDidCatch=="function"&&(n.callback=function(){C0(r,a,l),typeof f!="function"&&(fs===null?fs=new Set([this]):fs.add(this));var w=l.stack;this.componentDidCatch(l.value,{componentStack:w!==null?w:""})})}function AA(n,r,a,l,f){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(r=a.alternate,r!==null&&so(r,a,f,!0),a=qn.current,a!==null){switch(a.tag){case 31:case 13:return ci===null?Yc():a.alternate===null&&Ne===0&&(Ne=3),a.flags&=-257,a.flags|=65536,a.lanes=f,l===Tc?a.flags|=16384:(r=a.updateQueue,r===null?a.updateQueue=new Set([l]):r.add(l),am(n,l,f)),!1;case 22:return a.flags|=65536,l===Tc?a.flags|=16384:(r=a.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=r):(a=r.retryQueue,a===null?r.retryQueue=new Set([l]):a.add(l)),am(n,l,f)),!1}throw Error(s(435,a.tag))}return am(n,l,f),Yc(),!1}if(Qt)return r=qn.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=f,l!==td&&(n=Error(s(422),{cause:l}),El(ai(n,a)))):(l!==td&&(r=Error(s(423),{cause:l}),El(ai(r,a))),n=n.current.alternate,n.flags|=65536,f&=-f,n.lanes|=f,l=ai(l,a),f=Vd(n.stateNode,l,f),hd(n,f),Ne!==4&&(Ne=2)),!1;var d=Error(s(520),{cause:l});if(d=ai(d,a),zl===null?zl=[d]:zl.push(d),Ne!==4&&(Ne=2),r===null)return!0;l=ai(l,a),a=r;do{switch(a.tag){case 3:return a.flags|=65536,n=f&-f,a.lanes|=n,n=Vd(a.stateNode,l,n),hd(a,n),!1;case 1:if(r=a.type,d=a.stateNode,(a.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(fs===null||!fs.has(d))))return a.flags|=65536,f&=-f,a.lanes|=f,f=R0(f),I0(f,n,a,l),hd(a,f),!1}a=a.return}while(a!==null);return!1}var jd=Error(s(461)),Pe=!1;function en(n,r,a,l){r.child=n===null?ky(r,null,a,l):fa(r,n.child,a,l)}function D0(n,r,a,l,f){a=a.render;var d=r.ref;if("ref"in l){var b={};for(var w in l)w!=="ref"&&(b[w]=l[w])}else b=l;return la(r),l=yd(n,r,a,b,d,f),w=_d(),n!==null&&!Pe?(vd(n,r,f),yr(n,r,f)):(Qt&&w&&Jf(r),r.flags|=1,en(n,r,l,f),r.child)}function O0(n,r,a,l,f){if(n===null){var d=a.type;return typeof d=="function"&&!Qf(d)&&d.defaultProps===void 0&&a.compare===null?(r.tag=15,r.type=d,M0(n,r,d,l,f)):(n=gc(a.type,null,l,r,r.mode,f),n.ref=r.ref,n.return=r,r.child=n)}if(d=n.child,!Hd(n,f)){var b=d.memoizedProps;if(a=a.compare,a=a!==null?a:_l,a(b,l)&&n.ref===r.ref)return yr(n,r,f)}return r.flags|=1,n=hr(d,l),n.ref=r.ref,n.return=r,r.child=n}function M0(n,r,a,l,f){if(n!==null){var d=n.memoizedProps;if(_l(d,l)&&n.ref===r.ref)if(Pe=!1,r.pendingProps=l=d,Hd(n,f))(n.flags&131072)!==0&&(Pe=!0);else return r.lanes=n.lanes,yr(n,r,f)}return Ld(n,r,a,l,f)}function k0(n,r,a,l){var f=l.children,d=n!==null?n.memoizedState:null;if(n===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((r.flags&128)!==0){if(d=d!==null?d.baseLanes|a:a,n!==null){for(l=r.child=n.child,f=0;l!==null;)f=f|l.lanes|l.childLanes,l=l.sibling;l=f&~d}else l=0,r.child=null;return V0(n,r,d,a,l)}if((a&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},n!==null&&bc(r,d!==null?d.cachePool:null),d!==null?Ly(r,d):dd(),Py(r);else return l=r.lanes=536870912,V0(n,r,d!==null?d.baseLanes|a:a,a,l)}else d!==null?(bc(r,d.cachePool),Ly(r,d),ls(),r.memoizedState=null):(n!==null&&bc(r,null),dd(),ls());return en(n,r,f,a),r.child}function Ml(n,r){return n!==null&&n.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function V0(n,r,a,l,f){var d=od();return d=d===null?null:{parent:je._currentValue,pool:d},r.memoizedState={baseLanes:a,cachePool:d},n!==null&&bc(r,null),dd(),Py(r),n!==null&&so(n,r,l,!0),r.childLanes=f,null}function jc(n,r){return r=Pc({mode:r.mode,children:r.children},n.mode),r.ref=n.ref,n.child=r,r.return=n,r}function j0(n,r,a){return fa(r,n.child,null,a),n=jc(r,r.pendingProps),n.flags|=2,Hn(r),r.memoizedState=null,n}function wA(n,r,a){var l=r.pendingProps,f=(r.flags&128)!==0;if(r.flags&=-129,n===null){if(Qt){if(l.mode==="hidden")return n=jc(r,l),r.lanes=536870912,Ml(null,n);if(pd(r),(n=me)?(n=K_(n,ui),n=n!==null&&n.data==="&"?n:null,n!==null&&(r.memoizedState={dehydrated:n,treeContext:ts!==null?{id:qi,overflow:Hi}:null,retryLane:536870912,hydrationErrors:null},a=vy(n),a.return=r,r.child=a,We=r,me=null)):n=null,n===null)throw ns(r);return r.lanes=536870912,null}return jc(r,l)}var d=n.memoizedState;if(d!==null){var b=d.dehydrated;if(pd(r),f)if(r.flags&256)r.flags&=-257,r=j0(n,r,a);else if(r.memoizedState!==null)r.child=n.child,r.flags|=128,r=null;else throw Error(s(558));else if(Pe||so(n,r,a,!1),f=(a&n.childLanes)!==0,Pe||f){if(l=de,l!==null&&(b=Wn(l,a),b!==0&&b!==d.retryLane))throw d.retryLane=b,ra(n,b),On(l,n,b),jd;Yc(),r=j0(n,r,a)}else n=d.treeContext,me=hi(b.nextSibling),We=r,Qt=!0,es=null,ui=!1,n!==null&&Ty(r,n),r=jc(r,l),r.flags|=4096;return r}return n=hr(n.child,{mode:l.mode,children:l.children}),n.ref=r.ref,r.child=n,n.return=r,n}function Lc(n,r){var a=r.ref;if(a===null)n!==null&&n.ref!==null&&(r.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(n===null||n.ref!==a)&&(r.flags|=4194816)}}function Ld(n,r,a,l,f){return la(r),a=yd(n,r,a,l,void 0,f),l=_d(),n!==null&&!Pe?(vd(n,r,f),yr(n,r,f)):(Qt&&l&&Jf(r),r.flags|=1,en(n,r,a,f),r.child)}function L0(n,r,a,l,f,d){return la(r),r.updateQueue=null,a=zy(r,l,a,f),Uy(n),l=_d(),n!==null&&!Pe?(vd(n,r,d),yr(n,r,d)):(Qt&&l&&Jf(r),r.flags|=1,en(n,r,a,d),r.child)}function P0(n,r,a,l,f){if(la(r),r.stateNode===null){var d=eo,b=a.contextType;typeof b=="object"&&b!==null&&(d=tn(b)),d=new a(l,d),r.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=kd,r.stateNode=d,d._reactInternals=r,d=r.stateNode,d.props=l,d.state=r.memoizedState,d.refs={},ud(r),b=a.contextType,d.context=typeof b=="object"&&b!==null?tn(b):eo,d.state=r.memoizedState,b=a.getDerivedStateFromProps,typeof b=="function"&&(Md(r,a,b,l),d.state=r.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(b=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),b!==d.state&&kd.enqueueReplaceState(d,d.state,null),Cl(r,l,d,f),Nl(),d.state=r.memoizedState),typeof d.componentDidMount=="function"&&(r.flags|=4194308),l=!0}else if(n===null){d=r.stateNode;var w=r.memoizedProps,V=ma(a,w);d.props=V;var Y=d.context,nt=a.contextType;b=eo,typeof nt=="object"&&nt!==null&&(b=tn(nt));var at=a.getDerivedStateFromProps;nt=typeof at=="function"||typeof d.getSnapshotBeforeUpdate=="function",w=r.pendingProps!==w,nt||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(w||Y!==b)&&A0(r,d,l,b),rs=!1;var X=r.memoizedState;d.state=X,Cl(r,l,d,f),Nl(),Y=r.memoizedState,w||X!==Y||rs?(typeof at=="function"&&(Md(r,a,at,l),Y=r.memoizedState),(V=rs||x0(r,a,V,l,X,Y,b))?(nt||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(r.flags|=4194308)):(typeof d.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=l,r.memoizedState=Y),d.props=l,d.state=Y,d.context=b,l=V):(typeof d.componentDidMount=="function"&&(r.flags|=4194308),l=!1)}else{d=r.stateNode,cd(n,r),b=r.memoizedProps,nt=ma(a,b),d.props=nt,at=r.pendingProps,X=d.context,Y=a.contextType,V=eo,typeof Y=="object"&&Y!==null&&(V=tn(Y)),w=a.getDerivedStateFromProps,(Y=typeof w=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(b!==at||X!==V)&&A0(r,d,l,V),rs=!1,X=r.memoizedState,d.state=X,Cl(r,l,d,f),Nl();var tt=r.memoizedState;b!==at||X!==tt||rs||n!==null&&n.dependencies!==null&&_c(n.dependencies)?(typeof w=="function"&&(Md(r,a,w,l),tt=r.memoizedState),(nt=rs||x0(r,a,nt,l,X,tt,V)||n!==null&&n.dependencies!==null&&_c(n.dependencies))?(Y||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(l,tt,V),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(l,tt,V)),typeof d.componentDidUpdate=="function"&&(r.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof d.componentDidUpdate!="function"||b===n.memoizedProps&&X===n.memoizedState||(r.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||b===n.memoizedProps&&X===n.memoizedState||(r.flags|=1024),r.memoizedProps=l,r.memoizedState=tt),d.props=l,d.state=tt,d.context=V,l=nt):(typeof d.componentDidUpdate!="function"||b===n.memoizedProps&&X===n.memoizedState||(r.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||b===n.memoizedProps&&X===n.memoizedState||(r.flags|=1024),l=!1)}return d=l,Lc(n,r),l=(r.flags&128)!==0,d||l?(d=r.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:d.render(),r.flags|=1,n!==null&&l?(r.child=fa(r,n.child,null,f),r.child=fa(r,null,a,f)):en(n,r,a,f),r.memoizedState=d.state,n=r.child):n=yr(n,r,f),n}function U0(n,r,a,l){return aa(),r.flags|=256,en(n,r,a,l),r.child}var Pd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ud(n){return{baseLanes:n,cachePool:Cy()}}function zd(n,r,a){return n=n!==null?n.childLanes&~a:0,r&&(n|=$n),n}function z0(n,r,a){var l=r.pendingProps,f=!1,d=(r.flags&128)!==0,b;if((b=d)||(b=n!==null&&n.memoizedState===null?!1:(Re.current&2)!==0),b&&(f=!0,r.flags&=-129),b=(r.flags&32)!==0,r.flags&=-33,n===null){if(Qt){if(f?os(r):ls(),(n=me)?(n=K_(n,ui),n=n!==null&&n.data!=="&"?n:null,n!==null&&(r.memoizedState={dehydrated:n,treeContext:ts!==null?{id:qi,overflow:Hi}:null,retryLane:536870912,hydrationErrors:null},a=vy(n),a.return=r,r.child=a,We=r,me=null)):n=null,n===null)throw ns(r);return Tm(n)?r.lanes=32:r.lanes=536870912,null}var w=l.children;return l=l.fallback,f?(ls(),f=r.mode,w=Pc({mode:"hidden",children:w},f),l=sa(l,f,a,null),w.return=r,l.return=r,w.sibling=l,r.child=w,l=r.child,l.memoizedState=Ud(a),l.childLanes=zd(n,b,a),r.memoizedState=Pd,Ml(null,l)):(os(r),Bd(r,w))}var V=n.memoizedState;if(V!==null&&(w=V.dehydrated,w!==null)){if(d)r.flags&256?(os(r),r.flags&=-257,r=Fd(n,r,a)):r.memoizedState!==null?(ls(),r.child=n.child,r.flags|=128,r=null):(ls(),w=l.fallback,f=r.mode,l=Pc({mode:"visible",children:l.children},f),w=sa(w,f,a,null),w.flags|=2,l.return=r,w.return=r,l.sibling=w,r.child=l,fa(r,n.child,null,a),l=r.child,l.memoizedState=Ud(a),l.childLanes=zd(n,b,a),r.memoizedState=Pd,r=Ml(null,l));else if(os(r),Tm(w)){if(b=w.nextSibling&&w.nextSibling.dataset,b)var Y=b.dgst;b=Y,l=Error(s(419)),l.stack="",l.digest=b,El({value:l,source:null,stack:null}),r=Fd(n,r,a)}else if(Pe||so(n,r,a,!1),b=(a&n.childLanes)!==0,Pe||b){if(b=de,b!==null&&(l=Wn(b,a),l!==0&&l!==V.retryLane))throw V.retryLane=l,ra(n,l),On(b,n,l),jd;Em(w)||Yc(),r=Fd(n,r,a)}else Em(w)?(r.flags|=192,r.child=n.child,r=null):(n=V.treeContext,me=hi(w.nextSibling),We=r,Qt=!0,es=null,ui=!1,n!==null&&Ty(r,n),r=Bd(r,l.children),r.flags|=4096);return r}return f?(ls(),w=l.fallback,f=r.mode,V=n.child,Y=V.sibling,l=hr(V,{mode:"hidden",children:l.children}),l.subtreeFlags=V.subtreeFlags&65011712,Y!==null?w=hr(Y,w):(w=sa(w,f,a,null),w.flags|=2),w.return=r,l.return=r,l.sibling=w,r.child=l,Ml(null,l),l=r.child,w=n.child.memoizedState,w===null?w=Ud(a):(f=w.cachePool,f!==null?(V=je._currentValue,f=f.parent!==V?{parent:V,pool:V}:f):f=Cy(),w={baseLanes:w.baseLanes|a,cachePool:f}),l.memoizedState=w,l.childLanes=zd(n,b,a),r.memoizedState=Pd,Ml(n.child,l)):(os(r),a=n.child,n=a.sibling,a=hr(a,{mode:"visible",children:l.children}),a.return=r,a.sibling=null,n!==null&&(b=r.deletions,b===null?(r.deletions=[n],r.flags|=16):b.push(n)),r.child=a,r.memoizedState=null,a)}function Bd(n,r){return r=Pc({mode:"visible",children:r},n.mode),r.return=n,n.child=r}function Pc(n,r){return n=Fn(22,n,null,r),n.lanes=0,n}function Fd(n,r,a){return fa(r,n.child,null,a),n=Bd(r,r.pendingProps.children),n.flags|=2,r.memoizedState=null,n}function B0(n,r,a){n.lanes|=r;var l=n.alternate;l!==null&&(l.lanes|=r),id(n.return,r,a)}function qd(n,r,a,l,f,d){var b=n.memoizedState;b===null?n.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:f,treeForkCount:d}:(b.isBackwards=r,b.rendering=null,b.renderingStartTime=0,b.last=l,b.tail=a,b.tailMode=f,b.treeForkCount=d)}function F0(n,r,a){var l=r.pendingProps,f=l.revealOrder,d=l.tail;l=l.children;var b=Re.current,w=(b&2)!==0;if(w?(b=b&1|2,r.flags|=128):b&=1,ht(Re,b),en(n,r,l,a),l=Qt?bl:0,!w&&n!==null&&(n.flags&128)!==0)t:for(n=r.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&B0(n,a,r);else if(n.tag===19)B0(n,a,r);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===r)break t;for(;n.sibling===null;){if(n.return===null||n.return===r)break t;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(f){case"forwards":for(a=r.child,f=null;a!==null;)n=a.alternate,n!==null&&Sc(n)===null&&(f=a),a=a.sibling;a=f,a===null?(f=r.child,r.child=null):(f=a.sibling,a.sibling=null),qd(r,!1,f,a,d,l);break;case"backwards":case"unstable_legacy-backwards":for(a=null,f=r.child,r.child=null;f!==null;){if(n=f.alternate,n!==null&&Sc(n)===null){r.child=f;break}n=f.sibling,f.sibling=a,a=f,f=n}qd(r,!0,a,null,d,l);break;case"together":qd(r,!1,null,null,void 0,l);break;default:r.memoizedState=null}return r.child}function yr(n,r,a){if(n!==null&&(r.dependencies=n.dependencies),hs|=r.lanes,(a&r.childLanes)===0)if(n!==null){if(so(n,r,a,!1),(a&r.childLanes)===0)return null}else return null;if(n!==null&&r.child!==n.child)throw Error(s(153));if(r.child!==null){for(n=r.child,a=hr(n,n.pendingProps),r.child=a,a.return=r;n.sibling!==null;)n=n.sibling,a=a.sibling=hr(n,n.pendingProps),a.return=r;a.sibling=null}return r.child}function Hd(n,r){return(n.lanes&r)!==0?!0:(n=n.dependencies,!!(n!==null&&_c(n)))}function SA(n,r,a){switch(r.tag){case 3:Jt(r,r.stateNode.containerInfo),is(r,je,n.memoizedState.cache),aa();break;case 27:case 5:ln(r);break;case 4:Jt(r,r.stateNode.containerInfo);break;case 10:is(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,pd(r),null;break;case 13:var l=r.memoizedState;if(l!==null)return l.dehydrated!==null?(os(r),r.flags|=128,null):(a&r.child.childLanes)!==0?z0(n,r,a):(os(r),n=yr(n,r,a),n!==null?n.sibling:null);os(r);break;case 19:var f=(n.flags&128)!==0;if(l=(a&r.childLanes)!==0,l||(so(n,r,a,!1),l=(a&r.childLanes)!==0),f){if(l)return F0(n,r,a);r.flags|=128}if(f=r.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),ht(Re,Re.current),l)break;return null;case 22:return r.lanes=0,k0(n,r,a,r.pendingProps);case 24:is(r,je,n.memoizedState.cache)}return yr(n,r,a)}function q0(n,r,a){if(n!==null)if(n.memoizedProps!==r.pendingProps)Pe=!0;else{if(!Hd(n,a)&&(r.flags&128)===0)return Pe=!1,SA(n,r,a);Pe=(n.flags&131072)!==0}else Pe=!1,Qt&&(r.flags&1048576)!==0&&Ey(r,bl,r.index);switch(r.lanes=0,r.tag){case 16:t:{var l=r.pendingProps;if(n=ca(r.elementType),r.type=n,typeof n=="function")Qf(n)?(l=ma(n,l),r.tag=1,r=P0(null,r,n,l,a)):(r.tag=0,r=Ld(null,r,n,l,a));else{if(n!=null){var f=n.$$typeof;if(f===et){r.tag=11,r=D0(null,r,n,l,a);break t}else if(f===O){r.tag=14,r=O0(null,r,n,l,a);break t}}throw r=ct(n)||n,Error(s(306,r,""))}}return r;case 0:return Ld(n,r,r.type,r.pendingProps,a);case 1:return l=r.type,f=ma(l,r.pendingProps),P0(n,r,l,f,a);case 3:t:{if(Jt(r,r.stateNode.containerInfo),n===null)throw Error(s(387));l=r.pendingProps;var d=r.memoizedState;f=d.element,cd(n,r),Cl(r,l,null,a);var b=r.memoizedState;if(l=b.cache,is(r,je,l),l!==d.cache&&rd(r,[je],a,!0),Nl(),l=b.element,d.isDehydrated)if(d={element:l,isDehydrated:!1,cache:b.cache},r.updateQueue.baseState=d,r.memoizedState=d,r.flags&256){r=U0(n,r,l,a);break t}else if(l!==f){f=ai(Error(s(424)),r),El(f),r=U0(n,r,l,a);break t}else{switch(n=r.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(me=hi(n.firstChild),We=r,Qt=!0,es=null,ui=!0,a=ky(r,null,l,a),r.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(aa(),l===f){r=yr(n,r,a);break t}en(n,r,l,a)}r=r.child}return r;case 26:return Lc(n,r),n===null?(a=tv(r.type,null,r.pendingProps,null))?r.memoizedState=a:Qt||(a=r.type,n=r.pendingProps,l=th(St.current).createElement(a),l[zt]=r,l[Oe]=n,nn(l,a,n),we(l),r.stateNode=l):r.memoizedState=tv(r.type,n.memoizedProps,r.pendingProps,n.memoizedState),null;case 27:return ln(r),n===null&&Qt&&(l=r.stateNode=Z_(r.type,r.pendingProps,St.current),We=r,ui=!0,f=me,gs(r.type)?(xm=f,me=hi(l.firstChild)):me=f),en(n,r,r.pendingProps.children,a),Lc(n,r),n===null&&(r.flags|=4194304),r.child;case 5:return n===null&&Qt&&((f=l=me)&&(l=nw(l,r.type,r.pendingProps,ui),l!==null?(r.stateNode=l,We=r,me=hi(l.firstChild),ui=!1,f=!0):f=!1),f||ns(r)),ln(r),f=r.type,d=r.pendingProps,b=n!==null?n.memoizedProps:null,l=d.children,_m(f,d)?l=null:b!==null&&_m(f,b)&&(r.flags|=32),r.memoizedState!==null&&(f=yd(n,r,yA,null,null,a),Kl._currentValue=f),Lc(n,r),en(n,r,l,a),r.child;case 6:return n===null&&Qt&&((n=a=me)&&(a=iw(a,r.pendingProps,ui),a!==null?(r.stateNode=a,We=r,me=null,n=!0):n=!1),n||ns(r)),null;case 13:return z0(n,r,a);case 4:return Jt(r,r.stateNode.containerInfo),l=r.pendingProps,n===null?r.child=fa(r,null,l,a):en(n,r,l,a),r.child;case 11:return D0(n,r,r.type,r.pendingProps,a);case 7:return en(n,r,r.pendingProps,a),r.child;case 8:return en(n,r,r.pendingProps.children,a),r.child;case 12:return en(n,r,r.pendingProps.children,a),r.child;case 10:return l=r.pendingProps,is(r,r.type,l.value),en(n,r,l.children,a),r.child;case 9:return f=r.type._context,l=r.pendingProps.children,la(r),f=tn(f),l=l(f),r.flags|=1,en(n,r,l,a),r.child;case 14:return O0(n,r,r.type,r.pendingProps,a);case 15:return M0(n,r,r.type,r.pendingProps,a);case 19:return F0(n,r,a);case 31:return wA(n,r,a);case 22:return k0(n,r,a,r.pendingProps);case 24:return la(r),l=tn(je),n===null?(f=od(),f===null&&(f=de,d=sd(),f.pooledCache=d,d.refCount++,d!==null&&(f.pooledCacheLanes|=a),f=d),r.memoizedState={parent:l,cache:f},ud(r),is(r,je,f)):((n.lanes&a)!==0&&(cd(n,r),Cl(r,null,null,a),Nl()),f=n.memoizedState,d=r.memoizedState,f.parent!==l?(f={parent:l,cache:l},r.memoizedState=f,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=f),is(r,je,l)):(l=d.cache,is(r,je,l),l!==f.cache&&rd(r,[je],a,!0))),en(n,r,r.pendingProps.children,a),r.child;case 29:throw r.pendingProps}throw Error(s(156,r.tag))}function _r(n){n.flags|=4}function Gd(n,r,a,l,f){if((r=(n.mode&32)!==0)&&(r=!1),r){if(n.flags|=16777216,(f&335544128)===f)if(n.stateNode.complete)n.flags|=8192;else if(g_())n.flags|=8192;else throw ha=Tc,ld}else n.flags&=-16777217}function H0(n,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!sv(r))if(g_())n.flags|=8192;else throw ha=Tc,ld}function Uc(n,r){r!==null&&(n.flags|=4),n.flags&16384&&(r=n.tag!==22?Vt():536870912,n.lanes|=r,_o|=r)}function kl(n,r){if(!Qt)switch(n.tailMode){case"hidden":r=n.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?r||n.tail===null?n.tail=null:n.tail.sibling=null:l.sibling=null}}function pe(n){var r=n.alternate!==null&&n.alternate.child===n.child,a=0,l=0;if(r)for(var f=n.child;f!==null;)a|=f.lanes|f.childLanes,l|=f.subtreeFlags&65011712,l|=f.flags&65011712,f.return=n,f=f.sibling;else for(f=n.child;f!==null;)a|=f.lanes|f.childLanes,l|=f.subtreeFlags,l|=f.flags,f.return=n,f=f.sibling;return n.subtreeFlags|=l,n.childLanes=a,r}function NA(n,r,a){var l=r.pendingProps;switch(Wf(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return pe(r),null;case 1:return pe(r),null;case 3:return a=r.stateNode,l=null,n!==null&&(l=n.memoizedState.cache),r.memoizedState.cache!==l&&(r.flags|=2048),mr(je),Xt(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(n===null||n.child===null)&&(ro(r)?_r(r):n===null||n.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,ed())),pe(r),null;case 26:var f=r.type,d=r.memoizedState;return n===null?(_r(r),d!==null?(pe(r),H0(r,d)):(pe(r),Gd(r,f,null,l,a))):d?d!==n.memoizedState?(_r(r),pe(r),H0(r,d)):(pe(r),r.flags&=-16777217):(n=n.memoizedProps,n!==l&&_r(r),pe(r),Gd(r,f,n,l,a)),null;case 27:if(bn(r),a=St.current,f=r.type,n!==null&&r.stateNode!=null)n.memoizedProps!==l&&_r(r);else{if(!l){if(r.stateNode===null)throw Error(s(166));return pe(r),null}n=mt.current,ro(r)?xy(r):(n=Z_(f,l,a),r.stateNode=n,_r(r))}return pe(r),null;case 5:if(bn(r),f=r.type,n!==null&&r.stateNode!=null)n.memoizedProps!==l&&_r(r);else{if(!l){if(r.stateNode===null)throw Error(s(166));return pe(r),null}if(d=mt.current,ro(r))xy(r);else{var b=th(St.current);switch(d){case 1:d=b.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:d=b.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":d=b.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":d=b.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":d=b.createElement("div"),d.innerHTML="<script><\/script>",d=d.removeChild(d.firstChild);break;case"select":d=typeof l.is=="string"?b.createElement("select",{is:l.is}):b.createElement("select"),l.multiple?d.multiple=!0:l.size&&(d.size=l.size);break;default:d=typeof l.is=="string"?b.createElement(f,{is:l.is}):b.createElement(f)}}d[zt]=r,d[Oe]=l;t:for(b=r.child;b!==null;){if(b.tag===5||b.tag===6)d.appendChild(b.stateNode);else if(b.tag!==4&&b.tag!==27&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===r)break t;for(;b.sibling===null;){if(b.return===null||b.return===r)break t;b=b.return}b.sibling.return=b.return,b=b.sibling}r.stateNode=d;t:switch(nn(d,f,l),f){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break t;case"img":l=!0;break t;default:l=!1}l&&_r(r)}}return pe(r),Gd(r,r.type,n===null?null:n.memoizedProps,r.pendingProps,a),null;case 6:if(n&&r.stateNode!=null)n.memoizedProps!==l&&_r(r);else{if(typeof l!="string"&&r.stateNode===null)throw Error(s(166));if(n=St.current,ro(r)){if(n=r.stateNode,a=r.memoizedProps,l=null,f=We,f!==null)switch(f.tag){case 27:case 5:l=f.memoizedProps}n[zt]=r,n=!!(n.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||z_(n.nodeValue,a)),n||ns(r,!0)}else n=th(n).createTextNode(l),n[zt]=r,r.stateNode=n}return pe(r),null;case 31:if(a=r.memoizedState,n===null||n.memoizedState!==null){if(l=ro(r),a!==null){if(n===null){if(!l)throw Error(s(318));if(n=r.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(557));n[zt]=r}else aa(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;pe(r),n=!1}else a=ed(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=a),n=!0;if(!n)return r.flags&256?(Hn(r),r):(Hn(r),null);if((r.flags&128)!==0)throw Error(s(558))}return pe(r),null;case 13:if(l=r.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(f=ro(r),l!==null&&l.dehydrated!==null){if(n===null){if(!f)throw Error(s(318));if(f=r.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(s(317));f[zt]=r}else aa(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;pe(r),f=!1}else f=ed(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=f),f=!0;if(!f)return r.flags&256?(Hn(r),r):(Hn(r),null)}return Hn(r),(r.flags&128)!==0?(r.lanes=a,r):(a=l!==null,n=n!==null&&n.memoizedState!==null,a&&(l=r.child,f=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(f=l.alternate.memoizedState.cachePool.pool),d=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(d=l.memoizedState.cachePool.pool),d!==f&&(l.flags|=2048)),a!==n&&a&&(r.child.flags|=8192),Uc(r,r.updateQueue),pe(r),null);case 4:return Xt(),n===null&&dm(r.stateNode.containerInfo),pe(r),null;case 10:return mr(r.type),pe(r),null;case 19:if(Q(Re),l=r.memoizedState,l===null)return pe(r),null;if(f=(r.flags&128)!==0,d=l.rendering,d===null)if(f)kl(l,!1);else{if(Ne!==0||n!==null&&(n.flags&128)!==0)for(n=r.child;n!==null;){if(d=Sc(n),d!==null){for(r.flags|=128,kl(l,!1),n=d.updateQueue,r.updateQueue=n,Uc(r,n),r.subtreeFlags=0,n=a,a=r.child;a!==null;)_y(a,n),a=a.sibling;return ht(Re,Re.current&1|2),Qt&&fr(r,l.treeForkCount),r.child}n=n.sibling}l.tail!==null&&qe()>Hc&&(r.flags|=128,f=!0,kl(l,!1),r.lanes=4194304)}else{if(!f)if(n=Sc(d),n!==null){if(r.flags|=128,f=!0,n=n.updateQueue,r.updateQueue=n,Uc(r,n),kl(l,!0),l.tail===null&&l.tailMode==="hidden"&&!d.alternate&&!Qt)return pe(r),null}else 2*qe()-l.renderingStartTime>Hc&&a!==536870912&&(r.flags|=128,f=!0,kl(l,!1),r.lanes=4194304);l.isBackwards?(d.sibling=r.child,r.child=d):(n=l.last,n!==null?n.sibling=d:r.child=d,l.last=d)}return l.tail!==null?(n=l.tail,l.rendering=n,l.tail=n.sibling,l.renderingStartTime=qe(),n.sibling=null,a=Re.current,ht(Re,f?a&1|2:a&1),Qt&&fr(r,l.treeForkCount),n):(pe(r),null);case 22:case 23:return Hn(r),md(),l=r.memoizedState!==null,n!==null?n.memoizedState!==null!==l&&(r.flags|=8192):l&&(r.flags|=8192),l?(a&536870912)!==0&&(r.flags&128)===0&&(pe(r),r.subtreeFlags&6&&(r.flags|=8192)):pe(r),a=r.updateQueue,a!==null&&Uc(r,a.retryQueue),a=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),l=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(l=r.memoizedState.cachePool.pool),l!==a&&(r.flags|=2048),n!==null&&Q(ua),null;case 24:return a=null,n!==null&&(a=n.memoizedState.cache),r.memoizedState.cache!==a&&(r.flags|=2048),mr(je),pe(r),null;case 25:return null;case 30:return null}throw Error(s(156,r.tag))}function CA(n,r){switch(Wf(r),r.tag){case 1:return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 3:return mr(je),Xt(),n=r.flags,(n&65536)!==0&&(n&128)===0?(r.flags=n&-65537|128,r):null;case 26:case 27:case 5:return bn(r),null;case 31:if(r.memoizedState!==null){if(Hn(r),r.alternate===null)throw Error(s(340));aa()}return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 13:if(Hn(r),n=r.memoizedState,n!==null&&n.dehydrated!==null){if(r.alternate===null)throw Error(s(340));aa()}return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 19:return Q(Re),null;case 4:return Xt(),null;case 10:return mr(r.type),null;case 22:case 23:return Hn(r),md(),n!==null&&Q(ua),n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 24:return mr(je),null;case 25:return null;default:return null}}function G0(n,r){switch(Wf(r),r.tag){case 3:mr(je),Xt();break;case 26:case 27:case 5:bn(r);break;case 4:Xt();break;case 31:r.memoizedState!==null&&Hn(r);break;case 13:Hn(r);break;case 19:Q(Re);break;case 10:mr(r.type);break;case 22:case 23:Hn(r),md(),n!==null&&Q(ua);break;case 24:mr(je)}}function Vl(n,r){try{var a=r.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var f=l.next;a=f;do{if((a.tag&n)===n){l=void 0;var d=a.create,b=a.inst;l=d(),b.destroy=l}a=a.next}while(a!==f)}}catch(w){le(r,r.return,w)}}function us(n,r,a){try{var l=r.updateQueue,f=l!==null?l.lastEffect:null;if(f!==null){var d=f.next;l=d;do{if((l.tag&n)===n){var b=l.inst,w=b.destroy;if(w!==void 0){b.destroy=void 0,f=r;var V=a,Y=w;try{Y()}catch(nt){le(f,V,nt)}}}l=l.next}while(l!==d)}}catch(nt){le(r,r.return,nt)}}function $0(n){var r=n.updateQueue;if(r!==null){var a=n.stateNode;try{jy(r,a)}catch(l){le(n,n.return,l)}}}function Y0(n,r,a){a.props=ma(n.type,n.memoizedProps),a.state=n.memoizedState;try{a.componentWillUnmount()}catch(l){le(n,r,l)}}function jl(n,r){try{var a=n.ref;if(a!==null){switch(n.tag){case 26:case 27:case 5:var l=n.stateNode;break;case 30:l=n.stateNode;break;default:l=n.stateNode}typeof a=="function"?n.refCleanup=a(l):a.current=l}}catch(f){le(n,r,f)}}function Gi(n,r){var a=n.ref,l=n.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(f){le(n,r,f)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(f){le(n,r,f)}else a.current=null}function K0(n){var r=n.type,a=n.memoizedProps,l=n.stateNode;try{t:switch(r){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break t;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(f){le(n,n.return,f)}}function $d(n,r,a){try{var l=n.stateNode;XA(l,n.type,a,r),l[Oe]=r}catch(f){le(n,n.return,f)}}function Q0(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&gs(n.type)||n.tag===4}function Yd(n){t:for(;;){for(;n.sibling===null;){if(n.return===null||Q0(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&gs(n.type)||n.flags&2||n.child===null||n.tag===4)continue t;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Kd(n,r,a){var l=n.tag;if(l===5||l===6)n=n.stateNode,r?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(n,r):(r=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,r.appendChild(n),a=a._reactRootContainer,a!=null||r.onclick!==null||(r.onclick=_i));else if(l!==4&&(l===27&&gs(n.type)&&(a=n.stateNode,r=null),n=n.child,n!==null))for(Kd(n,r,a),n=n.sibling;n!==null;)Kd(n,r,a),n=n.sibling}function zc(n,r,a){var l=n.tag;if(l===5||l===6)n=n.stateNode,r?a.insertBefore(n,r):a.appendChild(n);else if(l!==4&&(l===27&&gs(n.type)&&(a=n.stateNode),n=n.child,n!==null))for(zc(n,r,a),n=n.sibling;n!==null;)zc(n,r,a),n=n.sibling}function X0(n){var r=n.stateNode,a=n.memoizedProps;try{for(var l=n.type,f=r.attributes;f.length;)r.removeAttributeNode(f[0]);nn(r,l,a),r[zt]=n,r[Oe]=a}catch(d){le(n,n.return,d)}}var vr=!1,Ue=!1,Qd=!1,Z0=typeof WeakSet=="function"?WeakSet:Set,Qe=null;function RA(n,r){if(n=n.containerInfo,gm=oh,n=uy(n),Ff(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else t:{a=(a=n.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var f=l.anchorOffset,d=l.focusNode;l=l.focusOffset;try{a.nodeType,d.nodeType}catch{a=null;break t}var b=0,w=-1,V=-1,Y=0,nt=0,at=n,X=null;e:for(;;){for(var tt;at!==a||f!==0&&at.nodeType!==3||(w=b+f),at!==d||l!==0&&at.nodeType!==3||(V=b+l),at.nodeType===3&&(b+=at.nodeValue.length),(tt=at.firstChild)!==null;)X=at,at=tt;for(;;){if(at===n)break e;if(X===a&&++Y===f&&(w=b),X===d&&++nt===l&&(V=b),(tt=at.nextSibling)!==null)break;at=X,X=at.parentNode}at=tt}a=w===-1||V===-1?null:{start:w,end:V}}else a=null}a=a||{start:0,end:0}}else a=null;for(ym={focusedElem:n,selectionRange:a},oh=!1,Qe=r;Qe!==null;)if(r=Qe,n=r.child,(r.subtreeFlags&1028)!==0&&n!==null)n.return=r,Qe=n;else for(;Qe!==null;){switch(r=Qe,d=r.alternate,n=r.flags,r.tag){case 0:if((n&4)!==0&&(n=r.updateQueue,n=n!==null?n.events:null,n!==null))for(a=0;a<n.length;a++)f=n[a],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&d!==null){n=void 0,a=r,f=d.memoizedProps,d=d.memoizedState,l=a.stateNode;try{var vt=ma(a.type,f);n=l.getSnapshotBeforeUpdate(vt,d),l.__reactInternalSnapshotBeforeUpdate=n}catch(Ct){le(a,a.return,Ct)}}break;case 3:if((n&1024)!==0){if(n=r.stateNode.containerInfo,a=n.nodeType,a===9)bm(n);else if(a===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":bm(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(s(163))}if(n=r.sibling,n!==null){n.return=r.return,Qe=n;break}Qe=r.return}}function J0(n,r,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:Er(n,a),l&4&&Vl(5,a);break;case 1:if(Er(n,a),l&4)if(n=a.stateNode,r===null)try{n.componentDidMount()}catch(b){le(a,a.return,b)}else{var f=ma(a.type,r.memoizedProps);r=r.memoizedState;try{n.componentDidUpdate(f,r,n.__reactInternalSnapshotBeforeUpdate)}catch(b){le(a,a.return,b)}}l&64&&$0(a),l&512&&jl(a,a.return);break;case 3:if(Er(n,a),l&64&&(n=a.updateQueue,n!==null)){if(r=null,a.child!==null)switch(a.child.tag){case 27:case 5:r=a.child.stateNode;break;case 1:r=a.child.stateNode}try{jy(n,r)}catch(b){le(a,a.return,b)}}break;case 27:r===null&&l&4&&X0(a);case 26:case 5:Er(n,a),r===null&&l&4&&K0(a),l&512&&jl(a,a.return);break;case 12:Er(n,a);break;case 31:Er(n,a),l&4&&e_(n,a);break;case 13:Er(n,a),l&4&&n_(n,a),l&64&&(n=a.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(a=PA.bind(null,a),rw(n,a))));break;case 22:if(l=a.memoizedState!==null||vr,!l){r=r!==null&&r.memoizedState!==null||Ue,f=vr;var d=Ue;vr=l,(Ue=r)&&!d?Tr(n,a,(a.subtreeFlags&8772)!==0):Er(n,a),vr=f,Ue=d}break;case 30:break;default:Er(n,a)}}function W0(n){var r=n.alternate;r!==null&&(n.alternate=null,W0(r)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(r=n.stateNode,r!==null&&Me(r)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var ve=null,Cn=!1;function br(n,r,a){for(a=a.child;a!==null;)t_(n,r,a),a=a.sibling}function t_(n,r,a){if(He&&typeof He.onCommitFiberUnmount=="function")try{He.onCommitFiberUnmount(Tn,a)}catch{}switch(a.tag){case 26:Ue||Gi(a,r),br(n,r,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Ue||Gi(a,r);var l=ve,f=Cn;gs(a.type)&&(ve=a.stateNode,Cn=!1),br(n,r,a),Gl(a.stateNode),ve=l,Cn=f;break;case 5:Ue||Gi(a,r);case 6:if(l=ve,f=Cn,ve=null,br(n,r,a),ve=l,Cn=f,ve!==null)if(Cn)try{(ve.nodeType===9?ve.body:ve.nodeName==="HTML"?ve.ownerDocument.body:ve).removeChild(a.stateNode)}catch(d){le(a,r,d)}else try{ve.removeChild(a.stateNode)}catch(d){le(a,r,d)}break;case 18:ve!==null&&(Cn?(n=ve,$_(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,a.stateNode),So(n)):$_(ve,a.stateNode));break;case 4:l=ve,f=Cn,ve=a.stateNode.containerInfo,Cn=!0,br(n,r,a),ve=l,Cn=f;break;case 0:case 11:case 14:case 15:us(2,a,r),Ue||us(4,a,r),br(n,r,a);break;case 1:Ue||(Gi(a,r),l=a.stateNode,typeof l.componentWillUnmount=="function"&&Y0(a,r,l)),br(n,r,a);break;case 21:br(n,r,a);break;case 22:Ue=(l=Ue)||a.memoizedState!==null,br(n,r,a),Ue=l;break;default:br(n,r,a)}}function e_(n,r){if(r.memoizedState===null&&(n=r.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{So(n)}catch(a){le(r,r.return,a)}}}function n_(n,r){if(r.memoizedState===null&&(n=r.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{So(n)}catch(a){le(r,r.return,a)}}function IA(n){switch(n.tag){case 31:case 13:case 19:var r=n.stateNode;return r===null&&(r=n.stateNode=new Z0),r;case 22:return n=n.stateNode,r=n._retryCache,r===null&&(r=n._retryCache=new Z0),r;default:throw Error(s(435,n.tag))}}function Bc(n,r){var a=IA(n);r.forEach(function(l){if(!a.has(l)){a.add(l);var f=UA.bind(null,n,l);l.then(f,f)}})}function Rn(n,r){var a=r.deletions;if(a!==null)for(var l=0;l<a.length;l++){var f=a[l],d=n,b=r,w=b;t:for(;w!==null;){switch(w.tag){case 27:if(gs(w.type)){ve=w.stateNode,Cn=!1;break t}break;case 5:ve=w.stateNode,Cn=!1;break t;case 3:case 4:ve=w.stateNode.containerInfo,Cn=!0;break t}w=w.return}if(ve===null)throw Error(s(160));t_(d,b,f),ve=null,Cn=!1,d=f.alternate,d!==null&&(d.return=null),f.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)i_(r,n),r=r.sibling}var Ai=null;function i_(n,r){var a=n.alternate,l=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:Rn(r,n),In(n),l&4&&(us(3,n,n.return),Vl(3,n),us(5,n,n.return));break;case 1:Rn(r,n),In(n),l&512&&(Ue||a===null||Gi(a,a.return)),l&64&&vr&&(n=n.updateQueue,n!==null&&(l=n.callbacks,l!==null&&(a=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var f=Ai;if(Rn(r,n),In(n),l&512&&(Ue||a===null||Gi(a,a.return)),l&4){var d=a!==null?a.memoizedState:null;if(l=n.memoizedState,a===null)if(l===null)if(n.stateNode===null){t:{l=n.type,a=n.memoizedProps,f=f.ownerDocument||f;e:switch(l){case"title":d=f.getElementsByTagName("title")[0],(!d||d[gn]||d[zt]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=f.createElement(l),f.head.insertBefore(d,f.querySelector("head > title"))),nn(d,l,a),d[zt]=n,we(d),l=d;break t;case"link":var b=iv("link","href",f).get(l+(a.href||""));if(b){for(var w=0;w<b.length;w++)if(d=b[w],d.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&d.getAttribute("rel")===(a.rel==null?null:a.rel)&&d.getAttribute("title")===(a.title==null?null:a.title)&&d.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){b.splice(w,1);break e}}d=f.createElement(l),nn(d,l,a),f.head.appendChild(d);break;case"meta":if(b=iv("meta","content",f).get(l+(a.content||""))){for(w=0;w<b.length;w++)if(d=b[w],d.getAttribute("content")===(a.content==null?null:""+a.content)&&d.getAttribute("name")===(a.name==null?null:a.name)&&d.getAttribute("property")===(a.property==null?null:a.property)&&d.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&d.getAttribute("charset")===(a.charSet==null?null:a.charSet)){b.splice(w,1);break e}}d=f.createElement(l),nn(d,l,a),f.head.appendChild(d);break;default:throw Error(s(468,l))}d[zt]=n,we(d),l=d}n.stateNode=l}else rv(f,n.type,n.stateNode);else n.stateNode=nv(f,l,n.memoizedProps);else d!==l?(d===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):d.count--,l===null?rv(f,n.type,n.stateNode):nv(f,l,n.memoizedProps)):l===null&&n.stateNode!==null&&$d(n,n.memoizedProps,a.memoizedProps)}break;case 27:Rn(r,n),In(n),l&512&&(Ue||a===null||Gi(a,a.return)),a!==null&&l&4&&$d(n,n.memoizedProps,a.memoizedProps);break;case 5:if(Rn(r,n),In(n),l&512&&(Ue||a===null||Gi(a,a.return)),n.flags&32){f=n.stateNode;try{Nn(f,"")}catch(vt){le(n,n.return,vt)}}l&4&&n.stateNode!=null&&(f=n.memoizedProps,$d(n,f,a!==null?a.memoizedProps:f)),l&1024&&(Qd=!0);break;case 6:if(Rn(r,n),In(n),l&4){if(n.stateNode===null)throw Error(s(162));l=n.memoizedProps,a=n.stateNode;try{a.nodeValue=l}catch(vt){le(n,n.return,vt)}}break;case 3:if(ih=null,f=Ai,Ai=eh(r.containerInfo),Rn(r,n),Ai=f,In(n),l&4&&a!==null&&a.memoizedState.isDehydrated)try{So(r.containerInfo)}catch(vt){le(n,n.return,vt)}Qd&&(Qd=!1,r_(n));break;case 4:l=Ai,Ai=eh(n.stateNode.containerInfo),Rn(r,n),In(n),Ai=l;break;case 12:Rn(r,n),In(n);break;case 31:Rn(r,n),In(n),l&4&&(l=n.updateQueue,l!==null&&(n.updateQueue=null,Bc(n,l)));break;case 13:Rn(r,n),In(n),n.child.flags&8192&&n.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(qc=qe()),l&4&&(l=n.updateQueue,l!==null&&(n.updateQueue=null,Bc(n,l)));break;case 22:f=n.memoizedState!==null;var V=a!==null&&a.memoizedState!==null,Y=vr,nt=Ue;if(vr=Y||f,Ue=nt||V,Rn(r,n),Ue=nt,vr=Y,In(n),l&8192)t:for(r=n.stateNode,r._visibility=f?r._visibility&-2:r._visibility|1,f&&(a===null||V||vr||Ue||pa(n)),a=null,r=n;;){if(r.tag===5||r.tag===26){if(a===null){V=a=r;try{if(d=V.stateNode,f)b=d.style,typeof b.setProperty=="function"?b.setProperty("display","none","important"):b.display="none";else{w=V.stateNode;var at=V.memoizedProps.style,X=at!=null&&at.hasOwnProperty("display")?at.display:null;w.style.display=X==null||typeof X=="boolean"?"":(""+X).trim()}}catch(vt){le(V,V.return,vt)}}}else if(r.tag===6){if(a===null){V=r;try{V.stateNode.nodeValue=f?"":V.memoizedProps}catch(vt){le(V,V.return,vt)}}}else if(r.tag===18){if(a===null){V=r;try{var tt=V.stateNode;f?Y_(tt,!0):Y_(V.stateNode,!1)}catch(vt){le(V,V.return,vt)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===n)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===n)break t;for(;r.sibling===null;){if(r.return===null||r.return===n)break t;a===r&&(a=null),r=r.return}a===r&&(a=null),r.sibling.return=r.return,r=r.sibling}l&4&&(l=n.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,Bc(n,a))));break;case 19:Rn(r,n),In(n),l&4&&(l=n.updateQueue,l!==null&&(n.updateQueue=null,Bc(n,l)));break;case 30:break;case 21:break;default:Rn(r,n),In(n)}}function In(n){var r=n.flags;if(r&2){try{for(var a,l=n.return;l!==null;){if(Q0(l)){a=l;break}l=l.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var f=a.stateNode,d=Yd(n);zc(n,d,f);break;case 5:var b=a.stateNode;a.flags&32&&(Nn(b,""),a.flags&=-33);var w=Yd(n);zc(n,w,b);break;case 3:case 4:var V=a.stateNode.containerInfo,Y=Yd(n);Kd(n,Y,V);break;default:throw Error(s(161))}}catch(nt){le(n,n.return,nt)}n.flags&=-3}r&4096&&(n.flags&=-4097)}function r_(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var r=n;r_(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),n=n.sibling}}function Er(n,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)J0(n,r.alternate,r),r=r.sibling}function pa(n){for(n=n.child;n!==null;){var r=n;switch(r.tag){case 0:case 11:case 14:case 15:us(4,r,r.return),pa(r);break;case 1:Gi(r,r.return);var a=r.stateNode;typeof a.componentWillUnmount=="function"&&Y0(r,r.return,a),pa(r);break;case 27:Gl(r.stateNode);case 26:case 5:Gi(r,r.return),pa(r);break;case 22:r.memoizedState===null&&pa(r);break;case 30:pa(r);break;default:pa(r)}n=n.sibling}}function Tr(n,r,a){for(a=a&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var l=r.alternate,f=n,d=r,b=d.flags;switch(d.tag){case 0:case 11:case 15:Tr(f,d,a),Vl(4,d);break;case 1:if(Tr(f,d,a),l=d,f=l.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(Y){le(l,l.return,Y)}if(l=d,f=l.updateQueue,f!==null){var w=l.stateNode;try{var V=f.shared.hiddenCallbacks;if(V!==null)for(f.shared.hiddenCallbacks=null,f=0;f<V.length;f++)Vy(V[f],w)}catch(Y){le(l,l.return,Y)}}a&&b&64&&$0(d),jl(d,d.return);break;case 27:X0(d);case 26:case 5:Tr(f,d,a),a&&l===null&&b&4&&K0(d),jl(d,d.return);break;case 12:Tr(f,d,a);break;case 31:Tr(f,d,a),a&&b&4&&e_(f,d);break;case 13:Tr(f,d,a),a&&b&4&&n_(f,d);break;case 22:d.memoizedState===null&&Tr(f,d,a),jl(d,d.return);break;case 30:break;default:Tr(f,d,a)}r=r.sibling}}function Xd(n,r){var a=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),n=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(n=r.memoizedState.cachePool.pool),n!==a&&(n!=null&&n.refCount++,a!=null&&Tl(a))}function Zd(n,r){n=null,r.alternate!==null&&(n=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==n&&(r.refCount++,n!=null&&Tl(n))}function wi(n,r,a,l){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)s_(n,r,a,l),r=r.sibling}function s_(n,r,a,l){var f=r.flags;switch(r.tag){case 0:case 11:case 15:wi(n,r,a,l),f&2048&&Vl(9,r);break;case 1:wi(n,r,a,l);break;case 3:wi(n,r,a,l),f&2048&&(n=null,r.alternate!==null&&(n=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==n&&(r.refCount++,n!=null&&Tl(n)));break;case 12:if(f&2048){wi(n,r,a,l),n=r.stateNode;try{var d=r.memoizedProps,b=d.id,w=d.onPostCommit;typeof w=="function"&&w(b,r.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(V){le(r,r.return,V)}}else wi(n,r,a,l);break;case 31:wi(n,r,a,l);break;case 13:wi(n,r,a,l);break;case 23:break;case 22:d=r.stateNode,b=r.alternate,r.memoizedState!==null?d._visibility&2?wi(n,r,a,l):Ll(n,r):d._visibility&2?wi(n,r,a,l):(d._visibility|=2,po(n,r,a,l,(r.subtreeFlags&10256)!==0||!1)),f&2048&&Xd(b,r);break;case 24:wi(n,r,a,l),f&2048&&Zd(r.alternate,r);break;default:wi(n,r,a,l)}}function po(n,r,a,l,f){for(f=f&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var d=n,b=r,w=a,V=l,Y=b.flags;switch(b.tag){case 0:case 11:case 15:po(d,b,w,V,f),Vl(8,b);break;case 23:break;case 22:var nt=b.stateNode;b.memoizedState!==null?nt._visibility&2?po(d,b,w,V,f):Ll(d,b):(nt._visibility|=2,po(d,b,w,V,f)),f&&Y&2048&&Xd(b.alternate,b);break;case 24:po(d,b,w,V,f),f&&Y&2048&&Zd(b.alternate,b);break;default:po(d,b,w,V,f)}r=r.sibling}}function Ll(n,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var a=n,l=r,f=l.flags;switch(l.tag){case 22:Ll(a,l),f&2048&&Xd(l.alternate,l);break;case 24:Ll(a,l),f&2048&&Zd(l.alternate,l);break;default:Ll(a,l)}r=r.sibling}}var Pl=8192;function go(n,r,a){if(n.subtreeFlags&Pl)for(n=n.child;n!==null;)a_(n,r,a),n=n.sibling}function a_(n,r,a){switch(n.tag){case 26:go(n,r,a),n.flags&Pl&&n.memoizedState!==null&&gw(a,Ai,n.memoizedState,n.memoizedProps);break;case 5:go(n,r,a);break;case 3:case 4:var l=Ai;Ai=eh(n.stateNode.containerInfo),go(n,r,a),Ai=l;break;case 22:n.memoizedState===null&&(l=n.alternate,l!==null&&l.memoizedState!==null?(l=Pl,Pl=16777216,go(n,r,a),Pl=l):go(n,r,a));break;default:go(n,r,a)}}function o_(n){var r=n.alternate;if(r!==null&&(n=r.child,n!==null)){r.child=null;do r=n.sibling,n.sibling=null,n=r;while(n!==null)}}function Ul(n){var r=n.deletions;if((n.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var l=r[a];Qe=l,u_(l,n)}o_(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)l_(n),n=n.sibling}function l_(n){switch(n.tag){case 0:case 11:case 15:Ul(n),n.flags&2048&&us(9,n,n.return);break;case 3:Ul(n);break;case 12:Ul(n);break;case 22:var r=n.stateNode;n.memoizedState!==null&&r._visibility&2&&(n.return===null||n.return.tag!==13)?(r._visibility&=-3,Fc(n)):Ul(n);break;default:Ul(n)}}function Fc(n){var r=n.deletions;if((n.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var l=r[a];Qe=l,u_(l,n)}o_(n)}for(n=n.child;n!==null;){switch(r=n,r.tag){case 0:case 11:case 15:us(8,r,r.return),Fc(r);break;case 22:a=r.stateNode,a._visibility&2&&(a._visibility&=-3,Fc(r));break;default:Fc(r)}n=n.sibling}}function u_(n,r){for(;Qe!==null;){var a=Qe;switch(a.tag){case 0:case 11:case 15:us(8,a,r);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Tl(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,Qe=l;else t:for(a=n;Qe!==null;){l=Qe;var f=l.sibling,d=l.return;if(W0(l),l===a){Qe=null;break t}if(f!==null){f.return=d,Qe=f;break t}Qe=d}}}var DA={getCacheForType:function(n){var r=tn(je),a=r.data.get(n);return a===void 0&&(a=n(),r.data.set(n,a)),a},cacheSignal:function(){return tn(je).controller.signal}},OA=typeof WeakMap=="function"?WeakMap:Map,ie=0,de=null,Ft=null,Ht=0,oe=0,Gn=null,cs=!1,yo=!1,Jd=!1,xr=0,Ne=0,hs=0,ga=0,Wd=0,$n=0,_o=0,zl=null,Dn=null,tm=!1,qc=0,c_=0,Hc=1/0,Gc=null,fs=null,Ge=0,ds=null,vo=null,Ar=0,em=0,nm=null,h_=null,Bl=0,im=null;function Yn(){return(ie&2)!==0&&Ht!==0?Ht&-Ht:M.T!==null?um():Gs()}function f_(){if($n===0)if((Ht&536870912)===0||Qt){var n=ki;ki<<=1,(ki&3932160)===0&&(ki=262144),$n=n}else $n=536870912;return n=qn.current,n!==null&&(n.flags|=32),$n}function On(n,r,a){(n===de&&(oe===2||oe===9)||n.cancelPendingCommit!==null)&&(bo(n,0),ms(n,Ht,$n,!1)),It(n,a),((ie&2)===0||n!==de)&&(n===de&&((ie&2)===0&&(ga|=a),Ne===4&&ms(n,Ht,$n,!1)),$i(n))}function d_(n,r,a){if((ie&6)!==0)throw Error(s(327));var l=!a&&(r&127)===0&&(r&n.expiredLanes)===0||ut(n,r),f=l?VA(n,r):sm(n,r,!0),d=l;do{if(f===0){yo&&!l&&ms(n,r,0,!1);break}else{if(a=n.current.alternate,d&&!MA(a)){f=sm(n,r,!1),d=!1;continue}if(f===2){if(d=r,n.errorRecoveryDisabledLanes&d)var b=0;else b=n.pendingLanes&-536870913,b=b!==0?b:b&536870912?536870912:0;if(b!==0){r=b;t:{var w=n;f=zl;var V=w.current.memoizedState.isDehydrated;if(V&&(bo(w,b).flags|=256),b=sm(w,b,!1),b!==2){if(Jd&&!V){w.errorRecoveryDisabledLanes|=d,ga|=d,f=4;break t}d=Dn,Dn=f,d!==null&&(Dn===null?Dn=d:Dn.push.apply(Dn,d))}f=b}if(d=!1,f!==2)continue}}if(f===1){bo(n,0),ms(n,r,0,!0);break}t:{switch(l=n,d=f,d){case 0:case 1:throw Error(s(345));case 4:if((r&4194048)!==r)break;case 6:ms(l,r,$n,!cs);break t;case 2:Dn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((r&62914560)===r&&(f=qc+300-qe(),10<f)){if(ms(l,r,$n,!cs),Jn(l,0,!0)!==0)break t;Ar=r,l.timeoutHandle=H_(m_.bind(null,l,a,Dn,Gc,tm,r,$n,ga,_o,cs,d,"Throttled",-0,0),f);break t}m_(l,a,Dn,Gc,tm,r,$n,ga,_o,cs,d,null,-0,0)}}break}while(!0);$i(n)}function m_(n,r,a,l,f,d,b,w,V,Y,nt,at,X,tt){if(n.timeoutHandle=-1,at=r.subtreeFlags,at&8192||(at&16785408)===16785408){at={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:_i},a_(r,d,at);var vt=(d&62914560)===d?qc-qe():(d&4194048)===d?c_-qe():0;if(vt=yw(at,vt),vt!==null){Ar=d,n.cancelPendingCommit=vt(T_.bind(null,n,r,d,a,l,f,b,w,V,nt,at,null,X,tt)),ms(n,d,b,!Y);return}}T_(n,r,d,a,l,f,b,w,V)}function MA(n){for(var r=n;;){var a=r.tag;if((a===0||a===11||a===15)&&r.flags&16384&&(a=r.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var f=a[l],d=f.getSnapshot;f=f.value;try{if(!Bn(d(),f))return!1}catch{return!1}}if(a=r.child,r.subtreeFlags&16384&&a!==null)a.return=r,r=a;else{if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function ms(n,r,a,l){r&=~Wd,r&=~ga,n.suspendedLanes|=r,n.pingedLanes&=~r,l&&(n.warmLanes|=r),l=n.expirationTimes;for(var f=r;0<f;){var d=31-be(f),b=1<<d;l[d]=-1,f&=~b}a!==0&&Mt(n,a,r)}function $c(){return(ie&6)===0?(Fl(0),!1):!0}function rm(){if(Ft!==null){if(oe===0)var n=Ft.return;else n=Ft,dr=oa=null,bd(n),uo=null,Al=0,n=Ft;for(;n!==null;)G0(n.alternate,n),n=n.return;Ft=null}}function bo(n,r){var a=n.timeoutHandle;a!==-1&&(n.timeoutHandle=-1,WA(a)),a=n.cancelPendingCommit,a!==null&&(n.cancelPendingCommit=null,a()),Ar=0,rm(),de=n,Ft=a=hr(n.current,null),Ht=r,oe=0,Gn=null,cs=!1,yo=ut(n,r),Jd=!1,_o=$n=Wd=ga=hs=Ne=0,Dn=zl=null,tm=!1,(r&8)!==0&&(r|=r&32);var l=n.entangledLanes;if(l!==0)for(n=n.entanglements,l&=r;0<l;){var f=31-be(l),d=1<<f;r|=n[f],l&=~d}return xr=r,dc(),a}function p_(n,r){Ut=null,M.H=Ol,r===lo||r===Ec?(r=Dy(),oe=3):r===ld?(r=Dy(),oe=4):oe=r===jd?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,Gn=r,Ft===null&&(Ne=1,Vc(n,ai(r,n.current)))}function g_(){var n=qn.current;return n===null?!0:(Ht&4194048)===Ht?ci===null:(Ht&62914560)===Ht||(Ht&536870912)!==0?n===ci:!1}function y_(){var n=M.H;return M.H=Ol,n===null?Ol:n}function __(){var n=M.A;return M.A=DA,n}function Yc(){Ne=4,cs||(Ht&4194048)!==Ht&&qn.current!==null||(yo=!0),(hs&134217727)===0&&(ga&134217727)===0||de===null||ms(de,Ht,$n,!1)}function sm(n,r,a){var l=ie;ie|=2;var f=y_(),d=__();(de!==n||Ht!==r)&&(Gc=null,bo(n,r)),r=!1;var b=Ne;t:do try{if(oe!==0&&Ft!==null){var w=Ft,V=Gn;switch(oe){case 8:rm(),b=6;break t;case 3:case 2:case 9:case 6:qn.current===null&&(r=!0);var Y=oe;if(oe=0,Gn=null,Eo(n,w,V,Y),a&&yo){b=0;break t}break;default:Y=oe,oe=0,Gn=null,Eo(n,w,V,Y)}}kA(),b=Ne;break}catch(nt){p_(n,nt)}while(!0);return r&&n.shellSuspendCounter++,dr=oa=null,ie=l,M.H=f,M.A=d,Ft===null&&(de=null,Ht=0,dc()),b}function kA(){for(;Ft!==null;)v_(Ft)}function VA(n,r){var a=ie;ie|=2;var l=y_(),f=__();de!==n||Ht!==r?(Gc=null,Hc=qe()+500,bo(n,r)):yo=ut(n,r);t:do try{if(oe!==0&&Ft!==null){r=Ft;var d=Gn;e:switch(oe){case 1:oe=0,Gn=null,Eo(n,r,d,1);break;case 2:case 9:if(Ry(d)){oe=0,Gn=null,b_(r);break}r=function(){oe!==2&&oe!==9||de!==n||(oe=7),$i(n)},d.then(r,r);break t;case 3:oe=7;break t;case 4:oe=5;break t;case 7:Ry(d)?(oe=0,Gn=null,b_(r)):(oe=0,Gn=null,Eo(n,r,d,7));break;case 5:var b=null;switch(Ft.tag){case 26:b=Ft.memoizedState;case 5:case 27:var w=Ft;if(b?sv(b):w.stateNode.complete){oe=0,Gn=null;var V=w.sibling;if(V!==null)Ft=V;else{var Y=w.return;Y!==null?(Ft=Y,Kc(Y)):Ft=null}break e}}oe=0,Gn=null,Eo(n,r,d,5);break;case 6:oe=0,Gn=null,Eo(n,r,d,6);break;case 8:rm(),Ne=6;break t;default:throw Error(s(462))}}jA();break}catch(nt){p_(n,nt)}while(!0);return dr=oa=null,M.H=l,M.A=f,ie=a,Ft!==null?0:(de=null,Ht=0,dc(),Ne)}function jA(){for(;Ft!==null&&!sr();)v_(Ft)}function v_(n){var r=q0(n.alternate,n,xr);n.memoizedProps=n.pendingProps,r===null?Kc(n):Ft=r}function b_(n){var r=n,a=r.alternate;switch(r.tag){case 15:case 0:r=L0(a,r,r.pendingProps,r.type,void 0,Ht);break;case 11:r=L0(a,r,r.pendingProps,r.type.render,r.ref,Ht);break;case 5:bd(r);default:G0(a,r),r=Ft=_y(r,xr),r=q0(a,r,xr)}n.memoizedProps=n.pendingProps,r===null?Kc(n):Ft=r}function Eo(n,r,a,l){dr=oa=null,bd(r),uo=null,Al=0;var f=r.return;try{if(AA(n,f,r,a,Ht)){Ne=1,Vc(n,ai(a,n.current)),Ft=null;return}}catch(d){if(f!==null)throw Ft=f,d;Ne=1,Vc(n,ai(a,n.current)),Ft=null;return}r.flags&32768?(Qt||l===1?n=!0:yo||(Ht&536870912)!==0?n=!1:(cs=n=!0,(l===2||l===9||l===3||l===6)&&(l=qn.current,l!==null&&l.tag===13&&(l.flags|=16384))),E_(r,n)):Kc(r)}function Kc(n){var r=n;do{if((r.flags&32768)!==0){E_(r,cs);return}n=r.return;var a=NA(r.alternate,r,xr);if(a!==null){Ft=a;return}if(r=r.sibling,r!==null){Ft=r;return}Ft=r=n}while(r!==null);Ne===0&&(Ne=5)}function E_(n,r){do{var a=CA(n.alternate,n);if(a!==null){a.flags&=32767,Ft=a;return}if(a=n.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!r&&(n=n.sibling,n!==null)){Ft=n;return}Ft=n=a}while(n!==null);Ne=6,Ft=null}function T_(n,r,a,l,f,d,b,w,V){n.cancelPendingCommit=null;do Qc();while(Ge!==0);if((ie&6)!==0)throw Error(s(327));if(r!==null){if(r===n.current)throw Error(s(177));if(d=r.lanes|r.childLanes,d|=Yf,ee(n,a,d,b,w,V),n===de&&(Ft=de=null,Ht=0),vo=r,ds=n,Ar=a,em=d,nm=f,h_=l,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,zA(Ln,function(){return N_(),null})):(n.callbackNode=null,n.callbackPriority=0),l=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||l){l=M.T,M.T=null,f=P.p,P.p=2,b=ie,ie|=4;try{RA(n,r,a)}finally{ie=b,P.p=f,M.T=l}}Ge=1,x_(),A_(),w_()}}function x_(){if(Ge===1){Ge=0;var n=ds,r=vo,a=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||a){a=M.T,M.T=null;var l=P.p;P.p=2;var f=ie;ie|=4;try{i_(r,n);var d=ym,b=uy(n.containerInfo),w=d.focusedElem,V=d.selectionRange;if(b!==w&&w&&w.ownerDocument&&ly(w.ownerDocument.documentElement,w)){if(V!==null&&Ff(w)){var Y=V.start,nt=V.end;if(nt===void 0&&(nt=Y),"selectionStart"in w)w.selectionStart=Y,w.selectionEnd=Math.min(nt,w.value.length);else{var at=w.ownerDocument||document,X=at&&at.defaultView||window;if(X.getSelection){var tt=X.getSelection(),vt=w.textContent.length,Ct=Math.min(V.start,vt),fe=V.end===void 0?Ct:Math.min(V.end,vt);!tt.extend&&Ct>fe&&(b=fe,fe=Ct,Ct=b);var B=oy(w,Ct),z=oy(w,fe);if(B&&z&&(tt.rangeCount!==1||tt.anchorNode!==B.node||tt.anchorOffset!==B.offset||tt.focusNode!==z.node||tt.focusOffset!==z.offset)){var $=at.createRange();$.setStart(B.node,B.offset),tt.removeAllRanges(),Ct>fe?(tt.addRange($),tt.extend(z.node,z.offset)):($.setEnd(z.node,z.offset),tt.addRange($))}}}}for(at=[],tt=w;tt=tt.parentNode;)tt.nodeType===1&&at.push({element:tt,left:tt.scrollLeft,top:tt.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<at.length;w++){var st=at[w];st.element.scrollLeft=st.left,st.element.scrollTop=st.top}}oh=!!gm,ym=gm=null}finally{ie=f,P.p=l,M.T=a}}n.current=r,Ge=2}}function A_(){if(Ge===2){Ge=0;var n=ds,r=vo,a=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||a){a=M.T,M.T=null;var l=P.p;P.p=2;var f=ie;ie|=4;try{J0(n,r.alternate,r)}finally{ie=f,P.p=l,M.T=a}}Ge=3}}function w_(){if(Ge===4||Ge===3){Ge=0,Fr();var n=ds,r=vo,a=Ar,l=h_;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?Ge=5:(Ge=0,vo=ds=null,S_(n,n.pendingLanes));var f=n.pendingLanes;if(f===0&&(fs=null),Ze(a),r=r.stateNode,He&&typeof He.onCommitFiberRoot=="function")try{He.onCommitFiberRoot(Tn,r,void 0,(r.current.flags&128)===128)}catch{}if(l!==null){r=M.T,f=P.p,P.p=2,M.T=null;try{for(var d=n.onRecoverableError,b=0;b<l.length;b++){var w=l[b];d(w.value,{componentStack:w.stack})}}finally{M.T=r,P.p=f}}(Ar&3)!==0&&Qc(),$i(n),f=n.pendingLanes,(a&261930)!==0&&(f&42)!==0?n===im?Bl++:(Bl=0,im=n):Bl=0,Fl(0)}}function S_(n,r){(n.pooledCacheLanes&=r)===0&&(r=n.pooledCache,r!=null&&(n.pooledCache=null,Tl(r)))}function Qc(){return x_(),A_(),w_(),N_()}function N_(){if(Ge!==5)return!1;var n=ds,r=em;em=0;var a=Ze(Ar),l=M.T,f=P.p;try{P.p=32>a?32:a,M.T=null,a=nm,nm=null;var d=ds,b=Ar;if(Ge=0,vo=ds=null,Ar=0,(ie&6)!==0)throw Error(s(331));var w=ie;if(ie|=4,l_(d.current),s_(d,d.current,b,a),ie=w,Fl(0,!1),He&&typeof He.onPostCommitFiberRoot=="function")try{He.onPostCommitFiberRoot(Tn,d)}catch{}return!0}finally{P.p=f,M.T=l,S_(n,r)}}function C_(n,r,a){r=ai(a,r),r=Vd(n.stateNode,r,2),n=as(n,r,2),n!==null&&(It(n,2),$i(n))}function le(n,r,a){if(n.tag===3)C_(n,n,a);else for(;r!==null;){if(r.tag===3){C_(r,n,a);break}else if(r.tag===1){var l=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(fs===null||!fs.has(l))){n=ai(a,n),a=R0(2),l=as(r,a,2),l!==null&&(I0(a,l,r,n),It(l,2),$i(l));break}}r=r.return}}function am(n,r,a){var l=n.pingCache;if(l===null){l=n.pingCache=new OA;var f=new Set;l.set(r,f)}else f=l.get(r),f===void 0&&(f=new Set,l.set(r,f));f.has(a)||(Jd=!0,f.add(a),n=LA.bind(null,n,r,a),r.then(n,n))}function LA(n,r,a){var l=n.pingCache;l!==null&&l.delete(r),n.pingedLanes|=n.suspendedLanes&a,n.warmLanes&=~a,de===n&&(Ht&a)===a&&(Ne===4||Ne===3&&(Ht&62914560)===Ht&&300>qe()-qc?(ie&2)===0&&bo(n,0):Wd|=a,_o===Ht&&(_o=0)),$i(n)}function R_(n,r){r===0&&(r=Vt()),n=ra(n,r),n!==null&&(It(n,r),$i(n))}function PA(n){var r=n.memoizedState,a=0;r!==null&&(a=r.retryLane),R_(n,a)}function UA(n,r){var a=0;switch(n.tag){case 31:case 13:var l=n.stateNode,f=n.memoizedState;f!==null&&(a=f.retryLane);break;case 19:l=n.stateNode;break;case 22:l=n.stateNode._retryCache;break;default:throw Error(s(314))}l!==null&&l.delete(r),R_(n,a)}function zA(n,r){return xe(n,r)}var Xc=null,To=null,om=!1,Zc=!1,lm=!1,ps=0;function $i(n){n!==To&&n.next===null&&(To===null?Xc=To=n:To=To.next=n),Zc=!0,om||(om=!0,FA())}function Fl(n,r){if(!lm&&Zc){lm=!0;do for(var a=!1,l=Xc;l!==null;){if(n!==0){var f=l.pendingLanes;if(f===0)var d=0;else{var b=l.suspendedLanes,w=l.pingedLanes;d=(1<<31-be(42|n)+1)-1,d&=f&~(b&~w),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(a=!0,M_(l,d))}else d=Ht,d=Jn(l,l===de?d:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(d&3)===0||ut(l,d)||(a=!0,M_(l,d));l=l.next}while(a);lm=!1}}function BA(){I_()}function I_(){Zc=om=!1;var n=0;ps!==0&&JA()&&(n=ps);for(var r=qe(),a=null,l=Xc;l!==null;){var f=l.next,d=D_(l,r);d===0?(l.next=null,a===null?Xc=f:a.next=f,f===null&&(To=a)):(a=l,(n!==0||(d&3)!==0)&&(Zc=!0)),l=f}Ge!==0&&Ge!==5||Fl(n),ps!==0&&(ps=0)}function D_(n,r){for(var a=n.suspendedLanes,l=n.pingedLanes,f=n.expirationTimes,d=n.pendingLanes&-62914561;0<d;){var b=31-be(d),w=1<<b,V=f[b];V===-1?((w&a)===0||(w&l)!==0)&&(f[b]=bt(w,r)):V<=r&&(n.expiredLanes|=w),d&=~w}if(r=de,a=Ht,a=Jn(n,n===r?a:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),l=n.callbackNode,a===0||n===r&&(oe===2||oe===9)||n.cancelPendingCommit!==null)return l!==null&&l!==null&&jn(l),n.callbackNode=null,n.callbackPriority=0;if((a&3)===0||ut(n,a)){if(r=a&-a,r===n.callbackPriority)return r;switch(l!==null&&jn(l),Ze(a)){case 2:case 8:a=En;break;case 32:a=Ln;break;case 268435456:a=La;break;default:a=Ln}return l=O_.bind(null,n),a=xe(a,l),n.callbackPriority=r,n.callbackNode=a,r}return l!==null&&l!==null&&jn(l),n.callbackPriority=2,n.callbackNode=null,2}function O_(n,r){if(Ge!==0&&Ge!==5)return n.callbackNode=null,n.callbackPriority=0,null;var a=n.callbackNode;if(Qc()&&n.callbackNode!==a)return null;var l=Ht;return l=Jn(n,n===de?l:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),l===0?null:(d_(n,l,r),D_(n,qe()),n.callbackNode!=null&&n.callbackNode===a?O_.bind(null,n):null)}function M_(n,r){if(Qc())return null;d_(n,r,!0)}function FA(){tw(function(){(ie&6)!==0?xe(Hs,BA):I_()})}function um(){if(ps===0){var n=ao;n===0&&(n=xn,xn<<=1,(xn&261888)===0&&(xn=256)),ps=n}return ps}function k_(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:Ga(""+n)}function V_(n,r){var a=r.ownerDocument.createElement("input");return a.name=r.name,a.value=r.value,n.id&&a.setAttribute("form",n.id),r.parentNode.insertBefore(a,r),n=new FormData(n),a.parentNode.removeChild(a),n}function qA(n,r,a,l,f){if(r==="submit"&&a&&a.stateNode===f){var d=k_((f[Oe]||null).action),b=l.submitter;b&&(r=(r=b[Oe]||null)?k_(r.formAction):b.getAttribute("formAction"),r!==null&&(d=r,b=null));var w=new Ui("action","action",null,l,f);n.push({event:w,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(ps!==0){var V=b?V_(f,b):new FormData(f);Rd(a,{pending:!0,data:V,method:f.method,action:d},null,V)}}else typeof d=="function"&&(w.preventDefault(),V=b?V_(f,b):new FormData(f),Rd(a,{pending:!0,data:V,method:f.method,action:d},d,V))},currentTarget:f}]})}}for(var cm=0;cm<$f.length;cm++){var hm=$f[cm],HA=hm.toLowerCase(),GA=hm[0].toUpperCase()+hm.slice(1);xi(HA,"on"+GA)}xi(fy,"onAnimationEnd"),xi(dy,"onAnimationIteration"),xi(my,"onAnimationStart"),xi("dblclick","onDoubleClick"),xi("focusin","onFocus"),xi("focusout","onBlur"),xi(oA,"onTransitionRun"),xi(lA,"onTransitionStart"),xi(uA,"onTransitionCancel"),xi(py,"onTransitionEnd"),Vi("onMouseEnter",["mouseout","mouseover"]),Vi("onMouseLeave",["mouseout","mouseover"]),Vi("onPointerEnter",["pointerout","pointerover"]),Vi("onPointerLeave",["pointerout","pointerover"]),ei("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ei("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ei("onBeforeInput",["compositionend","keypress","textInput","paste"]),ei("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ei("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ei("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ql="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),$A=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ql));function j_(n,r){r=(r&4)!==0;for(var a=0;a<n.length;a++){var l=n[a],f=l.event;l=l.listeners;t:{var d=void 0;if(r)for(var b=l.length-1;0<=b;b--){var w=l[b],V=w.instance,Y=w.currentTarget;if(w=w.listener,V!==d&&f.isPropagationStopped())break t;d=w,f.currentTarget=Y;try{d(f)}catch(nt){fc(nt)}f.currentTarget=null,d=V}else for(b=0;b<l.length;b++){if(w=l[b],V=w.instance,Y=w.currentTarget,w=w.listener,V!==d&&f.isPropagationStopped())break t;d=w,f.currentTarget=Y;try{d(f)}catch(nt){fc(nt)}f.currentTarget=null,d=V}}}}function qt(n,r){var a=r[ar];a===void 0&&(a=r[ar]=new Set);var l=n+"__bubble";a.has(l)||(L_(r,n,2,!1),a.add(l))}function fm(n,r,a){var l=0;r&&(l|=4),L_(a,n,l,r)}var Jc="_reactListening"+Math.random().toString(36).slice(2);function dm(n){if(!n[Jc]){n[Jc]=!0,Hr.forEach(function(a){a!=="selectionchange"&&($A.has(a)||fm(a,!1,n),fm(a,!0,n))});var r=n.nodeType===9?n:n.ownerDocument;r===null||r[Jc]||(r[Jc]=!0,fm("selectionchange",!1,r))}}function L_(n,r,a,l){switch(fv(r)){case 2:var f=bw;break;case 8:f=Ew;break;default:f=Cm}a=f.bind(null,r,a,n),f=void 0,!Xs||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(f=!0),l?f!==void 0?n.addEventListener(r,a,{capture:!0,passive:f}):n.addEventListener(r,a,!0):f!==void 0?n.addEventListener(r,a,{passive:f}):n.addEventListener(r,a,!1)}function mm(n,r,a,l,f){var d=l;if((r&1)===0&&(r&2)===0&&l!==null)t:for(;;){if(l===null)return;var b=l.tag;if(b===3||b===4){var w=l.stateNode.containerInfo;if(w===f)break;if(b===4)for(b=l.return;b!==null;){var V=b.tag;if((V===3||V===4)&&b.stateNode.containerInfo===f)return;b=b.return}for(;w!==null;){if(b=wn(w),b===null)return;if(V=b.tag,V===5||V===6||V===26||V===27){l=d=b;continue t}w=w.parentNode}}l=l.return}Xr(function(){var Y=d,nt=ni(a),at=[];t:{var X=gy.get(n);if(X!==void 0){var tt=Ui,vt=n;switch(n){case"keypress":if(Js(a)===0)break t;case"keydown":case"keyup":tt=uc;break;case"focusin":vt="focus",tt=ta;break;case"focusout":vt="blur",tt=ta;break;case"beforeblur":case"afterblur":tt=ta;break;case"click":if(a.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":tt=ml;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":tt=tc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":tt=y;break;case fy:case dy:case my:tt=nc;break;case py:tt=N;break;case"scroll":case"scrollend":tt=dl;break;case"wheel":tt=W;break;case"copy":case"cut":case"paste":tt=ic;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":tt=cr;break;case"toggle":case"beforetoggle":tt=Pt}var Ct=(r&4)!==0,fe=!Ct&&(n==="scroll"||n==="scrollend"),B=Ct?X!==null?X+"Capture":null:X;Ct=[];for(var z=Y,$;z!==null;){var st=z;if($=st.stateNode,st=st.tag,st!==5&&st!==26&&st!==27||$===null||B===null||(st=vi(z,B),st!=null&&Ct.push(Hl(z,st,$))),fe)break;z=z.return}0<Ct.length&&(X=new tt(X,vt,null,a,nt),at.push({event:X,listeners:Ct}))}}if((r&7)===0){t:{if(X=n==="mouseover"||n==="pointerover",tt=n==="mouseout"||n==="pointerout",X&&a!==cl&&(vt=a.relatedTarget||a.fromElement)&&(wn(vt)||vt[Un]))break t;if((tt||X)&&(X=nt.window===nt?nt:(X=nt.ownerDocument)?X.defaultView||X.parentWindow:window,tt?(vt=a.relatedTarget||a.toElement,tt=Y,vt=vt?wn(vt):null,vt!==null&&(fe=u(vt),Ct=vt.tag,vt!==fe||Ct!==5&&Ct!==27&&Ct!==6)&&(vt=null)):(tt=null,vt=Y),tt!==vt)){if(Ct=ml,st="onMouseLeave",B="onMouseEnter",z="mouse",(n==="pointerout"||n==="pointerover")&&(Ct=cr,st="onPointerLeave",B="onPointerEnter",z="pointer"),fe=tt==null?X:ke(tt),$=vt==null?X:ke(vt),X=new Ct(st,z+"leave",tt,a,nt),X.target=fe,X.relatedTarget=$,st=null,wn(nt)===Y&&(Ct=new Ct(B,z+"enter",vt,a,nt),Ct.target=$,Ct.relatedTarget=fe,st=Ct),fe=st,tt&&vt)e:{for(Ct=YA,B=tt,z=vt,$=0,st=B;st;st=Ct(st))$++;st=0;for(var wt=z;wt;wt=Ct(wt))st++;for(;0<$-st;)B=Ct(B),$--;for(;0<st-$;)z=Ct(z),st--;for(;$--;){if(B===z||z!==null&&B===z.alternate){Ct=B;break e}B=Ct(B),z=Ct(z)}Ct=null}else Ct=null;tt!==null&&P_(at,X,tt,Ct,!1),vt!==null&&fe!==null&&P_(at,fe,vt,Ct,!0)}}t:{if(X=Y?ke(Y):window,tt=X.nodeName&&X.nodeName.toLowerCase(),tt==="select"||tt==="input"&&X.type==="file")var Wt=ey;else if(Wg(X))if(ny)Wt=rA;else{Wt=nA;var Tt=eA}else tt=X.nodeName,!tt||tt.toLowerCase()!=="input"||X.type!=="checkbox"&&X.type!=="radio"?Y&&Ha(Y.elementType)&&(Wt=ey):Wt=iA;if(Wt&&(Wt=Wt(n,Y))){ty(at,Wt,a,nt);break t}Tt&&Tt(n,X,Y),n==="focusout"&&Y&&X.type==="number"&&Y.memoizedProps.value!=null&&ol(X,"number",X.value)}switch(Tt=Y?ke(Y):window,n){case"focusin":(Wg(Tt)||Tt.contentEditable==="true")&&(Ja=Tt,qf=Y,vl=null);break;case"focusout":vl=qf=Ja=null;break;case"mousedown":Hf=!0;break;case"contextmenu":case"mouseup":case"dragend":Hf=!1,cy(at,a,nt);break;case"selectionchange":if(aA)break;case"keydown":case"keyup":cy(at,a,nt)}var Bt;if(ne)t:{switch(n){case"compositionstart":var Gt="onCompositionStart";break t;case"compositionend":Gt="onCompositionEnd";break t;case"compositionupdate":Gt="onCompositionUpdate";break t}Gt=void 0}else Za?ea(n,a)&&(Gt="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(Gt="onCompositionStart");Gt&&(Fi&&a.locale!=="ko"&&(Za||Gt!=="onCompositionStart"?Gt==="onCompositionEnd"&&Za&&(Bt=fl()):(Pi=nt,hl="value"in Pi?Pi.value:Pi.textContent,Za=!0)),Tt=Wc(Y,Gt),0<Tt.length&&(Gt=new Bi(Gt,n,null,a,nt),at.push({event:Gt,listeners:Tt}),Bt?Gt.data=Bt:(Bt=Xa(a),Bt!==null&&(Gt.data=Bt)))),(Bt=ri?Z1(n,a):J1(n,a))&&(Gt=Wc(Y,"onBeforeInput"),0<Gt.length&&(Tt=new Bi("onBeforeInput","beforeinput",null,a,nt),at.push({event:Tt,listeners:Gt}),Tt.data=Bt)),qA(at,n,Y,a,nt)}j_(at,r)})}function Hl(n,r,a){return{instance:n,listener:r,currentTarget:a}}function Wc(n,r){for(var a=r+"Capture",l=[];n!==null;){var f=n,d=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||d===null||(f=vi(n,a),f!=null&&l.unshift(Hl(n,f,d)),f=vi(n,r),f!=null&&l.push(Hl(n,f,d))),n.tag===3)return l;n=n.return}return[]}function YA(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function P_(n,r,a,l,f){for(var d=r._reactName,b=[];a!==null&&a!==l;){var w=a,V=w.alternate,Y=w.stateNode;if(w=w.tag,V!==null&&V===l)break;w!==5&&w!==26&&w!==27||Y===null||(V=Y,f?(Y=vi(a,d),Y!=null&&b.unshift(Hl(a,Y,V))):f||(Y=vi(a,d),Y!=null&&b.push(Hl(a,Y,V)))),a=a.return}b.length!==0&&n.push({event:r,listeners:b})}var KA=/\r\n?/g,QA=/\u0000|\uFFFD/g;function U_(n){return(typeof n=="string"?n:""+n).replace(KA,`
`).replace(QA,"")}function z_(n,r){return r=U_(r),U_(n)===r}function he(n,r,a,l,f,d){switch(a){case"children":typeof l=="string"?r==="body"||r==="textarea"&&l===""||Nn(n,l):(typeof l=="number"||typeof l=="bigint")&&r!=="body"&&Nn(n,""+l);break;case"className":zn(n,"class",l);break;case"tabIndex":zn(n,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":zn(n,a,l);break;case"style":ul(n,l,d);break;case"data":if(r!=="object"){zn(n,"data",l);break}case"src":case"href":if(l===""&&(r!=="a"||a!=="href")){n.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){n.removeAttribute(a);break}l=Ga(""+l),n.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){n.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(a==="formAction"?(r!=="input"&&he(n,r,"name",f.name,f,null),he(n,r,"formEncType",f.formEncType,f,null),he(n,r,"formMethod",f.formMethod,f,null),he(n,r,"formTarget",f.formTarget,f,null)):(he(n,r,"encType",f.encType,f,null),he(n,r,"method",f.method,f,null),he(n,r,"target",f.target,f,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){n.removeAttribute(a);break}l=Ga(""+l),n.setAttribute(a,l);break;case"onClick":l!=null&&(n.onclick=_i);break;case"onScroll":l!=null&&qt("scroll",n);break;case"onScrollEnd":l!=null&&qt("scrollend",n);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(f.children!=null)throw Error(s(60));n.innerHTML=a}}break;case"multiple":n.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":n.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){n.removeAttribute("xlink:href");break}a=Ga(""+l),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(a,""+l):n.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(a,""):n.removeAttribute(a);break;case"capture":case"download":l===!0?n.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(a,l):n.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?n.setAttribute(a,l):n.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?n.removeAttribute(a):n.setAttribute(a,l);break;case"popover":qt("beforetoggle",n),qt("toggle",n),Fa(n,"popover",l);break;case"xlinkActuate":Ve(n,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Ve(n,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Ve(n,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Ve(n,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Ve(n,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Ve(n,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Ve(n,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Ve(n,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Ve(n,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Fa(n,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Wu.get(a)||a,Fa(n,a,l))}}function pm(n,r,a,l,f,d){switch(a){case"style":ul(n,l,d);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(f.children!=null)throw Error(s(60));n.innerHTML=a}}break;case"children":typeof l=="string"?Nn(n,l):(typeof l=="number"||typeof l=="bigint")&&Nn(n,""+l);break;case"onScroll":l!=null&&qt("scroll",n);break;case"onScrollEnd":l!=null&&qt("scrollend",n);break;case"onClick":l!=null&&(n.onclick=_i);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!$s.hasOwnProperty(a))t:{if(a[0]==="o"&&a[1]==="n"&&(f=a.endsWith("Capture"),r=a.slice(2,f?a.length-7:void 0),d=n[Oe]||null,d=d!=null?d[a]:null,typeof d=="function"&&n.removeEventListener(r,d,f),typeof l=="function")){typeof d!="function"&&d!==null&&(a in n?n[a]=null:n.hasAttribute(a)&&n.removeAttribute(a)),n.addEventListener(r,l,f);break t}a in n?n[a]=l:l===!0?n.setAttribute(a,""):Fa(n,a,l)}}}function nn(n,r,a){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":qt("error",n),qt("load",n);var l=!1,f=!1,d;for(d in a)if(a.hasOwnProperty(d)){var b=a[d];if(b!=null)switch(d){case"src":l=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:he(n,r,d,b,a,null)}}f&&he(n,r,"srcSet",a.srcSet,a,null),l&&he(n,r,"src",a.src,a,null);return;case"input":qt("invalid",n);var w=d=b=f=null,V=null,Y=null;for(l in a)if(a.hasOwnProperty(l)){var nt=a[l];if(nt!=null)switch(l){case"name":f=nt;break;case"type":b=nt;break;case"checked":V=nt;break;case"defaultChecked":Y=nt;break;case"value":d=nt;break;case"defaultValue":w=nt;break;case"children":case"dangerouslySetInnerHTML":if(nt!=null)throw Error(s(137,r));break;default:he(n,r,l,nt,a,null)}}Xu(n,d,w,V,Y,b,f,!1);return;case"select":qt("invalid",n),l=b=d=null;for(f in a)if(a.hasOwnProperty(f)&&(w=a[f],w!=null))switch(f){case"value":d=w;break;case"defaultValue":b=w;break;case"multiple":l=w;default:he(n,r,f,w,a,null)}r=d,a=b,n.multiple=!!l,r!=null?$r(n,!!l,r,!1):a!=null&&$r(n,!!l,a,!0);return;case"textarea":qt("invalid",n),d=f=l=null;for(b in a)if(a.hasOwnProperty(b)&&(w=a[b],w!=null))switch(b){case"value":l=w;break;case"defaultValue":f=w;break;case"children":d=w;break;case"dangerouslySetInnerHTML":if(w!=null)throw Error(s(91));break;default:he(n,r,b,w,a,null)}Yr(n,l,f,d);return;case"option":for(V in a)if(a.hasOwnProperty(V)&&(l=a[V],l!=null))switch(V){case"selected":n.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:he(n,r,V,l,a,null)}return;case"dialog":qt("beforetoggle",n),qt("toggle",n),qt("cancel",n),qt("close",n);break;case"iframe":case"object":qt("load",n);break;case"video":case"audio":for(l=0;l<ql.length;l++)qt(ql[l],n);break;case"image":qt("error",n),qt("load",n);break;case"details":qt("toggle",n);break;case"embed":case"source":case"link":qt("error",n),qt("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Y in a)if(a.hasOwnProperty(Y)&&(l=a[Y],l!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:he(n,r,Y,l,a,null)}return;default:if(Ha(r)){for(nt in a)a.hasOwnProperty(nt)&&(l=a[nt],l!==void 0&&pm(n,r,nt,l,a,void 0));return}}for(w in a)a.hasOwnProperty(w)&&(l=a[w],l!=null&&he(n,r,w,l,a,null))}function XA(n,r,a,l){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,d=null,b=null,w=null,V=null,Y=null,nt=null;for(tt in a){var at=a[tt];if(a.hasOwnProperty(tt)&&at!=null)switch(tt){case"checked":break;case"value":break;case"defaultValue":V=at;default:l.hasOwnProperty(tt)||he(n,r,tt,null,l,at)}}for(var X in l){var tt=l[X];if(at=a[X],l.hasOwnProperty(X)&&(tt!=null||at!=null))switch(X){case"type":d=tt;break;case"name":f=tt;break;case"checked":Y=tt;break;case"defaultChecked":nt=tt;break;case"value":b=tt;break;case"defaultValue":w=tt;break;case"children":case"dangerouslySetInnerHTML":if(tt!=null)throw Error(s(137,r));break;default:tt!==at&&he(n,r,X,tt,l,at)}}qa(n,b,w,V,Y,nt,d,f);return;case"select":tt=b=w=X=null;for(d in a)if(V=a[d],a.hasOwnProperty(d)&&V!=null)switch(d){case"value":break;case"multiple":tt=V;default:l.hasOwnProperty(d)||he(n,r,d,null,l,V)}for(f in l)if(d=l[f],V=a[f],l.hasOwnProperty(f)&&(d!=null||V!=null))switch(f){case"value":X=d;break;case"defaultValue":w=d;break;case"multiple":b=d;default:d!==V&&he(n,r,f,d,l,V)}r=w,a=b,l=tt,X!=null?$r(n,!!a,X,!1):!!l!=!!a&&(r!=null?$r(n,!!a,r,!0):$r(n,!!a,a?[]:"",!1));return;case"textarea":tt=X=null;for(w in a)if(f=a[w],a.hasOwnProperty(w)&&f!=null&&!l.hasOwnProperty(w))switch(w){case"value":break;case"children":break;default:he(n,r,w,null,l,f)}for(b in l)if(f=l[b],d=a[b],l.hasOwnProperty(b)&&(f!=null||d!=null))switch(b){case"value":X=f;break;case"defaultValue":tt=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(s(91));break;default:f!==d&&he(n,r,b,f,l,d)}Zu(n,X,tt);return;case"option":for(var vt in a)if(X=a[vt],a.hasOwnProperty(vt)&&X!=null&&!l.hasOwnProperty(vt))switch(vt){case"selected":n.selected=!1;break;default:he(n,r,vt,null,l,X)}for(V in l)if(X=l[V],tt=a[V],l.hasOwnProperty(V)&&X!==tt&&(X!=null||tt!=null))switch(V){case"selected":n.selected=X&&typeof X!="function"&&typeof X!="symbol";break;default:he(n,r,V,X,l,tt)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ct in a)X=a[Ct],a.hasOwnProperty(Ct)&&X!=null&&!l.hasOwnProperty(Ct)&&he(n,r,Ct,null,l,X);for(Y in l)if(X=l[Y],tt=a[Y],l.hasOwnProperty(Y)&&X!==tt&&(X!=null||tt!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(s(137,r));break;default:he(n,r,Y,X,l,tt)}return;default:if(Ha(r)){for(var fe in a)X=a[fe],a.hasOwnProperty(fe)&&X!==void 0&&!l.hasOwnProperty(fe)&&pm(n,r,fe,void 0,l,X);for(nt in l)X=l[nt],tt=a[nt],!l.hasOwnProperty(nt)||X===tt||X===void 0&&tt===void 0||pm(n,r,nt,X,l,tt);return}}for(var B in a)X=a[B],a.hasOwnProperty(B)&&X!=null&&!l.hasOwnProperty(B)&&he(n,r,B,null,l,X);for(at in l)X=l[at],tt=a[at],!l.hasOwnProperty(at)||X===tt||X==null&&tt==null||he(n,r,at,X,l,tt)}function B_(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function ZA(){if(typeof performance.getEntriesByType=="function"){for(var n=0,r=0,a=performance.getEntriesByType("resource"),l=0;l<a.length;l++){var f=a[l],d=f.transferSize,b=f.initiatorType,w=f.duration;if(d&&w&&B_(b)){for(b=0,w=f.responseEnd,l+=1;l<a.length;l++){var V=a[l],Y=V.startTime;if(Y>w)break;var nt=V.transferSize,at=V.initiatorType;nt&&B_(at)&&(V=V.responseEnd,b+=nt*(V<w?1:(w-Y)/(V-Y)))}if(--l,r+=8*(d+b)/(f.duration/1e3),n++,10<n)break}}if(0<n)return r/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var gm=null,ym=null;function th(n){return n.nodeType===9?n:n.ownerDocument}function F_(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function q_(n,r){if(n===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&r==="foreignObject"?0:n}function _m(n,r){return n==="textarea"||n==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var vm=null;function JA(){var n=window.event;return n&&n.type==="popstate"?n===vm?!1:(vm=n,!0):(vm=null,!1)}var H_=typeof setTimeout=="function"?setTimeout:void 0,WA=typeof clearTimeout=="function"?clearTimeout:void 0,G_=typeof Promise=="function"?Promise:void 0,tw=typeof queueMicrotask=="function"?queueMicrotask:typeof G_<"u"?function(n){return G_.resolve(null).then(n).catch(ew)}:H_;function ew(n){setTimeout(function(){throw n})}function gs(n){return n==="head"}function $_(n,r){var a=r,l=0;do{var f=a.nextSibling;if(n.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"||a==="/&"){if(l===0){n.removeChild(f),So(r);return}l--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")l++;else if(a==="html")Gl(n.ownerDocument.documentElement);else if(a==="head"){a=n.ownerDocument.head,Gl(a);for(var d=a.firstChild;d;){var b=d.nextSibling,w=d.nodeName;d[gn]||w==="SCRIPT"||w==="STYLE"||w==="LINK"&&d.rel.toLowerCase()==="stylesheet"||a.removeChild(d),d=b}}else a==="body"&&Gl(n.ownerDocument.body);a=f}while(a);So(r)}function Y_(n,r){var a=n;n=0;do{var l=a.nextSibling;if(a.nodeType===1?r?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(r?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),l&&l.nodeType===8)if(a=l.data,a==="/$"){if(n===0)break;n--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||n++;a=l}while(a)}function bm(n){var r=n.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var a=r;switch(r=r.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":bm(a),Me(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}n.removeChild(a)}}function nw(n,r,a,l){for(;n.nodeType===1;){var f=a;if(n.nodeName.toLowerCase()!==r.toLowerCase()){if(!l&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(l){if(!n[gn])switch(r){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(d=n.getAttribute("rel"),d==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(d!==f.rel||n.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||n.getAttribute("title")!==(f.title==null?null:f.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(d=n.getAttribute("src"),(d!==(f.src==null?null:f.src)||n.getAttribute("type")!==(f.type==null?null:f.type)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&d&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(r==="input"&&n.type==="hidden"){var d=f.name==null?null:""+f.name;if(f.type==="hidden"&&n.getAttribute("name")===d)return n}else return n;if(n=hi(n.nextSibling),n===null)break}return null}function iw(n,r,a){if(r==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!a||(n=hi(n.nextSibling),n===null))return null;return n}function K_(n,r){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!r||(n=hi(n.nextSibling),n===null))return null;return n}function Em(n){return n.data==="$?"||n.data==="$~"}function Tm(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function rw(n,r){var a=n.ownerDocument;if(n.data==="$~")n._reactRetry=r;else if(n.data!=="$?"||a.readyState!=="loading")r();else{var l=function(){r(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),n._reactRetry=l}}function hi(n){for(;n!=null;n=n.nextSibling){var r=n.nodeType;if(r===1||r===3)break;if(r===8){if(r=n.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return n}var xm=null;function Q_(n){n=n.nextSibling;for(var r=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"||a==="/&"){if(r===0)return hi(n.nextSibling);r--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||r++}n=n.nextSibling}return null}function X_(n){n=n.previousSibling;for(var r=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(r===0)return n;r--}else a!=="/$"&&a!=="/&"||r++}n=n.previousSibling}return null}function Z_(n,r,a){switch(r=th(a),n){case"html":if(n=r.documentElement,!n)throw Error(s(452));return n;case"head":if(n=r.head,!n)throw Error(s(453));return n;case"body":if(n=r.body,!n)throw Error(s(454));return n;default:throw Error(s(451))}}function Gl(n){for(var r=n.attributes;r.length;)n.removeAttributeNode(r[0]);Me(n)}var fi=new Map,J_=new Set;function eh(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var wr=P.d;P.d={f:sw,r:aw,D:ow,C:lw,L:uw,m:cw,X:fw,S:hw,M:dw};function sw(){var n=wr.f(),r=$c();return n||r}function aw(n){var r=yn(n);r!==null&&r.tag===5&&r.type==="form"?p0(r):wr.r(n)}var xo=typeof document>"u"?null:document;function W_(n,r,a){var l=xo;if(l&&typeof r=="string"&&r){var f=Sn(r);f='link[rel="'+n+'"][href="'+f+'"]',typeof a=="string"&&(f+='[crossorigin="'+a+'"]'),J_.has(f)||(J_.add(f),n={rel:n,crossOrigin:a,href:r},l.querySelector(f)===null&&(r=l.createElement("link"),nn(r,"link",n),we(r),l.head.appendChild(r)))}}function ow(n){wr.D(n),W_("dns-prefetch",n,null)}function lw(n,r){wr.C(n,r),W_("preconnect",n,r)}function uw(n,r,a){wr.L(n,r,a);var l=xo;if(l&&n&&r){var f='link[rel="preload"][as="'+Sn(r)+'"]';r==="image"&&a&&a.imageSrcSet?(f+='[imagesrcset="'+Sn(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(f+='[imagesizes="'+Sn(a.imageSizes)+'"]')):f+='[href="'+Sn(n)+'"]';var d=f;switch(r){case"style":d=Ao(n);break;case"script":d=wo(n)}fi.has(d)||(n=T({rel:"preload",href:r==="image"&&a&&a.imageSrcSet?void 0:n,as:r},a),fi.set(d,n),l.querySelector(f)!==null||r==="style"&&l.querySelector($l(d))||r==="script"&&l.querySelector(Yl(d))||(r=l.createElement("link"),nn(r,"link",n),we(r),l.head.appendChild(r)))}}function cw(n,r){wr.m(n,r);var a=xo;if(a&&n){var l=r&&typeof r.as=="string"?r.as:"script",f='link[rel="modulepreload"][as="'+Sn(l)+'"][href="'+Sn(n)+'"]',d=f;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=wo(n)}if(!fi.has(d)&&(n=T({rel:"modulepreload",href:n},r),fi.set(d,n),a.querySelector(f)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Yl(d)))return}l=a.createElement("link"),nn(l,"link",n),we(l),a.head.appendChild(l)}}}function hw(n,r,a){wr.S(n,r,a);var l=xo;if(l&&n){var f=ti(l).hoistableStyles,d=Ao(n);r=r||"default";var b=f.get(d);if(!b){var w={loading:0,preload:null};if(b=l.querySelector($l(d)))w.loading=5;else{n=T({rel:"stylesheet",href:n,"data-precedence":r},a),(a=fi.get(d))&&Am(n,a);var V=b=l.createElement("link");we(V),nn(V,"link",n),V._p=new Promise(function(Y,nt){V.onload=Y,V.onerror=nt}),V.addEventListener("load",function(){w.loading|=1}),V.addEventListener("error",function(){w.loading|=2}),w.loading|=4,nh(b,r,l)}b={type:"stylesheet",instance:b,count:1,state:w},f.set(d,b)}}}function fw(n,r){wr.X(n,r);var a=xo;if(a&&n){var l=ti(a).hoistableScripts,f=wo(n),d=l.get(f);d||(d=a.querySelector(Yl(f)),d||(n=T({src:n,async:!0},r),(r=fi.get(f))&&wm(n,r),d=a.createElement("script"),we(d),nn(d,"link",n),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(f,d))}}function dw(n,r){wr.M(n,r);var a=xo;if(a&&n){var l=ti(a).hoistableScripts,f=wo(n),d=l.get(f);d||(d=a.querySelector(Yl(f)),d||(n=T({src:n,async:!0,type:"module"},r),(r=fi.get(f))&&wm(n,r),d=a.createElement("script"),we(d),nn(d,"link",n),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(f,d))}}function tv(n,r,a,l){var f=(f=St.current)?eh(f):null;if(!f)throw Error(s(446));switch(n){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(r=Ao(a.href),a=ti(f).hoistableStyles,l=a.get(r),l||(l={type:"style",instance:null,count:0,state:null},a.set(r,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){n=Ao(a.href);var d=ti(f).hoistableStyles,b=d.get(n);if(b||(f=f.ownerDocument||f,b={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(n,b),(d=f.querySelector($l(n)))&&!d._p&&(b.instance=d,b.state.loading=5),fi.has(n)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},fi.set(n,a),d||mw(f,n,a,b.state))),r&&l===null)throw Error(s(528,""));return b}if(r&&l!==null)throw Error(s(529,""));return null;case"script":return r=a.async,a=a.src,typeof a=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=wo(a),a=ti(f).hoistableScripts,l=a.get(r),l||(l={type:"script",instance:null,count:0,state:null},a.set(r,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,n))}}function Ao(n){return'href="'+Sn(n)+'"'}function $l(n){return'link[rel="stylesheet"]['+n+"]"}function ev(n){return T({},n,{"data-precedence":n.precedence,precedence:null})}function mw(n,r,a,l){n.querySelector('link[rel="preload"][as="style"]['+r+"]")?l.loading=1:(r=n.createElement("link"),l.preload=r,r.addEventListener("load",function(){return l.loading|=1}),r.addEventListener("error",function(){return l.loading|=2}),nn(r,"link",a),we(r),n.head.appendChild(r))}function wo(n){return'[src="'+Sn(n)+'"]'}function Yl(n){return"script[async]"+n}function nv(n,r,a){if(r.count++,r.instance===null)switch(r.type){case"style":var l=n.querySelector('style[data-href~="'+Sn(a.href)+'"]');if(l)return r.instance=l,we(l),l;var f=T({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(n.ownerDocument||n).createElement("style"),we(l),nn(l,"style",f),nh(l,a.precedence,n),r.instance=l;case"stylesheet":f=Ao(a.href);var d=n.querySelector($l(f));if(d)return r.state.loading|=4,r.instance=d,we(d),d;l=ev(a),(f=fi.get(f))&&Am(l,f),d=(n.ownerDocument||n).createElement("link"),we(d);var b=d;return b._p=new Promise(function(w,V){b.onload=w,b.onerror=V}),nn(d,"link",l),r.state.loading|=4,nh(d,a.precedence,n),r.instance=d;case"script":return d=wo(a.src),(f=n.querySelector(Yl(d)))?(r.instance=f,we(f),f):(l=a,(f=fi.get(d))&&(l=T({},a),wm(l,f)),n=n.ownerDocument||n,f=n.createElement("script"),we(f),nn(f,"link",l),n.head.appendChild(f),r.instance=f);case"void":return null;default:throw Error(s(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(l=r.instance,r.state.loading|=4,nh(l,a.precedence,n));return r.instance}function nh(n,r,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=l.length?l[l.length-1]:null,d=f,b=0;b<l.length;b++){var w=l[b];if(w.dataset.precedence===r)d=w;else if(d!==f)break}d?d.parentNode.insertBefore(n,d.nextSibling):(r=a.nodeType===9?a.head:a,r.insertBefore(n,r.firstChild))}function Am(n,r){n.crossOrigin==null&&(n.crossOrigin=r.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=r.referrerPolicy),n.title==null&&(n.title=r.title)}function wm(n,r){n.crossOrigin==null&&(n.crossOrigin=r.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=r.referrerPolicy),n.integrity==null&&(n.integrity=r.integrity)}var ih=null;function iv(n,r,a){if(ih===null){var l=new Map,f=ih=new Map;f.set(a,l)}else f=ih,l=f.get(a),l||(l=new Map,f.set(a,l));if(l.has(n))return l;for(l.set(n,null),a=a.getElementsByTagName(n),f=0;f<a.length;f++){var d=a[f];if(!(d[gn]||d[zt]||n==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var b=d.getAttribute(r)||"";b=n+b;var w=l.get(b);w?w.push(d):l.set(b,[d])}}return l}function rv(n,r,a){n=n.ownerDocument||n,n.head.insertBefore(a,r==="title"?n.querySelector("head > title"):null)}function pw(n,r,a){if(a===1||r.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return n=r.disabled,typeof r.precedence=="string"&&n==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function sv(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function gw(n,r,a,l){if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var f=Ao(l.href),d=r.querySelector($l(f));if(d){r=d._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(n.count++,n=rh.bind(n),r.then(n,n)),a.state.loading|=4,a.instance=d,we(d);return}d=r.ownerDocument||r,l=ev(l),(f=fi.get(f))&&Am(l,f),d=d.createElement("link"),we(d);var b=d;b._p=new Promise(function(w,V){b.onload=w,b.onerror=V}),nn(d,"link",l),a.instance=d}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(a,r),(r=a.state.preload)&&(a.state.loading&3)===0&&(n.count++,a=rh.bind(n),r.addEventListener("load",a),r.addEventListener("error",a))}}var Sm=0;function yw(n,r){return n.stylesheets&&n.count===0&&ah(n,n.stylesheets),0<n.count||0<n.imgCount?function(a){var l=setTimeout(function(){if(n.stylesheets&&ah(n,n.stylesheets),n.unsuspend){var d=n.unsuspend;n.unsuspend=null,d()}},6e4+r);0<n.imgBytes&&Sm===0&&(Sm=62500*ZA());var f=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&ah(n,n.stylesheets),n.unsuspend)){var d=n.unsuspend;n.unsuspend=null,d()}},(n.imgBytes>Sm?50:800)+r);return n.unsuspend=a,function(){n.unsuspend=null,clearTimeout(l),clearTimeout(f)}}:null}function rh(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)ah(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var sh=null;function ah(n,r){n.stylesheets=null,n.unsuspend!==null&&(n.count++,sh=new Map,r.forEach(_w,n),sh=null,rh.call(n))}function _w(n,r){if(!(r.state.loading&4)){var a=sh.get(n);if(a)var l=a.get(null);else{a=new Map,sh.set(n,a);for(var f=n.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<f.length;d++){var b=f[d];(b.nodeName==="LINK"||b.getAttribute("media")!=="not all")&&(a.set(b.dataset.precedence,b),l=b)}l&&a.set(null,l)}f=r.instance,b=f.getAttribute("data-precedence"),d=a.get(b)||l,d===l&&a.set(null,f),a.set(b,f),this.count++,l=rh.bind(this),f.addEventListener("load",l),f.addEventListener("error",l),d?d.parentNode.insertBefore(f,d.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(f,n.firstChild)),r.state.loading|=4}}var Kl={$$typeof:J,Provider:null,Consumer:null,_currentValue:K,_currentValue2:K,_threadCount:0};function vw(n,r,a,l,f,d,b,w,V){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Et(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Et(0),this.hiddenUpdates=Et(null),this.identifierPrefix=l,this.onUncaughtError=f,this.onCaughtError=d,this.onRecoverableError=b,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=V,this.incompleteTransitions=new Map}function av(n,r,a,l,f,d,b,w,V,Y,nt,at){return n=new vw(n,r,a,b,V,Y,nt,at,w),r=1,d===!0&&(r|=24),d=Fn(3,null,null,r),n.current=d,d.stateNode=n,r=sd(),r.refCount++,n.pooledCache=r,r.refCount++,d.memoizedState={element:l,isDehydrated:a,cache:r},ud(d),n}function ov(n){return n?(n=eo,n):eo}function lv(n,r,a,l,f,d){f=ov(f),l.context===null?l.context=f:l.pendingContext=f,l=ss(r),l.payload={element:a},d=d===void 0?null:d,d!==null&&(l.callback=d),a=as(n,l,r),a!==null&&(On(a,n,r),Sl(a,n,r))}function uv(n,r){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<r?a:r}}function Nm(n,r){uv(n,r),(n=n.alternate)&&uv(n,r)}function cv(n){if(n.tag===13||n.tag===31){var r=ra(n,67108864);r!==null&&On(r,n,67108864),Nm(n,67108864)}}function hv(n){if(n.tag===13||n.tag===31){var r=Yn();r=Pn(r);var a=ra(n,r);a!==null&&On(a,n,r),Nm(n,r)}}var oh=!0;function bw(n,r,a,l){var f=M.T;M.T=null;var d=P.p;try{P.p=2,Cm(n,r,a,l)}finally{P.p=d,M.T=f}}function Ew(n,r,a,l){var f=M.T;M.T=null;var d=P.p;try{P.p=8,Cm(n,r,a,l)}finally{P.p=d,M.T=f}}function Cm(n,r,a,l){if(oh){var f=Rm(l);if(f===null)mm(n,r,l,lh,a),dv(n,l);else if(xw(f,n,r,a,l))l.stopPropagation();else if(dv(n,l),r&4&&-1<Tw.indexOf(n)){for(;f!==null;){var d=yn(f);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var b=Zn(d.pendingLanes);if(b!==0){var w=d;for(w.pendingLanes|=2,w.entangledLanes|=2;b;){var V=1<<31-be(b);w.entanglements[1]|=V,b&=~V}$i(d),(ie&6)===0&&(Hc=qe()+500,Fl(0))}}break;case 31:case 13:w=ra(d,2),w!==null&&On(w,d,2),$c(),Nm(d,2)}if(d=Rm(l),d===null&&mm(n,r,l,lh,a),d===f)break;f=d}f!==null&&l.stopPropagation()}else mm(n,r,l,null,a)}}function Rm(n){return n=ni(n),Im(n)}var lh=null;function Im(n){if(lh=null,n=wn(n),n!==null){var r=u(n);if(r===null)n=null;else{var a=r.tag;if(a===13){if(n=c(r),n!==null)return n;n=null}else if(a===31){if(n=m(r),n!==null)return n;n=null}else if(a===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;n=null}else r!==n&&(n=null)}}return lh=n,null}function fv(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(pi()){case Hs:return 2;case En:return 8;case Ln:case ja:return 32;case La:return 268435456;default:return 32}default:return 32}}var Dm=!1,ys=null,_s=null,vs=null,Ql=new Map,Xl=new Map,bs=[],Tw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function dv(n,r){switch(n){case"focusin":case"focusout":ys=null;break;case"dragenter":case"dragleave":_s=null;break;case"mouseover":case"mouseout":vs=null;break;case"pointerover":case"pointerout":Ql.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Xl.delete(r.pointerId)}}function Zl(n,r,a,l,f,d){return n===null||n.nativeEvent!==d?(n={blockedOn:r,domEventName:a,eventSystemFlags:l,nativeEvent:d,targetContainers:[f]},r!==null&&(r=yn(r),r!==null&&cv(r)),n):(n.eventSystemFlags|=l,r=n.targetContainers,f!==null&&r.indexOf(f)===-1&&r.push(f),n)}function xw(n,r,a,l,f){switch(r){case"focusin":return ys=Zl(ys,n,r,a,l,f),!0;case"dragenter":return _s=Zl(_s,n,r,a,l,f),!0;case"mouseover":return vs=Zl(vs,n,r,a,l,f),!0;case"pointerover":var d=f.pointerId;return Ql.set(d,Zl(Ql.get(d)||null,n,r,a,l,f)),!0;case"gotpointercapture":return d=f.pointerId,Xl.set(d,Zl(Xl.get(d)||null,n,r,a,l,f)),!0}return!1}function mv(n){var r=wn(n.target);if(r!==null){var a=u(r);if(a!==null){if(r=a.tag,r===13){if(r=c(a),r!==null){n.blockedOn=r,An(n.priority,function(){hv(a)});return}}else if(r===31){if(r=m(a),r!==null){n.blockedOn=r,An(n.priority,function(){hv(a)});return}}else if(r===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function uh(n){if(n.blockedOn!==null)return!1;for(var r=n.targetContainers;0<r.length;){var a=Rm(n.nativeEvent);if(a===null){a=n.nativeEvent;var l=new a.constructor(a.type,a);cl=l,a.target.dispatchEvent(l),cl=null}else return r=yn(a),r!==null&&cv(r),n.blockedOn=a,!1;r.shift()}return!0}function pv(n,r,a){uh(n)&&a.delete(r)}function Aw(){Dm=!1,ys!==null&&uh(ys)&&(ys=null),_s!==null&&uh(_s)&&(_s=null),vs!==null&&uh(vs)&&(vs=null),Ql.forEach(pv),Xl.forEach(pv)}function ch(n,r){n.blockedOn===r&&(n.blockedOn=null,Dm||(Dm=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Aw)))}var hh=null;function gv(n){hh!==n&&(hh=n,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){hh===n&&(hh=null);for(var r=0;r<n.length;r+=3){var a=n[r],l=n[r+1],f=n[r+2];if(typeof l!="function"){if(Im(l||a)===null)continue;break}var d=yn(a);d!==null&&(n.splice(r,3),r-=3,Rd(d,{pending:!0,data:f,method:a.method,action:l},l,f))}}))}function So(n){function r(V){return ch(V,n)}ys!==null&&ch(ys,n),_s!==null&&ch(_s,n),vs!==null&&ch(vs,n),Ql.forEach(r),Xl.forEach(r);for(var a=0;a<bs.length;a++){var l=bs[a];l.blockedOn===n&&(l.blockedOn=null)}for(;0<bs.length&&(a=bs[0],a.blockedOn===null);)mv(a),a.blockedOn===null&&bs.shift();if(a=(n.ownerDocument||n).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var f=a[l],d=a[l+1],b=f[Oe]||null;if(typeof d=="function")b||gv(a);else if(b){var w=null;if(d&&d.hasAttribute("formAction")){if(f=d,b=d[Oe]||null)w=b.formAction;else if(Im(f)!==null)continue}else w=b.action;typeof w=="function"?a[l+1]=w:(a.splice(l,3),l-=3),gv(a)}}}function yv(){function n(d){d.canIntercept&&d.info==="react-transition"&&d.intercept({handler:function(){return new Promise(function(b){return f=b})},focusReset:"manual",scroll:"manual"})}function r(){f!==null&&(f(),f=null),l||setTimeout(a,20)}function a(){if(!l&&!navigation.transition){var d=navigation.currentEntry;d&&d.url!=null&&navigation.navigate(d.url,{state:d.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,f=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(a,100),function(){l=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),f!==null&&(f(),f=null)}}}function Om(n){this._internalRoot=n}fh.prototype.render=Om.prototype.render=function(n){var r=this._internalRoot;if(r===null)throw Error(s(409));var a=r.current,l=Yn();lv(a,l,n,r,null,null)},fh.prototype.unmount=Om.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var r=n.containerInfo;lv(n.current,2,null,n,null,null),$c(),r[Un]=null}};function fh(n){this._internalRoot=n}fh.prototype.unstable_scheduleHydration=function(n){if(n){var r=Gs();n={blockedOn:null,target:n,priority:r};for(var a=0;a<bs.length&&r!==0&&r<bs[a].priority;a++);bs.splice(a,0,n),a===0&&mv(n)}};var _v=t.version;if(_v!=="19.2.1")throw Error(s(527,_v,"19.2.1"));P.findDOMNode=function(n){var r=n._reactInternals;if(r===void 0)throw typeof n.render=="function"?Error(s(188)):(n=Object.keys(n).join(","),Error(s(268,n)));return n=g(r),n=n!==null?v(n):null,n=n===null?null:n.stateNode,n};var ww={bundleType:0,version:"19.2.1",rendererPackageName:"react-dom",currentDispatcherRef:M,reconcilerVersion:"19.2.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var dh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!dh.isDisabled&&dh.supportsFiber)try{Tn=dh.inject(ww),He=dh}catch{}}return Wl.createRoot=function(n,r){if(!o(n))throw Error(s(299));var a=!1,l="",f=w0,d=S0,b=N0;return r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(l=r.identifierPrefix),r.onUncaughtError!==void 0&&(f=r.onUncaughtError),r.onCaughtError!==void 0&&(d=r.onCaughtError),r.onRecoverableError!==void 0&&(b=r.onRecoverableError)),r=av(n,1,!1,null,null,a,l,null,f,d,b,yv),n[Un]=r.current,dm(n),new Om(r)},Wl.hydrateRoot=function(n,r,a){if(!o(n))throw Error(s(299));var l=!1,f="",d=w0,b=S0,w=N0,V=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onUncaughtError!==void 0&&(d=a.onUncaughtError),a.onCaughtError!==void 0&&(b=a.onCaughtError),a.onRecoverableError!==void 0&&(w=a.onRecoverableError),a.formState!==void 0&&(V=a.formState)),r=av(n,1,!0,r,a??null,l,f,V,d,b,w,yv),r.context=ov(null),a=r.current,l=Yn(),l=Pn(l),f=ss(l),f.callback=null,as(a,f,l),a=l,r.current.lanes=a,It(r,a),$i(r),n[Un]=r.current,dm(n),new fh(r)},Wl.version="19.2.1",Wl}var Cv;function jw(){if(Cv)return Vm.exports;Cv=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(t){console.error(t)}}return i(),Vm.exports=Vw(),Vm.exports}var Lw=jw();const Pw=()=>{};var Rv={};const zE=function(i){const t=[];let e=0;for(let s=0;s<i.length;s++){let o=i.charCodeAt(s);o<128?t[e++]=o:o<2048?(t[e++]=o>>6|192,t[e++]=o&63|128):(o&64512)===55296&&s+1<i.length&&(i.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(i.charCodeAt(++s)&1023),t[e++]=o>>18|240,t[e++]=o>>12&63|128,t[e++]=o>>6&63|128,t[e++]=o&63|128):(t[e++]=o>>12|224,t[e++]=o>>6&63|128,t[e++]=o&63|128)}return t},Uw=function(i){const t=[];let e=0,s=0;for(;e<i.length;){const o=i[e++];if(o<128)t[s++]=String.fromCharCode(o);else if(o>191&&o<224){const u=i[e++];t[s++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=i[e++],c=i[e++],m=i[e++],p=((o&7)<<18|(u&63)<<12|(c&63)<<6|m&63)-65536;t[s++]=String.fromCharCode(55296+(p>>10)),t[s++]=String.fromCharCode(56320+(p&1023))}else{const u=i[e++],c=i[e++];t[s++]=String.fromCharCode((o&15)<<12|(u&63)<<6|c&63)}}return t.join("")},BE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,t){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const e=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<i.length;o+=3){const u=i[o],c=o+1<i.length,m=c?i[o+1]:0,p=o+2<i.length,g=p?i[o+2]:0,v=u>>2,T=(u&3)<<4|m>>4;let x=(m&15)<<2|g>>6,S=g&63;p||(S=64,c||(x=64)),s.push(e[v],e[T],e[x],e[S])}return s.join("")},encodeString(i,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(i):this.encodeByteArray(zE(i),t)},decodeString(i,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(i):Uw(this.decodeStringToByteArray(i,t))},decodeStringToByteArray(i,t){this.init_();const e=t?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<i.length;){const u=e[i.charAt(o++)],m=o<i.length?e[i.charAt(o)]:0;++o;const g=o<i.length?e[i.charAt(o)]:64;++o;const T=o<i.length?e[i.charAt(o)]:64;if(++o,u==null||m==null||g==null||T==null)throw new zw;const x=u<<2|m>>4;if(s.push(x),g!==64){const S=m<<4&240|g>>2;if(s.push(S),T!==64){const U=g<<6&192|T;s.push(U)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class zw extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Bw=function(i){const t=zE(i);return BE.encodeByteArray(t,!0)},Bh=function(i){return Bw(i).replace(/\./g,"")},FE=function(i){try{return BE.decodeString(i,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function Fw(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const qw=()=>Fw().__FIREBASE_DEFAULTS__,Hw=()=>{if(typeof process>"u"||typeof Rv>"u")return;const i=Rv.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},Gw=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=i&&FE(i[1]);return t&&JSON.parse(t)},pf=()=>{try{return Pw()||qw()||Hw()||Gw()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},qE=i=>pf()?.emulatorHosts?.[i],$w=i=>{const t=qE(i);if(!t)return;const e=t.lastIndexOf(":");if(e<=0||e+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const s=parseInt(t.substring(e+1),10);return t[0]==="["?[t.substring(1,e-1),s]:[t.substring(0,e),s]},HE=()=>pf()?.config,GE=i=>pf()?.[`_${i}`];class Yw{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}wrapCallback(t){return(e,s)=>{e?this.reject(e):this.resolve(s),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(e):t(e,s))}}}function Xo(i){try{return(i.startsWith("http://")||i.startsWith("https://")?new URL(i).hostname:i).endsWith(".cloudworkstations.dev")}catch{return!1}}async function $E(i){return(await fetch(i,{credentials:"include"})).ok}function Kw(i,t){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const e={alg:"none",type:"JWT"},s=t||"demo-project",o=i.iat||0,u=i.sub||i.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...i};return[Bh(JSON.stringify(e)),Bh(JSON.stringify(c)),""].join(".")}const fu={};function Qw(){const i={prod:[],emulator:[]};for(const t of Object.keys(fu))fu[t]?i.emulator.push(t):i.prod.push(t);return i}function Xw(i){let t=document.getElementById(i),e=!1;return t||(t=document.createElement("div"),t.setAttribute("id",i),e=!0),{created:e,element:t}}let Iv=!1;function YE(i,t){if(typeof window>"u"||typeof document>"u"||!Xo(window.location.host)||fu[i]===t||fu[i]||Iv)return;fu[i]=t;function e(x){return`__firebase__banner__${x}`}const s="__firebase__banner",u=Qw().prod.length>0;function c(){const x=document.getElementById(s);x&&x.remove()}function m(x){x.style.display="flex",x.style.background="#7faaf0",x.style.position="fixed",x.style.bottom="5px",x.style.left="5px",x.style.padding=".5em",x.style.borderRadius="5px",x.style.alignItems="center"}function p(x,S){x.setAttribute("width","24"),x.setAttribute("id",S),x.setAttribute("height","24"),x.setAttribute("viewBox","0 0 24 24"),x.setAttribute("fill","none"),x.style.marginLeft="-6px"}function g(){const x=document.createElement("span");return x.style.cursor="pointer",x.style.marginLeft="16px",x.style.fontSize="24px",x.innerHTML=" &times;",x.onclick=()=>{Iv=!0,c()},x}function v(x,S){x.setAttribute("id",S),x.innerText="Learn more",x.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",x.setAttribute("target","__blank"),x.style.paddingLeft="5px",x.style.textDecoration="underline"}function T(){const x=Xw(s),S=e("text"),U=document.getElementById(S)||document.createElement("span"),F=e("learnmore"),Z=document.getElementById(F)||document.createElement("a"),ot=e("preprendIcon"),L=document.getElementById(ot)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(x.created){const J=x.element;m(J),v(Z,F);const et=g();p(L,ot),J.append(L,U,Z,et),document.body.appendChild(J)}u?(U.innerText="Preview backend disconnected.",L.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(L.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,U.innerText="Preview backend running in this workspace."),U.setAttribute("id",S)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",T):T()}function dn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Zw(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(dn())}function Jw(){const i=pf()?.forceEnvironment;if(i==="node")return!0;if(i==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Ww(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function tS(){const i=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof i=="object"&&i.id!==void 0}function eS(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function nS(){const i=dn();return i.indexOf("MSIE ")>=0||i.indexOf("Trident/")>=0}function iS(){return!Jw()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function rS(){try{return typeof indexedDB=="object"}catch{return!1}}function sS(){return new Promise((i,t)=>{try{let e=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),e||self.indexedDB.deleteDatabase(s),i(!0)},o.onupgradeneeded=()=>{e=!1},o.onerror=()=>{t(o.error?.message||"")}}catch(e){t(e)}})}const aS="FirebaseError";class jr extends Error{constructor(t,e,s){super(e),this.code=t,this.customData=s,this.name=aS,Object.setPrototypeOf(this,jr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ju.prototype.create)}}class ju{constructor(t,e,s){this.service=t,this.serviceName=e,this.errors=s}create(t,...e){const s=e[0]||{},o=`${this.service}/${t}`,u=this.errors[t],c=u?oS(u,s):"Error",m=`${this.serviceName}: ${c} (${o}).`;return new jr(o,m,s)}}function oS(i,t){return i.replace(lS,(e,s)=>{const o=t[s];return o!=null?String(o):`<${s}?>`})}const lS=/\{\$([^}]+)}/g;function uS(i){for(const t in i)if(Object.prototype.hasOwnProperty.call(i,t))return!1;return!0}function Sa(i,t){if(i===t)return!0;const e=Object.keys(i),s=Object.keys(t);for(const o of e){if(!s.includes(o))return!1;const u=i[o],c=t[o];if(Dv(u)&&Dv(c)){if(!Sa(u,c))return!1}else if(u!==c)return!1}for(const o of s)if(!e.includes(o))return!1;return!0}function Dv(i){return i!==null&&typeof i=="object"}function Lu(i){const t=[];for(const[e,s]of Object.entries(i))Array.isArray(s)?s.forEach(o=>{t.push(encodeURIComponent(e)+"="+encodeURIComponent(o))}):t.push(encodeURIComponent(e)+"="+encodeURIComponent(s));return t.length?"&"+t.join("&"):""}function iu(i){const t={};return i.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[o,u]=s.split("=");t[decodeURIComponent(o)]=decodeURIComponent(u)}}),t}function ru(i){const t=i.indexOf("?");if(!t)return"";const e=i.indexOf("#",t);return i.substring(t,e>0?e:void 0)}function cS(i,t){const e=new hS(i,t);return e.subscribe.bind(e)}class hS{constructor(t,e){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(()=>{t(this)}).catch(s=>{this.error(s)})}next(t){this.forEachObserver(e=>{e.next(t)})}error(t){this.forEachObserver(e=>{e.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,e,s){let o;if(t===void 0&&e===void 0&&s===void 0)throw new Error("Missing Observer.");fS(t,["next","error","complete"])?o=t:o={next:t,error:e,complete:s},o.next===void 0&&(o.next=Um),o.error===void 0&&(o.error=Um),o.complete===void 0&&(o.complete=Um);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let e=0;e<this.observers.length;e++)this.sendOne(e,t)}sendOne(t,e){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{e(this.observers[t])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function fS(i,t){if(typeof i!="object"||i===null)return!1;for(const e of t)if(e in i&&typeof i[e]=="function")return!0;return!1}function Um(){}function an(i){return i&&i._delegate?i._delegate:i}class Na{constructor(t,e,s){this.name=t,this.instanceFactory=e,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}const ba="[DEFAULT]";class dS{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const s=new Yw;if(this.instancesDeferred.set(e,s),this.isInitialized(e)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:e});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(e).promise}getImmediate(t){const e=this.normalizeInstanceIdentifier(t?.identifier),s=t?.optional??!1;if(this.isInitialized(e)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:e})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(pS(t))try{this.getOrInitializeService({instanceIdentifier:ba})}catch{}for(const[e,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(e);try{const u=this.getOrInitializeService({instanceIdentifier:o});s.resolve(u)}catch{}}}}clearInstance(t=ba){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...t.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=ba){return this.instances.has(t)}getOptions(t=ba){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:e={}}=t,s=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:e});for(const[u,c]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(u);s===m&&c.resolve(o)}return o}onInit(t,e){const s=this.normalizeInstanceIdentifier(e),o=this.onInitCallbacks.get(s)??new Set;o.add(t),this.onInitCallbacks.set(s,o);const u=this.instances.get(s);return u&&t(u,s),()=>{o.delete(t)}}invokeOnInitCallbacks(t,e){const s=this.onInitCallbacks.get(e);if(s)for(const o of s)try{o(t,e)}catch{}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let s=this.instances.get(t);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:mS(t),options:e}),this.instances.set(t,s),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(s,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,s)}catch{}return s||null}normalizeInstanceIdentifier(t=ba){return this.component?this.component.multipleInstances?t:ba:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function mS(i){return i===ba?void 0:i}function pS(i){return i.instantiationMode==="EAGER"}class gS{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new dS(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}var $t;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})($t||($t={}));const yS={debug:$t.DEBUG,verbose:$t.VERBOSE,info:$t.INFO,warn:$t.WARN,error:$t.ERROR,silent:$t.SILENT},_S=$t.INFO,vS={[$t.DEBUG]:"log",[$t.VERBOSE]:"log",[$t.INFO]:"info",[$t.WARN]:"warn",[$t.ERROR]:"error"},bS=(i,t,...e)=>{if(t<i.logLevel)return;const s=new Date().toISOString(),o=vS[t];if(o)console[o](`[${s}]  ${i.name}:`,...e);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class tg{constructor(t){this.name=t,this._logLevel=_S,this._logHandler=bS,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in $t))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?yS[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,$t.DEBUG,...t),this._logHandler(this,$t.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,$t.VERBOSE,...t),this._logHandler(this,$t.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,$t.INFO,...t),this._logHandler(this,$t.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,$t.WARN,...t),this._logHandler(this,$t.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,$t.ERROR,...t),this._logHandler(this,$t.ERROR,...t)}}const ES=(i,t)=>t.some(e=>i instanceof e);let Ov,Mv;function TS(){return Ov||(Ov=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function xS(){return Mv||(Mv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const KE=new WeakMap,hp=new WeakMap,QE=new WeakMap,zm=new WeakMap,eg=new WeakMap;function AS(i){const t=new Promise((e,s)=>{const o=()=>{i.removeEventListener("success",u),i.removeEventListener("error",c)},u=()=>{e(Rs(i.result)),o()},c=()=>{s(i.error),o()};i.addEventListener("success",u),i.addEventListener("error",c)});return t.then(e=>{e instanceof IDBCursor&&KE.set(e,i)}).catch(()=>{}),eg.set(t,i),t}function wS(i){if(hp.has(i))return;const t=new Promise((e,s)=>{const o=()=>{i.removeEventListener("complete",u),i.removeEventListener("error",c),i.removeEventListener("abort",c)},u=()=>{e(),o()},c=()=>{s(i.error||new DOMException("AbortError","AbortError")),o()};i.addEventListener("complete",u),i.addEventListener("error",c),i.addEventListener("abort",c)});hp.set(i,t)}let fp={get(i,t,e){if(i instanceof IDBTransaction){if(t==="done")return hp.get(i);if(t==="objectStoreNames")return i.objectStoreNames||QE.get(i);if(t==="store")return e.objectStoreNames[1]?void 0:e.objectStore(e.objectStoreNames[0])}return Rs(i[t])},set(i,t,e){return i[t]=e,!0},has(i,t){return i instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in i}};function SS(i){fp=i(fp)}function NS(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...e){const s=i.call(Bm(this),t,...e);return QE.set(s,t.sort?t.sort():[t]),Rs(s)}:xS().includes(i)?function(...t){return i.apply(Bm(this),t),Rs(KE.get(this))}:function(...t){return Rs(i.apply(Bm(this),t))}}function CS(i){return typeof i=="function"?NS(i):(i instanceof IDBTransaction&&wS(i),ES(i,TS())?new Proxy(i,fp):i)}function Rs(i){if(i instanceof IDBRequest)return AS(i);if(zm.has(i))return zm.get(i);const t=CS(i);return t!==i&&(zm.set(i,t),eg.set(t,i)),t}const Bm=i=>eg.get(i);function RS(i,t,{blocked:e,upgrade:s,blocking:o,terminated:u}={}){const c=indexedDB.open(i,t),m=Rs(c);return s&&c.addEventListener("upgradeneeded",p=>{s(Rs(c.result),p.oldVersion,p.newVersion,Rs(c.transaction),p)}),e&&c.addEventListener("blocked",p=>e(p.oldVersion,p.newVersion,p)),m.then(p=>{u&&p.addEventListener("close",()=>u()),o&&p.addEventListener("versionchange",g=>o(g.oldVersion,g.newVersion,g))}).catch(()=>{}),m}const IS=["get","getKey","getAll","getAllKeys","count"],DS=["put","add","delete","clear"],Fm=new Map;function kv(i,t){if(!(i instanceof IDBDatabase&&!(t in i)&&typeof t=="string"))return;if(Fm.get(t))return Fm.get(t);const e=t.replace(/FromIndex$/,""),s=t!==e,o=DS.includes(e);if(!(e in(s?IDBIndex:IDBObjectStore).prototype)||!(o||IS.includes(e)))return;const u=async function(c,...m){const p=this.transaction(c,o?"readwrite":"readonly");let g=p.store;return s&&(g=g.index(m.shift())),(await Promise.all([g[e](...m),o&&p.done]))[0]};return Fm.set(t,u),u}SS(i=>({...i,get:(t,e,s)=>kv(t,e)||i.get(t,e,s),has:(t,e)=>!!kv(t,e)||i.has(t,e)}));class OS{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(MS(e)){const s=e.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(e=>e).join(" ")}}function MS(i){return i.getComponent()?.type==="VERSION"}const dp="@firebase/app",Vv="0.14.6";const Dr=new tg("@firebase/app"),kS="@firebase/app-compat",VS="@firebase/analytics-compat",jS="@firebase/analytics",LS="@firebase/app-check-compat",PS="@firebase/app-check",US="@firebase/auth",zS="@firebase/auth-compat",BS="@firebase/database",FS="@firebase/data-connect",qS="@firebase/database-compat",HS="@firebase/functions",GS="@firebase/functions-compat",$S="@firebase/installations",YS="@firebase/installations-compat",KS="@firebase/messaging",QS="@firebase/messaging-compat",XS="@firebase/performance",ZS="@firebase/performance-compat",JS="@firebase/remote-config",WS="@firebase/remote-config-compat",tN="@firebase/storage",eN="@firebase/storage-compat",nN="@firebase/firestore",iN="@firebase/ai",rN="@firebase/firestore-compat",sN="firebase",aN="12.6.0";const mp="[DEFAULT]",oN={[dp]:"fire-core",[kS]:"fire-core-compat",[jS]:"fire-analytics",[VS]:"fire-analytics-compat",[PS]:"fire-app-check",[LS]:"fire-app-check-compat",[US]:"fire-auth",[zS]:"fire-auth-compat",[BS]:"fire-rtdb",[FS]:"fire-data-connect",[qS]:"fire-rtdb-compat",[HS]:"fire-fn",[GS]:"fire-fn-compat",[$S]:"fire-iid",[YS]:"fire-iid-compat",[KS]:"fire-fcm",[QS]:"fire-fcm-compat",[XS]:"fire-perf",[ZS]:"fire-perf-compat",[JS]:"fire-rc",[WS]:"fire-rc-compat",[tN]:"fire-gcs",[eN]:"fire-gcs-compat",[nN]:"fire-fst",[rN]:"fire-fst-compat",[iN]:"fire-vertex","fire-js":"fire-js",[sN]:"fire-js-all"};const Fh=new Map,lN=new Map,pp=new Map;function jv(i,t){try{i.container.addComponent(t)}catch(e){Dr.debug(`Component ${t.name} failed to register with FirebaseApp ${i.name}`,e)}}function Bo(i){const t=i.name;if(pp.has(t))return Dr.debug(`There were multiple attempts to register component ${t}.`),!1;pp.set(t,i);for(const e of Fh.values())jv(e,i);for(const e of lN.values())jv(e,i);return!0}function ng(i,t){const e=i.container.getProvider("heartbeat").getImmediate({optional:!0});return e&&e.triggerHeartbeat(),i.container.getProvider(t)}function di(i){return i==null?!1:i.settings!==void 0}const uN={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Is=new ju("app","Firebase",uN);class cN{constructor(t,e,s){this._isDeleted=!1,this._options={...t},this._config={...e},this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Na("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Is.create("app-deleted",{appName:this._name})}}const Zo=aN;function XE(i,t={}){let e=i;typeof t!="object"&&(t={name:t});const s={name:mp,automaticDataCollectionEnabled:!0,...t},o=s.name;if(typeof o!="string"||!o)throw Is.create("bad-app-name",{appName:String(o)});if(e||(e=HE()),!e)throw Is.create("no-options");const u=Fh.get(o);if(u){if(Sa(e,u.options)&&Sa(s,u.config))return u;throw Is.create("duplicate-app",{appName:o})}const c=new gS(o);for(const p of pp.values())c.addComponent(p);const m=new cN(e,s,c);return Fh.set(o,m),m}function ZE(i=mp){const t=Fh.get(i);if(!t&&i===mp&&HE())return XE();if(!t)throw Is.create("no-app",{appName:i});return t}function Ds(i,t,e){let s=oN[i]??i;e&&(s+=`-${e}`);const o=s.match(/\s|\//),u=t.match(/\s|\//);if(o||u){const c=[`Unable to register library "${s}" with version "${t}":`];o&&c.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&u&&c.push("and"),u&&c.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Dr.warn(c.join(" "));return}Bo(new Na(`${s}-version`,()=>({library:s,version:t}),"VERSION"))}const hN="firebase-heartbeat-database",fN=1,vu="firebase-heartbeat-store";let qm=null;function JE(){return qm||(qm=RS(hN,fN,{upgrade:(i,t)=>{switch(t){case 0:try{i.createObjectStore(vu)}catch(e){console.warn(e)}}}}).catch(i=>{throw Is.create("idb-open",{originalErrorMessage:i.message})})),qm}async function dN(i){try{const e=(await JE()).transaction(vu),s=await e.objectStore(vu).get(WE(i));return await e.done,s}catch(t){if(t instanceof jr)Dr.warn(t.message);else{const e=Is.create("idb-get",{originalErrorMessage:t?.message});Dr.warn(e.message)}}}async function Lv(i,t){try{const s=(await JE()).transaction(vu,"readwrite");await s.objectStore(vu).put(t,WE(i)),await s.done}catch(e){if(e instanceof jr)Dr.warn(e.message);else{const s=Is.create("idb-set",{originalErrorMessage:e?.message});Dr.warn(s.message)}}}function WE(i){return`${i.name}!${i.options.appId}`}const mN=1024,pN=30;class gN{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new _N(e),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const e=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Pv();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:e}),this._heartbeatsCache.heartbeats.length>pN){const o=vN(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(t){Dr.warn(t)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Pv(),{heartbeatsToSend:e,unsentEntries:s}=yN(this._heartbeatsCache.heartbeats),o=Bh(JSON.stringify({version:2,heartbeats:e}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return Dr.warn(t),""}}}function Pv(){return new Date().toISOString().substring(0,10)}function yN(i,t=mN){const e=[];let s=i.slice();for(const o of i){const u=e.find(c=>c.agent===o.agent);if(u){if(u.dates.push(o.date),Uv(e)>t){u.dates.pop();break}}else if(e.push({agent:o.agent,dates:[o.date]}),Uv(e)>t){e.pop();break}s=s.slice(1)}return{heartbeatsToSend:e,unsentEntries:s}}class _N{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return rS()?sS().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const e=await dN(this.app);return e?.heartbeats?e:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const s=await this.read();return Lv(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const s=await this.read();return Lv(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...t.heartbeats]})}else return}}function Uv(i){return Bh(JSON.stringify({version:2,heartbeats:i})).length}function vN(i){if(i.length===0)return-1;let t=0,e=i[0].date;for(let s=1;s<i.length;s++)i[s].date<e&&(e=i[s].date,t=s);return t}function bN(i){Bo(new Na("platform-logger",t=>new OS(t),"PRIVATE")),Bo(new Na("heartbeat",t=>new gN(t),"PRIVATE")),Ds(dp,Vv,i),Ds(dp,Vv,"esm2020"),Ds("fire-js","")}bN("");var EN="firebase",TN="12.7.0";Ds(EN,TN,"app");function tT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const xN=tT,eT=new ju("auth","Firebase",tT());const qh=new tg("@firebase/auth");function AN(i,...t){qh.logLevel<=$t.WARN&&qh.warn(`Auth (${Zo}): ${i}`,...t)}function Nh(i,...t){qh.logLevel<=$t.ERROR&&qh.error(`Auth (${Zo}): ${i}`,...t)}function Di(i,...t){throw ig(i,...t)}function Ki(i,...t){return ig(i,...t)}function nT(i,t,e){const s={...xN(),[t]:e};return new ju("auth","Firebase",s).create(t,{appName:i.name})}function Ir(i){return nT(i,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function ig(i,...t){if(typeof i!="string"){const e=t[0],s=[...t.slice(1)];return s[0]&&(s[0].appName=i.name),i._errorFactory.create(e,...s)}return eT.create(i,...t)}function Dt(i,t,...e){if(!i)throw ig(t,...e)}function Cr(i){const t="INTERNAL ASSERTION FAILED: "+i;throw Nh(t),new Error(t)}function Or(i,t){i||Cr(t)}function gp(){return typeof self<"u"&&self.location?.href||""}function wN(){return zv()==="http:"||zv()==="https:"}function zv(){return typeof self<"u"&&self.location?.protocol||null}function SN(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(wN()||tS()||"connection"in navigator)?navigator.onLine:!0}function NN(){if(typeof navigator>"u")return null;const i=navigator;return i.languages&&i.languages[0]||i.language||null}class Pu{constructor(t,e){this.shortDelay=t,this.longDelay=e,Or(e>t,"Short delay should be less than long delay!"),this.isMobile=Zw()||eS()}get(){return SN()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function rg(i,t){Or(i.emulator,"Emulator should always be set here");const{url:e}=i.emulator;return t?`${e}${t.startsWith("/")?t.slice(1):t}`:e}class iT{static initialize(t,e,s){this.fetchImpl=t,e&&(this.headersImpl=e),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Cr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Cr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Cr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const CN={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const RN=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],IN=new Pu(3e4,6e4);function Lr(i,t){return i.tenantId&&!t.tenantId?{...t,tenantId:i.tenantId}:t}async function Pr(i,t,e,s,o={}){return rT(i,o,async()=>{let u={},c={};s&&(t==="GET"?c=s:u={body:JSON.stringify(s)});const m=Lu({key:i.config.apiKey,...c}).slice(1),p=await i._getAdditionalHeaders();p["Content-Type"]="application/json",i.languageCode&&(p["X-Firebase-Locale"]=i.languageCode);const g={method:t,headers:p,...u};return Ww()||(g.referrerPolicy="no-referrer"),i.emulatorConfig&&Xo(i.emulatorConfig.host)&&(g.credentials="include"),iT.fetch()(await sT(i,i.config.apiHost,e,m),g)})}async function rT(i,t,e){i._canInitEmulator=!1;const s={...CN,...t};try{const o=new ON(i),u=await Promise.race([e(),o.promise]);o.clearNetworkTimeout();const c=await u.json();if("needConfirmation"in c)throw mh(i,"account-exists-with-different-credential",c);if(u.ok&&!("errorMessage"in c))return c;{const m=u.ok?c.errorMessage:c.error.message,[p,g]=m.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw mh(i,"credential-already-in-use",c);if(p==="EMAIL_EXISTS")throw mh(i,"email-already-in-use",c);if(p==="USER_DISABLED")throw mh(i,"user-disabled",c);const v=s[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw nT(i,v,g);Di(i,v)}}catch(o){if(o instanceof jr)throw o;Di(i,"network-request-failed",{message:String(o)})}}async function Uu(i,t,e,s,o={}){const u=await Pr(i,t,e,s,o);return"mfaPendingCredential"in u&&Di(i,"multi-factor-auth-required",{_serverResponse:u}),u}async function sT(i,t,e,s){const o=`${t}${e}?${s}`,u=i,c=u.config.emulator?rg(i.config,o):`${i.config.apiScheme}://${o}`;return RN.includes(e)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(c).toString():c}function DN(i){switch(i){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class ON{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((e,s)=>{this.timer=setTimeout(()=>s(Ki(this.auth,"network-request-failed")),IN.get())})}}function mh(i,t,e){const s={appName:i.name};e.email&&(s.email=e.email),e.phoneNumber&&(s.phoneNumber=e.phoneNumber);const o=Ki(i,t,s);return o.customData._tokenResponse=e,o}function Bv(i){return i!==void 0&&i.enterprise!==void 0}class MN{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const e of this.recaptchaEnforcementState)if(e.provider&&e.provider===t)return DN(e.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function kN(i,t){return Pr(i,"GET","/v2/recaptchaConfig",Lr(i,t))}async function VN(i,t){return Pr(i,"POST","/v1/accounts:delete",t)}async function Hh(i,t){return Pr(i,"POST","/v1/accounts:lookup",t)}function du(i){if(i)try{const t=new Date(Number(i));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function jN(i,t=!1){const e=an(i),s=await e.getIdToken(t),o=sg(s);Dt(o&&o.exp&&o.auth_time&&o.iat,e.auth,"internal-error");const u=typeof o.firebase=="object"?o.firebase:void 0,c=u?.sign_in_provider;return{claims:o,token:s,authTime:du(Hm(o.auth_time)),issuedAtTime:du(Hm(o.iat)),expirationTime:du(Hm(o.exp)),signInProvider:c||null,signInSecondFactor:u?.sign_in_second_factor||null}}function Hm(i){return Number(i)*1e3}function sg(i){const[t,e,s]=i.split(".");if(t===void 0||e===void 0||s===void 0)return Nh("JWT malformed, contained fewer than 3 sections"),null;try{const o=FE(e);return o?JSON.parse(o):(Nh("Failed to decode base64 JWT payload"),null)}catch(o){return Nh("Caught error parsing JWT payload as JSON",o?.toString()),null}}function Fv(i){const t=sg(i);return Dt(t,"internal-error"),Dt(typeof t.exp<"u","internal-error"),Dt(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}async function bu(i,t,e=!1){if(e)return t;try{return await t}catch(s){throw s instanceof jr&&LN(s)&&i.auth.currentUser===i&&await i.auth.signOut(),s}}function LN({code:i}){return i==="auth/user-disabled"||i==="auth/user-token-expired"}class PN{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){const e=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),e}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(t=!1){if(!this.isRunning)return;const e=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},e)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){t?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class yp{constructor(t,e){this.createdAt=t,this.lastLoginAt=e,this._initializeTime()}_initializeTime(){this.lastSignInTime=du(this.lastLoginAt),this.creationTime=du(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Gh(i){const t=i.auth,e=await i.getIdToken(),s=await bu(i,Hh(t,{idToken:e}));Dt(s?.users.length,t,"internal-error");const o=s.users[0];i._notifyReloadListener(o);const u=o.providerUserInfo?.length?aT(o.providerUserInfo):[],c=zN(i.providerData,u),m=i.isAnonymous,p=!(i.email&&o.passwordHash)&&!c?.length,g=m?p:!1,v={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new yp(o.createdAt,o.lastLoginAt),isAnonymous:g};Object.assign(i,v)}async function UN(i){const t=an(i);await Gh(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function zN(i,t){return[...i.filter(s=>!t.some(o=>o.providerId===s.providerId)),...t]}function aT(i){return i.map(({providerId:t,...e})=>({providerId:t,uid:e.rawId||"",displayName:e.displayName||null,email:e.email||null,phoneNumber:e.phoneNumber||null,photoURL:e.photoUrl||null}))}async function BN(i,t){const e=await rT(i,{},async()=>{const s=Lu({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:o,apiKey:u}=i.config,c=await sT(i,o,"/v1/token",`key=${u}`),m=await i._getAdditionalHeaders();m["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:m,body:s};return i.emulatorConfig&&Xo(i.emulatorConfig.host)&&(p.credentials="include"),iT.fetch()(c,p)});return{accessToken:e.access_token,expiresIn:e.expires_in,refreshToken:e.refresh_token}}async function FN(i,t){return Pr(i,"POST","/v2/accounts:revokeToken",Lr(i,t))}class ko{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){Dt(t.idToken,"internal-error"),Dt(typeof t.idToken<"u","internal-error"),Dt(typeof t.refreshToken<"u","internal-error");const e="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):Fv(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,e)}updateFromIdToken(t){Dt(t.length!==0,"internal-error");const e=Fv(t);this.updateTokensAndExpiration(t,null,e)}async getToken(t,e=!1){return!e&&this.accessToken&&!this.isExpired?this.accessToken:(Dt(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,e){const{accessToken:s,refreshToken:o,expiresIn:u}=await BN(t,e);this.updateTokensAndExpiration(s,o,Number(u))}updateTokensAndExpiration(t,e,s){this.refreshToken=e||null,this.accessToken=t||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(t,e){const{refreshToken:s,accessToken:o,expirationTime:u}=e,c=new ko;return s&&(Dt(typeof s=="string","internal-error",{appName:t}),c.refreshToken=s),o&&(Dt(typeof o=="string","internal-error",{appName:t}),c.accessToken=o),u&&(Dt(typeof u=="number","internal-error",{appName:t}),c.expirationTime=u),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new ko,this.toJSON())}_performRefresh(){return Cr("not implemented")}}function Ts(i,t){Dt(typeof i=="string"||typeof i>"u","internal-error",{appName:t})}class Ni{constructor({uid:t,auth:e,stsTokenManager:s,...o}){this.providerId="firebase",this.proactiveRefresh=new PN(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=e,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new yp(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(t){const e=await bu(this,this.stsTokenManager.getToken(this.auth,t));return Dt(e,this.auth,"internal-error"),this.accessToken!==e&&(this.accessToken=e,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),e}getIdTokenResult(t){return jN(this,t)}reload(){return UN(this)}_assign(t){this!==t&&(Dt(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(e=>({...e})),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const e=new Ni({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return e.metadata._copy(this.metadata),e}_onReload(t){Dt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,e=!1){let s=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),s=!0),e&&await Gh(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(di(this.auth.app))return Promise.reject(Ir(this.auth));const t=await this.getIdToken();return await bu(this,VN(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>({...t})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,e){const s=e.displayName??void 0,o=e.email??void 0,u=e.phoneNumber??void 0,c=e.photoURL??void 0,m=e.tenantId??void 0,p=e._redirectEventId??void 0,g=e.createdAt??void 0,v=e.lastLoginAt??void 0,{uid:T,emailVerified:x,isAnonymous:S,providerData:U,stsTokenManager:F}=e;Dt(T&&F,t,"internal-error");const Z=ko.fromJSON(this.name,F);Dt(typeof T=="string",t,"internal-error"),Ts(s,t.name),Ts(o,t.name),Dt(typeof x=="boolean",t,"internal-error"),Dt(typeof S=="boolean",t,"internal-error"),Ts(u,t.name),Ts(c,t.name),Ts(m,t.name),Ts(p,t.name),Ts(g,t.name),Ts(v,t.name);const ot=new Ni({uid:T,auth:t,email:o,emailVerified:x,displayName:s,isAnonymous:S,photoURL:c,phoneNumber:u,tenantId:m,stsTokenManager:Z,createdAt:g,lastLoginAt:v});return U&&Array.isArray(U)&&(ot.providerData=U.map(L=>({...L}))),p&&(ot._redirectEventId=p),ot}static async _fromIdTokenResponse(t,e,s=!1){const o=new ko;o.updateFromServerResponse(e);const u=new Ni({uid:e.localId,auth:t,stsTokenManager:o,isAnonymous:s});return await Gh(u),u}static async _fromGetAccountInfoResponse(t,e,s){const o=e.users[0];Dt(o.localId!==void 0,"internal-error");const u=o.providerUserInfo!==void 0?aT(o.providerUserInfo):[],c=!(o.email&&o.passwordHash)&&!u?.length,m=new ko;m.updateFromIdToken(s);const p=new Ni({uid:o.localId,auth:t,stsTokenManager:m,isAnonymous:c}),g={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new yp(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!u?.length};return Object.assign(p,g),p}}const qv=new Map;function Rr(i){Or(i instanceof Function,"Expected a class definition");let t=qv.get(i);return t?(Or(t instanceof i,"Instance stored in cache mismatched with class"),t):(t=new i,qv.set(i,t),t)}class oT{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,e){this.storage[t]=e}async _get(t){const e=this.storage[t];return e===void 0?null:e}async _remove(t){delete this.storage[t]}_addListener(t,e){}_removeListener(t,e){}}oT.type="NONE";const Hv=oT;function Ch(i,t,e){return`firebase:${i}:${t}:${e}`}class Vo{constructor(t,e,s){this.persistence=t,this.auth=e,this.userKey=s;const{config:o,name:u}=this.auth;this.fullUserKey=Ch(this.userKey,o.apiKey,u),this.fullPersistenceKey=Ch("persistence",o.apiKey,u),this.boundEventHandler=e._onStorageEvent.bind(e),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const e=await Hh(this.auth,{idToken:t}).catch(()=>{});return e?Ni._fromGetAccountInfoResponse(this.auth,e,t):null}return Ni._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const e=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,e)return this.setCurrentUser(e)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,e,s="authUser"){if(!e.length)return new Vo(Rr(Hv),t,s);const o=(await Promise.all(e.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let u=o[0]||Rr(Hv);const c=Ch(s,t.config.apiKey,t.name);let m=null;for(const g of e)try{const v=await g._get(c);if(v){let T;if(typeof v=="string"){const x=await Hh(t,{idToken:v}).catch(()=>{});if(!x)break;T=await Ni._fromGetAccountInfoResponse(t,x,v)}else T=Ni._fromJSON(t,v);g!==u&&(m=T),u=g;break}}catch{}const p=o.filter(g=>g._shouldAllowMigration);return!u._shouldAllowMigration||!p.length?new Vo(u,t,s):(u=p[0],m&&await u._set(c,m.toJSON()),await Promise.all(e.map(async g=>{if(g!==u)try{await g._remove(c)}catch{}})),new Vo(u,t,s))}}function Gv(i){const t=i.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(hT(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(lT(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(dT(t))return"Blackberry";if(mT(t))return"Webos";if(uT(t))return"Safari";if((t.includes("chrome/")||cT(t))&&!t.includes("edge/"))return"Chrome";if(fT(t))return"Android";{const e=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=i.match(e);if(s?.length===2)return s[1]}return"Other"}function lT(i=dn()){return/firefox\//i.test(i)}function uT(i=dn()){const t=i.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function cT(i=dn()){return/crios\//i.test(i)}function hT(i=dn()){return/iemobile/i.test(i)}function fT(i=dn()){return/android/i.test(i)}function dT(i=dn()){return/blackberry/i.test(i)}function mT(i=dn()){return/webos/i.test(i)}function ag(i=dn()){return/iphone|ipad|ipod/i.test(i)||/macintosh/i.test(i)&&/mobile/i.test(i)}function qN(i=dn()){return ag(i)&&!!window.navigator?.standalone}function HN(){return nS()&&document.documentMode===10}function pT(i=dn()){return ag(i)||fT(i)||mT(i)||dT(i)||/windows phone/i.test(i)||hT(i)}function gT(i,t=[]){let e;switch(i){case"Browser":e=Gv(dn());break;case"Worker":e=`${Gv(dn())}-${i}`;break;default:e=i}const s=t.length?t.join(","):"FirebaseCore-web";return`${e}/JsCore/${Zo}/${s}`}class GN{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,e){const s=u=>new Promise((c,m)=>{try{const p=t(u);c(p)}catch(p){m(p)}});s.onAbort=e,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const e=[];try{for(const s of this.queue)await s(t),s.onAbort&&e.push(s.onAbort)}catch(s){e.reverse();for(const o of e)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}async function $N(i,t={}){return Pr(i,"GET","/v2/passwordPolicy",Lr(i,t))}const YN=6;class KN{constructor(t){const e=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=e.minPasswordLength??YN,e.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=e.maxPasswordLength),e.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=e.containsLowercaseCharacter),e.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=e.containsUppercaseCharacter),e.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=e.containsNumericCharacter),e.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=e.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=t.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){const e={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,e),this.validatePasswordCharacterOptions(t,e),e.isValid&&(e.isValid=e.meetsMinPasswordLength??!0),e.isValid&&(e.isValid=e.meetsMaxPasswordLength??!0),e.isValid&&(e.isValid=e.containsLowercaseLetter??!0),e.isValid&&(e.isValid=e.containsUppercaseLetter??!0),e.isValid&&(e.isValid=e.containsNumericCharacter??!0),e.isValid&&(e.isValid=e.containsNonAlphanumericCharacter??!0),e}validatePasswordLengthOptions(t,e){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(e.meetsMinPasswordLength=t.length>=s),o&&(e.meetsMaxPasswordLength=t.length<=o)}validatePasswordCharacterOptions(t,e){this.updatePasswordCharacterOptionsStatuses(e,!1,!1,!1,!1);let s;for(let o=0;o<t.length;o++)s=t.charAt(o),this.updatePasswordCharacterOptionsStatuses(e,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(t,e,s,o,u){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=e)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=u))}}class QN{constructor(t,e,s,o){this.app=t,this.heartbeatServiceProvider=e,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new $v(this),this.idTokenSubscription=new $v(this),this.beforeStateQueue=new GN(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=eT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(t,e){return e&&(this._popupRedirectResolver=Rr(e)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Vo.create(this,t),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(e),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const e=await Hh(this,{idToken:t}),s=await Ni._fromGetAccountInfoResponse(this,e,t);await this.directlySetCurrentUser(s)}catch(e){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",e),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){if(di(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(c,c))}):this.directlySetCurrentUser(null)}const e=await this.assertedPersistence.getCurrentUser();let s=e,o=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=this.redirectUser?._redirectEventId,c=s?._redirectEventId,m=await this.tryRedirectSignIn(t);(!u||u===c)&&m?.user&&(s=m.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(u){s=e,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Dt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(t){let e=null;try{e=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return e}async reloadAndSetCurrentUserOrClear(t){try{await Gh(t)}catch(e){if(e?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=NN()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(di(this.app))return Promise.reject(Ir(this));const e=t?an(t):null;return e&&Dt(e.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(e&&e._clone(this))}async _updateCurrentUser(t,e=!1){if(!this._deleted)return t&&Dt(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),e||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return di(this.app)?Promise.reject(Ir(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return di(this.app)?Promise.reject(Ir(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Rr(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const e=this._getPasswordPolicyInternal();return e.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):e.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await $N(this),e=new KN(t);this.tenantId===null?this._projectPasswordPolicy=e:this._tenantPasswordPolicies[this.tenantId]=e}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new ju("auth","Firebase",t())}onAuthStateChanged(t,e,s){return this.registerStateListener(this.authStateSubscription,t,e,s)}beforeAuthStateChanged(t,e){return this.beforeStateQueue.pushCallback(t,e)}onIdTokenChanged(t,e,s){return this.registerStateListener(this.idTokenSubscription,t,e,s)}authStateReady(){return new Promise((t,e)=>{if(this.currentUser)t();else{const s=this.onAuthStateChanged(()=>{s(),t()},e)}})}async revokeAccessToken(t){if(this.currentUser){const e=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:e};this.tenantId!=null&&(s.tenantId=this.tenantId),await FN(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(t,e){const s=await this.getOrInitRedirectPersistenceManager(e);return t===null?s.removeCurrentUser():s.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const e=t&&Rr(t)||this._popupRedirectResolver;Dt(e,this,"argument-error"),this.redirectPersistenceManager=await Vo.create(this,[Rr(e._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===t?this._currentUser:this.redirectUser?._redirectEventId===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=this.currentUser?.uid??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,e,s,o){if(this._deleted)return()=>{};const u=typeof e=="function"?e:e.next.bind(e);let c=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(Dt(m,this,"internal-error"),m.then(()=>{c||u(this.currentUser)}),typeof e=="function"){const p=t.addObserver(e,s,o);return()=>{c=!0,p()}}else{const p=t.addObserver(e);return()=>{c=!0,p()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return Dt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=gT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const e=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();e&&(t["X-Firebase-Client"]=e);const s=await this._getAppCheckToken();return s&&(t["X-Firebase-AppCheck"]=s),t}async _getAppCheckToken(){if(di(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return t?.error&&AN(`Error while retrieving App Check token: ${t.error}`),t?.token}}function zs(i){return an(i)}class $v{constructor(t){this.auth=t,this.observer=null,this.addObserver=cS(e=>this.observer=e)}get next(){return Dt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let gf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function XN(i){gf=i}function yT(i){return gf.loadJS(i)}function ZN(){return gf.recaptchaEnterpriseScript}function JN(){return gf.gapiScript}function WN(i){return`__${i}${Math.floor(Math.random()*1e6)}`}class t2{constructor(){this.enterprise=new e2}ready(t){t()}execute(t,e){return Promise.resolve("token")}render(t,e){return""}}class e2{ready(t){t()}execute(t,e){return Promise.resolve("token")}render(t,e){return""}}const n2="recaptcha-enterprise",_T="NO_RECAPTCHA";class i2{constructor(t){this.type=n2,this.auth=zs(t)}async verify(t="verify",e=!1){async function s(u){if(!e){if(u.tenantId==null&&u._agentRecaptchaConfig!=null)return u._agentRecaptchaConfig.siteKey;if(u.tenantId!=null&&u._tenantRecaptchaConfigs[u.tenantId]!==void 0)return u._tenantRecaptchaConfigs[u.tenantId].siteKey}return new Promise(async(c,m)=>{kN(u,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)m(new Error("recaptcha Enterprise site key undefined"));else{const g=new MN(p);return u.tenantId==null?u._agentRecaptchaConfig=g:u._tenantRecaptchaConfigs[u.tenantId]=g,c(g.siteKey)}}).catch(p=>{m(p)})})}function o(u,c,m){const p=window.grecaptcha;Bv(p)?p.enterprise.ready(()=>{p.enterprise.execute(u,{action:t}).then(g=>{c(g)}).catch(()=>{c(_T)})}):m(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new t2().execute("siteKey",{action:"verify"}):new Promise((u,c)=>{s(this.auth).then(m=>{if(!e&&Bv(window.grecaptcha))o(m,u,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let p=ZN();p.length!==0&&(p+=m),yT(p).then(()=>{o(m,u,c)}).catch(g=>{c(g)})}}).catch(m=>{c(m)})})}}async function Yv(i,t,e,s=!1,o=!1){const u=new i2(i);let c;if(o)c=_T;else try{c=await u.verify(e)}catch{c=await u.verify(e,!0)}const m={...t};if(e==="mfaSmsEnrollment"||e==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in m){const p=m.phoneEnrollmentInfo.phoneNumber,g=m.phoneEnrollmentInfo.recaptchaToken;Object.assign(m,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:g,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in m){const p=m.phoneSignInInfo.recaptchaToken;Object.assign(m,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return m}return s?Object.assign(m,{captchaResp:c}):Object.assign(m,{captchaResponse:c}),Object.assign(m,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(m,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),m}async function $h(i,t,e,s,o){if(i._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await Yv(i,t,e,e==="getOobCode");return s(i,u)}else return s(i,t).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${e} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await Yv(i,t,e,e==="getOobCode");return s(i,c)}else return Promise.reject(u)})}function r2(i,t){const e=ng(i,"auth");if(e.isInitialized()){const o=e.getImmediate(),u=e.getOptions();if(Sa(u,t??{}))return o;Di(o,"already-initialized")}return e.initialize({options:t})}function s2(i,t){const e=t?.persistence||[],s=(Array.isArray(e)?e:[e]).map(Rr);t?.errorMap&&i._updateErrorMap(t.errorMap),i._initializeWithPersistence(s,t?.popupRedirectResolver)}function a2(i,t,e){const s=zs(i);Dt(/^https?:\/\//.test(t),s,"invalid-emulator-scheme");const o=!1,u=vT(t),{host:c,port:m}=o2(t),p=m===null?"":`:${m}`,g={url:`${u}//${c}${p}/`},v=Object.freeze({host:c,port:m,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!s._canInitEmulator){Dt(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Dt(Sa(g,s.config.emulator)&&Sa(v,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=g,s.emulatorConfig=v,s.settings.appVerificationDisabledForTesting=!0,Xo(c)?($E(`${u}//${c}${p}`),YE("Auth",!0)):l2()}function vT(i){const t=i.indexOf(":");return t<0?"":i.substr(0,t+1)}function o2(i){const t=vT(i),e=/(\/\/)?([^?#/]+)/.exec(i.substr(t.length));if(!e)return{host:"",port:null};const s=e[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const u=o[1];return{host:u,port:Kv(s.substr(u.length+1))}}else{const[u,c]=s.split(":");return{host:u,port:Kv(c)}}}function Kv(i){if(!i)return null;const t=Number(i);return isNaN(t)?null:t}function l2(){function i(){const t=document.createElement("p"),e=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",e.position="fixed",e.width="100%",e.backgroundColor="#ffffff",e.border=".1em solid #000000",e.color="#b50000",e.bottom="0px",e.left="0px",e.margin="0px",e.zIndex="10000",e.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",i):i())}class og{constructor(t,e){this.providerId=t,this.signInMethod=e}toJSON(){return Cr("not implemented")}_getIdTokenResponse(t){return Cr("not implemented")}_linkToIdToken(t,e){return Cr("not implemented")}_getReauthenticationResolver(t){return Cr("not implemented")}}async function u2(i,t){return Pr(i,"POST","/v1/accounts:signUp",t)}async function c2(i,t){return Uu(i,"POST","/v1/accounts:signInWithPassword",Lr(i,t))}async function h2(i,t){return Pr(i,"POST","/v1/accounts:sendOobCode",Lr(i,t))}async function f2(i,t){return h2(i,t)}async function d2(i,t){return Uu(i,"POST","/v1/accounts:signInWithEmailLink",Lr(i,t))}async function m2(i,t){return Uu(i,"POST","/v1/accounts:signInWithEmailLink",Lr(i,t))}class Eu extends og{constructor(t,e,s,o=null){super("password",s),this._email=t,this._password=e,this._tenantId=o}static _fromEmailAndPassword(t,e){return new Eu(t,e,"password")}static _fromEmailAndCode(t,e,s=null){return new Eu(t,e,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const e=typeof t=="string"?JSON.parse(t):t;if(e?.email&&e?.password){if(e.signInMethod==="password")return this._fromEmailAndPassword(e.email,e.password);if(e.signInMethod==="emailLink")return this._fromEmailAndCode(e.email,e.password,e.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const e={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return $h(t,e,"signInWithPassword",c2);case"emailLink":return d2(t,{email:this._email,oobCode:this._password});default:Di(t,"internal-error")}}async _linkToIdToken(t,e){switch(this.signInMethod){case"password":const s={idToken:e,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return $h(t,s,"signUpPassword",u2);case"emailLink":return m2(t,{idToken:e,email:this._email,oobCode:this._password});default:Di(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}async function jo(i,t){return Uu(i,"POST","/v1/accounts:signInWithIdp",Lr(i,t))}const p2="http://localhost";class Ca extends og{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const e=new Ca(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(e.idToken=t.idToken),t.accessToken&&(e.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(e.nonce=t.nonce),t.pendingToken&&(e.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(e.accessToken=t.oauthToken,e.secret=t.oauthTokenSecret):Di("argument-error"),e}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const e=typeof t=="string"?JSON.parse(t):t,{providerId:s,signInMethod:o,...u}=e;if(!s||!o)return null;const c=new Ca(s,o);return c.idToken=u.idToken||void 0,c.accessToken=u.accessToken||void 0,c.secret=u.secret,c.nonce=u.nonce,c.pendingToken=u.pendingToken||null,c}_getIdTokenResponse(t){const e=this.buildRequest();return jo(t,e)}_linkToIdToken(t,e){const s=this.buildRequest();return s.idToken=e,jo(t,s)}_getReauthenticationResolver(t){const e=this.buildRequest();return e.autoCreate=!1,jo(t,e)}buildRequest(){const t={requestUri:p2,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const e={};this.idToken&&(e.id_token=this.idToken),this.accessToken&&(e.access_token=this.accessToken),this.secret&&(e.oauth_token_secret=this.secret),e.providerId=this.providerId,this.nonce&&!this.pendingToken&&(e.nonce=this.nonce),t.postBody=Lu(e)}return t}}function g2(i){switch(i){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function y2(i){const t=iu(ru(i)).link,e=t?iu(ru(t)).deep_link_id:null,s=iu(ru(i)).deep_link_id;return(s?iu(ru(s)).link:null)||s||e||t||i}class lg{constructor(t){const e=iu(ru(t)),s=e.apiKey??null,o=e.oobCode??null,u=g2(e.mode??null);Dt(s&&o&&u,"argument-error"),this.apiKey=s,this.operation=u,this.code=o,this.continueUrl=e.continueUrl??null,this.languageCode=e.lang??null,this.tenantId=e.tenantId??null}static parseLink(t){const e=y2(t);try{return new lg(e)}catch{return null}}}class Jo{constructor(){this.providerId=Jo.PROVIDER_ID}static credential(t,e){return Eu._fromEmailAndPassword(t,e)}static credentialWithLink(t,e){const s=lg.parseLink(e);return Dt(s,"argument-error"),Eu._fromEmailAndCode(t,s.code,s.tenantId)}}Jo.PROVIDER_ID="password";Jo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Jo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class bT{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}class zu extends bT{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}class As extends zu{constructor(){super("facebook.com")}static credential(t){return Ca._fromParams({providerId:As.PROVIDER_ID,signInMethod:As.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return As.credentialFromTaggedObject(t)}static credentialFromError(t){return As.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return As.credential(t.oauthAccessToken)}catch{return null}}}As.FACEBOOK_SIGN_IN_METHOD="facebook.com";As.PROVIDER_ID="facebook.com";class ws extends zu{constructor(){super("google.com"),this.addScope("profile")}static credential(t,e){return Ca._fromParams({providerId:ws.PROVIDER_ID,signInMethod:ws.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:e})}static credentialFromResult(t){return ws.credentialFromTaggedObject(t)}static credentialFromError(t){return ws.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:e,oauthAccessToken:s}=t;if(!e&&!s)return null;try{return ws.credential(e,s)}catch{return null}}}ws.GOOGLE_SIGN_IN_METHOD="google.com";ws.PROVIDER_ID="google.com";class Ss extends zu{constructor(){super("github.com")}static credential(t){return Ca._fromParams({providerId:Ss.PROVIDER_ID,signInMethod:Ss.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Ss.credentialFromTaggedObject(t)}static credentialFromError(t){return Ss.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Ss.credential(t.oauthAccessToken)}catch{return null}}}Ss.GITHUB_SIGN_IN_METHOD="github.com";Ss.PROVIDER_ID="github.com";class Ns extends zu{constructor(){super("twitter.com")}static credential(t,e){return Ca._fromParams({providerId:Ns.PROVIDER_ID,signInMethod:Ns.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:e})}static credentialFromResult(t){return Ns.credentialFromTaggedObject(t)}static credentialFromError(t){return Ns.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:e,oauthTokenSecret:s}=t;if(!e||!s)return null;try{return Ns.credential(e,s)}catch{return null}}}Ns.TWITTER_SIGN_IN_METHOD="twitter.com";Ns.PROVIDER_ID="twitter.com";async function _2(i,t){return Uu(i,"POST","/v1/accounts:signUp",Lr(i,t))}class Ra{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,e,s,o=!1){const u=await Ni._fromIdTokenResponse(t,s,o),c=Qv(s);return new Ra({user:u,providerId:c,_tokenResponse:s,operationType:e})}static async _forOperation(t,e,s){await t._updateTokensIfNecessary(s,!0);const o=Qv(s);return new Ra({user:t,providerId:o,_tokenResponse:s,operationType:e})}}function Qv(i){return i.providerId?i.providerId:"phoneNumber"in i?"phone":null}class Yh extends jr{constructor(t,e,s,o){super(e.code,e.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,Yh.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:e.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(t,e,s,o){return new Yh(t,e,s,o)}}function ET(i,t,e,s){return(t==="reauthenticate"?e._getReauthenticationResolver(i):e._getIdTokenResponse(i)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?Yh._fromErrorAndOperation(i,u,t,s):u})}async function v2(i,t,e=!1){const s=await bu(i,t._linkToIdToken(i.auth,await i.getIdToken()),e);return Ra._forOperation(i,"link",s)}async function b2(i,t,e=!1){const{auth:s}=i;if(di(s.app))return Promise.reject(Ir(s));const o="reauthenticate";try{const u=await bu(i,ET(s,o,t,i),e);Dt(u.idToken,s,"internal-error");const c=sg(u.idToken);Dt(c,s,"internal-error");const{sub:m}=c;return Dt(i.uid===m,s,"user-mismatch"),Ra._forOperation(i,o,u)}catch(u){throw u?.code==="auth/user-not-found"&&Di(s,"user-mismatch"),u}}async function TT(i,t,e=!1){if(di(i.app))return Promise.reject(Ir(i));const s="signIn",o=await ET(i,s,t),u=await Ra._fromIdTokenResponse(i,s,o);return e||await i._updateCurrentUser(u.user),u}async function E2(i,t){return TT(zs(i),t)}async function xT(i){const t=zs(i);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function T2(i,t,e){const s=zs(i);await $h(s,{requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"},"getOobCode",f2)}async function x2(i,t,e){if(di(i.app))return Promise.reject(Ir(i));const s=zs(i),c=await $h(s,{returnSecureToken:!0,email:t,password:e,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",_2).catch(p=>{throw p.code==="auth/password-does-not-meet-requirements"&&xT(i),p}),m=await Ra._fromIdTokenResponse(s,"signIn",c);return await s._updateCurrentUser(m.user),m}function A2(i,t,e){return di(i.app)?Promise.reject(Ir(i)):E2(an(i),Jo.credential(t,e)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&xT(i),s})}function w2(i,t,e,s){return an(i).onIdTokenChanged(t,e,s)}function S2(i,t,e){return an(i).beforeAuthStateChanged(t,e)}function N2(i,t,e,s){return an(i).onAuthStateChanged(t,e,s)}function C2(i){return an(i).signOut()}const Kh="__sak";class AT{constructor(t,e){this.storageRetriever=t,this.type=e}_isAvailable(){try{return this.storage?(this.storage.setItem(Kh,"1"),this.storage.removeItem(Kh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,e){return this.storage.setItem(t,JSON.stringify(e)),Promise.resolve()}_get(t){const e=this.storage.getItem(t);return Promise.resolve(e?JSON.parse(e):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}const R2=1e3,I2=10;class wT extends AT{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,e)=>this.onStorageEvent(t,e),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=pT(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const e of Object.keys(this.listeners)){const s=this.storage.getItem(e),o=this.localCache[e];s!==o&&t(e,o,s)}}onStorageEvent(t,e=!1){if(!t.key){this.forAllChangedKeys((c,m,p)=>{this.notifyListeners(c,p)});return}const s=t.key;e?this.detachListener():this.stopPolling();const o=()=>{const c=this.storage.getItem(s);!e&&this.localCache[s]===c||this.notifyListeners(s,c)},u=this.storage.getItem(s);HN()&&u!==t.newValue&&t.newValue!==t.oldValue?setTimeout(o,I2):o()}notifyListeners(t,e){this.localCache[t]=e;const s=this.listeners[t];if(s)for(const o of Array.from(s))o(e&&JSON.parse(e))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,e,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:e,newValue:s}),!0)})},R2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,e){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,e){await super._set(t,e),this.localCache[t]=JSON.stringify(e)}async _get(t){const e=await super._get(t);return this.localCache[t]=JSON.stringify(e),e}async _remove(t){await super._remove(t),delete this.localCache[t]}}wT.type="LOCAL";const D2=wT;class ST extends AT{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,e){}_removeListener(t,e){}}ST.type="SESSION";const NT=ST;function O2(i){return Promise.all(i.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(e){return{fulfilled:!1,reason:e}}}))}class yf{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const e=this.receivers.find(o=>o.isListeningto(t));if(e)return e;const s=new yf(t);return this.receivers.push(s),s}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const e=t,{eventId:s,eventType:o,data:u}=e.data,c=this.handlersMap[o];if(!c?.size)return;e.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const m=Array.from(c).map(async g=>g(e.origin,u)),p=await O2(m);e.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:p})}_subscribe(t,e){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(e)}_unsubscribe(t,e){this.handlersMap[t]&&e&&this.handlersMap[t].delete(e),(!e||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}yf.receivers=[];function ug(i="",t=10){let e="";for(let s=0;s<t;s++)e+=Math.floor(Math.random()*10);return i+e}class M2{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,e,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let u,c;return new Promise((m,p)=>{const g=ug("",20);o.port1.start();const v=setTimeout(()=>{p(new Error("unsupported_event"))},s);c={messageChannel:o,onMessage(T){const x=T;if(x.data.eventId===g)switch(x.data.status){case"ack":clearTimeout(v),u=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),m(x.data.response);break;default:clearTimeout(v),clearTimeout(u),p(new Error("invalid_response"));break}}},this.handlers.add(c),o.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:t,eventId:g,data:e},[o.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}function Qi(){return window}function k2(i){Qi().location.href=i}function CT(){return typeof Qi().WorkerGlobalScope<"u"&&typeof Qi().importScripts=="function"}async function V2(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function j2(){return navigator?.serviceWorker?.controller||null}function L2(){return CT()?self:null}const RT="firebaseLocalStorageDb",P2=1,Qh="firebaseLocalStorage",IT="fbase_key";class Bu{constructor(t){this.request=t}toPromise(){return new Promise((t,e)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{e(this.request.error)})})}}function _f(i,t){return i.transaction([Qh],t?"readwrite":"readonly").objectStore(Qh)}function U2(){const i=indexedDB.deleteDatabase(RT);return new Bu(i).toPromise()}function _p(){const i=indexedDB.open(RT,P2);return new Promise((t,e)=>{i.addEventListener("error",()=>{e(i.error)}),i.addEventListener("upgradeneeded",()=>{const s=i.result;try{s.createObjectStore(Qh,{keyPath:IT})}catch(o){e(o)}}),i.addEventListener("success",async()=>{const s=i.result;s.objectStoreNames.contains(Qh)?t(s):(s.close(),await U2(),t(await _p()))})})}async function Xv(i,t,e){const s=_f(i,!0).put({[IT]:t,value:e});return new Bu(s).toPromise()}async function z2(i,t){const e=_f(i,!1).get(t),s=await new Bu(e).toPromise();return s===void 0?null:s.value}function Zv(i,t){const e=_f(i,!0).delete(t);return new Bu(e).toPromise()}const B2=800,F2=3;class DT{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await _p(),this.db)}async _withRetries(t){let e=0;for(;;)try{const s=await this._openDb();return await t(s)}catch(s){if(e++>F2)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return CT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=yf._getInstance(L2()),this.receiver._subscribe("keyChanged",async(t,e)=>({keyProcessed:(await this._poll()).includes(e.key)})),this.receiver._subscribe("ping",async(t,e)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await V2(),!this.activeServiceWorker)return;this.sender=new M2(this.activeServiceWorker);const t=await this.sender._send("ping",{},800);t&&t[0]?.fulfilled&&t[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||j2()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await _p();return await Xv(t,Kh,"1"),await Zv(t,Kh),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,e){return this._withPendingWrite(async()=>(await this._withRetries(s=>Xv(s,t,e)),this.localCache[t]=e,this.notifyServiceWorker(t)))}async _get(t){const e=await this._withRetries(s=>z2(s,t));return this.localCache[t]=e,e}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(e=>Zv(e,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(o=>{const u=_f(o,!1).getAll();return new Bu(u).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const e=[],s=new Set;if(t.length!==0)for(const{fbase_key:o,value:u}of t)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(u)&&(this.notifyListeners(o,u),e.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),e.push(o));return e}notifyListeners(t,e){this.localCache[t]=e;const s=this.listeners[t];if(s)for(const o of Array.from(s))o(e)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),B2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,e){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}DT.type="LOCAL";const q2=DT;new Pu(3e4,6e4);function H2(i,t){return t?Rr(t):(Dt(i._popupRedirectResolver,i,"argument-error"),i._popupRedirectResolver)}class cg extends og{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return jo(t,this._buildIdpRequest())}_linkToIdToken(t,e){return jo(t,this._buildIdpRequest(e))}_getReauthenticationResolver(t){return jo(t,this._buildIdpRequest())}_buildIdpRequest(t){const e={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(e.idToken=t),e}}function G2(i){return TT(i.auth,new cg(i),i.bypassAuthState)}function $2(i){const{auth:t,user:e}=i;return Dt(e,t,"internal-error"),b2(e,new cg(i),i.bypassAuthState)}async function Y2(i){const{auth:t,user:e}=i;return Dt(e,t,"internal-error"),v2(e,new cg(i),i.bypassAuthState)}class OT{constructor(t,e,s,o,u=!1){this.auth=t,this.resolver=s,this.user=o,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(e)?e:[e]}execute(){return new Promise(async(t,e)=>{this.pendingPromise={resolve:t,reject:e};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(t){const{urlResponse:e,sessionId:s,postBody:o,tenantId:u,error:c,type:m}=t;if(c){this.reject(c);return}const p={auth:this.auth,requestUri:e,sessionId:s,tenantId:u||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(p))}catch(g){this.reject(g)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return G2;case"linkViaPopup":case"linkViaRedirect":return Y2;case"reauthViaPopup":case"reauthViaRedirect":return $2;default:Di(this.auth,"internal-error")}}resolve(t){Or(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){Or(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const K2=new Pu(2e3,1e4);class Oo extends OT{constructor(t,e,s,o,u){super(t,e,o,u),this.provider=s,this.authWindow=null,this.pollId=null,Oo.currentPopupAction&&Oo.currentPopupAction.cancel(),Oo.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return Dt(t,this.auth,"internal-error"),t}async onExecution(){Or(this.filter.length===1,"Popup operations only handle one event");const t=ug();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(Ki(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Ki(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Oo.currentPopupAction=null}pollUserCancellation(){const t=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ki(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,K2.get())};t()}}Oo.currentPopupAction=null;const Q2="pendingRedirect",Rh=new Map;class X2 extends OT{constructor(t,e,s=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],e,void 0,s),this.eventId=null}async execute(){let t=Rh.get(this.auth._key());if(!t){try{const s=await Z2(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(s)}catch(e){t=()=>Promise.reject(e)}Rh.set(this.auth._key(),t)}return this.bypassAuthState||Rh.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const e=await this.auth._redirectUserForId(t.eventId);if(e)return this.user=e,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Z2(i,t){const e=tC(t),s=W2(i);if(!await s._isAvailable())return!1;const o=await s._get(e)==="true";return await s._remove(e),o}function J2(i,t){Rh.set(i._key(),t)}function W2(i){return Rr(i._redirectPersistence)}function tC(i){return Ch(Q2,i.config.apiKey,i.name)}async function eC(i,t,e=!1){if(di(i.app))return Promise.reject(Ir(i));const s=zs(i),o=H2(s,t),c=await new X2(s,o,e).execute();return c&&!e&&(delete c.user._redirectEventId,await s._persistUserIfCurrent(c.user),await s._setRedirectUser(null,t)),c}const nC=600*1e3;class iC{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let e=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(t,s)&&(e=!0,this.sendToConsumer(t,s),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!rC(t)||(this.hasHandledPotentialRedirect=!0,e||(this.queuedRedirectEvent=t,e=!0)),e}sendToConsumer(t,e){if(t.error&&!MT(t)){const s=t.error.code?.split("auth/")[1]||"internal-error";e.onError(Ki(this.auth,s))}else e.onAuthEvent(t)}isEventForConsumer(t,e){const s=e.eventId===null||!!t.eventId&&t.eventId===e.eventId;return e.filter.includes(t.type)&&s}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=nC&&this.cachedEventUids.clear(),this.cachedEventUids.has(Jv(t))}saveEventToCache(t){this.cachedEventUids.add(Jv(t)),this.lastProcessedEventTime=Date.now()}}function Jv(i){return[i.type,i.eventId,i.sessionId,i.tenantId].filter(t=>t).join("-")}function MT({type:i,error:t}){return i==="unknown"&&t?.code==="auth/no-auth-event"}function rC(i){switch(i.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return MT(i);default:return!1}}async function sC(i,t={}){return Pr(i,"GET","/v1/projects",t)}const aC=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,oC=/^https?/;async function lC(i){if(i.config.emulator)return;const{authorizedDomains:t}=await sC(i);for(const e of t)try{if(uC(e))return}catch{}Di(i,"unauthorized-domain")}function uC(i){const t=gp(),{protocol:e,hostname:s}=new URL(t);if(i.startsWith("chrome-extension://")){const c=new URL(i);return c.hostname===""&&s===""?e==="chrome-extension:"&&i.replace("chrome-extension://","")===t.replace("chrome-extension://",""):e==="chrome-extension:"&&c.hostname===s}if(!oC.test(e))return!1;if(aC.test(i))return s===i;const o=i.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}const cC=new Pu(3e4,6e4);function Wv(){const i=Qi().___jsl;if(i?.H){for(const t of Object.keys(i.H))if(i.H[t].r=i.H[t].r||[],i.H[t].L=i.H[t].L||[],i.H[t].r=[...i.H[t].L],i.CP)for(let e=0;e<i.CP.length;e++)i.CP[e]=null}}function hC(i){return new Promise((t,e)=>{function s(){Wv(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Wv(),e(Ki(i,"network-request-failed"))},timeout:cC.get()})}if(Qi().gapi?.iframes?.Iframe)t(gapi.iframes.getContext());else if(Qi().gapi?.load)s();else{const o=WN("iframefcb");return Qi()[o]=()=>{gapi.load?s():e(Ki(i,"network-request-failed"))},yT(`${JN()}?onload=${o}`).catch(u=>e(u))}}).catch(t=>{throw Ih=null,t})}let Ih=null;function fC(i){return Ih=Ih||hC(i),Ih}const dC=new Pu(5e3,15e3),mC="__/auth/iframe",pC="emulator/auth/iframe",gC={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},yC=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function _C(i){const t=i.config;Dt(t.authDomain,i,"auth-domain-config-required");const e=t.emulator?rg(t,pC):`https://${i.config.authDomain}/${mC}`,s={apiKey:t.apiKey,appName:i.name,v:Zo},o=yC.get(i.config.apiHost);o&&(s.eid=o);const u=i._getFrameworks();return u.length&&(s.fw=u.join(",")),`${e}?${Lu(s).slice(1)}`}async function vC(i){const t=await fC(i),e=Qi().gapi;return Dt(e,i,"internal-error"),t.open({where:document.body,url:_C(i),messageHandlersFilter:e.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:gC,dontclear:!0},s=>new Promise(async(o,u)=>{await s.restyle({setHideOnLeave:!1});const c=Ki(i,"network-request-failed"),m=Qi().setTimeout(()=>{u(c)},dC.get());function p(){Qi().clearTimeout(m),o(s)}s.ping(p).then(p,()=>{u(c)})}))}const bC={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},EC=500,TC=600,xC="_blank",AC="http://localhost";class tb{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function wC(i,t,e,s=EC,o=TC){const u=Math.max((window.screen.availHeight-o)/2,0).toString(),c=Math.max((window.screen.availWidth-s)/2,0).toString();let m="";const p={...bC,width:s.toString(),height:o.toString(),top:u,left:c},g=dn().toLowerCase();e&&(m=cT(g)?xC:e),lT(g)&&(t=t||AC,p.scrollbars="yes");const v=Object.entries(p).reduce((x,[S,U])=>`${x}${S}=${U},`,"");if(qN(g)&&m!=="_self")return SC(t||"",m),new tb(null);const T=window.open(t||"",m,v);Dt(T,i,"popup-blocked");try{T.focus()}catch{}return new tb(T)}function SC(i,t){const e=document.createElement("a");e.href=i,e.target=t;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),e.dispatchEvent(s)}const NC="__/auth/handler",CC="emulator/auth/handler",RC=encodeURIComponent("fac");async function eb(i,t,e,s,o,u){Dt(i.config.authDomain,i,"auth-domain-config-required"),Dt(i.config.apiKey,i,"invalid-api-key");const c={apiKey:i.config.apiKey,appName:i.name,authType:e,redirectUrl:s,v:Zo,eventId:o};if(t instanceof bT){t.setDefaultLanguage(i.languageCode),c.providerId=t.providerId||"",uS(t.getCustomParameters())||(c.customParameters=JSON.stringify(t.getCustomParameters()));for(const[v,T]of Object.entries({}))c[v]=T}if(t instanceof zu){const v=t.getScopes().filter(T=>T!=="");v.length>0&&(c.scopes=v.join(","))}i.tenantId&&(c.tid=i.tenantId);const m=c;for(const v of Object.keys(m))m[v]===void 0&&delete m[v];const p=await i._getAppCheckToken(),g=p?`#${RC}=${encodeURIComponent(p)}`:"";return`${IC(i)}?${Lu(m).slice(1)}${g}`}function IC({config:i}){return i.emulator?rg(i,CC):`https://${i.authDomain}/${NC}`}const Gm="webStorageSupport";class DC{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=NT,this._completeRedirectFn=eC,this._overrideRedirectResult=J2}async _openPopup(t,e,s,o){Or(this.eventManagers[t._key()]?.manager,"_initialize() not called before _openPopup()");const u=await eb(t,e,s,gp(),o);return wC(t,u,ug())}async _openRedirect(t,e,s,o){await this._originValidation(t);const u=await eb(t,e,s,gp(),o);return k2(u),new Promise(()=>{})}_initialize(t){const e=t._key();if(this.eventManagers[e]){const{manager:o,promise:u}=this.eventManagers[e];return o?Promise.resolve(o):(Or(u,"If manager is not set, promise should be"),u)}const s=this.initAndGetManager(t);return this.eventManagers[e]={promise:s},s.catch(()=>{delete this.eventManagers[e]}),s}async initAndGetManager(t){const e=await vC(t),s=new iC(t);return e.register("authEvent",o=>(Dt(o?.authEvent,t,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:s},this.iframes[t._key()]=e,s}_isIframeWebStorageSupported(t,e){this.iframes[t._key()].send(Gm,{type:Gm},o=>{const u=o?.[0]?.[Gm];u!==void 0&&e(!!u),Di(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const e=t._key();return this.originValidationPromises[e]||(this.originValidationPromises[e]=lC(t)),this.originValidationPromises[e]}get _shouldInitProactively(){return pT()||uT()||ag()}}const OC=DC;var nb="@firebase/auth",ib="1.12.0";class MC{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const e=this.auth.onIdTokenChanged(s=>{t(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(t,e),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const e=this.internalListeners.get(t);e&&(this.internalListeners.delete(t),e(),this.updateProactiveRefresh())}assertAuthConfigured(){Dt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function kC(i){switch(i){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function VC(i){Bo(new Na("auth",(t,{options:e})=>{const s=t.getProvider("app").getImmediate(),o=t.getProvider("heartbeat"),u=t.getProvider("app-check-internal"),{apiKey:c,authDomain:m}=s.options;Dt(c&&!c.includes(":"),"invalid-api-key",{appName:s.name});const p={apiKey:c,authDomain:m,clientPlatform:i,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:gT(i)},g=new QN(s,o,u,p);return s2(g,e),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,s)=>{t.getProvider("auth-internal").initialize()})),Bo(new Na("auth-internal",t=>{const e=zs(t.getProvider("auth").getImmediate());return(s=>new MC(s))(e)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ds(nb,ib,kC(i)),Ds(nb,ib,"esm2020")}const jC=300,LC=GE("authIdTokenMaxAge")||jC;let rb=null;const PC=i=>async t=>{const e=t&&await t.getIdTokenResult(),s=e&&(new Date().getTime()-Date.parse(e.issuedAtTime))/1e3;if(s&&s>LC)return;const o=e?.token;rb!==o&&(rb=o,await fetch(i,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function UC(i=ZE()){const t=ng(i,"auth");if(t.isInitialized())return t.getImmediate();const e=r2(i,{popupRedirectResolver:OC,persistence:[q2,D2,NT]}),s=GE("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(s,location.origin);if(location.origin===u.origin){const c=PC(u.toString());S2(e,c,()=>c(e.currentUser)),w2(e,m=>c(m))}}const o=qE("auth");return o&&a2(e,`http://${o}`),e}function zC(){return document.getElementsByTagName("head")?.[0]??document}XN({loadJS(i){return new Promise((t,e)=>{const s=document.createElement("script");s.setAttribute("src",i),s.onload=t,s.onerror=o=>{const u=Ki("internal-error");u.customData=o,e(u)},s.type="text/javascript",s.charset="UTF-8",zC().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});VC("Browser");var sb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Os,kT;(function(){var i;function t(O,C){function R(){}R.prototype=C.prototype,O.F=C.prototype,O.prototype=new R,O.prototype.constructor=O,O.D=function(j,k,I){for(var A=Array(arguments.length-2),ct=2;ct<arguments.length;ct++)A[ct-2]=arguments[ct];return C.prototype[k].apply(j,A)}}function e(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}t(s,e),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(O,C,R){R||(R=0);const j=Array(16);if(typeof C=="string")for(var k=0;k<16;++k)j[k]=C.charCodeAt(R++)|C.charCodeAt(R++)<<8|C.charCodeAt(R++)<<16|C.charCodeAt(R++)<<24;else for(k=0;k<16;++k)j[k]=C[R++]|C[R++]<<8|C[R++]<<16|C[R++]<<24;C=O.g[0],R=O.g[1],k=O.g[2];let I=O.g[3],A;A=C+(I^R&(k^I))+j[0]+3614090360&4294967295,C=R+(A<<7&4294967295|A>>>25),A=I+(k^C&(R^k))+j[1]+3905402710&4294967295,I=C+(A<<12&4294967295|A>>>20),A=k+(R^I&(C^R))+j[2]+606105819&4294967295,k=I+(A<<17&4294967295|A>>>15),A=R+(C^k&(I^C))+j[3]+3250441966&4294967295,R=k+(A<<22&4294967295|A>>>10),A=C+(I^R&(k^I))+j[4]+4118548399&4294967295,C=R+(A<<7&4294967295|A>>>25),A=I+(k^C&(R^k))+j[5]+1200080426&4294967295,I=C+(A<<12&4294967295|A>>>20),A=k+(R^I&(C^R))+j[6]+2821735955&4294967295,k=I+(A<<17&4294967295|A>>>15),A=R+(C^k&(I^C))+j[7]+4249261313&4294967295,R=k+(A<<22&4294967295|A>>>10),A=C+(I^R&(k^I))+j[8]+1770035416&4294967295,C=R+(A<<7&4294967295|A>>>25),A=I+(k^C&(R^k))+j[9]+2336552879&4294967295,I=C+(A<<12&4294967295|A>>>20),A=k+(R^I&(C^R))+j[10]+4294925233&4294967295,k=I+(A<<17&4294967295|A>>>15),A=R+(C^k&(I^C))+j[11]+2304563134&4294967295,R=k+(A<<22&4294967295|A>>>10),A=C+(I^R&(k^I))+j[12]+1804603682&4294967295,C=R+(A<<7&4294967295|A>>>25),A=I+(k^C&(R^k))+j[13]+4254626195&4294967295,I=C+(A<<12&4294967295|A>>>20),A=k+(R^I&(C^R))+j[14]+2792965006&4294967295,k=I+(A<<17&4294967295|A>>>15),A=R+(C^k&(I^C))+j[15]+1236535329&4294967295,R=k+(A<<22&4294967295|A>>>10),A=C+(k^I&(R^k))+j[1]+4129170786&4294967295,C=R+(A<<5&4294967295|A>>>27),A=I+(R^k&(C^R))+j[6]+3225465664&4294967295,I=C+(A<<9&4294967295|A>>>23),A=k+(C^R&(I^C))+j[11]+643717713&4294967295,k=I+(A<<14&4294967295|A>>>18),A=R+(I^C&(k^I))+j[0]+3921069994&4294967295,R=k+(A<<20&4294967295|A>>>12),A=C+(k^I&(R^k))+j[5]+3593408605&4294967295,C=R+(A<<5&4294967295|A>>>27),A=I+(R^k&(C^R))+j[10]+38016083&4294967295,I=C+(A<<9&4294967295|A>>>23),A=k+(C^R&(I^C))+j[15]+3634488961&4294967295,k=I+(A<<14&4294967295|A>>>18),A=R+(I^C&(k^I))+j[4]+3889429448&4294967295,R=k+(A<<20&4294967295|A>>>12),A=C+(k^I&(R^k))+j[9]+568446438&4294967295,C=R+(A<<5&4294967295|A>>>27),A=I+(R^k&(C^R))+j[14]+3275163606&4294967295,I=C+(A<<9&4294967295|A>>>23),A=k+(C^R&(I^C))+j[3]+4107603335&4294967295,k=I+(A<<14&4294967295|A>>>18),A=R+(I^C&(k^I))+j[8]+1163531501&4294967295,R=k+(A<<20&4294967295|A>>>12),A=C+(k^I&(R^k))+j[13]+2850285829&4294967295,C=R+(A<<5&4294967295|A>>>27),A=I+(R^k&(C^R))+j[2]+4243563512&4294967295,I=C+(A<<9&4294967295|A>>>23),A=k+(C^R&(I^C))+j[7]+1735328473&4294967295,k=I+(A<<14&4294967295|A>>>18),A=R+(I^C&(k^I))+j[12]+2368359562&4294967295,R=k+(A<<20&4294967295|A>>>12),A=C+(R^k^I)+j[5]+4294588738&4294967295,C=R+(A<<4&4294967295|A>>>28),A=I+(C^R^k)+j[8]+2272392833&4294967295,I=C+(A<<11&4294967295|A>>>21),A=k+(I^C^R)+j[11]+1839030562&4294967295,k=I+(A<<16&4294967295|A>>>16),A=R+(k^I^C)+j[14]+4259657740&4294967295,R=k+(A<<23&4294967295|A>>>9),A=C+(R^k^I)+j[1]+2763975236&4294967295,C=R+(A<<4&4294967295|A>>>28),A=I+(C^R^k)+j[4]+1272893353&4294967295,I=C+(A<<11&4294967295|A>>>21),A=k+(I^C^R)+j[7]+4139469664&4294967295,k=I+(A<<16&4294967295|A>>>16),A=R+(k^I^C)+j[10]+3200236656&4294967295,R=k+(A<<23&4294967295|A>>>9),A=C+(R^k^I)+j[13]+681279174&4294967295,C=R+(A<<4&4294967295|A>>>28),A=I+(C^R^k)+j[0]+3936430074&4294967295,I=C+(A<<11&4294967295|A>>>21),A=k+(I^C^R)+j[3]+3572445317&4294967295,k=I+(A<<16&4294967295|A>>>16),A=R+(k^I^C)+j[6]+76029189&4294967295,R=k+(A<<23&4294967295|A>>>9),A=C+(R^k^I)+j[9]+3654602809&4294967295,C=R+(A<<4&4294967295|A>>>28),A=I+(C^R^k)+j[12]+3873151461&4294967295,I=C+(A<<11&4294967295|A>>>21),A=k+(I^C^R)+j[15]+530742520&4294967295,k=I+(A<<16&4294967295|A>>>16),A=R+(k^I^C)+j[2]+3299628645&4294967295,R=k+(A<<23&4294967295|A>>>9),A=C+(k^(R|~I))+j[0]+4096336452&4294967295,C=R+(A<<6&4294967295|A>>>26),A=I+(R^(C|~k))+j[7]+1126891415&4294967295,I=C+(A<<10&4294967295|A>>>22),A=k+(C^(I|~R))+j[14]+2878612391&4294967295,k=I+(A<<15&4294967295|A>>>17),A=R+(I^(k|~C))+j[5]+4237533241&4294967295,R=k+(A<<21&4294967295|A>>>11),A=C+(k^(R|~I))+j[12]+1700485571&4294967295,C=R+(A<<6&4294967295|A>>>26),A=I+(R^(C|~k))+j[3]+2399980690&4294967295,I=C+(A<<10&4294967295|A>>>22),A=k+(C^(I|~R))+j[10]+4293915773&4294967295,k=I+(A<<15&4294967295|A>>>17),A=R+(I^(k|~C))+j[1]+2240044497&4294967295,R=k+(A<<21&4294967295|A>>>11),A=C+(k^(R|~I))+j[8]+1873313359&4294967295,C=R+(A<<6&4294967295|A>>>26),A=I+(R^(C|~k))+j[15]+4264355552&4294967295,I=C+(A<<10&4294967295|A>>>22),A=k+(C^(I|~R))+j[6]+2734768916&4294967295,k=I+(A<<15&4294967295|A>>>17),A=R+(I^(k|~C))+j[13]+1309151649&4294967295,R=k+(A<<21&4294967295|A>>>11),A=C+(k^(R|~I))+j[4]+4149444226&4294967295,C=R+(A<<6&4294967295|A>>>26),A=I+(R^(C|~k))+j[11]+3174756917&4294967295,I=C+(A<<10&4294967295|A>>>22),A=k+(C^(I|~R))+j[2]+718787259&4294967295,k=I+(A<<15&4294967295|A>>>17),A=R+(I^(k|~C))+j[9]+3951481745&4294967295,O.g[0]=O.g[0]+C&4294967295,O.g[1]=O.g[1]+(k+(A<<21&4294967295|A>>>11))&4294967295,O.g[2]=O.g[2]+k&4294967295,O.g[3]=O.g[3]+I&4294967295}s.prototype.v=function(O,C){C===void 0&&(C=O.length);const R=C-this.blockSize,j=this.C;let k=this.h,I=0;for(;I<C;){if(k==0)for(;I<=R;)o(this,O,I),I+=this.blockSize;if(typeof O=="string"){for(;I<C;)if(j[k++]=O.charCodeAt(I++),k==this.blockSize){o(this,j),k=0;break}}else for(;I<C;)if(j[k++]=O[I++],k==this.blockSize){o(this,j),k=0;break}}this.h=k,this.o+=C},s.prototype.A=function(){var O=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);O[0]=128;for(var C=1;C<O.length-8;++C)O[C]=0;C=this.o*8;for(var R=O.length-8;R<O.length;++R)O[R]=C&255,C/=256;for(this.v(O),O=Array(16),C=0,R=0;R<4;++R)for(let j=0;j<32;j+=8)O[C++]=this.g[R]>>>j&255;return O};function u(O,C){var R=m;return Object.prototype.hasOwnProperty.call(R,O)?R[O]:R[O]=C(O)}function c(O,C){this.h=C;const R=[];let j=!0;for(let k=O.length-1;k>=0;k--){const I=O[k]|0;j&&I==C||(R[k]=I,j=!1)}this.g=R}var m={};function p(O){return-128<=O&&O<128?u(O,function(C){return new c([C|0],C<0?-1:0)}):new c([O|0],O<0?-1:0)}function g(O){if(isNaN(O)||!isFinite(O))return T;if(O<0)return Z(g(-O));const C=[];let R=1;for(let j=0;O>=R;j++)C[j]=O/R|0,R*=4294967296;return new c(C,0)}function v(O,C){if(O.length==0)throw Error("number format error: empty string");if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(O.charAt(0)=="-")return Z(v(O.substring(1),C));if(O.indexOf("-")>=0)throw Error('number format error: interior "-" character');const R=g(Math.pow(C,8));let j=T;for(let I=0;I<O.length;I+=8){var k=Math.min(8,O.length-I);const A=parseInt(O.substring(I,I+k),C);k<8?(k=g(Math.pow(C,k)),j=j.j(k).add(g(A))):(j=j.j(R),j=j.add(g(A)))}return j}var T=p(0),x=p(1),S=p(16777216);i=c.prototype,i.m=function(){if(F(this))return-Z(this).m();let O=0,C=1;for(let R=0;R<this.g.length;R++){const j=this.i(R);O+=(j>=0?j:4294967296+j)*C,C*=4294967296}return O},i.toString=function(O){if(O=O||10,O<2||36<O)throw Error("radix out of range: "+O);if(U(this))return"0";if(F(this))return"-"+Z(this).toString(O);const C=g(Math.pow(O,6));var R=this;let j="";for(;;){const k=et(R,C).g;R=ot(R,k.j(C));let I=((R.g.length>0?R.g[0]:R.h)>>>0).toString(O);if(R=k,U(R))return I+j;for(;I.length<6;)I="0"+I;j=I+j}},i.i=function(O){return O<0?0:O<this.g.length?this.g[O]:this.h};function U(O){if(O.h!=0)return!1;for(let C=0;C<O.g.length;C++)if(O.g[C]!=0)return!1;return!0}function F(O){return O.h==-1}i.l=function(O){return O=ot(this,O),F(O)?-1:U(O)?0:1};function Z(O){const C=O.g.length,R=[];for(let j=0;j<C;j++)R[j]=~O.g[j];return new c(R,~O.h).add(x)}i.abs=function(){return F(this)?Z(this):this},i.add=function(O){const C=Math.max(this.g.length,O.g.length),R=[];let j=0;for(let k=0;k<=C;k++){let I=j+(this.i(k)&65535)+(O.i(k)&65535),A=(I>>>16)+(this.i(k)>>>16)+(O.i(k)>>>16);j=A>>>16,I&=65535,A&=65535,R[k]=A<<16|I}return new c(R,R[R.length-1]&-2147483648?-1:0)};function ot(O,C){return O.add(Z(C))}i.j=function(O){if(U(this)||U(O))return T;if(F(this))return F(O)?Z(this).j(Z(O)):Z(Z(this).j(O));if(F(O))return Z(this.j(Z(O)));if(this.l(S)<0&&O.l(S)<0)return g(this.m()*O.m());const C=this.g.length+O.g.length,R=[];for(var j=0;j<2*C;j++)R[j]=0;for(j=0;j<this.g.length;j++)for(let k=0;k<O.g.length;k++){const I=this.i(j)>>>16,A=this.i(j)&65535,ct=O.i(k)>>>16,H=O.i(k)&65535;R[2*j+2*k]+=A*H,L(R,2*j+2*k),R[2*j+2*k+1]+=I*H,L(R,2*j+2*k+1),R[2*j+2*k+1]+=A*ct,L(R,2*j+2*k+1),R[2*j+2*k+2]+=I*ct,L(R,2*j+2*k+2)}for(O=0;O<C;O++)R[O]=R[2*O+1]<<16|R[2*O];for(O=C;O<2*C;O++)R[O]=0;return new c(R,0)};function L(O,C){for(;(O[C]&65535)!=O[C];)O[C+1]+=O[C]>>>16,O[C]&=65535,C++}function J(O,C){this.g=O,this.h=C}function et(O,C){if(U(C))throw Error("division by zero");if(U(O))return new J(T,T);if(F(O))return C=et(Z(O),C),new J(Z(C.g),Z(C.h));if(F(C))return C=et(O,Z(C)),new J(Z(C.g),C.h);if(O.g.length>30){if(F(O)||F(C))throw Error("slowDivide_ only works with positive integers.");for(var R=x,j=C;j.l(O)<=0;)R=dt(R),j=dt(j);var k=rt(R,1),I=rt(j,1);for(j=rt(j,2),R=rt(R,2);!U(j);){var A=I.add(j);A.l(O)<=0&&(k=k.add(R),I=A),j=rt(j,1),R=rt(R,1)}return C=ot(O,k.j(C)),new J(k,C)}for(k=T;O.l(C)>=0;){for(R=Math.max(1,Math.floor(O.m()/C.m())),j=Math.ceil(Math.log(R)/Math.LN2),j=j<=48?1:Math.pow(2,j-48),I=g(R),A=I.j(C);F(A)||A.l(O)>0;)R-=j,I=g(R),A=I.j(C);U(I)&&(I=x),k=k.add(I),O=ot(O,A)}return new J(k,O)}i.B=function(O){return et(this,O).h},i.and=function(O){const C=Math.max(this.g.length,O.g.length),R=[];for(let j=0;j<C;j++)R[j]=this.i(j)&O.i(j);return new c(R,this.h&O.h)},i.or=function(O){const C=Math.max(this.g.length,O.g.length),R=[];for(let j=0;j<C;j++)R[j]=this.i(j)|O.i(j);return new c(R,this.h|O.h)},i.xor=function(O){const C=Math.max(this.g.length,O.g.length),R=[];for(let j=0;j<C;j++)R[j]=this.i(j)^O.i(j);return new c(R,this.h^O.h)};function dt(O){const C=O.g.length+1,R=[];for(let j=0;j<C;j++)R[j]=O.i(j)<<1|O.i(j-1)>>>31;return new c(R,O.h)}function rt(O,C){const R=C>>5;C%=32;const j=O.g.length-R,k=[];for(let I=0;I<j;I++)k[I]=C>0?O.i(I+R)>>>C|O.i(I+R+1)<<32-C:O.i(I+R);return new c(k,O.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,kT=s,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=g,c.fromString=v,Os=c}).apply(typeof sb<"u"?sb:typeof self<"u"?self:typeof window<"u"?window:{});var ph=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var VT,su,jT,Dh,vp,LT,PT,UT;(function(){var i,t=Object.defineProperty;function e(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof ph=="object"&&ph];for(var y=0;y<h.length;++y){var E=h[y];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var s=e(this);function o(h,y){if(y)t:{var E=s;h=h.split(".");for(var N=0;N<h.length-1;N++){var G=h[N];if(!(G in E))break t;E=E[G]}h=h[h.length-1],N=E[h],y=y(N),y!=N&&y!=null&&t(E,h,{configurable:!0,writable:!0,value:y})}}o("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(h){return h||function(y){var E=[],N;for(N in y)Object.prototype.hasOwnProperty.call(y,N)&&E.push([N,y[N]]);return E}});var u=u||{},c=this||self;function m(h){var y=typeof h;return y=="object"&&h!=null||y=="function"}function p(h,y,E){return h.call.apply(h.bind,arguments)}function g(h,y,E){return g=p,g.apply(null,arguments)}function v(h,y){var E=Array.prototype.slice.call(arguments,1);return function(){var N=E.slice();return N.push.apply(N,arguments),h.apply(this,N)}}function T(h,y){function E(){}E.prototype=y.prototype,h.Z=y.prototype,h.prototype=new E,h.prototype.constructor=h,h.Ob=function(N,G,W){for(var pt=Array(arguments.length-2),Pt=2;Pt<arguments.length;Pt++)pt[Pt-2]=arguments[Pt];return y.prototype[G].apply(N,pt)}}var x=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function S(h){const y=h.length;if(y>0){const E=Array(y);for(let N=0;N<y;N++)E[N]=h[N];return E}return[]}function U(h,y){for(let N=1;N<arguments.length;N++){const G=arguments[N];var E=typeof G;if(E=E!="object"?E:G?Array.isArray(G)?"array":E:"null",E=="array"||E=="object"&&typeof G.length=="number"){E=h.length||0;const W=G.length||0;h.length=E+W;for(let pt=0;pt<W;pt++)h[E+pt]=G[pt]}else h.push(G)}}class F{constructor(y,E){this.i=y,this.j=E,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function Z(h){c.setTimeout(()=>{throw h},0)}function ot(){var h=O;let y=null;return h.g&&(y=h.g,h.g=h.g.next,h.g||(h.h=null),y.next=null),y}class L{constructor(){this.h=this.g=null}add(y,E){const N=J.get();N.set(y,E),this.h?this.h.next=N:this.g=N,this.h=N}}var J=new F(()=>new et,h=>h.reset());class et{constructor(){this.next=this.g=this.h=null}set(y,E){this.h=y,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let dt,rt=!1,O=new L,C=()=>{const h=Promise.resolve(void 0);dt=()=>{h.then(R)}};function R(){for(var h;h=ot();){try{h.h.call(h.g)}catch(E){Z(E)}var y=J;y.j(h),y.h<100&&(y.h++,h.next=y.g,y.g=h)}rt=!1}function j(){this.u=this.u,this.C=this.C}j.prototype.u=!1,j.prototype.dispose=function(){this.u||(this.u=!0,this.N())},j.prototype[Symbol.dispose]=function(){this.dispose()},j.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function k(h,y){this.type=h,this.g=this.target=y,this.defaultPrevented=!1}k.prototype.h=function(){this.defaultPrevented=!0};var I=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var h=!1,y=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const E=()=>{};c.addEventListener("test",E,y),c.removeEventListener("test",E,y)}catch{}return h})();function A(h){return/^[\s\xa0]*$/.test(h)}function ct(h,y){k.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,y)}T(ct,k),ct.prototype.init=function(h,y){const E=this.type=h.type,N=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=y,y=h.relatedTarget,y||(E=="mouseover"?y=h.fromElement:E=="mouseout"&&(y=h.toElement)),this.relatedTarget=y,N?(this.clientX=N.clientX!==void 0?N.clientX:N.pageX,this.clientY=N.clientY!==void 0?N.clientY:N.pageY,this.screenX=N.screenX||0,this.screenY=N.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&ct.Z.h.call(this)},ct.prototype.h=function(){ct.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var H="closure_listenable_"+(Math.random()*1e6|0),M=0;function P(h,y,E,N,G){this.listener=h,this.proxy=null,this.src=y,this.type=E,this.capture=!!N,this.ha=G,this.key=++M,this.da=this.fa=!1}function K(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function q(h,y,E){for(const N in h)y.call(E,h[N],N,h)}function it(h,y){for(const E in h)y.call(void 0,h[E],E,h)}function D(h){const y={};for(const E in h)y[E]=h[E];return y}const Q="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ht(h,y){let E,N;for(let G=1;G<arguments.length;G++){N=arguments[G];for(E in N)h[E]=N[E];for(let W=0;W<Q.length;W++)E=Q[W],Object.prototype.hasOwnProperty.call(N,E)&&(h[E]=N[E])}}function mt(h){this.src=h,this.g={},this.h=0}mt.prototype.add=function(h,y,E,N,G){const W=h.toString();h=this.g[W],h||(h=this.g[W]=[],this.h++);const pt=St(h,y,N,G);return pt>-1?(y=h[pt],E||(y.fa=!1)):(y=new P(y,this.src,W,!!N,G),y.fa=E,h.push(y)),y};function gt(h,y){const E=y.type;if(E in h.g){var N=h.g[E],G=Array.prototype.indexOf.call(N,y,void 0),W;(W=G>=0)&&Array.prototype.splice.call(N,G,1),W&&(K(y),h.g[E].length==0&&(delete h.g[E],h.h--))}}function St(h,y,E,N){for(let G=0;G<h.length;++G){const W=h[G];if(!W.da&&W.listener==y&&W.capture==!!E&&W.ha==N)return G}return-1}var Rt="closure_lm_"+(Math.random()*1e6|0),Jt={};function Xt(h,y,E,N,G){if(Array.isArray(y)){for(let W=0;W<y.length;W++)Xt(h,y[W],E,N,G);return null}return E=Mi(E),h&&h[H]?h.J(y,E,m(N)?!!N.capture:!1,G):ln(h,y,E,!1,N,G)}function ln(h,y,E,N,G,W){if(!y)throw Error("Invalid event type");const pt=m(G)?!!G.capture:!!G;let Pt=rr(h);if(Pt||(h[Rt]=Pt=new mt(h)),E=Pt.add(y,E,N,pt,W),E.proxy)return E;if(N=bn(),E.proxy=N,N.src=h,N.listener=E,h.addEventListener)I||(G=pt),G===void 0&&(G=!1),h.addEventListener(y.toString(),N,G);else if(h.attachEvent)h.attachEvent(Xn(y.toString()),N);else if(h.addListener&&h.removeListener)h.addListener(N);else throw Error("addEventListener and attachEvent are unavailable.");return E}function bn(){function h(E){return y.call(h.src,h.listener,E)}const y=zr;return h}function qs(h,y,E,N,G){if(Array.isArray(y))for(var W=0;W<y.length;W++)qs(h,y[W],E,N,G);else N=m(N)?!!N.capture:!!N,E=Mi(E),h&&h[H]?(h=h.i,W=String(y).toString(),W in h.g&&(y=h.g[W],E=St(y,E,N,G),E>-1&&(K(y[E]),Array.prototype.splice.call(y,E,1),y.length==0&&(delete h.g[W],h.h--)))):h&&(h=rr(h))&&(y=h.g[y.toString()],h=-1,y&&(h=St(y,E,N,G)),(E=h>-1?y[h]:null)&&Ur(E))}function Ur(h){if(typeof h!="number"&&h&&!h.da){var y=h.src;if(y&&y[H])gt(y.i,h);else{var E=h.type,N=h.proxy;y.removeEventListener?y.removeEventListener(E,N,h.capture):y.detachEvent?y.detachEvent(Xn(E),N):y.addListener&&y.removeListener&&y.removeListener(N),(E=rr(y))?(gt(E,h),E.h==0&&(E.src=null,y[Rt]=null)):K(h)}}}function Xn(h){return h in Jt?Jt[h]:Jt[h]="on"+h}function zr(h,y){if(h.da)h=!0;else{y=new ct(y,this);const E=h.listener,N=h.ha||h.src;h.fa&&Ur(h),h=E.call(N,y)}return h}function rr(h){return h=h[Rt],h instanceof mt?h:null}var Br="__closure_events_fn_"+(Math.random()*1e9>>>0);function Mi(h){return typeof h=="function"?h:(h[Br]||(h[Br]=function(y){return h.handleEvent(y)}),h[Br])}function ye(){j.call(this),this.i=new mt(this),this.M=this,this.G=null}T(ye,j),ye.prototype[H]=!0,ye.prototype.removeEventListener=function(h,y,E,N){qs(this,h,y,E,N)};function xe(h,y){var E,N=h.G;if(N)for(E=[];N;N=N.G)E.push(N);if(h=h.M,N=y.type||y,typeof y=="string")y=new k(y,h);else if(y instanceof k)y.target=y.target||h;else{var G=y;y=new k(N,h),ht(y,G)}G=!0;let W,pt;if(E)for(pt=E.length-1;pt>=0;pt--)W=y.g=E[pt],G=jn(W,N,!0,y)&&G;if(W=y.g=h,G=jn(W,N,!0,y)&&G,G=jn(W,N,!1,y)&&G,E)for(pt=0;pt<E.length;pt++)W=y.g=E[pt],G=jn(W,N,!1,y)&&G}ye.prototype.N=function(){if(ye.Z.N.call(this),this.i){var h=this.i;for(const y in h.g){const E=h.g[y];for(let N=0;N<E.length;N++)K(E[N]);delete h.g[y],h.h--}}this.G=null},ye.prototype.J=function(h,y,E,N){return this.i.add(String(h),y,!1,E,N)},ye.prototype.K=function(h,y,E,N){return this.i.add(String(h),y,!0,E,N)};function jn(h,y,E,N){if(y=h.i.g[String(y)],!y)return!0;y=y.concat();let G=!0;for(let W=0;W<y.length;++W){const pt=y[W];if(pt&&!pt.da&&pt.capture==E){const Pt=pt.listener,Ce=pt.ha||pt.src;pt.fa&&gt(h.i,pt),G=Pt.call(Ce,N)!==!1&&G}}return G&&!N.defaultPrevented}function sr(h,y){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=g(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:c.setTimeout(h,y||0)}function Fr(h){h.g=sr(()=>{h.g=null,h.i&&(h.i=!1,Fr(h))},h.l);const y=h.h;h.h=null,h.m.apply(null,y)}class qe extends j{constructor(y,E){super(),this.m=y,this.l=E,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:Fr(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function pi(h){j.call(this),this.h=h,this.g={}}T(pi,j);var Hs=[];function En(h){q(h.g,function(y,E){this.g.hasOwnProperty(E)&&Ur(y)},h),h.g={}}pi.prototype.N=function(){pi.Z.N.call(this),En(this)},pi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ln=c.JSON.stringify,ja=c.JSON.parse,La=class{stringify(h){return c.JSON.stringify(h,void 0)}parse(h){return c.JSON.parse(h,void 0)}};function Pa(){}function Ua(){}var Tn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function He(){k.call(this,"d")}T(He,k);function mn(){k.call(this,"c")}T(mn,k);var be={},za=null;function qr(){return za=za||new ye}be.Ia="serverreachability";function Ba(h){k.call(this,be.Ia,h)}T(Ba,k);function xn(h){const y=qr();xe(y,new Ba(y))}be.STAT_EVENT="statevent";function ki(h,y){k.call(this,be.STAT_EVENT,h),this.stat=y}T(ki,k);function Ae(h){const y=qr();xe(y,new ki(y,h))}be.Ja="timingevent";function Zn(h,y){k.call(this,be.Ja,h),this.size=y}T(Zn,k);function Jn(h,y){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){h()},y)}function ut(){this.g=!0}ut.prototype.ua=function(){this.g=!1};function bt(h,y,E,N,G,W){h.info(function(){if(h.g)if(W){var pt="",Pt=W.split("&");for(let ne=0;ne<Pt.length;ne++){var Ce=Pt[ne].split("=");if(Ce.length>1){const _e=Ce[0];Ce=Ce[1];const ri=_e.split("_");pt=ri.length>=2&&ri[1]=="type"?pt+(_e+"="+Ce+"&"):pt+(_e+"=redacted&")}}}else pt=null;else pt=W;return"XMLHTTP REQ ("+N+") [attempt "+G+"]: "+y+`
`+E+`
`+pt})}function Vt(h,y,E,N,G,W,pt){h.info(function(){return"XMLHTTP RESP ("+N+") [ attempt "+G+"]: "+y+`
`+E+`
`+W+" "+pt})}function Et(h,y,E,N){h.info(function(){return"XMLHTTP TEXT ("+y+"): "+ee(h,E)+(N?" "+N:"")})}function It(h,y){h.info(function(){return"TIMEOUT: "+y})}ut.prototype.info=function(){};function ee(h,y){if(!h.g)return y;if(!y)return null;try{const W=JSON.parse(y);if(W){for(h=0;h<W.length;h++)if(Array.isArray(W[h])){var E=W[h];if(!(E.length<2)){var N=E[1];if(Array.isArray(N)&&!(N.length<1)){var G=N[0];if(G!="noop"&&G!="stop"&&G!="close")for(let pt=1;pt<N.length;pt++)N[pt]=""}}}}return Ln(W)}catch{return y}}var Mt={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},gi={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Wn;function Pn(){}T(Pn,Pa),Pn.prototype.g=function(){return new XMLHttpRequest},Wn=new Pn;function Ze(h){return encodeURIComponent(String(h))}function Gs(h){var y=1;h=h.split(":");const E=[];for(;y>0&&h.length;)E.push(h.shift()),y--;return h.length&&E.push(h.join(":")),E}function An(h,y,E,N){this.j=h,this.i=y,this.l=E,this.S=N||1,this.V=new pi(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new pn}function pn(){this.i=null,this.g="",this.h=!1}var zt={},Oe={};function Un(h,y,E){h.M=1,h.A=Ys(Ve(y)),h.u=E,h.R=!0,ar(h,null)}function ar(h,y){h.F=Date.now(),gn(h),h.B=Ve(h.A);var E=h.B,N=h.S;Array.isArray(N)||(N=[String(N)]),Ha(E.i,"t",N),h.C=0,E=h.j.L,h.h=new pn,h.g=oc(h.j,E?y:null,!h.u),h.P>0&&(h.O=new qe(g(h.Y,h,h.g),h.P)),y=h.V,E=h.g,N=h.ba;var G="readystatechange";Array.isArray(G)||(G&&(Hs[0]=G.toString()),G=Hs);for(let W=0;W<G.length;W++){const pt=Xt(E,G[W],N||y.handleEvent,!1,y.h||y);if(!pt)break;y.g[pt.key]=pt}y=h.J?D(h.J):{},h.u?(h.v||(h.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,y)):(h.v="GET",h.g.ea(h.B,h.v,null,y)),xn(),bt(h.i,h.v,h.B,h.l,h.S,h.u)}An.prototype.ba=function(h){h=h.target;const y=this.O;y&&bi(h)==3?y.j():this.Y(h)},An.prototype.Y=function(h){try{if(h==this.g)t:{const Pt=bi(this.g),Ce=this.g.ya(),ne=this.g.ca();if(!(Pt<3)&&(Pt!=3||this.g&&(this.h.h||this.g.la()||Je(this.g)))){this.K||Pt!=4||Ce==7||(Ce==8||ne<=0?xn(3):xn(2)),wn(this);var y=this.g.ca();this.X=y;var E=or(this);if(this.o=y==200,Vt(this.i,this.v,this.B,this.l,this.S,Pt,y),this.o){if(this.U&&!this.L){e:{if(this.g){var N,G=this.g;if((N=G.g?G.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!A(N)){var W=N;break e}}W=null}if(h=W)Et(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,ti(this,h);else{this.o=!1,this.m=3,Ae(12),ke(this),yn(this);break t}}if(this.R){h=!0;let _e;for(;!this.K&&this.C<E.length;)if(_e=yi(this,E),_e==Oe){Pt==4&&(this.m=4,Ae(14),h=!1),Et(this.i,this.l,null,"[Incomplete Response]");break}else if(_e==zt){this.m=4,Ae(15),Et(this.i,this.l,E,"[Invalid Chunk]"),h=!1;break}else Et(this.i,this.l,_e,null),ti(this,_e);if(re(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Pt!=4||E.length!=0||this.h.h||(this.m=1,Ae(16),h=!1),this.o=this.o&&h,!h)Et(this.i,this.l,E,"[Invalid Chunked Response]"),ke(this),yn(this);else if(E.length>0&&!this.W){this.W=!0;var pt=this.j;pt.g==this&&pt.aa&&!pt.P&&(pt.j.info("Great, no buffering proxy detected. Bytes received: "+E.length),pl(pt),pt.P=!0,Ae(11))}}else Et(this.i,this.l,E,null),ti(this,E);Pt==4&&ke(this),this.o&&!this.K&&(Pt==4?ic(this.j,this):(this.o=!1,gn(this)))}else ur(this.g),y==400&&E.indexOf("Unknown SID")>0?(this.m=3,Ae(12)):(this.m=0,Ae(13)),ke(this),yn(this)}}}catch{}finally{}};function or(h){if(!re(h))return h.g.la();const y=Je(h.g);if(y==="")return"";let E="";const N=y.length,G=bi(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return ke(h),yn(h),"";h.h.i=new c.TextDecoder}for(let W=0;W<N;W++)h.h.h=!0,E+=h.h.i.decode(y[W],{stream:!(G&&W==N-1)});return y.length=0,h.h.g+=E,h.C=0,h.h.g}function re(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function yi(h,y){var E=h.C,N=y.indexOf(`
`,E);return N==-1?Oe:(E=Number(y.substring(E,N)),isNaN(E)?zt:(N+=1,N+E>y.length?Oe:(y=y.slice(N,N+E),h.C=N+E,y)))}An.prototype.cancel=function(){this.K=!0,ke(this)};function gn(h){h.T=Date.now()+h.H,Me(h,h.H)}function Me(h,y){if(h.D!=null)throw Error("WatchDog timer not null");h.D=Jn(g(h.aa,h),y)}function wn(h){h.D&&(c.clearTimeout(h.D),h.D=null)}An.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(It(this.i,this.B),this.M!=2&&(xn(),Ae(17)),ke(this),this.m=2,yn(this)):Me(this,this.T-h)};function yn(h){h.j.I==0||h.K||ic(h.j,h)}function ke(h){wn(h);var y=h.O;y&&typeof y.dispose=="function"&&y.dispose(),h.O=null,En(h.V),h.g&&(y=h.g,h.g=null,y.abort(),y.dispose())}function ti(h,y){try{var E=h.j;if(E.I!=0&&(E.g==h||Vi(E.h,h))){if(!h.L&&Vi(E.h,h)&&E.I==3){try{var N=E.Ba.g.parse(y)}catch{N=null}if(Array.isArray(N)&&N.length==3){var G=N;if(G[0]==0){t:if(!E.v){if(E.g)if(E.g.F+3e3<h.F)Qa(E),Jr(E);else break t;ta(E),Ae(18)}}else E.xa=G[1],0<E.xa-E.K&&G[2]<37500&&E.F&&E.A==0&&!E.C&&(E.C=Jn(g(E.Va,E),6e3));ei(E.h)<=1&&E.ta&&(E.ta=void 0)}else Bi(E,11)}else if((h.L||E.g==h)&&Qa(E),!A(y))for(G=E.Ba.g.parse(y),y=0;y<G.length;y++){let ne=G[y];const _e=ne[0];if(!(_e<=E.K))if(E.K=_e,ne=ne[1],E.I==2)if(ne[0]=="c"){E.M=ne[1],E.ba=ne[2];const ri=ne[3];ri!=null&&(E.ka=ri,E.j.info("VER="+E.ka));const Fi=ne[4];Fi!=null&&(E.za=Fi,E.j.info("SVER="+E.za));const Ei=ne[5];Ei!=null&&typeof Ei=="number"&&Ei>0&&(N=1.5*Ei,E.O=N,E.j.info("backChannelRequestTimeoutMs_="+N)),N=E;const Ti=h.g;if(Ti){const ea=Ti.g?Ti.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ea){var W=N.h;W.g||ea.indexOf("spdy")==-1&&ea.indexOf("quic")==-1&&ea.indexOf("h2")==-1||(W.j=W.l,W.g=new Set,W.h&&(il(W,W.h),W.h=null))}if(N.G){const Xa=Ti.g?Ti.g.getResponseHeader("X-HTTP-Session-Id"):null;Xa&&(N.wa=Xa,ae(N.J,N.G,Xa))}}E.I=3,E.l&&E.l.ra(),E.aa&&(E.T=Date.now()-h.F,E.j.info("Handshake RTT: "+E.T+"ms")),N=E;var pt=h;if(N.na=ac(N,N.L?N.ba:null,N.W),pt.L){rl(N.h,pt);var Pt=pt,Ce=N.O;Ce&&(Pt.H=Ce),Pt.D&&(wn(Pt),gn(Pt)),N.g=pt}else ec(N);E.i.length>0&&zi(E)}else ne[0]!="stop"&&ne[0]!="close"||Bi(E,7);else E.I==3&&(ne[0]=="stop"||ne[0]=="close"?ne[0]=="stop"?Bi(E,7):dl(E):ne[0]!="noop"&&E.l&&E.l.qa(ne),E.A=0)}}xn(4)}catch{}}var we=class{constructor(h,y){this.g=h,this.map=y}};function Hr(h){this.l=h||10,c.PerformanceNavigationTiming?(h=c.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function $s(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function ei(h){return h.h?1:h.g?h.g.size:0}function Vi(h,y){return h.h?h.h==y:h.g?h.g.has(y):!1}function il(h,y){h.g?h.g.add(y):h.h=y}function rl(h,y){h.h&&h.h==y?h.h=null:h.g&&h.g.has(y)&&h.g.delete(y)}Hr.prototype.cancel=function(){if(this.i=sl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function sl(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let y=h.i;for(const E of h.g.values())y=y.concat(E.G);return y}return S(h.i)}var Qu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Fa(h,y){if(h){h=h.split("&");for(let E=0;E<h.length;E++){const N=h[E].indexOf("=");let G,W=null;N>=0?(G=h[E].substring(0,N),W=h[E].substring(N+1)):G=h[E],y(G,W?decodeURIComponent(W.replace(/\+/g," ")):"")}}}function zn(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;h instanceof zn?(this.l=h.l,Ke(this,h.j),this.o=h.o,this.g=h.g,Gr(this,h.u),this.h=h.h,al(this,Wu(h.i)),this.m=h.m):h&&(y=String(h).match(Qu))?(this.l=!1,Ke(this,y[1]||"",!0),this.o=ji(y[2]||""),this.g=ji(y[3]||"",!0),Gr(this,y[4]),this.h=ji(y[5]||"",!0),al(this,y[6]||"",!0),this.m=ji(y[7]||"")):(this.l=!1,this.i=new Yr(null,this.l))}zn.prototype.toString=function(){const h=[];var y=this.j;y&&h.push(Ks(y,qa,!0),":");var E=this.g;return(E||y=="file")&&(h.push("//"),(y=this.o)&&h.push(Ks(y,qa,!0),"@"),h.push(Ze(E).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.u,E!=null&&h.push(":",String(E))),(E=this.h)&&(this.g&&E.charAt(0)!="/"&&h.push("/"),h.push(Ks(E,E.charAt(0)=="/"?ol:Xu,!0))),(E=this.i.toString())&&h.push("?",E),(E=this.m)&&h.push("#",Ks(E,Zu)),h.join("")},zn.prototype.resolve=function(h){const y=Ve(this);let E=!!h.j;E?Ke(y,h.j):E=!!h.o,E?y.o=h.o:E=!!h.g,E?y.g=h.g:E=h.u!=null;var N=h.h;if(E)Gr(y,h.u);else if(E=!!h.h){if(N.charAt(0)!="/")if(this.g&&!this.h)N="/"+N;else{var G=y.h.lastIndexOf("/");G!=-1&&(N=y.h.slice(0,G+1)+N)}if(G=N,G==".."||G==".")N="";else if(G.indexOf("./")!=-1||G.indexOf("/.")!=-1){N=G.lastIndexOf("/",0)==0,G=G.split("/");const W=[];for(let pt=0;pt<G.length;){const Pt=G[pt++];Pt=="."?N&&pt==G.length&&W.push(""):Pt==".."?((W.length>1||W.length==1&&W[0]!="")&&W.pop(),N&&pt==G.length&&W.push("")):(W.push(Pt),N=!0)}N=W.join("/")}else N=G}return E?y.h=N:E=h.i.toString()!=="",E?al(y,Wu(h.i)):E=!!h.m,E&&(y.m=h.m),y};function Ve(h){return new zn(h)}function Ke(h,y,E){h.j=E?ji(y,!0):y,h.j&&(h.j=h.j.replace(/:$/,""))}function Gr(h,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);h.u=y}else h.u=null}function al(h,y,E){y instanceof Yr?(h.i=y,Ga(h.i,h.l)):(E||(y=Ks(y,$r)),h.i=new Yr(y,h.l))}function ae(h,y,E){h.i.set(y,E)}function Ys(h){return ae(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function ji(h,y){return h?y?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Ks(h,y,E){return typeof h=="string"?(h=encodeURI(h).replace(y,Sn),E&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function Sn(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var qa=/[#\/\?@]/g,Xu=/[#\?:]/g,ol=/[#\?]/g,$r=/[#\?@]/g,Zu=/#/g;function Yr(h,y){this.h=this.g=null,this.i=h||null,this.j=!!y}function Nn(h){h.g||(h.g=new Map,h.h=0,h.i&&Fa(h.i,function(y,E){h.add(decodeURIComponent(y.replace(/\+/g," ")),E)}))}i=Yr.prototype,i.add=function(h,y){Nn(this),this.i=null,h=Kr(this,h);let E=this.g.get(h);return E||this.g.set(h,E=[]),E.push(y),this.h+=1,this};function Ju(h,y){Nn(h),y=Kr(h,y),h.g.has(y)&&(h.i=null,h.h-=h.g.get(y).length,h.g.delete(y))}function ll(h,y){return Nn(h),y=Kr(h,y),h.g.has(y)}i.forEach=function(h,y){Nn(this),this.g.forEach(function(E,N){E.forEach(function(G){h.call(y,G,N,this)},this)},this)};function ul(h,y){Nn(h);let E=[];if(typeof y=="string")ll(h,y)&&(E=E.concat(h.g.get(Kr(h,y))));else for(h=Array.from(h.g.values()),y=0;y<h.length;y++)E=E.concat(h[y]);return E}i.set=function(h,y){return Nn(this),this.i=null,h=Kr(this,h),ll(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[y]),this.h+=1,this},i.get=function(h,y){return h?(h=ul(this,h),h.length>0?String(h[0]):y):y};function Ha(h,y,E){Ju(h,y),E.length>0&&(h.i=null,h.g.set(Kr(h,y),S(E)),h.h+=E.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],y=Array.from(this.g.keys());for(let N=0;N<y.length;N++){var E=y[N];const G=Ze(E);E=ul(this,E);for(let W=0;W<E.length;W++){let pt=G;E[W]!==""&&(pt+="="+Ze(E[W])),h.push(pt)}}return this.i=h.join("&")};function Wu(h){const y=new Yr;return y.i=h.i,h.g&&(y.g=new Map(h.g),y.h=h.h),y}function Kr(h,y){return y=String(y),h.j&&(y=y.toLowerCase()),y}function Ga(h,y){y&&!h.j&&(Nn(h),h.i=null,h.g.forEach(function(E,N){const G=N.toLowerCase();N!=G&&(Ju(this,N),Ha(this,G,E))},h)),h.j=y}function _i(h,y){const E=new ut;if(c.Image){const N=new Image;N.onload=v(ni,E,"TestLoadImage: loaded",!0,y,N),N.onerror=v(ni,E,"TestLoadImage: error",!1,y,N),N.onabort=v(ni,E,"TestLoadImage: abort",!1,y,N),N.ontimeout=v(ni,E,"TestLoadImage: timeout",!1,y,N),c.setTimeout(function(){N.ontimeout&&N.ontimeout()},1e4),N.src=h}else y(!1)}function cl(h,y){const E=new ut,N=new AbortController,G=setTimeout(()=>{N.abort(),ni(E,"TestPingServer: timeout",!1,y)},1e4);fetch(h,{signal:N.signal}).then(W=>{clearTimeout(G),W.ok?ni(E,"TestPingServer: ok",!0,y):ni(E,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(G),ni(E,"TestPingServer: error",!1,y)})}function ni(h,y,E,N,G){try{G&&(G.onload=null,G.onerror=null,G.onabort=null,G.ontimeout=null),N(E)}catch{}}function Qr(){this.g=new La}function Li(h){this.i=h.Sb||null,this.h=h.ab||!1}T(Li,Pa),Li.prototype.g=function(){return new Qs(this.i,this.h)};function Qs(h,y){ye.call(this),this.H=h,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}T(Qs,ye),i=Qs.prototype,i.open=function(h,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=y,this.readyState=1,vi(this)},i.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(y.body=h),(this.H||c).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Xr(this)),this.readyState=0},i.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,vi(this)),this.g&&(this.readyState=3,vi(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;$a(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function $a(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}i.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var y=h.value?h.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!h.done}))&&(this.response=this.responseText+=y)}h.done?Xr(this):vi(this),this.readyState==3&&$a(this)}},i.Oa=function(h){this.g&&(this.response=this.responseText=h,Xr(this))},i.Na=function(h){this.g&&(this.response=h,Xr(this))},i.ga=function(){this.g&&Xr(this)};function Xr(h){h.readyState=4,h.l=null,h.j=null,h.B=null,vi(h)}i.setRequestHeader=function(h,y){this.A.append(h,y)},i.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],y=this.h.entries();for(var E=y.next();!E.done;)E=E.value,h.push(E[0]+": "+E[1]),E=y.next();return h.join(`\r
`)};function vi(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Qs.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function ii(h){let y="";return q(h,function(E,N){y+=N,y+=":",y+=E,y+=`\r
`}),y}function Xs(h,y,E){t:{for(N in E){var N=!1;break t}N=!0}N||(E=ii(E),typeof h=="string"?E!=null&&Ze(E):ae(h,y,E))}function ue(h){ye.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}T(ue,ye);var Pi=/^https?$/i,hl=["POST","PUT"];i=ue.prototype,i.Fa=function(h){this.H=h},i.ea=function(h,y,E,N){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);y=y?y.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Wn.g(),this.g.onreadystatechange=x(g(this.Ca,this));try{this.B=!0,this.g.open(y,String(h),!0),this.B=!1}catch(W){Zs(this,W);return}if(h=E||"",E=new Map(this.headers),N)if(Object.getPrototypeOf(N)===Object.prototype)for(var G in N)E.set(G,N[G]);else if(typeof N.keys=="function"&&typeof N.get=="function")for(const W of N.keys())E.set(W,N.get(W));else throw Error("Unknown input type for opt_headers: "+String(N));N=Array.from(E.keys()).find(W=>W.toLowerCase()=="content-type"),G=c.FormData&&h instanceof c.FormData,!(Array.prototype.indexOf.call(hl,y,void 0)>=0)||N||G||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[W,pt]of E)this.g.setRequestHeader(W,pt);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(W){Zs(this,W)}};function Zs(h,y){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=y,h.o=5,fl(h),lr(h)}function fl(h){h.A||(h.A=!0,xe(h,"complete"),xe(h,"error"))}i.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,xe(this,"complete"),xe(this,"abort"),lr(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),lr(this,!0)),ue.Z.N.call(this)},i.Ca=function(){this.u||(this.B||this.v||this.j?Js(this):this.Xa())},i.Xa=function(){Js(this)};function Js(h){if(h.h&&typeof u<"u"){if(h.v&&bi(h)==4)setTimeout(h.Ca.bind(h),0);else if(xe(h,"readystatechange"),bi(h)==4){h.h=!1;try{const W=h.ca();t:switch(W){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break t;default:y=!1}var E;if(!(E=y)){var N;if(N=W===0){let pt=String(h.D).match(Qu)[1]||null;!pt&&c.self&&c.self.location&&(pt=c.self.location.protocol.slice(0,-1)),N=!Pi.test(pt?pt.toLowerCase():"")}E=N}if(E)xe(h,"complete"),xe(h,"success");else{h.o=6;try{var G=bi(h)>2?h.g.statusText:""}catch{G=""}h.l=G+" ["+h.ca()+"]",fl(h)}}finally{lr(h)}}}}function lr(h,y){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const E=h.g;h.g=null,y||xe(h,"ready");try{E.onreadystatechange=null}catch{}}}i.isActive=function(){return!!this.g};function bi(h){return h.g?h.g.readyState:0}i.ca=function(){try{return bi(this)>2?this.g.status:-1}catch{return-1}},i.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.La=function(h){if(this.g){var y=this.g.responseText;return h&&y.indexOf(h)==0&&(y=y.substring(h.length)),ja(y)}};function Je(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function ur(h){const y={};h=(h.g&&bi(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let N=0;N<h.length;N++){if(A(h[N]))continue;var E=Gs(h[N]);const G=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const W=y[G]||[];y[G]=W,W.push(E)}it(y,function(N){return N.join(", ")})}i.ya=function(){return this.o},i.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ui(h,y,E){return E&&E.internalChannelParams&&E.internalChannelParams[h]||y}function Zr(h){this.za=0,this.i=[],this.j=new ut,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ui("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ui("baseRetryDelayMs",5e3,h),this.Za=Ui("retryDelaySeedMs",1e4,h),this.Ta=Ui("forwardChannelMaxRetries",2,h),this.va=Ui("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new Hr(h&&h.concurrentRequestLimit),this.Ba=new Qr,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}i=Zr.prototype,i.ka=8,i.I=1,i.connect=function(h,y,E,N){Ae(0),this.W=h,this.H=y||{},E&&N!==void 0&&(this.H.OSID=E,this.H.OAID=N),this.F=this.X,this.J=ac(this,null,this.W),zi(this)};function dl(h){if(Ya(h),h.I==3){var y=h.V++,E=Ve(h.J);if(ae(E,"SID",h.M),ae(E,"RID",y),ae(E,"TYPE","terminate"),Ws(h,E),y=new An(h,h.j,y),y.M=2,y.A=Ys(Ve(E)),E=!1,c.navigator&&c.navigator.sendBeacon)try{E=c.navigator.sendBeacon(y.A.toString(),"")}catch{}!E&&c.Image&&(new Image().src=y.A,E=!0),E||(y.g=oc(y.j,null),y.g.ea(y.A)),y.F=Date.now(),gn(y)}sc(h)}function Jr(h){h.g&&(pl(h),h.g.cancel(),h.g=null)}function Ya(h){Jr(h),h.v&&(c.clearTimeout(h.v),h.v=null),Qa(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&c.clearTimeout(h.m),h.m=null)}function zi(h){if(!$s(h.h)&&!h.m){h.m=!0;var y=h.Ea;dt||C(),rt||(dt(),rt=!0),O.add(y,h),h.D=0}}function Ka(h,y){return ei(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=y.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=Jn(g(h.Ea,h,y),rc(h,h.D)),h.D++,!0)}i.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const G=new An(this,this.j,h);let W=this.o;if(this.U&&(W?(W=D(W),ht(W,this.U)):W=this.U),this.u!==null||this.R||(G.J=W,W=null),this.S)t:{for(var y=0,E=0;E<this.i.length;E++){e:{var N=this.i[E];if("__data__"in N.map&&(N=N.map.__data__,typeof N=="string")){N=N.length;break e}N=void 0}if(N===void 0)break;if(y+=N,y>4096){y=E;break t}if(y===4096||E===this.i.length-1){y=E+1;break t}}y=1e3}else y=1e3;y=tc(this,G,y),E=Ve(this.J),ae(E,"RID",h),ae(E,"CVER",22),this.G&&ae(E,"X-HTTP-Session-Id",this.G),Ws(this,E),W&&(this.R?y="headers="+Ze(ii(W))+"&"+y:this.u&&Xs(E,this.u,W)),il(this.h,G),this.Ra&&ae(E,"TYPE","init"),this.S?(ae(E,"$req",y),ae(E,"SID","null"),G.U=!0,Un(G,E,null)):Un(G,E,y),this.I=2}}else this.I==3&&(h?ml(this,h):this.i.length==0||$s(this.h)||ml(this))};function ml(h,y){var E;y?E=y.l:E=h.V++;const N=Ve(h.J);ae(N,"SID",h.M),ae(N,"RID",E),ae(N,"AID",h.K),Ws(h,N),h.u&&h.o&&Xs(N,h.u,h.o),E=new An(h,h.j,E,h.D+1),h.u===null&&(E.J=h.o),y&&(h.i=y.G.concat(h.i)),y=tc(h,E,1e3),E.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),il(h.h,E),Un(E,N,y)}function Ws(h,y){h.H&&q(h.H,function(E,N){ae(y,N,E)}),h.l&&q({},function(E,N){ae(y,N,E)})}function tc(h,y,E){E=Math.min(h.i.length,E);const N=h.l?g(h.l.Ka,h.l,h):null;t:{var G=h.i;let Pt=-1;for(;;){const Ce=["count="+E];Pt==-1?E>0?(Pt=G[0].g,Ce.push("ofs="+Pt)):Pt=0:Ce.push("ofs="+Pt);let ne=!0;for(let _e=0;_e<E;_e++){var W=G[_e].g;const ri=G[_e].map;if(W-=Pt,W<0)Pt=Math.max(0,G[_e].g-100),ne=!1;else try{W="req"+W+"_"||"";try{var pt=ri instanceof Map?ri:Object.entries(ri);for(const[Fi,Ei]of pt){let Ti=Ei;m(Ei)&&(Ti=Ln(Ei)),Ce.push(W+Fi+"="+encodeURIComponent(Ti))}}catch(Fi){throw Ce.push(W+"type="+encodeURIComponent("_badmap")),Fi}}catch{N&&N(ri)}}if(ne){pt=Ce.join("&");break t}}pt=void 0}return h=h.i.splice(0,E),y.G=h,pt}function ec(h){if(!h.g&&!h.v){h.Y=1;var y=h.Da;dt||C(),rt||(dt(),rt=!0),O.add(y,h),h.A=0}}function ta(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=Jn(g(h.Da,h),rc(h,h.A)),h.A++,!0)}i.Da=function(){if(this.v=null,nc(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=Jn(g(this.Wa,this),h)}},i.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Ae(10),Jr(this),nc(this))};function pl(h){h.B!=null&&(c.clearTimeout(h.B),h.B=null)}function nc(h){h.g=new An(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var y=Ve(h.na);ae(y,"RID","rpc"),ae(y,"SID",h.M),ae(y,"AID",h.K),ae(y,"CI",h.F?"0":"1"),!h.F&&h.ia&&ae(y,"TO",h.ia),ae(y,"TYPE","xmlhttp"),Ws(h,y),h.u&&h.o&&Xs(y,h.u,h.o),h.O&&(h.g.H=h.O);var E=h.g;h=h.ba,E.M=1,E.A=Ys(Ve(y)),E.u=null,E.R=!0,ar(E,h)}i.Va=function(){this.C!=null&&(this.C=null,Jr(this),ta(this),Ae(19))};function Qa(h){h.C!=null&&(c.clearTimeout(h.C),h.C=null)}function ic(h,y){var E=null;if(h.g==y){Qa(h),pl(h),h.g=null;var N=2}else if(Vi(h.h,y))E=y.G,rl(h.h,y),N=1;else return;if(h.I!=0){if(y.o)if(N==1){E=y.u?y.u.length:0,y=Date.now()-y.F;var G=h.D;N=qr(),xe(N,new Zn(N,E)),zi(h)}else ec(h);else if(G=y.m,G==3||G==0&&y.X>0||!(N==1&&Ka(h,y)||N==2&&ta(h)))switch(E&&E.length>0&&(y=h.h,y.i=y.i.concat(E)),G){case 1:Bi(h,5);break;case 4:Bi(h,10);break;case 3:Bi(h,6);break;default:Bi(h,2)}}}function rc(h,y){let E=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(E*=2),E*y}function Bi(h,y){if(h.j.info("Error code "+y),y==2){var E=g(h.bb,h),N=h.Ua;const G=!N;N=new zn(N||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Ke(N,"https"),Ys(N),G?_i(N.toString(),E):cl(N.toString(),E)}else Ae(2);h.I=0,h.l&&h.l.pa(y),sc(h),Ya(h)}i.bb=function(h){h?(this.j.info("Successfully pinged google.com"),Ae(2)):(this.j.info("Failed to ping google.com"),Ae(1))};function sc(h){if(h.I=0,h.ja=[],h.l){const y=sl(h.h);(y.length!=0||h.i.length!=0)&&(U(h.ja,y),U(h.ja,h.i),h.h.i.length=0,S(h.i),h.i.length=0),h.l.oa()}}function ac(h,y,E){var N=E instanceof zn?Ve(E):new zn(E);if(N.g!="")y&&(N.g=y+"."+N.g),Gr(N,N.u);else{var G=c.location;N=G.protocol,y=y?y+"."+G.hostname:G.hostname,G=+G.port;const W=new zn(null);N&&Ke(W,N),y&&(W.g=y),G&&Gr(W,G),E&&(W.h=E),N=W}return E=h.G,y=h.wa,E&&y&&ae(N,E,y),ae(N,"VER",h.ka),Ws(h,N),N}function oc(h,y,E){if(y&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=h.Aa&&!h.ma?new ue(new Li({ab:E})):new ue(h.ma),y.Fa(h.L),y}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function lc(){}i=lc.prototype,i.ra=function(){},i.qa=function(){},i.pa=function(){},i.oa=function(){},i.isActive=function(){return!0},i.Ka=function(){};function Wr(){}Wr.prototype.g=function(h,y){return new _n(h,y)};function _n(h,y){ye.call(this),this.g=new Zr(y),this.l=h,this.h=y&&y.messageUrlParams||null,h=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(h?h["X-WebChannel-Content-Type"]=y.messageContentType:h={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(h?h["X-WebChannel-Client-Profile"]=y.sa:h={"X-WebChannel-Client-Profile":y.sa}),this.g.U=h,(h=y&&y.Qb)&&!A(h)&&(this.g.u=h),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!A(y)&&(this.g.G=y,h=this.h,h!==null&&y in h&&(h=this.h,y in h&&delete h[y])),this.j=new cr(this)}T(_n,ye),_n.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},_n.prototype.close=function(){dl(this.g)},_n.prototype.o=function(h){var y=this.g;if(typeof h=="string"){var E={};E.__data__=h,h=E}else this.v&&(E={},E.__data__=Ln(h),h=E);y.i.push(new we(y.Ya++,h)),y.I==3&&zi(y)},_n.prototype.N=function(){this.g.l=null,delete this.j,dl(this.g),delete this.g,_n.Z.N.call(this)};function uc(h){He.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var y=h.__sm__;if(y){t:{for(const E in y){h=E;break t}h=void 0}(this.i=h)&&(h=this.i,y=y!==null&&h in y?y[h]:void 0),this.data=y}else this.data=h}T(uc,He);function cc(){mn.call(this),this.status=1}T(cc,mn);function cr(h){this.g=h}T(cr,lc),cr.prototype.ra=function(){xe(this.g,"a")},cr.prototype.qa=function(h){xe(this.g,new uc(h))},cr.prototype.pa=function(h){xe(this.g,new cc)},cr.prototype.oa=function(){xe(this.g,"b")},Wr.prototype.createWebChannel=Wr.prototype.g,_n.prototype.send=_n.prototype.o,_n.prototype.open=_n.prototype.m,_n.prototype.close=_n.prototype.close,UT=function(){return new Wr},PT=function(){return qr()},LT=be,vp={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Mt.NO_ERROR=0,Mt.TIMEOUT=8,Mt.HTTP_ERROR=6,Dh=Mt,gi.COMPLETE="complete",jT=gi,Ua.EventType=Tn,Tn.OPEN="a",Tn.CLOSE="b",Tn.ERROR="c",Tn.MESSAGE="d",ye.prototype.listen=ye.prototype.J,su=Ua,ue.prototype.listenOnce=ue.prototype.K,ue.prototype.getLastError=ue.prototype.Ha,ue.prototype.getLastErrorCode=ue.prototype.ya,ue.prototype.getStatus=ue.prototype.ca,ue.prototype.getResponseJson=ue.prototype.La,ue.prototype.getResponseText=ue.prototype.la,ue.prototype.send=ue.prototype.ea,ue.prototype.setWithCredentials=ue.prototype.Fa,VT=ue}).apply(typeof ph<"u"?ph:typeof self<"u"?self:typeof window<"u"?window:{});const ab="@firebase/firestore",ob="4.9.3";class hn{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}hn.UNAUTHENTICATED=new hn(null),hn.GOOGLE_CREDENTIALS=new hn("google-credentials-uid"),hn.FIRST_PARTY=new hn("first-party-uid"),hn.MOCK_USER=new hn("mock-user");let Wo="12.7.0";const Ia=new tg("@firebase/firestore");function Co(){return Ia.logLevel}function _t(i,...t){if(Ia.logLevel<=$t.DEBUG){const e=t.map(hg);Ia.debug(`Firestore (${Wo}): ${i}`,...e)}}function Mr(i,...t){if(Ia.logLevel<=$t.ERROR){const e=t.map(hg);Ia.error(`Firestore (${Wo}): ${i}`,...e)}}function Fo(i,...t){if(Ia.logLevel<=$t.WARN){const e=t.map(hg);Ia.warn(`Firestore (${Wo}): ${i}`,...e)}}function hg(i){if(typeof i=="string")return i;try{return(function(e){return JSON.stringify(e)})(i)}catch{return i}}function Ot(i,t,e){let s="Unexpected state";typeof t=="string"?s=t:e=t,zT(i,s,e)}function zT(i,t,e){let s=`FIRESTORE (${Wo}) INTERNAL ASSERTION FAILED: ${t} (ID: ${i.toString(16)})`;if(e!==void 0)try{s+=" CONTEXT: "+JSON.stringify(e)}catch{s+=" CONTEXT: "+e}throw Mr(s),new Error(s)}function se(i,t,e,s){let o="Unexpected state";typeof e=="string"?o=e:s=e,i||zT(t,o,s)}function Lt(i,t){return i}const ft={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class At extends jr{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Ms{constructor(){this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}}class BT{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class BC{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable((()=>e(hn.UNAUTHENTICATED)))}shutdown(){}}class FC{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable((()=>e(this.token.user)))}shutdown(){this.changeListener=null}}class qC{constructor(t){this.t=t,this.currentUser=hn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){se(this.o===void 0,42304);let s=this.i;const o=p=>this.i!==s?(s=this.i,e(p)):Promise.resolve();let u=new Ms;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new Ms,t.enqueueRetryable((()=>o(this.currentUser)))};const c=()=>{const p=u;t.enqueueRetryable((async()=>{await p.promise,await o(this.currentUser)}))},m=p=>{_t("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((p=>m(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?m(p):(_t("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new Ms)}}),0),c()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then((s=>this.i!==t?(_t("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(se(typeof s.accessToken=="string",31837,{l:s}),new BT(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return se(t===null||typeof t=="string",2055,{h:t}),new hn(t)}}class HC{constructor(t,e,s){this.P=t,this.T=e,this.I=s,this.type="FirstParty",this.user=hn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class GC{constructor(t,e,s){this.P=t,this.T=e,this.I=s}getToken(){return Promise.resolve(new HC(this.P,this.T,this.I))}start(t,e){t.enqueueRetryable((()=>e(hn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class lb{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class $C{constructor(t,e){this.V=e,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,di(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,e){se(this.o===void 0,3512);const s=u=>{u.error!=null&&_t("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const c=u.token!==this.m;return this.m=u.token,_t("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?e(u.token):Promise.resolve()};this.o=u=>{t.enqueueRetryable((()=>s(u)))};const o=u=>{_t("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>o(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?o(u):_t("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new lb(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((e=>e?(se(typeof e.token=="string",44558,{tokenResult:e}),this.m=e.token,new lb(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function YC(i){const t=typeof self<"u"&&(self.crypto||self.msCrypto),e=new Uint8Array(i);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(e);else for(let s=0;s<i;s++)e[s]=Math.floor(256*Math.random());return e}class fg{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=YC(40);for(let u=0;u<o.length;++u)s.length<20&&o[u]<e&&(s+=t.charAt(o[u]%62))}return s}}function Yt(i,t){return i<t?-1:i>t?1:0}function bp(i,t){const e=Math.min(i.length,t.length);for(let s=0;s<e;s++){const o=i.charAt(s),u=t.charAt(s);if(o!==u)return $m(o)===$m(u)?Yt(o,u):$m(o)?1:-1}return Yt(i.length,t.length)}const KC=55296,QC=57343;function $m(i){const t=i.charCodeAt(0);return t>=KC&&t<=QC}function qo(i,t,e){return i.length===t.length&&i.every(((s,o)=>e(s,t[o])))}const ub="__name__";class Yi{constructor(t,e,s){e===void 0?e=0:e>t.length&&Ot(637,{offset:e,range:t.length}),s===void 0?s=t.length-e:s>t.length-e&&Ot(1746,{length:s,range:t.length-e}),this.segments=t,this.offset=e,this.len=s}get length(){return this.len}isEqual(t){return Yi.comparator(this,t)===0}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof Yi?t.forEach((s=>{e.push(s)})):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,s=this.limit();e<s;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const s=Math.min(t.length,e.length);for(let o=0;o<s;o++){const u=Yi.compareSegments(t.get(o),e.get(o));if(u!==0)return u}return Yt(t.length,e.length)}static compareSegments(t,e){const s=Yi.isNumericId(t),o=Yi.isNumericId(e);return s&&!o?-1:!s&&o?1:s&&o?Yi.extractNumericId(t).compare(Yi.extractNumericId(e)):bp(t,e)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return Os.fromString(t.substring(4,t.length-2))}}class Ee extends Yi{construct(t,e,s){return new Ee(t,e,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const e=[];for(const s of t){if(s.indexOf("//")>=0)throw new At(ft.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);e.push(...s.split("/").filter((o=>o.length>0)))}return new Ee(e)}static emptyPath(){return new Ee([])}}const XC=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class sn extends Yi{construct(t,e,s){return new sn(t,e,s)}static isValidIdentifier(t){return XC.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),sn.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===ub}static keyField(){return new sn([ub])}static fromServerFormat(t){const e=[];let s="",o=0;const u=()=>{if(s.length===0)throw new At(ft.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(s),s=""};let c=!1;for(;o<t.length;){const m=t[o];if(m==="\\"){if(o+1===t.length)throw new At(ft.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const p=t[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new At(ft.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);s+=p,o+=2}else m==="`"?(c=!c,o++):m!=="."||c?(s+=m,o++):(u(),o++)}if(u(),c)throw new At(ft.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new sn(e)}static emptyPath(){return new sn([])}}class Nt{constructor(t){this.path=t}static fromPath(t){return new Nt(Ee.fromString(t))}static fromName(t){return new Nt(Ee.fromString(t).popFirst(5))}static empty(){return new Nt(Ee.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Ee.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,e){return Ee.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Nt(new Ee(t.slice()))}}function ZC(i,t,e){if(!e)throw new At(ft.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${t}.`)}function JC(i,t,e,s){if(t===!0&&s===!0)throw new At(ft.INVALID_ARGUMENT,`${i} and ${e} cannot be used together.`)}function cb(i){if(!Nt.isDocumentKey(i))throw new At(ft.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function FT(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}function dg(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const t=(function(s){return s.constructor?s.constructor.name:null})(i);return t?`a custom ${t} object`:"an object"}}return typeof i=="function"?"a function":Ot(12329,{type:typeof i})}function Ri(i,t){if("_delegate"in i&&(i=i._delegate),!(i instanceof t)){if(t.name===i.constructor.name)throw new At(ft.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const e=dg(i);throw new At(ft.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return i}function Be(i,t){const e={typeString:i};return t&&(e.value=t),e}function Fu(i,t){if(!FT(i))throw new At(ft.INVALID_ARGUMENT,"JSON must be an object");let e;for(const s in t)if(t[s]){const o=t[s].typeString,u="value"in t[s]?{value:t[s].value}:void 0;if(!(s in i)){e=`JSON missing required field: '${s}'`;break}const c=i[s];if(o&&typeof c!==o){e=`JSON field '${s}' must be a ${o}.`;break}if(u!==void 0&&c!==u.value){e=`Expected '${s}' field to equal '${u.value}'`;break}}if(e)throw new At(ft.INVALID_ARGUMENT,e);return!0}const hb=-62135596800,fb=1e6;class ge{static now(){return ge.fromMillis(Date.now())}static fromDate(t){return ge.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),s=Math.floor((t-1e3*e)*fb);return new ge(e,s)}constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new At(ft.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new At(ft.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<hb)throw new At(ft.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new At(ft.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/fb}_compareTo(t){return this.seconds===t.seconds?Yt(this.nanoseconds,t.nanoseconds):Yt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ge._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(Fu(t,ge._jsonSchema))return new ge(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-hb;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ge._jsonSchemaVersion="firestore/timestamp/1.0",ge._jsonSchema={type:Be("string",ge._jsonSchemaVersion),seconds:Be("number"),nanoseconds:Be("number")};class kt{static fromTimestamp(t){return new kt(t)}static min(){return new kt(new ge(0,0))}static max(){return new kt(new ge(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Tu=-1;function WC(i,t){const e=i.toTimestamp().seconds,s=i.toTimestamp().nanoseconds+1,o=kt.fromTimestamp(s===1e9?new ge(e+1,0):new ge(e,s));return new ks(o,Nt.empty(),t)}function tR(i){return new ks(i.readTime,i.key,Tu)}class ks{constructor(t,e,s){this.readTime=t,this.documentKey=e,this.largestBatchId=s}static min(){return new ks(kt.min(),Nt.empty(),Tu)}static max(){return new ks(kt.max(),Nt.empty(),Tu)}}function eR(i,t){let e=i.readTime.compareTo(t.readTime);return e!==0?e:(e=Nt.comparator(i.documentKey,t.documentKey),e!==0?e:Yt(i.largestBatchId,t.largestBatchId))}const nR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class iR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}async function tl(i){if(i.code!==ft.FAILED_PRECONDITION||i.message!==nR)throw i;_t("LocalStore","Unexpectedly lost primary lease")}class lt{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&Ot(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new lt(((s,o)=>{this.nextCallback=u=>{this.wrapSuccess(t,u).next(s,o)},this.catchCallback=u=>{this.wrapFailure(e,u).next(s,o)}}))}toPromise(){return new Promise(((t,e)=>{this.next(t,e)}))}wrapUserFunction(t){try{const e=t();return e instanceof lt?e:lt.resolve(e)}catch(e){return lt.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction((()=>t(e))):lt.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction((()=>t(e))):lt.reject(e)}static resolve(t){return new lt(((e,s)=>{e(t)}))}static reject(t){return new lt(((e,s)=>{s(t)}))}static waitFor(t){return new lt(((e,s)=>{let o=0,u=0,c=!1;t.forEach((m=>{++o,m.next((()=>{++u,c&&u===o&&e()}),(p=>s(p)))})),c=!0,u===o&&e()}))}static or(t){let e=lt.resolve(!1);for(const s of t)e=e.next((o=>o?lt.resolve(o):s()));return e}static forEach(t,e){const s=[];return t.forEach(((o,u)=>{s.push(e.call(this,o,u))})),this.waitFor(s)}static mapArray(t,e){return new lt(((s,o)=>{const u=t.length,c=new Array(u);let m=0;for(let p=0;p<u;p++){const g=p;e(t[g]).next((v=>{c[g]=v,++m,m===u&&s(c)}),(v=>o(v)))}}))}static doWhile(t,e){return new lt(((s,o)=>{const u=()=>{t()===!0?e().next((()=>{u()}),o):s()};u()}))}}function rR(i){const t=i.match(/Android ([\d.]+)/i),e=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(e)}function el(i){return i.name==="IndexedDbTransactionError"}class vf{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>e.writeSequenceNumber(s))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}vf.ce=-1;const mg=-1;function bf(i){return i==null}function Xh(i){return i===0&&1/i==-1/0}function sR(i){return typeof i=="number"&&Number.isInteger(i)&&!Xh(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}const qT="";function aR(i){let t="";for(let e=0;e<i.length;e++)t.length>0&&(t=db(t)),t=oR(i.get(e),t);return db(t)}function oR(i,t){let e=t;const s=i.length;for(let o=0;o<s;o++){const u=i.charAt(o);switch(u){case"\0":e+="";break;case qT:e+="";break;default:e+=u}}return e}function db(i){return i+qT+""}function mb(i){let t=0;for(const e in i)Object.prototype.hasOwnProperty.call(i,e)&&t++;return t}function Bs(i,t){for(const e in i)Object.prototype.hasOwnProperty.call(i,e)&&t(e,i[e])}function HT(i){for(const t in i)if(Object.prototype.hasOwnProperty.call(i,t))return!1;return!0}class Te{constructor(t,e){this.comparator=t,this.root=e||rn.EMPTY}insert(t,e){return new Te(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,rn.BLACK,null,null))}remove(t){return new Te(this.comparator,this.root.remove(t,this.comparator).copy(null,null,rn.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const s=this.comparator(t,e.key);if(s===0)return e.value;s<0?e=e.left:s>0&&(e=e.right)}return null}indexOf(t){let e=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(t,s.key);if(o===0)return e+s.left.size;o<0?s=s.left:(e+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((e,s)=>(t(e,s),!1)))}toString(){const t=[];return this.inorderTraversal(((e,s)=>(t.push(`${e}:${s}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new gh(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new gh(this.root,t,this.comparator,!1)}getReverseIterator(){return new gh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new gh(this.root,t,this.comparator,!0)}}class gh{constructor(t,e,s,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!t.isEmpty();)if(u=e?s(t.key,e):1,e&&o&&(u*=-1),u<0)t=this.isReverse?t.left:t.right;else{if(u===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class rn{constructor(t,e,s,o,u){this.key=t,this.value=e,this.color=s??rn.RED,this.left=o??rn.EMPTY,this.right=u??rn.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,s,o,u){return new rn(t??this.key,e??this.value,s??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,s){let o=this;const u=s(t,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(t,e,s),null):u===0?o.copy(null,e,null,null,null):o.copy(null,null,null,null,o.right.insert(t,e,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return rn.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let s,o=this;if(e(t,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(t,e),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),e(t,o.key)===0){if(o.right.isEmpty())return rn.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(t,e))}return o.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,rn.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,rn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ot(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ot(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw Ot(27949);return t+(this.isRed()?0:1)}}rn.EMPTY=null,rn.RED=!0,rn.BLACK=!1;rn.EMPTY=new class{constructor(){this.size=0}get key(){throw Ot(57766)}get value(){throw Ot(16141)}get color(){throw Ot(16727)}get left(){throw Ot(29726)}get right(){throw Ot(36894)}copy(t,e,s,o,u){return this}insert(t,e,s){return new rn(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Ye{constructor(t){this.comparator=t,this.data=new Te(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((e,s)=>(t(e),!1)))}forEachInRange(t,e){const s=this.data.getIteratorFrom(t[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,t[1])>=0)return;e(o.key)}}forEachWhile(t,e){let s;for(s=e!==void 0?this.data.getIteratorFrom(e):this.data.getIterator();s.hasNext();)if(!t(s.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new pb(this.data.getIterator())}getIteratorFrom(t){return new pb(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach((s=>{e=e.add(s)})),e}isEqual(t){if(!(t instanceof Ye)||this.size!==t.size)return!1;const e=this.data.getIterator(),s=t.data.getIterator();for(;e.hasNext();){const o=e.getNext().key,u=s.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const t=[];return this.forEach((e=>{t.push(e)})),t}toString(){const t=[];return this.forEach((e=>t.push(e))),"SortedSet("+t.toString()+")"}copy(t){const e=new Ye(this.comparator);return e.data=t,e}}class pb{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Kn{constructor(t){this.fields=t,t.sort(sn.comparator)}static empty(){return new Kn([])}unionWith(t){let e=new Ye(sn.comparator);for(const s of this.fields)e=e.add(s);for(const s of t)e=e.add(s);return new Kn(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return qo(this.fields,t.fields,((e,s)=>e.isEqual(s)))}}class GT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class on{constructor(t){this.binaryString=t}static fromBase64String(t){const e=(function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new GT("Invalid base64 string: "+u):u}})(t);return new on(e)}static fromUint8Array(t){const e=(function(o){let u="";for(let c=0;c<o.length;++c)u+=String.fromCharCode(o[c]);return u})(t);return new on(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(e){return btoa(e)})(this.binaryString)}toUint8Array(){return(function(e){const s=new Uint8Array(e.length);for(let o=0;o<e.length;o++)s[o]=e.charCodeAt(o);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Yt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}on.EMPTY_BYTE_STRING=new on("");const lR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Vs(i){if(se(!!i,39018),typeof i=="string"){let t=0;const e=lR.exec(i);if(se(!!e,46558,{timestamp:i}),e[1]){let o=e[1];o=(o+"000000000").substr(0,9),t=Number(o)}const s=new Date(i);return{seconds:Math.floor(s.getTime()/1e3),nanos:t}}return{seconds:De(i.seconds),nanos:De(i.nanos)}}function De(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function js(i){return typeof i=="string"?on.fromBase64String(i):on.fromUint8Array(i)}const $T="server_timestamp",YT="__type__",KT="__previous_value__",QT="__local_write_time__";function pg(i){return(i?.mapValue?.fields||{})[YT]?.stringValue===$T}function Ef(i){const t=i.mapValue.fields[KT];return pg(t)?Ef(t):t}function xu(i){const t=Vs(i.mapValue.fields[QT].timestampValue);return new ge(t.seconds,t.nanos)}class uR{constructor(t,e,s,o,u,c,m,p,g,v){this.databaseId=t,this.appId=e,this.persistenceKey=s,this.host=o,this.ssl=u,this.forceLongPolling=c,this.autoDetectLongPolling=m,this.longPollingOptions=p,this.useFetchStreams=g,this.isUsingEmulator=v}}const Zh="(default)";class Au{constructor(t,e){this.projectId=t,this.database=e||Zh}static empty(){return new Au("","")}get isDefaultDatabase(){return this.database===Zh}isEqual(t){return t instanceof Au&&t.projectId===this.projectId&&t.database===this.database}}const XT="__type__",cR="__max__",yh={mapValue:{}},ZT="__vector__",Jh="value";function Ls(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?pg(i)?4:fR(i)?9007199254740991:hR(i)?10:11:Ot(28295,{value:i})}function er(i,t){if(i===t)return!0;const e=Ls(i);if(e!==Ls(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===t.booleanValue;case 4:return xu(i).isEqual(xu(t));case 3:return(function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const c=Vs(o.timestampValue),m=Vs(u.timestampValue);return c.seconds===m.seconds&&c.nanos===m.nanos})(i,t);case 5:return i.stringValue===t.stringValue;case 6:return(function(o,u){return js(o.bytesValue).isEqual(js(u.bytesValue))})(i,t);case 7:return i.referenceValue===t.referenceValue;case 8:return(function(o,u){return De(o.geoPointValue.latitude)===De(u.geoPointValue.latitude)&&De(o.geoPointValue.longitude)===De(u.geoPointValue.longitude)})(i,t);case 2:return(function(o,u){if("integerValue"in o&&"integerValue"in u)return De(o.integerValue)===De(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const c=De(o.doubleValue),m=De(u.doubleValue);return c===m?Xh(c)===Xh(m):isNaN(c)&&isNaN(m)}return!1})(i,t);case 9:return qo(i.arrayValue.values||[],t.arrayValue.values||[],er);case 10:case 11:return(function(o,u){const c=o.mapValue.fields||{},m=u.mapValue.fields||{};if(mb(c)!==mb(m))return!1;for(const p in c)if(c.hasOwnProperty(p)&&(m[p]===void 0||!er(c[p],m[p])))return!1;return!0})(i,t);default:return Ot(52216,{left:i})}}function wu(i,t){return(i.values||[]).find((e=>er(e,t)))!==void 0}function Ho(i,t){if(i===t)return 0;const e=Ls(i),s=Ls(t);if(e!==s)return Yt(e,s);switch(e){case 0:case 9007199254740991:return 0;case 1:return Yt(i.booleanValue,t.booleanValue);case 2:return(function(u,c){const m=De(u.integerValue||u.doubleValue),p=De(c.integerValue||c.doubleValue);return m<p?-1:m>p?1:m===p?0:isNaN(m)?isNaN(p)?0:-1:1})(i,t);case 3:return gb(i.timestampValue,t.timestampValue);case 4:return gb(xu(i),xu(t));case 5:return bp(i.stringValue,t.stringValue);case 6:return(function(u,c){const m=js(u),p=js(c);return m.compareTo(p)})(i.bytesValue,t.bytesValue);case 7:return(function(u,c){const m=u.split("/"),p=c.split("/");for(let g=0;g<m.length&&g<p.length;g++){const v=Yt(m[g],p[g]);if(v!==0)return v}return Yt(m.length,p.length)})(i.referenceValue,t.referenceValue);case 8:return(function(u,c){const m=Yt(De(u.latitude),De(c.latitude));return m!==0?m:Yt(De(u.longitude),De(c.longitude))})(i.geoPointValue,t.geoPointValue);case 9:return yb(i.arrayValue,t.arrayValue);case 10:return(function(u,c){const m=u.fields||{},p=c.fields||{},g=m[Jh]?.arrayValue,v=p[Jh]?.arrayValue,T=Yt(g?.values?.length||0,v?.values?.length||0);return T!==0?T:yb(g,v)})(i.mapValue,t.mapValue);case 11:return(function(u,c){if(u===yh.mapValue&&c===yh.mapValue)return 0;if(u===yh.mapValue)return 1;if(c===yh.mapValue)return-1;const m=u.fields||{},p=Object.keys(m),g=c.fields||{},v=Object.keys(g);p.sort(),v.sort();for(let T=0;T<p.length&&T<v.length;++T){const x=bp(p[T],v[T]);if(x!==0)return x;const S=Ho(m[p[T]],g[v[T]]);if(S!==0)return S}return Yt(p.length,v.length)})(i.mapValue,t.mapValue);default:throw Ot(23264,{he:e})}}function gb(i,t){if(typeof i=="string"&&typeof t=="string"&&i.length===t.length)return Yt(i,t);const e=Vs(i),s=Vs(t),o=Yt(e.seconds,s.seconds);return o!==0?o:Yt(e.nanos,s.nanos)}function yb(i,t){const e=i.values||[],s=t.values||[];for(let o=0;o<e.length&&o<s.length;++o){const u=Ho(e[o],s[o]);if(u)return u}return Yt(e.length,s.length)}function Go(i){return Ep(i)}function Ep(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?(function(e){const s=Vs(e);return`time(${s.seconds},${s.nanos})`})(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?(function(e){return js(e).toBase64()})(i.bytesValue):"referenceValue"in i?(function(e){return Nt.fromName(e).toString()})(i.referenceValue):"geoPointValue"in i?(function(e){return`geo(${e.latitude},${e.longitude})`})(i.geoPointValue):"arrayValue"in i?(function(e){let s="[",o=!0;for(const u of e.values||[])o?o=!1:s+=",",s+=Ep(u);return s+"]"})(i.arrayValue):"mapValue"in i?(function(e){const s=Object.keys(e.fields||{}).sort();let o="{",u=!0;for(const c of s)u?u=!1:o+=",",o+=`${c}:${Ep(e.fields[c])}`;return o+"}"})(i.mapValue):Ot(61005,{value:i})}function Oh(i){switch(Ls(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Ef(i);return t?16+Oh(t):16;case 5:return 2*i.stringValue.length;case 6:return js(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((o,u)=>o+Oh(u)),0)})(i.arrayValue);case 10:case 11:return(function(s){let o=0;return Bs(s.fields,((u,c)=>{o+=u.length+Oh(c)})),o})(i.mapValue);default:throw Ot(13486,{value:i})}}function Tp(i){return!!i&&"integerValue"in i}function gg(i){return!!i&&"arrayValue"in i}function _b(i){return!!i&&"nullValue"in i}function vb(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function Mh(i){return!!i&&"mapValue"in i}function hR(i){return(i?.mapValue?.fields||{})[XT]?.stringValue===ZT}function mu(i){if(i.geoPointValue)return{geoPointValue:{...i.geoPointValue}};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:{...i.timestampValue}};if(i.mapValue){const t={mapValue:{fields:{}}};return Bs(i.mapValue.fields,((e,s)=>t.mapValue.fields[e]=mu(s))),t}if(i.arrayValue){const t={arrayValue:{values:[]}};for(let e=0;e<(i.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=mu(i.arrayValue.values[e]);return t}return{...i}}function fR(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue===cR}class kn{constructor(t){this.value=t}static empty(){return new kn({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let s=0;s<t.length-1;++s)if(e=(e.mapValue.fields||{})[t.get(s)],!Mh(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=mu(e)}setAll(t){let e=sn.emptyPath(),s={},o=[];t.forEach(((c,m)=>{if(!e.isImmediateParentOf(m)){const p=this.getFieldsMap(e);this.applyChanges(p,s,o),s={},o=[],e=m.popLast()}c?s[m.lastSegment()]=mu(c):o.push(m.lastSegment())}));const u=this.getFieldsMap(e);this.applyChanges(u,s,o)}delete(t){const e=this.field(t.popLast());Mh(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return er(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let s=0;s<t.length;++s){let o=e.mapValue.fields[t.get(s)];Mh(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},e.mapValue.fields[t.get(s)]=o),e=o}return e.mapValue.fields}applyChanges(t,e,s){Bs(e,((o,u)=>t[o]=u));for(const o of s)delete t[o]}clone(){return new kn(mu(this.value))}}function JT(i){const t=[];return Bs(i.fields,((e,s)=>{const o=new sn([e]);if(Mh(s)){const u=JT(s.mapValue).fields;if(u.length===0)t.push(o);else for(const c of u)t.push(o.child(c))}else t.push(o)})),new Kn(t)}class fn{constructor(t,e,s,o,u,c,m){this.key=t,this.documentType=e,this.version=s,this.readTime=o,this.createTime=u,this.data=c,this.documentState=m}static newInvalidDocument(t){return new fn(t,0,kt.min(),kt.min(),kt.min(),kn.empty(),0)}static newFoundDocument(t,e,s,o){return new fn(t,1,e,kt.min(),s,o,0)}static newNoDocument(t,e){return new fn(t,2,e,kt.min(),kt.min(),kn.empty(),0)}static newUnknownDocument(t,e){return new fn(t,3,e,kt.min(),kt.min(),kn.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(kt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=kn.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=kn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=kt.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof fn&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new fn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Wh{constructor(t,e){this.position=t,this.inclusive=e}}function bb(i,t,e){let s=0;for(let o=0;o<i.position.length;o++){const u=t[o],c=i.position[o];if(u.field.isKeyField()?s=Nt.comparator(Nt.fromName(c.referenceValue),e.key):s=Ho(c,e.data.field(u.field)),u.dir==="desc"&&(s*=-1),s!==0)break}return s}function Eb(i,t){if(i===null)return t===null;if(t===null||i.inclusive!==t.inclusive||i.position.length!==t.position.length)return!1;for(let e=0;e<i.position.length;e++)if(!er(i.position[e],t.position[e]))return!1;return!0}class tf{constructor(t,e="asc"){this.field=t,this.dir=e}}function dR(i,t){return i.dir===t.dir&&i.field.isEqual(t.field)}class WT{}class $e extends WT{constructor(t,e,s){super(),this.field=t,this.op=e,this.value=s}static create(t,e,s){return t.isKeyField()?e==="in"||e==="not-in"?this.createKeyFieldInFilter(t,e,s):new pR(t,e,s):e==="array-contains"?new _R(t,s):e==="in"?new vR(t,s):e==="not-in"?new bR(t,s):e==="array-contains-any"?new ER(t,s):new $e(t,e,s)}static createKeyFieldInFilter(t,e,s){return e==="in"?new gR(t,s):new yR(t,s)}matches(t){const e=t.data.field(this.field);return this.op==="!="?e!==null&&e.nullValue===void 0&&this.matchesComparison(Ho(e,this.value)):e!==null&&Ls(this.value)===Ls(e)&&this.matchesComparison(Ho(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return Ot(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class nr extends WT{constructor(t,e){super(),this.filters=t,this.op=e,this.Pe=null}static create(t,e){return new nr(t,e)}matches(t){return tx(this)?this.filters.find((e=>!e.matches(t)))===void 0:this.filters.find((e=>e.matches(t)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((t,e)=>t.concat(e.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function tx(i){return i.op==="and"}function ex(i){return mR(i)&&tx(i)}function mR(i){for(const t of i.filters)if(t instanceof nr)return!1;return!0}function xp(i){if(i instanceof $e)return i.field.canonicalString()+i.op.toString()+Go(i.value);if(ex(i))return i.filters.map((t=>xp(t))).join(",");{const t=i.filters.map((e=>xp(e))).join(",");return`${i.op}(${t})`}}function nx(i,t){return i instanceof $e?(function(s,o){return o instanceof $e&&s.op===o.op&&s.field.isEqual(o.field)&&er(s.value,o.value)})(i,t):i instanceof nr?(function(s,o){return o instanceof nr&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce(((u,c,m)=>u&&nx(c,o.filters[m])),!0):!1})(i,t):void Ot(19439)}function ix(i){return i instanceof $e?(function(e){return`${e.field.canonicalString()} ${e.op} ${Go(e.value)}`})(i):i instanceof nr?(function(e){return e.op.toString()+" {"+e.getFilters().map(ix).join(" ,")+"}"})(i):"Filter"}class pR extends $e{constructor(t,e,s){super(t,e,s),this.key=Nt.fromName(s.referenceValue)}matches(t){const e=Nt.comparator(t.key,this.key);return this.matchesComparison(e)}}class gR extends $e{constructor(t,e){super(t,"in",e),this.keys=rx("in",e)}matches(t){return this.keys.some((e=>e.isEqual(t.key)))}}class yR extends $e{constructor(t,e){super(t,"not-in",e),this.keys=rx("not-in",e)}matches(t){return!this.keys.some((e=>e.isEqual(t.key)))}}function rx(i,t){return(t.arrayValue?.values||[]).map((e=>Nt.fromName(e.referenceValue)))}class _R extends $e{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return gg(e)&&wu(e.arrayValue,this.value)}}class vR extends $e{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return e!==null&&wu(this.value.arrayValue,e)}}class bR extends $e{constructor(t,e){super(t,"not-in",e)}matches(t){if(wu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return e!==null&&e.nullValue===void 0&&!wu(this.value.arrayValue,e)}}class ER extends $e{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!gg(e)||!e.arrayValue.values)&&e.arrayValue.values.some((s=>wu(this.value.arrayValue,s)))}}class TR{constructor(t,e=null,s=[],o=[],u=null,c=null,m=null){this.path=t,this.collectionGroup=e,this.orderBy=s,this.filters=o,this.limit=u,this.startAt=c,this.endAt=m,this.Te=null}}function Tb(i,t=null,e=[],s=[],o=null,u=null,c=null){return new TR(i,t,e,s,o,u,c)}function yg(i){const t=Lt(i);if(t.Te===null){let e=t.path.canonicalString();t.collectionGroup!==null&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((s=>xp(s))).join(","),e+="|ob:",e+=t.orderBy.map((s=>(function(u){return u.field.canonicalString()+u.dir})(s))).join(","),bf(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((s=>Go(s))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((s=>Go(s))).join(",")),t.Te=e}return t.Te}function _g(i,t){if(i.limit!==t.limit||i.orderBy.length!==t.orderBy.length)return!1;for(let e=0;e<i.orderBy.length;e++)if(!dR(i.orderBy[e],t.orderBy[e]))return!1;if(i.filters.length!==t.filters.length)return!1;for(let e=0;e<i.filters.length;e++)if(!nx(i.filters[e],t.filters[e]))return!1;return i.collectionGroup===t.collectionGroup&&!!i.path.isEqual(t.path)&&!!Eb(i.startAt,t.startAt)&&Eb(i.endAt,t.endAt)}function Ap(i){return Nt.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}class Tf{constructor(t,e=null,s=[],o=[],u=null,c="F",m=null,p=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=s,this.filters=o,this.limit=u,this.limitType=c,this.startAt=m,this.endAt=p,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function xR(i,t,e,s,o,u,c,m){return new Tf(i,t,e,s,o,u,c,m)}function xf(i){return new Tf(i)}function xb(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function AR(i){return i.collectionGroup!==null}function pu(i){const t=Lt(i);if(t.Ie===null){t.Ie=[];const e=new Set;for(const u of t.explicitOrderBy)t.Ie.push(u),e.add(u.field.canonicalString());const s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(c){let m=new Ye(sn.comparator);return c.filters.forEach((p=>{p.getFlattenedFilters().forEach((g=>{g.isInequality()&&(m=m.add(g.field))}))})),m})(t).forEach((u=>{e.has(u.canonicalString())||u.isKeyField()||t.Ie.push(new tf(u,s))})),e.has(sn.keyField().canonicalString())||t.Ie.push(new tf(sn.keyField(),s))}return t.Ie}function Xi(i){const t=Lt(i);return t.Ee||(t.Ee=wR(t,pu(i))),t.Ee}function wR(i,t){if(i.limitType==="F")return Tb(i.path,i.collectionGroup,t,i.filters,i.limit,i.startAt,i.endAt);{t=t.map((o=>{const u=o.dir==="desc"?"asc":"desc";return new tf(o.field,u)}));const e=i.endAt?new Wh(i.endAt.position,i.endAt.inclusive):null,s=i.startAt?new Wh(i.startAt.position,i.startAt.inclusive):null;return Tb(i.path,i.collectionGroup,t,i.filters,i.limit,e,s)}}function wp(i,t,e){return new Tf(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),t,e,i.startAt,i.endAt)}function Af(i,t){return _g(Xi(i),Xi(t))&&i.limitType===t.limitType}function sx(i){return`${yg(Xi(i))}|lt:${i.limitType}`}function Ro(i){return`Query(target=${(function(e){let s=e.path.canonicalString();return e.collectionGroup!==null&&(s+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(s+=`, filters: [${e.filters.map((o=>ix(o))).join(", ")}]`),bf(e.limit)||(s+=", limit: "+e.limit),e.orderBy.length>0&&(s+=`, orderBy: [${e.orderBy.map((o=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(o))).join(", ")}]`),e.startAt&&(s+=", startAt: ",s+=e.startAt.inclusive?"b:":"a:",s+=e.startAt.position.map((o=>Go(o))).join(",")),e.endAt&&(s+=", endAt: ",s+=e.endAt.inclusive?"a:":"b:",s+=e.endAt.position.map((o=>Go(o))).join(",")),`Target(${s})`})(Xi(i))}; limitType=${i.limitType})`}function wf(i,t){return t.isFoundDocument()&&(function(s,o){const u=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(u):Nt.isDocumentKey(s.path)?s.path.isEqual(u):s.path.isImmediateParentOf(u)})(i,t)&&(function(s,o){for(const u of pu(s))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0})(i,t)&&(function(s,o){for(const u of s.filters)if(!u.matches(o))return!1;return!0})(i,t)&&(function(s,o){return!(s.startAt&&!(function(c,m,p){const g=bb(c,m,p);return c.inclusive?g<=0:g<0})(s.startAt,pu(s),o)||s.endAt&&!(function(c,m,p){const g=bb(c,m,p);return c.inclusive?g>=0:g>0})(s.endAt,pu(s),o))})(i,t)}function SR(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function ax(i){return(t,e)=>{let s=!1;for(const o of pu(i)){const u=NR(o,t,e);if(u!==0)return u;s=s||o.field.isKeyField()}return 0}}function NR(i,t,e){const s=i.field.isKeyField()?Nt.comparator(t.key,e.key):(function(u,c,m){const p=c.data.field(u),g=m.data.field(u);return p!==null&&g!==null?Ho(p,g):Ot(42886)})(i.field,t,e);switch(i.dir){case"asc":return s;case"desc":return-1*s;default:return Ot(19790,{direction:i.dir})}}class ka{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),s=this.inner[e];if(s!==void 0){for(const[o,u]of s)if(this.equalsFn(o,t))return u}}has(t){return this.get(t)!==void 0}set(t,e){const s=this.mapKeyFn(t),o=this.inner[s];if(o===void 0)return this.inner[s]=[[t,e]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],t))return void(o[u]=[t,e]);o.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),s=this.inner[e];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],t))return s.length===1?delete this.inner[e]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(t){Bs(this.inner,((e,s)=>{for(const[o,u]of s)t(o,u)}))}isEmpty(){return HT(this.inner)}size(){return this.innerSize}}const CR=new Te(Nt.comparator);function kr(){return CR}const ox=new Te(Nt.comparator);function au(...i){let t=ox;for(const e of i)t=t.insert(e.key,e);return t}function lx(i){let t=ox;return i.forEach(((e,s)=>t=t.insert(e,s.overlayedDocument))),t}function Ta(){return gu()}function ux(){return gu()}function gu(){return new ka((i=>i.toString()),((i,t)=>i.isEqual(t)))}const RR=new Te(Nt.comparator),IR=new Ye(Nt.comparator);function Kt(...i){let t=IR;for(const e of i)t=t.add(e);return t}const DR=new Ye(Yt);function OR(){return DR}function vg(i,t){if(i.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Xh(t)?"-0":t}}function cx(i){return{integerValue:""+i}}function MR(i,t){return sR(t)?cx(t):vg(i,t)}class Sf{constructor(){this._=void 0}}function kR(i,t,e){return i instanceof Su?(function(o,u){const c={fields:{[YT]:{stringValue:$T},[QT]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&pg(u)&&(u=Ef(u)),u&&(c.fields[KT]=u),{mapValue:c}})(e,t):i instanceof Nu?fx(i,t):i instanceof Cu?dx(i,t):(function(o,u){const c=hx(o,u),m=Ab(c)+Ab(o.Ae);return Tp(c)&&Tp(o.Ae)?cx(m):vg(o.serializer,m)})(i,t)}function VR(i,t,e){return i instanceof Nu?fx(i,t):i instanceof Cu?dx(i,t):e}function hx(i,t){return i instanceof ef?(function(s){return Tp(s)||(function(u){return!!u&&"doubleValue"in u})(s)})(t)?t:{integerValue:0}:null}class Su extends Sf{}class Nu extends Sf{constructor(t){super(),this.elements=t}}function fx(i,t){const e=mx(t);for(const s of i.elements)e.some((o=>er(o,s)))||e.push(s);return{arrayValue:{values:e}}}class Cu extends Sf{constructor(t){super(),this.elements=t}}function dx(i,t){let e=mx(t);for(const s of i.elements)e=e.filter((o=>!er(o,s)));return{arrayValue:{values:e}}}class ef extends Sf{constructor(t,e){super(),this.serializer=t,this.Ae=e}}function Ab(i){return De(i.integerValue||i.doubleValue)}function mx(i){return gg(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}class jR{constructor(t,e){this.field=t,this.transform=e}}function LR(i,t){return i.field.isEqual(t.field)&&(function(s,o){return s instanceof Nu&&o instanceof Nu||s instanceof Cu&&o instanceof Cu?qo(s.elements,o.elements,er):s instanceof ef&&o instanceof ef?er(s.Ae,o.Ae):s instanceof Su&&o instanceof Su})(i.transform,t.transform)}class PR{constructor(t,e){this.version=t,this.transformResults=e}}class Ii{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new Ii}static exists(t){return new Ii(void 0,t)}static updateTime(t){return new Ii(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function kh(i,t){return i.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(i.updateTime):i.exists===void 0||i.exists===t.isFoundDocument()}class Nf{}function px(i,t){if(!i.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return i.isNoDocument()?new bg(i.key,Ii.none()):new qu(i.key,i.data,Ii.none());{const e=i.data,s=kn.empty();let o=new Ye(sn.comparator);for(let u of t.fields)if(!o.has(u)){let c=e.field(u);c===null&&u.length>1&&(u=u.popLast(),c=e.field(u)),c===null?s.delete(u):s.set(u,c),o=o.add(u)}return new Fs(i.key,s,new Kn(o.toArray()),Ii.none())}}function UR(i,t,e){i instanceof qu?(function(o,u,c){const m=o.value.clone(),p=Sb(o.fieldTransforms,u,c.transformResults);m.setAll(p),u.convertToFoundDocument(c.version,m).setHasCommittedMutations()})(i,t,e):i instanceof Fs?(function(o,u,c){if(!kh(o.precondition,u))return void u.convertToUnknownDocument(c.version);const m=Sb(o.fieldTransforms,u,c.transformResults),p=u.data;p.setAll(gx(o)),p.setAll(m),u.convertToFoundDocument(c.version,p).setHasCommittedMutations()})(i,t,e):(function(o,u,c){u.convertToNoDocument(c.version).setHasCommittedMutations()})(0,t,e)}function yu(i,t,e,s){return i instanceof qu?(function(u,c,m,p){if(!kh(u.precondition,c))return m;const g=u.value.clone(),v=Nb(u.fieldTransforms,p,c);return g.setAll(v),c.convertToFoundDocument(c.version,g).setHasLocalMutations(),null})(i,t,e,s):i instanceof Fs?(function(u,c,m,p){if(!kh(u.precondition,c))return m;const g=Nb(u.fieldTransforms,p,c),v=c.data;return v.setAll(gx(u)),v.setAll(g),c.convertToFoundDocument(c.version,v).setHasLocalMutations(),m===null?null:m.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((T=>T.field)))})(i,t,e,s):(function(u,c,m){return kh(u.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):m})(i,t,e)}function zR(i,t){let e=null;for(const s of i.fieldTransforms){const o=t.data.field(s.field),u=hx(s.transform,o||null);u!=null&&(e===null&&(e=kn.empty()),e.set(s.field,u))}return e||null}function wb(i,t){return i.type===t.type&&!!i.key.isEqual(t.key)&&!!i.precondition.isEqual(t.precondition)&&!!(function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&qo(s,o,((u,c)=>LR(u,c)))})(i.fieldTransforms,t.fieldTransforms)&&(i.type===0?i.value.isEqual(t.value):i.type!==1||i.data.isEqual(t.data)&&i.fieldMask.isEqual(t.fieldMask))}class qu extends Nf{constructor(t,e,s,o=[]){super(),this.key=t,this.value=e,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Fs extends Nf{constructor(t,e,s,o,u=[]){super(),this.key=t,this.data=e,this.fieldMask=s,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function gx(i){const t=new Map;return i.fieldMask.fields.forEach((e=>{if(!e.isEmpty()){const s=i.data.field(e);t.set(e,s)}})),t}function Sb(i,t,e){const s=new Map;se(i.length===e.length,32656,{Re:e.length,Ve:i.length});for(let o=0;o<e.length;o++){const u=i[o],c=u.transform,m=t.data.field(u.field);s.set(u.field,VR(c,m,e[o]))}return s}function Nb(i,t,e){const s=new Map;for(const o of i){const u=o.transform,c=e.data.field(o.field);s.set(o.field,kR(u,c,t))}return s}class bg extends Nf{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class BR extends Nf{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class FR{constructor(t,e,s,o){this.batchId=t,this.localWriteTime=e,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(t,e){const s=e.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(t.key)&&UR(u,t,s[o])}}applyToLocalView(t,e){for(const s of this.baseMutations)s.key.isEqual(t.key)&&(e=yu(s,t,e,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(t.key)&&(e=yu(s,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const s=ux();return this.mutations.forEach((o=>{const u=t.get(o.key),c=u.overlayedDocument;let m=this.applyToLocalView(c,u.mutatedFields);m=e.has(o.key)?null:m;const p=px(c,m);p!==null&&s.set(o.key,p),c.isValidDocument()||c.convertToNoDocument(kt.min())})),s}keys(){return this.mutations.reduce(((t,e)=>t.add(e.key)),Kt())}isEqual(t){return this.batchId===t.batchId&&qo(this.mutations,t.mutations,((e,s)=>wb(e,s)))&&qo(this.baseMutations,t.baseMutations,((e,s)=>wb(e,s)))}}class Eg{constructor(t,e,s,o){this.batch=t,this.commitVersion=e,this.mutationResults=s,this.docVersions=o}static from(t,e,s){se(t.mutations.length===s.length,58842,{me:t.mutations.length,fe:s.length});let o=(function(){return RR})();const u=t.mutations;for(let c=0;c<u.length;c++)o=o.insert(u[c].key,s[c].version);return new Eg(t,e,s,o)}}class qR{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class HR{constructor(t,e){this.count=t,this.unchangedNames=e}}var ze,Zt;function GR(i){switch(i){case ft.OK:return Ot(64938);case ft.CANCELLED:case ft.UNKNOWN:case ft.DEADLINE_EXCEEDED:case ft.RESOURCE_EXHAUSTED:case ft.INTERNAL:case ft.UNAVAILABLE:case ft.UNAUTHENTICATED:return!1;case ft.INVALID_ARGUMENT:case ft.NOT_FOUND:case ft.ALREADY_EXISTS:case ft.PERMISSION_DENIED:case ft.FAILED_PRECONDITION:case ft.ABORTED:case ft.OUT_OF_RANGE:case ft.UNIMPLEMENTED:case ft.DATA_LOSS:return!0;default:return Ot(15467,{code:i})}}function yx(i){if(i===void 0)return Mr("GRPC error has no .code"),ft.UNKNOWN;switch(i){case ze.OK:return ft.OK;case ze.CANCELLED:return ft.CANCELLED;case ze.UNKNOWN:return ft.UNKNOWN;case ze.DEADLINE_EXCEEDED:return ft.DEADLINE_EXCEEDED;case ze.RESOURCE_EXHAUSTED:return ft.RESOURCE_EXHAUSTED;case ze.INTERNAL:return ft.INTERNAL;case ze.UNAVAILABLE:return ft.UNAVAILABLE;case ze.UNAUTHENTICATED:return ft.UNAUTHENTICATED;case ze.INVALID_ARGUMENT:return ft.INVALID_ARGUMENT;case ze.NOT_FOUND:return ft.NOT_FOUND;case ze.ALREADY_EXISTS:return ft.ALREADY_EXISTS;case ze.PERMISSION_DENIED:return ft.PERMISSION_DENIED;case ze.FAILED_PRECONDITION:return ft.FAILED_PRECONDITION;case ze.ABORTED:return ft.ABORTED;case ze.OUT_OF_RANGE:return ft.OUT_OF_RANGE;case ze.UNIMPLEMENTED:return ft.UNIMPLEMENTED;case ze.DATA_LOSS:return ft.DATA_LOSS;default:return Ot(39323,{code:i})}}(Zt=ze||(ze={}))[Zt.OK=0]="OK",Zt[Zt.CANCELLED=1]="CANCELLED",Zt[Zt.UNKNOWN=2]="UNKNOWN",Zt[Zt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Zt[Zt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Zt[Zt.NOT_FOUND=5]="NOT_FOUND",Zt[Zt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Zt[Zt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Zt[Zt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Zt[Zt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Zt[Zt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Zt[Zt.ABORTED=10]="ABORTED",Zt[Zt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Zt[Zt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Zt[Zt.INTERNAL=13]="INTERNAL",Zt[Zt.UNAVAILABLE=14]="UNAVAILABLE",Zt[Zt.DATA_LOSS=15]="DATA_LOSS";function $R(){return new TextEncoder}const YR=new Os([4294967295,4294967295],0);function Cb(i){const t=$R().encode(i),e=new kT;return e.update(t),new Uint8Array(e.digest())}function Rb(i){const t=new DataView(i.buffer),e=t.getUint32(0,!0),s=t.getUint32(4,!0),o=t.getUint32(8,!0),u=t.getUint32(12,!0);return[new Os([e,s],0),new Os([o,u],0)]}class Tg{constructor(t,e,s){if(this.bitmap=t,this.padding=e,this.hashCount=s,e<0||e>=8)throw new ou(`Invalid padding: ${e}`);if(s<0)throw new ou(`Invalid hash count: ${s}`);if(t.length>0&&this.hashCount===0)throw new ou(`Invalid hash count: ${s}`);if(t.length===0&&e!==0)throw new ou(`Invalid padding when bitmap length is 0: ${e}`);this.ge=8*t.length-e,this.pe=Os.fromNumber(this.ge)}ye(t,e,s){let o=t.add(e.multiply(Os.fromNumber(s)));return o.compare(YR)===1&&(o=new Os([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const e=Cb(t),[s,o]=Rb(e);for(let u=0;u<this.hashCount;u++){const c=this.ye(s,o,u);if(!this.we(c))return!1}return!0}static create(t,e,s){const o=t%8==0?0:8-t%8,u=new Uint8Array(Math.ceil(t/8)),c=new Tg(u,o,e);return s.forEach((m=>c.insert(m))),c}insert(t){if(this.ge===0)return;const e=Cb(t),[s,o]=Rb(e);for(let u=0;u<this.hashCount;u++){const c=this.ye(s,o,u);this.Se(c)}}Se(t){const e=Math.floor(t/8),s=t%8;this.bitmap[e]|=1<<s}}class ou extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Cf{constructor(t,e,s,o,u){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(t,e,s){const o=new Map;return o.set(t,Hu.createSynthesizedTargetChangeForCurrentChange(t,e,s)),new Cf(kt.min(),o,new Te(Yt),kr(),Kt())}}class Hu{constructor(t,e,s,o,u){this.resumeToken=t,this.current=e,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(t,e,s){return new Hu(s,e,Kt(),Kt(),Kt())}}class Vh{constructor(t,e,s,o){this.be=t,this.removedTargetIds=e,this.key=s,this.De=o}}class _x{constructor(t,e){this.targetId=t,this.Ce=e}}class vx{constructor(t,e,s=on.EMPTY_BYTE_STRING,o=null){this.state=t,this.targetIds=e,this.resumeToken=s,this.cause=o}}class Ib{constructor(){this.ve=0,this.Fe=Db(),this.Me=on.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=Kt(),e=Kt(),s=Kt();return this.Fe.forEach(((o,u)=>{switch(u){case 0:t=t.add(o);break;case 2:e=e.add(o);break;case 1:s=s.add(o);break;default:Ot(38017,{changeType:u})}})),new Hu(this.Me,this.xe,t,e,s)}qe(){this.Oe=!1,this.Fe=Db()}Qe(t,e){this.Oe=!0,this.Fe=this.Fe.insert(t,e)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,se(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class KR{constructor(t){this.Ge=t,this.ze=new Map,this.je=kr(),this.Je=_h(),this.He=_h(),this.Ye=new Te(Yt)}Ze(t){for(const e of t.be)t.De&&t.De.isFoundDocument()?this.Xe(e,t.De):this.et(e,t.key,t.De);for(const e of t.removedTargetIds)this.et(e,t.key,t.De)}tt(t){this.forEachTarget(t,(e=>{const s=this.nt(e);switch(t.state){case 0:this.rt(e)&&s.Le(t.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(t.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(e);break;case 3:this.rt(e)&&(s.We(),s.Le(t.resumeToken));break;case 4:this.rt(e)&&(this.it(e),s.Le(t.resumeToken));break;default:Ot(56790,{state:t.state})}}))}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.ze.forEach(((s,o)=>{this.rt(o)&&e(o)}))}st(t){const e=t.targetId,s=t.Ce.count,o=this.ot(e);if(o){const u=o.target;if(Ap(u))if(s===0){const c=new Nt(u.path);this.et(e,c,fn.newNoDocument(c,kt.min()))}else se(s===1,20013,{expectedCount:s});else{const c=this._t(e);if(c!==s){const m=this.ut(t),p=m?this.ct(m,t,c):1;if(p!==0){this.it(e);const g=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(e,g)}}}}}ut(t){const e=t.Ce.unchangedNames;if(!e||!e.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:u=0}=e;let c,m;try{c=js(s).toUint8Array()}catch(p){if(p instanceof GT)return Fo("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{m=new Tg(c,o,u)}catch(p){return Fo(p instanceof ou?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return m.ge===0?null:m}ct(t,e,s){return e.Ce.count===s-this.Pt(t,e.targetId)?0:2}Pt(t,e){const s=this.Ge.getRemoteKeysForTarget(e);let o=0;return s.forEach((u=>{const c=this.Ge.ht(),m=`projects/${c.projectId}/databases/${c.database}/documents/${u.path.canonicalString()}`;t.mightContain(m)||(this.et(e,u,null),o++)})),o}Tt(t){const e=new Map;this.ze.forEach(((u,c)=>{const m=this.ot(c);if(m){if(u.current&&Ap(m.target)){const p=new Nt(m.target.path);this.It(p).has(c)||this.Et(c,p)||this.et(c,p,fn.newNoDocument(p,t))}u.Be&&(e.set(c,u.ke()),u.qe())}}));let s=Kt();this.He.forEach(((u,c)=>{let m=!0;c.forEachWhile((p=>{const g=this.ot(p);return!g||g.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)})),m&&(s=s.add(u))})),this.je.forEach(((u,c)=>c.setReadTime(t)));const o=new Cf(t,e,this.Ye,this.je,s);return this.je=kr(),this.Je=_h(),this.He=_h(),this.Ye=new Te(Yt),o}Xe(t,e){if(!this.rt(t))return;const s=this.Et(t,e.key)?2:0;this.nt(t).Qe(e.key,s),this.je=this.je.insert(e.key,e),this.Je=this.Je.insert(e.key,this.It(e.key).add(t)),this.He=this.He.insert(e.key,this.dt(e.key).add(t))}et(t,e,s){if(!this.rt(t))return;const o=this.nt(t);this.Et(t,e)?o.Qe(e,1):o.$e(e),this.He=this.He.insert(e,this.dt(e).delete(t)),this.He=this.He.insert(e,this.dt(e).add(t)),s&&(this.je=this.je.insert(e,s))}removeTarget(t){this.ze.delete(t)}_t(t){const e=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let e=this.ze.get(t);return e||(e=new Ib,this.ze.set(t,e)),e}dt(t){let e=this.He.get(t);return e||(e=new Ye(Yt),this.He=this.He.insert(t,e)),e}It(t){let e=this.Je.get(t);return e||(e=new Ye(Yt),this.Je=this.Je.insert(t,e)),e}rt(t){const e=this.ot(t)!==null;return e||_t("WatchChangeAggregator","Detected inactive target",t),e}ot(t){const e=this.ze.get(t);return e&&e.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new Ib),this.Ge.getRemoteKeysForTarget(t).forEach((e=>{this.et(t,e,null)}))}Et(t,e){return this.Ge.getRemoteKeysForTarget(t).has(e)}}function _h(){return new Te(Nt.comparator)}function Db(){return new Te(Nt.comparator)}const QR={asc:"ASCENDING",desc:"DESCENDING"},XR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},ZR={and:"AND",or:"OR"};class JR{constructor(t,e){this.databaseId=t,this.useProto3Json=e}}function Sp(i,t){return i.useProto3Json||bf(t)?t:{value:t}}function nf(i,t){return i.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function bx(i,t){return i.useProto3Json?t.toBase64():t.toUint8Array()}function WR(i,t){return nf(i,t.toTimestamp())}function Zi(i){return se(!!i,49232),kt.fromTimestamp((function(e){const s=Vs(e);return new ge(s.seconds,s.nanos)})(i))}function xg(i,t){return Np(i,t).canonicalString()}function Np(i,t){const e=(function(o){return new Ee(["projects",o.projectId,"databases",o.database])})(i).child("documents");return t===void 0?e:e.child(t)}function Ex(i){const t=Ee.fromString(i);return se(Sx(t),10190,{key:t.toString()}),t}function Cp(i,t){return xg(i.databaseId,t.path)}function Ym(i,t){const e=Ex(t);if(e.get(1)!==i.databaseId.projectId)throw new At(ft.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+i.databaseId.projectId);if(e.get(3)!==i.databaseId.database)throw new At(ft.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+i.databaseId.database);return new Nt(xx(e))}function Tx(i,t){return xg(i.databaseId,t)}function tI(i){const t=Ex(i);return t.length===4?Ee.emptyPath():xx(t)}function Rp(i){return new Ee(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function xx(i){return se(i.length>4&&i.get(4)==="documents",29091,{key:i.toString()}),i.popFirst(5)}function Ob(i,t,e){return{name:Cp(i,t),fields:e.value.mapValue.fields}}function eI(i,t){let e;if("targetChange"in t){t.targetChange;const s=(function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:Ot(39313,{state:g})})(t.targetChange.targetChangeType||"NO_CHANGE"),o=t.targetChange.targetIds||[],u=(function(g,v){return g.useProto3Json?(se(v===void 0||typeof v=="string",58123),on.fromBase64String(v||"")):(se(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),on.fromUint8Array(v||new Uint8Array))})(i,t.targetChange.resumeToken),c=t.targetChange.cause,m=c&&(function(g){const v=g.code===void 0?ft.UNKNOWN:yx(g.code);return new At(v,g.message||"")})(c);e=new vx(s,o,u,m||null)}else if("documentChange"in t){t.documentChange;const s=t.documentChange;s.document,s.document.name,s.document.updateTime;const o=Ym(i,s.document.name),u=Zi(s.document.updateTime),c=s.document.createTime?Zi(s.document.createTime):kt.min(),m=new kn({mapValue:{fields:s.document.fields}}),p=fn.newFoundDocument(o,u,c,m),g=s.targetIds||[],v=s.removedTargetIds||[];e=new Vh(g,v,p.key,p)}else if("documentDelete"in t){t.documentDelete;const s=t.documentDelete;s.document;const o=Ym(i,s.document),u=s.readTime?Zi(s.readTime):kt.min(),c=fn.newNoDocument(o,u),m=s.removedTargetIds||[];e=new Vh([],m,c.key,c)}else if("documentRemove"in t){t.documentRemove;const s=t.documentRemove;s.document;const o=Ym(i,s.document),u=s.removedTargetIds||[];e=new Vh([],u,o,null)}else{if(!("filter"in t))return Ot(11601,{Rt:t});{t.filter;const s=t.filter;s.targetId;const{count:o=0,unchangedNames:u}=s,c=new HR(o,u),m=s.targetId;e=new _x(m,c)}}return e}function nI(i,t){let e;if(t instanceof qu)e={update:Ob(i,t.key,t.value)};else if(t instanceof bg)e={delete:Cp(i,t.key)};else if(t instanceof Fs)e={update:Ob(i,t.key,t.data),updateMask:hI(t.fieldMask)};else{if(!(t instanceof BR))return Ot(16599,{Vt:t.type});e={verify:Cp(i,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map((s=>(function(u,c){const m=c.transform;if(m instanceof Su)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof Nu)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof Cu)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof ef)return{fieldPath:c.field.canonicalString(),increment:m.Ae};throw Ot(20930,{transform:c.transform})})(0,s)))),t.precondition.isNone||(e.currentDocument=(function(o,u){return u.updateTime!==void 0?{updateTime:WR(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:Ot(27497)})(i,t.precondition)),e}function iI(i,t){return i&&i.length>0?(se(t!==void 0,14353),i.map((e=>(function(o,u){let c=o.updateTime?Zi(o.updateTime):Zi(u);return c.isEqual(kt.min())&&(c=Zi(u)),new PR(c,o.transformResults||[])})(e,t)))):[]}function rI(i,t){return{documents:[Tx(i,t.path)]}}function sI(i,t){const e={structuredQuery:{}},s=t.path;let o;t.collectionGroup!==null?(o=s,e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(o=s.popLast(),e.structuredQuery.from=[{collectionId:s.lastSegment()}]),e.parent=Tx(i,o);const u=(function(g){if(g.length!==0)return wx(nr.create(g,"and"))})(t.filters);u&&(e.structuredQuery.where=u);const c=(function(g){if(g.length!==0)return g.map((v=>(function(x){return{field:Io(x.field),direction:lI(x.dir)}})(v)))})(t.orderBy);c&&(e.structuredQuery.orderBy=c);const m=Sp(i,t.limit);return m!==null&&(e.structuredQuery.limit=m),t.startAt&&(e.structuredQuery.startAt=(function(g){return{before:g.inclusive,values:g.position}})(t.startAt)),t.endAt&&(e.structuredQuery.endAt=(function(g){return{before:!g.inclusive,values:g.position}})(t.endAt)),{ft:e,parent:o}}function aI(i){let t=tI(i.parent);const e=i.structuredQuery,s=e.from?e.from.length:0;let o=null;if(s>0){se(s===1,65062);const v=e.from[0];v.allDescendants?o=v.collectionId:t=t.child(v.collectionId)}let u=[];e.where&&(u=(function(T){const x=Ax(T);return x instanceof nr&&ex(x)?x.getFilters():[x]})(e.where));let c=[];e.orderBy&&(c=(function(T){return T.map((x=>(function(U){return new tf(Do(U.field),(function(Z){switch(Z){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(U.direction))})(x)))})(e.orderBy));let m=null;e.limit&&(m=(function(T){let x;return x=typeof T=="object"?T.value:T,bf(x)?null:x})(e.limit));let p=null;e.startAt&&(p=(function(T){const x=!!T.before,S=T.values||[];return new Wh(S,x)})(e.startAt));let g=null;return e.endAt&&(g=(function(T){const x=!T.before,S=T.values||[];return new Wh(S,x)})(e.endAt)),xR(t,o,c,u,m,"F",p,g)}function oI(i,t){const e=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ot(28987,{purpose:o})}})(t.purpose);return e==null?null:{"goog-listen-tags":e}}function Ax(i){return i.unaryFilter!==void 0?(function(e){switch(e.unaryFilter.op){case"IS_NAN":const s=Do(e.unaryFilter.field);return $e.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=Do(e.unaryFilter.field);return $e.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=Do(e.unaryFilter.field);return $e.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Do(e.unaryFilter.field);return $e.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ot(61313);default:return Ot(60726)}})(i):i.fieldFilter!==void 0?(function(e){return $e.create(Do(e.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ot(58110);default:return Ot(50506)}})(e.fieldFilter.op),e.fieldFilter.value)})(i):i.compositeFilter!==void 0?(function(e){return nr.create(e.compositeFilter.filters.map((s=>Ax(s))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Ot(1026)}})(e.compositeFilter.op))})(i):Ot(30097,{filter:i})}function lI(i){return QR[i]}function uI(i){return XR[i]}function cI(i){return ZR[i]}function Io(i){return{fieldPath:i.canonicalString()}}function Do(i){return sn.fromServerFormat(i.fieldPath)}function wx(i){return i instanceof $e?(function(e){if(e.op==="=="){if(vb(e.value))return{unaryFilter:{field:Io(e.field),op:"IS_NAN"}};if(_b(e.value))return{unaryFilter:{field:Io(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(vb(e.value))return{unaryFilter:{field:Io(e.field),op:"IS_NOT_NAN"}};if(_b(e.value))return{unaryFilter:{field:Io(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Io(e.field),op:uI(e.op),value:e.value}}})(i):i instanceof nr?(function(e){const s=e.getFilters().map((o=>wx(o)));return s.length===1?s[0]:{compositeFilter:{op:cI(e.op),filters:s}}})(i):Ot(54877,{filter:i})}function hI(i){const t=[];return i.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function Sx(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}class Cs{constructor(t,e,s,o,u=kt.min(),c=kt.min(),m=on.EMPTY_BYTE_STRING,p=null){this.target=t,this.targetId=e,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=m,this.expectedCount=p}withSequenceNumber(t){return new Cs(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,e){return new Cs(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Cs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Cs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}class fI{constructor(t){this.yt=t}}function dI(i){const t=aI({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?wp(t,t.limit,"L"):t}class mI{constructor(){this.Cn=new pI}addToCollectionParentIndex(t,e){return this.Cn.add(e),lt.resolve()}getCollectionParents(t,e){return lt.resolve(this.Cn.getEntries(e))}addFieldIndex(t,e){return lt.resolve()}deleteFieldIndex(t,e){return lt.resolve()}deleteAllFieldIndexes(t){return lt.resolve()}createTargetIndexes(t,e){return lt.resolve()}getDocumentsMatchingTarget(t,e){return lt.resolve(null)}getIndexType(t,e){return lt.resolve(0)}getFieldIndexes(t,e){return lt.resolve([])}getNextCollectionGroupToUpdate(t){return lt.resolve(null)}getMinOffset(t,e){return lt.resolve(ks.min())}getMinOffsetFromCollectionGroup(t,e){return lt.resolve(ks.min())}updateCollectionGroup(t,e,s){return lt.resolve()}updateIndexEntries(t,e){return lt.resolve()}}class pI{constructor(){this.index={}}add(t){const e=t.lastSegment(),s=t.popLast(),o=this.index[e]||new Ye(Ee.comparator),u=!o.has(s);return this.index[e]=o.add(s),u}has(t){const e=t.lastSegment(),s=t.popLast(),o=this.index[e];return o&&o.has(s)}getEntries(t){return(this.index[t]||new Ye(Ee.comparator)).toArray()}}const Mb={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Nx=41943040;class Mn{static withCacheSize(t){return new Mn(t,Mn.DEFAULT_COLLECTION_PERCENTILE,Mn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,e,s){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=s}}Mn.DEFAULT_COLLECTION_PERCENTILE=10,Mn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Mn.DEFAULT=new Mn(Nx,Mn.DEFAULT_COLLECTION_PERCENTILE,Mn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Mn.DISABLED=new Mn(-1,0,0);class $o{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new $o(0)}static cr(){return new $o(-1)}}const kb="LruGarbageCollector",gI=1048576;function Vb([i,t],[e,s]){const o=Yt(i,e);return o===0?Yt(t,s):o}class yI{constructor(t){this.Ir=t,this.buffer=new Ye(Vb),this.Er=0}dr(){return++this.Er}Ar(t){const e=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(e);else{const s=this.buffer.last();Vb(e,s)<0&&(this.buffer=this.buffer.delete(s).add(e))}}get maxValue(){return this.buffer.last()[0]}}class _I{constructor(t,e,s){this.garbageCollector=t,this.asyncQueue=e,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){_t(kb,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){el(e)?_t(kb,"Ignoring IndexedDB error during garbage collection: ",e):await tl(e)}await this.Vr(3e5)}))}}class vI{constructor(t,e){this.mr=t,this.params=e}calculateTargetCount(t,e){return this.mr.gr(t).next((s=>Math.floor(e/100*s)))}nthSequenceNumber(t,e){if(e===0)return lt.resolve(vf.ce);const s=new yI(e);return this.mr.forEachTarget(t,(o=>s.Ar(o.sequenceNumber))).next((()=>this.mr.pr(t,(o=>s.Ar(o))))).next((()=>s.maxValue))}removeTargets(t,e,s){return this.mr.removeTargets(t,e,s)}removeOrphanedDocuments(t,e){return this.mr.removeOrphanedDocuments(t,e)}collect(t,e){return this.params.cacheSizeCollectionThreshold===-1?(_t("LruGarbageCollector","Garbage collection skipped; disabled"),lt.resolve(Mb)):this.getCacheSize(t).next((s=>s<this.params.cacheSizeCollectionThreshold?(_t("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Mb):this.yr(t,e)))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,e){let s,o,u,c,m,p,g;const v=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((T=>(T>this.params.maximumSequenceNumbersToCollect?(_t("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),o=this.params.maximumSequenceNumbersToCollect):o=T,c=Date.now(),this.nthSequenceNumber(t,o)))).next((T=>(s=T,m=Date.now(),this.removeTargets(t,s,e)))).next((T=>(u=T,p=Date.now(),this.removeOrphanedDocuments(t,s)))).next((T=>(g=Date.now(),Co()<=$t.DEBUG&&_t("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-v}ms
	Determined least recently used ${o} in `+(m-c)+`ms
	Removed ${u} targets in `+(p-m)+`ms
	Removed ${T} documents in `+(g-p)+`ms
Total Duration: ${g-v}ms`),lt.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:T}))))}}function bI(i,t){return new vI(i,t)}class EI{constructor(){this.changes=new ka((t=>t.toString()),((t,e)=>t.isEqual(e))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,fn.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const s=this.changes.get(e);return s!==void 0?lt.resolve(s):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}class TI{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}class xI{constructor(t,e,s,o){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=s,this.indexManager=o}getDocument(t,e){let s=null;return this.documentOverlayCache.getOverlay(t,e).next((o=>(s=o,this.remoteDocumentCache.getEntry(t,e)))).next((o=>(s!==null&&yu(s.mutation,o,Kn.empty(),ge.now()),o)))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next((s=>this.getLocalViewOfDocuments(t,s,Kt()).next((()=>s))))}getLocalViewOfDocuments(t,e,s=Kt()){const o=Ta();return this.populateOverlays(t,o,e).next((()=>this.computeViews(t,e,o,s).next((u=>{let c=au();return u.forEach(((m,p)=>{c=c.insert(m,p.overlayedDocument)})),c}))))}getOverlayedDocuments(t,e){const s=Ta();return this.populateOverlays(t,s,e).next((()=>this.computeViews(t,e,s,Kt())))}populateOverlays(t,e,s){const o=[];return s.forEach((u=>{e.has(u)||o.push(u)})),this.documentOverlayCache.getOverlays(t,o).next((u=>{u.forEach(((c,m)=>{e.set(c,m)}))}))}computeViews(t,e,s,o){let u=kr();const c=gu(),m=(function(){return gu()})();return e.forEach(((p,g)=>{const v=s.get(g.key);o.has(g.key)&&(v===void 0||v.mutation instanceof Fs)?u=u.insert(g.key,g):v!==void 0?(c.set(g.key,v.mutation.getFieldMask()),yu(v.mutation,g,v.mutation.getFieldMask(),ge.now())):c.set(g.key,Kn.empty())})),this.recalculateAndSaveOverlays(t,u).next((p=>(p.forEach(((g,v)=>c.set(g,v))),e.forEach(((g,v)=>m.set(g,new TI(v,c.get(g)??null)))),m)))}recalculateAndSaveOverlays(t,e){const s=gu();let o=new Te(((c,m)=>c-m)),u=Kt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next((c=>{for(const m of c)m.keys().forEach((p=>{const g=e.get(p);if(g===null)return;let v=s.get(p)||Kn.empty();v=m.applyToLocalView(g,v),s.set(p,v);const T=(o.get(m.batchId)||Kt()).add(p);o=o.insert(m.batchId,T)}))})).next((()=>{const c=[],m=o.getReverseIterator();for(;m.hasNext();){const p=m.getNext(),g=p.key,v=p.value,T=ux();v.forEach((x=>{if(!u.has(x)){const S=px(e.get(x),s.get(x));S!==null&&T.set(x,S),u=u.add(x)}})),c.push(this.documentOverlayCache.saveOverlays(t,g,T))}return lt.waitFor(c)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next((s=>this.recalculateAndSaveOverlays(t,s)))}getDocumentsMatchingQuery(t,e,s,o){return(function(c){return Nt.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0})(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):AR(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,s,o):this.getDocumentsMatchingCollectionQuery(t,e,s,o)}getNextDocuments(t,e,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,s,o).next((u=>{const c=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,s.largestBatchId,o-u.size):lt.resolve(Ta());let m=Tu,p=u;return c.next((g=>lt.forEach(g,((v,T)=>(m<T.largestBatchId&&(m=T.largestBatchId),u.get(v)?lt.resolve():this.remoteDocumentCache.getEntry(t,v).next((x=>{p=p.insert(v,x)}))))).next((()=>this.populateOverlays(t,g,u))).next((()=>this.computeViews(t,p,g,Kt()))).next((v=>({batchId:m,changes:lx(v)})))))}))}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new Nt(e)).next((s=>{let o=au();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o}))}getDocumentsMatchingCollectionGroupQuery(t,e,s,o){const u=e.collectionGroup;let c=au();return this.indexManager.getCollectionParents(t,u).next((m=>lt.forEach(m,(p=>{const g=(function(T,x){return new Tf(x,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)})(e,p.child(u));return this.getDocumentsMatchingCollectionQuery(t,g,s,o).next((v=>{v.forEach(((T,x)=>{c=c.insert(T,x)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(t,e,s,o){let u;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,s.largestBatchId).next((c=>(u=c,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,s,u,o)))).next((c=>{u.forEach(((p,g)=>{const v=g.getKey();c.get(v)===null&&(c=c.insert(v,fn.newInvalidDocument(v)))}));let m=au();return c.forEach(((p,g)=>{const v=u.get(p);v!==void 0&&yu(v.mutation,g,Kn.empty(),ge.now()),wf(e,g)&&(m=m.insert(p,g))})),m}))}}class AI{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,e){return lt.resolve(this.Lr.get(e))}saveBundleMetadata(t,e){return this.Lr.set(e.id,(function(o){return{id:o.id,version:o.version,createTime:Zi(o.createTime)}})(e)),lt.resolve()}getNamedQuery(t,e){return lt.resolve(this.kr.get(e))}saveNamedQuery(t,e){return this.kr.set(e.name,(function(o){return{name:o.name,query:dI(o.bundledQuery),readTime:Zi(o.readTime)}})(e)),lt.resolve()}}class wI{constructor(){this.overlays=new Te(Nt.comparator),this.qr=new Map}getOverlay(t,e){return lt.resolve(this.overlays.get(e))}getOverlays(t,e){const s=Ta();return lt.forEach(e,(o=>this.getOverlay(t,o).next((u=>{u!==null&&s.set(o,u)})))).next((()=>s))}saveOverlays(t,e,s){return s.forEach(((o,u)=>{this.St(t,e,u)})),lt.resolve()}removeOverlaysForBatchId(t,e,s){const o=this.qr.get(s);return o!==void 0&&(o.forEach((u=>this.overlays=this.overlays.remove(u))),this.qr.delete(s)),lt.resolve()}getOverlaysForCollection(t,e,s){const o=Ta(),u=e.length+1,c=new Nt(e.child("")),m=this.overlays.getIteratorFrom(c);for(;m.hasNext();){const p=m.getNext().value,g=p.getKey();if(!e.isPrefixOf(g.path))break;g.path.length===u&&p.largestBatchId>s&&o.set(p.getKey(),p)}return lt.resolve(o)}getOverlaysForCollectionGroup(t,e,s,o){let u=new Te(((g,v)=>g-v));const c=this.overlays.getIterator();for(;c.hasNext();){const g=c.getNext().value;if(g.getKey().getCollectionGroup()===e&&g.largestBatchId>s){let v=u.get(g.largestBatchId);v===null&&(v=Ta(),u=u.insert(g.largestBatchId,v)),v.set(g.getKey(),g)}}const m=Ta(),p=u.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((g,v)=>m.set(g,v))),!(m.size()>=o)););return lt.resolve(m)}St(t,e,s){const o=this.overlays.get(s.key);if(o!==null){const c=this.qr.get(o.largestBatchId).delete(s.key);this.qr.set(o.largestBatchId,c)}this.overlays=this.overlays.insert(s.key,new qR(e,s));let u=this.qr.get(e);u===void 0&&(u=Kt(),this.qr.set(e,u)),this.qr.set(e,u.add(s.key))}}class SI{constructor(){this.sessionToken=on.EMPTY_BYTE_STRING}getSessionToken(t){return lt.resolve(this.sessionToken)}setSessionToken(t,e){return this.sessionToken=e,lt.resolve()}}class Ag{constructor(){this.Qr=new Ye(Xe.$r),this.Ur=new Ye(Xe.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,e){const s=new Xe(t,e);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(t,e){t.forEach((s=>this.addReference(s,e)))}removeReference(t,e){this.Gr(new Xe(t,e))}zr(t,e){t.forEach((s=>this.removeReference(s,e)))}jr(t){const e=new Nt(new Ee([])),s=new Xe(e,t),o=new Xe(e,t+1),u=[];return this.Ur.forEachInRange([s,o],(c=>{this.Gr(c),u.push(c.key)})),u}Jr(){this.Qr.forEach((t=>this.Gr(t)))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const e=new Nt(new Ee([])),s=new Xe(e,t),o=new Xe(e,t+1);let u=Kt();return this.Ur.forEachInRange([s,o],(c=>{u=u.add(c.key)})),u}containsKey(t){const e=new Xe(t,0),s=this.Qr.firstAfterOrEqual(e);return s!==null&&t.isEqual(s.key)}}class Xe{constructor(t,e){this.key=t,this.Yr=e}static $r(t,e){return Nt.comparator(t.key,e.key)||Yt(t.Yr,e.Yr)}static Kr(t,e){return Yt(t.Yr,e.Yr)||Nt.comparator(t.key,e.key)}}class NI{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.tr=1,this.Zr=new Ye(Xe.$r)}checkEmpty(t){return lt.resolve(this.mutationQueue.length===0)}addMutationBatch(t,e,s,o){const u=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new FR(u,e,s,o);this.mutationQueue.push(c);for(const m of o)this.Zr=this.Zr.add(new Xe(m.key,u)),this.indexManager.addToCollectionParentIndex(t,m.key.path.popLast());return lt.resolve(c)}lookupMutationBatch(t,e){return lt.resolve(this.Xr(e))}getNextMutationBatchAfterBatchId(t,e){const s=e+1,o=this.ei(s),u=o<0?0:o;return lt.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return lt.resolve(this.mutationQueue.length===0?mg:this.tr-1)}getAllMutationBatches(t){return lt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const s=new Xe(e,0),o=new Xe(e,Number.POSITIVE_INFINITY),u=[];return this.Zr.forEachInRange([s,o],(c=>{const m=this.Xr(c.Yr);u.push(m)})),lt.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(t,e){let s=new Ye(Yt);return e.forEach((o=>{const u=new Xe(o,0),c=new Xe(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([u,c],(m=>{s=s.add(m.Yr)}))})),lt.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(t,e){const s=e.path,o=s.length+1;let u=s;Nt.isDocumentKey(u)||(u=u.child(""));const c=new Xe(new Nt(u),0);let m=new Ye(Yt);return this.Zr.forEachWhile((p=>{const g=p.key.path;return!!s.isPrefixOf(g)&&(g.length===o&&(m=m.add(p.Yr)),!0)}),c),lt.resolve(this.ti(m))}ti(t){const e=[];return t.forEach((s=>{const o=this.Xr(s);o!==null&&e.push(o)})),e}removeMutationBatch(t,e){se(this.ni(e.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return lt.forEach(e.mutations,(o=>{const u=new Xe(o.key,e.batchId);return s=s.delete(u),this.referenceDelegate.markPotentiallyOrphaned(t,o.key)})).next((()=>{this.Zr=s}))}ir(t){}containsKey(t,e){const s=new Xe(e,0),o=this.Zr.firstAfterOrEqual(s);return lt.resolve(e.isEqual(o&&o.key))}performConsistencyCheck(t){return this.mutationQueue.length,lt.resolve()}ni(t,e){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const e=this.ei(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}class CI{constructor(t){this.ri=t,this.docs=(function(){return new Te(Nt.comparator)})(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const s=e.key,o=this.docs.get(s),u=o?o.size:0,c=this.ri(e);return this.docs=this.docs.insert(s,{document:e.mutableCopy(),size:c}),this.size+=c-u,this.indexManager.addToCollectionParentIndex(t,s.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const s=this.docs.get(e);return lt.resolve(s?s.document.mutableCopy():fn.newInvalidDocument(e))}getEntries(t,e){let s=kr();return e.forEach((o=>{const u=this.docs.get(o);s=s.insert(o,u?u.document.mutableCopy():fn.newInvalidDocument(o))})),lt.resolve(s)}getDocumentsMatchingQuery(t,e,s,o){let u=kr();const c=e.path,m=new Nt(c.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(m);for(;p.hasNext();){const{key:g,value:{document:v}}=p.getNext();if(!c.isPrefixOf(g.path))break;g.path.length>c.length+1||eR(tR(v),s)<=0||(o.has(v.key)||wf(e,v))&&(u=u.insert(v.key,v.mutableCopy()))}return lt.resolve(u)}getAllFromCollectionGroup(t,e,s,o){Ot(9500)}ii(t,e){return lt.forEach(this.docs,(s=>e(s)))}newChangeBuffer(t){return new RI(this)}getSize(t){return lt.resolve(this.size)}}class RI extends EI{constructor(t){super(),this.Nr=t}applyChanges(t){const e=[];return this.changes.forEach(((s,o)=>{o.isValidDocument()?e.push(this.Nr.addEntry(t,o)):this.Nr.removeEntry(s)})),lt.waitFor(e)}getFromCache(t,e){return this.Nr.getEntry(t,e)}getAllFromCache(t,e){return this.Nr.getEntries(t,e)}}class II{constructor(t){this.persistence=t,this.si=new ka((e=>yg(e)),_g),this.lastRemoteSnapshotVersion=kt.min(),this.highestTargetId=0,this.oi=0,this._i=new Ag,this.targetCount=0,this.ai=$o.ur()}forEachTarget(t,e){return this.si.forEach(((s,o)=>e(o))),lt.resolve()}getLastRemoteSnapshotVersion(t){return lt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return lt.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),lt.resolve(this.highestTargetId)}setTargetsMetadata(t,e,s){return s&&(this.lastRemoteSnapshotVersion=s),e>this.oi&&(this.oi=e),lt.resolve()}Pr(t){this.si.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.ai=new $o(e),this.highestTargetId=e),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,e){return this.Pr(e),this.targetCount+=1,lt.resolve()}updateTargetData(t,e){return this.Pr(e),lt.resolve()}removeTargetData(t,e){return this.si.delete(e.target),this._i.jr(e.targetId),this.targetCount-=1,lt.resolve()}removeTargets(t,e,s){let o=0;const u=[];return this.si.forEach(((c,m)=>{m.sequenceNumber<=e&&s.get(m.targetId)===null&&(this.si.delete(c),u.push(this.removeMatchingKeysForTargetId(t,m.targetId)),o++)})),lt.waitFor(u).next((()=>o))}getTargetCount(t){return lt.resolve(this.targetCount)}getTargetData(t,e){const s=this.si.get(e)||null;return lt.resolve(s)}addMatchingKeys(t,e,s){return this._i.Wr(e,s),lt.resolve()}removeMatchingKeys(t,e,s){this._i.zr(e,s);const o=this.persistence.referenceDelegate,u=[];return o&&e.forEach((c=>{u.push(o.markPotentiallyOrphaned(t,c))})),lt.waitFor(u)}removeMatchingKeysForTargetId(t,e){return this._i.jr(e),lt.resolve()}getMatchingKeysForTargetId(t,e){const s=this._i.Hr(e);return lt.resolve(s)}containsKey(t,e){return lt.resolve(this._i.containsKey(e))}}class Cx{constructor(t,e){this.ui={},this.overlays={},this.ci=new vf(0),this.li=!1,this.li=!0,this.hi=new SI,this.referenceDelegate=t(this),this.Pi=new II(this),this.indexManager=new mI,this.remoteDocumentCache=(function(o){return new CI(o)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new fI(e),this.Ii=new AI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new wI,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let s=this.ui[t.toKey()];return s||(s=new NI(e,this.referenceDelegate),this.ui[t.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,e,s){_t("MemoryPersistence","Starting transaction:",t);const o=new DI(this.ci.next());return this.referenceDelegate.Ei(),s(o).next((u=>this.referenceDelegate.di(o).next((()=>u)))).toPromise().then((u=>(o.raiseOnCommittedEvent(),u)))}Ai(t,e){return lt.or(Object.values(this.ui).map((s=>()=>s.containsKey(t,e))))}}class DI extends iR{constructor(t){super(),this.currentSequenceNumber=t}}class wg{constructor(t){this.persistence=t,this.Ri=new Ag,this.Vi=null}static mi(t){return new wg(t)}get fi(){if(this.Vi)return this.Vi;throw Ot(60996)}addReference(t,e,s){return this.Ri.addReference(s,e),this.fi.delete(s.toString()),lt.resolve()}removeReference(t,e,s){return this.Ri.removeReference(s,e),this.fi.add(s.toString()),lt.resolve()}markPotentiallyOrphaned(t,e){return this.fi.add(e.toString()),lt.resolve()}removeTarget(t,e){this.Ri.jr(e.targetId).forEach((o=>this.fi.add(o.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(t,e.targetId).next((o=>{o.forEach((u=>this.fi.add(u.toString())))})).next((()=>s.removeTargetData(t,e)))}Ei(){this.Vi=new Set}di(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return lt.forEach(this.fi,(s=>{const o=Nt.fromPath(s);return this.gi(t,o).next((u=>{u||e.removeEntry(o,kt.min())}))})).next((()=>(this.Vi=null,e.apply(t))))}updateLimboDocument(t,e){return this.gi(t,e).next((s=>{s?this.fi.delete(e.toString()):this.fi.add(e.toString())}))}Ti(t){return 0}gi(t,e){return lt.or([()=>lt.resolve(this.Ri.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Ai(t,e)])}}class rf{constructor(t,e){this.persistence=t,this.pi=new ka((s=>aR(s.path)),((s,o)=>s.isEqual(o))),this.garbageCollector=bI(this,e)}static mi(t,e){return new rf(t,e)}Ei(){}di(t){return lt.resolve()}forEachTarget(t,e){return this.persistence.getTargetCache().forEachTarget(t,e)}gr(t){const e=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next((s=>e.next((o=>s+o))))}wr(t){let e=0;return this.pr(t,(s=>{e++})).next((()=>e))}pr(t,e){return lt.forEach(this.pi,((s,o)=>this.br(t,s,o).next((u=>u?lt.resolve():e(o)))))}removeTargets(t,e,s){return this.persistence.getTargetCache().removeTargets(t,e,s)}removeOrphanedDocuments(t,e){let s=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.ii(t,(c=>this.br(t,c,e).next((m=>{m||(s++,u.removeEntry(c,kt.min()))})))).next((()=>u.apply(t))).next((()=>s))}markPotentiallyOrphaned(t,e){return this.pi.set(e,t.currentSequenceNumber),lt.resolve()}removeTarget(t,e){const s=e.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,s)}addReference(t,e,s){return this.pi.set(s,t.currentSequenceNumber),lt.resolve()}removeReference(t,e,s){return this.pi.set(s,t.currentSequenceNumber),lt.resolve()}updateLimboDocument(t,e){return this.pi.set(e,t.currentSequenceNumber),lt.resolve()}Ti(t){let e=t.key.toString().length;return t.isFoundDocument()&&(e+=Oh(t.data.value)),e}br(t,e,s){return lt.or([()=>this.persistence.Ai(t,e),()=>this.persistence.getTargetCache().containsKey(t,e),()=>{const o=this.pi.get(e);return lt.resolve(o!==void 0&&o>s)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}class Sg{constructor(t,e,s,o){this.targetId=t,this.fromCache=e,this.Es=s,this.ds=o}static As(t,e){let s=Kt(),o=Kt();for(const u of e.docChanges)switch(u.type){case 0:s=s.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new Sg(t,e.fromCache,s,o)}}class OI{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}class MI{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return iS()?8:rR(dn())>0?6:4})()}initialize(t,e){this.ps=t,this.indexManager=e,this.Rs=!0}getDocumentsMatchingQuery(t,e,s,o){const u={result:null};return this.ys(t,e).next((c=>{u.result=c})).next((()=>{if(!u.result)return this.ws(t,e,o,s).next((c=>{u.result=c}))})).next((()=>{if(u.result)return;const c=new OI;return this.Ss(t,e,c).next((m=>{if(u.result=m,this.Vs)return this.bs(t,e,c,m.size)}))})).next((()=>u.result))}bs(t,e,s,o){return s.documentReadCount<this.fs?(Co()<=$t.DEBUG&&_t("QueryEngine","SDK will not create cache indexes for query:",Ro(e),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),lt.resolve()):(Co()<=$t.DEBUG&&_t("QueryEngine","Query:",Ro(e),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.gs*o?(Co()<=$t.DEBUG&&_t("QueryEngine","The SDK decides to create cache indexes for query:",Ro(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Xi(e))):lt.resolve())}ys(t,e){if(xb(e))return lt.resolve(null);let s=Xi(e);return this.indexManager.getIndexType(t,s).next((o=>o===0?null:(e.limit!==null&&o===1&&(e=wp(e,null,"F"),s=Xi(e)),this.indexManager.getDocumentsMatchingTarget(t,s).next((u=>{const c=Kt(...u);return this.ps.getDocuments(t,c).next((m=>this.indexManager.getMinOffset(t,s).next((p=>{const g=this.Ds(e,m);return this.Cs(e,g,c,p.readTime)?this.ys(t,wp(e,null,"F")):this.vs(t,g,e,p)}))))})))))}ws(t,e,s,o){return xb(e)||o.isEqual(kt.min())?lt.resolve(null):this.ps.getDocuments(t,s).next((u=>{const c=this.Ds(e,u);return this.Cs(e,c,s,o)?lt.resolve(null):(Co()<=$t.DEBUG&&_t("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Ro(e)),this.vs(t,c,e,WC(o,Tu)).next((m=>m)))}))}Ds(t,e){let s=new Ye(ax(t));return e.forEach(((o,u)=>{wf(t,u)&&(s=s.add(u))})),s}Cs(t,e,s,o){if(t.limit===null)return!1;if(s.size!==e.size)return!0;const u=t.limitType==="F"?e.last():e.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Ss(t,e,s){return Co()<=$t.DEBUG&&_t("QueryEngine","Using full collection scan to execute query:",Ro(e)),this.ps.getDocumentsMatchingQuery(t,e,ks.min(),s)}vs(t,e,s,o){return this.ps.getDocumentsMatchingQuery(t,s,o).next((u=>(e.forEach((c=>{u=u.insert(c.key,c)})),u)))}}const Ng="LocalStore",kI=3e8;class VI{constructor(t,e,s,o){this.persistence=t,this.Fs=e,this.serializer=o,this.Ms=new Te(Yt),this.xs=new ka((u=>yg(u)),_g),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(s)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new xI(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(e=>t.collect(e,this.Ms)))}}function jI(i,t,e,s){return new VI(i,t,e,s)}async function Rx(i,t){const e=Lt(i);return await e.persistence.runTransaction("Handle user change","readonly",(s=>{let o;return e.mutationQueue.getAllMutationBatches(s).next((u=>(o=u,e.Bs(t),e.mutationQueue.getAllMutationBatches(s)))).next((u=>{const c=[],m=[];let p=Kt();for(const g of o){c.push(g.batchId);for(const v of g.mutations)p=p.add(v.key)}for(const g of u){m.push(g.batchId);for(const v of g.mutations)p=p.add(v.key)}return e.localDocuments.getDocuments(s,p).next((g=>({Ls:g,removedBatchIds:c,addedBatchIds:m})))}))}))}function LI(i,t){const e=Lt(i);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const o=t.batch.keys(),u=e.Ns.newChangeBuffer({trackRemovals:!0});return(function(m,p,g,v){const T=g.batch,x=T.keys();let S=lt.resolve();return x.forEach((U=>{S=S.next((()=>v.getEntry(p,U))).next((F=>{const Z=g.docVersions.get(U);se(Z!==null,48541),F.version.compareTo(Z)<0&&(T.applyToRemoteDocument(F,g),F.isValidDocument()&&(F.setReadTime(g.commitVersion),v.addEntry(F)))}))})),S.next((()=>m.mutationQueue.removeMutationBatch(p,T)))})(e,s,t,u).next((()=>u.apply(s))).next((()=>e.mutationQueue.performConsistencyCheck(s))).next((()=>e.documentOverlayCache.removeOverlaysForBatchId(s,o,t.batch.batchId))).next((()=>e.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(m){let p=Kt();for(let g=0;g<m.mutationResults.length;++g)m.mutationResults[g].transformResults.length>0&&(p=p.add(m.batch.mutations[g].key));return p})(t)))).next((()=>e.localDocuments.getDocuments(s,o)))}))}function Ix(i){const t=Lt(i);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.Pi.getLastRemoteSnapshotVersion(e)))}function PI(i,t){const e=Lt(i),s=t.snapshotVersion;let o=e.Ms;return e.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const c=e.Ns.newChangeBuffer({trackRemovals:!0});o=e.Ms;const m=[];t.targetChanges.forEach(((v,T)=>{const x=o.get(T);if(!x)return;m.push(e.Pi.removeMatchingKeys(u,v.removedDocuments,T).next((()=>e.Pi.addMatchingKeys(u,v.addedDocuments,T))));let S=x.withSequenceNumber(u.currentSequenceNumber);t.targetMismatches.get(T)!==null?S=S.withResumeToken(on.EMPTY_BYTE_STRING,kt.min()).withLastLimboFreeSnapshotVersion(kt.min()):v.resumeToken.approximateByteSize()>0&&(S=S.withResumeToken(v.resumeToken,s)),o=o.insert(T,S),(function(F,Z,ot){return F.resumeToken.approximateByteSize()===0||Z.snapshotVersion.toMicroseconds()-F.snapshotVersion.toMicroseconds()>=kI?!0:ot.addedDocuments.size+ot.modifiedDocuments.size+ot.removedDocuments.size>0})(x,S,v)&&m.push(e.Pi.updateTargetData(u,S))}));let p=kr(),g=Kt();if(t.documentUpdates.forEach((v=>{t.resolvedLimboDocuments.has(v)&&m.push(e.persistence.referenceDelegate.updateLimboDocument(u,v))})),m.push(UI(u,c,t.documentUpdates).next((v=>{p=v.ks,g=v.qs}))),!s.isEqual(kt.min())){const v=e.Pi.getLastRemoteSnapshotVersion(u).next((T=>e.Pi.setTargetsMetadata(u,u.currentSequenceNumber,s)));m.push(v)}return lt.waitFor(m).next((()=>c.apply(u))).next((()=>e.localDocuments.getLocalViewOfDocuments(u,p,g))).next((()=>p))})).then((u=>(e.Ms=o,u)))}function UI(i,t,e){let s=Kt(),o=Kt();return e.forEach((u=>s=s.add(u))),t.getEntries(i,s).next((u=>{let c=kr();return e.forEach(((m,p)=>{const g=u.get(m);p.isFoundDocument()!==g.isFoundDocument()&&(o=o.add(m)),p.isNoDocument()&&p.version.isEqual(kt.min())?(t.removeEntry(m,p.readTime),c=c.insert(m,p)):!g.isValidDocument()||p.version.compareTo(g.version)>0||p.version.compareTo(g.version)===0&&g.hasPendingWrites?(t.addEntry(p),c=c.insert(m,p)):_t(Ng,"Ignoring outdated watch update for ",m,". Current version:",g.version," Watch version:",p.version)})),{ks:c,qs:o}}))}function zI(i,t){const e=Lt(i);return e.persistence.runTransaction("Get next mutation batch","readonly",(s=>(t===void 0&&(t=mg),e.mutationQueue.getNextMutationBatchAfterBatchId(s,t))))}function BI(i,t){const e=Lt(i);return e.persistence.runTransaction("Allocate target","readwrite",(s=>{let o;return e.Pi.getTargetData(s,t).next((u=>u?(o=u,lt.resolve(o)):e.Pi.allocateTargetId(s).next((c=>(o=new Cs(t,c,"TargetPurposeListen",s.currentSequenceNumber),e.Pi.addTargetData(s,o).next((()=>o)))))))})).then((s=>{const o=e.Ms.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(e.Ms=e.Ms.insert(s.targetId,s),e.xs.set(t,s.targetId)),s}))}async function Ip(i,t,e){const s=Lt(i),o=s.Ms.get(t),u=e?"readwrite":"readwrite-primary";try{e||await s.persistence.runTransaction("Release target",u,(c=>s.persistence.referenceDelegate.removeTarget(c,o)))}catch(c){if(!el(c))throw c;_t(Ng,`Failed to update sequence numbers for target ${t}: ${c}`)}s.Ms=s.Ms.remove(t),s.xs.delete(o.target)}function jb(i,t,e){const s=Lt(i);let o=kt.min(),u=Kt();return s.persistence.runTransaction("Execute query","readwrite",(c=>(function(p,g,v){const T=Lt(p),x=T.xs.get(v);return x!==void 0?lt.resolve(T.Ms.get(x)):T.Pi.getTargetData(g,v)})(s,c,Xi(t)).next((m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(c,m.targetId).next((p=>{u=p}))})).next((()=>s.Fs.getDocumentsMatchingQuery(c,t,e?o:kt.min(),e?u:Kt()))).next((m=>(FI(s,SR(t),m),{documents:m,Qs:u})))))}function FI(i,t,e){let s=i.Os.get(t)||kt.min();e.forEach(((o,u)=>{u.readTime.compareTo(s)>0&&(s=u.readTime)})),i.Os.set(t,s)}class Lb{constructor(){this.activeTargetIds=OR()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class qI{constructor(){this.Mo=new Lb,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,s){}addLocalQueryTarget(t,e=!0){return e&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,e,s){this.xo[t]=e}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new Lb,Promise.resolve()}handleUserChange(t,e,s){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}class HI{Oo(t){}shutdown(){}}const Pb="ConnectivityMonitor";class Ub{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){_t(Pb,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){_t(Pb,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let vh=null;function Dp(){return vh===null?vh=(function(){return 268435456+Math.round(2147483648*Math.random())})():vh++,"0x"+vh.toString(16)}const Km="RestConnection",GI={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class $I{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const e=t.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=e+"://"+t.host,this.Ko=`projects/${s}/databases/${o}`,this.Wo=this.databaseId.database===Zh?`project_id=${s}`:`project_id=${s}&database_id=${o}`}Go(t,e,s,o,u){const c=Dp(),m=this.zo(t,e.toUriEncodedString());_t(Km,`Sending RPC '${t}' ${c}:`,m,s);const p={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(p,o,u);const{host:g}=new URL(m),v=Xo(g);return this.Jo(t,m,p,s,v).then((T=>(_t(Km,`Received RPC '${t}' ${c}: `,T),T)),(T=>{throw Fo(Km,`RPC '${t}' ${c} failed with error: `,T,"url: ",m,"request:",s),T}))}Ho(t,e,s,o,u,c){return this.Go(t,e,s,o,u)}jo(t,e,s){t["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Wo})(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach(((o,u)=>t[u]=o)),s&&s.headers.forEach(((o,u)=>t[u]=o))}zo(t,e){const s=GI[t];return`${this.Uo}/v1/${e}:${s}`}terminate(){}}class YI{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}const cn="WebChannelConnection";class KI extends $I{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,e,s,o,u){const c=Dp();return new Promise(((m,p)=>{const g=new VT;g.setWithCredentials(!0),g.listenOnce(jT.COMPLETE,(()=>{try{switch(g.getLastErrorCode()){case Dh.NO_ERROR:const T=g.getResponseJson();_t(cn,`XHR for RPC '${t}' ${c} received:`,JSON.stringify(T)),m(T);break;case Dh.TIMEOUT:_t(cn,`RPC '${t}' ${c} timed out`),p(new At(ft.DEADLINE_EXCEEDED,"Request time out"));break;case Dh.HTTP_ERROR:const x=g.getStatus();if(_t(cn,`RPC '${t}' ${c} failed with status:`,x,"response text:",g.getResponseText()),x>0){let S=g.getResponseJson();Array.isArray(S)&&(S=S[0]);const U=S?.error;if(U&&U.status&&U.message){const F=(function(ot){const L=ot.toLowerCase().replace(/_/g,"-");return Object.values(ft).indexOf(L)>=0?L:ft.UNKNOWN})(U.status);p(new At(F,U.message))}else p(new At(ft.UNKNOWN,"Server responded with status "+g.getStatus()))}else p(new At(ft.UNAVAILABLE,"Connection failed."));break;default:Ot(9055,{l_:t,streamId:c,h_:g.getLastErrorCode(),P_:g.getLastError()})}}finally{_t(cn,`RPC '${t}' ${c} completed.`)}}));const v=JSON.stringify(o);_t(cn,`RPC '${t}' ${c} sending request:`,o),g.send(e,"POST",v,s,15)}))}T_(t,e,s){const o=Dp(),u=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],c=UT(),m=PT(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(p.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(p.useFetchStreams=!0),this.jo(p.initMessageHeaders,e,s),p.encodeInitMessageHeaders=!0;const v=u.join("");_t(cn,`Creating RPC '${t}' stream ${o}: ${v}`,p);const T=c.createWebChannel(v,p);this.I_(T);let x=!1,S=!1;const U=new YI({Yo:Z=>{S?_t(cn,`Not sending because RPC '${t}' stream ${o} is closed:`,Z):(x||(_t(cn,`Opening RPC '${t}' stream ${o} transport.`),T.open(),x=!0),_t(cn,`RPC '${t}' stream ${o} sending:`,Z),T.send(Z))},Zo:()=>T.close()}),F=(Z,ot,L)=>{Z.listen(ot,(J=>{try{L(J)}catch(et){setTimeout((()=>{throw et}),0)}}))};return F(T,su.EventType.OPEN,(()=>{S||(_t(cn,`RPC '${t}' stream ${o} transport opened.`),U.o_())})),F(T,su.EventType.CLOSE,(()=>{S||(S=!0,_t(cn,`RPC '${t}' stream ${o} transport closed`),U.a_(),this.E_(T))})),F(T,su.EventType.ERROR,(Z=>{S||(S=!0,Fo(cn,`RPC '${t}' stream ${o} transport errored. Name:`,Z.name,"Message:",Z.message),U.a_(new At(ft.UNAVAILABLE,"The operation could not be completed")))})),F(T,su.EventType.MESSAGE,(Z=>{if(!S){const ot=Z.data[0];se(!!ot,16349);const L=ot,J=L?.error||L[0]?.error;if(J){_t(cn,`RPC '${t}' stream ${o} received error:`,J);const et=J.status;let dt=(function(C){const R=ze[C];if(R!==void 0)return yx(R)})(et),rt=J.message;dt===void 0&&(dt=ft.INTERNAL,rt="Unknown error status: "+et+" with message "+J.message),S=!0,U.a_(new At(dt,rt)),T.close()}else _t(cn,`RPC '${t}' stream ${o} received:`,ot),U.u_(ot)}})),F(m,LT.STAT_EVENT,(Z=>{Z.stat===vp.PROXY?_t(cn,`RPC '${t}' stream ${o} detected buffering proxy`):Z.stat===vp.NOPROXY&&_t(cn,`RPC '${t}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{U.__()}),0),U}terminate(){this.c_.forEach((t=>t.close())),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter((e=>e===t))}}function Qm(){return typeof document<"u"?document:null}function Rf(i){return new JR(i,!0)}class Dx{constructor(t,e,s=1e3,o=1.5,u=6e4){this.Mi=t,this.timerId=e,this.d_=s,this.A_=o,this.R_=u,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const e=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),o=Math.max(0,e-s);o>0&&_t("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${e} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),t()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const zb="PersistentStream";class Ox{constructor(t,e,s,o,u,c,m,p){this.Mi=t,this.S_=s,this.b_=o,this.connection=u,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=m,this.listener=p,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Dx(t,e)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,e){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():e&&e.code===ft.RESOURCE_EXHAUSTED?(Mr(e.toString()),Mr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):e&&e.code===ft.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(e)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),e=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,o])=>{this.D_===e&&this.G_(s,o)}),(s=>{t((()=>{const o=new At(ft.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(o)}))}))}G_(t,e){const s=this.W_(this.D_);this.stream=this.j_(t,e),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{s((()=>this.z_(o)))})),this.stream.onMessage((o=>{s((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(t){return _t(zb,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return e=>{this.Mi.enqueueAndForget((()=>this.D_===t?e():(_t(zb,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class QI extends Ox{constructor(t,e,s,o,u,c){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,s,o,c),this.serializer=u}j_(t,e){return this.connection.T_("Listen",t,e)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const e=eI(this.serializer,t),s=(function(u){if(!("targetChange"in u))return kt.min();const c=u.targetChange;return c.targetIds&&c.targetIds.length?kt.min():c.readTime?Zi(c.readTime):kt.min()})(t);return this.listener.H_(e,s)}Y_(t){const e={};e.database=Rp(this.serializer),e.addTarget=(function(u,c){let m;const p=c.target;if(m=Ap(p)?{documents:rI(u,p)}:{query:sI(u,p).ft},m.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){m.resumeToken=bx(u,c.resumeToken);const g=Sp(u,c.expectedCount);g!==null&&(m.expectedCount=g)}else if(c.snapshotVersion.compareTo(kt.min())>0){m.readTime=nf(u,c.snapshotVersion.toTimestamp());const g=Sp(u,c.expectedCount);g!==null&&(m.expectedCount=g)}return m})(this.serializer,t);const s=oI(this.serializer,t);s&&(e.labels=s),this.q_(e)}Z_(t){const e={};e.database=Rp(this.serializer),e.removeTarget=t,this.q_(e)}}class XI extends Ox{constructor(t,e,s,o,u,c){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,s,o,c),this.serializer=u}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,e){return this.connection.T_("Write",t,e)}J_(t){return se(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,se(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){se(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const e=iI(t.writeResults,t.commitTime),s=Zi(t.commitTime);return this.listener.na(s,e)}ra(){const t={};t.database=Rp(this.serializer),this.q_(t)}ea(t){const e={streamToken:this.lastStreamToken,writes:t.map((s=>nI(this.serializer,s)))};this.q_(e)}}class ZI{}class JI extends ZI{constructor(t,e,s,o){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=s,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new At(ft.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,e,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,c])=>this.connection.Go(t,Np(e,s),o,u,c))).catch((u=>{throw u.name==="FirebaseError"?(u.code===ft.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new At(ft.UNKNOWN,u.toString())}))}Ho(t,e,s,o,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,m])=>this.connection.Ho(t,Np(e,s),o,c,m,u))).catch((c=>{throw c.name==="FirebaseError"?(c.code===ft.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new At(ft.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class WI{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const e=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Mr(e),this.aa=!1):_t("OnlineStateTracker",e)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Da="RemoteStore";class tD{constructor(t,e,s,o,u){this.localStore=t,this.datastore=e,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=u,this.Aa.Oo((c=>{s.enqueueAndForget((async()=>{Va(this)&&(_t(Da,"Restarting streams for network reachability change."),await(async function(p){const g=Lt(p);g.Ea.add(4),await Gu(g),g.Ra.set("Unknown"),g.Ea.delete(4),await If(g)})(this))}))})),this.Ra=new WI(s,o)}}async function If(i){if(Va(i))for(const t of i.da)await t(!0)}async function Gu(i){for(const t of i.da)await t(!1)}function Mx(i,t){const e=Lt(i);e.Ia.has(t.targetId)||(e.Ia.set(t.targetId,t),Dg(e)?Ig(e):nl(e).O_()&&Rg(e,t))}function Cg(i,t){const e=Lt(i),s=nl(e);e.Ia.delete(t),s.O_()&&kx(e,t),e.Ia.size===0&&(s.O_()?s.L_():Va(e)&&e.Ra.set("Unknown"))}function Rg(i,t){if(i.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(kt.min())>0){const e=i.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(e)}nl(i).Y_(t)}function kx(i,t){i.Va.Ue(t),nl(i).Z_(t)}function Ig(i){i.Va=new KR({getRemoteKeysForTarget:t=>i.remoteSyncer.getRemoteKeysForTarget(t),At:t=>i.Ia.get(t)||null,ht:()=>i.datastore.serializer.databaseId}),nl(i).start(),i.Ra.ua()}function Dg(i){return Va(i)&&!nl(i).x_()&&i.Ia.size>0}function Va(i){return Lt(i).Ea.size===0}function Vx(i){i.Va=void 0}async function eD(i){i.Ra.set("Online")}async function nD(i){i.Ia.forEach(((t,e)=>{Rg(i,t)}))}async function iD(i,t){Vx(i),Dg(i)?(i.Ra.ha(t),Ig(i)):i.Ra.set("Unknown")}async function rD(i,t,e){if(i.Ra.set("Online"),t instanceof vx&&t.state===2&&t.cause)try{await(async function(o,u){const c=u.cause;for(const m of u.targetIds)o.Ia.has(m)&&(await o.remoteSyncer.rejectListen(m,c),o.Ia.delete(m),o.Va.removeTarget(m))})(i,t)}catch(s){_t(Da,"Failed to remove targets %s: %s ",t.targetIds.join(","),s),await sf(i,s)}else if(t instanceof Vh?i.Va.Ze(t):t instanceof _x?i.Va.st(t):i.Va.tt(t),!e.isEqual(kt.min()))try{const s=await Ix(i.localStore);e.compareTo(s)>=0&&await(function(u,c){const m=u.Va.Tt(c);return m.targetChanges.forEach(((p,g)=>{if(p.resumeToken.approximateByteSize()>0){const v=u.Ia.get(g);v&&u.Ia.set(g,v.withResumeToken(p.resumeToken,c))}})),m.targetMismatches.forEach(((p,g)=>{const v=u.Ia.get(p);if(!v)return;u.Ia.set(p,v.withResumeToken(on.EMPTY_BYTE_STRING,v.snapshotVersion)),kx(u,p);const T=new Cs(v.target,p,g,v.sequenceNumber);Rg(u,T)})),u.remoteSyncer.applyRemoteEvent(m)})(i,e)}catch(s){_t(Da,"Failed to raise snapshot:",s),await sf(i,s)}}async function sf(i,t,e){if(!el(t))throw t;i.Ea.add(1),await Gu(i),i.Ra.set("Offline"),e||(e=()=>Ix(i.localStore)),i.asyncQueue.enqueueRetryable((async()=>{_t(Da,"Retrying IndexedDB access"),await e(),i.Ea.delete(1),await If(i)}))}function jx(i,t){return t().catch((e=>sf(i,e,t)))}async function Df(i){const t=Lt(i),e=Ps(t);let s=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:mg;for(;sD(t);)try{const o=await zI(t.localStore,s);if(o===null){t.Ta.length===0&&e.L_();break}s=o.batchId,aD(t,o)}catch(o){await sf(t,o)}Lx(t)&&Px(t)}function sD(i){return Va(i)&&i.Ta.length<10}function aD(i,t){i.Ta.push(t);const e=Ps(i);e.O_()&&e.X_&&e.ea(t.mutations)}function Lx(i){return Va(i)&&!Ps(i).x_()&&i.Ta.length>0}function Px(i){Ps(i).start()}async function oD(i){Ps(i).ra()}async function lD(i){const t=Ps(i);for(const e of i.Ta)t.ea(e.mutations)}async function uD(i,t,e){const s=i.Ta.shift(),o=Eg.from(s,t,e);await jx(i,(()=>i.remoteSyncer.applySuccessfulWrite(o))),await Df(i)}async function cD(i,t){t&&Ps(i).X_&&await(async function(s,o){if((function(c){return GR(c)&&c!==ft.ABORTED})(o.code)){const u=s.Ta.shift();Ps(s).B_(),await jx(s,(()=>s.remoteSyncer.rejectFailedWrite(u.batchId,o))),await Df(s)}})(i,t),Lx(i)&&Px(i)}async function Bb(i,t){const e=Lt(i);e.asyncQueue.verifyOperationInProgress(),_t(Da,"RemoteStore received new credentials");const s=Va(e);e.Ea.add(3),await Gu(e),s&&e.Ra.set("Unknown"),await e.remoteSyncer.handleCredentialChange(t),e.Ea.delete(3),await If(e)}async function hD(i,t){const e=Lt(i);t?(e.Ea.delete(2),await If(e)):t||(e.Ea.add(2),await Gu(e),e.Ra.set("Unknown"))}function nl(i){return i.ma||(i.ma=(function(e,s,o){const u=Lt(e);return u.sa(),new QI(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(i.datastore,i.asyncQueue,{Xo:eD.bind(null,i),t_:nD.bind(null,i),r_:iD.bind(null,i),H_:rD.bind(null,i)}),i.da.push((async t=>{t?(i.ma.B_(),Dg(i)?Ig(i):i.Ra.set("Unknown")):(await i.ma.stop(),Vx(i))}))),i.ma}function Ps(i){return i.fa||(i.fa=(function(e,s,o){const u=Lt(e);return u.sa(),new XI(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(i.datastore,i.asyncQueue,{Xo:()=>Promise.resolve(),t_:oD.bind(null,i),r_:cD.bind(null,i),ta:lD.bind(null,i),na:uD.bind(null,i)}),i.da.push((async t=>{t?(i.fa.B_(),await Df(i)):(await i.fa.stop(),i.Ta.length>0&&(_t(Da,`Stopping write stream with ${i.Ta.length} pending writes`),i.Ta=[]))}))),i.fa}class Og{constructor(t,e,s,o,u){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=s,this.op=o,this.removalCallback=u,this.deferred=new Ms,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,e,s,o,u){const c=Date.now()+s,m=new Og(t,e,c,o,u);return m.start(s),m}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new At(ft.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Mg(i,t){if(Mr("AsyncQueue",`${t}: ${i}`),el(i))return new At(ft.UNAVAILABLE,`${t}: ${i}`);throw i}class Lo{static emptySet(t){return new Lo(t.comparator)}constructor(t){this.comparator=t?(e,s)=>t(e,s)||Nt.comparator(e.key,s.key):(e,s)=>Nt.comparator(e.key,s.key),this.keyedMap=au(),this.sortedSet=new Te(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((e,s)=>(t(e),!1)))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof Lo)||this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),s=t.sortedSet.getIterator();for(;e.hasNext();){const o=e.getNext().key,u=s.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const t=[];return this.forEach((e=>{t.push(e.toString())})),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,e){const s=new Lo;return s.comparator=this.comparator,s.keyedMap=t,s.sortedSet=e,s}}class Fb{constructor(){this.ga=new Te(Nt.comparator)}track(t){const e=t.doc.key,s=this.ga.get(e);s?t.type!==0&&s.type===3?this.ga=this.ga.insert(e,t):t.type===3&&s.type!==1?this.ga=this.ga.insert(e,{type:s.type,doc:t.doc}):t.type===2&&s.type===2?this.ga=this.ga.insert(e,{type:2,doc:t.doc}):t.type===2&&s.type===0?this.ga=this.ga.insert(e,{type:0,doc:t.doc}):t.type===1&&s.type===0?this.ga=this.ga.remove(e):t.type===1&&s.type===2?this.ga=this.ga.insert(e,{type:1,doc:s.doc}):t.type===0&&s.type===1?this.ga=this.ga.insert(e,{type:2,doc:t.doc}):Ot(63341,{Rt:t,pa:s}):this.ga=this.ga.insert(e,t)}ya(){const t=[];return this.ga.inorderTraversal(((e,s)=>{t.push(s)})),t}}class Yo{constructor(t,e,s,o,u,c,m,p,g){this.query=t,this.docs=e,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=u,this.fromCache=c,this.syncStateChanged=m,this.excludesMetadataChanges=p,this.hasCachedResults=g}static fromInitialDocuments(t,e,s,o,u){const c=[];return e.forEach((m=>{c.push({type:0,doc:m})})),new Yo(t,e,Lo.emptySet(e),c,s,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Af(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,s=t.docChanges;if(e.length!==s.length)return!1;for(let o=0;o<e.length;o++)if(e[o].type!==s[o].type||!e[o].doc.isEqual(s[o].doc))return!1;return!0}}class fD{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((t=>t.Da()))}}class dD{constructor(){this.queries=qb(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(e,s){const o=Lt(e),u=o.queries;o.queries=qb(),u.forEach(((c,m)=>{for(const p of m.Sa)p.onError(s)}))})(this,new At(ft.ABORTED,"Firestore shutting down"))}}function qb(){return new ka((i=>sx(i)),Af)}async function Ux(i,t){const e=Lt(i);let s=3;const o=t.query;let u=e.queries.get(o);u?!u.ba()&&t.Da()&&(s=2):(u=new fD,s=t.Da()?0:1);try{switch(s){case 0:u.wa=await e.onListen(o,!0);break;case 1:u.wa=await e.onListen(o,!1);break;case 2:await e.onFirstRemoteStoreListen(o)}}catch(c){const m=Mg(c,`Initialization of query '${Ro(t.query)}' failed`);return void t.onError(m)}e.queries.set(o,u),u.Sa.push(t),t.va(e.onlineState),u.wa&&t.Fa(u.wa)&&kg(e)}async function zx(i,t){const e=Lt(i),s=t.query;let o=3;const u=e.queries.get(s);if(u){const c=u.Sa.indexOf(t);c>=0&&(u.Sa.splice(c,1),u.Sa.length===0?o=t.Da()?0:1:!u.ba()&&t.Da()&&(o=2))}switch(o){case 0:return e.queries.delete(s),e.onUnlisten(s,!0);case 1:return e.queries.delete(s),e.onUnlisten(s,!1);case 2:return e.onLastRemoteStoreUnlisten(s);default:return}}function mD(i,t){const e=Lt(i);let s=!1;for(const o of t){const u=o.query,c=e.queries.get(u);if(c){for(const m of c.Sa)m.Fa(o)&&(s=!0);c.wa=o}}s&&kg(e)}function pD(i,t,e){const s=Lt(i),o=s.queries.get(t);if(o)for(const u of o.Sa)u.onError(e);s.queries.delete(t)}function kg(i){i.Ca.forEach((t=>{t.next()}))}var Op,Hb;(Hb=Op||(Op={})).Ma="default",Hb.Cache="cache";class Bx{constructor(t,e,s){this.query=t,this.xa=e,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(t){if(!this.options.includeMetadataChanges){const s=[];for(const o of t.docChanges)o.type!==3&&s.push(o);t=new Yo(t.query,t.docs,t.oldDocs,s,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),e=!0):this.La(t,this.onlineState)&&(this.ka(t),e=!0),this.Na=t,e}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let e=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),e=!0),e}La(t,e){if(!t.fromCache||!this.Da())return!0;const s=e!=="Offline";return(!this.options.qa||!s)&&(!t.docs.isEmpty()||t.hasCachedResults||e==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const e=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&this.options.includeMetadataChanges===!0}ka(t){t=Yo.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==Op.Cache}}class Fx{constructor(t){this.key=t}}class qx{constructor(t){this.key=t}}class gD{constructor(t,e){this.query=t,this.Ya=e,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Kt(),this.mutatedKeys=Kt(),this.eu=ax(t),this.tu=new Lo(this.eu)}get nu(){return this.Ya}ru(t,e){const s=e?e.iu:new Fb,o=e?e.tu:this.tu;let u=e?e.mutatedKeys:this.mutatedKeys,c=o,m=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,g=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(t.inorderTraversal(((v,T)=>{const x=o.get(v),S=wf(this.query,T)?T:null,U=!!x&&this.mutatedKeys.has(x.key),F=!!S&&(S.hasLocalMutations||this.mutatedKeys.has(S.key)&&S.hasCommittedMutations);let Z=!1;x&&S?x.data.isEqual(S.data)?U!==F&&(s.track({type:3,doc:S}),Z=!0):this.su(x,S)||(s.track({type:2,doc:S}),Z=!0,(p&&this.eu(S,p)>0||g&&this.eu(S,g)<0)&&(m=!0)):!x&&S?(s.track({type:0,doc:S}),Z=!0):x&&!S&&(s.track({type:1,doc:x}),Z=!0,(p||g)&&(m=!0)),Z&&(S?(c=c.add(S),u=F?u.add(v):u.delete(v)):(c=c.delete(v),u=u.delete(v)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const v=this.query.limitType==="F"?c.last():c.first();c=c.delete(v.key),u=u.delete(v.key),s.track({type:1,doc:v})}return{tu:c,iu:s,Cs:m,mutatedKeys:u}}su(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,s,o){const u=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const c=t.iu.ya();c.sort(((v,T)=>(function(S,U){const F=Z=>{switch(Z){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ot(20277,{Rt:Z})}};return F(S)-F(U)})(v.type,T.type)||this.eu(v.doc,T.doc))),this.ou(s),o=o??!1;const m=e&&!o?this._u():[],p=this.Xa.size===0&&this.current&&!o?1:0,g=p!==this.Za;return this.Za=p,c.length!==0||g?{snapshot:new Yo(this.query,t.tu,u,c,t.mutatedKeys,p===0,g,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:m}:{au:m}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Fb,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach((e=>this.Ya=this.Ya.add(e))),t.modifiedDocuments.forEach((e=>{})),t.removedDocuments.forEach((e=>this.Ya=this.Ya.delete(e))),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=Kt(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const e=[];return t.forEach((s=>{this.Xa.has(s)||e.push(new qx(s))})),this.Xa.forEach((s=>{t.has(s)||e.push(new Fx(s))})),e}cu(t){this.Ya=t.Qs,this.Xa=Kt();const e=this.ru(t.documents);return this.applyChanges(e,!0)}lu(){return Yo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Vg="SyncEngine";class yD{constructor(t,e,s){this.query=t,this.targetId=e,this.view=s}}class _D{constructor(t){this.key=t,this.hu=!1}}class vD{constructor(t,e,s,o,u,c){this.localStore=t,this.remoteStore=e,this.eventManager=s,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new ka((m=>sx(m)),Af),this.Iu=new Map,this.Eu=new Set,this.du=new Te(Nt.comparator),this.Au=new Map,this.Ru=new Ag,this.Vu={},this.mu=new Map,this.fu=$o.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function bD(i,t,e=!0){const s=Qx(i);let o;const u=s.Tu.get(t);return u?(s.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.lu()):o=await Hx(s,t,e,!0),o}async function ED(i,t){const e=Qx(i);await Hx(e,t,!0,!1)}async function Hx(i,t,e,s){const o=await BI(i.localStore,Xi(t)),u=o.targetId,c=i.sharedClientState.addLocalQueryTarget(u,e);let m;return s&&(m=await TD(i,t,u,c==="current",o.resumeToken)),i.isPrimaryClient&&e&&Mx(i.remoteStore,o),m}async function TD(i,t,e,s,o){i.pu=(T,x,S)=>(async function(F,Z,ot,L){let J=Z.view.ru(ot);J.Cs&&(J=await jb(F.localStore,Z.query,!1).then((({documents:O})=>Z.view.ru(O,J))));const et=L&&L.targetChanges.get(Z.targetId),dt=L&&L.targetMismatches.get(Z.targetId)!=null,rt=Z.view.applyChanges(J,F.isPrimaryClient,et,dt);return $b(F,Z.targetId,rt.au),rt.snapshot})(i,T,x,S);const u=await jb(i.localStore,t,!0),c=new gD(t,u.Qs),m=c.ru(u.documents),p=Hu.createSynthesizedTargetChangeForCurrentChange(e,s&&i.onlineState!=="Offline",o),g=c.applyChanges(m,i.isPrimaryClient,p);$b(i,e,g.au);const v=new yD(t,e,c);return i.Tu.set(t,v),i.Iu.has(e)?i.Iu.get(e).push(t):i.Iu.set(e,[t]),g.snapshot}async function xD(i,t,e){const s=Lt(i),o=s.Tu.get(t),u=s.Iu.get(o.targetId);if(u.length>1)return s.Iu.set(o.targetId,u.filter((c=>!Af(c,t)))),void s.Tu.delete(t);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await Ip(s.localStore,o.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(o.targetId),e&&Cg(s.remoteStore,o.targetId),Mp(s,o.targetId)})).catch(tl)):(Mp(s,o.targetId),await Ip(s.localStore,o.targetId,!0))}async function AD(i,t){const e=Lt(i),s=e.Tu.get(t),o=e.Iu.get(s.targetId);e.isPrimaryClient&&o.length===1&&(e.sharedClientState.removeLocalQueryTarget(s.targetId),Cg(e.remoteStore,s.targetId))}async function wD(i,t,e){const s=OD(i);try{const o=await(function(c,m){const p=Lt(c),g=ge.now(),v=m.reduce(((S,U)=>S.add(U.key)),Kt());let T,x;return p.persistence.runTransaction("Locally write mutations","readwrite",(S=>{let U=kr(),F=Kt();return p.Ns.getEntries(S,v).next((Z=>{U=Z,U.forEach(((ot,L)=>{L.isValidDocument()||(F=F.add(ot))}))})).next((()=>p.localDocuments.getOverlayedDocuments(S,U))).next((Z=>{T=Z;const ot=[];for(const L of m){const J=zR(L,T.get(L.key).overlayedDocument);J!=null&&ot.push(new Fs(L.key,J,JT(J.value.mapValue),Ii.exists(!0)))}return p.mutationQueue.addMutationBatch(S,g,ot,m)})).next((Z=>{x=Z;const ot=Z.applyToLocalDocumentSet(T,F);return p.documentOverlayCache.saveOverlays(S,Z.batchId,ot)}))})).then((()=>({batchId:x.batchId,changes:lx(T)})))})(s.localStore,t);s.sharedClientState.addPendingMutation(o.batchId),(function(c,m,p){let g=c.Vu[c.currentUser.toKey()];g||(g=new Te(Yt)),g=g.insert(m,p),c.Vu[c.currentUser.toKey()]=g})(s,o.batchId,e),await $u(s,o.changes),await Df(s.remoteStore)}catch(o){const u=Mg(o,"Failed to persist write");e.reject(u)}}async function Gx(i,t){const e=Lt(i);try{const s=await PI(e.localStore,t);t.targetChanges.forEach(((o,u)=>{const c=e.Au.get(u);c&&(se(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?c.hu=!0:o.modifiedDocuments.size>0?se(c.hu,14607):o.removedDocuments.size>0&&(se(c.hu,42227),c.hu=!1))})),await $u(e,s,t)}catch(s){await tl(s)}}function Gb(i,t,e){const s=Lt(i);if(s.isPrimaryClient&&e===0||!s.isPrimaryClient&&e===1){const o=[];s.Tu.forEach(((u,c)=>{const m=c.view.va(t);m.snapshot&&o.push(m.snapshot)})),(function(c,m){const p=Lt(c);p.onlineState=m;let g=!1;p.queries.forEach(((v,T)=>{for(const x of T.Sa)x.va(m)&&(g=!0)})),g&&kg(p)})(s.eventManager,t),o.length&&s.Pu.H_(o),s.onlineState=t,s.isPrimaryClient&&s.sharedClientState.setOnlineState(t)}}async function SD(i,t,e){const s=Lt(i);s.sharedClientState.updateQueryState(t,"rejected",e);const o=s.Au.get(t),u=o&&o.key;if(u){let c=new Te(Nt.comparator);c=c.insert(u,fn.newNoDocument(u,kt.min()));const m=Kt().add(u),p=new Cf(kt.min(),new Map,new Te(Yt),c,m);await Gx(s,p),s.du=s.du.remove(u),s.Au.delete(t),jg(s)}else await Ip(s.localStore,t,!1).then((()=>Mp(s,t,e))).catch(tl)}async function ND(i,t){const e=Lt(i),s=t.batch.batchId;try{const o=await LI(e.localStore,t);Yx(e,s,null),$x(e,s),e.sharedClientState.updateMutationState(s,"acknowledged"),await $u(e,o)}catch(o){await tl(o)}}async function CD(i,t,e){const s=Lt(i);try{const o=await(function(c,m){const p=Lt(c);return p.persistence.runTransaction("Reject batch","readwrite-primary",(g=>{let v;return p.mutationQueue.lookupMutationBatch(g,m).next((T=>(se(T!==null,37113),v=T.keys(),p.mutationQueue.removeMutationBatch(g,T)))).next((()=>p.mutationQueue.performConsistencyCheck(g))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(g,v,m))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,v))).next((()=>p.localDocuments.getDocuments(g,v)))}))})(s.localStore,t);Yx(s,t,e),$x(s,t),s.sharedClientState.updateMutationState(t,"rejected",e),await $u(s,o)}catch(o){await tl(o)}}function $x(i,t){(i.mu.get(t)||[]).forEach((e=>{e.resolve()})),i.mu.delete(t)}function Yx(i,t,e){const s=Lt(i);let o=s.Vu[s.currentUser.toKey()];if(o){const u=o.get(t);u&&(e?u.reject(e):u.resolve(),o=o.remove(t)),s.Vu[s.currentUser.toKey()]=o}}function Mp(i,t,e=null){i.sharedClientState.removeLocalQueryTarget(t);for(const s of i.Iu.get(t))i.Tu.delete(s),e&&i.Pu.yu(s,e);i.Iu.delete(t),i.isPrimaryClient&&i.Ru.jr(t).forEach((s=>{i.Ru.containsKey(s)||Kx(i,s)}))}function Kx(i,t){i.Eu.delete(t.path.canonicalString());const e=i.du.get(t);e!==null&&(Cg(i.remoteStore,e),i.du=i.du.remove(t),i.Au.delete(e),jg(i))}function $b(i,t,e){for(const s of e)s instanceof Fx?(i.Ru.addReference(s.key,t),RD(i,s)):s instanceof qx?(_t(Vg,"Document no longer in limbo: "+s.key),i.Ru.removeReference(s.key,t),i.Ru.containsKey(s.key)||Kx(i,s.key)):Ot(19791,{wu:s})}function RD(i,t){const e=t.key,s=e.path.canonicalString();i.du.get(e)||i.Eu.has(s)||(_t(Vg,"New document in limbo: "+e),i.Eu.add(s),jg(i))}function jg(i){for(;i.Eu.size>0&&i.du.size<i.maxConcurrentLimboResolutions;){const t=i.Eu.values().next().value;i.Eu.delete(t);const e=new Nt(Ee.fromString(t)),s=i.fu.next();i.Au.set(s,new _D(e)),i.du=i.du.insert(e,s),Mx(i.remoteStore,new Cs(Xi(xf(e.path)),s,"TargetPurposeLimboResolution",vf.ce))}}async function $u(i,t,e){const s=Lt(i),o=[],u=[],c=[];s.Tu.isEmpty()||(s.Tu.forEach(((m,p)=>{c.push(s.pu(p,t,e).then((g=>{if((g||e)&&s.isPrimaryClient){const v=g?!g.fromCache:e?.targetChanges.get(p.targetId)?.current;s.sharedClientState.updateQueryState(p.targetId,v?"current":"not-current")}if(g){o.push(g);const v=Sg.As(p.targetId,g);u.push(v)}})))})),await Promise.all(c),s.Pu.H_(o),await(async function(p,g){const v=Lt(p);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",(T=>lt.forEach(g,(x=>lt.forEach(x.Es,(S=>v.persistence.referenceDelegate.addReference(T,x.targetId,S))).next((()=>lt.forEach(x.ds,(S=>v.persistence.referenceDelegate.removeReference(T,x.targetId,S)))))))))}catch(T){if(!el(T))throw T;_t(Ng,"Failed to update sequence numbers: "+T)}for(const T of g){const x=T.targetId;if(!T.fromCache){const S=v.Ms.get(x),U=S.snapshotVersion,F=S.withLastLimboFreeSnapshotVersion(U);v.Ms=v.Ms.insert(x,F)}}})(s.localStore,u))}async function ID(i,t){const e=Lt(i);if(!e.currentUser.isEqual(t)){_t(Vg,"User change. New user:",t.toKey());const s=await Rx(e.localStore,t);e.currentUser=t,(function(u,c){u.mu.forEach((m=>{m.forEach((p=>{p.reject(new At(ft.CANCELLED,c))}))})),u.mu.clear()})(e,"'waitForPendingWrites' promise is rejected due to a user change."),e.sharedClientState.handleUserChange(t,s.removedBatchIds,s.addedBatchIds),await $u(e,s.Ls)}}function DD(i,t){const e=Lt(i),s=e.Au.get(t);if(s&&s.hu)return Kt().add(s.key);{let o=Kt();const u=e.Iu.get(t);if(!u)return o;for(const c of u){const m=e.Tu.get(c);o=o.unionWith(m.view.nu)}return o}}function Qx(i){const t=Lt(i);return t.remoteStore.remoteSyncer.applyRemoteEvent=Gx.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=DD.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=SD.bind(null,t),t.Pu.H_=mD.bind(null,t.eventManager),t.Pu.yu=pD.bind(null,t.eventManager),t}function OD(i){const t=Lt(i);return t.remoteStore.remoteSyncer.applySuccessfulWrite=ND.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=CD.bind(null,t),t}class af{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Rf(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,e){return null}Mu(t,e){return null}vu(t){return jI(this.persistence,new MI,t.initialUser,this.serializer)}Cu(t){return new Cx(wg.mi,this.serializer)}Du(t){return new qI}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}af.provider={build:()=>new af};class MD extends af{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,e){se(this.persistence.referenceDelegate instanceof rf,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new _I(s,t.asyncQueue,e)}Cu(t){const e=this.cacheSizeBytes!==void 0?Mn.withCacheSize(this.cacheSizeBytes):Mn.DEFAULT;return new Cx((s=>rf.mi(s,e)),this.serializer)}}class kp{async initialize(t,e){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>Gb(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=ID.bind(null,this.syncEngine),await hD(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new dD})()}createDatastore(t){const e=Rf(t.databaseInfo.databaseId),s=(function(u){return new KI(u)})(t.databaseInfo);return(function(u,c,m,p){return new JI(u,c,m,p)})(t.authCredentials,t.appCheckCredentials,s,e)}createRemoteStore(t){return(function(s,o,u,c,m){return new tD(s,o,u,c,m)})(this.localStore,this.datastore,t.asyncQueue,(e=>Gb(this.syncEngine,e,0)),(function(){return Ub.v()?new Ub:new HI})())}createSyncEngine(t,e){return(function(o,u,c,m,p,g,v){const T=new vD(o,u,c,m,p,g);return v&&(T.gu=!0),T})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}async terminate(){await(async function(e){const s=Lt(e);_t(Da,"RemoteStore shutting down."),s.Ea.add(5),await Gu(s),s.Aa.shutdown(),s.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}kp.provider={build:()=>new kp};class Xx{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):Mr("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,e){setTimeout((()=>{this.muted||t(e)}),0)}}const Us="FirestoreClient";class kD{constructor(t,e,s,o,u){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=s,this.databaseInfo=o,this.user=hn.UNAUTHENTICATED,this.clientId=fg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(s,(async c=>{_t(Us,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(s,(c=>(_t(Us,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Ms;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){const s=Mg(e,"Failed to shutdown persistence");t.reject(s)}})),t.promise}}async function Xm(i,t){i.asyncQueue.verifyOperationInProgress(),_t(Us,"Initializing OfflineComponentProvider");const e=i.configuration;await t.initialize(e);let s=e.initialUser;i.setCredentialChangeListener((async o=>{s.isEqual(o)||(await Rx(t.localStore,o),s=o)})),t.persistence.setDatabaseDeletedListener((()=>i.terminate())),i._offlineComponents=t}async function Yb(i,t){i.asyncQueue.verifyOperationInProgress();const e=await VD(i);_t(Us,"Initializing OnlineComponentProvider"),await t.initialize(e,i.configuration),i.setCredentialChangeListener((s=>Bb(t.remoteStore,s))),i.setAppCheckTokenChangeListener(((s,o)=>Bb(t.remoteStore,o))),i._onlineComponents=t}async function VD(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){_t(Us,"Using user provided OfflineComponentProvider");try{await Xm(i,i._uninitializedComponentsProvider._offline)}catch(t){const e=t;if(!(function(o){return o.name==="FirebaseError"?o.code===ft.FAILED_PRECONDITION||o.code===ft.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(e))throw e;Fo("Error using user provided cache. Falling back to memory cache: "+e),await Xm(i,new af)}}else _t(Us,"Using default OfflineComponentProvider"),await Xm(i,new MD(void 0));return i._offlineComponents}async function Zx(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(_t(Us,"Using user provided OnlineComponentProvider"),await Yb(i,i._uninitializedComponentsProvider._online)):(_t(Us,"Using default OnlineComponentProvider"),await Yb(i,new kp))),i._onlineComponents}function jD(i){return Zx(i).then((t=>t.syncEngine))}async function Vp(i){const t=await Zx(i),e=t.eventManager;return e.onListen=bD.bind(null,t.syncEngine),e.onUnlisten=xD.bind(null,t.syncEngine),e.onFirstRemoteStoreListen=ED.bind(null,t.syncEngine),e.onLastRemoteStoreUnlisten=AD.bind(null,t.syncEngine),e}function LD(i,t,e={}){const s=new Ms;return i.asyncQueue.enqueueAndForget((async()=>(function(u,c,m,p,g){const v=new Xx({next:x=>{v.Nu(),c.enqueueAndForget((()=>zx(u,T)));const S=x.docs.has(m);!S&&x.fromCache?g.reject(new At(ft.UNAVAILABLE,"Failed to get document because the client is offline.")):S&&x.fromCache&&p&&p.source==="server"?g.reject(new At(ft.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(x)},error:x=>g.reject(x)}),T=new Bx(xf(m.path),v,{includeMetadataChanges:!0,qa:!0});return Ux(u,T)})(await Vp(i),i.asyncQueue,t,e,s))),s.promise}function Jx(i){const t={};return i.timeoutSeconds!==void 0&&(t.timeoutSeconds=i.timeoutSeconds),t}const Kb=new Map;const Wx="firestore.googleapis.com",Qb=!0;class Xb{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new At(ft.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Wx,this.ssl=Qb}else this.host=t.host,this.ssl=t.ssl??Qb;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=Nx;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<gI)throw new At(ft.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}JC("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Jx(t.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new At(ft.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new At(ft.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new At(ft.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&(function(s,o){return s.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Lg{constructor(t,e,s,o){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Xb({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new At(ft.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new At(ft.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Xb(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new BC;switch(s.type){case"firstParty":return new GC(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new At(ft.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(e){const s=Kb.get(e);s&&(_t("ComponentProvider","Removing Datastore"),Kb.delete(e),s.terminate())})(this),Promise.resolve()}}function PD(i,t,e,s={}){i=Ri(i,Lg);const o=Xo(t),u=i._getSettings(),c={...u,emulatorOptions:i._getEmulatorOptions()},m=`${t}:${e}`;o&&($E(`https://${m}`),YE("Firestore",!0)),u.host!==Wx&&u.host!==m&&Fo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p={...u,host:m,ssl:o,emulatorOptions:s};if(!Sa(p,c)&&(i._setSettings(p),s.mockUserToken)){let g,v;if(typeof s.mockUserToken=="string")g=s.mockUserToken,v=hn.MOCK_USER;else{g=Kw(s.mockUserToken,i._app?.options.projectId);const T=s.mockUserToken.sub||s.mockUserToken.user_id;if(!T)throw new At(ft.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new hn(T)}i._authCredentials=new FC(new BT(g,v))}}class Of{constructor(t,e,s){this.converter=e,this._query=s,this.type="query",this.firestore=t}withConverter(t){return new Of(this.firestore,t,this._query)}}class Fe{constructor(t,e,s){this.converter=e,this._key=s,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ru(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Fe(this.firestore,t,this._key)}toJSON(){return{type:Fe._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,e,s){if(Fu(e,Fe._jsonSchema))return new Fe(t,s||null,new Nt(Ee.fromString(e.referencePath)))}}Fe._jsonSchemaVersion="firestore/documentReference/1.0",Fe._jsonSchema={type:Be("string",Fe._jsonSchemaVersion),referencePath:Be("string")};class Ru extends Of{constructor(t,e,s){super(t,e,xf(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Fe(this.firestore,null,new Nt(t))}withConverter(t){return new Ru(this.firestore,t,this._path)}}function Iu(i,t,...e){if(i=an(i),arguments.length===1&&(t=fg.newId()),ZC("doc","path",t),i instanceof Lg){const s=Ee.fromString(t,...e);return cb(s),new Fe(i,null,new Nt(s))}{if(!(i instanceof Fe||i instanceof Ru))throw new At(ft.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(Ee.fromString(t,...e));return cb(s),new Fe(i.firestore,i instanceof Ru?i.converter:null,new Nt(s))}}const Zb="AsyncQueue";class Jb{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Dx(this,"async_queue_retry"),this._c=()=>{const s=Qm();s&&_t(Zb,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=t;const e=Qm();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const e=Qm();e&&typeof e.removeEventListener=="function"&&e.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise((()=>{}));const e=new Ms;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(t().then(e.resolve,e.reject),e.promise))).then((()=>e.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Xu.push(t),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!el(t))throw t;_t(Zb,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(t){const e=this.ac.then((()=>(this.rc=!0,t().catch((s=>{throw this.nc=s,this.rc=!1,Mr("INTERNAL UNHANDLED ERROR: ",Wb(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=e,e}enqueueAfterDelay(t,e,s){this.uc(),this.oc.indexOf(t)>-1&&(e=0);const o=Og.createAndSchedule(this,t,e,s,(u=>this.hc(u)));return this.tc.push(o),o}uc(){this.nc&&Ot(47125,{Pc:Wb(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const e of this.tc)if(e.timerId===t)return!0;return!1}Ec(t){return this.Tc().then((()=>{this.tc.sort(((e,s)=>e.targetTimeMs-s.targetTimeMs));for(const e of this.tc)if(e.skipDelay(),t!=="all"&&e.timerId===t)break;return this.Tc()}))}dc(t){this.oc.push(t)}hc(t){const e=this.tc.indexOf(t);this.tc.splice(e,1)}}function Wb(i){let t=i.message||"";return i.stack&&(t=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),t}function tE(i){return(function(e,s){if(typeof e!="object"||e===null)return!1;const o=e;for(const u of s)if(u in o&&typeof o[u]=="function")return!0;return!1})(i,["next","error","complete"])}class Oa extends Lg{constructor(t,e,s,o){super(t,e,s,o),this.type="firestore",this._queue=new Jb,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new Jb(t),this._firestoreClient=void 0,await t}}}function UD(i,t){const e=typeof i=="object"?i:ZE(),s=typeof i=="string"?i:Zh,o=ng(e,"firestore").getImmediate({identifier:s});if(!o._initialized){const u=$w("firestore");u&&PD(o,...u)}return o}function Pg(i){if(i._terminated)throw new At(ft.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||zD(i),i._firestoreClient}function zD(i){const t=i._freezeSettings(),e=(function(o,u,c,m){return new uR(o,u,c,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,Jx(m.experimentalLongPollingOptions),m.useFetchStreams,m.isUsingEmulator)})(i._databaseId,i._app?.options.appId||"",i._persistenceKey,t);i._componentsProvider||t.localCache?._offlineComponentProvider&&t.localCache?._onlineComponentProvider&&(i._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),i._firestoreClient=new kD(i._authCredentials,i._appCheckCredentials,i._queue,e,i._componentsProvider&&(function(o){const u=o?._online.build();return{_offline:o?._offline.build(u),_online:u}})(i._componentsProvider))}class mi{constructor(t){this._byteString=t}static fromBase64String(t){try{return new mi(on.fromBase64String(t))}catch(e){throw new At(ft.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new mi(on.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:mi._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(Fu(t,mi._jsonSchema))return mi.fromBase64String(t.bytes)}}mi._jsonSchemaVersion="firestore/bytes/1.0",mi._jsonSchema={type:Be("string",mi._jsonSchemaVersion),bytes:Be("string")};class Mf{constructor(...t){for(let e=0;e<t.length;++e)if(t[e].length===0)throw new At(ft.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new sn(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}class kf{constructor(t){this._methodName=t}}class Ji{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new At(ft.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new At(ft.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return Yt(this._lat,t._lat)||Yt(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ji._jsonSchemaVersion}}static fromJSON(t){if(Fu(t,Ji._jsonSchema))return new Ji(t.latitude,t.longitude)}}Ji._jsonSchemaVersion="firestore/geoPoint/1.0",Ji._jsonSchema={type:Be("string",Ji._jsonSchemaVersion),latitude:Be("number"),longitude:Be("number")};class Wi{constructor(t){this._values=(t||[]).map((e=>e))}toArray(){return this._values.map((t=>t))}isEqual(t){return(function(s,o){if(s.length!==o.length)return!1;for(let u=0;u<s.length;++u)if(s[u]!==o[u])return!1;return!0})(this._values,t._values)}toJSON(){return{type:Wi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(Fu(t,Wi._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every((e=>typeof e=="number")))return new Wi(t.vectorValues);throw new At(ft.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Wi._jsonSchemaVersion="firestore/vectorValue/1.0",Wi._jsonSchema={type:Be("string",Wi._jsonSchemaVersion),vectorValues:Be("object")};const BD=/^__.*__$/;class FD{constructor(t,e,s){this.data=t,this.fieldMask=e,this.fieldTransforms=s}toMutation(t,e){return this.fieldMask!==null?new Fs(t,this.data,this.fieldMask,e,this.fieldTransforms):new qu(t,this.data,e,this.fieldTransforms)}}class t1{constructor(t,e,s){this.data=t,this.fieldMask=e,this.fieldTransforms=s}toMutation(t,e){return new Fs(t,this.data,this.fieldMask,e,this.fieldTransforms)}}function e1(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ot(40011,{Ac:i})}}class Ug{constructor(t,e,s,o,u,c){this.settings=t,this.databaseId=e,this.serializer=s,this.ignoreUndefinedProperties=o,u===void 0&&this.Rc(),this.fieldTransforms=u||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new Ug({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){const e=this.path?.child(t),s=this.Vc({path:e,fc:!1});return s.gc(t),s}yc(t){const e=this.path?.child(t),s=this.Vc({path:e,fc:!1});return s.Rc(),s}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return of(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find((e=>t.isPrefixOf(e)))!==void 0||this.fieldTransforms.find((e=>t.isPrefixOf(e.field)))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(e1(this.Ac)&&BD.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class qD{constructor(t,e,s){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=s||Rf(t)}Cc(t,e,s,o=!1){return new Ug({Ac:t,methodName:e,Dc:s,path:sn.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function n1(i){const t=i._freezeSettings(),e=Rf(i._databaseId);return new qD(i._databaseId,!!t.ignoreUndefinedProperties,e)}function HD(i,t,e,s,o,u={}){const c=i.Cc(u.merge||u.mergeFields?2:0,t,e,o);Bg("Data must be an object, but it was:",c,s);const m=i1(s,c);let p,g;if(u.merge)p=new Kn(c.fieldMask),g=c.fieldTransforms;else if(u.mergeFields){const v=[];for(const T of u.mergeFields){const x=jp(t,T,e);if(!c.contains(x))throw new At(ft.INVALID_ARGUMENT,`Field '${x}' is specified in your field mask but missing from your input data.`);s1(v,x)||v.push(x)}p=new Kn(v),g=c.fieldTransforms.filter((T=>p.covers(T.field)))}else p=null,g=c.fieldTransforms;return new FD(new kn(m),p,g)}class Vf extends kf{_toFieldTransform(t){if(t.Ac!==2)throw t.Ac===1?t.Sc(`${this._methodName}() can only appear at the top level of your update data`):t.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof Vf}}class zg extends kf{_toFieldTransform(t){return new jR(t.path,new Su)}isEqual(t){return t instanceof zg}}function GD(i,t,e,s){const o=i.Cc(1,t,e);Bg("Data must be an object, but it was:",o,s);const u=[],c=kn.empty();Bs(s,((p,g)=>{const v=Fg(t,p,e);g=an(g);const T=o.yc(v);if(g instanceof Vf)u.push(v);else{const x=jf(g,T);x!=null&&(u.push(v),c.set(v,x))}}));const m=new Kn(u);return new t1(c,m,o.fieldTransforms)}function $D(i,t,e,s,o,u){const c=i.Cc(1,t,e),m=[jp(t,s,e)],p=[o];if(u.length%2!=0)throw new At(ft.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let x=0;x<u.length;x+=2)m.push(jp(t,u[x])),p.push(u[x+1]);const g=[],v=kn.empty();for(let x=m.length-1;x>=0;--x)if(!s1(g,m[x])){const S=m[x];let U=p[x];U=an(U);const F=c.yc(S);if(U instanceof Vf)g.push(S);else{const Z=jf(U,F);Z!=null&&(g.push(S),v.set(S,Z))}}const T=new Kn(g);return new t1(v,T,c.fieldTransforms)}function jf(i,t){if(r1(i=an(i)))return Bg("Unsupported field value:",t,i),i1(i,t);if(i instanceof kf)return(function(s,o){if(!e1(o.Ac))throw o.Sc(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${s._methodName}() is not currently supported inside arrays`);const u=s._toFieldTransform(o);u&&o.fieldTransforms.push(u)})(i,t),null;if(i===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),i instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return(function(s,o){const u=[];let c=0;for(const m of s){let p=jf(m,o.wc(c));p==null&&(p={nullValue:"NULL_VALUE"}),u.push(p),c++}return{arrayValue:{values:u}}})(i,t)}return(function(s,o){if((s=an(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return MR(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const u=ge.fromDate(s);return{timestampValue:nf(o.serializer,u)}}if(s instanceof ge){const u=new ge(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:nf(o.serializer,u)}}if(s instanceof Ji)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof mi)return{bytesValue:bx(o.serializer,s._byteString)};if(s instanceof Fe){const u=o.databaseId,c=s.firestore._databaseId;if(!c.isEqual(u))throw o.Sc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:xg(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof Wi)return(function(c,m){return{mapValue:{fields:{[XT]:{stringValue:ZT},[Jh]:{arrayValue:{values:c.toArray().map((g=>{if(typeof g!="number")throw m.Sc("VectorValues must only contain numeric values.");return vg(m.serializer,g)}))}}}}}})(s,o);throw o.Sc(`Unsupported field value: ${dg(s)}`)})(i,t)}function i1(i,t){const e={};return HT(i)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Bs(i,((s,o)=>{const u=jf(o,t.mc(s));u!=null&&(e[s]=u)})),{mapValue:{fields:e}}}function r1(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof ge||i instanceof Ji||i instanceof mi||i instanceof Fe||i instanceof kf||i instanceof Wi)}function Bg(i,t,e){if(!r1(e)||!FT(e)){const s=dg(e);throw s==="an object"?t.Sc(i+" a custom object"):t.Sc(i+" "+s)}}function jp(i,t,e){if((t=an(t))instanceof Mf)return t._internalPath;if(typeof t=="string")return Fg(i,t);throw of("Field path arguments must be of type string or ",i,!1,void 0,e)}const YD=new RegExp("[~\\*/\\[\\]]");function Fg(i,t,e){if(t.search(YD)>=0)throw of(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,e);try{return new Mf(...t.split("."))._internalPath}catch{throw of(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,e)}}function of(i,t,e,s,o){const u=s&&!s.isEmpty(),c=o!==void 0;let m=`Function ${t}() called with invalid data`;e&&(m+=" (via `toFirestore()`)"),m+=". ";let p="";return(u||c)&&(p+=" (found",u&&(p+=` in field ${s}`),c&&(p+=` in document ${o}`),p+=")"),new At(ft.INVALID_ARGUMENT,m+i+p)}function s1(i,t){return i.some((e=>e.isEqual(t)))}class a1{constructor(t,e,s,o,u){this._firestore=t,this._userDataWriter=e,this._key=s,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Fe(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new KD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(o1("DocumentSnapshot.get",t));if(e!==null)return this._userDataWriter.convertValue(e)}}}class KD extends a1{data(){return super.data()}}function o1(i,t){return typeof t=="string"?Fg(i,t):t instanceof Mf?t._internalPath:t._delegate._internalPath}function QD(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new At(ft.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class XD{convertValue(t,e="none"){switch(Ls(t)){case 0:return null;case 1:return t.booleanValue;case 2:return De(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(js(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 11:return this.convertObject(t.mapValue,e);case 10:return this.convertVectorValue(t.mapValue);default:throw Ot(62114,{value:t})}}convertObject(t,e){return this.convertObjectMap(t.fields,e)}convertObjectMap(t,e="none"){const s={};return Bs(t,((o,u)=>{s[o]=this.convertValue(u,e)})),s}convertVectorValue(t){const e=t.fields?.[Jh].arrayValue?.values?.map((s=>De(s.doubleValue)));return new Wi(e)}convertGeoPoint(t){return new Ji(De(t.latitude),De(t.longitude))}convertArray(t,e){return(t.values||[]).map((s=>this.convertValue(s,e)))}convertServerTimestamp(t,e){switch(e){case"previous":const s=Ef(t);return s==null?null:this.convertValue(s,e);case"estimate":return this.convertTimestamp(xu(t));default:return null}}convertTimestamp(t){const e=Vs(t);return new ge(e.seconds,e.nanos)}convertDocumentKey(t,e){const s=Ee.fromString(t);se(Sx(s),9688,{name:t});const o=new Au(s.get(1),s.get(3)),u=new Nt(s.popFirst(5));return o.isEqual(e)||Mr(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),u}}function ZD(i,t,e){let s;return s=i?e&&(e.merge||e.mergeFields)?i.toFirestore(t,e):i.toFirestore(t):t,s}class lu{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Aa extends a1{constructor(t,e,s,o,u,c){super(t,e,s,o,c),this._firestore=t,this._firestoreImpl=t,this.metadata=u}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new jh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const s=this._document.data.field(o1("DocumentSnapshot.get",t));if(s!==null)return this._userDataWriter.convertValue(s,e.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new At(ft.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,e={};return e.type=Aa._jsonSchemaVersion,e.bundle="",e.bundleSource="DocumentSnapshot",e.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?e:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),e.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),e)}}Aa._jsonSchemaVersion="firestore/documentSnapshot/1.0",Aa._jsonSchema={type:Be("string",Aa._jsonSchemaVersion),bundleSource:Be("string","DocumentSnapshot"),bundleName:Be("string"),bundle:Be("string")};class jh extends Aa{data(t={}){return super.data(t)}}class Po{constructor(t,e,s,o){this._firestore=t,this._userDataWriter=e,this._snapshot=o,this.metadata=new lu(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const t=[];return this.forEach((e=>t.push(e))),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,e){this._snapshot.docs.forEach((s=>{t.call(e,new jh(this._firestore,this._userDataWriter,s.key,s,new lu(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new At(ft.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=(function(o,u){if(o._snapshot.oldDocs.isEmpty()){let c=0;return o._snapshot.docChanges.map((m=>{const p=new jh(o._firestore,o._userDataWriter,m.doc.key,m.doc,new lu(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:p,oldIndex:-1,newIndex:c++}}))}{let c=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((m=>u||m.type!==3)).map((m=>{const p=new jh(o._firestore,o._userDataWriter,m.doc.key,m.doc,new lu(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let g=-1,v=-1;return m.type!==0&&(g=c.indexOf(m.doc.key),c=c.delete(m.doc.key)),m.type!==1&&(c=c.add(m.doc),v=c.indexOf(m.doc.key)),{type:JD(m.type),doc:p,oldIndex:g,newIndex:v}}))}})(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new At(ft.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=Po._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=fg.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const e=[],s=[],o=[];return this.docs.forEach((u=>{u._document!==null&&(e.push(u._document),s.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),o.push(u.ref.path))})),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function JD(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ot(61501,{type:i})}}function l1(i){i=Ri(i,Fe);const t=Ri(i.firestore,Oa);return LD(Pg(t),i._key).then((e=>f1(t,i,e)))}Po._jsonSchemaVersion="firestore/querySnapshot/1.0",Po._jsonSchema={type:Be("string",Po._jsonSchemaVersion),bundleSource:Be("string","QuerySnapshot"),bundleName:Be("string"),bundle:Be("string")};class u1 extends XD{constructor(t){super(),this.firestore=t}convertBytes(t){return new mi(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new Fe(this.firestore,null,e)}}function c1(i,t,e){i=Ri(i,Fe);const s=Ri(i.firestore,Oa),o=ZD(i.converter,t,e);return qg(s,[HD(n1(s),"setDoc",i._key,o,i.converter!==null,e).toMutation(i._key,Ii.none())])}function h1(i,t,e,...s){i=Ri(i,Fe);const o=Ri(i.firestore,Oa),u=n1(o);let c;return c=typeof(t=an(t))=="string"||t instanceof Mf?$D(u,"updateDoc",i._key,t,e,s):GD(u,"updateDoc",i._key,t),qg(o,[c.toMutation(i._key,Ii.exists(!0))])}function WD(i){return qg(Ri(i.firestore,Oa),[new bg(i._key,Ii.none())])}function tO(i,...t){i=an(i);let e={includeMetadataChanges:!1,source:"default"},s=0;typeof t[s]!="object"||tE(t[s])||(e=t[s++]);const o={includeMetadataChanges:e.includeMetadataChanges,source:e.source};if(tE(t[s])){const p=t[s];t[s]=p.next?.bind(p),t[s+1]=p.error?.bind(p),t[s+2]=p.complete?.bind(p)}let u,c,m;if(i instanceof Fe)c=Ri(i.firestore,Oa),m=xf(i._key.path),u={next:p=>{t[s]&&t[s](f1(c,i,p))},error:t[s+1],complete:t[s+2]};else{const p=Ri(i,Of);c=Ri(p.firestore,Oa),m=p._query;const g=new u1(c);u={next:v=>{t[s]&&t[s](new Po(c,g,p,v))},error:t[s+1],complete:t[s+2]},QD(i._query)}return(function(g,v,T,x){const S=new Xx(x),U=new Bx(v,S,T);return g.asyncQueue.enqueueAndForget((async()=>Ux(await Vp(g),U))),()=>{S.Nu(),g.asyncQueue.enqueueAndForget((async()=>zx(await Vp(g),U)))}})(Pg(c),m,o,u)}function qg(i,t){return(function(s,o){const u=new Ms;return s.asyncQueue.enqueueAndForget((async()=>wD(await jD(s),o,u))),u.promise})(Pg(i),t)}function f1(i,t,e){const s=e.docs.get(t._key),o=new u1(i);return new Aa(i,o,t._key,s,new lu(e.hasPendingWrites,e.fromCache),t.converter)}function Lp(){return new zg("serverTimestamp")}(function(t,e=!0){(function(o){Wo=o})(Zo),Bo(new Na("firestore",((s,{instanceIdentifier:o,options:u})=>{const c=s.getProvider("app").getImmediate(),m=new Oa(new qC(s.getProvider("auth-internal")),new $C(c,s.getProvider("app-check-internal")),(function(g,v){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new At(ft.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Au(g.options.projectId,v)})(c,o),c);return u={useFetchStreams:e,...u},m._setSettings(u),m}),"PUBLIC").setMultipleInstances(!0)),Ds(ab,ob,t),Ds(ab,ob,"esm2020")})();const eO={apiKey:"AIzaSyDJLZ07IsSV0efiWNzZDvSDltscm7yFMGc",authDomain:"flowmetrics-a7669.firebaseapp.com",projectId:"flowmetrics-a7669",storageBucket:"flowmetrics-a7669.appspot.com",messagingSenderId:"13206232192",appId:"1:13206232192:web:97d4b158974350ed5ada65"},d1=XE(eO),tu=UC(d1),Du=UD(d1),m1=yt.createContext(null);function nO({children:i}){const[t,e]=yt.useState(null),[s,o]=yt.useState(!0);yt.useEffect(()=>{const g=N2(tu,v=>{e(v??null),o(!1)});return()=>g()},[]);async function u(g,v){await A2(tu,g,v)}async function c(g,v){return await x2(tu,g,v)}async function m(){await C2(tu),e(null)}async function p(g){await T2(tu,g)}return _.jsx(m1.Provider,{value:{user:t,authLoading:s,signInWithEmail:u,signUpWithEmail:c,signOut:m,resetPassword:p},children:i})}function iO(){const i=yt.useContext(m1);if(!i)throw new Error("useFirebaseAuth must be used inside FirebaseAuthProvider");return i}function Pp(i){if(i!==void 0){if(i===null)return null;if(typeof i=="number")return Number.isFinite(i)?i:null;if(i instanceof Date)return i.toISOString();if(Array.isArray(i))return i.map(Pp).filter(e=>e!==void 0);if(typeof i=="object"){const t={};for(const[e,s]of Object.entries(i)){const o=Pp(s);o!==void 0&&(t[e]=o)}return t}return i}}async function eE(i,t){if(!i)return;const e=Iu(Du,"workspaces",i),s=Pp(t);try{return await h1(e,{state:s,updatedAt:Lp()}),!0}catch(o){if(o?.code==="not-found")return await c1(e,{state:s,updatedAt:Lp()},{merge:!0}),!0;throw console.error("saveWorkspaceState failed",o),o}}const _u=["","","","","","","","","",""];function rO(i=""){let t=0;for(let e=0;e<i.length;e++)t=(t<<5)-t+i.charCodeAt(e),t|=0;return Math.abs(t)}function p1(i,t="Budgeteer"){if(!i)return t;const e=i.trim();return e&&e.replace(/[^a-zA-Z0-9_\- ]+/g,"").slice(0,32)||t}function sO(i){const t=i?.email?.split("@")[0]??"",e=p1(t,"Budgeteer"),s=i?.uid||i?.email||e||String(Date.now()),o=rO(s)%_u.length;return{username:e,avatarEmoji:_u[o]}}async function aO(i){const t=i?.uid;if(!t)return null;const e=Iu(Du,"users",t),s=await l1(e);if(s.exists())return s.data();const o=sO(i);return await c1(e,{...o,createdAt:Lp()},{merge:!0}),o}async function oO(i,{username:t,avatarEmoji:e}={}){if(!i)throw new Error("Missing uid");const s={};typeof t=="string"&&(s.username=p1(t)),typeof e=="string"&&(s.avatarEmoji=e);const o=Iu(Du,"users",i);return await h1(o,s),(await l1(o)).data()}function lO({label:i,active:t,onClick:e}){return _.jsx("button",{onClick:e,className:`px-3 py-1 rounded-full border text-xs transition
      ${t?"border-cyan-400 bg-cyan-500/10 text-cyan-200":"border-slate-600/60 text-slate-300 hover:border-cyan-400/60 hover:text-cyan-200"}`,children:i})}const Up=[{key:"dark",label:"Cyber Dark",description:"Charcoal with neon cyan highlights",shellClass:"bg-[#05060A] text-slate-100",headerClass:"border-[#1f2937] bg-[#05060F]/90",pillClass:"border-slate-600/70 bg-black/20 hover:bg-black/40",previewGradient:"from-[#020617] via-[#05060f] to-[#020617]"},{key:"light",label:"Soft Light",description:"Warm whites with slate ink",shellClass:"bg-slate-50 text-slate-900",headerClass:"border-slate-200 bg-white/80",pillClass:"border-slate-300 bg-white/70 hover:bg-slate-100",previewGradient:"from-white via-slate-100 to-slate-200"},{key:"midnight",label:"Midnight Pulse",description:"Indigo mist with electric purple",shellClass:"bg-[#070718] text-indigo-100",headerClass:"border-[#191d3a] bg-gradient-to-r from-[#0f1032cc] to-[#1b0d3fcc]",pillClass:"border-indigo-600/50 bg-indigo-900/40 hover:bg-indigo-900/70",previewGradient:"from-[#0b1433] via-[#25124f] to-[#3b0f49]"},{key:"aurora",label:"Aurora Mist",description:"Deep teal with aurora glow",shellClass:"bg-gradient-to-br from-[#041b1f] via-[#082831] to-[#041b1f] text-emerald-50",headerClass:"border-emerald-900/40 bg-[#051f25]/90",pillClass:"border-emerald-500/40 bg-emerald-900/40 hover:bg-emerald-900/70",previewGradient:"from-[#052528] via-[#0b4b4f] to-[#0f766e]"},{key:"crimson",label:"Crimson Bloom",description:"Deep burgundy with neon rose edges",shellClass:"bg-gradient-to-br from-[#19070a] via-[#2b0d12] to-[#19070a] text-rose-50",headerClass:"border-rose-900/40 bg-[#2b0d12]/90",pillClass:"border-rose-500/50 bg-rose-900/40 hover:bg-rose-900/70",previewGradient:"from-[#300911] via-[#5b0a1c] to-[#be123c]"}];function g1(i){return Up.find(t=>t.key===i)||Up[0]}function uO({option:i,active:t,onSelect:e}){return _.jsxs("button",{type:"button",onClick:()=>e(i.key),className:`w-full text-left rounded-xl border px-3 py-2 transition ${t?"border-cyan-400 bg-cyan-500/10":"border-white/10 hover:border-cyan-400/60"}`,children:[_.jsx("div",{className:`h-10 rounded-lg bg-gradient-to-r ${i.previewGradient} mb-2`}),_.jsx("p",{className:"text-sm font-semibold text-white",children:i.label}),_.jsx("p",{className:"text-[11px] text-slate-300",children:i.description})]})}function cO({value:i,onChange:t,variant:e="default",onAfterSelect:s=()=>{}}){const[o,u]=yt.useState(!1),c=yt.useMemo(()=>g1(i),[i]),m=e==="menu";function p(T){t?.(T),u(!1),s?.()}const g=m?"w-full text-left px-3 py-2 text-slate-200 hover:bg-slate-800/80 rounded-md transition":`px-2 py-1 rounded border transition ${c.pillClass}`,v=`absolute ${m?"left-0":"right-0"} ${m?"mt-1":"mt-2"} w-64 rounded-2xl border border-white/15 bg-[#05060F]/95 p-3 shadow-xl backdrop-blur z-50 transition-all duration-150 ${o?"opacity-100 translate-y-0 pointer-events-auto":"opacity-0 -translate-y-1 pointer-events-none"}`;return _.jsxs("div",{className:`relative text-xs ${m?"w-full":""}`,children:[_.jsxs("button",{type:"button",onClick:()=>u(T=>!T),className:g,children:["Theme: ",c.label]}),_.jsx("div",{className:v,children:_.jsx("div",{className:"space-y-2",children:Up.map(T=>_.jsx(uO,{option:T,active:T.key===c.key,onSelect:p},T.key))})})]})}function hO({customizeMode:i,setCustomizeMode:t,onReset:e,onSignOut:s,themeValue:o,onChangeTheme:u=()=>{}}){const[c,m]=yt.useState(!1);return _.jsxs("div",{className:"relative",children:[_.jsx("button",{type:"button",className:"flex items-center justify-center w-9 h-9 rounded-full border border-slate-600/70 text-slate-300 hover:border-cyan-400/60 hover:text-cyan-200 transition",onClick:()=>m(p=>!p),children:_.jsxs("span",{className:"relative flex flex-col justify-between w-4 h-3",children:[_.jsx("span",{className:`h-[2px] rounded-full bg-current transition-transform duration-200 ${c?"translate-y-[5px] rotate-45":""}`}),_.jsx("span",{className:`h-[2px] rounded-full bg-current transition-opacity duration-200 ${c?"opacity-0":"opacity-100"}`}),_.jsx("span",{className:`h-[2px] rounded-full bg-current transition-transform duration-200 ${c?"-translate-y-[5px] -rotate-45":""}`})]})}),_.jsxs("div",{className:`absolute right-0 mt-2 w-52 bg-[#0B0C14] border border-slate-700/70 rounded-lg shadow-lg z-50 text-xs origin-top-right transform transition-all duration-150 ${c?"opacity-100 scale-100 translate-y-0 pointer-events-auto":"opacity-0 scale-95 -translate-y-1 pointer-events-none"}`,children:[_.jsx("div",{className:"px-2 py-2 border-b border-slate-800/70",children:_.jsx(cO,{value:o,onChange:u,variant:"menu",onAfterSelect:()=>m(!1)})}),_.jsx("button",{type:"button",className:"w-full text-left px-3 py-2 hover:bg-slate-800/80 text-slate-200",onClick:()=>{t(p=>!p),m(!1)},children:i?"Finish Customizing":"Customize Layout"}),_.jsx("button",{type:"button",className:"w-full text-left px-3 py-2 hover:bg-slate-800/80 text-rose-300",onClick:()=>{m(!1),e()},children:"Reset Data"}),_.jsx("button",{type:"button",className:"w-full text-left px-3 py-2 hover:bg-slate-800/80 text-slate-200",onClick:async()=>{m(!1);try{await s()}catch(p){console.error("Sign out failed:",p)}},children:"Sign Out"})]})]})}function fO({onSignIn:i,onSignUp:t,onResetPassword:e,loading:s}){const[o,u]=xt.useState("signin"),[c,m]=xt.useState(""),[p,g]=xt.useState(""),[v,T]=xt.useState(null),[x,S]=xt.useState(null),[U,F]=xt.useState(!1),[Z,ot]=xt.useState(!1);async function L(){if(T(null),S(null),!c){T("Please enter your email first, then click 'Forgot password?'.");return}if(e){ot(!0);try{await e(c),S("If an account exists with that email, a reset link has been sent. Check your inbox.")}catch(et){T(et.message||"Failed to start password reset.")}finally{ot(!1)}}}async function J(et){et.preventDefault(),T(null),S(null),F(!0);try{if(o==="signin")await i(c,p);else{const dt=await t(c,p),rt=dt?.user||null,O=dt?.session||null;S(rt&&!O?"Account created! Check your email and click the confirmation link.":"Account created!")}}catch(dt){T(dt.message||"Something went wrong.")}finally{F(!1)}}return s?_.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-950 text-slate-200",children:_.jsx("div",{className:"text-sm text-slate-400",children:"Checking session..."})}):_.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-950 text-slate-100 px-4",children:_.jsxs("div",{className:"w-full max-w-md space-y-6 rounded-2xl border border-white/10 bg-black/30 p-8 shadow-[0_20px_50px_rgba(8,8,12,0.8)]",children:[_.jsxs("div",{className:"space-y-2 text-center",children:[_.jsx("p",{className:"text-xs tracking-[0.4em] uppercase text-cyan-300",children:"Budget Center"}),_.jsx("h1",{className:"text-2xl font-semibold text-white",children:"Access portal"}),_.jsx("p",{className:"text-sm text-slate-400",children:o==="signin"?"Sign in to load your encrypted budgets.":"Create an account to sync your budgets and goals across devices."})]}),_.jsxs("div",{className:"grid grid-cols-2 rounded-full bg-white/5 p-1 text-sm",children:[_.jsx("button",{type:"button",onClick:()=>u("signin"),className:`rounded-full py-2 font-medium transition ${o==="signin"?"bg-cyan-500 text-black":"text-slate-400 hover:text-white"}`,children:"Sign in"}),_.jsx("button",{type:"button",onClick:()=>u("signup"),className:`rounded-full py-2 font-medium transition ${o==="signup"?"bg-cyan-500 text-black":"text-slate-400 hover:text-white"}`,children:"Create account"})]}),v&&_.jsx("div",{className:"rounded border border-red-500/60 bg-red-500/10 px-3 py-2 text-sm text-red-100",children:v}),x&&_.jsx("div",{className:"rounded border border-emerald-400/60 bg-emerald-400/10 px-3 py-2 text-sm text-emerald-100",children:x}),_.jsxs("form",{onSubmit:J,className:"space-y-4",children:[_.jsxs("label",{className:"block text-sm",children:[_.jsx("span",{className:"text-slate-300",children:"Email"}),_.jsx("input",{type:"email",required:!0,value:c,onChange:et=>m(et.target.value),className:"mt-1 w-full rounded-lg border border-white/10 bg-black/40 px-3 py-2 text-sm text-white placeholder-slate-500 focus:border-cyan-400 focus:outline-none",placeholder:"you@email.com",autoComplete:"email"})]}),_.jsxs("label",{className:"block text-sm",children:[_.jsx("span",{className:"text-slate-300",children:"Password"}),_.jsx("input",{type:"password",required:!0,minLength:6,value:p,onChange:et=>g(et.target.value),className:"mt-1 w-full rounded-lg border border-white/10 bg-black/40 px-3 py-2 text-sm text-white placeholder-slate-500 focus:border-cyan-400 focus:outline-none",placeholder:"",autoComplete:o==="signin"?"current-password":"new-password"})]}),_.jsx("button",{type:"submit",disabled:U,className:"w-full rounded-lg bg-cyan-500 py-2 text-sm font-semibold text-black transition hover:bg-cyan-400 disabled:opacity-60",children:U?"Please wait...":o==="signin"?"Sign in":"Create account"})]}),_.jsx("div",{className:"text-center text-sm text-slate-400",children:_.jsx("button",{type:"button",className:"font-medium text-cyan-300 hover:text-cyan-200 disabled:opacity-60",onClick:L,disabled:Z,children:Z?"Sending reset link...":"Forgot password?"})})]})})}function dO({message:i,variant:t="info",actionLabel:e,onAction:s,onClose:o}){const u=t==="success";return _.jsx("div",{className:"fixed bottom-4 right-4 z-50 max-w-xs sm:max-w-sm",children:_.jsxs("div",{className:`toast-enter flex items-start gap-3 rounded-xl border px-4 py-3 text-xs shadow-xl bg-[#05060F]/95 backdrop-blur
        ${u?"border-emerald-400/80 text-emerald-100":"border-cyan-400/80 text-cyan-100"}`,children:[_.jsx("div",{className:"mt-[2px] text-lg",children:u?"":""}),_.jsxs("div",{className:"flex-1 space-y-1",children:[_.jsx("p",{className:"leading-snug",children:i}),e&&s&&_.jsxs("button",{onClick:s,className:"inline-flex items-center gap-1 text-[0.7rem] mt-1 px-2 py-1 rounded-full border border-cyan-400/70 text-cyan-100 hover:bg-cyan-500/10 hover:border-cyan-300 transition",children:[_.jsx("span",{children:e}),_.jsx("span",{className:"text-[0.75rem]",children:""})]})]}),o&&_.jsx("button",{className:"ml-1 text-[0.7rem] text-slate-500 hover:text-slate-200",onClick:o,children:""})]})})}function mO({emoji:i,active:t,onSelect:e}){return _.jsx("button",{type:"button",onClick:()=>e(i),className:`w-9 h-9 text-lg rounded-full border transition flex items-center justify-center
      ${t?"border-cyan-400/80 bg-cyan-500/10":"border-slate-600/60 bg-black/30 hover:border-cyan-400/40"}`,children:i})}function pO({profile:i,email:t,loading:e,onUpdateProfile:s}){const[o,u]=yt.useState(!1),[c,m]=yt.useState(i?.username??""),[p,g]=yt.useState(i?.avatar_emoji??_u[0]),[v,T]=yt.useState(!1);yt.useEffect(()=>{m(i?.username??""),g(i?.avatar_emoji??_u[0])},[i?.username,i?.avatar_emoji]);async function x(F){if(F.preventDefault(),!s)return;T(!0);const Z=await s({username:c,avatar_emoji:p});T(!1),Z&&u(!1)}const S=i?.avatar_emoji??"",U=i?.username||"Budgeteer";return _.jsxs("div",{className:"relative",children:[_.jsxs("button",{type:"button",onClick:()=>u(F=>!F),className:"flex items-center gap-2 rounded-full border border-slate-600/70 bg-black/20 px-2 py-1 text-left hover:border-cyan-400/60 transition",children:[_.jsx("span",{className:"inline-flex h-8 w-8 items-center justify-center rounded-full bg-cyan-500/10 text-lg",children:S}),_.jsxs("span",{className:"flex flex-col leading-tight text-xs text-slate-300",children:[_.jsx("span",{className:"text-cyan-200",children:U}),_.jsx("span",{className:"text-[10px] text-slate-500",children:e?"Syncing...":"Profile"})]})]}),_.jsxs("form",{className:`absolute right-0 mt-2 w-64 rounded-xl border border-slate-700/70 bg-[#05060F] p-4 text-xs shadow-xl transition-all duration-150 ${o?"opacity-100 translate-y-0 pointer-events-auto":"opacity-0 -translate-y-1 pointer-events-none"}`,onSubmit:x,children:[_.jsxs("div",{className:"space-y-2",children:[_.jsx("p",{className:"text-[11px] text-slate-400",children:t?`Signed in as ${t}`:"Signed in"}),_.jsxs("label",{className:"block",children:[_.jsx("span",{className:"text-slate-300",children:"Display name"}),_.jsx("input",{type:"text",value:c,onChange:F=>m(F.target.value),placeholder:"Budgeteer",className:"mt-1 w-full rounded-lg border border-white/10 bg-black/40 px-3 py-2 text-xs text-white placeholder-slate-500 focus:border-cyan-400 focus:outline-none"})]})]}),_.jsxs("div",{className:"mt-3",children:[_.jsx("p",{className:"mb-2 text-slate-300",children:"Avatar"}),_.jsx("div",{className:"grid grid-cols-5 gap-2",children:_u.map(F=>_.jsx(mO,{emoji:F,active:p===F,onSelect:g},F))})]}),_.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[_.jsx("button",{type:"button",className:"text-[11px] text-slate-500 hover:text-slate-200",onClick:()=>u(!1),children:"Cancel"}),_.jsx("button",{type:"submit",disabled:v,className:"rounded-full bg-cyan-500 px-3 py-1 text-[11px] font-semibold text-black transition hover:bg-cyan-400 disabled:opacity-60",children:v?"Saving...":"Save changes"})]})]})]})}function Ci({title:i,actions:t=null,className:e="",children:s}){return _.jsxs("section",{className:`card-surface border rounded-xl p-4 ${e}`,children:[(i||t)&&_.jsxs("div",{className:"flex items-center justify-between gap-3 mb-3",children:[i?_.jsx("h2",{className:"text-xs font-semibold tracking-[0.25em] text-slate-400 uppercase",children:i}):_.jsx("div",{}),t?_.jsx("div",{className:"shrink-0",children:t}):null]}),s]})}function Hg({value:i=0}){const t=Math.max(0,Math.min(100,Number.isNaN(i)?0:i));return _.jsx("div",{className:"progress-bar",children:_.jsx("div",{className:"progress-bar-filled",style:{width:`${t}%`},children:t>2&&_.jsx("div",{className:"progress-shine shine"})})})}function gO(i){switch(i){case"sunset":return"bg-gradient-to-br from-orange-500/70 via-pink-500/60 to-rose-500/60 border-rose-400/60";case"forest":return"bg-gradient-to-br from-emerald-900/70 via-emerald-800/60 to-emerald-700/60 border-emerald-400/60";case"midnight":return"bg-gradient-to-br from-indigo-900/70 via-purple-900/60 to-indigo-900/70 border-indigo-400/60";case"cyber":default:return"bg-[#090a11] border-slate-800"}}function y1({goal:i,onClick:t,onEdit:e}){const s=Number(i?.saved??i?.current??0),o=Number(i?.target??0),u=Number(i?.monthlyPlan??0),c=i?.icon||i?.emoji||"",m=i?.name||"Untitled Goal",p=o>0?Math.min(100,s/o*100):0,g=gO(i?.theme),v=typeof t=="function",T=typeof e=="function";return _.jsxs("div",{className:`relative rounded-xl border p-3 ${g} ${v?"hover:border-cyan-400/70 hover:shadow-[0_0_18px_rgba(34,211,238,0.35)] transition":""}`,children:[_.jsxs("button",{type:"button",onClick:v?t:void 0,className:`w-full text-left ${v?"cursor-pointer":"cursor-default"}`,"aria-label":v?`Open goal ${m}`:`Goal ${m}`,children:[_.jsxs("div",{className:"flex items-center justify-between mb-1.5 pr-10",children:[_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx("span",{className:"text-lg",children:c}),_.jsx("span",{className:"text-sm font-medium text-slate-100",children:m})]}),_.jsxs("span",{className:"text-[0.7rem] text-slate-400",children:["Plan: $",Number.isFinite(u)?u.toFixed(0):"0","/mo"]})]}),_.jsxs("div",{className:"text-xs text-slate-400 mb-1",children:["$",Number.isFinite(s)?s.toFixed(0):"0"," / $",Number.isFinite(o)?o.toFixed(0):"0"]}),_.jsx(Hg,{value:p})]}),T&&_.jsx("button",{type:"button",onClick:x=>{x.preventDefault(),x.stopPropagation(),e(i?.id)},className:"absolute top-2 right-2 px-2 py-1 rounded-md border border-slate-700/80 bg-slate-900/40 text-slate-100 text-xs hover:border-cyan-400/70 hover:bg-slate-900/60 transition","aria-label":"Edit goal",title:"Edit",children:""})]})}const yO="modulepreload",_O=function(i){return"/budget-app/"+i},nE={},vO=function(t,e,s){let o=Promise.resolve();if(e&&e.length>0){let p=function(g){return Promise.all(g.map(v=>Promise.resolve(v).then(T=>({status:"fulfilled",value:T}),T=>({status:"rejected",reason:T}))))};document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),m=c?.nonce||c?.getAttribute("nonce");o=p(e.map(g=>{if(g=_O(g),g in nE)return;nE[g]=!0;const v=g.endsWith(".css"),T=v?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${g}"]${T}`))return;const x=document.createElement("link");if(x.rel=v?"stylesheet":yO,v||(x.as="script"),x.crossOrigin="",x.href=g,m&&x.setAttribute("nonce",m),document.head.appendChild(x),v)return new Promise((S,U)=>{x.addEventListener("load",S),x.addEventListener("error",()=>U(new Error(`Unable to preload CSS for ${g}`)))})}))}function u(c){const m=new Event("vite:preloadError",{cancelable:!0});if(m.payload=c,window.dispatchEvent(m),!m.defaultPrevented)throw c}return o.then(c=>{for(const m of c||[])m.status==="rejected"&&u(m.reason);return t().catch(u)})},zp=[{key:"chase",label:"Chase"},{key:"capitalone",label:"Capital One"},{key:"wellsfargo",label:"Wells Fargo"},{key:"americanexpress",label:"Amex"},{key:"discover",label:"Discover"},{key:"navyfederal",label:"Navy Federal"},{key:"mountainamerica",label:"Mountain America"},{key:"bankofamerica",label:"Bank of America"},{key:"usbank",label:"US Bank"},{key:"pnc",label:"PNC"}];function Bp(i=""){return i.toLowerCase().replace(/[^a-z0-9]/g,"")}function iE(i="",t=""){const e=Bp((t||"")+" "+i.slice(0,4e3));for(const s of zp)if(e.includes(s.key))return s.label;return null}function Gg(i=""){const t=i.split(/\r\n|\n|\r/).find(p=>p.trim().length>0)||"";let e=0,s=0,o=0,u=0,c=!1;for(let p=0;p<t.length;p++){const g=t[p];if(g==='"'){c=!c;continue}c||(g===","?e++:g===";"?s++:g==="	"?o++:g==="|"&&u++)}const m=[{d:",",c:e},{d:";",c:s},{d:"	",c:o},{d:"|",c:u}].sort((p,g)=>g.c-p.c);return m[0].c>0?m[0].d:","}function Uo(i,t=","){const e=[];let s="",o=!1;for(let u=0;u<i.length;u++){const c=i[u];if(c==='"'){if(o&&i[u+1]==='"'){s+='"',u+=1;continue}o=!o;continue}c===t&&!o?(e.push(s),s=""):s+=c}return e.push(s),e}function Nr(i){if(i==null)return NaN;let t=String(i).trim();t=t.replace(/"/g,"");let e=!1;t.startsWith("(")&&t.endsWith(")")&&(e=!0,t=t.slice(1,-1));let s=!1,o=!1;if(/[a-z]/i.test(t.slice(-1))&&(t.trim().toUpperCase().endsWith("CR")?(s=!0,t=t.replace(/cr$/i,"")):t.trim().toUpperCase().endsWith("DR")&&(o=!0,t=t.replace(/dr$/i,""))),t=t.replace(/[$,]/g,""),t.endsWith("-")&&(t="-"+t.slice(0,-1)),t.endsWith("+")&&(t=t.slice(0,-1)),t=t.replace(/^\+/,""),t==="")return NaN;const u=Number(t);if(Number.isNaN(u))return NaN;let c=e?-u:u;return s&&(c=Math.abs(c)),o&&(c=-Math.abs(c)),c}function _1(i,t){const e=(i||"").toLowerCase();return t>0?e.includes("payroll")||e.includes("direct deposit")?"Income  Paycheck":e.includes("refund")||e.includes("rebate")?"Income  Refund":"Income  Other":e.includes("uber")||e.includes("lyft")||e.includes("taxi")?"Transport  Rideshare":e.includes("shell")||e.includes("chevron")||e.includes("exxon")||e.includes("gas")||e.includes("fuel")?"Transport  Gas":e.includes("walmart")||e.includes("costco")||e.includes("grocery")||e.includes("smith")||e.includes("kroger")?"Groceries":e.includes("starbucks")||e.includes("coffee")||e.includes("mcdonald")||e.includes("taco bell")||e.includes("restaurant")||e.includes("cafe")?"Food & Dining":e.includes("netflix")||e.includes("spotify")||e.includes("hulu")||e.includes("disney")||e.includes("subscription")||e.includes("prime")?"Subscriptions":e.includes("rent")||e.includes("landlord")||e.includes("mortgage")?"Housing  Rent/Mortgage":e.includes("power")||e.includes("electric")||e.includes("water")||e.includes("utility")||e.includes("utilities")?"Utilities":e.includes("gym")||e.includes("fitness")?"Health & Fitness":e.includes("insurance")||e.includes("geico")||e.includes("allstate")?"Insurance":e.includes("amazon")||e.includes("target")||e.includes("best buy")||e.includes("shop")?"Shopping":"Other"}const ya={date:["date","transaction date","posted date","posting date","trans date"],description:["description","details","memo","payee","transaction description","narrative"],debit:["debit","withdrawal","outflow","money out","charge","dr"],credit:["credit","deposit","inflow","money in","payment","credit amount","cr"],amount:["amount","amt","transaction amount","value","amount (usd)","amount (cad)"],type:["type","dr/cr","transaction type","debit/credit"],balance:["balance","running balance","current balance","ending balance","available balance","ledger balance"]};function bO(i,t=","){return Uo(i,t).map(s=>s.trim()).map(s=>{let o=s.toLowerCase().replace(/"/g,"");return o=o.replace(/\s+/g," ").trim(),o})}function _a(i,t){return i.findIndex(e=>t.includes(e)||t.some(s=>e.includes(s)))}function v1(i){if(!i)return"";let t=String(i).trim().replace(/"/g,"");if(!t)return"";let e=t.match(/^(\d{4})[-/.](\d{1,2})[-/.](\d{1,2})$/);if(e){const[,o,u,c]=e;return`${o}-${u.padStart(2,"0")}-${c.padStart(2,"0")}`}if(e=t.match(/^(\d{4})(\d{2})(\d{2})$/),e){const[,o,u,c]=e;return`${o}-${u}-${c}`}if(e=t.match(/^(\d{1,2})[\/.-](\d{1,2})[\/.-](\d{2,4})$/),e){let[,o,u,c]=e,m=c.length===2?Number(c)>=70?`19${c}`:`20${c}`:c;const p=Number(o),g=Number(u);let v,T;return p>12&&g<=12?(T=p,v=g):(v=p,T=g),`${m}-${String(v).padStart(2,"0")}-${String(T).padStart(2,"0")}`}if(e=t.match(/^(\d{1,2})\s+([A-Za-z]{3,})\s+(\d{2,4})$/),e){const[,o,u,c]=e,m=c.length===2?`20${c}`:c,g=["jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"].indexOf(u.toLowerCase().slice(0,3));if(g>=0){const v=String(g+1).padStart(2,"0"),T=String(o).padStart(2,"0");return`${m}-${v}-${T}`}}if(e=t.match(/^([A-Za-z]{3,})\s+(\d{1,2}),?\s+(\d{2,4})$/),e){const[,o,u,c]=e,m=c.length===2?`20${c}`:c,g=["jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"].indexOf(o.toLowerCase().slice(0,3));if(g>=0){const v=String(g+1).padStart(2,"0"),T=String(u).padStart(2,"0");return`${m}-${v}-${T}`}}const s=new Date(t);return Number.isNaN(s.getTime())?t:s.toISOString().slice(0,10)}function EO(i){const t=Gg(i),e=i.split(/\r?\n/).find(u=>u.trim().length>0)||"";if(!e)return[];const s=Uo(e,t).map(u=>u.trim().replace(/^"|"$/g,""));return s.some(u=>/[a-zA-Z]/.test(u))?s.map((u,c)=>u||`Column ${c+1}`):s.map((u,c)=>`Column ${c+1}`)}function TO(i){if(!i)return[];const t=i.replace(/^\uFEFF/,""),e=Gg(t),s=t.split(/\r\n|\n|\r/).filter(L=>L.trim()!=="");if(s.length===0)return[];let o=bO(s[0],e),u=1;function c(L){const J=_a(L,ya.date),et=_a(L,ya.description),dt=_a(L,ya.amount),rt=_a(L,ya.debit),O=_a(L,ya.credit),C=_a(L,ya.type),R=_a(L,ya.balance);return{dateIndex:J,descIndex:et,amountIndex:dt,debitIndex:rt,creditIndex:O,typeIndex:C,balanceIndex:R}}let{dateIndex:m,descIndex:p,amountIndex:g,debitIndex:v,creditIndex:T,typeIndex:x,balanceIndex:S}=c(o);if(m<0&&p<0&&g<0&&v<0&&T<0&&S<0){const L=Uo(s[0],e).map(et=>et.trim());o=L.map((et,dt)=>dt===0?"date":dt===1?"description":dt===2||dt===L.length-1?"amount":`col${dt+1}`),u=0,{dateIndex:m,descIndex:p,amountIndex:g,debitIndex:v,creditIndex:T,typeIndex:x,balanceIndex:S}=c(o)}function F(){const L=Math.min(s.length,25),J=[];for(let rt=u;rt<L;rt++)Uo(s[rt],e).forEach((C,R)=>{const j=Nr(C);Number.isNaN(j)||(J[R]=(J[R]||0)+1)});let et=-1,dt=0;return J.forEach((rt,O)=>{rt>dt&&(dt=rt,et=O)}),dt>=2?et:-1}if(g<0&&v<0&&T<0){const L=F();L>=0&&(g=L)}function Z(L,J){if(!J||x<0)return L;const et=J[x]?.toString().toLowerCase()||"";if(!et)return L;const dt=et.includes("debit")||et.includes("withdrawal")||et.includes("payment")||et.includes("dr")||et==="d",rt=et.includes("credit")||et.includes("deposit")||et.includes("refund")||et.includes("cr")||et==="c";return dt?-Math.abs(L):rt?Math.abs(L):L}const ot=[];for(let L=u;L<s.length;L++){const J=s[L],et=Uo(J,e).map(I=>I.trim());if(et.length===0||et.every(I=>I===""))continue;const dt=m>=0?et[m]:"",rt=v1(dt),O=p>=0?et[p]:"";let C=NaN;if(g>=0)C=Nr(et[g]),C=Z(C,et);else if(v>=0||T>=0){const I=v>=0?Nr(et[v]):0,A=T>=0?Nr(et[T]):0,ct=Number.isFinite(I)?I:0;C=(Number.isFinite(A)?A:0)-ct}let R=NaN;if(S>=0&&(R=Nr(et[S])),!rt&&!O&&Number.isNaN(C)&&Number.isNaN(R)||typeof C!="number"||Number.isNaN(C))continue;const j=_1(O,C),k={date:rt,description:O,amount:C,category:j};typeof R=="number"&&!Number.isNaN(R)&&(k.balance=R),ot.push(k)}return ot}function rE(i,{dateIndex:t=null,descIndex:e=null,amountIndex:s=null,debitIndex:o=null,creditIndex:u=null,typeIndex:c=null,balanceIndex:m=null}={}){if(!i)return[];const p=i.replace(/^\uFEFF/,""),g=Gg(p),v=p.split(/\r\n|\n|\r/).filter(S=>S.trim()!=="");if(v.length===0)return[];const T=(S,U)=>{if(!U||c==null||c<0)return S;const F=U[c]?.toString().toLowerCase()||"";if(!F)return S;const Z=F.includes("debit")||F.includes("withdrawal")||F.includes("payment")||F.includes("dr")||F==="d",ot=F.includes("credit")||F.includes("deposit")||F.includes("refund")||F.includes("cr")||F==="c";return Z?-Math.abs(S):ot?Math.abs(S):S},x=[];for(let S=1;S<v.length;S++){const U=v[S],F=Uo(U,g).map(O=>O.trim());if(F.length===0||F.every(O=>O===""))continue;const Z=t!=null&&t>=0?F[t]:"",ot=v1(Z),L=e!=null&&e>=0?F[e]:"";let J=NaN;if(s!=null&&s>=0)J=Nr(F[s]),J=T(J,F);else if(o!=null||u!=null){const O=o!=null&&o>=0?Nr(F[o]):0,C=u!=null&&u>=0?Nr(F[u]):0,R=Number.isFinite(O)?O:0;J=(Number.isFinite(C)?C:0)-R}let et=NaN;if(m!=null&&m>=0&&(et=Nr(F[m])),!ot&&!L&&Number.isNaN(J)&&Number.isNaN(et)||typeof J!="number"||Number.isNaN(J))continue;const dt=_1(L,J),rt={date:ot,description:L,amount:J,category:dt};typeof et=="number"&&!Number.isNaN(et)&&(rt.balance=et),x.push(rt)}return x}function xO(i){return new Promise((t,e)=>{const s=new FileReader;s.onload=o=>t(String(o.target?.result||"")),s.onerror=()=>e(new Error("Failed to read file")),s.readAsText(i)})}function bh(i){i.preventDefault(),i.stopPropagation()}function AO(){return typeof crypto<"u"&&crypto.randomUUID?crypto.randomUUID():`f-${Date.now()}-${Math.random().toString(16).slice(2)}`}function wO(i){return(i?.name||"").toLowerCase().endsWith(".pdf")||i?.type==="application/pdf"?"pdf":"csv"}function SO(i){return{id:AO(),file:i,name:i?.name||"unknown",kind:wO(i),detectedBank:"",rawText:"",columns:[],mapping:{date:"",description:"",amount:""},previewRows:[],status:"pending",error:"",importedCount:0,createdAt:Date.now()}}function NO(i=[]){const t=x=>String(x||"").trim().toLowerCase(),e=["date","posting date","posted date","transaction date","trans date"],s=["description","desc","merchant","name","memo","details","payee"],o=["amount","amt","value","total"],u=["debit","withdrawal","outflow","charge","money out"],c=["credit","deposit","inflow","payment","money in"],m=(x,S)=>{const U=t(x);if(!U)return 0;let F=0;for(const Z of S)U===Z?F+=10:U.includes(Z)&&(F+=6);return F},p=x=>{let S={idx:null,s:0};for(let U=0;U<i.length;U++){const F=m(i[U],x);F>S.s&&(S={idx:U,s:F})}return S.s>0?S.idx:null},g=p(e),v=p(s);let T=p(o);if(T==null){const x=p(u),S=p(c);x!=null&&S==null&&(T=x),S!=null&&x==null&&(T=S),x!=null&&S!=null&&(T=S)}return{date:g,description:v,amount:T}}function sE(i,t,e){const s=e&&(e.date!==""||e.description!==""||e.amount!==""),o=v=>({dateIndex:v?.date===""?null:Number.parseInt(v.date,10),descIndex:v?.description===""?null:Number.parseInt(v.description,10),amountIndex:v?.amount===""?null:Number.parseInt(v.amount,10)}),u=TO(i);if(Array.isArray(u)&&u.length)return{rows:u,status:"ready",error:"",nextMapping:e};if(s){const v=rE(i,o(e));return Array.isArray(v)&&v.length?{rows:v,status:"ready",error:"",nextMapping:e}:{rows:[],status:"needsMapping",error:"No rows were parsed with that mapping. Try different columns.",nextMapping:e}}const c=NO(t),m={date:c.date==null?"":String(c.date),description:c.description==null?"":String(c.description),amount:c.amount==null?"":String(c.amount)},p=o(m);if(p.dateIndex!=null&&p.descIndex!=null&&p.amountIndex!=null){const v=rE(i,p);if(Array.isArray(v)&&v.length)return{rows:v,status:"ready",error:"",nextMapping:m}}return{rows:[],status:"needsMapping",error:"We couldn't automatically detect the right columns. Pick Date/Description/Amount below  it will re-parse automatically.",nextMapping:m}}function CO({onTransactionsParsed:i=()=>{}}){const[t,e]=xt.useState([]),[s,o]=xt.useState(null),[u,c]=xt.useState(!1),[m,p]=xt.useState(!0),g=xt.useRef(t);xt.useEffect(()=>{g.current=t},[t]);const v=xt.useMemo(()=>t.find(I=>I.id===s)||null,[t,s]),T=t.filter(I=>I.status==="imported").length,x=t.filter(I=>I.status==="ready").length,S=t.filter(I=>I.status==="pending"||I.status==="parsing").length,U=t.filter(I=>I.status==="needsMapping").length,F=t.filter(I=>I.status==="error").length;function Z(I=[]){const A=Array.from(I||[]).filter(Boolean);if(!A.length)return;const ct=A.map(SO);e(H=>{const M=new Set(H.map(K=>`${K.name}::${K.file?.size}::${K.file?.lastModified}`)),P=ct.filter(K=>{const q=`${K.name}::${K.file?.size}::${K.file?.lastModified}`;return M.has(q)?!1:(M.add(q),!0)});return[...H,...P]}),o(H=>H||ct[0].id)}async function ot(I){e(ct=>ct.map(H=>H.id===I?{...H,status:"parsing",error:""}:H));const A=g.current.find(ct=>ct.id===I);if(A)try{if(A.kind==="pdf"){const{parsePdfTransactions:K}=await vO(async()=>{const{parsePdfTransactions:ht}=await import("./pdf-B9oWt2gD.js");return{parsePdfTransactions:ht}},[]),{text:q,rows:it}=await K(A.file),D=iE(q,A.name||""),Q=Array.isArray(it)?it:[];e(ht=>ht.map(mt=>mt.id!==I?mt:Q.length?{...mt,rawText:q||"",detectedBank:D||"",previewRows:Q,columns:[],status:"ready",error:""}:{...mt,rawText:q||"",detectedBank:D||"",previewRows:[],columns:[],status:"error",error:"We couldn't detect any transactions in that PDF. Try CSV instead."}));return}const ct=await xO(A.file),H=iE(ct,A.name||""),M=EO(ct),P=sE(ct,M,A.mapping);e(K=>K.map(q=>q.id!==I?q:{...q,rawText:ct,detectedBank:H||"",columns:M,mapping:P.nextMapping??q.mapping,previewRows:P.rows,status:P.status,error:P.error||""}))}catch(ct){console.error("Parse error:",ct),e(H=>H.map(M=>M.id===I?{...M,status:"error",error:M.kind==="pdf"?"We couldn't read this PDF. Try downloading it as CSV.":"We couldn't understand this CSV. Try a different export format."}:M))}}xt.useEffect(()=>{const I=t.find(ct=>ct.status==="pending");if(!I)return;const A=setTimeout(()=>ot(I.id),0);return()=>clearTimeout(A)},[t]);const L=xt.useRef(null);function J(I,A){v&&(e(ct=>ct.map(H=>H.id===v.id?{...H,mapping:{...H.mapping,[I]:A},status:H.kind==="csv"?"parsing":H.status,error:""}:H)),L.current&&clearTimeout(L.current),L.current=setTimeout(()=>{const ct=g.current.find(P=>P.id===v.id);if(!ct||ct.kind!=="csv"||!ct.rawText)return;const H=ct.columns||[],M=sE(ct.rawText,H,ct.mapping);e(P=>P.map(K=>K.id!==ct.id?K:{...K,mapping:M.nextMapping??K.mapping,previewRows:M.rows,status:M.status,error:M.error||""}))},120))}function et(I){return new Promise(A=>{e(ct=>{const H=ct.find(P=>P.id===I);if(!H||H.status!=="ready")return ct;const M=ct.map(P=>P.id===I?{...P,status:"importing"}:P);return queueMicrotask(()=>{try{i(H.previewRows,{rawText:H.rawText,bank:H.detectedBank||"",filename:H.name||"",kind:H.kind||"csv"}),e(P=>P.map(K=>K.id===I?{...K,status:"imported",importedCount:H.previewRows.length,error:""}:K)),A(!0)}catch(P){console.error("Import error:",P),e(K=>K.map(q=>q.id===I?{...q,status:"error",error:P?.message||"Import failed."}:q)),A(!1)}}),M})})}async function dt(){const I=g.current.filter(A=>A.status==="ready");for(const A of I)await et(A.id)}const rt=xt.useRef(!1);xt.useEffect(()=>{!m||rt.current||!t.some(A=>A.status==="ready")||(rt.current=!0,(async()=>{try{for(;;){const A=g.current.find(ct=>ct.status==="ready");if(!A)break;await et(A.id)}}finally{rt.current=!1}})())},[t,m]);function O(I){if(e(A=>A.filter(ct=>ct.id!==I)),s===I){const A=g.current.filter(ct=>ct.id!==I);o(A[0]?.id||null)}}function C(){L.current&&clearTimeout(L.current),e([]),o(null),c(!1)}const R=Math.min(10,v?.previewRows?.length||0),j=(v?.previewRows||[]).slice(0,R).reduce((I,A)=>I+(typeof A.amount=="number"?A.amount:0),0),k=v&&v.kind==="csv"&&v.rawText&&v.columns.length>0&&(v.status==="needsMapping"||v.error);return _.jsxs("div",{className:`space-y-2 text-xs rounded-xl border p-3 transition ${u?"border-cyan-400/70 bg-cyan-500/5":"border-slate-800 bg-slate-950/30"}`,onDragEnter:I=>{bh(I),c(!0)},onDragOver:I=>{bh(I),c(!0)},onDragLeave:I=>{bh(I),c(!1)},onDrop:I=>{bh(I),c(!1),Z(I.dataTransfer?.files||[])},children:[_.jsxs("p",{className:"text-slate-400",children:["Upload ",_.jsx("span",{className:"text-cyan-300 font-semibold",children:".csv"})," or"," ",_.jsx("span",{className:"text-cyan-300 font-semibold",children:".pdf"})," bank statements. Drop multiple files. Most files will auto-parse and (optionally) auto-import."]}),_.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[_.jsxs("label",{className:"inline-flex items-center gap-2 px-3 py-1.5 rounded-md border border-cyan-400/70 text-cyan-200 bg-cyan-500/10 hover:bg-cyan-500/20 cursor-pointer transition",children:[_.jsx("span",{children:"Choose file(s)"}),_.jsx("input",{type:"file",accept:".csv,.pdf,text/csv,application/pdf,text/plain",multiple:!0,className:"hidden",onChange:I=>{Z(I.target.files||[]),I.target.value=""}})]}),_.jsxs("label",{className:"inline-flex items-center gap-2 px-2 py-1.5 rounded-md border border-slate-700 text-slate-200 bg-black/20",children:[_.jsx("input",{type:"checkbox",checked:m,onChange:I=>p(I.target.checked)}),_.jsx("span",{className:"text-[0.7rem] text-slate-300",children:"Auto-import when ready"})]}),t.length>0&&_.jsxs(_.Fragment,{children:[_.jsxs("button",{type:"button",onClick:dt,disabled:x===0,className:"px-3 py-1.5 rounded-md border border-emerald-400/70 text-emerald-100 bg-emerald-500/10 hover:bg-emerald-500/20 transition disabled:opacity-40 disabled:cursor-not-allowed",children:["Import all ready (",x,")"]}),_.jsx("button",{type:"button",onClick:C,className:"px-3 py-1.5 rounded-md border border-slate-600 text-slate-200 hover:border-slate-400 transition",children:"Clear"}),_.jsxs("div",{className:"text-[0.7rem] text-slate-500",children:["Imported ",_.jsx("span",{className:"text-slate-200 font-mono",children:T}),"/",_.jsx("span",{className:"text-slate-200 font-mono",children:t.length}),S?_.jsxs("span",{className:"ml-2 text-slate-400",children:["(",S," parsing)"]}):null,U?_.jsxs("span",{className:"ml-2 text-amber-300",children:["(",U," need mapping)"]}):null,F?_.jsxs("span",{className:"ml-2 text-rose-400",children:["(",F," error",F===1?"":"s",")"]}):null]})]})]}),t.length>0&&_.jsx("div",{className:"flex gap-2 overflow-x-auto pb-1",children:t.slice().sort((I,A)=>I.createdAt-A.createdAt).map(I=>{const A=I.id===s,ct=I.status==="imported"?"text-emerald-300":I.status==="ready"?"text-cyan-300":I.status==="error"?"text-rose-400":I.status==="needsMapping"?"text-amber-300":I.status==="parsing"?"text-slate-300":"text-slate-400";return _.jsxs("div",{className:`flex items-center gap-2 px-2 py-1.5 rounded-md border text-[0.7rem] whitespace-nowrap ${A?"border-cyan-400/70 bg-cyan-500/10 text-cyan-200":"border-slate-700 text-slate-300 hover:border-slate-500"}`,children:[_.jsxs("button",{type:"button",onClick:()=>o(I.id),children:[I.name,_.jsxs("span",{className:`ml-2 ${ct}`,children:[" ",I.status]})]}),_.jsx("button",{type:"button",className:"ml-1 text-slate-500 hover:text-slate-200",title:"Remove",onClick:()=>O(I.id),children:""})]},I.id)})}),v&&_.jsxs("div",{className:"mt-1 space-y-2",children:[_.jsxs("div",{className:"rounded-md border border-slate-800 bg-black/20 p-2 text-[0.7rem] text-slate-400",children:[_.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-1",children:[_.jsxs("div",{children:[_.jsx("span",{className:"text-slate-200 font-semibold",children:v.name})," ",_.jsxs("span",{className:"text-slate-500",children:["(",v.kind.toUpperCase(),")"]})]}),_.jsxs("div",{className:"text-slate-500",children:["Rows:"," ",_.jsx("span",{className:"text-slate-200 font-mono",children:v.previewRows?.length||0}),v.detectedBank?_.jsxs(_.Fragment,{children:[" "," Bank:"," ",_.jsx("span",{className:"text-cyan-300 font-semibold",children:v.detectedBank})]}):null]})]}),v.error?_.jsx("div",{className:"mt-1 text-rose-400",children:v.error}):null]}),k&&_.jsxs("div",{className:"border border-slate-700 rounded-md p-2 space-y-2",children:[_.jsx("p",{className:"text-[0.7rem] text-slate-400",children:"Quick fix: choose the correct columns below  it will re-parse automatically."}),_.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-2",children:["date","description","amount"].map(I=>_.jsxs("label",{className:"flex flex-col gap-1 text-[0.7rem]",children:[_.jsx("span",{className:"uppercase tracking-[0.16em] text-slate-500",children:I}),_.jsxs("select",{className:"bg-[#05060F] border border-slate-700 rounded px-2 py-1 text-slate-200",value:v.mapping?.[I]??"",onChange:A=>J(I,A.target.value),children:[_.jsx("option",{value:"",children:"Auto detect"}),v.columns.map((A,ct)=>_.jsxs("option",{value:ct,children:[A," (column ",ct+1,")"]},ct))]})]},I))}),v.status==="needsMapping"?_.jsx("p",{className:"text-[0.7rem] text-amber-300",children:"Pick Date/Description/Amount and it should become ready."}):null]}),v.previewRows?.length>0&&_.jsxs("div",{className:"border border-slate-700 rounded-md p-2 space-y-2",children:[_.jsxs("div",{className:"flex items-center justify-between text-[0.7rem] text-slate-400",children:[_.jsxs("span",{children:["Previewing ",R," of ",v.previewRows.length," rows"]}),_.jsxs("span",{children:["Net amount (preview):"," ",_.jsxs("span",{className:j<0?"text-rose-300":"text-emerald-300",children:[j<0?"-":"","$",Math.abs(j).toFixed(2)]})]})]}),_.jsx("div",{className:"max-h-40 overflow-auto text-[0.7rem]",children:_.jsxs("table",{className:"w-full text-left border-collapse",children:[_.jsx("thead",{className:"sticky top-0 bg-[#05060F]",children:_.jsxs("tr",{className:"border-b border-slate-700",children:[_.jsx("th",{className:"py-1 pr-2 font-semibold text-slate-300",children:"Date"}),_.jsx("th",{className:"py-1 pr-2 font-semibold text-slate-300",children:"Description"}),_.jsx("th",{className:"py-1 text-right font-semibold text-slate-300",children:"Amount"})]})}),_.jsx("tbody",{children:v.previewRows.slice(0,R).map((I,A)=>_.jsxs("tr",{className:"border-b border-slate-800/60",children:[_.jsx("td",{className:"py-1 pr-2 text-slate-200",children:I.date}),_.jsx("td",{className:"py-1 pr-2 text-slate-300",children:I.description}),_.jsxs("td",{className:`py-1 text-right ${I.amount<0?"text-rose-300":"text-emerald-300"}`,children:[I.amount<0?"-":"","$",Math.abs(I.amount).toFixed(2)]})]},A))})]})}),_.jsxs("div",{className:"flex flex-wrap gap-2 mt-1",children:[_.jsx("button",{type:"button",onClick:()=>et(v.id),disabled:v.status!=="ready",className:"px-3 py-1.5 text-[0.7rem] rounded-md border border-emerald-400/70 text-emerald-100 bg-emerald-500/10 hover:bg-emerald-500/20 transition disabled:opacity-40 disabled:cursor-not-allowed",children:"Import this file"}),_.jsx("button",{type:"button",onClick:()=>ot(v.id),className:"px-3 py-1.5 text-[0.7rem] rounded-md border border-slate-600 text-slate-200 hover:border-slate-400 transition",children:"Re-parse"})]})]})]}),_.jsx("p",{className:"text-[0.7rem] text-slate-500",children:"Tip: Most banks let you export recent transactions as CSV from their website."})]})}function Eh({label:i,value:t,accent:e}){return _.jsxs("div",{className:"flex flex-col",children:[_.jsx("span",{className:"text-[0.65rem] uppercase tracking-[0.22em] text-slate-500",children:i}),_.jsxs("span",{className:`text-base font-semibold ${e}`,children:["$",t.toFixed(2)]})]})}function Zm(i){const t=Number(i);return Number.isFinite(t)?t.toLocaleString(void 0,{style:"currency",currency:"USD"}):""}function aE(i){if(i==null)return null;const t=String(i).trim();if(!t)return null;const e=/^\(.*\)$/.test(t),s=t.replace(/[(),$]/g,"").replace(/\s+/g,""),o=Number(s);return Number.isFinite(o)?e?-o:o:null}function RO({open:i,onClose:t,onConfirm:e,accountName:s,statementRangeLabel:o,suggestedEndingBalance:u,transactionSum:c}){const[m,p]=yt.useState(""),[g,v]=yt.useState("");yt.useEffect(()=>{i&&(v(""),p(Number.isFinite(u)?String(u):""))},[i,u]);const T=yt.useMemo(()=>aE(m),[m]),x=yt.useMemo(()=>Number.isFinite(T)?T-(Number.isFinite(c)?c:0):null,[T,c]);if(!i)return null;function S(){v("");const U=aE(m);if(!Number.isFinite(U)){v("Please enter a valid ending balance (example: 1284.32).");return}e({endingBalance:U,startingBalance:x})}return _.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[_.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:t}),_.jsxs("div",{className:"relative w-[92vw] max-w-xl rounded-2xl bg-white p-5 shadow-xl",children:[_.jsxs("div",{className:"flex items-start justify-between gap-3",children:[_.jsxs("div",{children:[_.jsx("h2",{className:"text-lg font-semibold",children:"Confirm statement balance"}),_.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["This statement doesnt include a running balance. Enter the"," ",_.jsx("b",{children:"Ending Balance"})," shown on your statement so we can set the correct account balance."]})]}),_.jsx("button",{onClick:t,className:"rounded-xl px-3 py-1 text-sm bg-gray-100 hover:bg-gray-200",children:""})]}),_.jsxs("div",{className:"mt-4 space-y-2",children:[_.jsxs("div",{className:"text-sm text-gray-700",children:[_.jsxs("div",{children:[_.jsx("b",{children:"Account:"})," ",s||"New account"]}),o?_.jsxs("div",{children:[_.jsx("b",{children:"Statement:"})," ",o]}):null,Number.isFinite(c)?_.jsxs("div",{children:[_.jsx("b",{children:"Transactions total:"})," ",Zm(c)]}):null]}),Number.isFinite(u)?_.jsxs("button",{type:"button",onClick:()=>p(String(u)),className:"w-full rounded-xl border px-3 py-2 text-left hover:bg-gray-50",title:"Use last known ending balance",children:["Use last ending balance: ",_.jsx("b",{children:Zm(u)})]}):null,_.jsx("label",{className:"block text-sm font-medium mt-2",children:"Ending Balance"}),_.jsx("input",{value:m,onChange:U=>p(U.target.value),placeholder:"e.g. 1284.32",className:"w-full rounded-xl border px-3 py-2 outline-none focus:ring",inputMode:"decimal"}),Number.isFinite(x)?_.jsxs("div",{className:"text-sm text-gray-700",children:["Starting balance will be: ",_.jsx("b",{children:Zm(x)})]}):null,g?_.jsx("div",{className:"text-sm text-red-600",children:g}):null]}),_.jsxs("div",{className:"mt-5 flex justify-end gap-2",children:[_.jsx("button",{onClick:t,className:"rounded-xl px-4 py-2 text-sm bg-gray-100 hover:bg-gray-200",children:"Cancel"}),_.jsx("button",{onClick:S,className:"rounded-xl px-4 py-2 text-sm bg-black text-white hover:opacity-90",children:"Confirm & Import"})]})]})]})}function IO(i){if(i==null)return null;const t=String(i).trim();if(!t)return null;const e=/^\(.*\)$/.test(t),s=t.replace(/[(),$]/g,"").replace(/\s+/g,""),o=Number(s);return Number.isFinite(o)?e?-o:o:null}function DO(i,t="Amount"){let e=0;for(const s of i||[]){const o=IO(s?.[t]);Number.isFinite(o)&&(e+=o)}return e}function OO(i){const t=new Date(i);return Number.isFinite(t.getTime())?t:null}function MO(i,t="Date"){let e=null,s=null;for(const o of i||[]){const u=OO(o?.[t]);u&&((!e||u<e)&&(e=u),(!s||u>s)&&(s=u))}return{start:e,end:s}}function Mo(i){if(!(i instanceof Date))return null;const t=i.getFullYear(),e=String(i.getMonth()+1).padStart(2,"0"),s=String(i.getDate()).padStart(2,"0");return`${t}-${e}-${s}`}function kO(i){return!i?.start||!i?.end?null:`${Mo(i.start)}_${Mo(i.end)}`}const VO=["monthOverview","accountSnapshot","goals","csvImport"];function jO({month:i="",income:t=0,fixed:e=0,variable:s=0,leftover:o=0,goals:u=[],transactions:c=[],accounts:m=[],currentAccountId:p,onChangeCurrentAccount:g=()=>{},onOpenGoal:v=()=>{},onCreateGoal:T=()=>{},onCsvImported:x=()=>{},onTransactionsParsed:S,currentAccountBalance:U=0,totalBalance:F=0,sectionsOrder:Z}){const ot=x||S||(()=>{}),L=Number(t)||0,J=Number(e)||0,et=Number(s)||0,dt=Number(o)||0,rt=Number(U)||0,O=Number(F)||0,C=L>0?(L-dt)/L*100:0,R=Z&&Z.length?Z:VO,j=Array.isArray(c)&&c.length>0,[k,I]=xt.useState(!1);xt.useEffect(()=>{I(!1)},[c]);const[A,ct]=xt.useState(!1),[H,M]=xt.useState(!1),[P,K]=xt.useState(null);return _.jsxs("div",{className:"space-y-6",children:[_.jsxs("div",{className:"flex items-center justify-between",children:[_.jsx("h1",{className:"text-lg font-semibold text-slate-100",children:i}),_.jsx("span",{className:"text-xs text-slate-400",children:"Overview of this month's money flow"})]}),R.map(q=>{switch(q){case"monthOverview":return _.jsxs(Ci,{title:"MONTH OVERVIEW",children:[_.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 text-sm",children:[_.jsx(Eh,{label:"Income",value:L,accent:"text-emerald-300"}),_.jsx(Eh,{label:"Fixed",value:J,accent:"text-rose-300"}),_.jsx(Eh,{label:"Variable",value:et,accent:"text-amber-300"}),_.jsx(Eh,{label:"Leftover",value:dt,accent:"text-cyan-300"})]}),_.jsxs("div",{className:"mt-4",children:[_.jsx("p",{className:"text-xs text-slate-400 mb-1",children:"Allocation this month"}),_.jsx(Hg,{value:C})]})]},"monthOverview");case"accountSnapshot":return _.jsxs(Ci,{title:"ACCOUNT SNAPSHOT",children:[_.jsxs("div",{className:"flex items-center justify-between",children:[_.jsxs("div",{className:"flex flex-col",children:[_.jsx("span",{className:"text-[0.65rem] uppercase tracking-[0.18em] text-slate-500",children:"Current account"}),_.jsx("select",{className:"mt-1 bg-[#05060F] border border-slate-700 rounded-md px-2 py-1 text-[0.75rem] text-slate-100",value:p,onChange:it=>g(it.target.value),children:(m||[]).map(it=>_.jsx("option",{value:it.id,children:it.name},it.id))})]}),_.jsxs("div",{className:"text-right",children:[_.jsx("div",{className:"text-[0.65rem] uppercase tracking-[0.18em] text-slate-500",children:"Balance"}),_.jsxs("div",{className:"text-2xl font-semibold text-cyan-300",children:["$",rt.toFixed(2)]}),_.jsxs("div",{className:"text-[0.7rem] text-slate-500",children:["of $",O.toFixed(2)," total"]})]})]}),_.jsx("hr",{className:"my-3 border-slate-800"}),_.jsxs("div",{children:[_.jsx("div",{className:"text-[0.65rem] uppercase tracking-[0.2em] text-slate-500",children:"All accounts"}),_.jsxs("div",{className:"mt-1 text-xl font-semibold text-emerald-300",children:["$",O.toFixed(2)]}),_.jsx("p",{className:"mt-1 text-[0.7rem] text-slate-500",children:"Total estimated cash across all linked accounts."})]})]},"accountSnapshot");case"goals":return _.jsxs("div",{className:"space-y-3",children:[_.jsx("h2",{className:"text-xs tracking-[0.25em] text-slate-400 uppercase",children:"Goals"}),_.jsx("div",{className:"grid md:grid-cols-2 gap-3",children:(Array.isArray(u)?u:[]).map(it=>_.jsx(y1,{goal:it,onClick:null,onEdit:()=>v(it.id)},it.id))}),_.jsx("button",{type:"button",onClick:T,className:"mt-1 px-4 py-2 rounded-lg border border-cyan-400/70 text-xs text-cyan-200 bg-cyan-500/10 hover:bg-cyan-500/20 transition",children:"+ Add Goal"})]},"goals");case"csvImport":return _.jsxs(Ci,{title:"BANK STATEMENT IMPORT (CSV)",children:[_.jsx(CO,{onTransactionsParsed:async(it,D)=>{I(!1);const Q=DO(it,"amount"),ht=MO(it,"date"),mt=kO(ht),gt=(m||[]).find(Jt=>Jt.id===p)||null,St=[...it||[]].reverse().find(Jt=>typeof Jt?.balance=="number"&&Number.isFinite(Jt.balance));if(St){const Jt=Number(St.balance),Xt=Jt-Number(Q||0),ln=ht?.start?Mo(ht.start):"",bn=ht?.end?Mo(ht.end):"";await ot(it,{...D,accountId:p,statement:{startISO:ln,endISO:bn,statementKey:mt,transactionSum:Q,endingBalance:Jt,startingBalance:Xt,balanceSource:"csv"}});return}const Rt=gt&&Number.isFinite(Number(gt.lastConfirmedEndingBalance))?Number(gt.lastConfirmedEndingBalance):null;K({rows:it,raw:D,transactionSum:Q,range:ht,statementKey:mt,accountId:p,accountName:gt?.name||"",suggestedEndingBalance:Rt}),ct(!0)}}),j&&_.jsxs("div",{className:"mt-4 space-y-2",children:[_.jsxs("div",{className:"flex items-center justify-between",children:[_.jsx("h3",{className:"text-xs uppercase tracking-[0.18em] text-slate-400",children:"Current account transactions"}),_.jsx("button",{type:"button",className:"text-[0.7rem] px-2 py-1 rounded-md border border-slate-600 text-slate-200 hover:border-cyan-400 transition",onClick:()=>I(it=>!it),children:k?"Hide":"Show"})]}),k&&_.jsx("div",{className:"max-h-64 overflow-auto border border-slate-800 rounded-lg",children:_.jsxs("table",{className:"w-full text-xs text-left",children:[_.jsx("thead",{className:"bg-slate-900 text-slate-300",children:_.jsxs("tr",{children:[_.jsx("th",{className:"px-2 py-1",children:"Date"}),_.jsx("th",{className:"px-2 py-1",children:"Description"}),_.jsx("th",{className:"px-2 py-1",children:"Category"}),_.jsx("th",{className:"px-2 py-1 text-right",children:"Amount"})]})}),_.jsx("tbody",{className:"divide-y divide-slate-800",children:c.map((it,D)=>_.jsxs("tr",{className:"hover:bg-slate-900/70",children:[_.jsx("td",{className:"px-2 py-1 text-slate-300",children:it.date||"-"}),_.jsx("td",{className:"px-2 py-1 text-slate-200",children:it.description||"-"}),_.jsx("td",{className:"px-2 py-1 text-slate-300",children:it.category||"Other"}),_.jsx("td",{className:`px-2 py-1 text-right ${typeof it.amount=="number"&&it.amount<0?"text-rose-300":"text-emerald-300"}`,children:typeof it.amount!="number"||Number.isNaN(it.amount)?"-":`$${it.amount.toFixed(2)}`})]},D))})]})})]})]},"csvImport");default:return null}}),_.jsx(RO,{open:A,busy:H,accountName:P?.accountName||"",statementLabel:P?.range?.start&&P?.range?.end?`${P.range.start.toLocaleDateString()}  ${P.range.end.toLocaleDateString()}`:"",transactionSum:P?.transactionSum??0,suggestedEndingBalance:P?.suggestedEndingBalance??null,onClose:()=>{H||(ct(!1),K(null))},onConfirm:async({endingBalance:q,startingBalance:it})=>{if(P){M(!0);try{const D=P.range?.start?Mo(P.range.start):"",Q=P.range?.end?Mo(P.range.end):"";await ot(P.rows,{...P.raw,accountId:P.accountId,statement:{startISO:D,endISO:Q,statementKey:P.statementKey,transactionSum:P.transactionSum,endingBalance:q,startingBalance:it,balanceSource:"user"}}),ct(!1),K(null)}finally{M(!1)}}}})]})}function oE(i=[],t="amount"){return(Array.isArray(i)?i:[]).reduce((s,o)=>{const u=o?.[t],c=typeof u=="number"?u:Number(u);return s+(Number.isFinite(c)?c:0)},0)}function b1(i){return(Array.isArray(i?.transactions)?i.transactions:[]).reduce((e,s)=>e+(typeof s.amount=="number"?s.amount:0),0)}function va(i){return(Array.isArray(i)?i:[]).map(t=>({...t,startingBalance:typeof t.startingBalance=="number"?t.startingBalance:0,transactions:Array.isArray(t.transactions)?t.transactions:[],currentBalance:Number.isFinite(Number(t.currentBalance))?Number(t.currentBalance):null,currentBalanceAsOf:typeof t.currentBalanceAsOf=="string"?t.currentBalanceAsOf:"",lastStatementKey:typeof t.lastStatementKey=="string"?t.lastStatementKey:"",lastConfirmedEndingBalance:Number.isFinite(Number(t.lastConfirmedEndingBalance))?Number(t.lastConfirmedEndingBalance):null,statementBalances:t&&typeof t.statementBalances=="object"&&t.statementBalances!==null?t.statementBalances:{}}))}function LO(i){if(!i)return 0;const t=Number(i.currentBalance);if(Number.isFinite(t))return t;const e=typeof i.startingBalance=="number"?i.startingBalance:0,s=b1(i);return e+s}function E1(i,t){const e=m=>`${(m.date||"").trim()}|${(m.description||"").trim().toLowerCase()}|${Number.isFinite(Number(m.amount))?Number(m.amount):"NaN"}`,s=Array.isArray(i)?i:[],o=Array.isArray(t)?t:[],u=new Set(s.map(m=>e(m))),c=[...s];for(const m of o){const p=e(m);u.has(p)||(c.push(m),u.add(p))}return c}function lE(i=[]){const t=new Set;return(i||[]).forEach(e=>{const s=(e.description||"").trim().toLowerCase();s&&t.add(s)}),t}function PO(i=[]){if(!i.length)return"checking";let t=0,e=0;for(const o of i)typeof o.amount=="number"&&(o.amount<0?t++:o.amount>0&&e++);return t===0&&e===0?"checking":t/(t+e)>=.7?"credit":"checking"}function UO(i=[],t=""){const e=Bp(t);if(e)for(const m of zp){const p=(m.key||m.match||"").toLowerCase();if(p&&e.includes(p))return`${m.label} Account`}if(i.length){const m=i.slice(0,20).map(g=>g.description||"").join(" "),p=Bp(m);if(p)for(const g of zp){const v=(g.key||g.match||"").toLowerCase();if(v&&p.includes(v))return`${g.label} Account`}}if(!i.length)return"Imported Account";const s=(i[0].description||"").trim();if(!s)return"Imported Account";const o=s.split(/\s+/).filter(m=>m.length>3);if(!o.length)return"Imported Account";const c=o[0].replace(/[^a-z0-9]/gi," ").trim();return c?c.charAt(0).toUpperCase()+c.slice(1)+" Account":"Imported Account"}function zO(i=[],t,e=[]){const s=(i||[]).filter(p=>Array.isArray(p.transactions)&&p.transactions.length>0);if(!s.length)return null;const o=lE(e);if(!o.size)return t;let u=null,c=0;for(const p of s){const g=lE(p.transactions);if(!g.size)continue;let v=0;for(const T of o)g.has(T)&&v++;v>c&&(c=v,u=p.id)}const m=o.size>0?c/o.size:0;return u&&(c>=3||m>=.2)?u:null}function BO(i=[],t,e=[],s=""){const o=zO(i,t,e);if(o){const g=(i||[]).map(T=>T.id===o?{...T,transactions:E1(T.transactions||[],e)}:T),v=(i||[]).find(T=>T.id===o);return{targetAccountId:o,targetAccountName:v?.name||"Account",accounts:g,createdNew:!1}}const u=PO(e),c=UO(e,s),m=c.toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,"")+"-"+Date.now(),p={id:m,name:c,type:u,startingBalance:0,transactions:e,currentBalance:null,currentBalanceAsOf:"",lastStatementKey:"",lastConfirmedEndingBalance:null,statementBalances:{}};return{targetAccountId:m,targetAccountName:c,accounts:[...i||[],p],createdNew:!0}}function Jm(i){const t=Number(i);return Number.isFinite(t)?`$${t.toFixed(2)}`:"-"}function FO(i){if(!i)return"";const t=Date.parse(i);return Number.isFinite(t)?new Date(t).toLocaleDateString():""}function qO({accounts:i=[],currentAccountId:t,onChangeCurrentAccount:e=()=>{},onCreateAccount:s=()=>{},onDeleteAccount:o=()=>{},onSetAccountBalance:u=()=>{},onRenameAccount:c=()=>{}}){const m=Array.isArray(i)&&i.length>0,[p,g]=yt.useState([]),v=T=>{g(x=>x.includes(T)?x.filter(S=>S!==T):[...x,T])};return _.jsxs("div",{className:"space-y-4",children:[_.jsxs("header",{className:"flex items-center justify-between",children:[_.jsx("h1",{className:"text-lg font-semibold text-slate-100",children:"Accounts"}),_.jsx("button",{type:"button",onClick:s,className:"px-2 py-1 rounded-md bg-emerald-500 hover:bg-emerald-400 text-xs font-medium text-slate-900",children:"+ New account"})]}),_.jsxs(Ci,{title:"ALL ACCOUNTS",children:[!m&&_.jsx("p",{className:"text-xs text-slate-400",children:"No accounts yet. Create one to start tracking balances."}),m&&_.jsx("div",{className:"space-y-2",children:i.map(T=>{const x=Array.isArray(T.transactions)?T.transactions.length:0,S=b1(T),U=(typeof T.startingBalance=="number"?T.startingBalance:0)+S,F=Number.isFinite(Number(T.currentBalance)),Z=F?Number(T.currentBalance):U,ot=F?FO(T.currentBalanceAsOf):"",L=T.lastStatementKey||"",J=Number.isFinite(Number(T.lastConfirmedEndingBalance))?Number(T.lastConfirmedEndingBalance):null,dt=(L&&T.statementBalances&&typeof T.statementBalances=="object"&&T.statementBalances[L]||null)?.balanceSource||"",rt=Array.isArray(T.transactions)?T.transactions.slice().filter(R=>R&&typeof R=="object").sort((R,j)=>{const k=Date.parse(R.date),I=Date.parse(j.date),A=Number.isFinite(k),ct=Number.isFinite(I);return!A&&!ct?0:A?ct?I-k:-1:1}):[],O=rt.length>0,C=p.includes(T.id);return _.jsxs("div",{className:`space-y-2 rounded-md px-3 py-2 text-xs ${T.id===t?"bg-slate-800/70 border border-cyan-400/50":"bg-slate-900/60 border border-slate-700/70"}`,children:[_.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[_.jsxs("div",{className:"flex-1",children:[_.jsx("input",{className:"bg-transparent text-slate-100 font-medium text-xs w-full focus:outline-none",value:T.name,onChange:R=>c(T.id,R.target.value)}),_.jsxs("p",{className:"text-[11px] text-slate-400",children:["Type: ",T.type||"checking"]}),_.jsxs("p",{className:"text-[11px] text-slate-400",children:["Transactions:"," ",_.jsx("span",{className:"text-slate-200",children:x}),"  Net:"," ",_.jsx("span",{className:S>=0?"text-emerald-300":"text-rose-300",children:Jm(S)}),"  ","Current:"," ",_.jsx("span",{className:Z>=0?"text-emerald-300":"text-rose-300",children:Jm(Z)}),F?_.jsxs("span",{className:"text-slate-500",children:[" ","(confirmed",ot?` as of ${ot}`:"",")"]}):_.jsx("span",{className:"text-slate-500",children:" (computed)"})]}),F&&_.jsxs("p",{className:"text-[11px] text-slate-500",children:["Last statement:"," ",_.jsx("span",{className:"text-slate-300",children:L||""}),dt?_.jsxs("span",{className:"text-slate-500",children:[" "," source:"," ",_.jsx("span",{className:"text-slate-300",children:dt})]}):null,J!=null?_.jsxs("span",{className:"text-slate-500",children:[" "," ending:"," ",_.jsx("span",{className:"text-slate-300",children:Jm(J)})]}):null]})]}),_.jsxs("div",{className:"flex flex-col items-end gap-2",children:[_.jsxs("div",{className:"flex flex-col items-end",children:[_.jsx("label",{className:"text-[11px] text-slate-400",children:"Starting balance"}),_.jsx("input",{type:"number",className:"w-24 bg-slate-900/80 border border-slate-700 rounded px-1 py-0.5 text-right text-xs font-mono text-slate-100 focus:outline-none focus:ring-1 focus:ring-cyan-400",value:T.startingBalance??0,onChange:R=>u(T.id,parseFloat(R.target.value||"0"))})]}),F&&_.jsx("button",{type:"button",className:"px-2 py-0.5 rounded text-[11px] border border-slate-500 hover:border-cyan-400 text-slate-200",onClick:()=>u(T.id,Z),title:"Sets starting balance to the confirmed current balance",children:"Use current as starting"})]}),_.jsxs("div",{className:"flex flex-col items-end gap-1",children:[_.jsx("button",{type:"button",onClick:()=>{e(T.id),v(T.id)},className:"px-2 py-0.5 rounded text-[11px] border border-slate-500 hover:border-cyan-400",children:C?"Hide":"View"}),_.jsx("button",{type:"button",onClick:()=>o(T.id),className:"px-2 py-0.5 rounded text-[11px] text-red-300 hover:bg-red-500/10",children:"Delete"})]})]}),_.jsxs("div",{className:"border-t border-slate-800/70 pt-2",children:[!O&&_.jsx("p",{className:"mt-1 text-[0.65rem] text-slate-500",children:"No transactions imported yet."}),C&&O&&_.jsx("div",{className:"mt-2 max-h-72 overflow-auto rounded-md border border-slate-800/50",children:_.jsxs("table",{className:"w-full text-[0.7rem] text-left",children:[_.jsx("thead",{className:"bg-slate-900 text-slate-300 sticky top-0",children:_.jsxs("tr",{children:[_.jsx("th",{className:"px-2 py-1",children:"Date"}),_.jsx("th",{className:"px-2 py-1",children:"Description"}),_.jsx("th",{className:"px-2 py-1",children:"Category"}),_.jsx("th",{className:"px-2 py-1 text-right",children:"Amount"})]})}),_.jsx("tbody",{className:"divide-y divide-slate-800/70",children:rt.map((R,j)=>{const k=Number(R.amount),I=Number.isFinite(k)?`$${k.toFixed(2)}`:"-";return _.jsxs("tr",{children:[_.jsx("td",{className:"px-2 py-1 text-slate-300",children:R.date||"-"}),_.jsx("td",{className:"px-2 py-1 text-slate-200",children:R.description||"Transaction"}),_.jsx("td",{className:"px-2 py-1 text-slate-400",children:R.category||"Other"}),_.jsx("td",{className:`px-2 py-1 text-right ${k<0?"text-rose-300":"text-emerald-300"}`,children:I})]},R.id||`${T.id}-full-${j}`)})})]})})]})]},T.id)})})]})]})}function Wm(i){const t=new Date(i),e=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),o=String(t.getDate()).padStart(2,"0");return`${e}-${s}-${o}`}function No(i){const t=new Date(i);return t.setDate(1),t.setHours(0,0,0,0),t}function uE(i,t){const e=new Date(i);return e.setMonth(e.getMonth()+t),e}function HO(i){const t=new Date(i);return new Date(t.getFullYear(),t.getMonth()+1,0).getDate()}function GO(i){return new Date(i).getDay()}function cE(i,t){return i===t}function $O(i){const t=Number(i);return Number.isFinite(t)?Math.abs(t)>=1e3?`$${(t/1e3).toFixed(1)}k`:`$${t.toFixed(0)}`:"$0"}function YO({items:i,bills:t,selectedDateISO:e,onSelectDate:s=()=>{},initialMonthISO:o,badgeMode:u="auto"}){const c=Array.isArray(i)?i:Array.isArray(t)?t:[],[m,p]=xt.useState(()=>{const L=e&&new Date(e)||(o?new Date(o):new Date);return No(L)});xt.useEffect(()=>{if(!e)return;const L=new Date(e);Number.isNaN(L.getTime())||(L.getFullYear()!==m.getFullYear()||L.getMonth()!==m.getMonth())&&p(No(L))},[e]);const g=Wm(new Date),v=No(m),T=HO(v),x=GO(v),S=xt.useMemo(()=>{const L=new Map;for(const J of c){if(!J?.dueDate)continue;const et=J.dueDate,dt=L.get(et)||{count:0,sum:0,hasAmount:!1},rt=Number(J?.amount),O=Number.isFinite(rt);L.set(et,{count:dt.count+1,sum:dt.sum+(O?rt:0),hasAmount:dt.hasAmount||O})}return L},[c]),U=[];for(let L=0;L<x;L++)U.push(null);for(let L=1;L<=T;L++)U.push(L);const F=v.toLocaleString(void 0,{month:"long",year:"numeric"});function Z(L){const J=new Date(v);return J.setDate(L),Wm(J)}function ot(){const L=new Date;p(No(L)),s(Wm(L))}return _.jsxs("div",{className:"rounded-2xl border border-slate-700/70 bg-[#05060F] p-4",children:[_.jsxs("div",{className:"flex items-center justify-between gap-2",children:[_.jsx("button",{className:"rounded-xl border border-slate-700/70 px-3 py-1 text-xs text-slate-200 hover:border-cyan-400/60 transition",onClick:()=>p(L=>No(uE(L,-1))),type:"button","aria-label":"Previous month",children:""}),_.jsxs("div",{className:"flex flex-col items-center",children:[_.jsx("div",{className:"text-sm font-semibold text-slate-100",children:F}),_.jsx("button",{type:"button",onClick:ot,className:"mt-1 text-[0.65rem] text-slate-400 hover:text-cyan-200 transition",children:"Today"})]}),_.jsx("button",{className:"rounded-xl border border-slate-700/70 px-3 py-1 text-xs text-slate-200 hover:border-cyan-400/60 transition",onClick:()=>p(L=>No(uE(L,1))),type:"button","aria-label":"Next month",children:""})]}),_.jsx("div",{className:"mt-3 grid grid-cols-7 gap-2 text-center text-[11px] text-slate-400",children:["S","M","T","W","T","F","S"].map(L=>_.jsx("div",{className:"h-9 flex items-center justify-center",children:L},L))}),_.jsx("div",{className:"mt-2 grid grid-cols-7 gap-2",children:U.map((L,J)=>{if(!L)return _.jsx("div",{className:"h-9 rounded-lg"},J);const et=Z(L),dt=S.get(et)||{count:0,sum:0,hasAmount:!1},rt=e&&cE(et,e),O=cE(et,g),R=u==="sum"||u==="auto"&&dt.hasAmount?$O(dt.sum):String(dt.count),j=dt.count>0?dt.hasAmount?`${dt.count} due  $${Number(dt.sum).toFixed(2)}`:`${dt.count} due`:"";return _.jsxs("button",{type:"button",onClick:()=>s(et),className:["relative h-9 rounded-xl border text-xs transition","border-slate-700/70 bg-black/20 text-slate-100 hover:border-cyan-400/60","flex items-center justify-center",rt?"border-cyan-400/70 bg-cyan-500/10":"",O?"ring-1 ring-slate-400/40":""].join(" "),title:j,children:[_.jsx("span",{className:"text-xs font-semibold",children:L}),dt.count>0&&_.jsx("span",{className:"badge-chip absolute right-2 bottom-2 rounded-full border px-1.5 py-0.5 text-[10px]",children:R})]},J)})})]})}function hE(){const i=new Date,t=i.getFullYear(),e=String(i.getMonth()+1).padStart(2,"0"),s=String(i.getDate()).padStart(2,"0");return`${t}-${e}-${s}`}function KO(i){return typeof i=="string"&&/^\d{4}-\d{2}-\d{2}$/.test(i)}function T1({open:i,title:t="Add Transaction",initial:e={},accounts:s=[],defaultAccountId:o="main",onClose:u=()=>{},onSave:c=()=>{},allowRecurring:m=!1,onCreateRecurring:p=()=>{}}){const[g,v]=xt.useState(""),[T,x]=xt.useState(""),[S,U]=xt.useState(hE()),[F,Z]=xt.useState(""),[ot,L]=xt.useState(o),[J,et]=xt.useState(!1),[dt,rt]=xt.useState("monthly");if(xt.useEffect(()=>{i&&(v(String(e.description||"")),x(e.amount===0||typeof e.amount=="number"?String(e.amount):String(e.amount||"")),U(String(e.date||hE())),Z(String(e.category||"")),L(String(e.accountId||o)),et(!1),rt("monthly"))},[i,e,o]),!i)return null;function O(){const R=g.trim();if(!R)return window.alert("Please enter a description.");const j=Number(T);if(!Number.isFinite(j))return window.alert("Please enter a valid number for amount.");if(!KO(S))return window.alert("Use YYYY-MM-DD format for dates.");const k={description:R,amount:j,date:S,category:F.trim(),accountId:ot||o||"main"};if(c(k),m&&J){const A=["once","weekly","biweekly","monthly","yearly"].includes(dt)?dt:"monthly",ct=S.match(/^\d{4}-\d{2}-(\d{2})$/),H=ct?Number(ct[1]):void 0;p({label:k.description||"Transaction",amount:j,kind:j>=0?"income":"expense",source:"transaction",startDate:S,cadence:A,dayOfMonth:H,accountId:k.accountId,category:k.category||void 0})}u()}const C=Array.isArray(s)&&s.length>0;return _.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4",children:[_.jsx("div",{className:"absolute inset-0 bg-black/70",onClick:u,role:"button","aria-label":"Close modal",tabIndex:-1}),_.jsxs("div",{className:"relative w-full max-w-lg rounded-2xl border border-slate-700/70 bg-[#05060F] p-4 shadow-xl",children:[_.jsxs("div",{className:"flex items-center justify-between",children:[_.jsx("div",{className:"text-sm font-semibold text-slate-100",children:t}),_.jsx("button",{type:"button",onClick:u,className:"text-slate-400 hover:text-rose-300 transition","aria-label":"Close",children:""})]}),_.jsxs("div",{className:"mt-3 grid gap-3",children:[_.jsxs("div",{children:[_.jsx("label",{className:"text-[0.65rem] uppercase tracking-[0.18em] text-slate-500",children:"Description"}),_.jsx("input",{value:g,onChange:R=>v(R.target.value),className:"mt-1 h-9 w-full rounded-md bg-slate-900/70 px-3 text-[0.8rem] text-slate-100 outline-none ring-1 ring-slate-700 focus:ring-2 focus:ring-cyan-500",placeholder:"Walmart, Rent, Paycheck..."})]}),_.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[_.jsxs("div",{children:[_.jsx("label",{className:"text-[0.65rem] uppercase tracking-[0.18em] text-slate-500",children:"Amount"}),_.jsx("input",{value:T,onChange:R=>x(R.target.value),inputMode:"decimal",className:"mt-1 h-9 w-full rounded-md bg-slate-900/70 px-3 text-[0.8rem] text-slate-100 outline-none ring-1 ring-slate-700 focus:ring-2 focus:ring-cyan-500",placeholder:"-45.21 or 1200"}),_.jsx("div",{className:"mt-1 text-[0.65rem] text-slate-500",children:"Negative = expense, positive = income"})]}),_.jsxs("div",{children:[_.jsx("label",{className:"text-[0.65rem] uppercase tracking-[0.18em] text-slate-500",children:"Date"}),_.jsx("input",{value:S,onChange:R=>U(R.target.value),className:"mt-1 h-9 w-full rounded-md bg-slate-900/70 px-3 text-[0.8rem] text-slate-100 outline-none ring-1 ring-slate-700 focus:ring-2 focus:ring-cyan-500",placeholder:"YYYY-MM-DD"})]})]}),_.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[_.jsxs("div",{children:[_.jsx("label",{className:"text-[0.65rem] uppercase tracking-[0.18em] text-slate-500",children:"Category (optional)"}),_.jsx("input",{value:F,onChange:R=>Z(R.target.value),className:"mt-1 h-9 w-full rounded-md bg-slate-900/70 px-3 text-[0.8rem] text-slate-100 outline-none ring-1 ring-slate-700 focus:ring-2 focus:ring-cyan-500",placeholder:"Groceries, Rent..."})]}),_.jsxs("div",{children:[_.jsx("label",{className:"text-[0.65rem] uppercase tracking-[0.18em] text-slate-500",children:"Account"}),C?_.jsx("select",{value:ot,onChange:R=>L(R.target.value),className:"mt-1 h-9 w-full rounded-md bg-slate-900/70 px-2 text-[0.8rem] text-slate-100 outline-none ring-1 ring-slate-700 focus:ring-2 focus:ring-cyan-500",children:s.map(R=>_.jsx("option",{value:R.id,children:R.name||R.id},R.id))}):_.jsx("input",{value:ot,onChange:R=>L(R.target.value),className:"mt-1 h-9 w-full rounded-md bg-slate-900/70 px-3 text-[0.8rem] text-slate-100 outline-none ring-1 ring-slate-700 focus:ring-2 focus:ring-cyan-500",placeholder:"main"})]})]}),m&&_.jsxs("div",{className:"rounded-xl border border-slate-700/60 bg-black/20 p-3",children:[_.jsxs("label",{className:"flex items-center gap-2 text-xs text-slate-200",children:[_.jsx("input",{type:"checkbox",checked:J,onChange:R=>et(R.target.checked)}),"Add to calendar as repeating due item"]}),J&&_.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[_.jsx("span",{className:"text-[0.65rem] uppercase tracking-[0.18em] text-slate-500",children:"Cadence"}),_.jsxs("select",{value:dt,onChange:R=>rt(R.target.value),className:"h-8 rounded-md bg-slate-900/70 px-2 text-[0.75rem] text-slate-100 outline-none ring-1 ring-slate-700 focus:ring-2 focus:ring-cyan-500",children:[_.jsx("option",{value:"once",children:"Once"}),_.jsx("option",{value:"weekly",children:"Weekly"}),_.jsx("option",{value:"biweekly",children:"Biweekly"}),_.jsx("option",{value:"monthly",children:"Monthly"}),_.jsx("option",{value:"yearly",children:"Yearly"})]})]})]}),_.jsxs("div",{className:"mt-1 flex items-center justify-end gap-2",children:[_.jsx("button",{type:"button",onClick:u,className:"h-9 px-3 rounded-md border border-slate-600 text-slate-200 hover:border-cyan-400 hover:text-cyan-200 transition",children:"Cancel"}),_.jsx("button",{type:"button",onClick:O,className:"h-9 px-3 rounded-md border border-cyan-500/60 text-cyan-200 hover:bg-cyan-500/10 transition",children:"Save"})]})]})]})]})}const tp=1440*60*1e3;function QO(i){if(!i||typeof i!="string")return null;const t=i.match(/^(\d{4})-(\d{2})-(\d{2})$/);if(!t)return null;const e=Number(t[1]),s=Number(t[2])-1,o=Number(t[3]),u=new Date(e,s,o);return Number.isNaN(u.getTime())?null:(u.setHours(0,0,0,0),u)}function XO(i){const t=new Date(i),e=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),o=String(t.getDate()).padStart(2,"0");return`${e}-${s}-${o}`}function x1(i,t){return new Date(i,t+1,0).getDate()}function fE(i,t,e){const s=x1(i,t);return Math.min(Math.max(1,e),s)}function ep(i,t){return`${i}|${t}`}function ZO(i=[],t){const e=Array.isArray(i)?i:[],s=(()=>{if(t instanceof Date){const x=t.getFullYear(),S=String(t.getMonth()+1).padStart(2,"0");return`${x}-${S}`}if(typeof t=="string"){const S=t.slice(0,10).match(/^(\d{4})-(\d{2})/);if(S)return`${S[1]}-${S[2]}`}return null})(),o=s?s.match(/^(\d{4})-(\d{2})$/):null;if(!o)return[];const u=Number(o[1]),c=Number(o[2])-1,m=new Date(u,c,1);m.setHours(0,0,0,0);const p=new Date(u,c,x1(u,c));p.setHours(0,0,0,0);const g=u*12+c,v=[],T=(x,S)=>{const U=XO(S);v.push({templateId:x.id,dueDate:U,label:x.label||"Due item",amount:Number.isFinite(Number(x.amount))?Number(x.amount):0,kind:x.kind||"expense",source:x.source||"transaction"})};for(const x of e){if(!x||!x.id||!x.startDate)continue;const S=QO(x.startDate);if(!S)continue;const U=String(x.cadence||"once").toLowerCase(),F=Number.isFinite(Number(x.dayOfMonth))?Number(x.dayOfMonth):S.getDate(),Z=S.getFullYear()*12+S.getMonth();if(U==="once"){S>=m&&S<=p&&T(x,S);continue}if(U==="weekly"||U==="biweekly"){const ot=U==="weekly"?7:14;let L=new Date(S);if(L<m){const J=Math.ceil((m-L)/tp),et=Math.max(0,Math.ceil(J/ot));L=new Date(L.getTime()+et*ot*tp)}for(;L<=p;)L>=S&&T(x,L),L=new Date(L.getTime()+ot*tp);continue}if(U==="monthly"){if(g<Z)continue;const ot=fE(u,c,F),L=new Date(u,c,ot);if(g===Z&&L<S)continue;T(x,L);continue}if(U==="yearly"){if(S.getMonth()!==c||u<S.getFullYear())continue;const ot=fE(u,c,F),L=new Date(u,c,ot);if(u===S.getFullYear()&&L<S)continue;T(x,L);continue}S>=m&&S<=p&&T(x,S)}return v}function dE(){const i=new Date,t=i.getFullYear(),e=String(i.getMonth()+1).padStart(2,"0"),s=String(i.getDate()).padStart(2,"0");return`${t}-${e}-${s}`}function Th(i){if(!i||typeof i!="string")return null;const t=i.match(/^(\d{4})-(\d{2})-(\d{2})$/);if(!t)return null;const e=Number(t[1]),s=Number(t[2])-1,o=Number(t[3]),u=new Date(e,s,o);return u.setHours(0,0,0,0),u}function JO(i){const t=new Date(i),e=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),o=String(t.getDate()).padStart(2,"0");return`${e}-${s}-${o}`}function WO(i,t){const e=new Date(i);return e.setDate(e.getDate()+t),e}function Lh(i){const t=Number(i);return Number.isFinite(t)?t:0}function eu(i){return Array.isArray(i)?i:[]}function tM({month:i,budget:t,totals:e={},onBudgetChange:s,scheduledTemplates:o=[],scheduleChecks:u={},onScheduledTemplatesChange:c=()=>{},onScheduleChecksChange:m=()=>{},accounts:p=[],currentAccountId:g="main",onAddTransaction:v=()=>{}}){Number(e?.fixed??e?.fixedTotal??0),Number(e?.variable??e?.variableTotal??0);const T=Number(t?.income??0);eu(t?.fixed),eu(t?.variable);const[x,S]=xt.useState(()=>dE()),[U,F]=xt.useState(()=>T.toFixed(2));xt.useEffect(()=>{F(Number(T).toFixed(2))},[T]);function Z(M){const P=Number(M);Number.isFinite(P)&&s({...t,income:P})}const ot=xt.useMemo(()=>typeof i=="string"?i.slice(0,7):i,[i]),L=xt.useMemo(()=>ZO(o,ot),[o,ot]),J=xt.useMemo(()=>{const M={};for(const P of eu(o))P?.id&&(M[P.id]=P);return M},[o]),dt=xt.useMemo(()=>{const M=new Map;for(const P of L){const K=P?.dueDate;if(!K)continue;const q=M.get(K)||[];q.push(P),M.set(K,q)}return M},[L]).get(x)||[],rt=xt.useMemo(()=>Th(dE()),[]),O=xt.useMemo(()=>rt?JO(rt):"",[rt]),C=xt.useMemo(()=>rt?WO(rt,7):null,[rt]),R=xt.useMemo(()=>{const P=L.map(D=>{const Q=Th(D?.dueDate);return{...D,_due:Q,paid:!!u[ep(D.templateId,D.dueDate)]?.paid,cadence:J[D.templateId]?.cadence||"once"}}).filter(D=>D._due).filter(D=>!D.paid),K=P.filter(D=>rt&&D._due<rt).sort((D,Q)=>D._due-Q._due),q=P.filter(D=>D.dueDate===O).sort((D,Q)=>Lh(Q.amount)-Lh(D.amount)),it=P.filter(D=>C&&rt&&D._due>rt&&D._due<=C).sort((D,Q)=>D._due-Q._due);return{overdue:K,dueToday:q,upcoming:it}},[L,u,J,rt,O,C]);function j(M){if(!M?.templateId||!M?.dueDate)return;const P=ep(M.templateId,M.dueDate),K=!!u[P]?.paid;m({...u||{},[P]:{paid:!K}})}function k(M){if(!M||!window.confirm("Delete this repeating due item?"))return;const K=eu(o).filter(D=>D.id!==M);c(K);const it=Object.entries(u||{}).filter(([D])=>!D.startsWith(`${M}|`));m(Object.fromEntries(it))}const[I,A]=xt.useState(!1);function ct(M){v(M)}function H(M){const P={id:`sched-${Date.now()}`,...M};c([...eu(o),P])}return _.jsxs("div",{className:"space-y-6",children:[_.jsxs("div",{className:"flex items-center justify-between",children:[_.jsxs("h1",{className:"text-lg font-semibold text-slate-100",children:[i," Budget"]}),_.jsx("span",{className:"text-xs text-slate-400",children:"Income + Expenses + Goals"})]}),_.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[_.jsxs(Ci,{title:"INCOME",children:[_.jsx("div",{className:"text-[0.7rem] text-slate-400",children:"Total take-home income for the active month."}),_.jsxs("div",{className:"mt-2 flex items-end gap-2",children:[_.jsx("div",{className:"text-3xl font-semibold text-emerald-300",children:"$"}),_.jsx("input",{value:U,onChange:M=>F(M.target.value),onBlur:()=>Z(U),inputMode:"decimal",className:"w-44 bg-black/20 border border-slate-700 rounded-md px-3 py-2 text-slate-100 text-xl outline-none focus:border-cyan-400/60"}),_.jsx("button",{className:"h-10 px-3 text-xs rounded-md border border-emerald-400/70 text-emerald-200 bg-emerald-500/10 hover:bg-emerald-500/20 transition",onClick:()=>Z(U),type:"button",children:"Save"})]})]}),_.jsxs(Ci,{title:"MONTHLY DUE DATES",children:[_.jsxs("div",{className:"grid gap-3 md:grid-cols-2",children:[_.jsx(YO,{items:L,selectedDateISO:x,onSelectDate:S,initialMonthISO:x,badgeMode:"auto"}),_.jsxs("div",{className:"space-y-3",children:[_.jsx(np,{title:"OVERDUE",subtitle:"Due before today",emptyText:"No overdue items ",items:R.overdue,tone:"rose",templateLookup:J,onJump:M=>S(M),onTogglePaid:j,onDelete:M=>k(M.templateId)}),_.jsx(np,{title:"DUE TODAY",subtitle:O,emptyText:"Nothing due today.",items:R.dueToday,tone:"amber",templateLookup:J,onJump:M=>S(M),onTogglePaid:j,onDelete:M=>k(M.templateId)}),_.jsx(np,{title:"UPCOMING",subtitle:"Next 7 days",emptyText:"No upcoming items.",items:R.upcoming,tone:"cyan",templateLookup:J,onJump:M=>S(M),onTogglePaid:j,onDelete:M=>k(M.templateId)})]})]}),_.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[_.jsxs("div",{className:"text-xs text-slate-400",children:["Due on ",_.jsx("span",{className:"text-slate-200",children:x})]}),_.jsx("button",{type:"button",className:"h-8 px-3 rounded-md border border-cyan-500/60 text-[0.7rem] font-medium text-cyan-200 hover:bg-cyan-500/10",onClick:()=>A(!0),children:"+ Add Transaction"})]}),_.jsx("div",{className:"mt-2 space-y-2 text-sm",children:dt.length===0?_.jsx("p",{className:"text-xs text-slate-500",children:"No items due that day."}):dt.map(M=>{const P=Lh(M?.amount),K=!!u[ep(M.templateId,M.dueDate)]?.paid,q=!K&&!!rt&&Th(M.dueDate)&&Th(M.dueDate)<rt,it=J[M.templateId]?.cadence||"once";return _.jsxs("div",{className:["flex items-center justify-between gap-2 rounded-md border bg-black/20 px-3 py-2",q?"border-rose-400/60":"border-slate-700/70"].join(" "),children:[_.jsxs("div",{className:"flex-1",children:[_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx("span",{className:"text-slate-200",children:M.label}),_.jsxs("span",{className:"text-slate-400",children:["$",P.toFixed(2)]}),q&&_.jsx("span",{className:"text-[0.65rem] rounded-full border border-rose-400/60 px-2 py-0.5 text-rose-200 bg-rose-500/10",children:"overdue"})]}),_.jsxs("div",{className:"text-[0.7rem] text-slate-500",children:[it,"  ",K?"paid":"unpaid"]})]}),_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx("button",{className:"px-2 py-1 text-[0.7rem] rounded-md border border-slate-600/70 text-slate-200 hover:border-cyan-400/60",onClick:()=>j(M),type:"button",children:K?"Unpay":"Paid"}),_.jsx("button",{className:"text-[0.75rem] text-slate-500 hover:text-rose-400",onClick:()=>k(M.templateId),type:"button","aria-label":"Delete due item",children:""})]})]},`${M.templateId}-${M.dueDate}`)})})]})]}),_.jsx(T1,{open:I,title:`Add Transaction (${x})`,accounts:p,defaultAccountId:g||"main",initial:{date:x,accountId:g||"main"},allowRecurring:!0,onCreateRecurring:H,onSave:ct,onClose:()=>A(!1)})]})}function np({title:i,subtitle:t,items:e=[],emptyText:s,tone:o="cyan",templateLookup:u={},onJump:c=()=>{},onTogglePaid:m=()=>{},onDelete:p=()=>{}}){const g={rose:"border-rose-400/30 text-rose-200 bg-rose-500/5",amber:"border-amber-400/30 text-amber-200 bg-amber-500/5",cyan:"border-cyan-400/30 text-cyan-200 bg-cyan-500/5"};return _.jsxs("div",{className:`rounded-md border ${g[o]||g.cyan} p-3`,children:[_.jsxs("div",{className:"flex items-baseline justify-between",children:[_.jsx("div",{className:"text-[0.7rem] tracking-[0.18em] uppercase",children:i}),_.jsx("div",{className:"text-[0.7rem] text-slate-400",children:t})]}),_.jsxs("div",{className:"mt-2 space-y-2",children:[e.length===0?_.jsx("div",{className:"text-xs text-slate-500",children:s}):e.slice(0,5).map(v=>{const T=Lh(v?.amount),x=u[v.templateId]?.cadence||"once";return _.jsxs("div",{className:"flex items-center justify-between gap-2 rounded-md border border-slate-700/60 bg-black/20 px-2 py-2",children:[_.jsxs("button",{type:"button",className:"flex-1 text-left",onClick:()=>c(v.dueDate),title:"Jump to this day",children:[_.jsxs("div",{className:"text-xs text-slate-200 leading-4",children:[v.label,_.jsxs("span",{className:"text-slate-400",children:["  $",T.toFixed(2)]})]}),_.jsxs("div",{className:"text-[0.7rem] text-slate-500",children:[v.dueDate,"  ",x]})]}),_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx("button",{type:"button",className:"px-2 py-1 text-[0.7rem] rounded-md border border-slate-600/70 text-slate-200 hover:border-cyan-400/60",onClick:()=>m(v),children:"Paid"}),_.jsx("button",{type:"button",className:"text-[0.75rem] text-slate-500 hover:text-rose-400",onClick:()=>p(v),"aria-label":"Delete due item",children:""})]})]},`${v.templateId}-${v.dueDate}`)}),e.length>5&&_.jsxs("div",{className:"text-[0.7rem] text-slate-500",children:["+",e.length-5," more"]})]})]})}const eM=[{value:"auto",label:"Auto (detect)"},{value:"income",label:"Income"},{value:"expense",label:"Expense"},{value:"transfer",label:"Transfer"},{value:"ignore",label:"Ignore"}],nM={income:"Income",expense:"Expense",transfer:"Transfer",ignore:"Ignored",unknown:"Unknown"};function iM(){const i=new Date,t=i.getFullYear(),e=String(i.getMonth()+1).padStart(2,"0"),s=String(i.getDate()).padStart(2,"0");return`${t}-${e}-${s}`}function rM(i){const{transactions:t=[],accountName:e="",accounts:s=[],currentAccountId:o="main",onAddTransaction:u=()=>{},onUpdateTransaction:c=()=>{},onDeleteTransaction:m=()=>{},typeHints:p=[],scheduledTemplates:g=[],onScheduledTemplatesChange:v=()=>{},filter:T,onFilterChange:x,filterText:S,onChangeFilterText:U}=i,F=Array.isArray(s)&&s.length>0?s.find(q=>q.id===o):null,Z=e||F?.name||"",ot=(S??T??"").toString(),L=U??x??(()=>{}),J=Array.isArray(t)&&t.length>0,[et,dt]=yt.useState({query:"",minAmount:"",maxAmount:""}),[rt,O]=yt.useState("date"),[C,R]=yt.useState("desc"),[j,k]=yt.useState(!1);yt.useEffect(()=>{const q=(ot||"").trim();q&&dt(it=>({...it,query:q}))},[ot]);const I=q=>it=>{const D=it.target.value;dt(Q=>({...Q,[q]:D})),q==="query"&&L(D)},A=()=>{dt({query:"",minAmount:"",maxAmount:""}),L("")},ct=et.query||et.minAmount||et.maxAmount,H=()=>{R(q=>q==="asc"?"desc":"asc")},M=yt.useMemo(()=>J?[...t.map((Q,ht)=>({tx:Q,index:ht})).filter(({tx:Q})=>{const ht=et.query.trim().toLowerCase(),mt=Number(Q.amount);if(ht&&![Q.description||"",Q.category||""].join(" ").toLowerCase().includes(ht))return!1;if(et.minAmount!==""){const gt=Number(et.minAmount);if(!Number.isNaN(gt)&&!Number.isNaN(mt)&&mt<gt)return!1}if(et.maxAmount!==""){const gt=Number(et.maxAmount);if(!Number.isNaN(gt)&&!Number.isNaN(mt)&&mt>gt)return!1}return!0})].sort((Q,ht)=>{const mt=Q.tx,gt=ht.tx,St=C==="asc"?1:-1;if(rt==="amount"){const Xt=Number(mt.amount)||0,ln=Number(gt.amount)||0;return(Xt-ln)*St}if(rt==="description"||rt==="category"){const Xt=(mt[rt]||"").toLowerCase(),ln=(gt[rt]||"").toLowerCase();return Xt.localeCompare(ln)*St}const Rt=Date.parse(mt.date)||0,Jt=Date.parse(gt.date)||0;return(Rt-Jt)*St}):[],[t,et,rt,C,J]);function P(q){u({...q,accountId:q.accountId||o||"main"})}function K(q){const it={id:`sched-${Date.now()}`,...q},D=Array.isArray(g)?g:[];v([...D,it])}return _.jsxs("div",{className:"space-y-4 w-full",children:[_.jsxs("header",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2",children:[_.jsxs("div",{children:[_.jsx("h1",{className:"text-lg font-semibold text-slate-100",children:"Transactions"}),_.jsx("span",{className:"text-xs text-slate-400",children:"Imported + manual entries"}),_.jsxs("p",{className:"text-[0.65rem] text-slate-500",children:["Currently viewing:"," ",_.jsx("span",{className:"font-semibold text-cyan-200",children:Z||"None"})]}),!!ot.trim()&&_.jsxs("div",{className:"mt-2 inline-flex items-center gap-2 rounded-lg border border-cyan-500/40 bg-cyan-500/10 px-2 py-1 text-[0.65rem] text-cyan-200",children:[_.jsx("span",{className:"font-mono",children:"Report filter:"}),_.jsx("span",{className:"text-slate-100",children:ot}),_.jsx("button",{type:"button",onClick:A,className:"ml-1 rounded border border-cyan-500/40 px-2 py-[2px] text-[0.65rem] hover:bg-cyan-500/10",children:"Clear"})]})]}),J&&_.jsxs("span",{className:"text-[0.65rem] text-slate-500",children:["Showing ",M.length," of ",t.length]})]}),_.jsxs(Ci,{title:"ALL TRANSACTIONS",children:[_.jsx("div",{className:"mb-3 flex justify-end",children:_.jsx("button",{type:"button",onClick:()=>k(!0),className:"h-8 px-3 rounded-md border border-cyan-500/60 text-[0.7rem] font-medium text-cyan-200 hover:bg-cyan-500/10",children:"+ Add Transaction"})}),!J&&_.jsx("p",{className:"text-xs text-slate-400",children:"No transactions yet. Import a CSV on the Dashboard or add one manually."}),J&&_.jsxs(_.Fragment,{children:[_.jsxs("div",{className:"mb-3 flex flex-col gap-3 md:flex-row md:items-end md:justify-between",children:[_.jsxs("div",{className:"flex flex-col gap-1 w-full md:w-auto",children:[_.jsx("label",{className:"text-[0.65rem] uppercase tracking-[0.18em] text-slate-500",children:"Search"}),_.jsx("input",{type:"text",value:et.query,onChange:I("query"),placeholder:"Search description or category...",className:"h-8 w-full md:w-64 rounded-md bg-slate-900/70 px-2 text-[0.7rem] text-slate-100 outline-none ring-1 ring-slate-700 focus:ring-2 focus:ring-cyan-500"})]}),_.jsxs("div",{className:"flex flex-col gap-2 md:flex-row md:items-end md:justify-end",children:[_.jsxs("div",{className:"flex gap-2",children:[_.jsxs("div",{className:"flex flex-col gap-1",children:[_.jsx("label",{className:"text-[0.65rem] uppercase tracking-[0.18em] text-slate-500",children:"Min"}),_.jsx("input",{type:"number",value:et.minAmount,onChange:I("minAmount"),className:"h-8 w-24 rounded-md bg-slate-900/70 px-2 text-[0.7rem] text-slate-100 outline-none ring-1 ring-slate-700 focus:ring-2 focus:ring-cyan-500"})]}),_.jsxs("div",{className:"flex flex-col gap-1",children:[_.jsx("label",{className:"text-[0.65rem] uppercase tracking-[0.18em] text-slate-500",children:"Max"}),_.jsx("input",{type:"number",value:et.maxAmount,onChange:I("maxAmount"),className:"h-8 w-24 rounded-md bg-slate-900/70 px-2 text-[0.7rem] text-slate-100 outline-none ring-1 ring-slate-700 focus:ring-2 focus:ring-cyan-500"})]})]}),_.jsx("button",{type:"button",onClick:A,disabled:!ct,className:"h-8 px-3 rounded-md border text-[0.7rem] font-medium transition border-slate-600 text-slate-200 hover:border-cyan-400 hover:text-cyan-200 disabled:opacity-40 disabled:cursor-not-allowed",children:"Clear filters"})]})]}),_.jsx("div",{className:"mb-3 flex flex-col sm:flex-row sm:items-center sm:justify-end gap-2 text-[0.7rem]",children:_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx("span",{className:"uppercase tracking-[0.18em] text-slate-500",children:"Sort by"}),_.jsxs("select",{value:rt,onChange:q=>O(q.target.value),className:"h-8 rounded-md bg-slate-900/70 px-2 text-[0.7rem] text-slate-100 outline-none ring-1 ring-slate-700 focus:ring-2 focus:ring-cyan-500",children:[_.jsx("option",{value:"date",children:"Date"}),_.jsx("option",{value:"amount",children:"Amount"}),_.jsx("option",{value:"description",children:"Description"}),_.jsx("option",{value:"category",children:"Category"})]}),_.jsx("button",{type:"button",onClick:H,className:"h-8 px-3 rounded-md border border-slate-600 text-slate-200 hover:border-cyan-400 hover:text-cyan-200 transition",children:C==="asc"?"Asc ":"Desc "})]})})]}),J&&M.length===0&&_.jsx("p",{className:"text-xs text-slate-400",children:"No transactions match your current filters."}),J&&M.length>0&&_.jsx("div",{className:"hScroll",children:_.jsx("div",{className:"min-w-[640px] max-h-[65vh] overflow-y-auto border border-slate-800 rounded-lg",children:_.jsxs("table",{className:"w-full text-[0.7rem] sm:text-xs text-left",children:[_.jsx("thead",{className:"bg-slate-900 text-slate-300 sticky top-0",children:_.jsxs("tr",{children:[_.jsx("th",{className:"px-2 py-1",children:"Date"}),_.jsx("th",{className:"px-2 py-1",children:"Description"}),_.jsx("th",{className:"px-2 py-1 hidden sm:table-cell",children:"Category"}),_.jsx("th",{className:"px-2 py-1 hidden sm:table-cell",children:"Type"}),_.jsx("th",{className:"px-2 py-1 text-right",children:"Amount"}),_.jsx("th",{className:"px-2 py-1 text-right",children:"Actions"})]})}),_.jsx("tbody",{className:"divide-y divide-slate-800",children:M.map(({tx:q,index:it})=>_.jsxs("tr",{className:"hover:bg-slate-900/70",children:[_.jsx("td",{className:"px-2 py-1 text-slate-300 whitespace-nowrap",children:q.date||"-"}),_.jsxs("td",{className:"px-2 py-1 text-slate-200",children:[_.jsx("input",{className:"w-full bg-transparent border-b border-slate-700 focus:outline-none focus:border-cyan-400 text-[0.7rem] sm:text-xs",value:q.description||"",onChange:D=>c(it,{description:D.target.value})}),_.jsx("div",{className:"sm:hidden mt-1 text-[0.65rem] text-slate-500",children:(q.category||"").trim()?q.category:"Uncategorized"})]}),_.jsx("td",{className:"px-2 py-1 text-slate-300 hidden sm:table-cell",children:_.jsx("input",{className:"w-full bg-transparent border-b border-slate-700 focus:outline-none focus:border-cyan-400 text-[0.7rem] sm:text-xs",value:q.category||"",onChange:D=>c(it,{category:D.target.value})})}),_.jsx("td",{className:"px-2 py-1 text-slate-300 hidden sm:table-cell",children:_.jsxs("div",{className:"flex flex-col gap-1",children:[_.jsx("select",{className:"w-full bg-slate-900/40 rounded-md border border-slate-700 px-2 py-1 text-[0.65rem] focus:outline-none focus:border-cyan-400",value:q.flowType||"auto",onChange:D=>{const Q=D.target.value;c(it,{flowType:Q==="auto"?void 0:Q})},children:eM.map(D=>_.jsx("option",{value:D.value,children:D.label},D.value))}),_.jsxs("span",{className:"text-[0.6rem] text-slate-500",children:["Detected: ",nM[p[it]]||"Unknown"]})]})}),_.jsx("td",{className:`px-2 py-1 text-right whitespace-nowrap ${q.amount<0?"text-rose-300":"text-emerald-300"}`,children:Number.isFinite(Number(q.amount))?`$${Number(q.amount).toFixed(2)}`:"-"}),_.jsx("td",{className:"px-2 py-1 text-right",children:_.jsx("button",{className:"text-[0.7rem] px-2 py-1 rounded-md border border-rose-500/60 text-rose-300 hover:bg-rose-400/10",onClick:()=>{window.confirm("Delete this transaction from this account?")&&m(it)},children:"Delete"})})]},it))})]})})})]}),_.jsx(T1,{open:j,title:"Add Transaction",accounts:s,defaultAccountId:o||"main",initial:{date:iM(),accountId:o||"main"},allowRecurring:!0,onCreateRecurring:K,onSave:P,onClose:()=>k(!1)})]})}function sM({onViewAll:i,onEdit:t,onDelete:e,onDuplicate:s,onExport:o}){const[u,c]=yt.useState(!1);function m(){c(!1),e?.()}return _.jsxs("div",{className:"relative",children:[_.jsx("button",{type:"button",className:"rounded-full border border-slate-600/70 px-3 py-1 text-xs text-slate-300 hover:border-cyan-400/60",onClick:()=>c(p=>!p),children:"Manage goal "}),_.jsxs("div",{className:`absolute right-0 mt-2 w-40 rounded-xl border border-slate-700/70 bg-[#05060F] text-xs shadow-lg transition-all duration-150 ${u?"opacity-100 translate-y-0 pointer-events-auto":"opacity-0 -translate-y-1 pointer-events-none"}`,children:[_.jsx("button",{type:"button",className:"block w-full px-3 py-2 text-left text-slate-200 hover:bg-slate-800/70",onClick:()=>{c(!1),i?.()},children:"View all goals"}),_.jsx("div",{className:"h-px bg-slate-800/80"}),_.jsx("button",{type:"button",className:"block w-full px-3 py-2 text-left text-slate-200 hover:bg-slate-800/70",onClick:()=>{c(!1),t?.()},children:"Edit goal"}),_.jsx("button",{type:"button",className:"block w-full px-3 py-2 text-left text-slate-200 hover:bg-slate-800/70",onClick:()=>{c(!1),s?.()},children:"Duplicate goal"}),_.jsx("button",{type:"button",className:"block w-full px-3 py-2 text-left text-slate-200 hover:bg-slate-800/70",onClick:()=>{c(!1),o?.()},children:"Export progress"}),_.jsx("button",{type:"button",className:"block w-full px-3 py-2 text-left text-rose-300 hover:bg-slate-800/70",onClick:()=>{window.confirm("Delete this goal?")&&m()},children:"Delete goal"})]})]})}function ip(i,t=0){const e=Number(i);return Number.isFinite(e)?e:t}function aM({goals:i=[],onSelectGoal:t=()=>{},goal:e,mode:s="edit",onRequestCreateGoal:o=()=>{},onEditGoal:u=()=>{},onDeleteGoal:c=()=>{},onDuplicateGoal:m=()=>{},onExportGoal:p=()=>{},onAddContributionRequest:g=()=>{}}){const[v,T]=xt.useState("detail");if(xt.useEffect(()=>{s==="create"&&(e?.id||o())},[s,e?.id]),xt.useEffect(()=>{e?.id||T("all")},[e?.id]),v==="all"){const L=Array.isArray(i)?i:[];return _.jsxs("div",{className:"space-y-5",children:[_.jsxs("header",{className:"flex items-center justify-between gap-3",children:[_.jsxs("div",{className:"space-y-1",children:[_.jsx("h1",{className:"text-xl font-semibold text-slate-100",children:"All Goals"}),_.jsx("p",{className:"text-xs text-slate-400",children:"Select a goal to view details, or create a new one."})]}),_.jsx("button",{type:"button",className:"px-3 py-1.5 rounded-md border border-cyan-400/70 text-xs text-cyan-200 bg-cyan-500/10 hover:bg-cyan-500/20 transition",onClick:()=>o(),children:"+ New Goal"})]}),L.length===0?_.jsx(Ci,{title:"NO GOALS YET",children:_.jsx("p",{className:"text-sm text-slate-300",children:"You dont have any goals yet. Create one to get started."})}):_.jsx("div",{className:"grid md:grid-cols-2 gap-3",children:L.map(J=>_.jsx(y1,{goal:J,onClick:()=>{t(J.id),T("detail")},onEdit:()=>{t(J.id),T("detail")}},J.id))})]})}if(!e)return _.jsx("div",{className:"space-y-4",children:_.jsxs(Ci,{title:"GOALS",children:[_.jsx("p",{className:"text-sm text-slate-300",children:"No goal selected."}),_.jsxs("div",{className:"mt-3 flex gap-2",children:[_.jsx("button",{type:"button",onClick:()=>T("all"),className:"px-4 py-2 rounded-lg border border-slate-700 text-xs text-slate-200 bg-slate-900/40 hover:border-cyan-400/70 transition",children:"View all goals"}),_.jsx("button",{type:"button",onClick:o,className:"px-4 py-2 rounded-lg border border-cyan-400/70 text-xs text-cyan-200 bg-cyan-500/10 hover:bg-cyan-500/20 transition",children:"+ Create a goal"})]})]})});const x=ip(e?.saved??e?.current??0,0),S=ip(e?.target??0,0),U=ip(e?.monthlyPlan??0,0),F=e?.icon||e?.emoji||"",Z=e?.name||"Untitled Goal",ot=S>0?Math.min(100,x/S*100):0;return _.jsxs("div",{className:"space-y-5",children:[_.jsxs("header",{className:"flex items-center justify-between gap-3",children:[_.jsx("div",{className:"space-y-1",children:_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx("span",{className:"text-2xl",children:F}),_.jsxs("div",{children:[_.jsx("h1",{className:"text-xl font-semibold text-slate-100",children:Z}),_.jsx("p",{className:"text-xs text-slate-400",children:"Personalized goal view  future: themed backgrounds & animations."})]})]})}),_.jsx(sM,{onViewAll:()=>T("all"),onEdit:()=>u(e?.id),onDelete:()=>e?.id&&c(e.id),onDuplicate:()=>m(e?.id),onExport:()=>p(e?.id)})]}),_.jsx(Ci,{title:"PROGRESS",children:_.jsxs("div",{className:"flex flex-col gap-2 text-sm",children:[_.jsxs("span",{className:"text-slate-200",children:["$",x.toFixed(2)," / $",S.toFixed(2)]}),_.jsx(Hg,{value:ot}),_.jsxs("span",{className:"text-xs text-slate-400",children:[ot.toFixed(1),"% complete"]})]})}),_.jsxs(Ci,{title:"PLAN",children:[_.jsxs("p",{className:"text-sm text-slate-200",children:["Recommended monthly contribution:",_.jsxs("span",{className:"ml-1 text-cyan-300 font-semibold",children:["$",U.toFixed(2)]})]}),_.jsx("div",{className:"mt-3 flex flex-wrap gap-2 text-xs",children:_.jsx("button",{type:"button",className:"px-3 py-1.5 text-xs rounded-md border border-pink-400/70 text-pink-200 bg-pink-500/10 hover:bg-pink-500/20 transition",onClick:()=>g(e?.id),children:"Add Contribution"})})]})]})}var oM={value:()=>{}};function A1(){for(var i=0,t=arguments.length,e={},s;i<t;++i){if(!(s=arguments[i]+"")||s in e||/[\s.]/.test(s))throw new Error("illegal type: "+s);e[s]=[]}return new Ph(e)}function Ph(i){this._=i}function lM(i,t){return i.trim().split(/^|\s+/).map(function(e){var s="",o=e.indexOf(".");if(o>=0&&(s=e.slice(o+1),e=e.slice(0,o)),e&&!t.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:s}})}Ph.prototype=A1.prototype={constructor:Ph,on:function(i,t){var e=this._,s=lM(i+"",e),o,u=-1,c=s.length;if(arguments.length<2){for(;++u<c;)if((o=(i=s[u]).type)&&(o=uM(e[o],i.name)))return o;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++u<c;)if(o=(i=s[u]).type)e[o]=mE(e[o],i.name,t);else if(t==null)for(o in e)e[o]=mE(e[o],i.name,null);return this},copy:function(){var i={},t=this._;for(var e in t)i[e]=t[e].slice();return new Ph(i)},call:function(i,t){if((o=arguments.length-2)>0)for(var e=new Array(o),s=0,o,u;s<o;++s)e[s]=arguments[s+2];if(!this._.hasOwnProperty(i))throw new Error("unknown type: "+i);for(u=this._[i],s=0,o=u.length;s<o;++s)u[s].value.apply(t,e)},apply:function(i,t,e){if(!this._.hasOwnProperty(i))throw new Error("unknown type: "+i);for(var s=this._[i],o=0,u=s.length;o<u;++o)s[o].value.apply(t,e)}};function uM(i,t){for(var e=0,s=i.length,o;e<s;++e)if((o=i[e]).name===t)return o.value}function mE(i,t,e){for(var s=0,o=i.length;s<o;++s)if(i[s].name===t){i[s]=oM,i=i.slice(0,s).concat(i.slice(s+1));break}return e!=null&&i.push({name:t,value:e}),i}var Fp="http://www.w3.org/1999/xhtml";const pE={svg:"http://www.w3.org/2000/svg",xhtml:Fp,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Lf(i){var t=i+="",e=t.indexOf(":");return e>=0&&(t=i.slice(0,e))!=="xmlns"&&(i=i.slice(e+1)),pE.hasOwnProperty(t)?{space:pE[t],local:i}:i}function cM(i){return function(){var t=this.ownerDocument,e=this.namespaceURI;return e===Fp&&t.documentElement.namespaceURI===Fp?t.createElement(i):t.createElementNS(e,i)}}function hM(i){return function(){return this.ownerDocument.createElementNS(i.space,i.local)}}function w1(i){var t=Lf(i);return(t.local?hM:cM)(t)}function fM(){}function $g(i){return i==null?fM:function(){return this.querySelector(i)}}function dM(i){typeof i!="function"&&(i=$g(i));for(var t=this._groups,e=t.length,s=new Array(e),o=0;o<e;++o)for(var u=t[o],c=u.length,m=s[o]=new Array(c),p,g,v=0;v<c;++v)(p=u[v])&&(g=i.call(p,p.__data__,v,u))&&("__data__"in p&&(g.__data__=p.__data__),m[v]=g);return new Qn(s,this._parents)}function mM(i){return i==null?[]:Array.isArray(i)?i:Array.from(i)}function pM(){return[]}function S1(i){return i==null?pM:function(){return this.querySelectorAll(i)}}function gM(i){return function(){return mM(i.apply(this,arguments))}}function yM(i){typeof i=="function"?i=gM(i):i=S1(i);for(var t=this._groups,e=t.length,s=[],o=[],u=0;u<e;++u)for(var c=t[u],m=c.length,p,g=0;g<m;++g)(p=c[g])&&(s.push(i.call(p,p.__data__,g,c)),o.push(p));return new Qn(s,o)}function N1(i){return function(){return this.matches(i)}}function C1(i){return function(t){return t.matches(i)}}var _M=Array.prototype.find;function vM(i){return function(){return _M.call(this.children,i)}}function bM(){return this.firstElementChild}function EM(i){return this.select(i==null?bM:vM(typeof i=="function"?i:C1(i)))}var TM=Array.prototype.filter;function xM(){return Array.from(this.children)}function AM(i){return function(){return TM.call(this.children,i)}}function wM(i){return this.selectAll(i==null?xM:AM(typeof i=="function"?i:C1(i)))}function SM(i){typeof i!="function"&&(i=N1(i));for(var t=this._groups,e=t.length,s=new Array(e),o=0;o<e;++o)for(var u=t[o],c=u.length,m=s[o]=[],p,g=0;g<c;++g)(p=u[g])&&i.call(p,p.__data__,g,u)&&m.push(p);return new Qn(s,this._parents)}function R1(i){return new Array(i.length)}function NM(){return new Qn(this._enter||this._groups.map(R1),this._parents)}function lf(i,t){this.ownerDocument=i.ownerDocument,this.namespaceURI=i.namespaceURI,this._next=null,this._parent=i,this.__data__=t}lf.prototype={constructor:lf,appendChild:function(i){return this._parent.insertBefore(i,this._next)},insertBefore:function(i,t){return this._parent.insertBefore(i,t)},querySelector:function(i){return this._parent.querySelector(i)},querySelectorAll:function(i){return this._parent.querySelectorAll(i)}};function CM(i){return function(){return i}}function RM(i,t,e,s,o,u){for(var c=0,m,p=t.length,g=u.length;c<g;++c)(m=t[c])?(m.__data__=u[c],s[c]=m):e[c]=new lf(i,u[c]);for(;c<p;++c)(m=t[c])&&(o[c]=m)}function IM(i,t,e,s,o,u,c){var m,p,g=new Map,v=t.length,T=u.length,x=new Array(v),S;for(m=0;m<v;++m)(p=t[m])&&(x[m]=S=c.call(p,p.__data__,m,t)+"",g.has(S)?o[m]=p:g.set(S,p));for(m=0;m<T;++m)S=c.call(i,u[m],m,u)+"",(p=g.get(S))?(s[m]=p,p.__data__=u[m],g.delete(S)):e[m]=new lf(i,u[m]);for(m=0;m<v;++m)(p=t[m])&&g.get(x[m])===p&&(o[m]=p)}function DM(i){return i.__data__}function OM(i,t){if(!arguments.length)return Array.from(this,DM);var e=t?IM:RM,s=this._parents,o=this._groups;typeof i!="function"&&(i=CM(i));for(var u=o.length,c=new Array(u),m=new Array(u),p=new Array(u),g=0;g<u;++g){var v=s[g],T=o[g],x=T.length,S=MM(i.call(v,v&&v.__data__,g,s)),U=S.length,F=m[g]=new Array(U),Z=c[g]=new Array(U),ot=p[g]=new Array(x);e(v,T,F,Z,ot,S,t);for(var L=0,J=0,et,dt;L<U;++L)if(et=F[L]){for(L>=J&&(J=L+1);!(dt=Z[J])&&++J<U;);et._next=dt||null}}return c=new Qn(c,s),c._enter=m,c._exit=p,c}function MM(i){return typeof i=="object"&&"length"in i?i:Array.from(i)}function kM(){return new Qn(this._exit||this._groups.map(R1),this._parents)}function VM(i,t,e){var s=this.enter(),o=this,u=this.exit();return typeof i=="function"?(s=i(s),s&&(s=s.selection())):s=s.append(i+""),t!=null&&(o=t(o),o&&(o=o.selection())),e==null?u.remove():e(u),s&&o?s.merge(o).order():o}function jM(i){for(var t=i.selection?i.selection():i,e=this._groups,s=t._groups,o=e.length,u=s.length,c=Math.min(o,u),m=new Array(o),p=0;p<c;++p)for(var g=e[p],v=s[p],T=g.length,x=m[p]=new Array(T),S,U=0;U<T;++U)(S=g[U]||v[U])&&(x[U]=S);for(;p<o;++p)m[p]=e[p];return new Qn(m,this._parents)}function LM(){for(var i=this._groups,t=-1,e=i.length;++t<e;)for(var s=i[t],o=s.length-1,u=s[o],c;--o>=0;)(c=s[o])&&(u&&c.compareDocumentPosition(u)^4&&u.parentNode.insertBefore(c,u),u=c);return this}function PM(i){i||(i=UM);function t(T,x){return T&&x?i(T.__data__,x.__data__):!T-!x}for(var e=this._groups,s=e.length,o=new Array(s),u=0;u<s;++u){for(var c=e[u],m=c.length,p=o[u]=new Array(m),g,v=0;v<m;++v)(g=c[v])&&(p[v]=g);p.sort(t)}return new Qn(o,this._parents).order()}function UM(i,t){return i<t?-1:i>t?1:i>=t?0:NaN}function zM(){var i=arguments[0];return arguments[0]=this,i.apply(null,arguments),this}function BM(){return Array.from(this)}function FM(){for(var i=this._groups,t=0,e=i.length;t<e;++t)for(var s=i[t],o=0,u=s.length;o<u;++o){var c=s[o];if(c)return c}return null}function qM(){let i=0;for(const t of this)++i;return i}function HM(){return!this.node()}function GM(i){for(var t=this._groups,e=0,s=t.length;e<s;++e)for(var o=t[e],u=0,c=o.length,m;u<c;++u)(m=o[u])&&i.call(m,m.__data__,u,o);return this}function $M(i){return function(){this.removeAttribute(i)}}function YM(i){return function(){this.removeAttributeNS(i.space,i.local)}}function KM(i,t){return function(){this.setAttribute(i,t)}}function QM(i,t){return function(){this.setAttributeNS(i.space,i.local,t)}}function XM(i,t){return function(){var e=t.apply(this,arguments);e==null?this.removeAttribute(i):this.setAttribute(i,e)}}function ZM(i,t){return function(){var e=t.apply(this,arguments);e==null?this.removeAttributeNS(i.space,i.local):this.setAttributeNS(i.space,i.local,e)}}function JM(i,t){var e=Lf(i);if(arguments.length<2){var s=this.node();return e.local?s.getAttributeNS(e.space,e.local):s.getAttribute(e)}return this.each((t==null?e.local?YM:$M:typeof t=="function"?e.local?ZM:XM:e.local?QM:KM)(e,t))}function I1(i){return i.ownerDocument&&i.ownerDocument.defaultView||i.document&&i||i.defaultView}function WM(i){return function(){this.style.removeProperty(i)}}function t4(i,t,e){return function(){this.style.setProperty(i,t,e)}}function e4(i,t,e){return function(){var s=t.apply(this,arguments);s==null?this.style.removeProperty(i):this.style.setProperty(i,s,e)}}function n4(i,t,e){return arguments.length>1?this.each((t==null?WM:typeof t=="function"?e4:t4)(i,t,e??"")):Ko(this.node(),i)}function Ko(i,t){return i.style.getPropertyValue(t)||I1(i).getComputedStyle(i,null).getPropertyValue(t)}function i4(i){return function(){delete this[i]}}function r4(i,t){return function(){this[i]=t}}function s4(i,t){return function(){var e=t.apply(this,arguments);e==null?delete this[i]:this[i]=e}}function a4(i,t){return arguments.length>1?this.each((t==null?i4:typeof t=="function"?s4:r4)(i,t)):this.node()[i]}function D1(i){return i.trim().split(/^|\s+/)}function Yg(i){return i.classList||new O1(i)}function O1(i){this._node=i,this._names=D1(i.getAttribute("class")||"")}O1.prototype={add:function(i){var t=this._names.indexOf(i);t<0&&(this._names.push(i),this._node.setAttribute("class",this._names.join(" ")))},remove:function(i){var t=this._names.indexOf(i);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(i){return this._names.indexOf(i)>=0}};function M1(i,t){for(var e=Yg(i),s=-1,o=t.length;++s<o;)e.add(t[s])}function k1(i,t){for(var e=Yg(i),s=-1,o=t.length;++s<o;)e.remove(t[s])}function o4(i){return function(){M1(this,i)}}function l4(i){return function(){k1(this,i)}}function u4(i,t){return function(){(t.apply(this,arguments)?M1:k1)(this,i)}}function c4(i,t){var e=D1(i+"");if(arguments.length<2){for(var s=Yg(this.node()),o=-1,u=e.length;++o<u;)if(!s.contains(e[o]))return!1;return!0}return this.each((typeof t=="function"?u4:t?o4:l4)(e,t))}function h4(){this.textContent=""}function f4(i){return function(){this.textContent=i}}function d4(i){return function(){var t=i.apply(this,arguments);this.textContent=t??""}}function m4(i){return arguments.length?this.each(i==null?h4:(typeof i=="function"?d4:f4)(i)):this.node().textContent}function p4(){this.innerHTML=""}function g4(i){return function(){this.innerHTML=i}}function y4(i){return function(){var t=i.apply(this,arguments);this.innerHTML=t??""}}function _4(i){return arguments.length?this.each(i==null?p4:(typeof i=="function"?y4:g4)(i)):this.node().innerHTML}function v4(){this.nextSibling&&this.parentNode.appendChild(this)}function b4(){return this.each(v4)}function E4(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function T4(){return this.each(E4)}function x4(i){var t=typeof i=="function"?i:w1(i);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function A4(){return null}function w4(i,t){var e=typeof i=="function"?i:w1(i),s=t==null?A4:typeof t=="function"?t:$g(t);return this.select(function(){return this.insertBefore(e.apply(this,arguments),s.apply(this,arguments)||null)})}function S4(){var i=this.parentNode;i&&i.removeChild(this)}function N4(){return this.each(S4)}function C4(){var i=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(i,this.nextSibling):i}function R4(){var i=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(i,this.nextSibling):i}function I4(i){return this.select(i?R4:C4)}function D4(i){return arguments.length?this.property("__data__",i):this.node().__data__}function O4(i){return function(t){i.call(this,t,this.__data__)}}function M4(i){return i.trim().split(/^|\s+/).map(function(t){var e="",s=t.indexOf(".");return s>=0&&(e=t.slice(s+1),t=t.slice(0,s)),{type:t,name:e}})}function k4(i){return function(){var t=this.__on;if(t){for(var e=0,s=-1,o=t.length,u;e<o;++e)u=t[e],(!i.type||u.type===i.type)&&u.name===i.name?this.removeEventListener(u.type,u.listener,u.options):t[++s]=u;++s?t.length=s:delete this.__on}}}function V4(i,t,e){return function(){var s=this.__on,o,u=O4(t);if(s){for(var c=0,m=s.length;c<m;++c)if((o=s[c]).type===i.type&&o.name===i.name){this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=u,o.options=e),o.value=t;return}}this.addEventListener(i.type,u,e),o={type:i.type,name:i.name,value:t,listener:u,options:e},s?s.push(o):this.__on=[o]}}function j4(i,t,e){var s=M4(i+""),o,u=s.length,c;if(arguments.length<2){var m=this.node().__on;if(m){for(var p=0,g=m.length,v;p<g;++p)for(o=0,v=m[p];o<u;++o)if((c=s[o]).type===v.type&&c.name===v.name)return v.value}return}for(m=t?V4:k4,o=0;o<u;++o)this.each(m(s[o],t,e));return this}function V1(i,t,e){var s=I1(i),o=s.CustomEvent;typeof o=="function"?o=new o(t,e):(o=s.document.createEvent("Event"),e?(o.initEvent(t,e.bubbles,e.cancelable),o.detail=e.detail):o.initEvent(t,!1,!1)),i.dispatchEvent(o)}function L4(i,t){return function(){return V1(this,i,t)}}function P4(i,t){return function(){return V1(this,i,t.apply(this,arguments))}}function U4(i,t){return this.each((typeof t=="function"?P4:L4)(i,t))}function*z4(){for(var i=this._groups,t=0,e=i.length;t<e;++t)for(var s=i[t],o=0,u=s.length,c;o<u;++o)(c=s[o])&&(yield c)}var j1=[null];function Qn(i,t){this._groups=i,this._parents=t}function Yu(){return new Qn([[document.documentElement]],j1)}function B4(){return this}Qn.prototype=Yu.prototype={constructor:Qn,select:dM,selectAll:yM,selectChild:EM,selectChildren:wM,filter:SM,data:OM,enter:NM,exit:kM,join:VM,merge:jM,selection:B4,order:LM,sort:PM,call:zM,nodes:BM,node:FM,size:qM,empty:HM,each:GM,attr:JM,style:n4,property:a4,classed:c4,text:m4,html:_4,raise:b4,lower:T4,append:x4,insert:w4,remove:N4,clone:I4,datum:D4,on:j4,dispatch:U4,[Symbol.iterator]:z4};function F4(i){return typeof i=="string"?new Qn([[document.querySelector(i)]],[document.documentElement]):new Qn([[i]],j1)}function Kg(i,t,e){i.prototype=t.prototype=e,e.constructor=i}function L1(i,t){var e=Object.create(i.prototype);for(var s in t)e[s]=t[s];return e}function Ku(){}var Ou=.7,uf=1/Ou,zo="\\s*([+-]?\\d+)\\s*",Mu="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",tr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",q4=/^#([0-9a-f]{3,8})$/,H4=new RegExp(`^rgb\\(${zo},${zo},${zo}\\)$`),G4=new RegExp(`^rgb\\(${tr},${tr},${tr}\\)$`),$4=new RegExp(`^rgba\\(${zo},${zo},${zo},${Mu}\\)$`),Y4=new RegExp(`^rgba\\(${tr},${tr},${tr},${Mu}\\)$`),K4=new RegExp(`^hsl\\(${Mu},${tr},${tr}\\)$`),Q4=new RegExp(`^hsla\\(${Mu},${tr},${tr},${Mu}\\)$`),gE={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Kg(Ku,ku,{copy(i){return Object.assign(new this.constructor,this,i)},displayable(){return this.rgb().displayable()},hex:yE,formatHex:yE,formatHex8:X4,formatHsl:Z4,formatRgb:_E,toString:_E});function yE(){return this.rgb().formatHex()}function X4(){return this.rgb().formatHex8()}function Z4(){return P1(this).formatHsl()}function _E(){return this.rgb().formatRgb()}function ku(i){var t,e;return i=(i+"").trim().toLowerCase(),(t=q4.exec(i))?(e=t[1].length,t=parseInt(t[1],16),e===6?vE(t):e===3?new Vn(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):e===8?xh(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):e===4?xh(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=H4.exec(i))?new Vn(t[1],t[2],t[3],1):(t=G4.exec(i))?new Vn(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=$4.exec(i))?xh(t[1],t[2],t[3],t[4]):(t=Y4.exec(i))?xh(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=K4.exec(i))?TE(t[1],t[2]/100,t[3]/100,1):(t=Q4.exec(i))?TE(t[1],t[2]/100,t[3]/100,t[4]):gE.hasOwnProperty(i)?vE(gE[i]):i==="transparent"?new Vn(NaN,NaN,NaN,0):null}function vE(i){return new Vn(i>>16&255,i>>8&255,i&255,1)}function xh(i,t,e,s){return s<=0&&(i=t=e=NaN),new Vn(i,t,e,s)}function J4(i){return i instanceof Ku||(i=ku(i)),i?(i=i.rgb(),new Vn(i.r,i.g,i.b,i.opacity)):new Vn}function qp(i,t,e,s){return arguments.length===1?J4(i):new Vn(i,t,e,s??1)}function Vn(i,t,e,s){this.r=+i,this.g=+t,this.b=+e,this.opacity=+s}Kg(Vn,qp,L1(Ku,{brighter(i){return i=i==null?uf:Math.pow(uf,i),new Vn(this.r*i,this.g*i,this.b*i,this.opacity)},darker(i){return i=i==null?Ou:Math.pow(Ou,i),new Vn(this.r*i,this.g*i,this.b*i,this.opacity)},rgb(){return this},clamp(){return new Vn(wa(this.r),wa(this.g),wa(this.b),cf(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:bE,formatHex:bE,formatHex8:W4,formatRgb:EE,toString:EE}));function bE(){return`#${xa(this.r)}${xa(this.g)}${xa(this.b)}`}function W4(){return`#${xa(this.r)}${xa(this.g)}${xa(this.b)}${xa((isNaN(this.opacity)?1:this.opacity)*255)}`}function EE(){const i=cf(this.opacity);return`${i===1?"rgb(":"rgba("}${wa(this.r)}, ${wa(this.g)}, ${wa(this.b)}${i===1?")":`, ${i})`}`}function cf(i){return isNaN(i)?1:Math.max(0,Math.min(1,i))}function wa(i){return Math.max(0,Math.min(255,Math.round(i)||0))}function xa(i){return i=wa(i),(i<16?"0":"")+i.toString(16)}function TE(i,t,e,s){return s<=0?i=t=e=NaN:e<=0||e>=1?i=t=NaN:t<=0&&(i=NaN),new Si(i,t,e,s)}function P1(i){if(i instanceof Si)return new Si(i.h,i.s,i.l,i.opacity);if(i instanceof Ku||(i=ku(i)),!i)return new Si;if(i instanceof Si)return i;i=i.rgb();var t=i.r/255,e=i.g/255,s=i.b/255,o=Math.min(t,e,s),u=Math.max(t,e,s),c=NaN,m=u-o,p=(u+o)/2;return m?(t===u?c=(e-s)/m+(e<s)*6:e===u?c=(s-t)/m+2:c=(t-e)/m+4,m/=p<.5?u+o:2-u-o,c*=60):m=p>0&&p<1?0:c,new Si(c,m,p,i.opacity)}function tk(i,t,e,s){return arguments.length===1?P1(i):new Si(i,t,e,s??1)}function Si(i,t,e,s){this.h=+i,this.s=+t,this.l=+e,this.opacity=+s}Kg(Si,tk,L1(Ku,{brighter(i){return i=i==null?uf:Math.pow(uf,i),new Si(this.h,this.s,this.l*i,this.opacity)},darker(i){return i=i==null?Ou:Math.pow(Ou,i),new Si(this.h,this.s,this.l*i,this.opacity)},rgb(){var i=this.h%360+(this.h<0)*360,t=isNaN(i)||isNaN(this.s)?0:this.s,e=this.l,s=e+(e<.5?e:1-e)*t,o=2*e-s;return new Vn(rp(i>=240?i-240:i+120,o,s),rp(i,o,s),rp(i<120?i+240:i-120,o,s),this.opacity)},clamp(){return new Si(xE(this.h),Ah(this.s),Ah(this.l),cf(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const i=cf(this.opacity);return`${i===1?"hsl(":"hsla("}${xE(this.h)}, ${Ah(this.s)*100}%, ${Ah(this.l)*100}%${i===1?")":`, ${i})`}`}}));function xE(i){return i=(i||0)%360,i<0?i+360:i}function Ah(i){return Math.max(0,Math.min(1,i||0))}function rp(i,t,e){return(i<60?t+(e-t)*i/60:i<180?e:i<240?t+(e-t)*(240-i)/60:t)*255}const U1=i=>()=>i;function ek(i,t){return function(e){return i+e*t}}function nk(i,t,e){return i=Math.pow(i,e),t=Math.pow(t,e)-i,e=1/e,function(s){return Math.pow(i+s*t,e)}}function ik(i){return(i=+i)==1?z1:function(t,e){return e-t?nk(t,e,i):U1(isNaN(t)?e:t)}}function z1(i,t){var e=t-i;return e?ek(i,e):U1(isNaN(i)?t:i)}const AE=(function i(t){var e=ik(t);function s(o,u){var c=e((o=qp(o)).r,(u=qp(u)).r),m=e(o.g,u.g),p=e(o.b,u.b),g=z1(o.opacity,u.opacity);return function(v){return o.r=c(v),o.g=m(v),o.b=p(v),o.opacity=g(v),o+""}}return s.gamma=i,s})(1);function xs(i,t){return i=+i,t=+t,function(e){return i*(1-e)+t*e}}var Hp=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,sp=new RegExp(Hp.source,"g");function rk(i){return function(){return i}}function sk(i){return function(t){return i(t)+""}}function ak(i,t){var e=Hp.lastIndex=sp.lastIndex=0,s,o,u,c=-1,m=[],p=[];for(i=i+"",t=t+"";(s=Hp.exec(i))&&(o=sp.exec(t));)(u=o.index)>e&&(u=t.slice(e,u),m[c]?m[c]+=u:m[++c]=u),(s=s[0])===(o=o[0])?m[c]?m[c]+=o:m[++c]=o:(m[++c]=null,p.push({i:c,x:xs(s,o)})),e=sp.lastIndex;return e<t.length&&(u=t.slice(e),m[c]?m[c]+=u:m[++c]=u),m.length<2?p[0]?sk(p[0].x):rk(t):(t=p.length,function(g){for(var v=0,T;v<t;++v)m[(T=p[v]).i]=T.x(g);return m.join("")})}var wE=180/Math.PI,Gp={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function B1(i,t,e,s,o,u){var c,m,p;return(c=Math.sqrt(i*i+t*t))&&(i/=c,t/=c),(p=i*e+t*s)&&(e-=i*p,s-=t*p),(m=Math.sqrt(e*e+s*s))&&(e/=m,s/=m,p/=m),i*s<t*e&&(i=-i,t=-t,p=-p,c=-c),{translateX:o,translateY:u,rotate:Math.atan2(t,i)*wE,skewX:Math.atan(p)*wE,scaleX:c,scaleY:m}}var wh;function ok(i){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(i+"");return t.isIdentity?Gp:B1(t.a,t.b,t.c,t.d,t.e,t.f)}function lk(i){return i==null||(wh||(wh=document.createElementNS("http://www.w3.org/2000/svg","g")),wh.setAttribute("transform",i),!(i=wh.transform.baseVal.consolidate()))?Gp:(i=i.matrix,B1(i.a,i.b,i.c,i.d,i.e,i.f))}function F1(i,t,e,s){function o(g){return g.length?g.pop()+" ":""}function u(g,v,T,x,S,U){if(g!==T||v!==x){var F=S.push("translate(",null,t,null,e);U.push({i:F-4,x:xs(g,T)},{i:F-2,x:xs(v,x)})}else(T||x)&&S.push("translate("+T+t+x+e)}function c(g,v,T,x){g!==v?(g-v>180?v+=360:v-g>180&&(g+=360),x.push({i:T.push(o(T)+"rotate(",null,s)-2,x:xs(g,v)})):v&&T.push(o(T)+"rotate("+v+s)}function m(g,v,T,x){g!==v?x.push({i:T.push(o(T)+"skewX(",null,s)-2,x:xs(g,v)}):v&&T.push(o(T)+"skewX("+v+s)}function p(g,v,T,x,S,U){if(g!==T||v!==x){var F=S.push(o(S)+"scale(",null,",",null,")");U.push({i:F-4,x:xs(g,T)},{i:F-2,x:xs(v,x)})}else(T!==1||x!==1)&&S.push(o(S)+"scale("+T+","+x+")")}return function(g,v){var T=[],x=[];return g=i(g),v=i(v),u(g.translateX,g.translateY,v.translateX,v.translateY,T,x),c(g.rotate,v.rotate,T,x),m(g.skewX,v.skewX,T,x),p(g.scaleX,g.scaleY,v.scaleX,v.scaleY,T,x),g=v=null,function(S){for(var U=-1,F=x.length,Z;++U<F;)T[(Z=x[U]).i]=Z.x(S);return T.join("")}}}var uk=F1(ok,"px, ","px)","deg)"),ck=F1(lk,", ",")",")"),Qo=0,uu=0,nu=0,q1=1e3,hf,cu,ff=0,Ma=0,Pf=0,Vu=typeof performance=="object"&&performance.now?performance:Date,H1=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(i){setTimeout(i,17)};function Qg(){return Ma||(H1(hk),Ma=Vu.now()+Pf)}function hk(){Ma=0}function df(){this._call=this._time=this._next=null}df.prototype=G1.prototype={constructor:df,restart:function(i,t,e){if(typeof i!="function")throw new TypeError("callback is not a function");e=(e==null?Qg():+e)+(t==null?0:+t),!this._next&&cu!==this&&(cu?cu._next=this:hf=this,cu=this),this._call=i,this._time=e,$p()},stop:function(){this._call&&(this._call=null,this._time=1/0,$p())}};function G1(i,t,e){var s=new df;return s.restart(i,t,e),s}function fk(){Qg(),++Qo;for(var i=hf,t;i;)(t=Ma-i._time)>=0&&i._call.call(void 0,t),i=i._next;--Qo}function SE(){Ma=(ff=Vu.now())+Pf,Qo=uu=0;try{fk()}finally{Qo=0,mk(),Ma=0}}function dk(){var i=Vu.now(),t=i-ff;t>q1&&(Pf-=t,ff=i)}function mk(){for(var i,t=hf,e,s=1/0;t;)t._call?(s>t._time&&(s=t._time),i=t,t=t._next):(e=t._next,t._next=null,t=i?i._next=e:hf=e);cu=i,$p(s)}function $p(i){if(!Qo){uu&&(uu=clearTimeout(uu));var t=i-Ma;t>24?(i<1/0&&(uu=setTimeout(SE,i-Vu.now()-Pf)),nu&&(nu=clearInterval(nu))):(nu||(ff=Vu.now(),nu=setInterval(dk,q1)),Qo=1,H1(SE))}}function NE(i,t,e){var s=new df;return t=t==null?0:+t,s.restart(o=>{s.stop(),i(o+t)},t,e),s}var pk=A1("start","end","cancel","interrupt"),gk=[],$1=0,CE=1,Yp=2,Uh=3,RE=4,Kp=5,zh=6;function Uf(i,t,e,s,o,u){var c=i.__transition;if(!c)i.__transition={};else if(e in c)return;yk(i,e,{name:t,index:s,group:o,on:pk,tween:gk,time:u.time,delay:u.delay,duration:u.duration,ease:u.ease,timer:null,state:$1})}function Xg(i,t){var e=Oi(i,t);if(e.state>$1)throw new Error("too late; already scheduled");return e}function ir(i,t){var e=Oi(i,t);if(e.state>Uh)throw new Error("too late; already running");return e}function Oi(i,t){var e=i.__transition;if(!e||!(e=e[t]))throw new Error("transition not found");return e}function yk(i,t,e){var s=i.__transition,o;s[t]=e,e.timer=G1(u,0,e.time);function u(g){e.state=CE,e.timer.restart(c,e.delay,e.time),e.delay<=g&&c(g-e.delay)}function c(g){var v,T,x,S;if(e.state!==CE)return p();for(v in s)if(S=s[v],S.name===e.name){if(S.state===Uh)return NE(c);S.state===RE?(S.state=zh,S.timer.stop(),S.on.call("interrupt",i,i.__data__,S.index,S.group),delete s[v]):+v<t&&(S.state=zh,S.timer.stop(),S.on.call("cancel",i,i.__data__,S.index,S.group),delete s[v])}if(NE(function(){e.state===Uh&&(e.state=RE,e.timer.restart(m,e.delay,e.time),m(g))}),e.state=Yp,e.on.call("start",i,i.__data__,e.index,e.group),e.state===Yp){for(e.state=Uh,o=new Array(x=e.tween.length),v=0,T=-1;v<x;++v)(S=e.tween[v].value.call(i,i.__data__,e.index,e.group))&&(o[++T]=S);o.length=T+1}}function m(g){for(var v=g<e.duration?e.ease.call(null,g/e.duration):(e.timer.restart(p),e.state=Kp,1),T=-1,x=o.length;++T<x;)o[T].call(i,v);e.state===Kp&&(e.on.call("end",i,i.__data__,e.index,e.group),p())}function p(){e.state=zh,e.timer.stop(),delete s[t];for(var g in s)return;delete i.__transition}}function _k(i,t){var e=i.__transition,s,o,u=!0,c;if(e){t=t==null?null:t+"";for(c in e){if((s=e[c]).name!==t){u=!1;continue}o=s.state>Yp&&s.state<Kp,s.state=zh,s.timer.stop(),s.on.call(o?"interrupt":"cancel",i,i.__data__,s.index,s.group),delete e[c]}u&&delete i.__transition}}function vk(i){return this.each(function(){_k(this,i)})}function bk(i,t){var e,s;return function(){var o=ir(this,i),u=o.tween;if(u!==e){s=e=u;for(var c=0,m=s.length;c<m;++c)if(s[c].name===t){s=s.slice(),s.splice(c,1);break}}o.tween=s}}function Ek(i,t,e){var s,o;if(typeof e!="function")throw new Error;return function(){var u=ir(this,i),c=u.tween;if(c!==s){o=(s=c).slice();for(var m={name:t,value:e},p=0,g=o.length;p<g;++p)if(o[p].name===t){o[p]=m;break}p===g&&o.push(m)}u.tween=o}}function Tk(i,t){var e=this._id;if(i+="",arguments.length<2){for(var s=Oi(this.node(),e).tween,o=0,u=s.length,c;o<u;++o)if((c=s[o]).name===i)return c.value;return null}return this.each((t==null?bk:Ek)(e,i,t))}function Zg(i,t,e){var s=i._id;return i.each(function(){var o=ir(this,s);(o.value||(o.value={}))[t]=e.apply(this,arguments)}),function(o){return Oi(o,s).value[t]}}function Y1(i,t){var e;return(typeof t=="number"?xs:t instanceof ku?AE:(e=ku(t))?(t=e,AE):ak)(i,t)}function xk(i){return function(){this.removeAttribute(i)}}function Ak(i){return function(){this.removeAttributeNS(i.space,i.local)}}function wk(i,t,e){var s,o=e+"",u;return function(){var c=this.getAttribute(i);return c===o?null:c===s?u:u=t(s=c,e)}}function Sk(i,t,e){var s,o=e+"",u;return function(){var c=this.getAttributeNS(i.space,i.local);return c===o?null:c===s?u:u=t(s=c,e)}}function Nk(i,t,e){var s,o,u;return function(){var c,m=e(this),p;return m==null?void this.removeAttribute(i):(c=this.getAttribute(i),p=m+"",c===p?null:c===s&&p===o?u:(o=p,u=t(s=c,m)))}}function Ck(i,t,e){var s,o,u;return function(){var c,m=e(this),p;return m==null?void this.removeAttributeNS(i.space,i.local):(c=this.getAttributeNS(i.space,i.local),p=m+"",c===p?null:c===s&&p===o?u:(o=p,u=t(s=c,m)))}}function Rk(i,t){var e=Lf(i),s=e==="transform"?ck:Y1;return this.attrTween(i,typeof t=="function"?(e.local?Ck:Nk)(e,s,Zg(this,"attr."+i,t)):t==null?(e.local?Ak:xk)(e):(e.local?Sk:wk)(e,s,t))}function Ik(i,t){return function(e){this.setAttribute(i,t.call(this,e))}}function Dk(i,t){return function(e){this.setAttributeNS(i.space,i.local,t.call(this,e))}}function Ok(i,t){var e,s;function o(){var u=t.apply(this,arguments);return u!==s&&(e=(s=u)&&Dk(i,u)),e}return o._value=t,o}function Mk(i,t){var e,s;function o(){var u=t.apply(this,arguments);return u!==s&&(e=(s=u)&&Ik(i,u)),e}return o._value=t,o}function kk(i,t){var e="attr."+i;if(arguments.length<2)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;var s=Lf(i);return this.tween(e,(s.local?Ok:Mk)(s,t))}function Vk(i,t){return function(){Xg(this,i).delay=+t.apply(this,arguments)}}function jk(i,t){return t=+t,function(){Xg(this,i).delay=t}}function Lk(i){var t=this._id;return arguments.length?this.each((typeof i=="function"?Vk:jk)(t,i)):Oi(this.node(),t).delay}function Pk(i,t){return function(){ir(this,i).duration=+t.apply(this,arguments)}}function Uk(i,t){return t=+t,function(){ir(this,i).duration=t}}function zk(i){var t=this._id;return arguments.length?this.each((typeof i=="function"?Pk:Uk)(t,i)):Oi(this.node(),t).duration}function Bk(i,t){if(typeof t!="function")throw new Error;return function(){ir(this,i).ease=t}}function Fk(i){var t=this._id;return arguments.length?this.each(Bk(t,i)):Oi(this.node(),t).ease}function qk(i,t){return function(){var e=t.apply(this,arguments);if(typeof e!="function")throw new Error;ir(this,i).ease=e}}function Hk(i){if(typeof i!="function")throw new Error;return this.each(qk(this._id,i))}function Gk(i){typeof i!="function"&&(i=N1(i));for(var t=this._groups,e=t.length,s=new Array(e),o=0;o<e;++o)for(var u=t[o],c=u.length,m=s[o]=[],p,g=0;g<c;++g)(p=u[g])&&i.call(p,p.__data__,g,u)&&m.push(p);return new Vr(s,this._parents,this._name,this._id)}function $k(i){if(i._id!==this._id)throw new Error;for(var t=this._groups,e=i._groups,s=t.length,o=e.length,u=Math.min(s,o),c=new Array(s),m=0;m<u;++m)for(var p=t[m],g=e[m],v=p.length,T=c[m]=new Array(v),x,S=0;S<v;++S)(x=p[S]||g[S])&&(T[S]=x);for(;m<s;++m)c[m]=t[m];return new Vr(c,this._parents,this._name,this._id)}function Yk(i){return(i+"").trim().split(/^|\s+/).every(function(t){var e=t.indexOf(".");return e>=0&&(t=t.slice(0,e)),!t||t==="start"})}function Kk(i,t,e){var s,o,u=Yk(t)?Xg:ir;return function(){var c=u(this,i),m=c.on;m!==s&&(o=(s=m).copy()).on(t,e),c.on=o}}function Qk(i,t){var e=this._id;return arguments.length<2?Oi(this.node(),e).on.on(i):this.each(Kk(e,i,t))}function Xk(i){return function(){var t=this.parentNode;for(var e in this.__transition)if(+e!==i)return;t&&t.removeChild(this)}}function Zk(){return this.on("end.remove",Xk(this._id))}function Jk(i){var t=this._name,e=this._id;typeof i!="function"&&(i=$g(i));for(var s=this._groups,o=s.length,u=new Array(o),c=0;c<o;++c)for(var m=s[c],p=m.length,g=u[c]=new Array(p),v,T,x=0;x<p;++x)(v=m[x])&&(T=i.call(v,v.__data__,x,m))&&("__data__"in v&&(T.__data__=v.__data__),g[x]=T,Uf(g[x],t,e,x,g,Oi(v,e)));return new Vr(u,this._parents,t,e)}function Wk(i){var t=this._name,e=this._id;typeof i!="function"&&(i=S1(i));for(var s=this._groups,o=s.length,u=[],c=[],m=0;m<o;++m)for(var p=s[m],g=p.length,v,T=0;T<g;++T)if(v=p[T]){for(var x=i.call(v,v.__data__,T,p),S,U=Oi(v,e),F=0,Z=x.length;F<Z;++F)(S=x[F])&&Uf(S,t,e,F,x,U);u.push(x),c.push(v)}return new Vr(u,c,t,e)}var t3=Yu.prototype.constructor;function e3(){return new t3(this._groups,this._parents)}function n3(i,t){var e,s,o;return function(){var u=Ko(this,i),c=(this.style.removeProperty(i),Ko(this,i));return u===c?null:u===e&&c===s?o:o=t(e=u,s=c)}}function K1(i){return function(){this.style.removeProperty(i)}}function i3(i,t,e){var s,o=e+"",u;return function(){var c=Ko(this,i);return c===o?null:c===s?u:u=t(s=c,e)}}function r3(i,t,e){var s,o,u;return function(){var c=Ko(this,i),m=e(this),p=m+"";return m==null&&(p=m=(this.style.removeProperty(i),Ko(this,i))),c===p?null:c===s&&p===o?u:(o=p,u=t(s=c,m))}}function s3(i,t){var e,s,o,u="style."+t,c="end."+u,m;return function(){var p=ir(this,i),g=p.on,v=p.value[u]==null?m||(m=K1(t)):void 0;(g!==e||o!==v)&&(s=(e=g).copy()).on(c,o=v),p.on=s}}function a3(i,t,e){var s=(i+="")=="transform"?uk:Y1;return t==null?this.styleTween(i,n3(i,s)).on("end.style."+i,K1(i)):typeof t=="function"?this.styleTween(i,r3(i,s,Zg(this,"style."+i,t))).each(s3(this._id,i)):this.styleTween(i,i3(i,s,t),e).on("end.style."+i,null)}function o3(i,t,e){return function(s){this.style.setProperty(i,t.call(this,s),e)}}function l3(i,t,e){var s,o;function u(){var c=t.apply(this,arguments);return c!==o&&(s=(o=c)&&o3(i,c,e)),s}return u._value=t,u}function u3(i,t,e){var s="style."+(i+="");if(arguments.length<2)return(s=this.tween(s))&&s._value;if(t==null)return this.tween(s,null);if(typeof t!="function")throw new Error;return this.tween(s,l3(i,t,e??""))}function c3(i){return function(){this.textContent=i}}function h3(i){return function(){var t=i(this);this.textContent=t??""}}function f3(i){return this.tween("text",typeof i=="function"?h3(Zg(this,"text",i)):c3(i==null?"":i+""))}function d3(i){return function(t){this.textContent=i.call(this,t)}}function m3(i){var t,e;function s(){var o=i.apply(this,arguments);return o!==e&&(t=(e=o)&&d3(o)),t}return s._value=i,s}function p3(i){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(i==null)return this.tween(t,null);if(typeof i!="function")throw new Error;return this.tween(t,m3(i))}function g3(){for(var i=this._name,t=this._id,e=Q1(),s=this._groups,o=s.length,u=0;u<o;++u)for(var c=s[u],m=c.length,p,g=0;g<m;++g)if(p=c[g]){var v=Oi(p,t);Uf(p,i,e,g,c,{time:v.time+v.delay+v.duration,delay:0,duration:v.duration,ease:v.ease})}return new Vr(s,this._parents,i,e)}function y3(){var i,t,e=this,s=e._id,o=e.size();return new Promise(function(u,c){var m={value:c},p={value:function(){--o===0&&u()}};e.each(function(){var g=ir(this,s),v=g.on;v!==i&&(t=(i=v).copy(),t._.cancel.push(m),t._.interrupt.push(m),t._.end.push(p)),g.on=t}),o===0&&u()})}var _3=0;function Vr(i,t,e,s){this._groups=i,this._parents=t,this._name=e,this._id=s}function Q1(){return++_3}var Sr=Yu.prototype;Vr.prototype={constructor:Vr,select:Jk,selectAll:Wk,selectChild:Sr.selectChild,selectChildren:Sr.selectChildren,filter:Gk,merge:$k,selection:e3,transition:g3,call:Sr.call,nodes:Sr.nodes,node:Sr.node,size:Sr.size,empty:Sr.empty,each:Sr.each,on:Qk,attr:Rk,attrTween:kk,style:a3,styleTween:u3,text:f3,textTween:p3,remove:Zk,tween:Tk,delay:Lk,duration:zk,ease:Fk,easeVarying:Hk,end:y3,[Symbol.iterator]:Sr[Symbol.iterator]};function v3(i){return((i*=2)<=1?i*i*i:(i-=2)*i*i+2)/2}var b3={time:null,delay:0,duration:250,ease:v3};function E3(i,t){for(var e;!(e=i.__transition)||!(e=e[t]);)if(!(i=i.parentNode))throw new Error(`transition ${t} not found`);return e}function T3(i){var t,e;i instanceof Vr?(t=i._id,i=i._name):(t=Q1(),(e=b3).time=Qg(),i=i==null?null:i+"");for(var s=this._groups,o=s.length,u=0;u<o;++u)for(var c=s[u],m=c.length,p,g=0;g<m;++g)(p=c[g])&&Uf(p,i,t,g,c,e||E3(p,t));return new Vr(s,this._parents,i,t)}Yu.prototype.interrupt=vk;Yu.prototype.transition=T3;function hu(i,t,e){this.k=i,this.x=t,this.y=e}hu.prototype={constructor:hu,scale:function(i){return i===1?this:new hu(this.k*i,this.x,this.y)},translate:function(i,t){return i===0&t===0?this:new hu(this.k,this.x+this.k*i,this.y+this.k*t)},apply:function(i){return[i[0]*this.k+this.x,i[1]*this.k+this.y]},applyX:function(i){return i*this.k+this.x},applyY:function(i){return i*this.k+this.y},invert:function(i){return[(i[0]-this.x)/this.k,(i[1]-this.y)/this.k]},invertX:function(i){return(i-this.x)/this.k},invertY:function(i){return(i-this.y)/this.k},rescaleX:function(i){return i.copy().domain(i.range().map(this.invertX,this).map(i.invert,i))},rescaleY:function(i){return i.copy().domain(i.range().map(this.invertY,this).map(i.invert,i))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};hu.prototype;function IE(i,t){let e;if(t===void 0)for(const s of i)s!=null&&(e<s||e===void 0&&s>=s)&&(e=s);else{let s=-1;for(let o of i)(o=t(o,++s,i))!=null&&(e<o||e===void 0&&o>=o)&&(e=o)}return e}function x3(i,t){let e;if(t===void 0)for(const s of i)s!=null&&(e>s||e===void 0&&s>=s)&&(e=s);else{let s=-1;for(let o of i)(o=t(o,++s,i))!=null&&(e>o||e===void 0&&o>=o)&&(e=o)}return e}function ap(i,t){let e=0;if(t===void 0)for(let s of i)(s=+s)&&(e+=s);else{let s=-1;for(let o of i)(o=+t(o,++s,i))&&(e+=o)}return e}function A3(i,t){return i.sourceLinks.length?i.depth:t-1}function Sh(i){return function(){return i}}function DE(i,t){return mf(i.source,t.source)||i.index-t.index}function OE(i,t){return mf(i.target,t.target)||i.index-t.index}function mf(i,t){return i.y0-t.y0}function op(i){return i.value}function w3(i){return i.index}function S3(i){return i.nodes}function N3(i){return i.links}function ME(i,t){const e=i.get(t);if(!e)throw new Error("missing: "+t);return e}function kE({nodes:i}){for(const t of i){let e=t.y0,s=e;for(const o of t.sourceLinks)o.y0=e+o.width/2,e+=o.width;for(const o of t.targetLinks)o.y1=s+o.width/2,s+=o.width}}function C3(){let i=0,t=0,e=1,s=1,o=24,u=8,c,m=w3,p=A3,g,v,T=S3,x=N3,S=6;function U(){const H={nodes:T.apply(null,arguments),links:x.apply(null,arguments)};return F(H),Z(H),ot(H),L(H),dt(H),kE(H),H}U.update=function(H){return kE(H),H},U.nodeId=function(H){return arguments.length?(m=typeof H=="function"?H:Sh(H),U):m},U.nodeAlign=function(H){return arguments.length?(p=typeof H=="function"?H:Sh(H),U):p},U.nodeSort=function(H){return arguments.length?(g=H,U):g},U.nodeWidth=function(H){return arguments.length?(o=+H,U):o},U.nodePadding=function(H){return arguments.length?(u=c=+H,U):u},U.nodes=function(H){return arguments.length?(T=typeof H=="function"?H:Sh(H),U):T},U.links=function(H){return arguments.length?(x=typeof H=="function"?H:Sh(H),U):x},U.linkSort=function(H){return arguments.length?(v=H,U):v},U.size=function(H){return arguments.length?(i=t=0,e=+H[0],s=+H[1],U):[e-i,s-t]},U.extent=function(H){return arguments.length?(i=+H[0][0],e=+H[1][0],t=+H[0][1],s=+H[1][1],U):[[i,t],[e,s]]},U.iterations=function(H){return arguments.length?(S=+H,U):S};function F({nodes:H,links:M}){for(const[K,q]of H.entries())q.index=K,q.sourceLinks=[],q.targetLinks=[];const P=new Map(H.map((K,q)=>[m(K,q,H),K]));for(const[K,q]of M.entries()){q.index=K;let{source:it,target:D}=q;typeof it!="object"&&(it=q.source=ME(P,it)),typeof D!="object"&&(D=q.target=ME(P,D)),it.sourceLinks.push(q),D.targetLinks.push(q)}if(v!=null)for(const{sourceLinks:K,targetLinks:q}of H)K.sort(v),q.sort(v)}function Z({nodes:H}){for(const M of H)M.value=M.fixedValue===void 0?Math.max(ap(M.sourceLinks,op),ap(M.targetLinks,op)):M.fixedValue}function ot({nodes:H}){const M=H.length;let P=new Set(H),K=new Set,q=0;for(;P.size;){for(const it of P){it.depth=q;for(const{target:D}of it.sourceLinks)K.add(D)}if(++q>M)throw new Error("circular link");P=K,K=new Set}}function L({nodes:H}){const M=H.length;let P=new Set(H),K=new Set,q=0;for(;P.size;){for(const it of P){it.height=q;for(const{source:D}of it.targetLinks)K.add(D)}if(++q>M)throw new Error("circular link");P=K,K=new Set}}function J({nodes:H}){const M=IE(H,q=>q.depth)+1,P=(e-i-o)/(M-1),K=new Array(M);for(const q of H){const it=Math.max(0,Math.min(M-1,Math.floor(p.call(null,q,M))));q.layer=it,q.x0=i+it*P,q.x1=q.x0+o,K[it]?K[it].push(q):K[it]=[q]}if(g)for(const q of K)q.sort(g);return K}function et(H){const M=x3(H,P=>(s-t-(P.length-1)*c)/ap(P,op));for(const P of H){let K=t;for(const q of P){q.y0=K,q.y1=K+q.value*M,K=q.y1+c;for(const it of q.sourceLinks)it.width=it.value*M}K=(s-K+c)/(P.length+1);for(let q=0;q<P.length;++q){const it=P[q];it.y0+=K*(q+1),it.y1+=K*(q+1)}I(P)}}function dt(H){const M=J(H);c=Math.min(u,(s-t)/(IE(M,P=>P.length)-1)),et(M);for(let P=0;P<S;++P){const K=Math.pow(.99,P),q=Math.max(1-K,(P+1)/S);O(M,K,q),rt(M,K,q)}}function rt(H,M,P){for(let K=1,q=H.length;K<q;++K){const it=H[K];for(const D of it){let Q=0,ht=0;for(const{source:gt,value:St}of D.targetLinks){let Rt=St*(D.layer-gt.layer);Q+=A(gt,D)*Rt,ht+=Rt}if(!(ht>0))continue;let mt=(Q/ht-D.y0)*M;D.y0+=mt,D.y1+=mt,k(D)}g===void 0&&it.sort(mf),C(it,P)}}function O(H,M,P){for(let K=H.length,q=K-2;q>=0;--q){const it=H[q];for(const D of it){let Q=0,ht=0;for(const{target:gt,value:St}of D.sourceLinks){let Rt=St*(gt.layer-D.layer);Q+=ct(D,gt)*Rt,ht+=Rt}if(!(ht>0))continue;let mt=(Q/ht-D.y0)*M;D.y0+=mt,D.y1+=mt,k(D)}g===void 0&&it.sort(mf),C(it,P)}}function C(H,M){const P=H.length>>1,K=H[P];j(H,K.y0-c,P-1,M),R(H,K.y1+c,P+1,M),j(H,s,H.length-1,M),R(H,t,0,M)}function R(H,M,P,K){for(;P<H.length;++P){const q=H[P],it=(M-q.y0)*K;it>1e-6&&(q.y0+=it,q.y1+=it),M=q.y1+c}}function j(H,M,P,K){for(;P>=0;--P){const q=H[P],it=(q.y1-M)*K;it>1e-6&&(q.y0-=it,q.y1-=it),M=q.y0-c}}function k({sourceLinks:H,targetLinks:M}){if(v===void 0){for(const{source:{sourceLinks:P}}of M)P.sort(OE);for(const{target:{targetLinks:P}}of H)P.sort(DE)}}function I(H){if(v===void 0)for(const{sourceLinks:M,targetLinks:P}of H)M.sort(OE),P.sort(DE)}function A(H,M){let P=H.y0-(H.sourceLinks.length-1)*c/2;for(const{target:K,width:q}of H.sourceLinks){if(K===M)break;P+=q+c}for(const{source:K,width:q}of M.targetLinks){if(K===H)break;P-=q}return P}function ct(H,M){let P=M.y0-(M.targetLinks.length-1)*c/2;for(const{source:K,width:q}of M.targetLinks){if(K===H)break;P+=q+c}for(const{target:K,width:q}of H.sourceLinks){if(K===M)break;P-=q}return P}return U}var Qp=Math.PI,Xp=2*Qp,Ea=1e-6,R3=Xp-Ea;function Zp(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function X1(){return new Zp}Zp.prototype=X1.prototype={constructor:Zp,moveTo:function(i,t){this._+="M"+(this._x0=this._x1=+i)+","+(this._y0=this._y1=+t)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(i,t){this._+="L"+(this._x1=+i)+","+(this._y1=+t)},quadraticCurveTo:function(i,t,e,s){this._+="Q"+ +i+","+ +t+","+(this._x1=+e)+","+(this._y1=+s)},bezierCurveTo:function(i,t,e,s,o,u){this._+="C"+ +i+","+ +t+","+ +e+","+ +s+","+(this._x1=+o)+","+(this._y1=+u)},arcTo:function(i,t,e,s,o){i=+i,t=+t,e=+e,s=+s,o=+o;var u=this._x1,c=this._y1,m=e-i,p=s-t,g=u-i,v=c-t,T=g*g+v*v;if(o<0)throw new Error("negative radius: "+o);if(this._x1===null)this._+="M"+(this._x1=i)+","+(this._y1=t);else if(T>Ea)if(!(Math.abs(v*m-p*g)>Ea)||!o)this._+="L"+(this._x1=i)+","+(this._y1=t);else{var x=e-u,S=s-c,U=m*m+p*p,F=x*x+S*S,Z=Math.sqrt(U),ot=Math.sqrt(T),L=o*Math.tan((Qp-Math.acos((U+T-F)/(2*Z*ot)))/2),J=L/ot,et=L/Z;Math.abs(J-1)>Ea&&(this._+="L"+(i+J*g)+","+(t+J*v)),this._+="A"+o+","+o+",0,0,"+ +(v*x>g*S)+","+(this._x1=i+et*m)+","+(this._y1=t+et*p)}},arc:function(i,t,e,s,o,u){i=+i,t=+t,e=+e,u=!!u;var c=e*Math.cos(s),m=e*Math.sin(s),p=i+c,g=t+m,v=1^u,T=u?s-o:o-s;if(e<0)throw new Error("negative radius: "+e);this._x1===null?this._+="M"+p+","+g:(Math.abs(this._x1-p)>Ea||Math.abs(this._y1-g)>Ea)&&(this._+="L"+p+","+g),e&&(T<0&&(T=T%Xp+Xp),T>R3?this._+="A"+e+","+e+",0,1,"+v+","+(i-c)+","+(t-m)+"A"+e+","+e+",0,1,"+v+","+(this._x1=p)+","+(this._y1=g):T>Ea&&(this._+="A"+e+","+e+",0,"+ +(T>=Qp)+","+v+","+(this._x1=i+e*Math.cos(o))+","+(this._y1=t+e*Math.sin(o))))},rect:function(i,t,e,s){this._+="M"+(this._x0=this._x1=+i)+","+(this._y0=this._y1=+t)+"h"+ +e+"v"+ +s+"h"+-e+"Z"},toString:function(){return this._}};function VE(i){return function(){return i}}function I3(i){return i[0]}function D3(i){return i[1]}var O3=Array.prototype.slice;function M3(i){return i.source}function k3(i){return i.target}function V3(i){var t=M3,e=k3,s=I3,o=D3,u=null;function c(){var m,p=O3.call(arguments),g=t.apply(this,p),v=e.apply(this,p);if(u||(u=m=X1()),i(u,+s.apply(this,(p[0]=g,p)),+o.apply(this,p),+s.apply(this,(p[0]=v,p)),+o.apply(this,p)),m)return u=null,m+""||null}return c.source=function(m){return arguments.length?(t=m,c):t},c.target=function(m){return arguments.length?(e=m,c):e},c.x=function(m){return arguments.length?(s=typeof m=="function"?m:VE(+m),c):s},c.y=function(m){return arguments.length?(o=typeof m=="function"?m:VE(+m),c):o},c.context=function(m){return arguments.length?(u=m??null,c):u},c}function j3(i,t,e,s,o){i.moveTo(t,e),i.bezierCurveTo(t=(t+s)/2,e,t,o,s,o)}function L3(){return V3(j3)}function P3(i){return[i.source.x1,i.y0]}function U3(i){return[i.target.x0,i.y1]}function z3(){return L3().source(P3).target(U3)}function B3({data:i,height:t=560,nodeWidth:e=16,nodePadding:s=18,onNodeClick:o}){const u=xt.useRef(null),[c,m]=xt.useState(0);return xt.useEffect(()=>{const p=u.current;if(!p)return;const g=new ResizeObserver(v=>{const T=Math.floor(v[0]?.contentRect?.width||0);m(T)});return g.observe(p),m(Math.floor(p.clientWidth||0)),()=>g.disconnect()},[]),xt.useEffect(()=>{const p=u.current;if(!p)return;p.innerHTML="";const g=Math.max(320,c||p.clientWidth||0),v=F4(p).append("svg").attr("width",g).attr("height",t).attr("viewBox",`0 0 ${g} ${t}`).style("display","block"),T=L=>{v.append("text").attr("x",16).attr("y",28).attr("fill","#e2e8f0").attr("font-size",12).text(L)},x={Income:"#22c55e",Fixed:"#f97316",Essential:"#3b82f6",Variable:"#a855f7",Transfers:"#eab308",Leftover:"#10b981"},S=Number(i?.meta?.incomeTotal||0),U=L=>S>0?L/S*100:0,F=L=>`$${Number(L||0).toFixed(2)}`,Z=g<420?10:12;let ot=requestAnimationFrame(()=>{try{const L=Array.isArray(i?.nodes)?i.nodes:[],J=Array.isArray(i?.links)?i.links:[];if(!L.length||!J.length){T("No report data yet  import transactions to see cash flow.");return}const et=new Set(L.map(A=>A?.name).filter(Boolean));for(const A of J)typeof A?.source=="string"&&et.add(A.source),typeof A?.target=="string"&&et.add(A.target);const dt=[...et],rt=new Map(dt.map((A,ct)=>[A,ct])),O=dt.map(A=>({name:A})),C=J.map(A=>{const ct=typeof A.source=="string"?rt.get(A.source):A.source,H=typeof A.target=="string"?rt.get(A.target):A.target,M=Number(A.value||0);return typeof ct!="number"||typeof H!="number"||!Number.isFinite(M)||M<=0?null:{source:ct,target:H,value:M}}).filter(Boolean);if(!C.length){T("Report links are empty after validation.");return}const j=C3().nodeWidth(e).nodePadding(s).extent([[12,12],[g-12,t-12]])({nodes:O.map(A=>({...A})),links:C.map(A=>({...A}))});v.append("g").attr("fill","none").attr("stroke-opacity",.35).selectAll("path").data(j.links).join("path").attr("d",z3()).attr("stroke",A=>{const ct=j.nodes[A.source.index]?.name;return x[ct]||"#94a3b8"}).attr("stroke-width",A=>Math.max(1,A.width)).append("title").text(A=>{const ct=Number(A.value||0),H=j.nodes[A.source.index]?.name,M=j.nodes[A.target.index]?.name;return`${H}  ${M}
${F(ct)} (${U(ct).toFixed(1)}% of income)`});const I=v.append("g").selectAll("g").data(j.nodes).join("g");I.append("rect").attr("x",A=>A.x0).attr("y",A=>A.y0).attr("height",A=>Math.max(1,A.y1-A.y0)).attr("width",A=>A.x1-A.x0).attr("rx",6).attr("fill",A=>x[A.name]||"#64748b").attr("opacity",.9).style("cursor",typeof o=="function"?"pointer":"default").on("click",(A,ct)=>{typeof o=="function"&&o(ct.name,ct)}).append("title").text(A=>{const ct=Number(A.value||0);return`${A.name}
${F(ct)} (${U(ct).toFixed(1)}% of income)`}),I.append("text").attr("x",A=>A.x0<g/2?A.x1+8:A.x0-8).attr("y",A=>(A.y0+A.y1)/2).attr("dy","0.35em").attr("text-anchor",A=>A.x0<g/2?"start":"end").attr("font-size",Z).attr("fill","#e2e8f0").text(A=>A.name)}catch(L){console.error("FlowSankey render error:",L),T(`Sankey render error: ${L?.message||String(L)}`)}});return()=>cancelAnimationFrame(ot)},[i,t,e,s,o,c]),_.jsx("div",{ref:u,style:{width:"100%"}})}const lp={topNPerBucket:10,maxRows:2e4,includeTransfers:!0,preset:"Detailed"};function F3(i){return!i||typeof i!="string"||i.length<7?null:i.slice(0,7)}function up(i){const t=Number(i);return Number.isFinite(t)?t:0}function q3(i=""){let t=String(i).trim().toLowerCase();return t=t.replace(/\s+/g," "),t}function H3(i=""){let t=String(i).trim();return t=t.replace(/[*#]{3,}\w{2,}$/g,"").trim(),t=t.replace(/\b(?:\d{3,}|x{3,}\d+)\b/gi,"").trim(),t=t.replace(/\s+/g," "),t.length>28&&(t=t.slice(0,26)+""),t||"Uncategorized"}const G3=["rent","mortgage","apts","apt","apartment","lease","property management","hoa","insurance","internet","phone","utilities","loan","payment"],$3=["amazon prime","prime membership","netflix","hulu","spotify","youtube premium","rocket money","membership","subscription","icloud","google one","dropbox"],Y3=["grocery","costco","walmart","gas","fuel","medical","pharmacy","power","water"],K3=["transfer","zelle","venmo","cash app","withdrawal","deposit"];function Q3(i=""){const t=i.toLowerCase();return K3.some(e=>t.includes(e))?"Transfers":G3.some(e=>t.includes(e))?"Fixed":$3.some(e=>t.includes(e))?"Subscriptions":Y3.some(e=>t.includes(e))?"Essential":"Variable"}function X3(i,t){const e=[];for(const s of i.entries())e.push(s),e.sort((o,u)=>u[1]-o[1]),e.length>t&&(e.length=t);return e}function Z3({accounts:i=[],monthKey:t,topNPerBucket:e=10,maxRows:s=2e4,includeTransfers:o=!0}){const u=(i||[]).flatMap(L=>L.transactions||[]),c=t?u.filter(L=>F3(L.date)===t):u,m=c.length>s?c.slice(-s):c,p=m.reduce((L,J)=>L+(up(J.amount)>0?up(J.amount):0),0),g=new Map,v=new Map;for(const L of m){const J=up(L.amount);if(!(J<0))continue;const et=q3(L.description||""),dt=H3(L.description||""),rt=Q3(et);if(!o&&rt==="Transfers")continue;const O=Math.abs(J);g.set(rt,(g.get(rt)||0)+O),v.has(rt)||v.set(rt,new Map);const C=v.get(rt);C.set(dt,(C.get(dt)||0)+O)}if(p<=0&&g.size===0)return{nodes:[],links:[],meta:{incomeTotal:0}};const T=o?["Fixed","Subscriptions","Essential","Variable","Transfers"]:["Fixed","Subscriptions","Essential","Variable"],x=[{name:"Income"},...T.map(L=>({name:L}))],S=[];for(const L of T){const J=g.get(L)||0;J>0&&S.push({source:"Income",target:L,value:J})}for(const L of T){const J=v.get(L);if(J)for(const[et,dt]of X3(J,e))x.push({name:et}),S.push({source:L,target:et,value:dt})}const U=T.reduce((L,J)=>J==="Transfers"?L:L+(g.get(J)||0),0),F=Math.max(0,p-U);F>0&&(x.push({name:"Leftover"}),S.push({source:"Income",target:"Leftover",value:F}));const Z=new Set,ot=[];for(const L of x)Z.has(L.name)||(Z.add(L.name),ot.push(L));return{nodes:ot,links:S,meta:{incomeTotal:p,totalIncome:p,spentTotal:U,totalSpent:U,transfersTotal:g.get("Transfers")||0,leftover:F}}}const jE="budgetApp_reportSettings_v1",J3={Minimal:{topNPerBucket:5,maxRows:1e4,includeTransfers:!1,preset:"Minimal"},Detailed:{topNPerBucket:12,maxRows:6e4,includeTransfers:!0,preset:"Detailed"},Audit:{topNPerBucket:30,maxRows:2e5,includeTransfers:!0,preset:"Audit"}};function LE(i,t,e,s){const o=Number(i);return Number.isFinite(o)?Math.max(t,Math.min(e,Math.trunc(o))):s}function W3({accounts:i=[],monthKey:t,onMerchantPick:e}){const[s,o]=xt.useState("overview"),[u,c]=xt.useState({nodes:[],links:[],meta:{incomeTotal:0}}),[m,p]=xt.useState(560);xt.useEffect(()=>{function x(){const S=Math.max(380,Math.min(680,Math.round(window.innerHeight*.55)));p(S)}return x(),window.addEventListener("resize",x),()=>window.removeEventListener("resize",x)},[]);const[g,v]=xt.useState(()=>{try{const x=localStorage.getItem(jE),S=x?JSON.parse(x):null;return{...lp,...S||{}}}catch{return{...lp}}});xt.useEffect(()=>{const x=setTimeout(()=>{c(Z3({accounts:i,monthKey:t,topNPerBucket:g.topNPerBucket,maxRows:g.maxRows,includeTransfers:g.includeTransfers}))},0);return()=>clearTimeout(x)},[i,t,g.topNPerBucket,g.maxRows,g.includeTransfers]),xt.useEffect(()=>{const x=setTimeout(()=>{try{localStorage.setItem(jE,JSON.stringify(g))}catch{}},300);return()=>clearTimeout(x)},[g]);function T(x){const S=J3[x];S&&v(U=>({...U,...S,preset:x}))}return _.jsxs("div",{className:"space-y-3",children:[_.jsx("div",{className:"flex items-center justify-between gap-3",children:_.jsxs("div",{className:"inline-flex rounded-xl border border-slate-800 bg-slate-950/40 p-1",children:[_.jsx("button",{onClick:()=>o("overview"),className:`px-3 py-1.5 text-sm rounded-lg ${s==="overview"?"bg-slate-900 text-slate-100":"text-slate-300 hover:text-slate-100"}`,children:"Overview"}),_.jsx("button",{onClick:()=>o("settings"),className:`px-3 py-1.5 text-sm rounded-lg ${s==="settings"?"bg-slate-900 text-slate-100":"text-slate-300 hover:text-slate-100"}`,children:"Settings"})]})}),s==="overview"&&_.jsx("div",{className:"rounded-2xl border border-slate-800 bg-slate-950/40 p-3",children:_.jsx("div",{className:"hScroll",children:_.jsx("div",{style:{minHeight:m},children:_.jsx(B3,{data:u,height:m,onNodeClick:x=>{!["Income","Fixed","Subscriptions","Essential","Variable","Transfers","Leftover"].includes(x)&&typeof e=="function"&&e(x)}})})})}),s==="settings"&&_.jsxs("div",{className:"rounded-2xl border border-slate-800 bg-slate-950/40 p-4 space-y-5",children:[_.jsxs("div",{className:"space-y-2",children:[_.jsx("div",{className:"text-sm font-medium text-slate-100",children:"Presets"}),_.jsxs("div",{className:"flex flex-wrap gap-2",children:[["Minimal","Detailed","Audit"].map(x=>_.jsx("button",{onClick:()=>T(x),className:"text-sm px-3 py-2 rounded-md border border-slate-800 bg-slate-900 hover:bg-slate-800 text-slate-100",children:x},x)),_.jsx("button",{onClick:()=>v({...lp,preset:"Custom"}),className:"text-sm px-3 py-2 rounded-md border border-slate-800 bg-slate-900 hover:bg-slate-800 text-slate-100",children:"Reset"})]})]}),_.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[_.jsxs("div",{className:"space-y-2",children:[_.jsx("label",{className:"text-slate-100 text-sm font-medium",children:"Top merchants per bucket"}),_.jsx("input",{type:"number",min:1,max:50,value:g.topNPerBucket,onChange:x=>v(S=>({...S,topNPerBucket:LE(x.target.value,1,50,10),preset:"Custom"})),className:"w-full bg-slate-900 border border-slate-800 rounded-md px-3 py-2 text-slate-100"})]}),_.jsxs("div",{className:"space-y-2",children:[_.jsx("label",{className:"text-slate-100 text-sm font-medium",children:"Max rows to process"}),_.jsx("input",{type:"number",min:1e3,max:2e5,step:1e3,value:g.maxRows,onChange:x=>v(S=>({...S,maxRows:LE(x.target.value,1e3,2e5,2e4),preset:"Custom"})),className:"w-full bg-slate-900 border border-slate-800 rounded-md px-3 py-2 text-slate-100"})]}),_.jsxs("div",{className:"flex items-center justify-between gap-4 md:col-span-2",children:[_.jsxs("div",{children:[_.jsx("p",{className:"text-slate-100 text-sm font-medium",children:"Include Transfers"}),_.jsx("p",{className:"text-slate-400 text-xs",children:"Show/hide Transfers bucket in the chart."})]}),_.jsx("input",{type:"checkbox",checked:!!g.includeTransfers,onChange:x=>v(S=>({...S,includeTransfers:x.target.checked,preset:"Custom"})),className:"h-5 w-5"})]})]})]})]})}const Jg="budgetAppState_v1";function t6(){if(typeof window>"u")return null;try{const i=window.localStorage.getItem(Jg);return i?JSON.parse(i):null}catch(i){return console.error("Failed to load stored state",i),null}}function PE(i){if(!(typeof window>"u"))try{window.localStorage.setItem(Jg,JSON.stringify(i))}catch(t){console.error("Failed to save state",t)}}function e6(i){if(!i)return null;if(i.accounts&&Array.isArray(i.accounts))return i;const t={id:"main",name:"Main Account",type:"checking",transactions:Array.isArray(i.transactions)?i.transactions:[]};return{...i,accounts:[t],currentAccountId:i.currentAccountId||"main"}}const Jp=[{key:"dashboard",label:"Dashboard"},{key:"balances",label:"Accounts"},{key:"budget",label:"Budget"},{key:"transactions",label:"Transactions"},{key:"goalDetail",label:"Goals"},{key:"reports",label:"Reports"}],n6=Object.fromEntries(Jp.map(i=>[i.key,i.label])),UE=["monthOverview","accountSnapshot","goals","csvImport"];function cp(){const i=new Date;return`${i.getFullYear()}-${String(i.getMonth()+1).padStart(2,"0")}`}function i6(){const{user:i,authLoading:t,signInWithEmail:e,signUpWithEmail:s,signOut:o,resetPassword:u}=iO();function c(ut="id"){return typeof crypto<"u"&&crypto.randomUUID?crypto.randomUUID():`${ut}-${Date.now()}-${Math.random().toString(16).slice(2)}`}function m(ut=[],bt=[]){const Vt=new Set(ut.map(It=>`${It.date}|${It.amount}|${It.description}|${It.accountId}`)),Et=[...ut];for(const It of bt){const ee=`${It.date}|${It.amount}|${It.description}|${It.accountId}`;Vt.has(ee)||(Vt.add(ee),Et.push(It))}return Et}const p=i?.uid||null,g=yt.useRef(!1),v=yt.useRef(null),T=yt.useRef(null),x=yt.useRef(!1);T.current===null&&(T.current=e6(t6()));const S=T.current,[U,F]=yt.useState(S?.theme||"dark"),[Z,ot]=yt.useState(S?.budgetsByMonth||{}),[L,J]=yt.useState(S?.activeMonth||cp()),[et,dt]=yt.useState(S?.goals||[]),[rt,O]=yt.useState(va(S?.accounts||[])),[C,R]=yt.useState(S?.currentAccountId||"main"),[j,k]=yt.useState(S?.navOrder||Jp.map(ut=>ut.key)),[I,A]=yt.useState(S?.homePage||"dashboard"),[ct,H]=yt.useState(S?.dashboardSectionsOrder||UE),[M,P]=yt.useState(S?.homePage||"dashboard"),[K,q]=yt.useState(Array.isArray(S?.scheduledTemplates)?S.scheduledTemplates:[]),[it,D]=yt.useState(S?.scheduleChecks||{}),[Q,ht]=yt.useState(S?.clientUpdatedAt||0),[mt,gt]=yt.useState(S?.selectedGoalId||null),[St,Rt]=yt.useState(null),[Jt,Xt]=yt.useState(S?.txFilter||""),[ln,bn]=yt.useState(null),[qs,Ur]=yt.useState(null),[Xn,zr]=yt.useState(null),[rr,Br]=yt.useState(!1),Mi=yt.useRef(rt),ye=yt.useRef(Z),xe=yt.useRef(L),jn=yt.useRef(C),sr=yt.useRef(Q);yt.useEffect(()=>{Mi.current=rt},[rt]),yt.useEffect(()=>{ye.current=Z},[Z]),yt.useEffect(()=>{xe.current=L},[L]),yt.useEffect(()=>{jn.current=C},[C]),yt.useEffect(()=>{sr.current=Q},[Q]);function Fr(ut){const bt=ut??(sr.current||Q||0);return{budgetsByMonth:Z,activeMonth:L,goals:et,accounts:rt,currentAccountId:C,navOrder:j,homePage:I,dashboardSectionsOrder:ct,theme:U,txFilter:Jt,selectedGoalId:mt,scheduledTemplates:K,scheduleChecks:it,clientUpdatedAt:bt}}const qe=yt.useRef({files:0,tx:0,newAccounts:0,touchedAccounts:new Set,sources:new Set}),pi=yt.useRef(null);function Hs(){pi.current&&clearTimeout(pi.current),pi.current=setTimeout(()=>{const ut=qe.current;if(!ut||ut.files<=0)return;const bt=ut.touchedAccounts?.size||0,Vt=Array.from(ut.sources||[]);Vt.sort((gi,Wn)=>gi.localeCompare(Wn));const Et=Vt.slice(0,4),It=Math.max(0,Vt.length-Et.length),ee=Et.length>0?` (${Et.join(", ")}${It?`, +${It} more`:""})`:"";let Mt="";ut.files===1?Mt=`Imported ${ut.tx} transaction${ut.tx===1?"":"s"} into ${bt===1?`"${Array.from(ut.touchedAccounts)[0]}"`:"your accounts"}${ee}.`:Mt=`Imported ${ut.tx} transaction${ut.tx===1?"":"s"} from ${ut.files} files into ${bt===1?`"${Array.from(ut.touchedAccounts)[0]}"`:`${bt} accounts`}${ee}.`,ut.newAccounts>0&&(Mt+=` Created ${ut.newAccounts} new account${ut.newAccounts===1?"":"s"}.`),bn({variant:"success",message:Mt}),qe.current={files:0,tx:0,newAccounts:0,touchedAccounts:new Set,sources:new Set}},750)}const En=Z[L]||{month:L,income:0},Ln=yt.useMemo(()=>{const ut=oE(En.fixed||[]),bt=oE(En.variable||[]);return{fixed:ut,variable:bt,leftover:En.income-ut-bt}},[En]),ja=yt.useMemo(()=>g1(U),[U]),{currentAccountBalance:La,totalBalance:Pa}=yt.useMemo(()=>{const ut=Array.isArray(rt)?rt:[],bt=ut.find(ee=>ee.id===C),Vt=ee=>{const Mt=Number(ee?.currentBalance);return Number.isFinite(Mt)?Mt:LO(ee)},Et=bt?Vt(bt):0,It=ut.reduce((ee,Mt)=>ee+Vt(Mt),0);return{currentAccountBalance:Et,totalBalance:It}},[rt,C]);yt.useEffect(()=>{const ut=Array.isArray(rt)?rt:[];if(ut.length===0)return;ut.some(Vt=>Vt.id===C)||R(ut[0].id)},[rt,C]),yt.useEffect(()=>{i?.uid&&(Br(!0),aO(i).then(zr).finally(()=>Br(!1)))},[i?.uid]),yt.useEffect(()=>{if(!p)return;const ut=Iu(Du,"workspaces",p),bt=tO(ut,Vt=>{const Et=Vt.data()?.state;if(!Et)return;const It=Number(Et.clientUpdatedAt)||0,ee=sr.current||0;if(It>ee){g.current=!0,sr.current=It,ot(Mt=>Et.budgetsByMonth??Mt??{}),J(Et.activeMonth||cp()),dt(Mt=>Array.isArray(Et.goals)?Et.goals:Mt),O(Mt=>va(Et.accounts??Mt??[])),R(Et.currentAccountId??jn.current??"main"),k(Mt=>Et.navOrder??Mt??Jp.map(gi=>gi.key)),H(Mt=>Et.dashboardSectionsOrder??Mt??UE),F(Mt=>Et.theme??Mt??"dark"),Xt(Mt=>Et.txFilter??Mt??""),A(Mt=>Et.homePage??Mt??"dashboard"),q(Mt=>Array.isArray(Et.scheduledTemplates)?Et.scheduledTemplates:Mt||[]),D(Mt=>Et.scheduleChecks??Mt??{}),gt(Mt=>Et.selectedGoalId??Mt??null),ht(It||0);return}if(ee>It&&ee>0&&!x.current){const Mt=Fr(ee);x.current=!0,eE(p,Mt).finally(()=>{x.current=!1})}});return()=>bt()},[p]),yt.useEffect(()=>{if(g.current){g.current=!1;const Vt=Fr();PE(Vt);return}const ut=Date.now();sr.current=ut,ht(ut);const bt=Fr(ut);PE(bt),p&&(clearTimeout(v.current),v.current=setTimeout(()=>{eE(p,bt).then(()=>Ur(new Date().toLocaleTimeString())).catch(Vt=>{console.error("Sync save failed",Vt),bn({message:"Sync to cloud failed. Check your connection/Firebase rules.",variant:"info"})})},600))},[p,Z,L,et,rt,C,j,I,ct,U,Jt,mt,K,it]);async function Ua(){window.confirm("Reset all data?")&&(p&&await WD(Iu(Du,"workspaces",p)),localStorage.removeItem(Jg),window.location.reload())}if(!i)return _.jsx(fO,{loading:t,onSignIn:e,onSignUp:s,onResetPassword:u});function Tn(){return typeof crypto<"u"&&crypto.randomUUID?crypto.randomUUID():`tx-${Date.now()}-${Math.random().toString(16).slice(2)}`}function He(ut){return Array.isArray(ut)?ut:[]}function mn(ut=[],bt={}){const Vt=He(ut).map(re=>{const yi=typeof re.amount=="number"?re.amount:Number(re.amount);return{id:re.id||Tn(),date:re.date||"",description:re.description||"",category:re.category||"",amount:Number.isFinite(yi)?yi:NaN,balance:Number.isFinite(Number(re.balance))?Number(re.balance):void 0}}).filter(re=>Number.isFinite(re.amount));if(!Vt.length){bn({message:"No valid transactions were found in that file.",variant:"info"});return}const Et=bt.bank||bt.detectedBank||bt.filename||bt.fileName||"Imported",It=Array.isArray(Mi.current)?Mi.current:[],ee=ye.current||{},Mt=xe.current||cp(),gi=jn.current||"main",Wn=bt.accountId&&typeof bt.accountId=="string"?bt.accountId:null,Pn=Wn?{targetAccountId:Wn,targetAccountName:It.find(re=>re.id===Wn)?.name||Et,createdNew:!It.some(re=>re.id===Wn)}:BO(It,gi,Vt,Et),Ze=Pn.targetAccountId,Gs=Pn.targetAccountName||Et,An=bt?.statement?.statementKey||null,pn=Vt.map(re=>({...re,accountId:Ze,...An?{statementKey:An}:{}})),zt=bt?.statement||null,Oe=zt&&Number.isFinite(Number(zt.endingBalance))&&Number.isFinite(Number(zt.startingBalance))&&typeof zt.statementKey=="string"&&zt.statementKey.length>0,Un=(()=>{const re=Array.isArray(It)?It:[],yi=re.some(Me=>Me.id===Ze),gn=Me=>{const wn=E1(Me.transactions||[],pn),yn=Me.statementBalances&&typeof Me.statementBalances=="object"?Me.statementBalances:{};let ke={...Me,transactions:wn};if(Oe){const ti=zt.endISO||"",we=Date.parse(ti||"")||0,Hr=yn[zt.statementKey]||null,$s={startISO:zt.startISO||"",endISO:zt.endISO||"",statementKey:zt.statementKey,transactionSum:Number(zt.transactionSum||0),startingBalance:Number(zt.startingBalance),endingBalance:Number(zt.endingBalance),balanceSource:zt.balanceSource||"user",confirmedAt:Date.now()};ke={...ke,statementBalances:{...yn,[zt.statementKey]:Hr||$s},lastConfirmedEndingBalance:Number(zt.endingBalance),lastStatementEndISO:zt.endISO||"",lastStatementKey:zt.statementKey};const ei=Date.parse(ke.currentBalanceAsOf||"")||0;we>=ei&&(ke={...ke,currentBalance:Number(zt.endingBalance),currentBalanceAsOf:zt.endISO||""})}return ke};if(Pn.createdNew||!yi){const Me=gn({id:Ze,name:Gs,type:Pn.accounts?.find(wn=>wn.id===Ze)?.type||"checking",startingBalance:0,transactions:[],createdAt:Date.now(),statementBalances:{}});return va([...re,Me])}return va(re.map(Me=>Me.id===Ze?gn(Me):Me))})(),ar=(()=>{const re=ee?.[Mt]||{month:Mt,income:0,fixed:[],variable:[],transactions:[]},yi=Array.isArray(re.transactions)?re.transactions:[],gn=m(yi,pn);return{...ee,[Mt]:{...re,transactions:gn}}})();Mi.current=Un,ye.current=ar,jn.current=Ze,O(Un),ot(ar),R(Ze);const or=qe.current;or.files+=1,or.tx+=pn.length,Pn.createdNew&&(or.newAccounts+=1),or.touchedAccounts.add(Gs),or.sources.add(Et),Hs()}function be(){const ut=`Account ${rt.length+1}`,bt=c("acct"),Vt={id:bt,name:ut,type:"checking",startingBalance:0,transactions:[],createdAt:Date.now(),statementBalances:{}};O(Et=>va([...Array.isArray(Et)?Et:[],Vt])),R(bt),bn({variant:"success",message:`Created ${ut}`})}function za(ut){ut&&window.confirm("Delete this account? Transactions tied to it will remain in budgets but the account will be removed.")&&O(bt=>{const Et=(Array.isArray(bt)?bt:[]).filter(It=>It.id!==ut);return C===ut&&R(Et[0]?.id||"main"),Et})}function qr(ut,bt){const Vt=Number(bt);O(Et=>va((Array.isArray(Et)?Et:[]).map(It=>It.id===ut?{...It,startingBalance:Number.isFinite(Vt)?Vt:0}:It)))}function Ba(ut,bt){const Vt=(bt||"").trim()||"Account";O(Et=>va((Array.isArray(Et)?Et:[]).map(It=>It.id===ut?{...It,name:Vt}:It)))}function xn(ut){ot(bt=>{const Vt=bt?.[L]||{month:L,income:0,fixed:[],variable:[],transactions:[]},Et=ut?ut(Vt):Vt;return{...bt,[L]:Et}})}function ki(ut){xn(bt=>{const Vt=Array.isArray(bt.transactions)?bt.transactions:[],Et=Number(ut?.amount),It=Number.isFinite(Et)?Et:0,ee={id:ut?.id||Tn(),date:ut?.date||"",description:ut?.description||"",category:ut?.category||"",accountId:ut?.accountId||C||"main",flowType:ut?.flowType,amount:It};return{...bt,transactions:[ee,...Vt]}})}function Ae(ut,bt={}){xn(Vt=>{const It=(Array.isArray(Vt.transactions)?Vt.transactions:[]).map((ee,Mt)=>Mt===ut?{...ee,...bt}:ee);return{...Vt,transactions:It}})}function Zn(ut){xn(bt=>{const Et=(Array.isArray(bt.transactions)?bt.transactions:[]).filter((It,ee)=>ee!==ut);return{...bt,transactions:Et}})}const Jn=(Array.isArray(et)?et:[]).find(ut=>ut.id===mt)||null;return _.jsxs("div",{className:`app-shell ${ja.shellClass}`,children:[_.jsx("header",{className:ja.headerClass,children:_.jsxs("div",{className:"content headerRow",children:[_.jsxs("div",{className:"brandAndNav",children:[_.jsx("span",{className:"appTitle",children:"BUDGET CENTER"}),_.jsx("div",{className:"navRow","aria-label":"Primary navigation",children:j.map(ut=>_.jsx(lO,{label:n6[ut],active:M===ut,onClick:()=>P(ut)},ut))})]}),_.jsxs("div",{className:"headerRight",children:[_.jsx(pO,{profile:Xn,email:i.email,loading:rr,onUpdateProfile:ut=>oO(i.uid,ut).then(zr)}),_.jsx(hO,{onReset:Ua,onSignOut:o,themeValue:U,onChangeTheme:F})]})]})}),_.jsxs("main",{className:"content",children:[M==="dashboard"&&_.jsx(jO,{month:L,income:En.income,fixed:Ln.fixed,variable:Ln.variable,leftover:Ln.leftover,goals:et,accounts:rt,currentAccountId:C,onChangeCurrentAccount:R,transactions:En.transactions||[],currentAccountBalance:La,totalBalance:Pa,onCsvImported:mn,onTransactionsParsed:mn,sectionsOrder:ct,onCreateGoal:()=>{gt(null),Rt("create"),P("goalDetail")},onOpenGoal:ut=>{ut&&(gt(ut),Rt("edit"),P("goalDetail"))}}),M==="balances"&&_.jsx(qO,{accounts:rt,currentAccountId:C,onChangeCurrentAccount:R,onAccountsChange:O,onCreateAccount:be,onDeleteAccount:za,onSetAccountBalance:qr,onRenameAccount:Ba}),M==="budget"&&_.jsx(tM,{month:L,budget:En,totals:Ln,budgetsByMonth:Z,onBudgetChange:ut=>ot(bt=>({...bt,[L]:ut})),scheduledTemplates:K,scheduleChecks:it,onScheduledTemplatesChange:q,onScheduleChecksChange:D,accounts:rt,currentAccountId:C,onAddTransaction:ki}),M==="transactions"&&_.jsx(rM,{accounts:rt,currentAccountId:C,transactions:En.transactions||[],filter:Jt,onFilterChange:Xt,scheduledTemplates:K,scheduleChecks:it,onScheduledTemplatesChange:q,onScheduleChecksChange:D,onAddTransaction:ki,onUpdateTransaction:Ae,onDeleteTransaction:Zn,onUpdateBudget:ut=>ot(bt=>({...bt,[L]:ut}))}),M==="goalDetail"&&_.jsx(aM,{goals:et,goal:Jn,mode:St||"edit",onSelectGoal:ut=>{gt(ut),Rt("edit")},onRequestCreateGoal:()=>{const ut={id:c("goal"),name:"New Goal",target:1e3,saved:0,monthlyPlan:0,emoji:"",createdAt:Date.now()};dt(bt=>[ut,...Array.isArray(bt)?bt:[]]),gt(ut.id),Rt("edit")},onEditGoal:()=>{},onDeleteGoal:()=>{},onDuplicateGoal:()=>{},onExportGoal:()=>{},onAddContributionRequest:()=>{}}),M==="reports"&&_.jsx(W3,{accounts:rt,monthKey:L,onMerchantPick:ut=>{Xt(ut),P("transactions")}})]}),ln&&_.jsx(dO,{...ln,onClose:()=>bn(null)})]})}Lw.createRoot(document.getElementById("root")).render(_.jsx(yt.StrictMode,{children:_.jsx(nO,{children:_.jsx(i6,{})})}));export{Nr as a,_1 as c,v1 as p};
//# sourceMappingURL=index-ClZ0FR7b.js.map
