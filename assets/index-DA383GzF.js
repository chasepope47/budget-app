(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const u of c.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&s(u)}).observe(document,{childList:!0,subtree:!0});function t(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(o){if(o.ep)return;o.ep=!0;const c=t(o);fetch(o.href,c)}})();function jA(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var $m={exports:{}},Gl={};var Dv;function LA(){if(Dv)return Gl;Dv=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(s,o,c){var u=null;if(c!==void 0&&(u=""+c),o.key!==void 0&&(u=""+o.key),"key"in o){c={};for(var m in o)m!=="key"&&(c[m]=o[m])}else c=o;return o=c.ref,{$$typeof:i,type:s,key:u,ref:o!==void 0?o:null,props:c}}return Gl.Fragment=e,Gl.jsx=t,Gl.jsxs=t,Gl}var Mv;function PA(){return Mv||(Mv=1,$m.exports=LA()),$m.exports}var y=PA(),Ym={exports:{}},Oe={};var Ov;function UA(){if(Ov)return Oe;Ov=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),u=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),x=Symbol.for("react.activity"),T=Symbol.iterator;function I(M){return M===null||typeof M!="object"?null:(M=T&&M[T]||M["@@iterator"],typeof M=="function"?M:null)}var U={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},q=Object.assign,$={};function ce(M,X,fe){this.props=M,this.context=X,this.refs=$,this.updater=fe||U}ce.prototype.isReactComponent={},ce.prototype.setState=function(M,X){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,X,"setState")},ce.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function G(){}G.prototype=ce.prototype;function te(M,X,fe){this.props=M,this.context=X,this.refs=$,this.updater=fe||U}var ie=te.prototype=new G;ie.constructor=te,q(ie,ce.prototype),ie.isPureReactComponent=!0;var de=Array.isArray;function he(){}var D={H:null,A:null,T:null,S:null},C=Object.prototype.hasOwnProperty;function N(M,X,fe){var me=fe.ref;return{$$typeof:i,type:M,key:X,ref:me!==void 0?me:null,props:fe}}function O(M,X){return N(M.type,X,M.props)}function k(M){return typeof M=="object"&&M!==null&&M.$$typeof===i}function R(M){var X={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(fe){return X[fe]})}var w=/\/+/g;function oe(M,X){return typeof M=="object"&&M!==null&&M.key!=null?R(""+M.key):X.toString(36)}function F(M){switch(M.status){case"fulfilled":return M.value;case"rejected":throw M.reason;default:switch(typeof M.status=="string"?M.then(he,he):(M.status="pending",M.then(function(X){M.status==="pending"&&(M.status="fulfilled",M.value=X)},function(X){M.status==="pending"&&(M.status="rejected",M.reason=X)})),M.status){case"fulfilled":return M.value;case"rejected":throw M.reason}}throw M}function j(M,X,fe,me,ye){var se=typeof M;(se==="undefined"||se==="boolean")&&(M=null);var ge=!1;if(M===null)ge=!0;else switch(se){case"bigint":case"string":case"number":ge=!0;break;case"object":switch(M.$$typeof){case i:case e:ge=!0;break;case v:return ge=M._init,j(ge(M._payload),X,fe,me,ye)}}if(ge)return ye=ye(M),ge=me===""?"."+oe(M,0):me,de(ye)?(fe="",ge!=null&&(fe=ge.replace(w,"$&/")+"/"),j(ye,X,fe,"",function(at){return at})):ye!=null&&(k(ye)&&(ye=O(ye,fe+(ye.key==null||M&&M.key===ye.key?"":(""+ye.key).replace(w,"$&/")+"/")+ge)),X.push(ye)),1;ge=0;var Se=me===""?".":me+":";if(de(M))for(var Ne=0;Ne<M.length;Ne++)me=M[Ne],se=Se+oe(me,Ne),ge+=j(me,X,fe,se,ye);else if(Ne=I(M),typeof Ne=="function")for(M=Ne.call(M),Ne=0;!(me=M.next()).done;)me=me.value,se=Se+oe(me,Ne++),ge+=j(me,X,fe,se,ye);else if(se==="object"){if(typeof M.then=="function")return j(F(M),X,fe,me,ye);throw X=String(M),Error("Objects are not valid as a React child (found: "+(X==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":X)+"). If you meant to render a collection of children, use an array instead.")}return ge}function z(M,X,fe){if(M==null)return M;var me=[],ye=0;return j(M,me,"","",function(se){return X.call(fe,se,ye++)}),me}function W(M){if(M._status===-1){var X=M._result;X=X(),X.then(function(fe){(M._status===0||M._status===-1)&&(M._status=1,M._result=fe)},function(fe){(M._status===0||M._status===-1)&&(M._status=2,M._result=fe)}),M._status===-1&&(M._status=0,M._result=X)}if(M._status===1)return M._result.default;throw M._result}var L=typeof reportError=="function"?reportError:function(M){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var X=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof M=="object"&&M!==null&&typeof M.message=="string"?String(M.message):String(M),error:M});if(!window.dispatchEvent(X))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",M);return}console.error(M)},K={map:z,forEach:function(M,X,fe){z(M,function(){X.apply(this,arguments)},fe)},count:function(M){var X=0;return z(M,function(){X++}),X},toArray:function(M){return z(M,function(X){return X})||[]},only:function(M){if(!k(M))throw Error("React.Children.only expected to receive a single React element child.");return M}};return Oe.Activity=x,Oe.Children=K,Oe.Component=ce,Oe.Fragment=t,Oe.Profiler=o,Oe.PureComponent=te,Oe.StrictMode=s,Oe.Suspense=p,Oe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=D,Oe.__COMPILER_RUNTIME={__proto__:null,c:function(M){return D.H.useMemoCache(M)}},Oe.cache=function(M){return function(){return M.apply(null,arguments)}},Oe.cacheSignal=function(){return null},Oe.cloneElement=function(M,X,fe){if(M==null)throw Error("The argument must be a React element, but you passed "+M+".");var me=q({},M.props),ye=M.key;if(X!=null)for(se in X.key!==void 0&&(ye=""+X.key),X)!C.call(X,se)||se==="key"||se==="__self"||se==="__source"||se==="ref"&&X.ref===void 0||(me[se]=X[se]);var se=arguments.length-2;if(se===1)me.children=fe;else if(1<se){for(var ge=Array(se),Se=0;Se<se;Se++)ge[Se]=arguments[Se+2];me.children=ge}return N(M.type,ye,me)},Oe.createContext=function(M){return M={$$typeof:u,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null},M.Provider=M,M.Consumer={$$typeof:c,_context:M},M},Oe.createElement=function(M,X,fe){var me,ye={},se=null;if(X!=null)for(me in X.key!==void 0&&(se=""+X.key),X)C.call(X,me)&&me!=="key"&&me!=="__self"&&me!=="__source"&&(ye[me]=X[me]);var ge=arguments.length-2;if(ge===1)ye.children=fe;else if(1<ge){for(var Se=Array(ge),Ne=0;Ne<ge;Ne++)Se[Ne]=arguments[Ne+2];ye.children=Se}if(M&&M.defaultProps)for(me in ge=M.defaultProps,ge)ye[me]===void 0&&(ye[me]=ge[me]);return N(M,se,ye)},Oe.createRef=function(){return{current:null}},Oe.forwardRef=function(M){return{$$typeof:m,render:M}},Oe.isValidElement=k,Oe.lazy=function(M){return{$$typeof:v,_payload:{_status:-1,_result:M},_init:W}},Oe.memo=function(M,X){return{$$typeof:g,type:M,compare:X===void 0?null:X}},Oe.startTransition=function(M){var X=D.T,fe={};D.T=fe;try{var me=M(),ye=D.S;ye!==null&&ye(fe,me),typeof me=="object"&&me!==null&&typeof me.then=="function"&&me.then(he,L)}catch(se){L(se)}finally{X!==null&&fe.types!==null&&(X.types=fe.types),D.T=X}},Oe.unstable_useCacheRefresh=function(){return D.H.useCacheRefresh()},Oe.use=function(M){return D.H.use(M)},Oe.useActionState=function(M,X,fe){return D.H.useActionState(M,X,fe)},Oe.useCallback=function(M,X){return D.H.useCallback(M,X)},Oe.useContext=function(M){return D.H.useContext(M)},Oe.useDebugValue=function(){},Oe.useDeferredValue=function(M,X){return D.H.useDeferredValue(M,X)},Oe.useEffect=function(M,X){return D.H.useEffect(M,X)},Oe.useEffectEvent=function(M){return D.H.useEffectEvent(M)},Oe.useId=function(){return D.H.useId()},Oe.useImperativeHandle=function(M,X,fe){return D.H.useImperativeHandle(M,X,fe)},Oe.useInsertionEffect=function(M,X){return D.H.useInsertionEffect(M,X)},Oe.useLayoutEffect=function(M,X){return D.H.useLayoutEffect(M,X)},Oe.useMemo=function(M,X){return D.H.useMemo(M,X)},Oe.useOptimistic=function(M,X){return D.H.useOptimistic(M,X)},Oe.useReducer=function(M,X,fe){return D.H.useReducer(M,X,fe)},Oe.useRef=function(M){return D.H.useRef(M)},Oe.useState=function(M){return D.H.useState(M)},Oe.useSyncExternalStore=function(M,X,fe){return D.H.useSyncExternalStore(M,X,fe)},Oe.useTransition=function(){return D.H.useTransition()},Oe.version="19.2.1",Oe}var kv;function ag(){return kv||(kv=1,Ym.exports=UA()),Ym.exports}var Ee=ag();const Te=jA(Ee);var Qm={exports:{}},$l={},Km={exports:{}},Xm={};var Vv;function zA(){return Vv||(Vv=1,(function(i){function e(j,z){var W=j.length;j.push(z);e:for(;0<W;){var L=W-1>>>1,K=j[L];if(0<o(K,z))j[L]=z,j[W]=K,W=L;else break e}}function t(j){return j.length===0?null:j[0]}function s(j){if(j.length===0)return null;var z=j[0],W=j.pop();if(W!==z){j[0]=W;e:for(var L=0,K=j.length,M=K>>>1;L<M;){var X=2*(L+1)-1,fe=j[X],me=X+1,ye=j[me];if(0>o(fe,W))me<K&&0>o(ye,fe)?(j[L]=ye,j[me]=W,L=me):(j[L]=fe,j[X]=W,L=X);else if(me<K&&0>o(ye,W))j[L]=ye,j[me]=W,L=me;else break e}}return z}function o(j,z){var W=j.sortIndex-z.sortIndex;return W!==0?W:j.id-z.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;i.unstable_now=function(){return c.now()}}else{var u=Date,m=u.now();i.unstable_now=function(){return u.now()-m}}var p=[],g=[],v=1,x=null,T=3,I=!1,U=!1,q=!1,$=!1,ce=typeof setTimeout=="function"?setTimeout:null,G=typeof clearTimeout=="function"?clearTimeout:null,te=typeof setImmediate<"u"?setImmediate:null;function ie(j){for(var z=t(g);z!==null;){if(z.callback===null)s(g);else if(z.startTime<=j)s(g),z.sortIndex=z.expirationTime,e(p,z);else break;z=t(g)}}function de(j){if(q=!1,ie(j),!U)if(t(p)!==null)U=!0,he||(he=!0,R());else{var z=t(g);z!==null&&F(de,z.startTime-j)}}var he=!1,D=-1,C=5,N=-1;function O(){return $?!0:!(i.unstable_now()-N<C)}function k(){if($=!1,he){var j=i.unstable_now();N=j;var z=!0;try{e:{U=!1,q&&(q=!1,G(D),D=-1),I=!0;var W=T;try{t:{for(ie(j),x=t(p);x!==null&&!(x.expirationTime>j&&O());){var L=x.callback;if(typeof L=="function"){x.callback=null,T=x.priorityLevel;var K=L(x.expirationTime<=j);if(j=i.unstable_now(),typeof K=="function"){x.callback=K,ie(j),z=!0;break t}x===t(p)&&s(p),ie(j)}else s(p);x=t(p)}if(x!==null)z=!0;else{var M=t(g);M!==null&&F(de,M.startTime-j),z=!1}}break e}finally{x=null,T=W,I=!1}z=void 0}}finally{z?R():he=!1}}}var R;if(typeof te=="function")R=function(){te(k)};else if(typeof MessageChannel<"u"){var w=new MessageChannel,oe=w.port2;w.port1.onmessage=k,R=function(){oe.postMessage(null)}}else R=function(){ce(k,0)};function F(j,z){D=ce(function(){j(i.unstable_now())},z)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(j){j.callback=null},i.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<j?Math.floor(1e3/j):5},i.unstable_getCurrentPriorityLevel=function(){return T},i.unstable_next=function(j){switch(T){case 1:case 2:case 3:var z=3;break;default:z=T}var W=T;T=z;try{return j()}finally{T=W}},i.unstable_requestPaint=function(){$=!0},i.unstable_runWithPriority=function(j,z){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var W=T;T=j;try{return z()}finally{T=W}},i.unstable_scheduleCallback=function(j,z,W){var L=i.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?L+W:L):W=L,j){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=W+K,j={id:v++,callback:z,priorityLevel:j,startTime:W,expirationTime:K,sortIndex:-1},W>L?(j.sortIndex=W,e(g,j),t(p)===null&&j===t(g)&&(q?(G(D),D=-1):q=!0,F(de,W-L))):(j.sortIndex=K,e(p,j),U||I||(U=!0,he||(he=!0,R()))),j},i.unstable_shouldYield=O,i.unstable_wrapCallback=function(j){var z=T;return function(){var W=T;T=z;try{return j.apply(this,arguments)}finally{T=W}}}})(Xm)),Xm}var jv;function BA(){return jv||(jv=1,Km.exports=zA()),Km.exports}var Wm={exports:{}},Jt={};var Lv;function qA(){if(Lv)return Jt;Lv=1;var i=ag();function e(p){var g="https://react.dev/errors/"+p;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)g+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+p+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var s={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},o=Symbol.for("react.portal");function c(p,g,v){var x=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:x==null?null:""+x,children:p,containerInfo:g,implementation:v}}var u=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(p,g){if(p==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return Jt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Jt.createPortal=function(p,g){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(e(299));return c(p,g,null,v)},Jt.flushSync=function(p){var g=u.T,v=s.p;try{if(u.T=null,s.p=2,p)return p()}finally{u.T=g,s.p=v,s.d.f()}},Jt.preconnect=function(p,g){typeof p=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,s.d.C(p,g))},Jt.prefetchDNS=function(p){typeof p=="string"&&s.d.D(p)},Jt.preinit=function(p,g){if(typeof p=="string"&&g&&typeof g.as=="string"){var v=g.as,x=m(v,g.crossOrigin),T=typeof g.integrity=="string"?g.integrity:void 0,I=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;v==="style"?s.d.S(p,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:x,integrity:T,fetchPriority:I}):v==="script"&&s.d.X(p,{crossOrigin:x,integrity:T,fetchPriority:I,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},Jt.preinitModule=function(p,g){if(typeof p=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var v=m(g.as,g.crossOrigin);s.d.M(p,{crossOrigin:v,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&s.d.M(p)},Jt.preload=function(p,g){if(typeof p=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var v=g.as,x=m(v,g.crossOrigin);s.d.L(p,v,{crossOrigin:x,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},Jt.preloadModule=function(p,g){if(typeof p=="string")if(g){var v=m(g.as,g.crossOrigin);s.d.m(p,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:v,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else s.d.m(p)},Jt.requestFormReset=function(p){s.d.r(p)},Jt.unstable_batchedUpdates=function(p,g){return p(g)},Jt.useFormState=function(p,g,v){return u.H.useFormState(p,g,v)},Jt.useFormStatus=function(){return u.H.useHostTransitionStatus()},Jt.version="19.2.1",Jt}var Pv;function FA(){if(Pv)return Wm.exports;Pv=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),Wm.exports=qA(),Wm.exports}var Uv;function HA(){if(Uv)return $l;Uv=1;var i=BA(),e=ag(),t=FA();function s(n){var r="https://react.dev/errors/"+n;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)r+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+n+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function c(n){var r=n,a=n;if(n.alternate)for(;r.return;)r=r.return;else{n=r;do r=n,(r.flags&4098)!==0&&(a=r.return),n=r.return;while(n)}return r.tag===3?a:null}function u(n){if(n.tag===13){var r=n.memoizedState;if(r===null&&(n=n.alternate,n!==null&&(r=n.memoizedState)),r!==null)return r.dehydrated}return null}function m(n){if(n.tag===31){var r=n.memoizedState;if(r===null&&(n=n.alternate,n!==null&&(r=n.memoizedState)),r!==null)return r.dehydrated}return null}function p(n){if(c(n)!==n)throw Error(s(188))}function g(n){var r=n.alternate;if(!r){if(r=c(n),r===null)throw Error(s(188));return r!==n?null:n}for(var a=n,l=r;;){var f=a.return;if(f===null)break;var d=f.alternate;if(d===null){if(l=f.return,l!==null){a=l;continue}break}if(f.child===d.child){for(d=f.child;d;){if(d===a)return p(f),n;if(d===l)return p(f),r;d=d.sibling}throw Error(s(188))}if(a.return!==l.return)a=f,l=d;else{for(var b=!1,A=f.child;A;){if(A===a){b=!0,a=f,l=d;break}if(A===l){b=!0,l=f,a=d;break}A=A.sibling}if(!b){for(A=d.child;A;){if(A===a){b=!0,a=d,l=f;break}if(A===l){b=!0,l=d,a=f;break}A=A.sibling}if(!b)throw Error(s(189))}}if(a.alternate!==l)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?n:r}function v(n){var r=n.tag;if(r===5||r===26||r===27||r===6)return n;for(n=n.child;n!==null;){if(r=v(n),r!==null)return r;n=n.sibling}return null}var x=Object.assign,T=Symbol.for("react.element"),I=Symbol.for("react.transitional.element"),U=Symbol.for("react.portal"),q=Symbol.for("react.fragment"),$=Symbol.for("react.strict_mode"),ce=Symbol.for("react.profiler"),G=Symbol.for("react.consumer"),te=Symbol.for("react.context"),ie=Symbol.for("react.forward_ref"),de=Symbol.for("react.suspense"),he=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),C=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),O=Symbol.for("react.memo_cache_sentinel"),k=Symbol.iterator;function R(n){return n===null||typeof n!="object"?null:(n=k&&n[k]||n["@@iterator"],typeof n=="function"?n:null)}var w=Symbol.for("react.client.reference");function oe(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===w?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case q:return"Fragment";case ce:return"Profiler";case $:return"StrictMode";case de:return"Suspense";case he:return"SuspenseList";case N:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case U:return"Portal";case te:return n.displayName||"Context";case G:return(n._context.displayName||"Context")+".Consumer";case ie:var r=n.render;return n=n.displayName,n||(n=r.displayName||r.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case D:return r=n.displayName||null,r!==null?r:oe(n.type)||"Memo";case C:r=n._payload,n=n._init;try{return oe(n(r))}catch{}}return null}var F=Array.isArray,j=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,z=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,W={pending:!1,data:null,method:null,action:null},L=[],K=-1;function M(n){return{current:n}}function X(n){0>K||(n.current=L[K],L[K]=null,K--)}function fe(n,r){K++,L[K]=n.current,n.current=r}var me=M(null),ye=M(null),se=M(null),ge=M(null);function Se(n,r){switch(fe(se,r),fe(ye,n),fe(me,null),r.nodeType){case 9:case 11:n=(n=r.documentElement)&&(n=n.namespaceURI)?ev(n):0;break;default:if(n=r.tagName,r=r.namespaceURI)r=ev(r),n=tv(r,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}X(me),fe(me,n)}function Ne(){X(me),X(ye),X(se)}function at(n){n.memoizedState!==null&&fe(ge,n);var r=me.current,a=tv(r,n.type);r!==a&&(fe(ye,n),fe(me,a))}function Me(n){ye.current===n&&(X(me),X(ye)),ge.current===n&&(X(ge),Bl._currentValue=W)}var tt,sn;function jt(n){if(tt===void 0)try{throw Error()}catch(a){var r=a.stack.trim().match(/\n( *(at )?)/);tt=r&&r[1]||"",sn=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+tt+n+sn}var Kn=!1;function mi(n,r){if(!n||Kn)return"";Kn=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(r){var le=function(){throw Error()};if(Object.defineProperty(le.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(le,[])}catch(ee){var Z=ee}Reflect.construct(n,[],le)}else{try{le.call()}catch(ee){Z=ee}n.call(le.prototype)}}else{try{throw Error()}catch(ee){Z=ee}(le=n())&&typeof le.catch=="function"&&le.catch(function(){})}}catch(ee){if(ee&&Z&&typeof ee.stack=="string")return[ee.stack,Z.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=l.DetermineComponentFrameRoot(),b=d[0],A=d[1];if(b&&A){var V=b.split(`
`),Q=A.split(`
`);for(f=l=0;l<V.length&&!V[l].includes("DetermineComponentFrameRoot");)l++;for(;f<Q.length&&!Q[f].includes("DetermineComponentFrameRoot");)f++;if(l===V.length||f===Q.length)for(l=V.length-1,f=Q.length-1;1<=l&&0<=f&&V[l]!==Q[f];)f--;for(;1<=l&&0<=f;l--,f--)if(V[l]!==Q[f]){if(l!==1||f!==1)do if(l--,f--,0>f||V[l]!==Q[f]){var ne=`
`+V[l].replace(" at new "," at ");return n.displayName&&ne.includes("<anonymous>")&&(ne=ne.replace("<anonymous>",n.displayName)),ne}while(1<=l&&0<=f);break}}}finally{Kn=!1,Error.prepareStackTrace=a}return(a=n?n.displayName||n.name:"")?jt(a):""}function Ds(n,r){switch(n.tag){case 26:case 27:case 5:return jt(n.type);case 16:return jt("Lazy");case 13:return n.child!==r&&r!==null?jt("Suspense Fallback"):jt("Suspense");case 19:return jt("SuspenseList");case 0:case 15:return mi(n.type,!1);case 11:return mi(n.type.render,!1);case 1:return mi(n.type,!0);case 31:return jt("Activity");default:return""}}function Cr(n){try{var r="",a=null;do r+=Ds(n,a),a=n,n=n.return;while(n);return r}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var pt=Object.prototype.hasOwnProperty,gt=i.unstable_scheduleCallback,Rr=i.unstable_cancelCallback,Qf=i.unstable_shouldYield,Fc=i.unstable_requestPaint,an=i.unstable_now,Ms=i.unstable_getCurrentPriorityLevel,Ho=i.unstable_ImmediatePriority,Go=i.unstable_UserBlockingPriority,Ir=i.unstable_NormalPriority,Kf=i.unstable_LowPriority,Hc=i.unstable_IdlePriority,Gc=i.log,$c=i.unstable_setDisableYieldValue,Xn=null,Ht=null;function kn(n){if(typeof Gc=="function"&&$c(n),Ht&&typeof Ht.setStrictMode=="function")try{Ht.setStrictMode(Xn,n)}catch{}}var bt=Math.clz32?Math.clz32:Qc,Yc=Math.log,Sa=Math.LN2;function Qc(n){return n>>>=0,n===0?32:31-(Yc(n)/Sa|0)|0}var pi=256,Os=262144,At=4194304;function gi(n){var r=n&42;if(r!==0)return r;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function yi(n,r,a){var l=n.pendingLanes;if(l===0)return 0;var f=0,d=n.suspendedLanes,b=n.pingedLanes;n=n.warmLanes;var A=l&134217727;return A!==0?(l=A&~d,l!==0?f=gi(l):(b&=A,b!==0?f=gi(b):a||(a=A&~n,a!==0&&(f=gi(a))))):(A=l&~d,A!==0?f=gi(A):b!==0?f=gi(b):a||(a=l&~n,a!==0&&(f=gi(a)))),f===0?0:r!==0&&r!==f&&(r&d)===0&&(d=f&-f,a=r&-r,d>=a||d===32&&(a&4194048)!==0)?r:f}function Wn(n,r){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&r)===0}function Xf(n,r){switch(n){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Kc(){var n=At;return At<<=1,(At&62914560)===0&&(At=4194304),n}function _i(n){for(var r=[],a=0;31>a;a++)r.push(n);return r}function ks(n,r){n.pendingLanes|=r,r!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function Wf(n,r,a,l,f,d){var b=n.pendingLanes;n.pendingLanes=a,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=a,n.entangledLanes&=a,n.errorRecoveryDisabledLanes&=a,n.shellSuspendCounter=0;var A=n.entanglements,V=n.expirationTimes,Q=n.hiddenUpdates;for(a=b&~a;0<a;){var ne=31-bt(a),le=1<<ne;A[ne]=0,V[ne]=-1;var Z=Q[ne];if(Z!==null)for(Q[ne]=null,ne=0;ne<Z.length;ne++){var ee=Z[ne];ee!==null&&(ee.lane&=-536870913)}a&=~le}l!==0&&Vs(n,l,0),d!==0&&f===0&&n.tag!==0&&(n.suspendedLanes|=d&~(b&~r))}function Vs(n,r,a){n.pendingLanes|=r,n.suspendedLanes&=~r;var l=31-bt(r);n.entangledLanes|=r,n.entanglements[l]=n.entanglements[l]|1073741824|a&261930}function $o(n,r){var a=n.entangledLanes|=r;for(n=n.entanglements;a;){var l=31-bt(a),f=1<<l;f&r|n[l]&r&&(n[l]|=r),a&=~f}}function Yo(n,r){var a=r&-r;return a=(a&42)!==0?1:js(a),(a&(n.suspendedLanes|r))!==0?0:a}function js(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function Yi(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function Xc(){var n=z.p;return n!==0?n:(n=window.event,n===void 0?32:wv(n.type))}function Zn(n,r){var a=z.p;try{return z.p=n,r()}finally{z.p=a}}var Jn=Math.random().toString(36).slice(2),St="__reactFiber$"+Jn,zt="__reactProps$"+Jn,vi="__reactContainer$"+Jn,Na="__reactEvents$"+Jn,Zf="__reactListeners$"+Jn,Wc="__reactHandles$"+Jn,Zc="__reactResources$"+Jn,bi="__reactMarker$"+Jn;function Ca(n){delete n[St],delete n[zt],delete n[Na],delete n[Zf],delete n[Wc]}function xi(n){var r=n[St];if(r)return r;for(var a=n.parentNode;a;){if(r=a[vi]||a[St]){if(a=r.alternate,r.child!==null||a!==null&&a.child!==null)for(n=lv(n);n!==null;){if(a=n[St])return a;n=lv(n)}return r}n=a,a=n.parentNode}return null}function Vn(n){if(n=n[St]||n[vi]){var r=n.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return n}return null}function bn(n){var r=n.tag;if(r===5||r===26||r===27||r===6)return n.stateNode;throw Error(s(33))}function Ei(n){var r=n[Zc];return r||(r=n[Zc]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function Nt(n){n[bi]=!0}var Qo=new Set,Ko={};function Ti(n,r){wi(n,r),wi(n+"Capture",r)}function wi(n,r){for(Ko[n]=r,n=0;n<r.length;n++)Qo.add(r[n])}var Xo=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Wo={},Zo={};function Jc(n){return pt.call(Zo,n)?!0:pt.call(Wo,n)?!1:Xo.test(n)?Zo[n]=!0:(Wo[n]=!0,!1)}function Ra(n,r,a){if(Jc(r))if(a===null)n.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":n.removeAttribute(r);return;case"boolean":var l=r.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){n.removeAttribute(r);return}}n.setAttribute(r,""+a)}}function xn(n,r,a){if(a===null)n.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(r);return}n.setAttribute(r,""+a)}}function Ct(n,r,a,l){if(l===null)n.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(a);return}n.setAttributeNS(r,a,""+l)}}function Bt(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Dr(n){var r=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function Jo(n,r,a){var l=Object.getOwnPropertyDescriptor(n.constructor.prototype,r);if(!n.hasOwnProperty(r)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var f=l.get,d=l.set;return Object.defineProperty(n,r,{configurable:!0,get:function(){return f.call(this)},set:function(b){a=""+b,d.call(this,b)}}),Object.defineProperty(n,r,{enumerable:l.enumerable}),{getValue:function(){return a},setValue:function(b){a=""+b},stopTracking:function(){n._valueTracker=null,delete n[r]}}}}function Ze(n){if(!n._valueTracker){var r=Dr(n)?"checked":"value";n._valueTracker=Jo(n,r,""+n[r])}}function Ls(n){if(!n)return!1;var r=n._valueTracker;if(!r)return!0;var a=r.getValue(),l="";return n&&(l=Dr(n)?n.checked?"true":"false":n.value),n=l,n!==a?(r.setValue(n),!0):!1}function Ai(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var Ps=/[\n"\\]/g;function cn(n){return n.replace(Ps,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function Ia(n,r,a,l,f,d,b,A){n.name="",b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?n.type=b:n.removeAttribute("type"),r!=null?b==="number"?(r===0&&n.value===""||n.value!=r)&&(n.value=""+Bt(r)):n.value!==""+Bt(r)&&(n.value=""+Bt(r)):b!=="submit"&&b!=="reset"||n.removeAttribute("value"),r!=null?el(n,b,Bt(r)):a!=null?el(n,b,Bt(a)):l!=null&&n.removeAttribute("value"),f==null&&d!=null&&(n.defaultChecked=!!d),f!=null&&(n.checked=f&&typeof f!="function"&&typeof f!="symbol"),A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?n.name=""+Bt(A):n.removeAttribute("name")}function eu(n,r,a,l,f,d,b,A){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(n.type=d),r!=null||a!=null){if(!(d!=="submit"&&d!=="reset"||r!=null)){Ze(n);return}a=a!=null?""+Bt(a):"",r=r!=null?""+Bt(r):a,A||r===n.value||(n.value=r),n.defaultValue=r}l=l??f,l=typeof l!="function"&&typeof l!="symbol"&&!!l,n.checked=A?n.checked:!!l,n.defaultChecked=!!l,b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(n.name=b),Ze(n)}function el(n,r,a){r==="number"&&Ai(n.ownerDocument)===n||n.defaultValue===""+a||(n.defaultValue=""+a)}function Mr(n,r,a,l){if(n=n.options,r){r={};for(var f=0;f<a.length;f++)r["$"+a[f]]=!0;for(a=0;a<n.length;a++)f=r.hasOwnProperty("$"+n[a].value),n[a].selected!==f&&(n[a].selected=f),f&&l&&(n[a].defaultSelected=!0)}else{for(a=""+Bt(a),r=null,f=0;f<n.length;f++){if(n[f].value===a){n[f].selected=!0,l&&(n[f].defaultSelected=!0);return}r!==null||n[f].disabled||(r=n[f])}r!==null&&(r.selected=!0)}}function tu(n,r,a){if(r!=null&&(r=""+Bt(r),r!==n.value&&(n.value=r),a==null)){n.defaultValue!==r&&(n.defaultValue=r);return}n.defaultValue=a!=null?""+Bt(a):""}function Or(n,r,a,l){if(r==null){if(l!=null){if(a!=null)throw Error(s(92));if(F(l)){if(1<l.length)throw Error(s(93));l=l[0]}a=l}a==null&&(a=""),r=a}a=Bt(r),n.defaultValue=a,l=n.textContent,l===a&&l!==""&&l!==null&&(n.value=l),Ze(n)}function un(n,r){if(r){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=r;return}}n.textContent=r}var nu=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function tl(n,r,a){var l=r.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?n.setProperty(r,""):r==="float"?n.cssFloat="":n[r]="":l?n.setProperty(r,a):typeof a!="number"||a===0||nu.has(r)?r==="float"?n.cssFloat=a:n[r]=(""+a).trim():n[r]=a+"px"}function nl(n,r,a){if(r!=null&&typeof r!="object")throw Error(s(62));if(n=n.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||r!=null&&r.hasOwnProperty(l)||(l.indexOf("--")===0?n.setProperty(l,""):l==="float"?n.cssFloat="":n[l]="");for(var f in r)l=r[f],r.hasOwnProperty(f)&&a[f]!==l&&tl(n,f,l)}else for(var d in r)r.hasOwnProperty(d)&&tl(n,d,r[d])}function Da(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var iu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),kr=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ma(n){return kr.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function ei(){}var il=null;function jn(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Vr=null,Si=null;function Us(n){var r=Vn(n);if(r&&(n=r.stateNode)){var a=n[zt]||null;e:switch(n=r.stateNode,r.type){case"input":if(Ia(n,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),r=a.name,a.type==="radio"&&r!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+cn(""+r)+'"][type="radio"]'),r=0;r<a.length;r++){var l=a[r];if(l!==n&&l.form===n.form){var f=l[zt]||null;if(!f)throw Error(s(90));Ia(l,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(r=0;r<a.length;r++)l=a[r],l.form===n.form&&Ls(l)}break e;case"textarea":tu(n,a.value,a.defaultValue);break e;case"select":r=a.value,r!=null&&Mr(n,!!a.multiple,r,!1)}}}var Oa=!1;function jr(n,r,a){if(Oa)return n(r,a);Oa=!0;try{var l=n(r);return l}finally{if(Oa=!1,(Vr!==null||Si!==null)&&(Xu(),Vr&&(r=Vr,n=Si,Si=Vr=null,Us(r),n)))for(r=0;r<n.length;r++)Us(n[r])}}function ti(n,r){var a=n.stateNode;if(a===null)return null;var l=a[zt]||null;if(l===null)return null;a=l[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(n=n.type,l=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!l;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(s(231,r,typeof a));return a}var Ln=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),zs=!1;if(Ln)try{var nt={};Object.defineProperty(nt,"passive",{get:function(){zs=!0}}),window.addEventListener("test",nt,nt),window.removeEventListener("test",nt,nt)}catch{zs=!1}var Ni=null,rl=null,Bs=null;function sl(){if(Bs)return Bs;var n,r=rl,a=r.length,l,f="value"in Ni?Ni.value:Ni.textContent,d=f.length;for(n=0;n<a&&r[n]===f[n];n++);var b=a-n;for(l=1;l<=b&&r[a-l]===f[d-l];l++);return Bs=f.slice(n,1<l?1-l:void 0)}function qs(n){var r=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&r===13&&(n=13)):n=r,n===10&&(n=13),32<=n||n===13?n:0}function Qi(){return!0}function ni(){return!1}function Gt(n){function r(a,l,f,d,b){this._reactName=a,this._targetInst=f,this.type=l,this.nativeEvent=d,this.target=b,this.currentTarget=null;for(var A in n)n.hasOwnProperty(A)&&(a=n[A],this[A]=a?a(d):d[A]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?Qi:ni,this.isPropagationStopped=ni,this}return x(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Qi)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Qi)},persist:function(){},isPersistent:Qi}),r}var Ki={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ci=Gt(Ki),Lr=x({},Ki,{view:0,detail:0}),al=Gt(Lr),Pr,ka,Ri,Va=x({},Lr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ur,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Ri&&(Ri&&n.type==="mousemove"?(Pr=n.screenX-Ri.screenX,ka=n.screenY-Ri.screenY):ka=Pr=0,Ri=n),Pr)},movementY:function(n){return"movementY"in n?n.movementY:ka}}),ol=Gt(Va),Fs=x({},Va,{dataTransfer:0}),ru=Gt(Fs),su=x({},Lr,{relatedTarget:0}),Hs=Gt(su),ll=x({},Ki,{animationName:0,elapsedTime:0,pseudoElement:0}),au=Gt(ll),ja=x({},Ki,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),ou=Gt(ja),lu=x({},Ki,{data:0}),Ii=Gt(lu),cu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},uu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function fu(n){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(n):(n=hu[n])?!!r[n]:!1}function Ur(){return fu}var on=x({},Lr,{key:function(n){if(n.key){var r=cu[n.key]||n.key;if(r!=="Unidentified")return r}return n.type==="keypress"?(n=qs(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?uu[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ur,charCode:function(n){return n.type==="keypress"?qs(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?qs(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),du=Gt(on),mu=x({},Va,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Xi=Gt(mu),h=x({},Lr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ur}),_=Gt(h),E=x({},Ki,{propertyName:0,elapsedTime:0,pseudoElement:0}),S=Gt(E),H=x({},Va,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),J=Gt(H),pe=x({},Ki,{newState:0,oldState:0}),Ve=Gt(pe),xt=[9,13,27,32],Ke=Ln&&"CompositionEvent"in window,ft=null;Ln&&"documentMode"in document&&(ft=document.documentMode);var Pn=Ln&&"TextEvent"in window&&!ft,Di=Ln&&(!Ke||ft&&8<ft&&11>=ft),ii=" ",ri=!1;function Gs(n,r){switch(n){case"keyup":return xt.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function La(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Pa=!1;function aw(n,r){switch(n){case"compositionend":return La(r);case"keypress":return r.which!==32?null:(ri=!0,ii);case"textInput":return n=r.data,n===ii&&ri?null:n;default:return null}}function ow(n,r){if(Pa)return n==="compositionend"||!Ke&&Gs(n,r)?(n=sl(),Bs=rl=Ni=null,Pa=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return Di&&r.locale!=="ko"?null:r.data;default:return null}}var lw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function h0(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r==="input"?!!lw[n.type]:r==="textarea"}function f0(n,r,a,l){Vr?Si?Si.push(l):Si=[l]:Vr=l,r=ih(r,"onChange"),0<r.length&&(a=new Ci("onChange","change",null,a,l),n.push({event:a,listeners:r}))}var cl=null,ul=null;function cw(n){Q_(n,0)}function pu(n){var r=bn(n);if(Ls(r))return n}function d0(n,r){if(n==="change")return r}var m0=!1;if(Ln){var Jf;if(Ln){var ed="oninput"in document;if(!ed){var p0=document.createElement("div");p0.setAttribute("oninput","return;"),ed=typeof p0.oninput=="function"}Jf=ed}else Jf=!1;m0=Jf&&(!document.documentMode||9<document.documentMode)}function g0(){cl&&(cl.detachEvent("onpropertychange",y0),ul=cl=null)}function y0(n){if(n.propertyName==="value"&&pu(ul)){var r=[];f0(r,ul,n,jn(n)),jr(cw,r)}}function uw(n,r,a){n==="focusin"?(g0(),cl=r,ul=a,cl.attachEvent("onpropertychange",y0)):n==="focusout"&&g0()}function hw(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return pu(ul)}function fw(n,r){if(n==="click")return pu(r)}function dw(n,r){if(n==="input"||n==="change")return pu(r)}function mw(n,r){return n===r&&(n!==0||1/n===1/r)||n!==n&&r!==r}var En=typeof Object.is=="function"?Object.is:mw;function hl(n,r){if(En(n,r))return!0;if(typeof n!="object"||n===null||typeof r!="object"||r===null)return!1;var a=Object.keys(n),l=Object.keys(r);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var f=a[l];if(!pt.call(r,f)||!En(n[f],r[f]))return!1}return!0}function _0(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function v0(n,r){var a=_0(n);n=0;for(var l;a;){if(a.nodeType===3){if(l=n+a.textContent.length,n<=r&&l>=r)return{node:a,offset:r-n};n=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=_0(a)}}function b0(n,r){return n&&r?n===r?!0:n&&n.nodeType===3?!1:r&&r.nodeType===3?b0(n,r.parentNode):"contains"in n?n.contains(r):n.compareDocumentPosition?!!(n.compareDocumentPosition(r)&16):!1:!1}function x0(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var r=Ai(n.document);r instanceof n.HTMLIFrameElement;){try{var a=typeof r.contentWindow.location.href=="string"}catch{a=!1}if(a)n=r.contentWindow;else break;r=Ai(n.document)}return r}function td(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r&&(r==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||r==="textarea"||n.contentEditable==="true")}var pw=Ln&&"documentMode"in document&&11>=document.documentMode,Ua=null,nd=null,fl=null,id=!1;function E0(n,r,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;id||Ua==null||Ua!==Ai(l)||(l=Ua,"selectionStart"in l&&td(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),fl&&hl(fl,l)||(fl=l,l=ih(nd,"onSelect"),0<l.length&&(r=new Ci("onSelect","select",null,r,a),n.push({event:r,listeners:l}),r.target=Ua)))}function $s(n,r){var a={};return a[n.toLowerCase()]=r.toLowerCase(),a["Webkit"+n]="webkit"+r,a["Moz"+n]="moz"+r,a}var za={animationend:$s("Animation","AnimationEnd"),animationiteration:$s("Animation","AnimationIteration"),animationstart:$s("Animation","AnimationStart"),transitionrun:$s("Transition","TransitionRun"),transitionstart:$s("Transition","TransitionStart"),transitioncancel:$s("Transition","TransitionCancel"),transitionend:$s("Transition","TransitionEnd")},rd={},T0={};Ln&&(T0=document.createElement("div").style,"AnimationEvent"in window||(delete za.animationend.animation,delete za.animationiteration.animation,delete za.animationstart.animation),"TransitionEvent"in window||delete za.transitionend.transition);function Ys(n){if(rd[n])return rd[n];if(!za[n])return n;var r=za[n],a;for(a in r)if(r.hasOwnProperty(a)&&a in T0)return rd[n]=r[a];return n}var w0=Ys("animationend"),A0=Ys("animationiteration"),S0=Ys("animationstart"),gw=Ys("transitionrun"),yw=Ys("transitionstart"),_w=Ys("transitioncancel"),N0=Ys("transitionend"),C0=new Map,sd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");sd.push("scrollEnd");function si(n,r){C0.set(n,r),Ti(r,[n])}var gu=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},Un=[],Ba=0,ad=0;function yu(){for(var n=Ba,r=ad=Ba=0;r<n;){var a=Un[r];Un[r++]=null;var l=Un[r];Un[r++]=null;var f=Un[r];Un[r++]=null;var d=Un[r];if(Un[r++]=null,l!==null&&f!==null){var b=l.pending;b===null?f.next=f:(f.next=b.next,b.next=f),l.pending=f}d!==0&&R0(a,f,d)}}function _u(n,r,a,l){Un[Ba++]=n,Un[Ba++]=r,Un[Ba++]=a,Un[Ba++]=l,ad|=l,n.lanes|=l,n=n.alternate,n!==null&&(n.lanes|=l)}function od(n,r,a,l){return _u(n,r,a,l),vu(n)}function Qs(n,r){return _u(n,null,null,r),vu(n)}function R0(n,r,a){n.lanes|=a;var l=n.alternate;l!==null&&(l.lanes|=a);for(var f=!1,d=n.return;d!==null;)d.childLanes|=a,l=d.alternate,l!==null&&(l.childLanes|=a),d.tag===22&&(n=d.stateNode,n===null||n._visibility&1||(f=!0)),n=d,d=d.return;return n.tag===3?(d=n.stateNode,f&&r!==null&&(f=31-bt(a),n=d.hiddenUpdates,l=n[f],l===null?n[f]=[r]:l.push(r),r.lane=a|536870912),d):null}function vu(n){if(50<kl)throw kl=0,gm=null,Error(s(185));for(var r=n.return;r!==null;)n=r,r=n.return;return n.tag===3?n.stateNode:null}var qa={};function vw(n,r,a,l){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Tn(n,r,a,l){return new vw(n,r,a,l)}function ld(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Wi(n,r){var a=n.alternate;return a===null?(a=Tn(n.tag,r,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=r,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&65011712,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,r=n.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a.refCleanup=n.refCleanup,a}function I0(n,r){n.flags&=65011714;var a=n.alternate;return a===null?(n.childLanes=0,n.lanes=r,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=a.childLanes,n.lanes=a.lanes,n.child=a.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=a.memoizedProps,n.memoizedState=a.memoizedState,n.updateQueue=a.updateQueue,n.type=a.type,r=a.dependencies,n.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),n}function bu(n,r,a,l,f,d){var b=0;if(l=n,typeof n=="function")ld(n)&&(b=1);else if(typeof n=="string")b=wA(n,a,me.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case N:return n=Tn(31,a,r,f),n.elementType=N,n.lanes=d,n;case q:return Ks(a.children,f,d,r);case $:b=8,f|=24;break;case ce:return n=Tn(12,a,r,f|2),n.elementType=ce,n.lanes=d,n;case de:return n=Tn(13,a,r,f),n.elementType=de,n.lanes=d,n;case he:return n=Tn(19,a,r,f),n.elementType=he,n.lanes=d,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case te:b=10;break e;case G:b=9;break e;case ie:b=11;break e;case D:b=14;break e;case C:b=16,l=null;break e}b=29,a=Error(s(130,n===null?"null":typeof n,"")),l=null}return r=Tn(b,a,r,f),r.elementType=n,r.type=l,r.lanes=d,r}function Ks(n,r,a,l){return n=Tn(7,n,l,r),n.lanes=a,n}function cd(n,r,a){return n=Tn(6,n,null,r),n.lanes=a,n}function D0(n){var r=Tn(18,null,null,0);return r.stateNode=n,r}function ud(n,r,a){return r=Tn(4,n.children!==null?n.children:[],n.key,r),r.lanes=a,r.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},r}var M0=new WeakMap;function zn(n,r){if(typeof n=="object"&&n!==null){var a=M0.get(n);return a!==void 0?a:(r={value:n,source:r,stack:Cr(r)},M0.set(n,r),r)}return{value:n,source:r,stack:Cr(r)}}var Fa=[],Ha=0,xu=null,dl=0,Bn=[],qn=0,zr=null,Mi=1,Oi="";function Zi(n,r){Fa[Ha++]=dl,Fa[Ha++]=xu,xu=n,dl=r}function O0(n,r,a){Bn[qn++]=Mi,Bn[qn++]=Oi,Bn[qn++]=zr,zr=n;var l=Mi;n=Oi;var f=32-bt(l)-1;l&=~(1<<f),a+=1;var d=32-bt(r)+f;if(30<d){var b=f-f%5;d=(l&(1<<b)-1).toString(32),l>>=b,f-=b,Mi=1<<32-bt(r)+f|a<<f|l,Oi=d+n}else Mi=1<<d|a<<f|l,Oi=n}function hd(n){n.return!==null&&(Zi(n,1),O0(n,1,0))}function fd(n){for(;n===xu;)xu=Fa[--Ha],Fa[Ha]=null,dl=Fa[--Ha],Fa[Ha]=null;for(;n===zr;)zr=Bn[--qn],Bn[qn]=null,Oi=Bn[--qn],Bn[qn]=null,Mi=Bn[--qn],Bn[qn]=null}function k0(n,r){Bn[qn++]=Mi,Bn[qn++]=Oi,Bn[qn++]=zr,Mi=r.id,Oi=r.overflow,zr=n}var $t=null,ct=null,Ge=!1,Br=null,Fn=!1,dd=Error(s(519));function qr(n){var r=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw ml(zn(r,n)),dd}function V0(n){var r=n.stateNode,a=n.type,l=n.memoizedProps;switch(r[St]=n,r[zt]=l,a){case"dialog":Ue("cancel",r),Ue("close",r);break;case"iframe":case"object":case"embed":Ue("load",r);break;case"video":case"audio":for(a=0;a<jl.length;a++)Ue(jl[a],r);break;case"source":Ue("error",r);break;case"img":case"image":case"link":Ue("error",r),Ue("load",r);break;case"details":Ue("toggle",r);break;case"input":Ue("invalid",r),eu(r,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":Ue("invalid",r);break;case"textarea":Ue("invalid",r),Or(r,l.value,l.defaultValue,l.children)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||r.textContent===""+a||l.suppressHydrationWarning===!0||Z_(r.textContent,a)?(l.popover!=null&&(Ue("beforetoggle",r),Ue("toggle",r)),l.onScroll!=null&&Ue("scroll",r),l.onScrollEnd!=null&&Ue("scrollend",r),l.onClick!=null&&(r.onclick=ei),r=!0):r=!1,r||qr(n,!0)}function j0(n){for($t=n.return;$t;)switch($t.tag){case 5:case 31:case 13:Fn=!1;return;case 27:case 3:Fn=!0;return;default:$t=$t.return}}function Ga(n){if(n!==$t)return!1;if(!Ge)return j0(n),Ge=!0,!1;var r=n.tag,a;if((a=r!==3&&r!==27)&&((a=r===5)&&(a=n.type,a=!(a!=="form"&&a!=="button")||Dm(n.type,n.memoizedProps)),a=!a),a&&ct&&qr(n),j0(n),r===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(317));ct=ov(n)}else if(r===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(317));ct=ov(n)}else r===27?(r=ct,ns(n.type)?(n=jm,jm=null,ct=n):ct=r):ct=$t?Gn(n.stateNode.nextSibling):null;return!0}function Xs(){ct=$t=null,Ge=!1}function md(){var n=Br;return n!==null&&(mn===null?mn=n:mn.push.apply(mn,n),Br=null),n}function ml(n){Br===null?Br=[n]:Br.push(n)}var pd=M(null),Ws=null,Ji=null;function Fr(n,r,a){fe(pd,r._currentValue),r._currentValue=a}function er(n){n._currentValue=pd.current,X(pd)}function gd(n,r,a){for(;n!==null;){var l=n.alternate;if((n.childLanes&r)!==r?(n.childLanes|=r,l!==null&&(l.childLanes|=r)):l!==null&&(l.childLanes&r)!==r&&(l.childLanes|=r),n===a)break;n=n.return}}function yd(n,r,a,l){var f=n.child;for(f!==null&&(f.return=n);f!==null;){var d=f.dependencies;if(d!==null){var b=f.child;d=d.firstContext;e:for(;d!==null;){var A=d;d=f;for(var V=0;V<r.length;V++)if(A.context===r[V]){d.lanes|=a,A=d.alternate,A!==null&&(A.lanes|=a),gd(d.return,a,n),l||(b=null);break e}d=A.next}}else if(f.tag===18){if(b=f.return,b===null)throw Error(s(341));b.lanes|=a,d=b.alternate,d!==null&&(d.lanes|=a),gd(b,a,n),b=null}else b=f.child;if(b!==null)b.return=f;else for(b=f;b!==null;){if(b===n){b=null;break}if(f=b.sibling,f!==null){f.return=b.return,b=f;break}b=b.return}f=b}}function $a(n,r,a,l){n=null;for(var f=r,d=!1;f!==null;){if(!d){if((f.flags&524288)!==0)d=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var b=f.alternate;if(b===null)throw Error(s(387));if(b=b.memoizedProps,b!==null){var A=f.type;En(f.pendingProps.value,b.value)||(n!==null?n.push(A):n=[A])}}else if(f===ge.current){if(b=f.alternate,b===null)throw Error(s(387));b.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(n!==null?n.push(Bl):n=[Bl])}f=f.return}n!==null&&yd(r,n,a,l),r.flags|=262144}function Eu(n){for(n=n.firstContext;n!==null;){if(!En(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function Zs(n){Ws=n,Ji=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function Yt(n){return L0(Ws,n)}function Tu(n,r){return Ws===null&&Zs(n),L0(n,r)}function L0(n,r){var a=r._currentValue;if(r={context:r,memoizedValue:a,next:null},Ji===null){if(n===null)throw Error(s(308));Ji=r,n.dependencies={lanes:0,firstContext:r},n.flags|=524288}else Ji=Ji.next=r;return a}var bw=typeof AbortController<"u"?AbortController:function(){var n=[],r=this.signal={aborted:!1,addEventListener:function(a,l){n.push(l)}};this.abort=function(){r.aborted=!0,n.forEach(function(a){return a()})}},xw=i.unstable_scheduleCallback,Ew=i.unstable_NormalPriority,Rt={$$typeof:te,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function _d(){return{controller:new bw,data:new Map,refCount:0}}function pl(n){n.refCount--,n.refCount===0&&xw(Ew,function(){n.controller.abort()})}var gl=null,vd=0,Ya=0,Qa=null;function Tw(n,r){if(gl===null){var a=gl=[];vd=0,Ya=Em(),Qa={status:"pending",value:void 0,then:function(l){a.push(l)}}}return vd++,r.then(P0,P0),r}function P0(){if(--vd===0&&gl!==null){Qa!==null&&(Qa.status="fulfilled");var n=gl;gl=null,Ya=0,Qa=null;for(var r=0;r<n.length;r++)(0,n[r])()}}function ww(n,r){var a=[],l={status:"pending",value:null,reason:null,then:function(f){a.push(f)}};return n.then(function(){l.status="fulfilled",l.value=r;for(var f=0;f<a.length;f++)(0,a[f])(r)},function(f){for(l.status="rejected",l.reason=f,f=0;f<a.length;f++)(0,a[f])(void 0)}),l}var U0=j.S;j.S=function(n,r){E_=an(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&Tw(n,r),U0!==null&&U0(n,r)};var Js=M(null);function bd(){var n=Js.current;return n!==null?n:ot.pooledCache}function wu(n,r){r===null?fe(Js,Js.current):fe(Js,r.pool)}function z0(){var n=bd();return n===null?null:{parent:Rt._currentValue,pool:n}}var Ka=Error(s(460)),xd=Error(s(474)),Au=Error(s(542)),Su={then:function(){}};function B0(n){return n=n.status,n==="fulfilled"||n==="rejected"}function q0(n,r,a){switch(a=n[a],a===void 0?n.push(r):a!==r&&(r.then(ei,ei),r=a),r.status){case"fulfilled":return r.value;case"rejected":throw n=r.reason,H0(n),n;default:if(typeof r.status=="string")r.then(ei,ei);else{if(n=ot,n!==null&&100<n.shellSuspendCounter)throw Error(s(482));n=r,n.status="pending",n.then(function(l){if(r.status==="pending"){var f=r;f.status="fulfilled",f.value=l}},function(l){if(r.status==="pending"){var f=r;f.status="rejected",f.reason=l}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw n=r.reason,H0(n),n}throw ta=r,Ka}}function ea(n){try{var r=n._init;return r(n._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(ta=a,Ka):a}}var ta=null;function F0(){if(ta===null)throw Error(s(459));var n=ta;return ta=null,n}function H0(n){if(n===Ka||n===Au)throw Error(s(483))}var Xa=null,yl=0;function Nu(n){var r=yl;return yl+=1,Xa===null&&(Xa=[]),q0(Xa,n,r)}function _l(n,r){r=r.props.ref,n.ref=r!==void 0?r:null}function Cu(n,r){throw r.$$typeof===T?Error(s(525)):(n=Object.prototype.toString.call(r),Error(s(31,n==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":n)))}function G0(n){function r(B,P){if(n){var Y=B.deletions;Y===null?(B.deletions=[P],B.flags|=16):Y.push(P)}}function a(B,P){if(!n)return null;for(;P!==null;)r(B,P),P=P.sibling;return null}function l(B){for(var P=new Map;B!==null;)B.key!==null?P.set(B.key,B):P.set(B.index,B),B=B.sibling;return P}function f(B,P){return B=Wi(B,P),B.index=0,B.sibling=null,B}function d(B,P,Y){return B.index=Y,n?(Y=B.alternate,Y!==null?(Y=Y.index,Y<P?(B.flags|=67108866,P):Y):(B.flags|=67108866,P)):(B.flags|=1048576,P)}function b(B){return n&&B.alternate===null&&(B.flags|=67108866),B}function A(B,P,Y,re){return P===null||P.tag!==6?(P=cd(Y,B.mode,re),P.return=B,P):(P=f(P,Y),P.return=B,P)}function V(B,P,Y,re){var we=Y.type;return we===q?ne(B,P,Y.props.children,re,Y.key):P!==null&&(P.elementType===we||typeof we=="object"&&we!==null&&we.$$typeof===C&&ea(we)===P.type)?(P=f(P,Y.props),_l(P,Y),P.return=B,P):(P=bu(Y.type,Y.key,Y.props,null,B.mode,re),_l(P,Y),P.return=B,P)}function Q(B,P,Y,re){return P===null||P.tag!==4||P.stateNode.containerInfo!==Y.containerInfo||P.stateNode.implementation!==Y.implementation?(P=ud(Y,B.mode,re),P.return=B,P):(P=f(P,Y.children||[]),P.return=B,P)}function ne(B,P,Y,re,we){return P===null||P.tag!==7?(P=Ks(Y,B.mode,re,we),P.return=B,P):(P=f(P,Y),P.return=B,P)}function le(B,P,Y){if(typeof P=="string"&&P!==""||typeof P=="number"||typeof P=="bigint")return P=cd(""+P,B.mode,Y),P.return=B,P;if(typeof P=="object"&&P!==null){switch(P.$$typeof){case I:return Y=bu(P.type,P.key,P.props,null,B.mode,Y),_l(Y,P),Y.return=B,Y;case U:return P=ud(P,B.mode,Y),P.return=B,P;case C:return P=ea(P),le(B,P,Y)}if(F(P)||R(P))return P=Ks(P,B.mode,Y,null),P.return=B,P;if(typeof P.then=="function")return le(B,Nu(P),Y);if(P.$$typeof===te)return le(B,Tu(B,P),Y);Cu(B,P)}return null}function Z(B,P,Y,re){var we=P!==null?P.key:null;if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return we!==null?null:A(B,P,""+Y,re);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case I:return Y.key===we?V(B,P,Y,re):null;case U:return Y.key===we?Q(B,P,Y,re):null;case C:return Y=ea(Y),Z(B,P,Y,re)}if(F(Y)||R(Y))return we!==null?null:ne(B,P,Y,re,null);if(typeof Y.then=="function")return Z(B,P,Nu(Y),re);if(Y.$$typeof===te)return Z(B,P,Tu(B,Y),re);Cu(B,Y)}return null}function ee(B,P,Y,re,we){if(typeof re=="string"&&re!==""||typeof re=="number"||typeof re=="bigint")return B=B.get(Y)||null,A(P,B,""+re,we);if(typeof re=="object"&&re!==null){switch(re.$$typeof){case I:return B=B.get(re.key===null?Y:re.key)||null,V(P,B,re,we);case U:return B=B.get(re.key===null?Y:re.key)||null,Q(P,B,re,we);case C:return re=ea(re),ee(B,P,Y,re,we)}if(F(re)||R(re))return B=B.get(Y)||null,ne(P,B,re,we,null);if(typeof re.then=="function")return ee(B,P,Y,Nu(re),we);if(re.$$typeof===te)return ee(B,P,Y,Tu(P,re),we);Cu(P,re)}return null}function be(B,P,Y,re){for(var we=null,Ye=null,xe=P,Le=P=0,Be=null;xe!==null&&Le<Y.length;Le++){xe.index>Le?(Be=xe,xe=null):Be=xe.sibling;var Qe=Z(B,xe,Y[Le],re);if(Qe===null){xe===null&&(xe=Be);break}n&&xe&&Qe.alternate===null&&r(B,xe),P=d(Qe,P,Le),Ye===null?we=Qe:Ye.sibling=Qe,Ye=Qe,xe=Be}if(Le===Y.length)return a(B,xe),Ge&&Zi(B,Le),we;if(xe===null){for(;Le<Y.length;Le++)xe=le(B,Y[Le],re),xe!==null&&(P=d(xe,P,Le),Ye===null?we=xe:Ye.sibling=xe,Ye=xe);return Ge&&Zi(B,Le),we}for(xe=l(xe);Le<Y.length;Le++)Be=ee(xe,B,Le,Y[Le],re),Be!==null&&(n&&Be.alternate!==null&&xe.delete(Be.key===null?Le:Be.key),P=d(Be,P,Le),Ye===null?we=Be:Ye.sibling=Be,Ye=Be);return n&&xe.forEach(function(os){return r(B,os)}),Ge&&Zi(B,Le),we}function Ce(B,P,Y,re){if(Y==null)throw Error(s(151));for(var we=null,Ye=null,xe=P,Le=P=0,Be=null,Qe=Y.next();xe!==null&&!Qe.done;Le++,Qe=Y.next()){xe.index>Le?(Be=xe,xe=null):Be=xe.sibling;var os=Z(B,xe,Qe.value,re);if(os===null){xe===null&&(xe=Be);break}n&&xe&&os.alternate===null&&r(B,xe),P=d(os,P,Le),Ye===null?we=os:Ye.sibling=os,Ye=os,xe=Be}if(Qe.done)return a(B,xe),Ge&&Zi(B,Le),we;if(xe===null){for(;!Qe.done;Le++,Qe=Y.next())Qe=le(B,Qe.value,re),Qe!==null&&(P=d(Qe,P,Le),Ye===null?we=Qe:Ye.sibling=Qe,Ye=Qe);return Ge&&Zi(B,Le),we}for(xe=l(xe);!Qe.done;Le++,Qe=Y.next())Qe=ee(xe,B,Le,Qe.value,re),Qe!==null&&(n&&Qe.alternate!==null&&xe.delete(Qe.key===null?Le:Qe.key),P=d(Qe,P,Le),Ye===null?we=Qe:Ye.sibling=Qe,Ye=Qe);return n&&xe.forEach(function(VA){return r(B,VA)}),Ge&&Zi(B,Le),we}function st(B,P,Y,re){if(typeof Y=="object"&&Y!==null&&Y.type===q&&Y.key===null&&(Y=Y.props.children),typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case I:e:{for(var we=Y.key;P!==null;){if(P.key===we){if(we=Y.type,we===q){if(P.tag===7){a(B,P.sibling),re=f(P,Y.props.children),re.return=B,B=re;break e}}else if(P.elementType===we||typeof we=="object"&&we!==null&&we.$$typeof===C&&ea(we)===P.type){a(B,P.sibling),re=f(P,Y.props),_l(re,Y),re.return=B,B=re;break e}a(B,P);break}else r(B,P);P=P.sibling}Y.type===q?(re=Ks(Y.props.children,B.mode,re,Y.key),re.return=B,B=re):(re=bu(Y.type,Y.key,Y.props,null,B.mode,re),_l(re,Y),re.return=B,B=re)}return b(B);case U:e:{for(we=Y.key;P!==null;){if(P.key===we)if(P.tag===4&&P.stateNode.containerInfo===Y.containerInfo&&P.stateNode.implementation===Y.implementation){a(B,P.sibling),re=f(P,Y.children||[]),re.return=B,B=re;break e}else{a(B,P);break}else r(B,P);P=P.sibling}re=ud(Y,B.mode,re),re.return=B,B=re}return b(B);case C:return Y=ea(Y),st(B,P,Y,re)}if(F(Y))return be(B,P,Y,re);if(R(Y)){if(we=R(Y),typeof we!="function")throw Error(s(150));return Y=we.call(Y),Ce(B,P,Y,re)}if(typeof Y.then=="function")return st(B,P,Nu(Y),re);if(Y.$$typeof===te)return st(B,P,Tu(B,Y),re);Cu(B,Y)}return typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint"?(Y=""+Y,P!==null&&P.tag===6?(a(B,P.sibling),re=f(P,Y),re.return=B,B=re):(a(B,P),re=cd(Y,B.mode,re),re.return=B,B=re),b(B)):a(B,P)}return function(B,P,Y,re){try{yl=0;var we=st(B,P,Y,re);return Xa=null,we}catch(xe){if(xe===Ka||xe===Au)throw xe;var Ye=Tn(29,xe,null,B.mode);return Ye.lanes=re,Ye.return=B,Ye}finally{}}}var na=G0(!0),$0=G0(!1),Hr=!1;function Ed(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Td(n,r){n=n.updateQueue,r.updateQueue===n&&(r.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function Gr(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function $r(n,r,a){var l=n.updateQueue;if(l===null)return null;if(l=l.shared,(Xe&2)!==0){var f=l.pending;return f===null?r.next=r:(r.next=f.next,f.next=r),l.pending=r,r=vu(n),R0(n,null,a),r}return _u(n,l,r,a),vu(n)}function vl(n,r,a){if(r=r.updateQueue,r!==null&&(r=r.shared,(a&4194048)!==0)){var l=r.lanes;l&=n.pendingLanes,a|=l,r.lanes=a,$o(n,a)}}function wd(n,r){var a=n.updateQueue,l=n.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var f=null,d=null;if(a=a.firstBaseUpdate,a!==null){do{var b={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};d===null?f=d=b:d=d.next=b,a=a.next}while(a!==null);d===null?f=d=r:d=d.next=r}else f=d=r;a={baseState:l.baseState,firstBaseUpdate:f,lastBaseUpdate:d,shared:l.shared,callbacks:l.callbacks},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=r:n.next=r,a.lastBaseUpdate=r}var Ad=!1;function bl(){if(Ad){var n=Qa;if(n!==null)throw n}}function xl(n,r,a,l){Ad=!1;var f=n.updateQueue;Hr=!1;var d=f.firstBaseUpdate,b=f.lastBaseUpdate,A=f.shared.pending;if(A!==null){f.shared.pending=null;var V=A,Q=V.next;V.next=null,b===null?d=Q:b.next=Q,b=V;var ne=n.alternate;ne!==null&&(ne=ne.updateQueue,A=ne.lastBaseUpdate,A!==b&&(A===null?ne.firstBaseUpdate=Q:A.next=Q,ne.lastBaseUpdate=V))}if(d!==null){var le=f.baseState;b=0,ne=Q=V=null,A=d;do{var Z=A.lane&-536870913,ee=Z!==A.lane;if(ee?(ze&Z)===Z:(l&Z)===Z){Z!==0&&Z===Ya&&(Ad=!0),ne!==null&&(ne=ne.next={lane:0,tag:A.tag,payload:A.payload,callback:null,next:null});e:{var be=n,Ce=A;Z=r;var st=a;switch(Ce.tag){case 1:if(be=Ce.payload,typeof be=="function"){le=be.call(st,le,Z);break e}le=be;break e;case 3:be.flags=be.flags&-65537|128;case 0:if(be=Ce.payload,Z=typeof be=="function"?be.call(st,le,Z):be,Z==null)break e;le=x({},le,Z);break e;case 2:Hr=!0}}Z=A.callback,Z!==null&&(n.flags|=64,ee&&(n.flags|=8192),ee=f.callbacks,ee===null?f.callbacks=[Z]:ee.push(Z))}else ee={lane:Z,tag:A.tag,payload:A.payload,callback:A.callback,next:null},ne===null?(Q=ne=ee,V=le):ne=ne.next=ee,b|=Z;if(A=A.next,A===null){if(A=f.shared.pending,A===null)break;ee=A,A=ee.next,ee.next=null,f.lastBaseUpdate=ee,f.shared.pending=null}}while(!0);ne===null&&(V=le),f.baseState=V,f.firstBaseUpdate=Q,f.lastBaseUpdate=ne,d===null&&(f.shared.lanes=0),Wr|=b,n.lanes=b,n.memoizedState=le}}function Y0(n,r){if(typeof n!="function")throw Error(s(191,n));n.call(r)}function Q0(n,r){var a=n.callbacks;if(a!==null)for(n.callbacks=null,n=0;n<a.length;n++)Y0(a[n],r)}var Wa=M(null),Ru=M(0);function K0(n,r){n=cr,fe(Ru,n),fe(Wa,r),cr=n|r.baseLanes}function Sd(){fe(Ru,cr),fe(Wa,Wa.current)}function Nd(){cr=Ru.current,X(Wa),X(Ru)}var wn=M(null),Hn=null;function Yr(n){var r=n.alternate;fe(Et,Et.current&1),fe(wn,n),Hn===null&&(r===null||Wa.current!==null||r.memoizedState!==null)&&(Hn=n)}function Cd(n){fe(Et,Et.current),fe(wn,n),Hn===null&&(Hn=n)}function X0(n){n.tag===22?(fe(Et,Et.current),fe(wn,n),Hn===null&&(Hn=n)):Qr()}function Qr(){fe(Et,Et.current),fe(wn,wn.current)}function An(n){X(wn),Hn===n&&(Hn=null),X(Et)}var Et=M(0);function Iu(n){for(var r=n;r!==null;){if(r.tag===13){var a=r.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||km(a)||Vm(a)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var tr=0,je=null,it=null,It=null,Du=!1,Za=!1,ia=!1,Mu=0,El=0,Ja=null,Aw=0;function yt(){throw Error(s(321))}function Rd(n,r){if(r===null)return!1;for(var a=0;a<r.length&&a<n.length;a++)if(!En(n[a],r[a]))return!1;return!0}function Id(n,r,a,l,f,d){return tr=d,je=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,j.H=n===null||n.memoizedState===null?Oy:Gd,ia=!1,d=a(l,f),ia=!1,Za&&(d=Z0(r,a,l,f)),W0(n),d}function W0(n){j.H=Al;var r=it!==null&&it.next!==null;if(tr=0,It=it=je=null,Du=!1,El=0,Ja=null,r)throw Error(s(300));n===null||Dt||(n=n.dependencies,n!==null&&Eu(n)&&(Dt=!0))}function Z0(n,r,a,l){je=n;var f=0;do{if(Za&&(Ja=null),El=0,Za=!1,25<=f)throw Error(s(301));if(f+=1,It=it=null,n.updateQueue!=null){var d=n.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}j.H=ky,d=r(a,l)}while(Za);return d}function Sw(){var n=j.H,r=n.useState()[0];return r=typeof r.then=="function"?Tl(r):r,n=n.useState()[0],(it!==null?it.memoizedState:null)!==n&&(je.flags|=1024),r}function Dd(){var n=Mu!==0;return Mu=0,n}function Md(n,r,a){r.updateQueue=n.updateQueue,r.flags&=-2053,n.lanes&=~a}function Od(n){if(Du){for(n=n.memoizedState;n!==null;){var r=n.queue;r!==null&&(r.pending=null),n=n.next}Du=!1}tr=0,It=it=je=null,Za=!1,El=Mu=0,Ja=null}function ln(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return It===null?je.memoizedState=It=n:It=It.next=n,It}function Tt(){if(it===null){var n=je.alternate;n=n!==null?n.memoizedState:null}else n=it.next;var r=It===null?je.memoizedState:It.next;if(r!==null)It=r,it=n;else{if(n===null)throw je.alternate===null?Error(s(467)):Error(s(310));it=n,n={memoizedState:it.memoizedState,baseState:it.baseState,baseQueue:it.baseQueue,queue:it.queue,next:null},It===null?je.memoizedState=It=n:It=It.next=n}return It}function Ou(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Tl(n){var r=El;return El+=1,Ja===null&&(Ja=[]),n=q0(Ja,n,r),r=je,(It===null?r.memoizedState:It.next)===null&&(r=r.alternate,j.H=r===null||r.memoizedState===null?Oy:Gd),n}function ku(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return Tl(n);if(n.$$typeof===te)return Yt(n)}throw Error(s(438,String(n)))}function kd(n){var r=null,a=je.updateQueue;if(a!==null&&(r=a.memoCache),r==null){var l=je.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(r={data:l.data.map(function(f){return f.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),a===null&&(a=Ou(),je.updateQueue=a),a.memoCache=r,a=r.data[r.index],a===void 0)for(a=r.data[r.index]=Array(n),l=0;l<n;l++)a[l]=O;return r.index++,a}function nr(n,r){return typeof r=="function"?r(n):r}function Vu(n){var r=Tt();return Vd(r,it,n)}function Vd(n,r,a){var l=n.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=a;var f=n.baseQueue,d=l.pending;if(d!==null){if(f!==null){var b=f.next;f.next=d.next,d.next=b}r.baseQueue=f=d,l.pending=null}if(d=n.baseState,f===null)n.memoizedState=d;else{r=f.next;var A=b=null,V=null,Q=r,ne=!1;do{var le=Q.lane&-536870913;if(le!==Q.lane?(ze&le)===le:(tr&le)===le){var Z=Q.revertLane;if(Z===0)V!==null&&(V=V.next={lane:0,revertLane:0,gesture:null,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null}),le===Ya&&(ne=!0);else if((tr&Z)===Z){Q=Q.next,Z===Ya&&(ne=!0);continue}else le={lane:0,revertLane:Q.revertLane,gesture:null,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null},V===null?(A=V=le,b=d):V=V.next=le,je.lanes|=Z,Wr|=Z;le=Q.action,ia&&a(d,le),d=Q.hasEagerState?Q.eagerState:a(d,le)}else Z={lane:le,revertLane:Q.revertLane,gesture:Q.gesture,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null},V===null?(A=V=Z,b=d):V=V.next=Z,je.lanes|=le,Wr|=le;Q=Q.next}while(Q!==null&&Q!==r);if(V===null?b=d:V.next=A,!En(d,n.memoizedState)&&(Dt=!0,ne&&(a=Qa,a!==null)))throw a;n.memoizedState=d,n.baseState=b,n.baseQueue=V,l.lastRenderedState=d}return f===null&&(l.lanes=0),[n.memoizedState,l.dispatch]}function jd(n){var r=Tt(),a=r.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=n;var l=a.dispatch,f=a.pending,d=r.memoizedState;if(f!==null){a.pending=null;var b=f=f.next;do d=n(d,b.action),b=b.next;while(b!==f);En(d,r.memoizedState)||(Dt=!0),r.memoizedState=d,r.baseQueue===null&&(r.baseState=d),a.lastRenderedState=d}return[d,l]}function J0(n,r,a){var l=je,f=Tt(),d=Ge;if(d){if(a===void 0)throw Error(s(407));a=a()}else a=r();var b=!En((it||f).memoizedState,a);if(b&&(f.memoizedState=a,Dt=!0),f=f.queue,Ud(ny.bind(null,l,f,n),[n]),f.getSnapshot!==r||b||It!==null&&It.memoizedState.tag&1){if(l.flags|=2048,eo(9,{destroy:void 0},ty.bind(null,l,f,a,r),null),ot===null)throw Error(s(349));d||(tr&127)!==0||ey(l,r,a)}return a}function ey(n,r,a){n.flags|=16384,n={getSnapshot:r,value:a},r=je.updateQueue,r===null?(r=Ou(),je.updateQueue=r,r.stores=[n]):(a=r.stores,a===null?r.stores=[n]:a.push(n))}function ty(n,r,a,l){r.value=a,r.getSnapshot=l,iy(r)&&ry(n)}function ny(n,r,a){return a(function(){iy(r)&&ry(n)})}function iy(n){var r=n.getSnapshot;n=n.value;try{var a=r();return!En(n,a)}catch{return!0}}function ry(n){var r=Qs(n,2);r!==null&&pn(r,n,2)}function Ld(n){var r=ln();if(typeof n=="function"){var a=n;if(n=a(),ia){kn(!0);try{a()}finally{kn(!1)}}}return r.memoizedState=r.baseState=n,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:nr,lastRenderedState:n},r}function sy(n,r,a,l){return n.baseState=a,Vd(n,it,typeof l=="function"?l:nr)}function Nw(n,r,a,l,f){if(Pu(n))throw Error(s(485));if(n=r.action,n!==null){var d={payload:f,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(b){d.listeners.push(b)}};j.T!==null?a(!0):d.isTransition=!1,l(d),a=r.pending,a===null?(d.next=r.pending=d,ay(r,d)):(d.next=a.next,r.pending=a.next=d)}}function ay(n,r){var a=r.action,l=r.payload,f=n.state;if(r.isTransition){var d=j.T,b={};j.T=b;try{var A=a(f,l),V=j.S;V!==null&&V(b,A),oy(n,r,A)}catch(Q){Pd(n,r,Q)}finally{d!==null&&b.types!==null&&(d.types=b.types),j.T=d}}else try{d=a(f,l),oy(n,r,d)}catch(Q){Pd(n,r,Q)}}function oy(n,r,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){ly(n,r,l)},function(l){return Pd(n,r,l)}):ly(n,r,a)}function ly(n,r,a){r.status="fulfilled",r.value=a,cy(r),n.state=a,r=n.pending,r!==null&&(a=r.next,a===r?n.pending=null:(a=a.next,r.next=a,ay(n,a)))}function Pd(n,r,a){var l=n.pending;if(n.pending=null,l!==null){l=l.next;do r.status="rejected",r.reason=a,cy(r),r=r.next;while(r!==l)}n.action=null}function cy(n){n=n.listeners;for(var r=0;r<n.length;r++)(0,n[r])()}function uy(n,r){return r}function hy(n,r){if(Ge){var a=ot.formState;if(a!==null){e:{var l=je;if(Ge){if(ct){t:{for(var f=ct,d=Fn;f.nodeType!==8;){if(!d){f=null;break t}if(f=Gn(f.nextSibling),f===null){f=null;break t}}d=f.data,f=d==="F!"||d==="F"?f:null}if(f){ct=Gn(f.nextSibling),l=f.data==="F!";break e}}qr(l)}l=!1}l&&(r=a[0])}}return a=ln(),a.memoizedState=a.baseState=r,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:uy,lastRenderedState:r},a.queue=l,a=Iy.bind(null,je,l),l.dispatch=a,l=Ld(!1),d=Hd.bind(null,je,!1,l.queue),l=ln(),f={state:r,dispatch:null,action:n,pending:null},l.queue=f,a=Nw.bind(null,je,f,d,a),f.dispatch=a,l.memoizedState=n,[r,a,!1]}function fy(n){var r=Tt();return dy(r,it,n)}function dy(n,r,a){if(r=Vd(n,r,uy)[0],n=Vu(nr)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var l=Tl(r)}catch(b){throw b===Ka?Au:b}else l=r;r=Tt();var f=r.queue,d=f.dispatch;return a!==r.memoizedState&&(je.flags|=2048,eo(9,{destroy:void 0},Cw.bind(null,f,a),null)),[l,d,n]}function Cw(n,r){n.action=r}function my(n){var r=Tt(),a=it;if(a!==null)return dy(r,a,n);Tt(),r=r.memoizedState,a=Tt();var l=a.queue.dispatch;return a.memoizedState=n,[r,l,!1]}function eo(n,r,a,l){return n={tag:n,create:a,deps:l,inst:r,next:null},r=je.updateQueue,r===null&&(r=Ou(),je.updateQueue=r),a=r.lastEffect,a===null?r.lastEffect=n.next=n:(l=a.next,a.next=n,n.next=l,r.lastEffect=n),n}function py(){return Tt().memoizedState}function ju(n,r,a,l){var f=ln();je.flags|=n,f.memoizedState=eo(1|r,{destroy:void 0},a,l===void 0?null:l)}function Lu(n,r,a,l){var f=Tt();l=l===void 0?null:l;var d=f.memoizedState.inst;it!==null&&l!==null&&Rd(l,it.memoizedState.deps)?f.memoizedState=eo(r,d,a,l):(je.flags|=n,f.memoizedState=eo(1|r,d,a,l))}function gy(n,r){ju(8390656,8,n,r)}function Ud(n,r){Lu(2048,8,n,r)}function Rw(n){je.flags|=4;var r=je.updateQueue;if(r===null)r=Ou(),je.updateQueue=r,r.events=[n];else{var a=r.events;a===null?r.events=[n]:a.push(n)}}function yy(n){var r=Tt().memoizedState;return Rw({ref:r,nextImpl:n}),function(){if((Xe&2)!==0)throw Error(s(440));return r.impl.apply(void 0,arguments)}}function _y(n,r){return Lu(4,2,n,r)}function vy(n,r){return Lu(4,4,n,r)}function by(n,r){if(typeof r=="function"){n=n();var a=r(n);return function(){typeof a=="function"?a():r(null)}}if(r!=null)return n=n(),r.current=n,function(){r.current=null}}function xy(n,r,a){a=a!=null?a.concat([n]):null,Lu(4,4,by.bind(null,r,n),a)}function zd(){}function Ey(n,r){var a=Tt();r=r===void 0?null:r;var l=a.memoizedState;return r!==null&&Rd(r,l[1])?l[0]:(a.memoizedState=[n,r],n)}function Ty(n,r){var a=Tt();r=r===void 0?null:r;var l=a.memoizedState;if(r!==null&&Rd(r,l[1]))return l[0];if(l=n(),ia){kn(!0);try{n()}finally{kn(!1)}}return a.memoizedState=[l,r],l}function Bd(n,r,a){return a===void 0||(tr&1073741824)!==0&&(ze&261930)===0?n.memoizedState=r:(n.memoizedState=a,n=w_(),je.lanes|=n,Wr|=n,a)}function wy(n,r,a,l){return En(a,r)?a:Wa.current!==null?(n=Bd(n,a,l),En(n,r)||(Dt=!0),n):(tr&42)===0||(tr&1073741824)!==0&&(ze&261930)===0?(Dt=!0,n.memoizedState=a):(n=w_(),je.lanes|=n,Wr|=n,r)}function Ay(n,r,a,l,f){var d=z.p;z.p=d!==0&&8>d?d:8;var b=j.T,A={};j.T=A,Hd(n,!1,r,a);try{var V=f(),Q=j.S;if(Q!==null&&Q(A,V),V!==null&&typeof V=="object"&&typeof V.then=="function"){var ne=ww(V,l);wl(n,r,ne,Cn(n))}else wl(n,r,l,Cn(n))}catch(le){wl(n,r,{then:function(){},status:"rejected",reason:le},Cn())}finally{z.p=d,b!==null&&A.types!==null&&(b.types=A.types),j.T=b}}function Iw(){}function qd(n,r,a,l){if(n.tag!==5)throw Error(s(476));var f=Sy(n).queue;Ay(n,f,r,W,a===null?Iw:function(){return Ny(n),a(l)})}function Sy(n){var r=n.memoizedState;if(r!==null)return r;r={memoizedState:W,baseState:W,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:nr,lastRenderedState:W},next:null};var a={};return r.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:nr,lastRenderedState:a},next:null},n.memoizedState=r,n=n.alternate,n!==null&&(n.memoizedState=r),r}function Ny(n){var r=Sy(n);r.next===null&&(r=n.alternate.memoizedState),wl(n,r.next.queue,{},Cn())}function Fd(){return Yt(Bl)}function Cy(){return Tt().memoizedState}function Ry(){return Tt().memoizedState}function Dw(n){for(var r=n.return;r!==null;){switch(r.tag){case 24:case 3:var a=Cn();n=Gr(a);var l=$r(r,n,a);l!==null&&(pn(l,r,a),vl(l,r,a)),r={cache:_d()},n.payload=r;return}r=r.return}}function Mw(n,r,a){var l=Cn();a={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Pu(n)?Dy(r,a):(a=od(n,r,a,l),a!==null&&(pn(a,n,l),My(a,r,l)))}function Iy(n,r,a){var l=Cn();wl(n,r,a,l)}function wl(n,r,a,l){var f={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(Pu(n))Dy(r,f);else{var d=n.alternate;if(n.lanes===0&&(d===null||d.lanes===0)&&(d=r.lastRenderedReducer,d!==null))try{var b=r.lastRenderedState,A=d(b,a);if(f.hasEagerState=!0,f.eagerState=A,En(A,b))return _u(n,r,f,0),ot===null&&yu(),!1}catch{}finally{}if(a=od(n,r,f,l),a!==null)return pn(a,n,l),My(a,r,l),!0}return!1}function Hd(n,r,a,l){if(l={lane:2,revertLane:Em(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Pu(n)){if(r)throw Error(s(479))}else r=od(n,a,l,2),r!==null&&pn(r,n,2)}function Pu(n){var r=n.alternate;return n===je||r!==null&&r===je}function Dy(n,r){Za=Du=!0;var a=n.pending;a===null?r.next=r:(r.next=a.next,a.next=r),n.pending=r}function My(n,r,a){if((a&4194048)!==0){var l=r.lanes;l&=n.pendingLanes,a|=l,r.lanes=a,$o(n,a)}}var Al={readContext:Yt,use:ku,useCallback:yt,useContext:yt,useEffect:yt,useImperativeHandle:yt,useLayoutEffect:yt,useInsertionEffect:yt,useMemo:yt,useReducer:yt,useRef:yt,useState:yt,useDebugValue:yt,useDeferredValue:yt,useTransition:yt,useSyncExternalStore:yt,useId:yt,useHostTransitionStatus:yt,useFormState:yt,useActionState:yt,useOptimistic:yt,useMemoCache:yt,useCacheRefresh:yt};Al.useEffectEvent=yt;var Oy={readContext:Yt,use:ku,useCallback:function(n,r){return ln().memoizedState=[n,r===void 0?null:r],n},useContext:Yt,useEffect:gy,useImperativeHandle:function(n,r,a){a=a!=null?a.concat([n]):null,ju(4194308,4,by.bind(null,r,n),a)},useLayoutEffect:function(n,r){return ju(4194308,4,n,r)},useInsertionEffect:function(n,r){ju(4,2,n,r)},useMemo:function(n,r){var a=ln();r=r===void 0?null:r;var l=n();if(ia){kn(!0);try{n()}finally{kn(!1)}}return a.memoizedState=[l,r],l},useReducer:function(n,r,a){var l=ln();if(a!==void 0){var f=a(r);if(ia){kn(!0);try{a(r)}finally{kn(!1)}}}else f=r;return l.memoizedState=l.baseState=f,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:f},l.queue=n,n=n.dispatch=Mw.bind(null,je,n),[l.memoizedState,n]},useRef:function(n){var r=ln();return n={current:n},r.memoizedState=n},useState:function(n){n=Ld(n);var r=n.queue,a=Iy.bind(null,je,r);return r.dispatch=a,[n.memoizedState,a]},useDebugValue:zd,useDeferredValue:function(n,r){var a=ln();return Bd(a,n,r)},useTransition:function(){var n=Ld(!1);return n=Ay.bind(null,je,n.queue,!0,!1),ln().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,r,a){var l=je,f=ln();if(Ge){if(a===void 0)throw Error(s(407));a=a()}else{if(a=r(),ot===null)throw Error(s(349));(ze&127)!==0||ey(l,r,a)}f.memoizedState=a;var d={value:a,getSnapshot:r};return f.queue=d,gy(ny.bind(null,l,d,n),[n]),l.flags|=2048,eo(9,{destroy:void 0},ty.bind(null,l,d,a,r),null),a},useId:function(){var n=ln(),r=ot.identifierPrefix;if(Ge){var a=Oi,l=Mi;a=(l&~(1<<32-bt(l)-1)).toString(32)+a,r="_"+r+"R_"+a,a=Mu++,0<a&&(r+="H"+a.toString(32)),r+="_"}else a=Aw++,r="_"+r+"r_"+a.toString(32)+"_";return n.memoizedState=r},useHostTransitionStatus:Fd,useFormState:hy,useActionState:hy,useOptimistic:function(n){var r=ln();r.memoizedState=r.baseState=n;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=a,r=Hd.bind(null,je,!0,a),a.dispatch=r,[n,r]},useMemoCache:kd,useCacheRefresh:function(){return ln().memoizedState=Dw.bind(null,je)},useEffectEvent:function(n){var r=ln(),a={impl:n};return r.memoizedState=a,function(){if((Xe&2)!==0)throw Error(s(440));return a.impl.apply(void 0,arguments)}}},Gd={readContext:Yt,use:ku,useCallback:Ey,useContext:Yt,useEffect:Ud,useImperativeHandle:xy,useInsertionEffect:_y,useLayoutEffect:vy,useMemo:Ty,useReducer:Vu,useRef:py,useState:function(){return Vu(nr)},useDebugValue:zd,useDeferredValue:function(n,r){var a=Tt();return wy(a,it.memoizedState,n,r)},useTransition:function(){var n=Vu(nr)[0],r=Tt().memoizedState;return[typeof n=="boolean"?n:Tl(n),r]},useSyncExternalStore:J0,useId:Cy,useHostTransitionStatus:Fd,useFormState:fy,useActionState:fy,useOptimistic:function(n,r){var a=Tt();return sy(a,it,n,r)},useMemoCache:kd,useCacheRefresh:Ry};Gd.useEffectEvent=yy;var ky={readContext:Yt,use:ku,useCallback:Ey,useContext:Yt,useEffect:Ud,useImperativeHandle:xy,useInsertionEffect:_y,useLayoutEffect:vy,useMemo:Ty,useReducer:jd,useRef:py,useState:function(){return jd(nr)},useDebugValue:zd,useDeferredValue:function(n,r){var a=Tt();return it===null?Bd(a,n,r):wy(a,it.memoizedState,n,r)},useTransition:function(){var n=jd(nr)[0],r=Tt().memoizedState;return[typeof n=="boolean"?n:Tl(n),r]},useSyncExternalStore:J0,useId:Cy,useHostTransitionStatus:Fd,useFormState:my,useActionState:my,useOptimistic:function(n,r){var a=Tt();return it!==null?sy(a,it,n,r):(a.baseState=n,[n,a.queue.dispatch])},useMemoCache:kd,useCacheRefresh:Ry};ky.useEffectEvent=yy;function $d(n,r,a,l){r=n.memoizedState,a=a(l,r),a=a==null?r:x({},r,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var Yd={enqueueSetState:function(n,r,a){n=n._reactInternals;var l=Cn(),f=Gr(l);f.payload=r,a!=null&&(f.callback=a),r=$r(n,f,l),r!==null&&(pn(r,n,l),vl(r,n,l))},enqueueReplaceState:function(n,r,a){n=n._reactInternals;var l=Cn(),f=Gr(l);f.tag=1,f.payload=r,a!=null&&(f.callback=a),r=$r(n,f,l),r!==null&&(pn(r,n,l),vl(r,n,l))},enqueueForceUpdate:function(n,r){n=n._reactInternals;var a=Cn(),l=Gr(a);l.tag=2,r!=null&&(l.callback=r),r=$r(n,l,a),r!==null&&(pn(r,n,a),vl(r,n,a))}};function Vy(n,r,a,l,f,d,b){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(l,d,b):r.prototype&&r.prototype.isPureReactComponent?!hl(a,l)||!hl(f,d):!0}function jy(n,r,a,l){n=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(a,l),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(a,l),r.state!==n&&Yd.enqueueReplaceState(r,r.state,null)}function ra(n,r){var a=r;if("ref"in r){a={};for(var l in r)l!=="ref"&&(a[l]=r[l])}if(n=n.defaultProps){a===r&&(a=x({},a));for(var f in n)a[f]===void 0&&(a[f]=n[f])}return a}function Ly(n){gu(n)}function Py(n){console.error(n)}function Uy(n){gu(n)}function Uu(n,r){try{var a=n.onUncaughtError;a(r.value,{componentStack:r.stack})}catch(l){setTimeout(function(){throw l})}}function zy(n,r,a){try{var l=n.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function Qd(n,r,a){return a=Gr(a),a.tag=3,a.payload={element:null},a.callback=function(){Uu(n,r)},a}function By(n){return n=Gr(n),n.tag=3,n}function qy(n,r,a,l){var f=a.type.getDerivedStateFromError;if(typeof f=="function"){var d=l.value;n.payload=function(){return f(d)},n.callback=function(){zy(r,a,l)}}var b=a.stateNode;b!==null&&typeof b.componentDidCatch=="function"&&(n.callback=function(){zy(r,a,l),typeof f!="function"&&(Zr===null?Zr=new Set([this]):Zr.add(this));var A=l.stack;this.componentDidCatch(l.value,{componentStack:A!==null?A:""})})}function Ow(n,r,a,l,f){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(r=a.alternate,r!==null&&$a(r,a,f,!0),a=wn.current,a!==null){switch(a.tag){case 31:case 13:return Hn===null?Wu():a.alternate===null&&_t===0&&(_t=3),a.flags&=-257,a.flags|=65536,a.lanes=f,l===Su?a.flags|=16384:(r=a.updateQueue,r===null?a.updateQueue=new Set([l]):r.add(l),vm(n,l,f)),!1;case 22:return a.flags|=65536,l===Su?a.flags|=16384:(r=a.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=r):(a=r.retryQueue,a===null?r.retryQueue=new Set([l]):a.add(l)),vm(n,l,f)),!1}throw Error(s(435,a.tag))}return vm(n,l,f),Wu(),!1}if(Ge)return r=wn.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=f,l!==dd&&(n=Error(s(422),{cause:l}),ml(zn(n,a)))):(l!==dd&&(r=Error(s(423),{cause:l}),ml(zn(r,a))),n=n.current.alternate,n.flags|=65536,f&=-f,n.lanes|=f,l=zn(l,a),f=Qd(n.stateNode,l,f),wd(n,f),_t!==4&&(_t=2)),!1;var d=Error(s(520),{cause:l});if(d=zn(d,a),Ol===null?Ol=[d]:Ol.push(d),_t!==4&&(_t=2),r===null)return!0;l=zn(l,a),a=r;do{switch(a.tag){case 3:return a.flags|=65536,n=f&-f,a.lanes|=n,n=Qd(a.stateNode,l,n),wd(a,n),!1;case 1:if(r=a.type,d=a.stateNode,(a.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(Zr===null||!Zr.has(d))))return a.flags|=65536,f&=-f,a.lanes|=f,f=By(f),qy(f,n,a,l),wd(a,f),!1}a=a.return}while(a!==null);return!1}var Kd=Error(s(461)),Dt=!1;function Qt(n,r,a,l){r.child=n===null?$0(r,null,a,l):na(r,n.child,a,l)}function Fy(n,r,a,l,f){a=a.render;var d=r.ref;if("ref"in l){var b={};for(var A in l)A!=="ref"&&(b[A]=l[A])}else b=l;return Zs(r),l=Id(n,r,a,b,d,f),A=Dd(),n!==null&&!Dt?(Md(n,r,f),ir(n,r,f)):(Ge&&A&&hd(r),r.flags|=1,Qt(n,r,l,f),r.child)}function Hy(n,r,a,l,f){if(n===null){var d=a.type;return typeof d=="function"&&!ld(d)&&d.defaultProps===void 0&&a.compare===null?(r.tag=15,r.type=d,Gy(n,r,d,l,f)):(n=bu(a.type,null,l,r,r.mode,f),n.ref=r.ref,n.return=r,r.child=n)}if(d=n.child,!im(n,f)){var b=d.memoizedProps;if(a=a.compare,a=a!==null?a:hl,a(b,l)&&n.ref===r.ref)return ir(n,r,f)}return r.flags|=1,n=Wi(d,l),n.ref=r.ref,n.return=r,r.child=n}function Gy(n,r,a,l,f){if(n!==null){var d=n.memoizedProps;if(hl(d,l)&&n.ref===r.ref)if(Dt=!1,r.pendingProps=l=d,im(n,f))(n.flags&131072)!==0&&(Dt=!0);else return r.lanes=n.lanes,ir(n,r,f)}return Xd(n,r,a,l,f)}function $y(n,r,a,l){var f=l.children,d=n!==null?n.memoizedState:null;if(n===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((r.flags&128)!==0){if(d=d!==null?d.baseLanes|a:a,n!==null){for(l=r.child=n.child,f=0;l!==null;)f=f|l.lanes|l.childLanes,l=l.sibling;l=f&~d}else l=0,r.child=null;return Yy(n,r,d,a,l)}if((a&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},n!==null&&wu(r,d!==null?d.cachePool:null),d!==null?K0(r,d):Sd(),X0(r);else return l=r.lanes=536870912,Yy(n,r,d!==null?d.baseLanes|a:a,a,l)}else d!==null?(wu(r,d.cachePool),K0(r,d),Qr(),r.memoizedState=null):(n!==null&&wu(r,null),Sd(),Qr());return Qt(n,r,f,a),r.child}function Sl(n,r){return n!==null&&n.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function Yy(n,r,a,l,f){var d=bd();return d=d===null?null:{parent:Rt._currentValue,pool:d},r.memoizedState={baseLanes:a,cachePool:d},n!==null&&wu(r,null),Sd(),X0(r),n!==null&&$a(n,r,l,!0),r.childLanes=f,null}function zu(n,r){return r=qu({mode:r.mode,children:r.children},n.mode),r.ref=n.ref,n.child=r,r.return=n,r}function Qy(n,r,a){return na(r,n.child,null,a),n=zu(r,r.pendingProps),n.flags|=2,An(r),r.memoizedState=null,n}function kw(n,r,a){var l=r.pendingProps,f=(r.flags&128)!==0;if(r.flags&=-129,n===null){if(Ge){if(l.mode==="hidden")return n=zu(r,l),r.lanes=536870912,Sl(null,n);if(Cd(r),(n=ct)?(n=av(n,Fn),n=n!==null&&n.data==="&"?n:null,n!==null&&(r.memoizedState={dehydrated:n,treeContext:zr!==null?{id:Mi,overflow:Oi}:null,retryLane:536870912,hydrationErrors:null},a=D0(n),a.return=r,r.child=a,$t=r,ct=null)):n=null,n===null)throw qr(r);return r.lanes=536870912,null}return zu(r,l)}var d=n.memoizedState;if(d!==null){var b=d.dehydrated;if(Cd(r),f)if(r.flags&256)r.flags&=-257,r=Qy(n,r,a);else if(r.memoizedState!==null)r.child=n.child,r.flags|=128,r=null;else throw Error(s(558));else if(Dt||$a(n,r,a,!1),f=(a&n.childLanes)!==0,Dt||f){if(l=ot,l!==null&&(b=Yo(l,a),b!==0&&b!==d.retryLane))throw d.retryLane=b,Qs(n,b),pn(l,n,b),Kd;Wu(),r=Qy(n,r,a)}else n=d.treeContext,ct=Gn(b.nextSibling),$t=r,Ge=!0,Br=null,Fn=!1,n!==null&&k0(r,n),r=zu(r,l),r.flags|=4096;return r}return n=Wi(n.child,{mode:l.mode,children:l.children}),n.ref=r.ref,r.child=n,n.return=r,n}function Bu(n,r){var a=r.ref;if(a===null)n!==null&&n.ref!==null&&(r.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(n===null||n.ref!==a)&&(r.flags|=4194816)}}function Xd(n,r,a,l,f){return Zs(r),a=Id(n,r,a,l,void 0,f),l=Dd(),n!==null&&!Dt?(Md(n,r,f),ir(n,r,f)):(Ge&&l&&hd(r),r.flags|=1,Qt(n,r,a,f),r.child)}function Ky(n,r,a,l,f,d){return Zs(r),r.updateQueue=null,a=Z0(r,l,a,f),W0(n),l=Dd(),n!==null&&!Dt?(Md(n,r,d),ir(n,r,d)):(Ge&&l&&hd(r),r.flags|=1,Qt(n,r,a,d),r.child)}function Xy(n,r,a,l,f){if(Zs(r),r.stateNode===null){var d=qa,b=a.contextType;typeof b=="object"&&b!==null&&(d=Yt(b)),d=new a(l,d),r.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=Yd,r.stateNode=d,d._reactInternals=r,d=r.stateNode,d.props=l,d.state=r.memoizedState,d.refs={},Ed(r),b=a.contextType,d.context=typeof b=="object"&&b!==null?Yt(b):qa,d.state=r.memoizedState,b=a.getDerivedStateFromProps,typeof b=="function"&&($d(r,a,b,l),d.state=r.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(b=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),b!==d.state&&Yd.enqueueReplaceState(d,d.state,null),xl(r,l,d,f),bl(),d.state=r.memoizedState),typeof d.componentDidMount=="function"&&(r.flags|=4194308),l=!0}else if(n===null){d=r.stateNode;var A=r.memoizedProps,V=ra(a,A);d.props=V;var Q=d.context,ne=a.contextType;b=qa,typeof ne=="object"&&ne!==null&&(b=Yt(ne));var le=a.getDerivedStateFromProps;ne=typeof le=="function"||typeof d.getSnapshotBeforeUpdate=="function",A=r.pendingProps!==A,ne||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(A||Q!==b)&&jy(r,d,l,b),Hr=!1;var Z=r.memoizedState;d.state=Z,xl(r,l,d,f),bl(),Q=r.memoizedState,A||Z!==Q||Hr?(typeof le=="function"&&($d(r,a,le,l),Q=r.memoizedState),(V=Hr||Vy(r,a,V,l,Z,Q,b))?(ne||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(r.flags|=4194308)):(typeof d.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=l,r.memoizedState=Q),d.props=l,d.state=Q,d.context=b,l=V):(typeof d.componentDidMount=="function"&&(r.flags|=4194308),l=!1)}else{d=r.stateNode,Td(n,r),b=r.memoizedProps,ne=ra(a,b),d.props=ne,le=r.pendingProps,Z=d.context,Q=a.contextType,V=qa,typeof Q=="object"&&Q!==null&&(V=Yt(Q)),A=a.getDerivedStateFromProps,(Q=typeof A=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(b!==le||Z!==V)&&jy(r,d,l,V),Hr=!1,Z=r.memoizedState,d.state=Z,xl(r,l,d,f),bl();var ee=r.memoizedState;b!==le||Z!==ee||Hr||n!==null&&n.dependencies!==null&&Eu(n.dependencies)?(typeof A=="function"&&($d(r,a,A,l),ee=r.memoizedState),(ne=Hr||Vy(r,a,ne,l,Z,ee,V)||n!==null&&n.dependencies!==null&&Eu(n.dependencies))?(Q||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(l,ee,V),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(l,ee,V)),typeof d.componentDidUpdate=="function"&&(r.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof d.componentDidUpdate!="function"||b===n.memoizedProps&&Z===n.memoizedState||(r.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||b===n.memoizedProps&&Z===n.memoizedState||(r.flags|=1024),r.memoizedProps=l,r.memoizedState=ee),d.props=l,d.state=ee,d.context=V,l=ne):(typeof d.componentDidUpdate!="function"||b===n.memoizedProps&&Z===n.memoizedState||(r.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||b===n.memoizedProps&&Z===n.memoizedState||(r.flags|=1024),l=!1)}return d=l,Bu(n,r),l=(r.flags&128)!==0,d||l?(d=r.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:d.render(),r.flags|=1,n!==null&&l?(r.child=na(r,n.child,null,f),r.child=na(r,null,a,f)):Qt(n,r,a,f),r.memoizedState=d.state,n=r.child):n=ir(n,r,f),n}function Wy(n,r,a,l){return Xs(),r.flags|=256,Qt(n,r,a,l),r.child}var Wd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Zd(n){return{baseLanes:n,cachePool:z0()}}function Jd(n,r,a){return n=n!==null?n.childLanes&~a:0,r&&(n|=Nn),n}function Zy(n,r,a){var l=r.pendingProps,f=!1,d=(r.flags&128)!==0,b;if((b=d)||(b=n!==null&&n.memoizedState===null?!1:(Et.current&2)!==0),b&&(f=!0,r.flags&=-129),b=(r.flags&32)!==0,r.flags&=-33,n===null){if(Ge){if(f?Yr(r):Qr(),(n=ct)?(n=av(n,Fn),n=n!==null&&n.data!=="&"?n:null,n!==null&&(r.memoizedState={dehydrated:n,treeContext:zr!==null?{id:Mi,overflow:Oi}:null,retryLane:536870912,hydrationErrors:null},a=D0(n),a.return=r,r.child=a,$t=r,ct=null)):n=null,n===null)throw qr(r);return Vm(n)?r.lanes=32:r.lanes=536870912,null}var A=l.children;return l=l.fallback,f?(Qr(),f=r.mode,A=qu({mode:"hidden",children:A},f),l=Ks(l,f,a,null),A.return=r,l.return=r,A.sibling=l,r.child=A,l=r.child,l.memoizedState=Zd(a),l.childLanes=Jd(n,b,a),r.memoizedState=Wd,Sl(null,l)):(Yr(r),em(r,A))}var V=n.memoizedState;if(V!==null&&(A=V.dehydrated,A!==null)){if(d)r.flags&256?(Yr(r),r.flags&=-257,r=tm(n,r,a)):r.memoizedState!==null?(Qr(),r.child=n.child,r.flags|=128,r=null):(Qr(),A=l.fallback,f=r.mode,l=qu({mode:"visible",children:l.children},f),A=Ks(A,f,a,null),A.flags|=2,l.return=r,A.return=r,l.sibling=A,r.child=l,na(r,n.child,null,a),l=r.child,l.memoizedState=Zd(a),l.childLanes=Jd(n,b,a),r.memoizedState=Wd,r=Sl(null,l));else if(Yr(r),Vm(A)){if(b=A.nextSibling&&A.nextSibling.dataset,b)var Q=b.dgst;b=Q,l=Error(s(419)),l.stack="",l.digest=b,ml({value:l,source:null,stack:null}),r=tm(n,r,a)}else if(Dt||$a(n,r,a,!1),b=(a&n.childLanes)!==0,Dt||b){if(b=ot,b!==null&&(l=Yo(b,a),l!==0&&l!==V.retryLane))throw V.retryLane=l,Qs(n,l),pn(b,n,l),Kd;km(A)||Wu(),r=tm(n,r,a)}else km(A)?(r.flags|=192,r.child=n.child,r=null):(n=V.treeContext,ct=Gn(A.nextSibling),$t=r,Ge=!0,Br=null,Fn=!1,n!==null&&k0(r,n),r=em(r,l.children),r.flags|=4096);return r}return f?(Qr(),A=l.fallback,f=r.mode,V=n.child,Q=V.sibling,l=Wi(V,{mode:"hidden",children:l.children}),l.subtreeFlags=V.subtreeFlags&65011712,Q!==null?A=Wi(Q,A):(A=Ks(A,f,a,null),A.flags|=2),A.return=r,l.return=r,l.sibling=A,r.child=l,Sl(null,l),l=r.child,A=n.child.memoizedState,A===null?A=Zd(a):(f=A.cachePool,f!==null?(V=Rt._currentValue,f=f.parent!==V?{parent:V,pool:V}:f):f=z0(),A={baseLanes:A.baseLanes|a,cachePool:f}),l.memoizedState=A,l.childLanes=Jd(n,b,a),r.memoizedState=Wd,Sl(n.child,l)):(Yr(r),a=n.child,n=a.sibling,a=Wi(a,{mode:"visible",children:l.children}),a.return=r,a.sibling=null,n!==null&&(b=r.deletions,b===null?(r.deletions=[n],r.flags|=16):b.push(n)),r.child=a,r.memoizedState=null,a)}function em(n,r){return r=qu({mode:"visible",children:r},n.mode),r.return=n,n.child=r}function qu(n,r){return n=Tn(22,n,null,r),n.lanes=0,n}function tm(n,r,a){return na(r,n.child,null,a),n=em(r,r.pendingProps.children),n.flags|=2,r.memoizedState=null,n}function Jy(n,r,a){n.lanes|=r;var l=n.alternate;l!==null&&(l.lanes|=r),gd(n.return,r,a)}function nm(n,r,a,l,f,d){var b=n.memoizedState;b===null?n.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:f,treeForkCount:d}:(b.isBackwards=r,b.rendering=null,b.renderingStartTime=0,b.last=l,b.tail=a,b.tailMode=f,b.treeForkCount=d)}function e_(n,r,a){var l=r.pendingProps,f=l.revealOrder,d=l.tail;l=l.children;var b=Et.current,A=(b&2)!==0;if(A?(b=b&1|2,r.flags|=128):b&=1,fe(Et,b),Qt(n,r,l,a),l=Ge?dl:0,!A&&n!==null&&(n.flags&128)!==0)e:for(n=r.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Jy(n,a,r);else if(n.tag===19)Jy(n,a,r);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===r)break e;for(;n.sibling===null;){if(n.return===null||n.return===r)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(f){case"forwards":for(a=r.child,f=null;a!==null;)n=a.alternate,n!==null&&Iu(n)===null&&(f=a),a=a.sibling;a=f,a===null?(f=r.child,r.child=null):(f=a.sibling,a.sibling=null),nm(r,!1,f,a,d,l);break;case"backwards":case"unstable_legacy-backwards":for(a=null,f=r.child,r.child=null;f!==null;){if(n=f.alternate,n!==null&&Iu(n)===null){r.child=f;break}n=f.sibling,f.sibling=a,a=f,f=n}nm(r,!0,a,null,d,l);break;case"together":nm(r,!1,null,null,void 0,l);break;default:r.memoizedState=null}return r.child}function ir(n,r,a){if(n!==null&&(r.dependencies=n.dependencies),Wr|=r.lanes,(a&r.childLanes)===0)if(n!==null){if($a(n,r,a,!1),(a&r.childLanes)===0)return null}else return null;if(n!==null&&r.child!==n.child)throw Error(s(153));if(r.child!==null){for(n=r.child,a=Wi(n,n.pendingProps),r.child=a,a.return=r;n.sibling!==null;)n=n.sibling,a=a.sibling=Wi(n,n.pendingProps),a.return=r;a.sibling=null}return r.child}function im(n,r){return(n.lanes&r)!==0?!0:(n=n.dependencies,!!(n!==null&&Eu(n)))}function Vw(n,r,a){switch(r.tag){case 3:Se(r,r.stateNode.containerInfo),Fr(r,Rt,n.memoizedState.cache),Xs();break;case 27:case 5:at(r);break;case 4:Se(r,r.stateNode.containerInfo);break;case 10:Fr(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,Cd(r),null;break;case 13:var l=r.memoizedState;if(l!==null)return l.dehydrated!==null?(Yr(r),r.flags|=128,null):(a&r.child.childLanes)!==0?Zy(n,r,a):(Yr(r),n=ir(n,r,a),n!==null?n.sibling:null);Yr(r);break;case 19:var f=(n.flags&128)!==0;if(l=(a&r.childLanes)!==0,l||($a(n,r,a,!1),l=(a&r.childLanes)!==0),f){if(l)return e_(n,r,a);r.flags|=128}if(f=r.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),fe(Et,Et.current),l)break;return null;case 22:return r.lanes=0,$y(n,r,a,r.pendingProps);case 24:Fr(r,Rt,n.memoizedState.cache)}return ir(n,r,a)}function t_(n,r,a){if(n!==null)if(n.memoizedProps!==r.pendingProps)Dt=!0;else{if(!im(n,a)&&(r.flags&128)===0)return Dt=!1,Vw(n,r,a);Dt=(n.flags&131072)!==0}else Dt=!1,Ge&&(r.flags&1048576)!==0&&O0(r,dl,r.index);switch(r.lanes=0,r.tag){case 16:e:{var l=r.pendingProps;if(n=ea(r.elementType),r.type=n,typeof n=="function")ld(n)?(l=ra(n,l),r.tag=1,r=Xy(null,r,n,l,a)):(r.tag=0,r=Xd(null,r,n,l,a));else{if(n!=null){var f=n.$$typeof;if(f===ie){r.tag=11,r=Fy(null,r,n,l,a);break e}else if(f===D){r.tag=14,r=Hy(null,r,n,l,a);break e}}throw r=oe(n)||n,Error(s(306,r,""))}}return r;case 0:return Xd(n,r,r.type,r.pendingProps,a);case 1:return l=r.type,f=ra(l,r.pendingProps),Xy(n,r,l,f,a);case 3:e:{if(Se(r,r.stateNode.containerInfo),n===null)throw Error(s(387));l=r.pendingProps;var d=r.memoizedState;f=d.element,Td(n,r),xl(r,l,null,a);var b=r.memoizedState;if(l=b.cache,Fr(r,Rt,l),l!==d.cache&&yd(r,[Rt],a,!0),bl(),l=b.element,d.isDehydrated)if(d={element:l,isDehydrated:!1,cache:b.cache},r.updateQueue.baseState=d,r.memoizedState=d,r.flags&256){r=Wy(n,r,l,a);break e}else if(l!==f){f=zn(Error(s(424)),r),ml(f),r=Wy(n,r,l,a);break e}else{switch(n=r.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(ct=Gn(n.firstChild),$t=r,Ge=!0,Br=null,Fn=!0,a=$0(r,null,l,a),r.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Xs(),l===f){r=ir(n,r,a);break e}Qt(n,r,l,a)}r=r.child}return r;case 26:return Bu(n,r),n===null?(a=fv(r.type,null,r.pendingProps,null))?r.memoizedState=a:Ge||(a=r.type,n=r.pendingProps,l=rh(se.current).createElement(a),l[St]=r,l[zt]=n,Kt(l,a,n),Nt(l),r.stateNode=l):r.memoizedState=fv(r.type,n.memoizedProps,r.pendingProps,n.memoizedState),null;case 27:return at(r),n===null&&Ge&&(l=r.stateNode=cv(r.type,r.pendingProps,se.current),$t=r,Fn=!0,f=ct,ns(r.type)?(jm=f,ct=Gn(l.firstChild)):ct=f),Qt(n,r,r.pendingProps.children,a),Bu(n,r),n===null&&(r.flags|=4194304),r.child;case 5:return n===null&&Ge&&((f=l=ct)&&(l=hA(l,r.type,r.pendingProps,Fn),l!==null?(r.stateNode=l,$t=r,ct=Gn(l.firstChild),Fn=!1,f=!0):f=!1),f||qr(r)),at(r),f=r.type,d=r.pendingProps,b=n!==null?n.memoizedProps:null,l=d.children,Dm(f,d)?l=null:b!==null&&Dm(f,b)&&(r.flags|=32),r.memoizedState!==null&&(f=Id(n,r,Sw,null,null,a),Bl._currentValue=f),Bu(n,r),Qt(n,r,l,a),r.child;case 6:return n===null&&Ge&&((n=a=ct)&&(a=fA(a,r.pendingProps,Fn),a!==null?(r.stateNode=a,$t=r,ct=null,n=!0):n=!1),n||qr(r)),null;case 13:return Zy(n,r,a);case 4:return Se(r,r.stateNode.containerInfo),l=r.pendingProps,n===null?r.child=na(r,null,l,a):Qt(n,r,l,a),r.child;case 11:return Fy(n,r,r.type,r.pendingProps,a);case 7:return Qt(n,r,r.pendingProps,a),r.child;case 8:return Qt(n,r,r.pendingProps.children,a),r.child;case 12:return Qt(n,r,r.pendingProps.children,a),r.child;case 10:return l=r.pendingProps,Fr(r,r.type,l.value),Qt(n,r,l.children,a),r.child;case 9:return f=r.type._context,l=r.pendingProps.children,Zs(r),f=Yt(f),l=l(f),r.flags|=1,Qt(n,r,l,a),r.child;case 14:return Hy(n,r,r.type,r.pendingProps,a);case 15:return Gy(n,r,r.type,r.pendingProps,a);case 19:return e_(n,r,a);case 31:return kw(n,r,a);case 22:return $y(n,r,a,r.pendingProps);case 24:return Zs(r),l=Yt(Rt),n===null?(f=bd(),f===null&&(f=ot,d=_d(),f.pooledCache=d,d.refCount++,d!==null&&(f.pooledCacheLanes|=a),f=d),r.memoizedState={parent:l,cache:f},Ed(r),Fr(r,Rt,f)):((n.lanes&a)!==0&&(Td(n,r),xl(r,null,null,a),bl()),f=n.memoizedState,d=r.memoizedState,f.parent!==l?(f={parent:l,cache:l},r.memoizedState=f,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=f),Fr(r,Rt,l)):(l=d.cache,Fr(r,Rt,l),l!==f.cache&&yd(r,[Rt],a,!0))),Qt(n,r,r.pendingProps.children,a),r.child;case 29:throw r.pendingProps}throw Error(s(156,r.tag))}function rr(n){n.flags|=4}function rm(n,r,a,l,f){if((r=(n.mode&32)!==0)&&(r=!1),r){if(n.flags|=16777216,(f&335544128)===f)if(n.stateNode.complete)n.flags|=8192;else if(C_())n.flags|=8192;else throw ta=Su,xd}else n.flags&=-16777217}function n_(n,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!yv(r))if(C_())n.flags|=8192;else throw ta=Su,xd}function Fu(n,r){r!==null&&(n.flags|=4),n.flags&16384&&(r=n.tag!==22?Kc():536870912,n.lanes|=r,ro|=r)}function Nl(n,r){if(!Ge)switch(n.tailMode){case"hidden":r=n.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?r||n.tail===null?n.tail=null:n.tail.sibling=null:l.sibling=null}}function ut(n){var r=n.alternate!==null&&n.alternate.child===n.child,a=0,l=0;if(r)for(var f=n.child;f!==null;)a|=f.lanes|f.childLanes,l|=f.subtreeFlags&65011712,l|=f.flags&65011712,f.return=n,f=f.sibling;else for(f=n.child;f!==null;)a|=f.lanes|f.childLanes,l|=f.subtreeFlags,l|=f.flags,f.return=n,f=f.sibling;return n.subtreeFlags|=l,n.childLanes=a,r}function jw(n,r,a){var l=r.pendingProps;switch(fd(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ut(r),null;case 1:return ut(r),null;case 3:return a=r.stateNode,l=null,n!==null&&(l=n.memoizedState.cache),r.memoizedState.cache!==l&&(r.flags|=2048),er(Rt),Ne(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(n===null||n.child===null)&&(Ga(r)?rr(r):n===null||n.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,md())),ut(r),null;case 26:var f=r.type,d=r.memoizedState;return n===null?(rr(r),d!==null?(ut(r),n_(r,d)):(ut(r),rm(r,f,null,l,a))):d?d!==n.memoizedState?(rr(r),ut(r),n_(r,d)):(ut(r),r.flags&=-16777217):(n=n.memoizedProps,n!==l&&rr(r),ut(r),rm(r,f,n,l,a)),null;case 27:if(Me(r),a=se.current,f=r.type,n!==null&&r.stateNode!=null)n.memoizedProps!==l&&rr(r);else{if(!l){if(r.stateNode===null)throw Error(s(166));return ut(r),null}n=me.current,Ga(r)?V0(r):(n=cv(f,l,a),r.stateNode=n,rr(r))}return ut(r),null;case 5:if(Me(r),f=r.type,n!==null&&r.stateNode!=null)n.memoizedProps!==l&&rr(r);else{if(!l){if(r.stateNode===null)throw Error(s(166));return ut(r),null}if(d=me.current,Ga(r))V0(r);else{var b=rh(se.current);switch(d){case 1:d=b.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:d=b.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":d=b.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":d=b.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":d=b.createElement("div"),d.innerHTML="<script><\/script>",d=d.removeChild(d.firstChild);break;case"select":d=typeof l.is=="string"?b.createElement("select",{is:l.is}):b.createElement("select"),l.multiple?d.multiple=!0:l.size&&(d.size=l.size);break;default:d=typeof l.is=="string"?b.createElement(f,{is:l.is}):b.createElement(f)}}d[St]=r,d[zt]=l;e:for(b=r.child;b!==null;){if(b.tag===5||b.tag===6)d.appendChild(b.stateNode);else if(b.tag!==4&&b.tag!==27&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===r)break e;for(;b.sibling===null;){if(b.return===null||b.return===r)break e;b=b.return}b.sibling.return=b.return,b=b.sibling}r.stateNode=d;e:switch(Kt(d,f,l),f){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&rr(r)}}return ut(r),rm(r,r.type,n===null?null:n.memoizedProps,r.pendingProps,a),null;case 6:if(n&&r.stateNode!=null)n.memoizedProps!==l&&rr(r);else{if(typeof l!="string"&&r.stateNode===null)throw Error(s(166));if(n=se.current,Ga(r)){if(n=r.stateNode,a=r.memoizedProps,l=null,f=$t,f!==null)switch(f.tag){case 27:case 5:l=f.memoizedProps}n[St]=r,n=!!(n.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||Z_(n.nodeValue,a)),n||qr(r,!0)}else n=rh(n).createTextNode(l),n[St]=r,r.stateNode=n}return ut(r),null;case 31:if(a=r.memoizedState,n===null||n.memoizedState!==null){if(l=Ga(r),a!==null){if(n===null){if(!l)throw Error(s(318));if(n=r.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(557));n[St]=r}else Xs(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;ut(r),n=!1}else a=md(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=a),n=!0;if(!n)return r.flags&256?(An(r),r):(An(r),null);if((r.flags&128)!==0)throw Error(s(558))}return ut(r),null;case 13:if(l=r.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(f=Ga(r),l!==null&&l.dehydrated!==null){if(n===null){if(!f)throw Error(s(318));if(f=r.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(s(317));f[St]=r}else Xs(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;ut(r),f=!1}else f=md(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=f),f=!0;if(!f)return r.flags&256?(An(r),r):(An(r),null)}return An(r),(r.flags&128)!==0?(r.lanes=a,r):(a=l!==null,n=n!==null&&n.memoizedState!==null,a&&(l=r.child,f=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(f=l.alternate.memoizedState.cachePool.pool),d=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(d=l.memoizedState.cachePool.pool),d!==f&&(l.flags|=2048)),a!==n&&a&&(r.child.flags|=8192),Fu(r,r.updateQueue),ut(r),null);case 4:return Ne(),n===null&&Sm(r.stateNode.containerInfo),ut(r),null;case 10:return er(r.type),ut(r),null;case 19:if(X(Et),l=r.memoizedState,l===null)return ut(r),null;if(f=(r.flags&128)!==0,d=l.rendering,d===null)if(f)Nl(l,!1);else{if(_t!==0||n!==null&&(n.flags&128)!==0)for(n=r.child;n!==null;){if(d=Iu(n),d!==null){for(r.flags|=128,Nl(l,!1),n=d.updateQueue,r.updateQueue=n,Fu(r,n),r.subtreeFlags=0,n=a,a=r.child;a!==null;)I0(a,n),a=a.sibling;return fe(Et,Et.current&1|2),Ge&&Zi(r,l.treeForkCount),r.child}n=n.sibling}l.tail!==null&&an()>Qu&&(r.flags|=128,f=!0,Nl(l,!1),r.lanes=4194304)}else{if(!f)if(n=Iu(d),n!==null){if(r.flags|=128,f=!0,n=n.updateQueue,r.updateQueue=n,Fu(r,n),Nl(l,!0),l.tail===null&&l.tailMode==="hidden"&&!d.alternate&&!Ge)return ut(r),null}else 2*an()-l.renderingStartTime>Qu&&a!==536870912&&(r.flags|=128,f=!0,Nl(l,!1),r.lanes=4194304);l.isBackwards?(d.sibling=r.child,r.child=d):(n=l.last,n!==null?n.sibling=d:r.child=d,l.last=d)}return l.tail!==null?(n=l.tail,l.rendering=n,l.tail=n.sibling,l.renderingStartTime=an(),n.sibling=null,a=Et.current,fe(Et,f?a&1|2:a&1),Ge&&Zi(r,l.treeForkCount),n):(ut(r),null);case 22:case 23:return An(r),Nd(),l=r.memoizedState!==null,n!==null?n.memoizedState!==null!==l&&(r.flags|=8192):l&&(r.flags|=8192),l?(a&536870912)!==0&&(r.flags&128)===0&&(ut(r),r.subtreeFlags&6&&(r.flags|=8192)):ut(r),a=r.updateQueue,a!==null&&Fu(r,a.retryQueue),a=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),l=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(l=r.memoizedState.cachePool.pool),l!==a&&(r.flags|=2048),n!==null&&X(Js),null;case 24:return a=null,n!==null&&(a=n.memoizedState.cache),r.memoizedState.cache!==a&&(r.flags|=2048),er(Rt),ut(r),null;case 25:return null;case 30:return null}throw Error(s(156,r.tag))}function Lw(n,r){switch(fd(r),r.tag){case 1:return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 3:return er(Rt),Ne(),n=r.flags,(n&65536)!==0&&(n&128)===0?(r.flags=n&-65537|128,r):null;case 26:case 27:case 5:return Me(r),null;case 31:if(r.memoizedState!==null){if(An(r),r.alternate===null)throw Error(s(340));Xs()}return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 13:if(An(r),n=r.memoizedState,n!==null&&n.dehydrated!==null){if(r.alternate===null)throw Error(s(340));Xs()}return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 19:return X(Et),null;case 4:return Ne(),null;case 10:return er(r.type),null;case 22:case 23:return An(r),Nd(),n!==null&&X(Js),n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 24:return er(Rt),null;case 25:return null;default:return null}}function i_(n,r){switch(fd(r),r.tag){case 3:er(Rt),Ne();break;case 26:case 27:case 5:Me(r);break;case 4:Ne();break;case 31:r.memoizedState!==null&&An(r);break;case 13:An(r);break;case 19:X(Et);break;case 10:er(r.type);break;case 22:case 23:An(r),Nd(),n!==null&&X(Js);break;case 24:er(Rt)}}function Cl(n,r){try{var a=r.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var f=l.next;a=f;do{if((a.tag&n)===n){l=void 0;var d=a.create,b=a.inst;l=d(),b.destroy=l}a=a.next}while(a!==f)}}catch(A){et(r,r.return,A)}}function Kr(n,r,a){try{var l=r.updateQueue,f=l!==null?l.lastEffect:null;if(f!==null){var d=f.next;l=d;do{if((l.tag&n)===n){var b=l.inst,A=b.destroy;if(A!==void 0){b.destroy=void 0,f=r;var V=a,Q=A;try{Q()}catch(ne){et(f,V,ne)}}}l=l.next}while(l!==d)}}catch(ne){et(r,r.return,ne)}}function r_(n){var r=n.updateQueue;if(r!==null){var a=n.stateNode;try{Q0(r,a)}catch(l){et(n,n.return,l)}}}function s_(n,r,a){a.props=ra(n.type,n.memoizedProps),a.state=n.memoizedState;try{a.componentWillUnmount()}catch(l){et(n,r,l)}}function Rl(n,r){try{var a=n.ref;if(a!==null){switch(n.tag){case 26:case 27:case 5:var l=n.stateNode;break;case 30:l=n.stateNode;break;default:l=n.stateNode}typeof a=="function"?n.refCleanup=a(l):a.current=l}}catch(f){et(n,r,f)}}function ki(n,r){var a=n.ref,l=n.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(f){et(n,r,f)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(f){et(n,r,f)}else a.current=null}function a_(n){var r=n.type,a=n.memoizedProps,l=n.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(f){et(n,n.return,f)}}function sm(n,r,a){try{var l=n.stateNode;sA(l,n.type,a,r),l[zt]=r}catch(f){et(n,n.return,f)}}function o_(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&ns(n.type)||n.tag===4}function am(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||o_(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&ns(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function om(n,r,a){var l=n.tag;if(l===5||l===6)n=n.stateNode,r?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(n,r):(r=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,r.appendChild(n),a=a._reactRootContainer,a!=null||r.onclick!==null||(r.onclick=ei));else if(l!==4&&(l===27&&ns(n.type)&&(a=n.stateNode,r=null),n=n.child,n!==null))for(om(n,r,a),n=n.sibling;n!==null;)om(n,r,a),n=n.sibling}function Hu(n,r,a){var l=n.tag;if(l===5||l===6)n=n.stateNode,r?a.insertBefore(n,r):a.appendChild(n);else if(l!==4&&(l===27&&ns(n.type)&&(a=n.stateNode),n=n.child,n!==null))for(Hu(n,r,a),n=n.sibling;n!==null;)Hu(n,r,a),n=n.sibling}function l_(n){var r=n.stateNode,a=n.memoizedProps;try{for(var l=n.type,f=r.attributes;f.length;)r.removeAttributeNode(f[0]);Kt(r,l,a),r[St]=n,r[zt]=a}catch(d){et(n,n.return,d)}}var sr=!1,Mt=!1,lm=!1,c_=typeof WeakSet=="function"?WeakSet:Set,qt=null;function Pw(n,r){if(n=n.containerInfo,Rm=hh,n=x0(n),td(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var f=l.anchorOffset,d=l.focusNode;l=l.focusOffset;try{a.nodeType,d.nodeType}catch{a=null;break e}var b=0,A=-1,V=-1,Q=0,ne=0,le=n,Z=null;t:for(;;){for(var ee;le!==a||f!==0&&le.nodeType!==3||(A=b+f),le!==d||l!==0&&le.nodeType!==3||(V=b+l),le.nodeType===3&&(b+=le.nodeValue.length),(ee=le.firstChild)!==null;)Z=le,le=ee;for(;;){if(le===n)break t;if(Z===a&&++Q===f&&(A=b),Z===d&&++ne===l&&(V=b),(ee=le.nextSibling)!==null)break;le=Z,Z=le.parentNode}le=ee}a=A===-1||V===-1?null:{start:A,end:V}}else a=null}a=a||{start:0,end:0}}else a=null;for(Im={focusedElem:n,selectionRange:a},hh=!1,qt=r;qt!==null;)if(r=qt,n=r.child,(r.subtreeFlags&1028)!==0&&n!==null)n.return=r,qt=n;else for(;qt!==null;){switch(r=qt,d=r.alternate,n=r.flags,r.tag){case 0:if((n&4)!==0&&(n=r.updateQueue,n=n!==null?n.events:null,n!==null))for(a=0;a<n.length;a++)f=n[a],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&d!==null){n=void 0,a=r,f=d.memoizedProps,d=d.memoizedState,l=a.stateNode;try{var be=ra(a.type,f);n=l.getSnapshotBeforeUpdate(be,d),l.__reactInternalSnapshotBeforeUpdate=n}catch(Ce){et(a,a.return,Ce)}}break;case 3:if((n&1024)!==0){if(n=r.stateNode.containerInfo,a=n.nodeType,a===9)Om(n);else if(a===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":Om(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(s(163))}if(n=r.sibling,n!==null){n.return=r.return,qt=n;break}qt=r.return}}function u_(n,r,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:or(n,a),l&4&&Cl(5,a);break;case 1:if(or(n,a),l&4)if(n=a.stateNode,r===null)try{n.componentDidMount()}catch(b){et(a,a.return,b)}else{var f=ra(a.type,r.memoizedProps);r=r.memoizedState;try{n.componentDidUpdate(f,r,n.__reactInternalSnapshotBeforeUpdate)}catch(b){et(a,a.return,b)}}l&64&&r_(a),l&512&&Rl(a,a.return);break;case 3:if(or(n,a),l&64&&(n=a.updateQueue,n!==null)){if(r=null,a.child!==null)switch(a.child.tag){case 27:case 5:r=a.child.stateNode;break;case 1:r=a.child.stateNode}try{Q0(n,r)}catch(b){et(a,a.return,b)}}break;case 27:r===null&&l&4&&l_(a);case 26:case 5:or(n,a),r===null&&l&4&&a_(a),l&512&&Rl(a,a.return);break;case 12:or(n,a);break;case 31:or(n,a),l&4&&d_(n,a);break;case 13:or(n,a),l&4&&m_(n,a),l&64&&(n=a.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(a=Yw.bind(null,a),dA(n,a))));break;case 22:if(l=a.memoizedState!==null||sr,!l){r=r!==null&&r.memoizedState!==null||Mt,f=sr;var d=Mt;sr=l,(Mt=r)&&!d?lr(n,a,(a.subtreeFlags&8772)!==0):or(n,a),sr=f,Mt=d}break;case 30:break;default:or(n,a)}}function h_(n){var r=n.alternate;r!==null&&(n.alternate=null,h_(r)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(r=n.stateNode,r!==null&&Ca(r)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var dt=null,hn=!1;function ar(n,r,a){for(a=a.child;a!==null;)f_(n,r,a),a=a.sibling}function f_(n,r,a){if(Ht&&typeof Ht.onCommitFiberUnmount=="function")try{Ht.onCommitFiberUnmount(Xn,a)}catch{}switch(a.tag){case 26:Mt||ki(a,r),ar(n,r,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Mt||ki(a,r);var l=dt,f=hn;ns(a.type)&&(dt=a.stateNode,hn=!1),ar(n,r,a),Pl(a.stateNode),dt=l,hn=f;break;case 5:Mt||ki(a,r);case 6:if(l=dt,f=hn,dt=null,ar(n,r,a),dt=l,hn=f,dt!==null)if(hn)try{(dt.nodeType===9?dt.body:dt.nodeName==="HTML"?dt.ownerDocument.body:dt).removeChild(a.stateNode)}catch(d){et(a,r,d)}else try{dt.removeChild(a.stateNode)}catch(d){et(a,r,d)}break;case 18:dt!==null&&(hn?(n=dt,rv(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,a.stateNode),fo(n)):rv(dt,a.stateNode));break;case 4:l=dt,f=hn,dt=a.stateNode.containerInfo,hn=!0,ar(n,r,a),dt=l,hn=f;break;case 0:case 11:case 14:case 15:Kr(2,a,r),Mt||Kr(4,a,r),ar(n,r,a);break;case 1:Mt||(ki(a,r),l=a.stateNode,typeof l.componentWillUnmount=="function"&&s_(a,r,l)),ar(n,r,a);break;case 21:ar(n,r,a);break;case 22:Mt=(l=Mt)||a.memoizedState!==null,ar(n,r,a),Mt=l;break;default:ar(n,r,a)}}function d_(n,r){if(r.memoizedState===null&&(n=r.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{fo(n)}catch(a){et(r,r.return,a)}}}function m_(n,r){if(r.memoizedState===null&&(n=r.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{fo(n)}catch(a){et(r,r.return,a)}}function Uw(n){switch(n.tag){case 31:case 13:case 19:var r=n.stateNode;return r===null&&(r=n.stateNode=new c_),r;case 22:return n=n.stateNode,r=n._retryCache,r===null&&(r=n._retryCache=new c_),r;default:throw Error(s(435,n.tag))}}function Gu(n,r){var a=Uw(n);r.forEach(function(l){if(!a.has(l)){a.add(l);var f=Qw.bind(null,n,l);l.then(f,f)}})}function fn(n,r){var a=r.deletions;if(a!==null)for(var l=0;l<a.length;l++){var f=a[l],d=n,b=r,A=b;e:for(;A!==null;){switch(A.tag){case 27:if(ns(A.type)){dt=A.stateNode,hn=!1;break e}break;case 5:dt=A.stateNode,hn=!1;break e;case 3:case 4:dt=A.stateNode.containerInfo,hn=!0;break e}A=A.return}if(dt===null)throw Error(s(160));f_(d,b,f),dt=null,hn=!1,d=f.alternate,d!==null&&(d.return=null),f.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)p_(r,n),r=r.sibling}var ai=null;function p_(n,r){var a=n.alternate,l=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:fn(r,n),dn(n),l&4&&(Kr(3,n,n.return),Cl(3,n),Kr(5,n,n.return));break;case 1:fn(r,n),dn(n),l&512&&(Mt||a===null||ki(a,a.return)),l&64&&sr&&(n=n.updateQueue,n!==null&&(l=n.callbacks,l!==null&&(a=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var f=ai;if(fn(r,n),dn(n),l&512&&(Mt||a===null||ki(a,a.return)),l&4){var d=a!==null?a.memoizedState:null;if(l=n.memoizedState,a===null)if(l===null)if(n.stateNode===null){e:{l=n.type,a=n.memoizedProps,f=f.ownerDocument||f;t:switch(l){case"title":d=f.getElementsByTagName("title")[0],(!d||d[bi]||d[St]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=f.createElement(l),f.head.insertBefore(d,f.querySelector("head > title"))),Kt(d,l,a),d[St]=n,Nt(d),l=d;break e;case"link":var b=pv("link","href",f).get(l+(a.href||""));if(b){for(var A=0;A<b.length;A++)if(d=b[A],d.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&d.getAttribute("rel")===(a.rel==null?null:a.rel)&&d.getAttribute("title")===(a.title==null?null:a.title)&&d.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){b.splice(A,1);break t}}d=f.createElement(l),Kt(d,l,a),f.head.appendChild(d);break;case"meta":if(b=pv("meta","content",f).get(l+(a.content||""))){for(A=0;A<b.length;A++)if(d=b[A],d.getAttribute("content")===(a.content==null?null:""+a.content)&&d.getAttribute("name")===(a.name==null?null:a.name)&&d.getAttribute("property")===(a.property==null?null:a.property)&&d.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&d.getAttribute("charset")===(a.charSet==null?null:a.charSet)){b.splice(A,1);break t}}d=f.createElement(l),Kt(d,l,a),f.head.appendChild(d);break;default:throw Error(s(468,l))}d[St]=n,Nt(d),l=d}n.stateNode=l}else gv(f,n.type,n.stateNode);else n.stateNode=mv(f,l,n.memoizedProps);else d!==l?(d===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):d.count--,l===null?gv(f,n.type,n.stateNode):mv(f,l,n.memoizedProps)):l===null&&n.stateNode!==null&&sm(n,n.memoizedProps,a.memoizedProps)}break;case 27:fn(r,n),dn(n),l&512&&(Mt||a===null||ki(a,a.return)),a!==null&&l&4&&sm(n,n.memoizedProps,a.memoizedProps);break;case 5:if(fn(r,n),dn(n),l&512&&(Mt||a===null||ki(a,a.return)),n.flags&32){f=n.stateNode;try{un(f,"")}catch(be){et(n,n.return,be)}}l&4&&n.stateNode!=null&&(f=n.memoizedProps,sm(n,f,a!==null?a.memoizedProps:f)),l&1024&&(lm=!0);break;case 6:if(fn(r,n),dn(n),l&4){if(n.stateNode===null)throw Error(s(162));l=n.memoizedProps,a=n.stateNode;try{a.nodeValue=l}catch(be){et(n,n.return,be)}}break;case 3:if(oh=null,f=ai,ai=sh(r.containerInfo),fn(r,n),ai=f,dn(n),l&4&&a!==null&&a.memoizedState.isDehydrated)try{fo(r.containerInfo)}catch(be){et(n,n.return,be)}lm&&(lm=!1,g_(n));break;case 4:l=ai,ai=sh(n.stateNode.containerInfo),fn(r,n),dn(n),ai=l;break;case 12:fn(r,n),dn(n);break;case 31:fn(r,n),dn(n),l&4&&(l=n.updateQueue,l!==null&&(n.updateQueue=null,Gu(n,l)));break;case 13:fn(r,n),dn(n),n.child.flags&8192&&n.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Yu=an()),l&4&&(l=n.updateQueue,l!==null&&(n.updateQueue=null,Gu(n,l)));break;case 22:f=n.memoizedState!==null;var V=a!==null&&a.memoizedState!==null,Q=sr,ne=Mt;if(sr=Q||f,Mt=ne||V,fn(r,n),Mt=ne,sr=Q,dn(n),l&8192)e:for(r=n.stateNode,r._visibility=f?r._visibility&-2:r._visibility|1,f&&(a===null||V||sr||Mt||sa(n)),a=null,r=n;;){if(r.tag===5||r.tag===26){if(a===null){V=a=r;try{if(d=V.stateNode,f)b=d.style,typeof b.setProperty=="function"?b.setProperty("display","none","important"):b.display="none";else{A=V.stateNode;var le=V.memoizedProps.style,Z=le!=null&&le.hasOwnProperty("display")?le.display:null;A.style.display=Z==null||typeof Z=="boolean"?"":(""+Z).trim()}}catch(be){et(V,V.return,be)}}}else if(r.tag===6){if(a===null){V=r;try{V.stateNode.nodeValue=f?"":V.memoizedProps}catch(be){et(V,V.return,be)}}}else if(r.tag===18){if(a===null){V=r;try{var ee=V.stateNode;f?sv(ee,!0):sv(V.stateNode,!1)}catch(be){et(V,V.return,be)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===n)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===n)break e;for(;r.sibling===null;){if(r.return===null||r.return===n)break e;a===r&&(a=null),r=r.return}a===r&&(a=null),r.sibling.return=r.return,r=r.sibling}l&4&&(l=n.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,Gu(n,a))));break;case 19:fn(r,n),dn(n),l&4&&(l=n.updateQueue,l!==null&&(n.updateQueue=null,Gu(n,l)));break;case 30:break;case 21:break;default:fn(r,n),dn(n)}}function dn(n){var r=n.flags;if(r&2){try{for(var a,l=n.return;l!==null;){if(o_(l)){a=l;break}l=l.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var f=a.stateNode,d=am(n);Hu(n,d,f);break;case 5:var b=a.stateNode;a.flags&32&&(un(b,""),a.flags&=-33);var A=am(n);Hu(n,A,b);break;case 3:case 4:var V=a.stateNode.containerInfo,Q=am(n);om(n,Q,V);break;default:throw Error(s(161))}}catch(ne){et(n,n.return,ne)}n.flags&=-3}r&4096&&(n.flags&=-4097)}function g_(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var r=n;g_(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),n=n.sibling}}function or(n,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)u_(n,r.alternate,r),r=r.sibling}function sa(n){for(n=n.child;n!==null;){var r=n;switch(r.tag){case 0:case 11:case 14:case 15:Kr(4,r,r.return),sa(r);break;case 1:ki(r,r.return);var a=r.stateNode;typeof a.componentWillUnmount=="function"&&s_(r,r.return,a),sa(r);break;case 27:Pl(r.stateNode);case 26:case 5:ki(r,r.return),sa(r);break;case 22:r.memoizedState===null&&sa(r);break;case 30:sa(r);break;default:sa(r)}n=n.sibling}}function lr(n,r,a){for(a=a&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var l=r.alternate,f=n,d=r,b=d.flags;switch(d.tag){case 0:case 11:case 15:lr(f,d,a),Cl(4,d);break;case 1:if(lr(f,d,a),l=d,f=l.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(Q){et(l,l.return,Q)}if(l=d,f=l.updateQueue,f!==null){var A=l.stateNode;try{var V=f.shared.hiddenCallbacks;if(V!==null)for(f.shared.hiddenCallbacks=null,f=0;f<V.length;f++)Y0(V[f],A)}catch(Q){et(l,l.return,Q)}}a&&b&64&&r_(d),Rl(d,d.return);break;case 27:l_(d);case 26:case 5:lr(f,d,a),a&&l===null&&b&4&&a_(d),Rl(d,d.return);break;case 12:lr(f,d,a);break;case 31:lr(f,d,a),a&&b&4&&d_(f,d);break;case 13:lr(f,d,a),a&&b&4&&m_(f,d);break;case 22:d.memoizedState===null&&lr(f,d,a),Rl(d,d.return);break;case 30:break;default:lr(f,d,a)}r=r.sibling}}function cm(n,r){var a=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),n=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(n=r.memoizedState.cachePool.pool),n!==a&&(n!=null&&n.refCount++,a!=null&&pl(a))}function um(n,r){n=null,r.alternate!==null&&(n=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==n&&(r.refCount++,n!=null&&pl(n))}function oi(n,r,a,l){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)y_(n,r,a,l),r=r.sibling}function y_(n,r,a,l){var f=r.flags;switch(r.tag){case 0:case 11:case 15:oi(n,r,a,l),f&2048&&Cl(9,r);break;case 1:oi(n,r,a,l);break;case 3:oi(n,r,a,l),f&2048&&(n=null,r.alternate!==null&&(n=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==n&&(r.refCount++,n!=null&&pl(n)));break;case 12:if(f&2048){oi(n,r,a,l),n=r.stateNode;try{var d=r.memoizedProps,b=d.id,A=d.onPostCommit;typeof A=="function"&&A(b,r.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(V){et(r,r.return,V)}}else oi(n,r,a,l);break;case 31:oi(n,r,a,l);break;case 13:oi(n,r,a,l);break;case 23:break;case 22:d=r.stateNode,b=r.alternate,r.memoizedState!==null?d._visibility&2?oi(n,r,a,l):Il(n,r):d._visibility&2?oi(n,r,a,l):(d._visibility|=2,to(n,r,a,l,(r.subtreeFlags&10256)!==0||!1)),f&2048&&cm(b,r);break;case 24:oi(n,r,a,l),f&2048&&um(r.alternate,r);break;default:oi(n,r,a,l)}}function to(n,r,a,l,f){for(f=f&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var d=n,b=r,A=a,V=l,Q=b.flags;switch(b.tag){case 0:case 11:case 15:to(d,b,A,V,f),Cl(8,b);break;case 23:break;case 22:var ne=b.stateNode;b.memoizedState!==null?ne._visibility&2?to(d,b,A,V,f):Il(d,b):(ne._visibility|=2,to(d,b,A,V,f)),f&&Q&2048&&cm(b.alternate,b);break;case 24:to(d,b,A,V,f),f&&Q&2048&&um(b.alternate,b);break;default:to(d,b,A,V,f)}r=r.sibling}}function Il(n,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var a=n,l=r,f=l.flags;switch(l.tag){case 22:Il(a,l),f&2048&&cm(l.alternate,l);break;case 24:Il(a,l),f&2048&&um(l.alternate,l);break;default:Il(a,l)}r=r.sibling}}var Dl=8192;function no(n,r,a){if(n.subtreeFlags&Dl)for(n=n.child;n!==null;)__(n,r,a),n=n.sibling}function __(n,r,a){switch(n.tag){case 26:no(n,r,a),n.flags&Dl&&n.memoizedState!==null&&AA(a,ai,n.memoizedState,n.memoizedProps);break;case 5:no(n,r,a);break;case 3:case 4:var l=ai;ai=sh(n.stateNode.containerInfo),no(n,r,a),ai=l;break;case 22:n.memoizedState===null&&(l=n.alternate,l!==null&&l.memoizedState!==null?(l=Dl,Dl=16777216,no(n,r,a),Dl=l):no(n,r,a));break;default:no(n,r,a)}}function v_(n){var r=n.alternate;if(r!==null&&(n=r.child,n!==null)){r.child=null;do r=n.sibling,n.sibling=null,n=r;while(n!==null)}}function Ml(n){var r=n.deletions;if((n.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var l=r[a];qt=l,x_(l,n)}v_(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)b_(n),n=n.sibling}function b_(n){switch(n.tag){case 0:case 11:case 15:Ml(n),n.flags&2048&&Kr(9,n,n.return);break;case 3:Ml(n);break;case 12:Ml(n);break;case 22:var r=n.stateNode;n.memoizedState!==null&&r._visibility&2&&(n.return===null||n.return.tag!==13)?(r._visibility&=-3,$u(n)):Ml(n);break;default:Ml(n)}}function $u(n){var r=n.deletions;if((n.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var l=r[a];qt=l,x_(l,n)}v_(n)}for(n=n.child;n!==null;){switch(r=n,r.tag){case 0:case 11:case 15:Kr(8,r,r.return),$u(r);break;case 22:a=r.stateNode,a._visibility&2&&(a._visibility&=-3,$u(r));break;default:$u(r)}n=n.sibling}}function x_(n,r){for(;qt!==null;){var a=qt;switch(a.tag){case 0:case 11:case 15:Kr(8,a,r);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:pl(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,qt=l;else e:for(a=n;qt!==null;){l=qt;var f=l.sibling,d=l.return;if(h_(l),l===a){qt=null;break e}if(f!==null){f.return=d,qt=f;break e}qt=d}}}var zw={getCacheForType:function(n){var r=Yt(Rt),a=r.data.get(n);return a===void 0&&(a=n(),r.data.set(n,a)),a},cacheSignal:function(){return Yt(Rt).controller.signal}},Bw=typeof WeakMap=="function"?WeakMap:Map,Xe=0,ot=null,Pe=null,ze=0,Je=0,Sn=null,Xr=!1,io=!1,hm=!1,cr=0,_t=0,Wr=0,aa=0,fm=0,Nn=0,ro=0,Ol=null,mn=null,dm=!1,Yu=0,E_=0,Qu=1/0,Ku=null,Zr=null,Lt=0,Jr=null,so=null,ur=0,mm=0,pm=null,T_=null,kl=0,gm=null;function Cn(){return(Xe&2)!==0&&ze!==0?ze&-ze:j.T!==null?Em():Xc()}function w_(){if(Nn===0)if((ze&536870912)===0||Ge){var n=Os;Os<<=1,(Os&3932160)===0&&(Os=262144),Nn=n}else Nn=536870912;return n=wn.current,n!==null&&(n.flags|=32),Nn}function pn(n,r,a){(n===ot&&(Je===2||Je===9)||n.cancelPendingCommit!==null)&&(ao(n,0),es(n,ze,Nn,!1)),ks(n,a),((Xe&2)===0||n!==ot)&&(n===ot&&((Xe&2)===0&&(aa|=a),_t===4&&es(n,ze,Nn,!1)),Vi(n))}function A_(n,r,a){if((Xe&6)!==0)throw Error(s(327));var l=!a&&(r&127)===0&&(r&n.expiredLanes)===0||Wn(n,r),f=l?Hw(n,r):_m(n,r,!0),d=l;do{if(f===0){io&&!l&&es(n,r,0,!1);break}else{if(a=n.current.alternate,d&&!qw(a)){f=_m(n,r,!1),d=!1;continue}if(f===2){if(d=r,n.errorRecoveryDisabledLanes&d)var b=0;else b=n.pendingLanes&-536870913,b=b!==0?b:b&536870912?536870912:0;if(b!==0){r=b;e:{var A=n;f=Ol;var V=A.current.memoizedState.isDehydrated;if(V&&(ao(A,b).flags|=256),b=_m(A,b,!1),b!==2){if(hm&&!V){A.errorRecoveryDisabledLanes|=d,aa|=d,f=4;break e}d=mn,mn=f,d!==null&&(mn===null?mn=d:mn.push.apply(mn,d))}f=b}if(d=!1,f!==2)continue}}if(f===1){ao(n,0),es(n,r,0,!0);break}e:{switch(l=n,d=f,d){case 0:case 1:throw Error(s(345));case 4:if((r&4194048)!==r)break;case 6:es(l,r,Nn,!Xr);break e;case 2:mn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((r&62914560)===r&&(f=Yu+300-an(),10<f)){if(es(l,r,Nn,!Xr),yi(l,0,!0)!==0)break e;ur=r,l.timeoutHandle=nv(S_.bind(null,l,a,mn,Ku,dm,r,Nn,aa,ro,Xr,d,"Throttled",-0,0),f);break e}S_(l,a,mn,Ku,dm,r,Nn,aa,ro,Xr,d,null,-0,0)}}break}while(!0);Vi(n)}function S_(n,r,a,l,f,d,b,A,V,Q,ne,le,Z,ee){if(n.timeoutHandle=-1,le=r.subtreeFlags,le&8192||(le&16785408)===16785408){le={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ei},__(r,d,le);var be=(d&62914560)===d?Yu-an():(d&4194048)===d?E_-an():0;if(be=SA(le,be),be!==null){ur=d,n.cancelPendingCommit=be(k_.bind(null,n,r,d,a,l,f,b,A,V,ne,le,null,Z,ee)),es(n,d,b,!Q);return}}k_(n,r,d,a,l,f,b,A,V)}function qw(n){for(var r=n;;){var a=r.tag;if((a===0||a===11||a===15)&&r.flags&16384&&(a=r.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var f=a[l],d=f.getSnapshot;f=f.value;try{if(!En(d(),f))return!1}catch{return!1}}if(a=r.child,r.subtreeFlags&16384&&a!==null)a.return=r,r=a;else{if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function es(n,r,a,l){r&=~fm,r&=~aa,n.suspendedLanes|=r,n.pingedLanes&=~r,l&&(n.warmLanes|=r),l=n.expirationTimes;for(var f=r;0<f;){var d=31-bt(f),b=1<<d;l[d]=-1,f&=~b}a!==0&&Vs(n,a,r)}function Xu(){return(Xe&6)===0?(Vl(0),!1):!0}function ym(){if(Pe!==null){if(Je===0)var n=Pe.return;else n=Pe,Ji=Ws=null,Od(n),Xa=null,yl=0,n=Pe;for(;n!==null;)i_(n.alternate,n),n=n.return;Pe=null}}function ao(n,r){var a=n.timeoutHandle;a!==-1&&(n.timeoutHandle=-1,lA(a)),a=n.cancelPendingCommit,a!==null&&(n.cancelPendingCommit=null,a()),ur=0,ym(),ot=n,Pe=a=Wi(n.current,null),ze=r,Je=0,Sn=null,Xr=!1,io=Wn(n,r),hm=!1,ro=Nn=fm=aa=Wr=_t=0,mn=Ol=null,dm=!1,(r&8)!==0&&(r|=r&32);var l=n.entangledLanes;if(l!==0)for(n=n.entanglements,l&=r;0<l;){var f=31-bt(l),d=1<<f;r|=n[f],l&=~d}return cr=r,yu(),a}function N_(n,r){je=null,j.H=Al,r===Ka||r===Au?(r=F0(),Je=3):r===xd?(r=F0(),Je=4):Je=r===Kd?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,Sn=r,Pe===null&&(_t=1,Uu(n,zn(r,n.current)))}function C_(){var n=wn.current;return n===null?!0:(ze&4194048)===ze?Hn===null:(ze&62914560)===ze||(ze&536870912)!==0?n===Hn:!1}function R_(){var n=j.H;return j.H=Al,n===null?Al:n}function I_(){var n=j.A;return j.A=zw,n}function Wu(){_t=4,Xr||(ze&4194048)!==ze&&wn.current!==null||(io=!0),(Wr&134217727)===0&&(aa&134217727)===0||ot===null||es(ot,ze,Nn,!1)}function _m(n,r,a){var l=Xe;Xe|=2;var f=R_(),d=I_();(ot!==n||ze!==r)&&(Ku=null,ao(n,r)),r=!1;var b=_t;e:do try{if(Je!==0&&Pe!==null){var A=Pe,V=Sn;switch(Je){case 8:ym(),b=6;break e;case 3:case 2:case 9:case 6:wn.current===null&&(r=!0);var Q=Je;if(Je=0,Sn=null,oo(n,A,V,Q),a&&io){b=0;break e}break;default:Q=Je,Je=0,Sn=null,oo(n,A,V,Q)}}Fw(),b=_t;break}catch(ne){N_(n,ne)}while(!0);return r&&n.shellSuspendCounter++,Ji=Ws=null,Xe=l,j.H=f,j.A=d,Pe===null&&(ot=null,ze=0,yu()),b}function Fw(){for(;Pe!==null;)D_(Pe)}function Hw(n,r){var a=Xe;Xe|=2;var l=R_(),f=I_();ot!==n||ze!==r?(Ku=null,Qu=an()+500,ao(n,r)):io=Wn(n,r);e:do try{if(Je!==0&&Pe!==null){r=Pe;var d=Sn;t:switch(Je){case 1:Je=0,Sn=null,oo(n,r,d,1);break;case 2:case 9:if(B0(d)){Je=0,Sn=null,M_(r);break}r=function(){Je!==2&&Je!==9||ot!==n||(Je=7),Vi(n)},d.then(r,r);break e;case 3:Je=7;break e;case 4:Je=5;break e;case 7:B0(d)?(Je=0,Sn=null,M_(r)):(Je=0,Sn=null,oo(n,r,d,7));break;case 5:var b=null;switch(Pe.tag){case 26:b=Pe.memoizedState;case 5:case 27:var A=Pe;if(b?yv(b):A.stateNode.complete){Je=0,Sn=null;var V=A.sibling;if(V!==null)Pe=V;else{var Q=A.return;Q!==null?(Pe=Q,Zu(Q)):Pe=null}break t}}Je=0,Sn=null,oo(n,r,d,5);break;case 6:Je=0,Sn=null,oo(n,r,d,6);break;case 8:ym(),_t=6;break e;default:throw Error(s(462))}}Gw();break}catch(ne){N_(n,ne)}while(!0);return Ji=Ws=null,j.H=l,j.A=f,Xe=a,Pe!==null?0:(ot=null,ze=0,yu(),_t)}function Gw(){for(;Pe!==null&&!Qf();)D_(Pe)}function D_(n){var r=t_(n.alternate,n,cr);n.memoizedProps=n.pendingProps,r===null?Zu(n):Pe=r}function M_(n){var r=n,a=r.alternate;switch(r.tag){case 15:case 0:r=Ky(a,r,r.pendingProps,r.type,void 0,ze);break;case 11:r=Ky(a,r,r.pendingProps,r.type.render,r.ref,ze);break;case 5:Od(r);default:i_(a,r),r=Pe=I0(r,cr),r=t_(a,r,cr)}n.memoizedProps=n.pendingProps,r===null?Zu(n):Pe=r}function oo(n,r,a,l){Ji=Ws=null,Od(r),Xa=null,yl=0;var f=r.return;try{if(Ow(n,f,r,a,ze)){_t=1,Uu(n,zn(a,n.current)),Pe=null;return}}catch(d){if(f!==null)throw Pe=f,d;_t=1,Uu(n,zn(a,n.current)),Pe=null;return}r.flags&32768?(Ge||l===1?n=!0:io||(ze&536870912)!==0?n=!1:(Xr=n=!0,(l===2||l===9||l===3||l===6)&&(l=wn.current,l!==null&&l.tag===13&&(l.flags|=16384))),O_(r,n)):Zu(r)}function Zu(n){var r=n;do{if((r.flags&32768)!==0){O_(r,Xr);return}n=r.return;var a=jw(r.alternate,r,cr);if(a!==null){Pe=a;return}if(r=r.sibling,r!==null){Pe=r;return}Pe=r=n}while(r!==null);_t===0&&(_t=5)}function O_(n,r){do{var a=Lw(n.alternate,n);if(a!==null){a.flags&=32767,Pe=a;return}if(a=n.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!r&&(n=n.sibling,n!==null)){Pe=n;return}Pe=n=a}while(n!==null);_t=6,Pe=null}function k_(n,r,a,l,f,d,b,A,V){n.cancelPendingCommit=null;do Ju();while(Lt!==0);if((Xe&6)!==0)throw Error(s(327));if(r!==null){if(r===n.current)throw Error(s(177));if(d=r.lanes|r.childLanes,d|=ad,Wf(n,a,d,b,A,V),n===ot&&(Pe=ot=null,ze=0),so=r,Jr=n,ur=a,mm=d,pm=f,T_=l,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,Kw(Ir,function(){return U_(),null})):(n.callbackNode=null,n.callbackPriority=0),l=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||l){l=j.T,j.T=null,f=z.p,z.p=2,b=Xe,Xe|=4;try{Pw(n,r,a)}finally{Xe=b,z.p=f,j.T=l}}Lt=1,V_(),j_(),L_()}}function V_(){if(Lt===1){Lt=0;var n=Jr,r=so,a=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||a){a=j.T,j.T=null;var l=z.p;z.p=2;var f=Xe;Xe|=4;try{p_(r,n);var d=Im,b=x0(n.containerInfo),A=d.focusedElem,V=d.selectionRange;if(b!==A&&A&&A.ownerDocument&&b0(A.ownerDocument.documentElement,A)){if(V!==null&&td(A)){var Q=V.start,ne=V.end;if(ne===void 0&&(ne=Q),"selectionStart"in A)A.selectionStart=Q,A.selectionEnd=Math.min(ne,A.value.length);else{var le=A.ownerDocument||document,Z=le&&le.defaultView||window;if(Z.getSelection){var ee=Z.getSelection(),be=A.textContent.length,Ce=Math.min(V.start,be),st=V.end===void 0?Ce:Math.min(V.end,be);!ee.extend&&Ce>st&&(b=st,st=Ce,Ce=b);var B=v0(A,Ce),P=v0(A,st);if(B&&P&&(ee.rangeCount!==1||ee.anchorNode!==B.node||ee.anchorOffset!==B.offset||ee.focusNode!==P.node||ee.focusOffset!==P.offset)){var Y=le.createRange();Y.setStart(B.node,B.offset),ee.removeAllRanges(),Ce>st?(ee.addRange(Y),ee.extend(P.node,P.offset)):(Y.setEnd(P.node,P.offset),ee.addRange(Y))}}}}for(le=[],ee=A;ee=ee.parentNode;)ee.nodeType===1&&le.push({element:ee,left:ee.scrollLeft,top:ee.scrollTop});for(typeof A.focus=="function"&&A.focus(),A=0;A<le.length;A++){var re=le[A];re.element.scrollLeft=re.left,re.element.scrollTop=re.top}}hh=!!Rm,Im=Rm=null}finally{Xe=f,z.p=l,j.T=a}}n.current=r,Lt=2}}function j_(){if(Lt===2){Lt=0;var n=Jr,r=so,a=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||a){a=j.T,j.T=null;var l=z.p;z.p=2;var f=Xe;Xe|=4;try{u_(n,r.alternate,r)}finally{Xe=f,z.p=l,j.T=a}}Lt=3}}function L_(){if(Lt===4||Lt===3){Lt=0,Fc();var n=Jr,r=so,a=ur,l=T_;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?Lt=5:(Lt=0,so=Jr=null,P_(n,n.pendingLanes));var f=n.pendingLanes;if(f===0&&(Zr=null),Yi(a),r=r.stateNode,Ht&&typeof Ht.onCommitFiberRoot=="function")try{Ht.onCommitFiberRoot(Xn,r,void 0,(r.current.flags&128)===128)}catch{}if(l!==null){r=j.T,f=z.p,z.p=2,j.T=null;try{for(var d=n.onRecoverableError,b=0;b<l.length;b++){var A=l[b];d(A.value,{componentStack:A.stack})}}finally{j.T=r,z.p=f}}(ur&3)!==0&&Ju(),Vi(n),f=n.pendingLanes,(a&261930)!==0&&(f&42)!==0?n===gm?kl++:(kl=0,gm=n):kl=0,Vl(0)}}function P_(n,r){(n.pooledCacheLanes&=r)===0&&(r=n.pooledCache,r!=null&&(n.pooledCache=null,pl(r)))}function Ju(){return V_(),j_(),L_(),U_()}function U_(){if(Lt!==5)return!1;var n=Jr,r=mm;mm=0;var a=Yi(ur),l=j.T,f=z.p;try{z.p=32>a?32:a,j.T=null,a=pm,pm=null;var d=Jr,b=ur;if(Lt=0,so=Jr=null,ur=0,(Xe&6)!==0)throw Error(s(331));var A=Xe;if(Xe|=4,b_(d.current),y_(d,d.current,b,a),Xe=A,Vl(0,!1),Ht&&typeof Ht.onPostCommitFiberRoot=="function")try{Ht.onPostCommitFiberRoot(Xn,d)}catch{}return!0}finally{z.p=f,j.T=l,P_(n,r)}}function z_(n,r,a){r=zn(a,r),r=Qd(n.stateNode,r,2),n=$r(n,r,2),n!==null&&(ks(n,2),Vi(n))}function et(n,r,a){if(n.tag===3)z_(n,n,a);else for(;r!==null;){if(r.tag===3){z_(r,n,a);break}else if(r.tag===1){var l=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Zr===null||!Zr.has(l))){n=zn(a,n),a=By(2),l=$r(r,a,2),l!==null&&(qy(a,l,r,n),ks(l,2),Vi(l));break}}r=r.return}}function vm(n,r,a){var l=n.pingCache;if(l===null){l=n.pingCache=new Bw;var f=new Set;l.set(r,f)}else f=l.get(r),f===void 0&&(f=new Set,l.set(r,f));f.has(a)||(hm=!0,f.add(a),n=$w.bind(null,n,r,a),r.then(n,n))}function $w(n,r,a){var l=n.pingCache;l!==null&&l.delete(r),n.pingedLanes|=n.suspendedLanes&a,n.warmLanes&=~a,ot===n&&(ze&a)===a&&(_t===4||_t===3&&(ze&62914560)===ze&&300>an()-Yu?(Xe&2)===0&&ao(n,0):fm|=a,ro===ze&&(ro=0)),Vi(n)}function B_(n,r){r===0&&(r=Kc()),n=Qs(n,r),n!==null&&(ks(n,r),Vi(n))}function Yw(n){var r=n.memoizedState,a=0;r!==null&&(a=r.retryLane),B_(n,a)}function Qw(n,r){var a=0;switch(n.tag){case 31:case 13:var l=n.stateNode,f=n.memoizedState;f!==null&&(a=f.retryLane);break;case 19:l=n.stateNode;break;case 22:l=n.stateNode._retryCache;break;default:throw Error(s(314))}l!==null&&l.delete(r),B_(n,a)}function Kw(n,r){return gt(n,r)}var eh=null,lo=null,bm=!1,th=!1,xm=!1,ts=0;function Vi(n){n!==lo&&n.next===null&&(lo===null?eh=lo=n:lo=lo.next=n),th=!0,bm||(bm=!0,Ww())}function Vl(n,r){if(!xm&&th){xm=!0;do for(var a=!1,l=eh;l!==null;){if(n!==0){var f=l.pendingLanes;if(f===0)var d=0;else{var b=l.suspendedLanes,A=l.pingedLanes;d=(1<<31-bt(42|n)+1)-1,d&=f&~(b&~A),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(a=!0,G_(l,d))}else d=ze,d=yi(l,l===ot?d:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(d&3)===0||Wn(l,d)||(a=!0,G_(l,d));l=l.next}while(a);xm=!1}}function Xw(){q_()}function q_(){th=bm=!1;var n=0;ts!==0&&oA()&&(n=ts);for(var r=an(),a=null,l=eh;l!==null;){var f=l.next,d=F_(l,r);d===0?(l.next=null,a===null?eh=f:a.next=f,f===null&&(lo=a)):(a=l,(n!==0||(d&3)!==0)&&(th=!0)),l=f}Lt!==0&&Lt!==5||Vl(n),ts!==0&&(ts=0)}function F_(n,r){for(var a=n.suspendedLanes,l=n.pingedLanes,f=n.expirationTimes,d=n.pendingLanes&-62914561;0<d;){var b=31-bt(d),A=1<<b,V=f[b];V===-1?((A&a)===0||(A&l)!==0)&&(f[b]=Xf(A,r)):V<=r&&(n.expiredLanes|=A),d&=~A}if(r=ot,a=ze,a=yi(n,n===r?a:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),l=n.callbackNode,a===0||n===r&&(Je===2||Je===9)||n.cancelPendingCommit!==null)return l!==null&&l!==null&&Rr(l),n.callbackNode=null,n.callbackPriority=0;if((a&3)===0||Wn(n,a)){if(r=a&-a,r===n.callbackPriority)return r;switch(l!==null&&Rr(l),Yi(a)){case 2:case 8:a=Go;break;case 32:a=Ir;break;case 268435456:a=Hc;break;default:a=Ir}return l=H_.bind(null,n),a=gt(a,l),n.callbackPriority=r,n.callbackNode=a,r}return l!==null&&l!==null&&Rr(l),n.callbackPriority=2,n.callbackNode=null,2}function H_(n,r){if(Lt!==0&&Lt!==5)return n.callbackNode=null,n.callbackPriority=0,null;var a=n.callbackNode;if(Ju()&&n.callbackNode!==a)return null;var l=ze;return l=yi(n,n===ot?l:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),l===0?null:(A_(n,l,r),F_(n,an()),n.callbackNode!=null&&n.callbackNode===a?H_.bind(null,n):null)}function G_(n,r){if(Ju())return null;A_(n,r,!0)}function Ww(){cA(function(){(Xe&6)!==0?gt(Ho,Xw):q_()})}function Em(){if(ts===0){var n=Ya;n===0&&(n=pi,pi<<=1,(pi&261888)===0&&(pi=256)),ts=n}return ts}function $_(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:Ma(""+n)}function Y_(n,r){var a=r.ownerDocument.createElement("input");return a.name=r.name,a.value=r.value,n.id&&a.setAttribute("form",n.id),r.parentNode.insertBefore(a,r),n=new FormData(n),a.parentNode.removeChild(a),n}function Zw(n,r,a,l,f){if(r==="submit"&&a&&a.stateNode===f){var d=$_((f[zt]||null).action),b=l.submitter;b&&(r=(r=b[zt]||null)?$_(r.formAction):b.getAttribute("formAction"),r!==null&&(d=r,b=null));var A=new Ci("action","action",null,l,f);n.push({event:A,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(ts!==0){var V=b?Y_(f,b):new FormData(f);qd(a,{pending:!0,data:V,method:f.method,action:d},null,V)}}else typeof d=="function"&&(A.preventDefault(),V=b?Y_(f,b):new FormData(f),qd(a,{pending:!0,data:V,method:f.method,action:d},d,V))},currentTarget:f}]})}}for(var Tm=0;Tm<sd.length;Tm++){var wm=sd[Tm],Jw=wm.toLowerCase(),eA=wm[0].toUpperCase()+wm.slice(1);si(Jw,"on"+eA)}si(w0,"onAnimationEnd"),si(A0,"onAnimationIteration"),si(S0,"onAnimationStart"),si("dblclick","onDoubleClick"),si("focusin","onFocus"),si("focusout","onBlur"),si(gw,"onTransitionRun"),si(yw,"onTransitionStart"),si(_w,"onTransitionCancel"),si(N0,"onTransitionEnd"),wi("onMouseEnter",["mouseout","mouseover"]),wi("onMouseLeave",["mouseout","mouseover"]),wi("onPointerEnter",["pointerout","pointerover"]),wi("onPointerLeave",["pointerout","pointerover"]),Ti("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ti("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ti("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ti("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ti("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ti("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var jl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),tA=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(jl));function Q_(n,r){r=(r&4)!==0;for(var a=0;a<n.length;a++){var l=n[a],f=l.event;l=l.listeners;e:{var d=void 0;if(r)for(var b=l.length-1;0<=b;b--){var A=l[b],V=A.instance,Q=A.currentTarget;if(A=A.listener,V!==d&&f.isPropagationStopped())break e;d=A,f.currentTarget=Q;try{d(f)}catch(ne){gu(ne)}f.currentTarget=null,d=V}else for(b=0;b<l.length;b++){if(A=l[b],V=A.instance,Q=A.currentTarget,A=A.listener,V!==d&&f.isPropagationStopped())break e;d=A,f.currentTarget=Q;try{d(f)}catch(ne){gu(ne)}f.currentTarget=null,d=V}}}}function Ue(n,r){var a=r[Na];a===void 0&&(a=r[Na]=new Set);var l=n+"__bubble";a.has(l)||(K_(r,n,2,!1),a.add(l))}function Am(n,r,a){var l=0;r&&(l|=4),K_(a,n,l,r)}var nh="_reactListening"+Math.random().toString(36).slice(2);function Sm(n){if(!n[nh]){n[nh]=!0,Qo.forEach(function(a){a!=="selectionchange"&&(tA.has(a)||Am(a,!1,n),Am(a,!0,n))});var r=n.nodeType===9?n:n.ownerDocument;r===null||r[nh]||(r[nh]=!0,Am("selectionchange",!1,r))}}function K_(n,r,a,l){switch(wv(r)){case 2:var f=RA;break;case 8:f=IA;break;default:f=Bm}a=f.bind(null,r,a,n),f=void 0,!zs||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(f=!0),l?f!==void 0?n.addEventListener(r,a,{capture:!0,passive:f}):n.addEventListener(r,a,!0):f!==void 0?n.addEventListener(r,a,{passive:f}):n.addEventListener(r,a,!1)}function Nm(n,r,a,l,f){var d=l;if((r&1)===0&&(r&2)===0&&l!==null)e:for(;;){if(l===null)return;var b=l.tag;if(b===3||b===4){var A=l.stateNode.containerInfo;if(A===f)break;if(b===4)for(b=l.return;b!==null;){var V=b.tag;if((V===3||V===4)&&b.stateNode.containerInfo===f)return;b=b.return}for(;A!==null;){if(b=xi(A),b===null)return;if(V=b.tag,V===5||V===6||V===26||V===27){l=d=b;continue e}A=A.parentNode}}l=l.return}jr(function(){var Q=d,ne=jn(a),le=[];e:{var Z=C0.get(n);if(Z!==void 0){var ee=Ci,be=n;switch(n){case"keypress":if(qs(a)===0)break e;case"keydown":case"keyup":ee=du;break;case"focusin":be="focus",ee=Hs;break;case"focusout":be="blur",ee=Hs;break;case"beforeblur":case"afterblur":ee=Hs;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ee=ol;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ee=ru;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ee=_;break;case w0:case A0:case S0:ee=au;break;case N0:ee=S;break;case"scroll":case"scrollend":ee=al;break;case"wheel":ee=J;break;case"copy":case"cut":case"paste":ee=ou;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ee=Xi;break;case"toggle":case"beforetoggle":ee=Ve}var Ce=(r&4)!==0,st=!Ce&&(n==="scroll"||n==="scrollend"),B=Ce?Z!==null?Z+"Capture":null:Z;Ce=[];for(var P=Q,Y;P!==null;){var re=P;if(Y=re.stateNode,re=re.tag,re!==5&&re!==26&&re!==27||Y===null||B===null||(re=ti(P,B),re!=null&&Ce.push(Ll(P,re,Y))),st)break;P=P.return}0<Ce.length&&(Z=new ee(Z,be,null,a,ne),le.push({event:Z,listeners:Ce}))}}if((r&7)===0){e:{if(Z=n==="mouseover"||n==="pointerover",ee=n==="mouseout"||n==="pointerout",Z&&a!==il&&(be=a.relatedTarget||a.fromElement)&&(xi(be)||be[vi]))break e;if((ee||Z)&&(Z=ne.window===ne?ne:(Z=ne.ownerDocument)?Z.defaultView||Z.parentWindow:window,ee?(be=a.relatedTarget||a.toElement,ee=Q,be=be?xi(be):null,be!==null&&(st=c(be),Ce=be.tag,be!==st||Ce!==5&&Ce!==27&&Ce!==6)&&(be=null)):(ee=null,be=Q),ee!==be)){if(Ce=ol,re="onMouseLeave",B="onMouseEnter",P="mouse",(n==="pointerout"||n==="pointerover")&&(Ce=Xi,re="onPointerLeave",B="onPointerEnter",P="pointer"),st=ee==null?Z:bn(ee),Y=be==null?Z:bn(be),Z=new Ce(re,P+"leave",ee,a,ne),Z.target=st,Z.relatedTarget=Y,re=null,xi(ne)===Q&&(Ce=new Ce(B,P+"enter",be,a,ne),Ce.target=Y,Ce.relatedTarget=st,re=Ce),st=re,ee&&be)t:{for(Ce=nA,B=ee,P=be,Y=0,re=B;re;re=Ce(re))Y++;re=0;for(var we=P;we;we=Ce(we))re++;for(;0<Y-re;)B=Ce(B),Y--;for(;0<re-Y;)P=Ce(P),re--;for(;Y--;){if(B===P||P!==null&&B===P.alternate){Ce=B;break t}B=Ce(B),P=Ce(P)}Ce=null}else Ce=null;ee!==null&&X_(le,Z,ee,Ce,!1),be!==null&&st!==null&&X_(le,st,be,Ce,!0)}}e:{if(Z=Q?bn(Q):window,ee=Z.nodeName&&Z.nodeName.toLowerCase(),ee==="select"||ee==="input"&&Z.type==="file")var Ye=d0;else if(h0(Z))if(m0)Ye=dw;else{Ye=hw;var xe=uw}else ee=Z.nodeName,!ee||ee.toLowerCase()!=="input"||Z.type!=="checkbox"&&Z.type!=="radio"?Q&&Da(Q.elementType)&&(Ye=d0):Ye=fw;if(Ye&&(Ye=Ye(n,Q))){f0(le,Ye,a,ne);break e}xe&&xe(n,Z,Q),n==="focusout"&&Q&&Z.type==="number"&&Q.memoizedProps.value!=null&&el(Z,"number",Z.value)}switch(xe=Q?bn(Q):window,n){case"focusin":(h0(xe)||xe.contentEditable==="true")&&(Ua=xe,nd=Q,fl=null);break;case"focusout":fl=nd=Ua=null;break;case"mousedown":id=!0;break;case"contextmenu":case"mouseup":case"dragend":id=!1,E0(le,a,ne);break;case"selectionchange":if(pw)break;case"keydown":case"keyup":E0(le,a,ne)}var Le;if(Ke)e:{switch(n){case"compositionstart":var Be="onCompositionStart";break e;case"compositionend":Be="onCompositionEnd";break e;case"compositionupdate":Be="onCompositionUpdate";break e}Be=void 0}else Pa?Gs(n,a)&&(Be="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(Be="onCompositionStart");Be&&(Di&&a.locale!=="ko"&&(Pa||Be!=="onCompositionStart"?Be==="onCompositionEnd"&&Pa&&(Le=sl()):(Ni=ne,rl="value"in Ni?Ni.value:Ni.textContent,Pa=!0)),xe=ih(Q,Be),0<xe.length&&(Be=new Ii(Be,n,null,a,ne),le.push({event:Be,listeners:xe}),Le?Be.data=Le:(Le=La(a),Le!==null&&(Be.data=Le)))),(Le=Pn?aw(n,a):ow(n,a))&&(Be=ih(Q,"onBeforeInput"),0<Be.length&&(xe=new Ii("onBeforeInput","beforeinput",null,a,ne),le.push({event:xe,listeners:Be}),xe.data=Le)),Zw(le,n,Q,a,ne)}Q_(le,r)})}function Ll(n,r,a){return{instance:n,listener:r,currentTarget:a}}function ih(n,r){for(var a=r+"Capture",l=[];n!==null;){var f=n,d=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||d===null||(f=ti(n,a),f!=null&&l.unshift(Ll(n,f,d)),f=ti(n,r),f!=null&&l.push(Ll(n,f,d))),n.tag===3)return l;n=n.return}return[]}function nA(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function X_(n,r,a,l,f){for(var d=r._reactName,b=[];a!==null&&a!==l;){var A=a,V=A.alternate,Q=A.stateNode;if(A=A.tag,V!==null&&V===l)break;A!==5&&A!==26&&A!==27||Q===null||(V=Q,f?(Q=ti(a,d),Q!=null&&b.unshift(Ll(a,Q,V))):f||(Q=ti(a,d),Q!=null&&b.push(Ll(a,Q,V)))),a=a.return}b.length!==0&&n.push({event:r,listeners:b})}var iA=/\r\n?/g,rA=/\u0000|\uFFFD/g;function W_(n){return(typeof n=="string"?n:""+n).replace(iA,`
`).replace(rA,"")}function Z_(n,r){return r=W_(r),W_(n)===r}function rt(n,r,a,l,f,d){switch(a){case"children":typeof l=="string"?r==="body"||r==="textarea"&&l===""||un(n,l):(typeof l=="number"||typeof l=="bigint")&&r!=="body"&&un(n,""+l);break;case"className":xn(n,"class",l);break;case"tabIndex":xn(n,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":xn(n,a,l);break;case"style":nl(n,l,d);break;case"data":if(r!=="object"){xn(n,"data",l);break}case"src":case"href":if(l===""&&(r!=="a"||a!=="href")){n.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){n.removeAttribute(a);break}l=Ma(""+l),n.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){n.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(a==="formAction"?(r!=="input"&&rt(n,r,"name",f.name,f,null),rt(n,r,"formEncType",f.formEncType,f,null),rt(n,r,"formMethod",f.formMethod,f,null),rt(n,r,"formTarget",f.formTarget,f,null)):(rt(n,r,"encType",f.encType,f,null),rt(n,r,"method",f.method,f,null),rt(n,r,"target",f.target,f,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){n.removeAttribute(a);break}l=Ma(""+l),n.setAttribute(a,l);break;case"onClick":l!=null&&(n.onclick=ei);break;case"onScroll":l!=null&&Ue("scroll",n);break;case"onScrollEnd":l!=null&&Ue("scrollend",n);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(f.children!=null)throw Error(s(60));n.innerHTML=a}}break;case"multiple":n.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":n.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){n.removeAttribute("xlink:href");break}a=Ma(""+l),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(a,""+l):n.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(a,""):n.removeAttribute(a);break;case"capture":case"download":l===!0?n.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(a,l):n.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?n.setAttribute(a,l):n.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?n.removeAttribute(a):n.setAttribute(a,l);break;case"popover":Ue("beforetoggle",n),Ue("toggle",n),Ra(n,"popover",l);break;case"xlinkActuate":Ct(n,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Ct(n,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Ct(n,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Ct(n,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Ct(n,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Ct(n,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Ct(n,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Ct(n,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Ct(n,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Ra(n,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=iu.get(a)||a,Ra(n,a,l))}}function Cm(n,r,a,l,f,d){switch(a){case"style":nl(n,l,d);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(f.children!=null)throw Error(s(60));n.innerHTML=a}}break;case"children":typeof l=="string"?un(n,l):(typeof l=="number"||typeof l=="bigint")&&un(n,""+l);break;case"onScroll":l!=null&&Ue("scroll",n);break;case"onScrollEnd":l!=null&&Ue("scrollend",n);break;case"onClick":l!=null&&(n.onclick=ei);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ko.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(f=a.endsWith("Capture"),r=a.slice(2,f?a.length-7:void 0),d=n[zt]||null,d=d!=null?d[a]:null,typeof d=="function"&&n.removeEventListener(r,d,f),typeof l=="function")){typeof d!="function"&&d!==null&&(a in n?n[a]=null:n.hasAttribute(a)&&n.removeAttribute(a)),n.addEventListener(r,l,f);break e}a in n?n[a]=l:l===!0?n.setAttribute(a,""):Ra(n,a,l)}}}function Kt(n,r,a){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ue("error",n),Ue("load",n);var l=!1,f=!1,d;for(d in a)if(a.hasOwnProperty(d)){var b=a[d];if(b!=null)switch(d){case"src":l=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:rt(n,r,d,b,a,null)}}f&&rt(n,r,"srcSet",a.srcSet,a,null),l&&rt(n,r,"src",a.src,a,null);return;case"input":Ue("invalid",n);var A=d=b=f=null,V=null,Q=null;for(l in a)if(a.hasOwnProperty(l)){var ne=a[l];if(ne!=null)switch(l){case"name":f=ne;break;case"type":b=ne;break;case"checked":V=ne;break;case"defaultChecked":Q=ne;break;case"value":d=ne;break;case"defaultValue":A=ne;break;case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(s(137,r));break;default:rt(n,r,l,ne,a,null)}}eu(n,d,A,V,Q,b,f,!1);return;case"select":Ue("invalid",n),l=b=d=null;for(f in a)if(a.hasOwnProperty(f)&&(A=a[f],A!=null))switch(f){case"value":d=A;break;case"defaultValue":b=A;break;case"multiple":l=A;default:rt(n,r,f,A,a,null)}r=d,a=b,n.multiple=!!l,r!=null?Mr(n,!!l,r,!1):a!=null&&Mr(n,!!l,a,!0);return;case"textarea":Ue("invalid",n),d=f=l=null;for(b in a)if(a.hasOwnProperty(b)&&(A=a[b],A!=null))switch(b){case"value":l=A;break;case"defaultValue":f=A;break;case"children":d=A;break;case"dangerouslySetInnerHTML":if(A!=null)throw Error(s(91));break;default:rt(n,r,b,A,a,null)}Or(n,l,f,d);return;case"option":for(V in a)if(a.hasOwnProperty(V)&&(l=a[V],l!=null))switch(V){case"selected":n.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:rt(n,r,V,l,a,null)}return;case"dialog":Ue("beforetoggle",n),Ue("toggle",n),Ue("cancel",n),Ue("close",n);break;case"iframe":case"object":Ue("load",n);break;case"video":case"audio":for(l=0;l<jl.length;l++)Ue(jl[l],n);break;case"image":Ue("error",n),Ue("load",n);break;case"details":Ue("toggle",n);break;case"embed":case"source":case"link":Ue("error",n),Ue("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Q in a)if(a.hasOwnProperty(Q)&&(l=a[Q],l!=null))switch(Q){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:rt(n,r,Q,l,a,null)}return;default:if(Da(r)){for(ne in a)a.hasOwnProperty(ne)&&(l=a[ne],l!==void 0&&Cm(n,r,ne,l,a,void 0));return}}for(A in a)a.hasOwnProperty(A)&&(l=a[A],l!=null&&rt(n,r,A,l,a,null))}function sA(n,r,a,l){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,d=null,b=null,A=null,V=null,Q=null,ne=null;for(ee in a){var le=a[ee];if(a.hasOwnProperty(ee)&&le!=null)switch(ee){case"checked":break;case"value":break;case"defaultValue":V=le;default:l.hasOwnProperty(ee)||rt(n,r,ee,null,l,le)}}for(var Z in l){var ee=l[Z];if(le=a[Z],l.hasOwnProperty(Z)&&(ee!=null||le!=null))switch(Z){case"type":d=ee;break;case"name":f=ee;break;case"checked":Q=ee;break;case"defaultChecked":ne=ee;break;case"value":b=ee;break;case"defaultValue":A=ee;break;case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(s(137,r));break;default:ee!==le&&rt(n,r,Z,ee,l,le)}}Ia(n,b,A,V,Q,ne,d,f);return;case"select":ee=b=A=Z=null;for(d in a)if(V=a[d],a.hasOwnProperty(d)&&V!=null)switch(d){case"value":break;case"multiple":ee=V;default:l.hasOwnProperty(d)||rt(n,r,d,null,l,V)}for(f in l)if(d=l[f],V=a[f],l.hasOwnProperty(f)&&(d!=null||V!=null))switch(f){case"value":Z=d;break;case"defaultValue":A=d;break;case"multiple":b=d;default:d!==V&&rt(n,r,f,d,l,V)}r=A,a=b,l=ee,Z!=null?Mr(n,!!a,Z,!1):!!l!=!!a&&(r!=null?Mr(n,!!a,r,!0):Mr(n,!!a,a?[]:"",!1));return;case"textarea":ee=Z=null;for(A in a)if(f=a[A],a.hasOwnProperty(A)&&f!=null&&!l.hasOwnProperty(A))switch(A){case"value":break;case"children":break;default:rt(n,r,A,null,l,f)}for(b in l)if(f=l[b],d=a[b],l.hasOwnProperty(b)&&(f!=null||d!=null))switch(b){case"value":Z=f;break;case"defaultValue":ee=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(s(91));break;default:f!==d&&rt(n,r,b,f,l,d)}tu(n,Z,ee);return;case"option":for(var be in a)if(Z=a[be],a.hasOwnProperty(be)&&Z!=null&&!l.hasOwnProperty(be))switch(be){case"selected":n.selected=!1;break;default:rt(n,r,be,null,l,Z)}for(V in l)if(Z=l[V],ee=a[V],l.hasOwnProperty(V)&&Z!==ee&&(Z!=null||ee!=null))switch(V){case"selected":n.selected=Z&&typeof Z!="function"&&typeof Z!="symbol";break;default:rt(n,r,V,Z,l,ee)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ce in a)Z=a[Ce],a.hasOwnProperty(Ce)&&Z!=null&&!l.hasOwnProperty(Ce)&&rt(n,r,Ce,null,l,Z);for(Q in l)if(Z=l[Q],ee=a[Q],l.hasOwnProperty(Q)&&Z!==ee&&(Z!=null||ee!=null))switch(Q){case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(s(137,r));break;default:rt(n,r,Q,Z,l,ee)}return;default:if(Da(r)){for(var st in a)Z=a[st],a.hasOwnProperty(st)&&Z!==void 0&&!l.hasOwnProperty(st)&&Cm(n,r,st,void 0,l,Z);for(ne in l)Z=l[ne],ee=a[ne],!l.hasOwnProperty(ne)||Z===ee||Z===void 0&&ee===void 0||Cm(n,r,ne,Z,l,ee);return}}for(var B in a)Z=a[B],a.hasOwnProperty(B)&&Z!=null&&!l.hasOwnProperty(B)&&rt(n,r,B,null,l,Z);for(le in l)Z=l[le],ee=a[le],!l.hasOwnProperty(le)||Z===ee||Z==null&&ee==null||rt(n,r,le,Z,l,ee)}function J_(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function aA(){if(typeof performance.getEntriesByType=="function"){for(var n=0,r=0,a=performance.getEntriesByType("resource"),l=0;l<a.length;l++){var f=a[l],d=f.transferSize,b=f.initiatorType,A=f.duration;if(d&&A&&J_(b)){for(b=0,A=f.responseEnd,l+=1;l<a.length;l++){var V=a[l],Q=V.startTime;if(Q>A)break;var ne=V.transferSize,le=V.initiatorType;ne&&J_(le)&&(V=V.responseEnd,b+=ne*(V<A?1:(A-Q)/(V-Q)))}if(--l,r+=8*(d+b)/(f.duration/1e3),n++,10<n)break}}if(0<n)return r/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var Rm=null,Im=null;function rh(n){return n.nodeType===9?n:n.ownerDocument}function ev(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function tv(n,r){if(n===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&r==="foreignObject"?0:n}function Dm(n,r){return n==="textarea"||n==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Mm=null;function oA(){var n=window.event;return n&&n.type==="popstate"?n===Mm?!1:(Mm=n,!0):(Mm=null,!1)}var nv=typeof setTimeout=="function"?setTimeout:void 0,lA=typeof clearTimeout=="function"?clearTimeout:void 0,iv=typeof Promise=="function"?Promise:void 0,cA=typeof queueMicrotask=="function"?queueMicrotask:typeof iv<"u"?function(n){return iv.resolve(null).then(n).catch(uA)}:nv;function uA(n){setTimeout(function(){throw n})}function ns(n){return n==="head"}function rv(n,r){var a=r,l=0;do{var f=a.nextSibling;if(n.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"||a==="/&"){if(l===0){n.removeChild(f),fo(r);return}l--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")l++;else if(a==="html")Pl(n.ownerDocument.documentElement);else if(a==="head"){a=n.ownerDocument.head,Pl(a);for(var d=a.firstChild;d;){var b=d.nextSibling,A=d.nodeName;d[bi]||A==="SCRIPT"||A==="STYLE"||A==="LINK"&&d.rel.toLowerCase()==="stylesheet"||a.removeChild(d),d=b}}else a==="body"&&Pl(n.ownerDocument.body);a=f}while(a);fo(r)}function sv(n,r){var a=n;n=0;do{var l=a.nextSibling;if(a.nodeType===1?r?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(r?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),l&&l.nodeType===8)if(a=l.data,a==="/$"){if(n===0)break;n--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||n++;a=l}while(a)}function Om(n){var r=n.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var a=r;switch(r=r.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Om(a),Ca(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}n.removeChild(a)}}function hA(n,r,a,l){for(;n.nodeType===1;){var f=a;if(n.nodeName.toLowerCase()!==r.toLowerCase()){if(!l&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(l){if(!n[bi])switch(r){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(d=n.getAttribute("rel"),d==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(d!==f.rel||n.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||n.getAttribute("title")!==(f.title==null?null:f.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(d=n.getAttribute("src"),(d!==(f.src==null?null:f.src)||n.getAttribute("type")!==(f.type==null?null:f.type)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&d&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(r==="input"&&n.type==="hidden"){var d=f.name==null?null:""+f.name;if(f.type==="hidden"&&n.getAttribute("name")===d)return n}else return n;if(n=Gn(n.nextSibling),n===null)break}return null}function fA(n,r,a){if(r==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!a||(n=Gn(n.nextSibling),n===null))return null;return n}function av(n,r){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!r||(n=Gn(n.nextSibling),n===null))return null;return n}function km(n){return n.data==="$?"||n.data==="$~"}function Vm(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function dA(n,r){var a=n.ownerDocument;if(n.data==="$~")n._reactRetry=r;else if(n.data!=="$?"||a.readyState!=="loading")r();else{var l=function(){r(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),n._reactRetry=l}}function Gn(n){for(;n!=null;n=n.nextSibling){var r=n.nodeType;if(r===1||r===3)break;if(r===8){if(r=n.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return n}var jm=null;function ov(n){n=n.nextSibling;for(var r=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"||a==="/&"){if(r===0)return Gn(n.nextSibling);r--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||r++}n=n.nextSibling}return null}function lv(n){n=n.previousSibling;for(var r=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(r===0)return n;r--}else a!=="/$"&&a!=="/&"||r++}n=n.previousSibling}return null}function cv(n,r,a){switch(r=rh(a),n){case"html":if(n=r.documentElement,!n)throw Error(s(452));return n;case"head":if(n=r.head,!n)throw Error(s(453));return n;case"body":if(n=r.body,!n)throw Error(s(454));return n;default:throw Error(s(451))}}function Pl(n){for(var r=n.attributes;r.length;)n.removeAttributeNode(r[0]);Ca(n)}var $n=new Map,uv=new Set;function sh(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var hr=z.d;z.d={f:mA,r:pA,D:gA,C:yA,L:_A,m:vA,X:xA,S:bA,M:EA};function mA(){var n=hr.f(),r=Xu();return n||r}function pA(n){var r=Vn(n);r!==null&&r.tag===5&&r.type==="form"?Ny(r):hr.r(n)}var co=typeof document>"u"?null:document;function hv(n,r,a){var l=co;if(l&&typeof r=="string"&&r){var f=cn(r);f='link[rel="'+n+'"][href="'+f+'"]',typeof a=="string"&&(f+='[crossorigin="'+a+'"]'),uv.has(f)||(uv.add(f),n={rel:n,crossOrigin:a,href:r},l.querySelector(f)===null&&(r=l.createElement("link"),Kt(r,"link",n),Nt(r),l.head.appendChild(r)))}}function gA(n){hr.D(n),hv("dns-prefetch",n,null)}function yA(n,r){hr.C(n,r),hv("preconnect",n,r)}function _A(n,r,a){hr.L(n,r,a);var l=co;if(l&&n&&r){var f='link[rel="preload"][as="'+cn(r)+'"]';r==="image"&&a&&a.imageSrcSet?(f+='[imagesrcset="'+cn(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(f+='[imagesizes="'+cn(a.imageSizes)+'"]')):f+='[href="'+cn(n)+'"]';var d=f;switch(r){case"style":d=uo(n);break;case"script":d=ho(n)}$n.has(d)||(n=x({rel:"preload",href:r==="image"&&a&&a.imageSrcSet?void 0:n,as:r},a),$n.set(d,n),l.querySelector(f)!==null||r==="style"&&l.querySelector(Ul(d))||r==="script"&&l.querySelector(zl(d))||(r=l.createElement("link"),Kt(r,"link",n),Nt(r),l.head.appendChild(r)))}}function vA(n,r){hr.m(n,r);var a=co;if(a&&n){var l=r&&typeof r.as=="string"?r.as:"script",f='link[rel="modulepreload"][as="'+cn(l)+'"][href="'+cn(n)+'"]',d=f;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=ho(n)}if(!$n.has(d)&&(n=x({rel:"modulepreload",href:n},r),$n.set(d,n),a.querySelector(f)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(zl(d)))return}l=a.createElement("link"),Kt(l,"link",n),Nt(l),a.head.appendChild(l)}}}function bA(n,r,a){hr.S(n,r,a);var l=co;if(l&&n){var f=Ei(l).hoistableStyles,d=uo(n);r=r||"default";var b=f.get(d);if(!b){var A={loading:0,preload:null};if(b=l.querySelector(Ul(d)))A.loading=5;else{n=x({rel:"stylesheet",href:n,"data-precedence":r},a),(a=$n.get(d))&&Lm(n,a);var V=b=l.createElement("link");Nt(V),Kt(V,"link",n),V._p=new Promise(function(Q,ne){V.onload=Q,V.onerror=ne}),V.addEventListener("load",function(){A.loading|=1}),V.addEventListener("error",function(){A.loading|=2}),A.loading|=4,ah(b,r,l)}b={type:"stylesheet",instance:b,count:1,state:A},f.set(d,b)}}}function xA(n,r){hr.X(n,r);var a=co;if(a&&n){var l=Ei(a).hoistableScripts,f=ho(n),d=l.get(f);d||(d=a.querySelector(zl(f)),d||(n=x({src:n,async:!0},r),(r=$n.get(f))&&Pm(n,r),d=a.createElement("script"),Nt(d),Kt(d,"link",n),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(f,d))}}function EA(n,r){hr.M(n,r);var a=co;if(a&&n){var l=Ei(a).hoistableScripts,f=ho(n),d=l.get(f);d||(d=a.querySelector(zl(f)),d||(n=x({src:n,async:!0,type:"module"},r),(r=$n.get(f))&&Pm(n,r),d=a.createElement("script"),Nt(d),Kt(d,"link",n),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(f,d))}}function fv(n,r,a,l){var f=(f=se.current)?sh(f):null;if(!f)throw Error(s(446));switch(n){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(r=uo(a.href),a=Ei(f).hoistableStyles,l=a.get(r),l||(l={type:"style",instance:null,count:0,state:null},a.set(r,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){n=uo(a.href);var d=Ei(f).hoistableStyles,b=d.get(n);if(b||(f=f.ownerDocument||f,b={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(n,b),(d=f.querySelector(Ul(n)))&&!d._p&&(b.instance=d,b.state.loading=5),$n.has(n)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},$n.set(n,a),d||TA(f,n,a,b.state))),r&&l===null)throw Error(s(528,""));return b}if(r&&l!==null)throw Error(s(529,""));return null;case"script":return r=a.async,a=a.src,typeof a=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=ho(a),a=Ei(f).hoistableScripts,l=a.get(r),l||(l={type:"script",instance:null,count:0,state:null},a.set(r,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,n))}}function uo(n){return'href="'+cn(n)+'"'}function Ul(n){return'link[rel="stylesheet"]['+n+"]"}function dv(n){return x({},n,{"data-precedence":n.precedence,precedence:null})}function TA(n,r,a,l){n.querySelector('link[rel="preload"][as="style"]['+r+"]")?l.loading=1:(r=n.createElement("link"),l.preload=r,r.addEventListener("load",function(){return l.loading|=1}),r.addEventListener("error",function(){return l.loading|=2}),Kt(r,"link",a),Nt(r),n.head.appendChild(r))}function ho(n){return'[src="'+cn(n)+'"]'}function zl(n){return"script[async]"+n}function mv(n,r,a){if(r.count++,r.instance===null)switch(r.type){case"style":var l=n.querySelector('style[data-href~="'+cn(a.href)+'"]');if(l)return r.instance=l,Nt(l),l;var f=x({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(n.ownerDocument||n).createElement("style"),Nt(l),Kt(l,"style",f),ah(l,a.precedence,n),r.instance=l;case"stylesheet":f=uo(a.href);var d=n.querySelector(Ul(f));if(d)return r.state.loading|=4,r.instance=d,Nt(d),d;l=dv(a),(f=$n.get(f))&&Lm(l,f),d=(n.ownerDocument||n).createElement("link"),Nt(d);var b=d;return b._p=new Promise(function(A,V){b.onload=A,b.onerror=V}),Kt(d,"link",l),r.state.loading|=4,ah(d,a.precedence,n),r.instance=d;case"script":return d=ho(a.src),(f=n.querySelector(zl(d)))?(r.instance=f,Nt(f),f):(l=a,(f=$n.get(d))&&(l=x({},a),Pm(l,f)),n=n.ownerDocument||n,f=n.createElement("script"),Nt(f),Kt(f,"link",l),n.head.appendChild(f),r.instance=f);case"void":return null;default:throw Error(s(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(l=r.instance,r.state.loading|=4,ah(l,a.precedence,n));return r.instance}function ah(n,r,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=l.length?l[l.length-1]:null,d=f,b=0;b<l.length;b++){var A=l[b];if(A.dataset.precedence===r)d=A;else if(d!==f)break}d?d.parentNode.insertBefore(n,d.nextSibling):(r=a.nodeType===9?a.head:a,r.insertBefore(n,r.firstChild))}function Lm(n,r){n.crossOrigin==null&&(n.crossOrigin=r.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=r.referrerPolicy),n.title==null&&(n.title=r.title)}function Pm(n,r){n.crossOrigin==null&&(n.crossOrigin=r.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=r.referrerPolicy),n.integrity==null&&(n.integrity=r.integrity)}var oh=null;function pv(n,r,a){if(oh===null){var l=new Map,f=oh=new Map;f.set(a,l)}else f=oh,l=f.get(a),l||(l=new Map,f.set(a,l));if(l.has(n))return l;for(l.set(n,null),a=a.getElementsByTagName(n),f=0;f<a.length;f++){var d=a[f];if(!(d[bi]||d[St]||n==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var b=d.getAttribute(r)||"";b=n+b;var A=l.get(b);A?A.push(d):l.set(b,[d])}}return l}function gv(n,r,a){n=n.ownerDocument||n,n.head.insertBefore(a,r==="title"?n.querySelector("head > title"):null)}function wA(n,r,a){if(a===1||r.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return n=r.disabled,typeof r.precedence=="string"&&n==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function yv(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function AA(n,r,a,l){if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var f=uo(l.href),d=r.querySelector(Ul(f));if(d){r=d._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(n.count++,n=lh.bind(n),r.then(n,n)),a.state.loading|=4,a.instance=d,Nt(d);return}d=r.ownerDocument||r,l=dv(l),(f=$n.get(f))&&Lm(l,f),d=d.createElement("link"),Nt(d);var b=d;b._p=new Promise(function(A,V){b.onload=A,b.onerror=V}),Kt(d,"link",l),a.instance=d}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(a,r),(r=a.state.preload)&&(a.state.loading&3)===0&&(n.count++,a=lh.bind(n),r.addEventListener("load",a),r.addEventListener("error",a))}}var Um=0;function SA(n,r){return n.stylesheets&&n.count===0&&uh(n,n.stylesheets),0<n.count||0<n.imgCount?function(a){var l=setTimeout(function(){if(n.stylesheets&&uh(n,n.stylesheets),n.unsuspend){var d=n.unsuspend;n.unsuspend=null,d()}},6e4+r);0<n.imgBytes&&Um===0&&(Um=62500*aA());var f=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&uh(n,n.stylesheets),n.unsuspend)){var d=n.unsuspend;n.unsuspend=null,d()}},(n.imgBytes>Um?50:800)+r);return n.unsuspend=a,function(){n.unsuspend=null,clearTimeout(l),clearTimeout(f)}}:null}function lh(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)uh(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var ch=null;function uh(n,r){n.stylesheets=null,n.unsuspend!==null&&(n.count++,ch=new Map,r.forEach(NA,n),ch=null,lh.call(n))}function NA(n,r){if(!(r.state.loading&4)){var a=ch.get(n);if(a)var l=a.get(null);else{a=new Map,ch.set(n,a);for(var f=n.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<f.length;d++){var b=f[d];(b.nodeName==="LINK"||b.getAttribute("media")!=="not all")&&(a.set(b.dataset.precedence,b),l=b)}l&&a.set(null,l)}f=r.instance,b=f.getAttribute("data-precedence"),d=a.get(b)||l,d===l&&a.set(null,f),a.set(b,f),this.count++,l=lh.bind(this),f.addEventListener("load",l),f.addEventListener("error",l),d?d.parentNode.insertBefore(f,d.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(f,n.firstChild)),r.state.loading|=4}}var Bl={$$typeof:te,Provider:null,Consumer:null,_currentValue:W,_currentValue2:W,_threadCount:0};function CA(n,r,a,l,f,d,b,A,V){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=_i(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=_i(0),this.hiddenUpdates=_i(null),this.identifierPrefix=l,this.onUncaughtError=f,this.onCaughtError=d,this.onRecoverableError=b,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=V,this.incompleteTransitions=new Map}function _v(n,r,a,l,f,d,b,A,V,Q,ne,le){return n=new CA(n,r,a,b,V,Q,ne,le,A),r=1,d===!0&&(r|=24),d=Tn(3,null,null,r),n.current=d,d.stateNode=n,r=_d(),r.refCount++,n.pooledCache=r,r.refCount++,d.memoizedState={element:l,isDehydrated:a,cache:r},Ed(d),n}function vv(n){return n?(n=qa,n):qa}function bv(n,r,a,l,f,d){f=vv(f),l.context===null?l.context=f:l.pendingContext=f,l=Gr(r),l.payload={element:a},d=d===void 0?null:d,d!==null&&(l.callback=d),a=$r(n,l,r),a!==null&&(pn(a,n,r),vl(a,n,r))}function xv(n,r){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<r?a:r}}function zm(n,r){xv(n,r),(n=n.alternate)&&xv(n,r)}function Ev(n){if(n.tag===13||n.tag===31){var r=Qs(n,67108864);r!==null&&pn(r,n,67108864),zm(n,67108864)}}function Tv(n){if(n.tag===13||n.tag===31){var r=Cn();r=js(r);var a=Qs(n,r);a!==null&&pn(a,n,r),zm(n,r)}}var hh=!0;function RA(n,r,a,l){var f=j.T;j.T=null;var d=z.p;try{z.p=2,Bm(n,r,a,l)}finally{z.p=d,j.T=f}}function IA(n,r,a,l){var f=j.T;j.T=null;var d=z.p;try{z.p=8,Bm(n,r,a,l)}finally{z.p=d,j.T=f}}function Bm(n,r,a,l){if(hh){var f=qm(l);if(f===null)Nm(n,r,l,fh,a),Av(n,l);else if(MA(f,n,r,a,l))l.stopPropagation();else if(Av(n,l),r&4&&-1<DA.indexOf(n)){for(;f!==null;){var d=Vn(f);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var b=gi(d.pendingLanes);if(b!==0){var A=d;for(A.pendingLanes|=2,A.entangledLanes|=2;b;){var V=1<<31-bt(b);A.entanglements[1]|=V,b&=~V}Vi(d),(Xe&6)===0&&(Qu=an()+500,Vl(0))}}break;case 31:case 13:A=Qs(d,2),A!==null&&pn(A,d,2),Xu(),zm(d,2)}if(d=qm(l),d===null&&Nm(n,r,l,fh,a),d===f)break;f=d}f!==null&&l.stopPropagation()}else Nm(n,r,l,null,a)}}function qm(n){return n=jn(n),Fm(n)}var fh=null;function Fm(n){if(fh=null,n=xi(n),n!==null){var r=c(n);if(r===null)n=null;else{var a=r.tag;if(a===13){if(n=u(r),n!==null)return n;n=null}else if(a===31){if(n=m(r),n!==null)return n;n=null}else if(a===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;n=null}else r!==n&&(n=null)}}return fh=n,null}function wv(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ms()){case Ho:return 2;case Go:return 8;case Ir:case Kf:return 32;case Hc:return 268435456;default:return 32}default:return 32}}var Hm=!1,is=null,rs=null,ss=null,ql=new Map,Fl=new Map,as=[],DA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Av(n,r){switch(n){case"focusin":case"focusout":is=null;break;case"dragenter":case"dragleave":rs=null;break;case"mouseover":case"mouseout":ss=null;break;case"pointerover":case"pointerout":ql.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Fl.delete(r.pointerId)}}function Hl(n,r,a,l,f,d){return n===null||n.nativeEvent!==d?(n={blockedOn:r,domEventName:a,eventSystemFlags:l,nativeEvent:d,targetContainers:[f]},r!==null&&(r=Vn(r),r!==null&&Ev(r)),n):(n.eventSystemFlags|=l,r=n.targetContainers,f!==null&&r.indexOf(f)===-1&&r.push(f),n)}function MA(n,r,a,l,f){switch(r){case"focusin":return is=Hl(is,n,r,a,l,f),!0;case"dragenter":return rs=Hl(rs,n,r,a,l,f),!0;case"mouseover":return ss=Hl(ss,n,r,a,l,f),!0;case"pointerover":var d=f.pointerId;return ql.set(d,Hl(ql.get(d)||null,n,r,a,l,f)),!0;case"gotpointercapture":return d=f.pointerId,Fl.set(d,Hl(Fl.get(d)||null,n,r,a,l,f)),!0}return!1}function Sv(n){var r=xi(n.target);if(r!==null){var a=c(r);if(a!==null){if(r=a.tag,r===13){if(r=u(a),r!==null){n.blockedOn=r,Zn(n.priority,function(){Tv(a)});return}}else if(r===31){if(r=m(a),r!==null){n.blockedOn=r,Zn(n.priority,function(){Tv(a)});return}}else if(r===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function dh(n){if(n.blockedOn!==null)return!1;for(var r=n.targetContainers;0<r.length;){var a=qm(n.nativeEvent);if(a===null){a=n.nativeEvent;var l=new a.constructor(a.type,a);il=l,a.target.dispatchEvent(l),il=null}else return r=Vn(a),r!==null&&Ev(r),n.blockedOn=a,!1;r.shift()}return!0}function Nv(n,r,a){dh(n)&&a.delete(r)}function OA(){Hm=!1,is!==null&&dh(is)&&(is=null),rs!==null&&dh(rs)&&(rs=null),ss!==null&&dh(ss)&&(ss=null),ql.forEach(Nv),Fl.forEach(Nv)}function mh(n,r){n.blockedOn===r&&(n.blockedOn=null,Hm||(Hm=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,OA)))}var ph=null;function Cv(n){ph!==n&&(ph=n,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){ph===n&&(ph=null);for(var r=0;r<n.length;r+=3){var a=n[r],l=n[r+1],f=n[r+2];if(typeof l!="function"){if(Fm(l||a)===null)continue;break}var d=Vn(a);d!==null&&(n.splice(r,3),r-=3,qd(d,{pending:!0,data:f,method:a.method,action:l},l,f))}}))}function fo(n){function r(V){return mh(V,n)}is!==null&&mh(is,n),rs!==null&&mh(rs,n),ss!==null&&mh(ss,n),ql.forEach(r),Fl.forEach(r);for(var a=0;a<as.length;a++){var l=as[a];l.blockedOn===n&&(l.blockedOn=null)}for(;0<as.length&&(a=as[0],a.blockedOn===null);)Sv(a),a.blockedOn===null&&as.shift();if(a=(n.ownerDocument||n).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var f=a[l],d=a[l+1],b=f[zt]||null;if(typeof d=="function")b||Cv(a);else if(b){var A=null;if(d&&d.hasAttribute("formAction")){if(f=d,b=d[zt]||null)A=b.formAction;else if(Fm(f)!==null)continue}else A=b.action;typeof A=="function"?a[l+1]=A:(a.splice(l,3),l-=3),Cv(a)}}}function Rv(){function n(d){d.canIntercept&&d.info==="react-transition"&&d.intercept({handler:function(){return new Promise(function(b){return f=b})},focusReset:"manual",scroll:"manual"})}function r(){f!==null&&(f(),f=null),l||setTimeout(a,20)}function a(){if(!l&&!navigation.transition){var d=navigation.currentEntry;d&&d.url!=null&&navigation.navigate(d.url,{state:d.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,f=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(a,100),function(){l=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),f!==null&&(f(),f=null)}}}function Gm(n){this._internalRoot=n}gh.prototype.render=Gm.prototype.render=function(n){var r=this._internalRoot;if(r===null)throw Error(s(409));var a=r.current,l=Cn();bv(a,l,n,r,null,null)},gh.prototype.unmount=Gm.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var r=n.containerInfo;bv(n.current,2,null,n,null,null),Xu(),r[vi]=null}};function gh(n){this._internalRoot=n}gh.prototype.unstable_scheduleHydration=function(n){if(n){var r=Xc();n={blockedOn:null,target:n,priority:r};for(var a=0;a<as.length&&r!==0&&r<as[a].priority;a++);as.splice(a,0,n),a===0&&Sv(n)}};var Iv=e.version;if(Iv!=="19.2.1")throw Error(s(527,Iv,"19.2.1"));z.findDOMNode=function(n){var r=n._reactInternals;if(r===void 0)throw typeof n.render=="function"?Error(s(188)):(n=Object.keys(n).join(","),Error(s(268,n)));return n=g(r),n=n!==null?v(n):null,n=n===null?null:n.stateNode,n};var kA={bundleType:0,version:"19.2.1",rendererPackageName:"react-dom",currentDispatcherRef:j,reconcilerVersion:"19.2.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var yh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!yh.isDisabled&&yh.supportsFiber)try{Xn=yh.inject(kA),Ht=yh}catch{}}return $l.createRoot=function(n,r){if(!o(n))throw Error(s(299));var a=!1,l="",f=Ly,d=Py,b=Uy;return r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(l=r.identifierPrefix),r.onUncaughtError!==void 0&&(f=r.onUncaughtError),r.onCaughtError!==void 0&&(d=r.onCaughtError),r.onRecoverableError!==void 0&&(b=r.onRecoverableError)),r=_v(n,1,!1,null,null,a,l,null,f,d,b,Rv),n[vi]=r.current,Sm(n),new Gm(r)},$l.hydrateRoot=function(n,r,a){if(!o(n))throw Error(s(299));var l=!1,f="",d=Ly,b=Py,A=Uy,V=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onUncaughtError!==void 0&&(d=a.onUncaughtError),a.onCaughtError!==void 0&&(b=a.onCaughtError),a.onRecoverableError!==void 0&&(A=a.onRecoverableError),a.formState!==void 0&&(V=a.formState)),r=_v(n,1,!0,r,a??null,l,f,V,d,b,A,Rv),r.context=vv(null),a=r.current,l=Cn(),l=js(l),f=Gr(l),f.callback=null,$r(a,f,l),a=l,r.current.lanes=a,ks(r,a),Vi(r),n[vi]=r.current,Sm(n),new gh(r)},$l.version="19.2.1",$l}var zv;function GA(){if(zv)return Qm.exports;zv=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),Qm.exports=HA(),Qm.exports}var $A=GA();const YA=()=>{};var Bv={};const Jx=function(i){const e=[];let t=0;for(let s=0;s<i.length;s++){let o=i.charCodeAt(s);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&s+1<i.length&&(i.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(i.charCodeAt(++s)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},QA=function(i){const e=[];let t=0,s=0;for(;t<i.length;){const o=i[t++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const c=i[t++];e[s++]=String.fromCharCode((o&31)<<6|c&63)}else if(o>239&&o<365){const c=i[t++],u=i[t++],m=i[t++],p=((o&7)<<18|(c&63)<<12|(u&63)<<6|m&63)-65536;e[s++]=String.fromCharCode(55296+(p>>10)),e[s++]=String.fromCharCode(56320+(p&1023))}else{const c=i[t++],u=i[t++];e[s++]=String.fromCharCode((o&15)<<12|(c&63)<<6|u&63)}}return e.join("")},eE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<i.length;o+=3){const c=i[o],u=o+1<i.length,m=u?i[o+1]:0,p=o+2<i.length,g=p?i[o+2]:0,v=c>>2,x=(c&3)<<4|m>>4;let T=(m&15)<<2|g>>6,I=g&63;p||(I=64,u||(T=64)),s.push(t[v],t[x],t[T],t[I])}return s.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(Jx(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):QA(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<i.length;){const c=t[i.charAt(o++)],m=o<i.length?t[i.charAt(o)]:0;++o;const g=o<i.length?t[i.charAt(o)]:64;++o;const x=o<i.length?t[i.charAt(o)]:64;if(++o,c==null||m==null||g==null||x==null)throw new KA;const T=c<<2|m>>4;if(s.push(T),g!==64){const I=m<<4&240|g>>2;if(s.push(I),x!==64){const U=g<<6&192|x;s.push(U)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class KA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const XA=function(i){const e=Jx(i);return eE.encodeByteArray(e,!0)},Yh=function(i){return XA(i).replace(/\./g,"")},tE=function(i){try{return eE.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function WA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const ZA=()=>WA().__FIREBASE_DEFAULTS__,JA=()=>{if(typeof process>"u"||typeof Bv>"u")return;const i=Bv.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},eS=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&tE(i[1]);return e&&JSON.parse(e)},Ef=()=>{try{return YA()||ZA()||JA()||eS()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},nE=i=>Ef()?.emulatorHosts?.[i],tS=i=>{const e=nE(i);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},iE=()=>Ef()?.config,rE=i=>Ef()?.[`_${i}`];class nS{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}function Vo(i){try{return(i.startsWith("http://")||i.startsWith("https://")?new URL(i).hostname:i).endsWith(".cloudworkstations.dev")}catch{return!1}}async function sE(i){return(await fetch(i,{credentials:"include"})).ok}function iS(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",o=i.iat||0,c=i.sub||i.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u={iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}},...i};return[Yh(JSON.stringify(t)),Yh(JSON.stringify(u)),""].join(".")}const oc={};function rS(){const i={prod:[],emulator:[]};for(const e of Object.keys(oc))oc[e]?i.emulator.push(e):i.prod.push(e);return i}function sS(i){let e=document.getElementById(i),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",i),t=!0),{created:t,element:e}}let qv=!1;function aE(i,e){if(typeof window>"u"||typeof document>"u"||!Vo(window.location.host)||oc[i]===e||oc[i]||qv)return;oc[i]=e;function t(T){return`__firebase__banner__${T}`}const s="__firebase__banner",c=rS().prod.length>0;function u(){const T=document.getElementById(s);T&&T.remove()}function m(T){T.style.display="flex",T.style.background="#7faaf0",T.style.position="fixed",T.style.bottom="5px",T.style.left="5px",T.style.padding=".5em",T.style.borderRadius="5px",T.style.alignItems="center"}function p(T,I){T.setAttribute("width","24"),T.setAttribute("id",I),T.setAttribute("height","24"),T.setAttribute("viewBox","0 0 24 24"),T.setAttribute("fill","none"),T.style.marginLeft="-6px"}function g(){const T=document.createElement("span");return T.style.cursor="pointer",T.style.marginLeft="16px",T.style.fontSize="24px",T.innerHTML=" &times;",T.onclick=()=>{qv=!0,u()},T}function v(T,I){T.setAttribute("id",I),T.innerText="Learn more",T.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",T.setAttribute("target","__blank"),T.style.paddingLeft="5px",T.style.textDecoration="underline"}function x(){const T=sS(s),I=t("text"),U=document.getElementById(I)||document.createElement("span"),q=t("learnmore"),$=document.getElementById(q)||document.createElement("a"),ce=t("preprendIcon"),G=document.getElementById(ce)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(T.created){const te=T.element;m(te),v($,q);const ie=g();p(G,ce),te.append(G,U,$,ie),document.body.appendChild(te)}c?(U.innerText="Preview backend disconnected.",G.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(G.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,U.innerText="Preview backend running in this workspace."),U.setAttribute("id",I)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",x):x()}function rn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function aS(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(rn())}function oS(){const i=Ef()?.forceEnvironment;if(i==="node")return!0;if(i==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function lS(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function cS(){const i=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof i=="object"&&i.id!==void 0}function uS(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function hS(){const i=rn();return i.indexOf("MSIE ")>=0||i.indexOf("Trident/")>=0}function fS(){return!oS()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function dS(){try{return typeof indexedDB=="object"}catch{return!1}}function mS(){return new Promise((i,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(s),i(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(t){e(t)}})}const pS="FirebaseError";class wr extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=pS,Object.setPrototypeOf(this,wr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Cc.prototype.create)}}class Cc{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},o=`${this.service}/${e}`,c=this.errors[e],u=c?gS(c,s):"Error",m=`${this.serviceName}: ${u} (${o}).`;return new wr(o,m,s)}}function gS(i,e){return i.replace(yS,(t,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const yS=/\{\$([^}]+)}/g;function _S(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}function ya(i,e){if(i===e)return!0;const t=Object.keys(i),s=Object.keys(e);for(const o of t){if(!s.includes(o))return!1;const c=i[o],u=e[o];if(Fv(c)&&Fv(u)){if(!ya(c,u))return!1}else if(c!==u)return!1}for(const o of s)if(!t.includes(o))return!1;return!0}function Fv(i){return i!==null&&typeof i=="object"}function Rc(i){const e=[];for(const[t,s]of Object.entries(i))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function Zl(i){const e={};return i.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[o,c]=s.split("=");e[decodeURIComponent(o)]=decodeURIComponent(c)}}),e}function Jl(i){const e=i.indexOf("?");if(!e)return"";const t=i.indexOf("#",e);return i.substring(e,t>0?t:void 0)}function vS(i,e){const t=new bS(i,e);return t.subscribe.bind(t)}class bS{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,s){let o;if(e===void 0&&t===void 0&&s===void 0)throw new Error("Missing Observer.");xS(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:s},o.next===void 0&&(o.next=Zm),o.error===void 0&&(o.error=Zm),o.complete===void 0&&(o.complete=Zm);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),c}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function xS(i,e){if(typeof i!="object"||i===null)return!1;for(const t of e)if(t in i&&typeof i[t]=="function")return!0;return!1}function Zm(){}function Ut(i){return i&&i._delegate?i._delegate:i}class _a{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const ca="[DEFAULT]";class ES{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new nS;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),s=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(wS(e))try{this.getOrInitializeService({instanceIdentifier:ca})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const c=this.getOrInitializeService({instanceIdentifier:o});s.resolve(c)}catch{}}}}clearInstance(e=ca){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ca){return this.instances.has(e)}getOptions(e=ca){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[c,u]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(c);s===m&&u.resolve(o)}return o}onInit(e,t){const s=this.normalizeInstanceIdentifier(t),o=this.onInitCallbacks.get(s)??new Set;o.add(e),this.onInitCallbacks.set(s,o);const c=this.instances.get(s);return c&&e(c,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const o of s)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:TS(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=ca){return this.component?this.component.multipleInstances?e:ca:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function TS(i){return i===ca?void 0:i}function wS(i){return i.instantiationMode==="EAGER"}class AS{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new ES(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var qe;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(qe||(qe={}));const SS={debug:qe.DEBUG,verbose:qe.VERBOSE,info:qe.INFO,warn:qe.WARN,error:qe.ERROR,silent:qe.SILENT},NS=qe.INFO,CS={[qe.DEBUG]:"log",[qe.VERBOSE]:"log",[qe.INFO]:"info",[qe.WARN]:"warn",[qe.ERROR]:"error"},RS=(i,e,...t)=>{if(e<i.logLevel)return;const s=new Date().toISOString(),o=CS[e];if(o)console[o](`[${s}]  ${i.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class og{constructor(e){this.name=e,this._logLevel=NS,this._logHandler=RS,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in qe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?SS[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,qe.DEBUG,...e),this._logHandler(this,qe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,qe.VERBOSE,...e),this._logHandler(this,qe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,qe.INFO,...e),this._logHandler(this,qe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,qe.WARN,...e),this._logHandler(this,qe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,qe.ERROR,...e),this._logHandler(this,qe.ERROR,...e)}}const IS=(i,e)=>e.some(t=>i instanceof t);let Hv,Gv;function DS(){return Hv||(Hv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function MS(){return Gv||(Gv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const oE=new WeakMap,Ep=new WeakMap,lE=new WeakMap,Jm=new WeakMap,lg=new WeakMap;function OS(i){const e=new Promise((t,s)=>{const o=()=>{i.removeEventListener("success",c),i.removeEventListener("error",u)},c=()=>{t(ps(i.result)),o()},u=()=>{s(i.error),o()};i.addEventListener("success",c),i.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&oE.set(t,i)}).catch(()=>{}),lg.set(e,i),e}function kS(i){if(Ep.has(i))return;const e=new Promise((t,s)=>{const o=()=>{i.removeEventListener("complete",c),i.removeEventListener("error",u),i.removeEventListener("abort",u)},c=()=>{t(),o()},u=()=>{s(i.error||new DOMException("AbortError","AbortError")),o()};i.addEventListener("complete",c),i.addEventListener("error",u),i.addEventListener("abort",u)});Ep.set(i,e)}let Tp={get(i,e,t){if(i instanceof IDBTransaction){if(e==="done")return Ep.get(i);if(e==="objectStoreNames")return i.objectStoreNames||lE.get(i);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ps(i[e])},set(i,e,t){return i[e]=t,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function VS(i){Tp=i(Tp)}function jS(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=i.call(ep(this),e,...t);return lE.set(s,e.sort?e.sort():[e]),ps(s)}:MS().includes(i)?function(...e){return i.apply(ep(this),e),ps(oE.get(this))}:function(...e){return ps(i.apply(ep(this),e))}}function LS(i){return typeof i=="function"?jS(i):(i instanceof IDBTransaction&&kS(i),IS(i,DS())?new Proxy(i,Tp):i)}function ps(i){if(i instanceof IDBRequest)return OS(i);if(Jm.has(i))return Jm.get(i);const e=LS(i);return e!==i&&(Jm.set(i,e),lg.set(e,i)),e}const ep=i=>lg.get(i);function PS(i,e,{blocked:t,upgrade:s,blocking:o,terminated:c}={}){const u=indexedDB.open(i,e),m=ps(u);return s&&u.addEventListener("upgradeneeded",p=>{s(ps(u.result),p.oldVersion,p.newVersion,ps(u.transaction),p)}),t&&u.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),m.then(p=>{c&&p.addEventListener("close",()=>c()),o&&p.addEventListener("versionchange",g=>o(g.oldVersion,g.newVersion,g))}).catch(()=>{}),m}const US=["get","getKey","getAll","getAllKeys","count"],zS=["put","add","delete","clear"],tp=new Map;function $v(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(tp.get(e))return tp.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,o=zS.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(o||US.includes(t)))return;const c=async function(u,...m){const p=this.transaction(u,o?"readwrite":"readonly");let g=p.store;return s&&(g=g.index(m.shift())),(await Promise.all([g[t](...m),o&&p.done]))[0]};return tp.set(e,c),c}VS(i=>({...i,get:(e,t,s)=>$v(e,t)||i.get(e,t,s),has:(e,t)=>!!$v(e,t)||i.has(e,t)}));class BS{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(qS(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function qS(i){return i.getComponent()?.type==="VERSION"}const wp="@firebase/app",Yv="0.14.6";const vr=new og("@firebase/app"),FS="@firebase/app-compat",HS="@firebase/analytics-compat",GS="@firebase/analytics",$S="@firebase/app-check-compat",YS="@firebase/app-check",QS="@firebase/auth",KS="@firebase/auth-compat",XS="@firebase/database",WS="@firebase/data-connect",ZS="@firebase/database-compat",JS="@firebase/functions",e2="@firebase/functions-compat",t2="@firebase/installations",n2="@firebase/installations-compat",i2="@firebase/messaging",r2="@firebase/messaging-compat",s2="@firebase/performance",a2="@firebase/performance-compat",o2="@firebase/remote-config",l2="@firebase/remote-config-compat",c2="@firebase/storage",u2="@firebase/storage-compat",h2="@firebase/firestore",f2="@firebase/ai",d2="@firebase/firestore-compat",m2="firebase",p2="12.6.0";const Ap="[DEFAULT]",g2={[wp]:"fire-core",[FS]:"fire-core-compat",[GS]:"fire-analytics",[HS]:"fire-analytics-compat",[YS]:"fire-app-check",[$S]:"fire-app-check-compat",[QS]:"fire-auth",[KS]:"fire-auth-compat",[XS]:"fire-rtdb",[WS]:"fire-data-connect",[ZS]:"fire-rtdb-compat",[JS]:"fire-fn",[e2]:"fire-fn-compat",[t2]:"fire-iid",[n2]:"fire-iid-compat",[i2]:"fire-fcm",[r2]:"fire-fcm-compat",[s2]:"fire-perf",[a2]:"fire-perf-compat",[o2]:"fire-rc",[l2]:"fire-rc-compat",[c2]:"fire-gcs",[u2]:"fire-gcs-compat",[h2]:"fire-fst",[d2]:"fire-fst-compat",[f2]:"fire-vertex","fire-js":"fire-js",[m2]:"fire-js-all"};const Qh=new Map,y2=new Map,Sp=new Map;function Qv(i,e){try{i.container.addComponent(e)}catch(t){vr.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,t)}}function So(i){const e=i.name;if(Sp.has(e))return vr.debug(`There were multiple attempts to register component ${e}.`),!1;Sp.set(e,i);for(const t of Qh.values())Qv(t,i);for(const t of y2.values())Qv(t,i);return!0}function cg(i,e){const t=i.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),i.container.getProvider(e)}function Yn(i){return i==null?!1:i.settings!==void 0}const _2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},gs=new Cc("app","Firebase",_2);class v2{constructor(e,t,s){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new _a("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw gs.create("app-deleted",{appName:this._name})}}const jo=p2;function cE(i,e={}){let t=i;typeof e!="object"&&(e={name:e});const s={name:Ap,automaticDataCollectionEnabled:!0,...e},o=s.name;if(typeof o!="string"||!o)throw gs.create("bad-app-name",{appName:String(o)});if(t||(t=iE()),!t)throw gs.create("no-options");const c=Qh.get(o);if(c){if(ya(t,c.options)&&ya(s,c.config))return c;throw gs.create("duplicate-app",{appName:o})}const u=new AS(o);for(const p of Sp.values())u.addComponent(p);const m=new v2(t,s,u);return Qh.set(o,m),m}function uE(i=Ap){const e=Qh.get(i);if(!e&&i===Ap&&iE())return cE();if(!e)throw gs.create("no-app",{appName:i});return e}function ys(i,e,t){let s=g2[i]??i;t&&(s+=`-${t}`);const o=s.match(/\s|\//),c=e.match(/\s|\//);if(o||c){const u=[`Unable to register library "${s}" with version "${e}":`];o&&u.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&c&&u.push("and"),c&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),vr.warn(u.join(" "));return}So(new _a(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}const b2="firebase-heartbeat-database",x2=1,mc="firebase-heartbeat-store";let np=null;function hE(){return np||(np=PS(b2,x2,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(mc)}catch(t){console.warn(t)}}}}).catch(i=>{throw gs.create("idb-open",{originalErrorMessage:i.message})})),np}async function E2(i){try{const t=(await hE()).transaction(mc),s=await t.objectStore(mc).get(fE(i));return await t.done,s}catch(e){if(e instanceof wr)vr.warn(e.message);else{const t=gs.create("idb-get",{originalErrorMessage:e?.message});vr.warn(t.message)}}}async function Kv(i,e){try{const s=(await hE()).transaction(mc,"readwrite");await s.objectStore(mc).put(e,fE(i)),await s.done}catch(t){if(t instanceof wr)vr.warn(t.message);else{const s=gs.create("idb-set",{originalErrorMessage:t?.message});vr.warn(s.message)}}}function fE(i){return`${i.name}!${i.options.appId}`}const T2=1024,w2=30;class A2{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new N2(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Xv();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:t}),this._heartbeatsCache.heartbeats.length>w2){const o=C2(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){vr.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Xv(),{heartbeatsToSend:t,unsentEntries:s}=S2(this._heartbeatsCache.heartbeats),o=Yh(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return vr.warn(e),""}}}function Xv(){return new Date().toISOString().substring(0,10)}function S2(i,e=T2){const t=[];let s=i.slice();for(const o of i){const c=t.find(u=>u.agent===o.agent);if(c){if(c.dates.push(o.date),Wv(t)>e){c.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),Wv(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class N2{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return dS()?mS().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await E2(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Kv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Kv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Wv(i){return Yh(JSON.stringify({version:2,heartbeats:i})).length}function C2(i){if(i.length===0)return-1;let e=0,t=i[0].date;for(let s=1;s<i.length;s++)i[s].date<t&&(t=i[s].date,e=s);return e}function R2(i){So(new _a("platform-logger",e=>new BS(e),"PRIVATE")),So(new _a("heartbeat",e=>new A2(e),"PRIVATE")),ys(wp,Yv,i),ys(wp,Yv,"esm2020"),ys("fire-js","")}R2("");var I2="firebase",D2="12.7.0";ys(I2,D2,"app");function dE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const M2=dE,mE=new Cc("auth","Firebase",dE());const Kh=new og("@firebase/auth");function O2(i,...e){Kh.logLevel<=qe.WARN&&Kh.warn(`Auth (${jo}): ${i}`,...e)}function Dh(i,...e){Kh.logLevel<=qe.ERROR&&Kh.error(`Auth (${jo}): ${i}`,...e)}function hi(i,...e){throw ug(i,...e)}function Li(i,...e){return ug(i,...e)}function pE(i,e,t){const s={...M2(),[e]:t};return new Cc("auth","Firebase",s).create(e,{appName:i.name})}function yr(i){return pE(i,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function ug(i,...e){if(typeof i!="string"){const t=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=i.name),i._errorFactory.create(t,...s)}return mE.create(i,...e)}function Re(i,e,...t){if(!i)throw ug(e,...t)}function pr(i){const e="INTERNAL ASSERTION FAILED: "+i;throw Dh(e),new Error(e)}function br(i,e){i||pr(e)}function Np(){return typeof self<"u"&&self.location?.href||""}function k2(){return Zv()==="http:"||Zv()==="https:"}function Zv(){return typeof self<"u"&&self.location?.protocol||null}function V2(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(k2()||cS()||"connection"in navigator)?navigator.onLine:!0}function j2(){if(typeof navigator>"u")return null;const i=navigator;return i.languages&&i.languages[0]||i.language||null}class Ic{constructor(e,t){this.shortDelay=e,this.longDelay=t,br(t>e,"Short delay should be less than long delay!"),this.isMobile=aS()||uS()}get(){return V2()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function hg(i,e){br(i.emulator,"Emulator should always be set here");const{url:t}=i.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class gE{static initialize(e,t,s){this.fetchImpl=e,t&&(this.headersImpl=t),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;pr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;pr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;pr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const L2={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const P2=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],U2=new Ic(3e4,6e4);function Ar(i,e){return i.tenantId&&!e.tenantId?{...e,tenantId:i.tenantId}:e}async function Sr(i,e,t,s,o={}){return yE(i,o,async()=>{let c={},u={};s&&(e==="GET"?u=s:c={body:JSON.stringify(s)});const m=Rc({key:i.config.apiKey,...u}).slice(1),p=await i._getAdditionalHeaders();p["Content-Type"]="application/json",i.languageCode&&(p["X-Firebase-Locale"]=i.languageCode);const g={method:e,headers:p,...c};return lS()||(g.referrerPolicy="no-referrer"),i.emulatorConfig&&Vo(i.emulatorConfig.host)&&(g.credentials="include"),gE.fetch()(await _E(i,i.config.apiHost,t,m),g)})}async function yE(i,e,t){i._canInitEmulator=!1;const s={...L2,...e};try{const o=new B2(i),c=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const u=await c.json();if("needConfirmation"in u)throw _h(i,"account-exists-with-different-credential",u);if(c.ok&&!("errorMessage"in u))return u;{const m=c.ok?u.errorMessage:u.error.message,[p,g]=m.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw _h(i,"credential-already-in-use",u);if(p==="EMAIL_EXISTS")throw _h(i,"email-already-in-use",u);if(p==="USER_DISABLED")throw _h(i,"user-disabled",u);const v=s[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw pE(i,v,g);hi(i,v)}}catch(o){if(o instanceof wr)throw o;hi(i,"network-request-failed",{message:String(o)})}}async function Dc(i,e,t,s,o={}){const c=await Sr(i,e,t,s,o);return"mfaPendingCredential"in c&&hi(i,"multi-factor-auth-required",{_serverResponse:c}),c}async function _E(i,e,t,s){const o=`${e}${t}?${s}`,c=i,u=c.config.emulator?hg(i.config,o):`${i.config.apiScheme}://${o}`;return P2.includes(t)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(u).toString():u}function z2(i){switch(i){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class B2{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,s)=>{this.timer=setTimeout(()=>s(Li(this.auth,"network-request-failed")),U2.get())})}}function _h(i,e,t){const s={appName:i.name};t.email&&(s.email=t.email),t.phoneNumber&&(s.phoneNumber=t.phoneNumber);const o=Li(i,e,s);return o.customData._tokenResponse=t,o}function Jv(i){return i!==void 0&&i.enterprise!==void 0}class q2{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return z2(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function F2(i,e){return Sr(i,"GET","/v2/recaptchaConfig",Ar(i,e))}async function H2(i,e){return Sr(i,"POST","/v1/accounts:delete",e)}async function Xh(i,e){return Sr(i,"POST","/v1/accounts:lookup",e)}function lc(i){if(i)try{const e=new Date(Number(i));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function G2(i,e=!1){const t=Ut(i),s=await t.getIdToken(e),o=fg(s);Re(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const c=typeof o.firebase=="object"?o.firebase:void 0,u=c?.sign_in_provider;return{claims:o,token:s,authTime:lc(ip(o.auth_time)),issuedAtTime:lc(ip(o.iat)),expirationTime:lc(ip(o.exp)),signInProvider:u||null,signInSecondFactor:c?.sign_in_second_factor||null}}function ip(i){return Number(i)*1e3}function fg(i){const[e,t,s]=i.split(".");if(e===void 0||t===void 0||s===void 0)return Dh("JWT malformed, contained fewer than 3 sections"),null;try{const o=tE(t);return o?JSON.parse(o):(Dh("Failed to decode base64 JWT payload"),null)}catch(o){return Dh("Caught error parsing JWT payload as JSON",o?.toString()),null}}function eb(i){const e=fg(i);return Re(e,"internal-error"),Re(typeof e.exp<"u","internal-error"),Re(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function pc(i,e,t=!1){if(t)return e;try{return await e}catch(s){throw s instanceof wr&&$2(s)&&i.auth.currentUser===i&&await i.auth.signOut(),s}}function $2({code:i}){return i==="auth/user-disabled"||i==="auth/user-token-expired"}class Y2{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class Cp{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=lc(this.lastLoginAt),this.creationTime=lc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Wh(i){const e=i.auth,t=await i.getIdToken(),s=await pc(i,Xh(e,{idToken:t}));Re(s?.users.length,e,"internal-error");const o=s.users[0];i._notifyReloadListener(o);const c=o.providerUserInfo?.length?vE(o.providerUserInfo):[],u=K2(i.providerData,c),m=i.isAnonymous,p=!(i.email&&o.passwordHash)&&!u?.length,g=m?p:!1,v={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new Cp(o.createdAt,o.lastLoginAt),isAnonymous:g};Object.assign(i,v)}async function Q2(i){const e=Ut(i);await Wh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function K2(i,e){return[...i.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function vE(i){return i.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function X2(i,e){const t=await yE(i,{},async()=>{const s=Rc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:c}=i.config,u=await _E(i,o,"/v1/token",`key=${c}`),m=await i._getAdditionalHeaders();m["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:m,body:s};return i.emulatorConfig&&Vo(i.emulatorConfig.host)&&(p.credentials="include"),gE.fetch()(u,p)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function W2(i,e){return Sr(i,"POST","/v2/accounts:revokeToken",Ar(i,e))}class bo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Re(e.idToken,"internal-error"),Re(typeof e.idToken<"u","internal-error"),Re(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):eb(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Re(e.length!==0,"internal-error");const t=eb(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Re(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:s,refreshToken:o,expiresIn:c}=await X2(e,t);this.updateTokensAndExpiration(s,o,Number(c))}updateTokensAndExpiration(e,t,s){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,t){const{refreshToken:s,accessToken:o,expirationTime:c}=t,u=new bo;return s&&(Re(typeof s=="string","internal-error",{appName:e}),u.refreshToken=s),o&&(Re(typeof o=="string","internal-error",{appName:e}),u.accessToken=o),c&&(Re(typeof c=="number","internal-error",{appName:e}),u.expirationTime=c),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new bo,this.toJSON())}_performRefresh(){return pr("not implemented")}}function ls(i,e){Re(typeof i=="string"||typeof i>"u","internal-error",{appName:e})}class ci{constructor({uid:e,auth:t,stsTokenManager:s,...o}){this.providerId="firebase",this.proactiveRefresh=new Y2(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Cp(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await pc(this,this.stsTokenManager.getToken(this.auth,e));return Re(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return G2(this,e)}reload(){return Q2(this)}_assign(e){this!==e&&(Re(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new ci({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Re(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),t&&await Wh(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Yn(this.auth.app))return Promise.reject(yr(this.auth));const e=await this.getIdToken();return await pc(this,H2(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const s=t.displayName??void 0,o=t.email??void 0,c=t.phoneNumber??void 0,u=t.photoURL??void 0,m=t.tenantId??void 0,p=t._redirectEventId??void 0,g=t.createdAt??void 0,v=t.lastLoginAt??void 0,{uid:x,emailVerified:T,isAnonymous:I,providerData:U,stsTokenManager:q}=t;Re(x&&q,e,"internal-error");const $=bo.fromJSON(this.name,q);Re(typeof x=="string",e,"internal-error"),ls(s,e.name),ls(o,e.name),Re(typeof T=="boolean",e,"internal-error"),Re(typeof I=="boolean",e,"internal-error"),ls(c,e.name),ls(u,e.name),ls(m,e.name),ls(p,e.name),ls(g,e.name),ls(v,e.name);const ce=new ci({uid:x,auth:e,email:o,emailVerified:T,displayName:s,isAnonymous:I,photoURL:u,phoneNumber:c,tenantId:m,stsTokenManager:$,createdAt:g,lastLoginAt:v});return U&&Array.isArray(U)&&(ce.providerData=U.map(G=>({...G}))),p&&(ce._redirectEventId=p),ce}static async _fromIdTokenResponse(e,t,s=!1){const o=new bo;o.updateFromServerResponse(t);const c=new ci({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await Wh(c),c}static async _fromGetAccountInfoResponse(e,t,s){const o=t.users[0];Re(o.localId!==void 0,"internal-error");const c=o.providerUserInfo!==void 0?vE(o.providerUserInfo):[],u=!(o.email&&o.passwordHash)&&!c?.length,m=new bo;m.updateFromIdToken(s);const p=new ci({uid:o.localId,auth:e,stsTokenManager:m,isAnonymous:u}),g={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new Cp(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!c?.length};return Object.assign(p,g),p}}const tb=new Map;function gr(i){br(i instanceof Function,"Expected a class definition");let e=tb.get(i);return e?(br(e instanceof i,"Instance stored in cache mismatched with class"),e):(e=new i,tb.set(i,e),e)}class bE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}bE.type="NONE";const nb=bE;function Mh(i,e,t){return`firebase:${i}:${e}:${t}`}class xo{constructor(e,t,s){this.persistence=e,this.auth=t,this.userKey=s;const{config:o,name:c}=this.auth;this.fullUserKey=Mh(this.userKey,o.apiKey,c),this.fullPersistenceKey=Mh("persistence",o.apiKey,c),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Xh(this.auth,{idToken:e}).catch(()=>{});return t?ci._fromGetAccountInfoResponse(this.auth,t,e):null}return ci._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,s="authUser"){if(!t.length)return new xo(gr(nb),e,s);const o=(await Promise.all(t.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let c=o[0]||gr(nb);const u=Mh(s,e.config.apiKey,e.name);let m=null;for(const g of t)try{const v=await g._get(u);if(v){let x;if(typeof v=="string"){const T=await Xh(e,{idToken:v}).catch(()=>{});if(!T)break;x=await ci._fromGetAccountInfoResponse(e,T,v)}else x=ci._fromJSON(e,v);g!==c&&(m=x),c=g;break}}catch{}const p=o.filter(g=>g._shouldAllowMigration);return!c._shouldAllowMigration||!p.length?new xo(c,e,s):(c=p[0],m&&await c._set(u,m.toJSON()),await Promise.all(t.map(async g=>{if(g!==c)try{await g._remove(u)}catch{}})),new xo(c,e,s))}}function ib(i){const e=i.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(wE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(xE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(SE(e))return"Blackberry";if(NE(e))return"Webos";if(EE(e))return"Safari";if((e.includes("chrome/")||TE(e))&&!e.includes("edge/"))return"Chrome";if(AE(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=i.match(t);if(s?.length===2)return s[1]}return"Other"}function xE(i=rn()){return/firefox\//i.test(i)}function EE(i=rn()){const e=i.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function TE(i=rn()){return/crios\//i.test(i)}function wE(i=rn()){return/iemobile/i.test(i)}function AE(i=rn()){return/android/i.test(i)}function SE(i=rn()){return/blackberry/i.test(i)}function NE(i=rn()){return/webos/i.test(i)}function dg(i=rn()){return/iphone|ipad|ipod/i.test(i)||/macintosh/i.test(i)&&/mobile/i.test(i)}function Z2(i=rn()){return dg(i)&&!!window.navigator?.standalone}function J2(){return hS()&&document.documentMode===10}function CE(i=rn()){return dg(i)||AE(i)||NE(i)||SE(i)||/windows phone/i.test(i)||wE(i)}function RE(i,e=[]){let t;switch(i){case"Browser":t=ib(rn());break;case"Worker":t=`${ib(rn())}-${i}`;break;default:t=i}const s=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${jo}/${s}`}class eN{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const s=c=>new Promise((u,m)=>{try{const p=e(c);u(p)}catch(p){m(p)}});s.onAbort=t,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const s of this.queue)await s(e),s.onAbort&&t.push(s.onAbort)}catch(s){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}async function tN(i,e={}){return Sr(i,"GET","/v2/passwordPolicy",Ar(i,e))}const nN=6;class iN{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??nN,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(t.meetsMinPasswordLength=e.length>=s),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,t,s,o,c){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=c))}}class rN{constructor(e,t,s,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new rb(this),this.idTokenSubscription=new rb(this),this.beforeStateQueue=new eN(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=mE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=gr(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await xo.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Xh(this,{idToken:e}),s=await ci._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(s)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Yn(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(u,u))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let s=t,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=this.redirectUser?._redirectEventId,u=s?._redirectEventId,m=await this.tryRedirectSignIn(e);(!c||c===u)&&m?.user&&(s=m.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(c){s=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Re(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Wh(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=j2()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Yn(this.app))return Promise.reject(yr(this));const t=e?Ut(e):null;return t&&Re(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Re(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Yn(this.app)?Promise.reject(yr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Yn(this.app)?Promise.reject(yr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(gr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await tN(this),t=new iN(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Cc("auth","Firebase",e())}onAuthStateChanged(e,t,s){return this.registerStateListener(this.authStateSubscription,e,t,s)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,s){return this.registerStateListener(this.idTokenSubscription,e,t,s)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(s.tenantId=this.tenantId),await W2(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const s=await this.getOrInitRedirectPersistenceManager(t);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&gr(e)||this._popupRedirectResolver;Re(t,this,"argument-error"),this.redirectPersistenceManager=await xo.create(this,[gr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,s,o){if(this._deleted)return()=>{};const c=typeof t=="function"?t:t.next.bind(t);let u=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(Re(m,this,"internal-error"),m.then(()=>{u||c(this.currentUser)}),typeof t=="function"){const p=e.addObserver(t,s,o);return()=>{u=!0,p()}}else{const p=e.addObserver(t);return()=>{u=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Re(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=RE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){if(Yn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&O2(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Ns(i){return Ut(i)}class rb{constructor(e){this.auth=e,this.observer=null,this.addObserver=vS(t=>this.observer=t)}get next(){return Re(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Tf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function sN(i){Tf=i}function IE(i){return Tf.loadJS(i)}function aN(){return Tf.recaptchaEnterpriseScript}function oN(){return Tf.gapiScript}function lN(i){return`__${i}${Math.floor(Math.random()*1e6)}`}class cN{constructor(){this.enterprise=new uN}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class uN{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const hN="recaptcha-enterprise",DE="NO_RECAPTCHA";class fN{constructor(e){this.type=hN,this.auth=Ns(e)}async verify(e="verify",t=!1){async function s(c){if(!t){if(c.tenantId==null&&c._agentRecaptchaConfig!=null)return c._agentRecaptchaConfig.siteKey;if(c.tenantId!=null&&c._tenantRecaptchaConfigs[c.tenantId]!==void 0)return c._tenantRecaptchaConfigs[c.tenantId].siteKey}return new Promise(async(u,m)=>{F2(c,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)m(new Error("recaptcha Enterprise site key undefined"));else{const g=new q2(p);return c.tenantId==null?c._agentRecaptchaConfig=g:c._tenantRecaptchaConfigs[c.tenantId]=g,u(g.siteKey)}}).catch(p=>{m(p)})})}function o(c,u,m){const p=window.grecaptcha;Jv(p)?p.enterprise.ready(()=>{p.enterprise.execute(c,{action:e}).then(g=>{u(g)}).catch(()=>{u(DE)})}):m(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new cN().execute("siteKey",{action:"verify"}):new Promise((c,u)=>{s(this.auth).then(m=>{if(!t&&Jv(window.grecaptcha))o(m,c,u);else{if(typeof window>"u"){u(new Error("RecaptchaVerifier is only supported in browser"));return}let p=aN();p.length!==0&&(p+=m),IE(p).then(()=>{o(m,c,u)}).catch(g=>{u(g)})}}).catch(m=>{u(m)})})}}async function sb(i,e,t,s=!1,o=!1){const c=new fN(i);let u;if(o)u=DE;else try{u=await c.verify(t)}catch{u=await c.verify(t,!0)}const m={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in m){const p=m.phoneEnrollmentInfo.phoneNumber,g=m.phoneEnrollmentInfo.recaptchaToken;Object.assign(m,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:g,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in m){const p=m.phoneSignInInfo.recaptchaToken;Object.assign(m,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return m}return s?Object.assign(m,{captchaResp:u}):Object.assign(m,{captchaResponse:u}),Object.assign(m,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(m,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),m}async function Zh(i,e,t,s,o){if(i._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await sb(i,e,t,t==="getOobCode");return s(i,c)}else return s(i,e).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const u=await sb(i,e,t,t==="getOobCode");return s(i,u)}else return Promise.reject(c)})}function dN(i,e){const t=cg(i,"auth");if(t.isInitialized()){const o=t.getImmediate(),c=t.getOptions();if(ya(c,e??{}))return o;hi(o,"already-initialized")}return t.initialize({options:e})}function mN(i,e){const t=e?.persistence||[],s=(Array.isArray(t)?t:[t]).map(gr);e?.errorMap&&i._updateErrorMap(e.errorMap),i._initializeWithPersistence(s,e?.popupRedirectResolver)}function pN(i,e,t){const s=Ns(i);Re(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!1,c=ME(e),{host:u,port:m}=gN(e),p=m===null?"":`:${m}`,g={url:`${c}//${u}${p}/`},v=Object.freeze({host:u,port:m,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!s._canInitEmulator){Re(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Re(ya(g,s.config.emulator)&&ya(v,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=g,s.emulatorConfig=v,s.settings.appVerificationDisabledForTesting=!0,Vo(u)?(sE(`${c}//${u}${p}`),aE("Auth",!0)):yN()}function ME(i){const e=i.indexOf(":");return e<0?"":i.substr(0,e+1)}function gN(i){const e=ME(i),t=/(\/\/)?([^?#/]+)/.exec(i.substr(e.length));if(!t)return{host:"",port:null};const s=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const c=o[1];return{host:c,port:ab(s.substr(c.length+1))}}else{const[c,u]=s.split(":");return{host:c,port:ab(u)}}}function ab(i){if(!i)return null;const e=Number(i);return isNaN(e)?null:e}function yN(){function i(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",i):i())}class mg{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return pr("not implemented")}_getIdTokenResponse(e){return pr("not implemented")}_linkToIdToken(e,t){return pr("not implemented")}_getReauthenticationResolver(e){return pr("not implemented")}}async function _N(i,e){return Sr(i,"POST","/v1/accounts:signUp",e)}async function vN(i,e){return Dc(i,"POST","/v1/accounts:signInWithPassword",Ar(i,e))}async function bN(i,e){return Sr(i,"POST","/v1/accounts:sendOobCode",Ar(i,e))}async function xN(i,e){return bN(i,e)}async function EN(i,e){return Dc(i,"POST","/v1/accounts:signInWithEmailLink",Ar(i,e))}async function TN(i,e){return Dc(i,"POST","/v1/accounts:signInWithEmailLink",Ar(i,e))}class gc extends mg{constructor(e,t,s,o=null){super("password",s),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new gc(e,t,"password")}static _fromEmailAndCode(e,t,s=null){return new gc(e,t,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Zh(e,t,"signInWithPassword",vN);case"emailLink":return EN(e,{email:this._email,oobCode:this._password});default:hi(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const s={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Zh(e,s,"signUpPassword",_N);case"emailLink":return TN(e,{idToken:t,email:this._email,oobCode:this._password});default:hi(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Eo(i,e){return Dc(i,"POST","/v1/accounts:signInWithIdp",Ar(i,e))}const wN="http://localhost";class va extends mg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new va(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):hi("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o,...c}=t;if(!s||!o)return null;const u=new va(s,o);return u.idToken=c.idToken||void 0,u.accessToken=c.accessToken||void 0,u.secret=c.secret,u.nonce=c.nonce,u.pendingToken=c.pendingToken||null,u}_getIdTokenResponse(e){const t=this.buildRequest();return Eo(e,t)}_linkToIdToken(e,t){const s=this.buildRequest();return s.idToken=t,Eo(e,s)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Eo(e,t)}buildRequest(){const e={requestUri:wN,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Rc(t)}return e}}function AN(i){switch(i){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function SN(i){const e=Zl(Jl(i)).link,t=e?Zl(Jl(e)).deep_link_id:null,s=Zl(Jl(i)).deep_link_id;return(s?Zl(Jl(s)).link:null)||s||t||e||i}class pg{constructor(e){const t=Zl(Jl(e)),s=t.apiKey??null,o=t.oobCode??null,c=AN(t.mode??null);Re(s&&o&&c,"argument-error"),this.apiKey=s,this.operation=c,this.code=o,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=SN(e);try{return new pg(t)}catch{return null}}}class Lo{constructor(){this.providerId=Lo.PROVIDER_ID}static credential(e,t){return gc._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const s=pg.parseLink(t);return Re(s,"argument-error"),gc._fromEmailAndCode(e,s.code,s.tenantId)}}Lo.PROVIDER_ID="password";Lo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Lo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class OE{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Mc extends OE{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class us extends Mc{constructor(){super("facebook.com")}static credential(e){return va._fromParams({providerId:us.PROVIDER_ID,signInMethod:us.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return us.credentialFromTaggedObject(e)}static credentialFromError(e){return us.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return us.credential(e.oauthAccessToken)}catch{return null}}}us.FACEBOOK_SIGN_IN_METHOD="facebook.com";us.PROVIDER_ID="facebook.com";class hs extends Mc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return va._fromParams({providerId:hs.PROVIDER_ID,signInMethod:hs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return hs.credentialFromTaggedObject(e)}static credentialFromError(e){return hs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s}=e;if(!t&&!s)return null;try{return hs.credential(t,s)}catch{return null}}}hs.GOOGLE_SIGN_IN_METHOD="google.com";hs.PROVIDER_ID="google.com";class fs extends Mc{constructor(){super("github.com")}static credential(e){return va._fromParams({providerId:fs.PROVIDER_ID,signInMethod:fs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return fs.credentialFromTaggedObject(e)}static credentialFromError(e){return fs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return fs.credential(e.oauthAccessToken)}catch{return null}}}fs.GITHUB_SIGN_IN_METHOD="github.com";fs.PROVIDER_ID="github.com";class ds extends Mc{constructor(){super("twitter.com")}static credential(e,t){return va._fromParams({providerId:ds.PROVIDER_ID,signInMethod:ds.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ds.credentialFromTaggedObject(e)}static credentialFromError(e){return ds.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:s}=e;if(!t||!s)return null;try{return ds.credential(t,s)}catch{return null}}}ds.TWITTER_SIGN_IN_METHOD="twitter.com";ds.PROVIDER_ID="twitter.com";async function NN(i,e){return Dc(i,"POST","/v1/accounts:signUp",Ar(i,e))}class ba{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,s,o=!1){const c=await ci._fromIdTokenResponse(e,s,o),u=ob(s);return new ba({user:c,providerId:u,_tokenResponse:s,operationType:t})}static async _forOperation(e,t,s){await e._updateTokensIfNecessary(s,!0);const o=ob(s);return new ba({user:e,providerId:o,_tokenResponse:s,operationType:t})}}function ob(i){return i.providerId?i.providerId:"phoneNumber"in i?"phone":null}class Jh extends wr{constructor(e,t,s,o){super(t.code,t.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,Jh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,t,s,o){return new Jh(e,t,s,o)}}function kE(i,e,t,s){return(e==="reauthenticate"?t._getReauthenticationResolver(i):t._getIdTokenResponse(i)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?Jh._fromErrorAndOperation(i,c,e,s):c})}async function CN(i,e,t=!1){const s=await pc(i,e._linkToIdToken(i.auth,await i.getIdToken()),t);return ba._forOperation(i,"link",s)}async function RN(i,e,t=!1){const{auth:s}=i;if(Yn(s.app))return Promise.reject(yr(s));const o="reauthenticate";try{const c=await pc(i,kE(s,o,e,i),t);Re(c.idToken,s,"internal-error");const u=fg(c.idToken);Re(u,s,"internal-error");const{sub:m}=u;return Re(i.uid===m,s,"user-mismatch"),ba._forOperation(i,o,c)}catch(c){throw c?.code==="auth/user-not-found"&&hi(s,"user-mismatch"),c}}async function VE(i,e,t=!1){if(Yn(i.app))return Promise.reject(yr(i));const s="signIn",o=await kE(i,s,e),c=await ba._fromIdTokenResponse(i,s,o);return t||await i._updateCurrentUser(c.user),c}async function IN(i,e){return VE(Ns(i),e)}async function jE(i){const e=Ns(i);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function DN(i,e,t){const s=Ns(i);await Zh(s,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",xN)}async function MN(i,e,t){if(Yn(i.app))return Promise.reject(yr(i));const s=Ns(i),u=await Zh(s,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",NN).catch(p=>{throw p.code==="auth/password-does-not-meet-requirements"&&jE(i),p}),m=await ba._fromIdTokenResponse(s,"signIn",u);return await s._updateCurrentUser(m.user),m}function ON(i,e,t){return Yn(i.app)?Promise.reject(yr(i)):IN(Ut(i),Lo.credential(e,t)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&jE(i),s})}function kN(i,e,t,s){return Ut(i).onIdTokenChanged(e,t,s)}function VN(i,e,t){return Ut(i).beforeAuthStateChanged(e,t)}function jN(i,e,t,s){return Ut(i).onAuthStateChanged(e,t,s)}function LN(i){return Ut(i).signOut()}const ef="__sak";class LE{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(ef,"1"),this.storage.removeItem(ef),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const PN=1e3,UN=10;class PE extends LE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=CE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const s=this.storage.getItem(t),o=this.localCache[t];s!==o&&e(t,o,s)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((u,m,p)=>{this.notifyListeners(u,p)});return}const s=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const u=this.storage.getItem(s);!t&&this.localCache[s]===u||this.notifyListeners(s,u)},c=this.storage.getItem(s);J2()&&c!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,UN):o()}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:s}),!0)})},PN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}PE.type="LOCAL";const zN=PE;class UE extends LE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}UE.type="SESSION";const zE=UE;function BN(i){return Promise.all(i.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class wf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const s=new wf(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:s,eventType:o,data:c}=t.data,u=this.handlersMap[o];if(!u?.size)return;t.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const m=Array.from(u).map(async g=>g(t.origin,c)),p=await BN(m);t.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:p})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}wf.receivers=[];function gg(i="",e=10){let t="";for(let s=0;s<e;s++)t+=Math.floor(Math.random()*10);return i+t}class qN{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let c,u;return new Promise((m,p)=>{const g=gg("",20);o.port1.start();const v=setTimeout(()=>{p(new Error("unsupported_event"))},s);u={messageChannel:o,onMessage(x){const T=x;if(T.data.eventId===g)switch(T.data.status){case"ack":clearTimeout(v),c=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),m(T.data.response);break;default:clearTimeout(v),clearTimeout(c),p(new Error("invalid_response"));break}}},this.handlers.add(u),o.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:g,data:t},[o.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}function Pi(){return window}function FN(i){Pi().location.href=i}function BE(){return typeof Pi().WorkerGlobalScope<"u"&&typeof Pi().importScripts=="function"}async function HN(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function GN(){return navigator?.serviceWorker?.controller||null}function $N(){return BE()?self:null}const qE="firebaseLocalStorageDb",YN=1,tf="firebaseLocalStorage",FE="fbase_key";class Oc{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Af(i,e){return i.transaction([tf],e?"readwrite":"readonly").objectStore(tf)}function QN(){const i=indexedDB.deleteDatabase(qE);return new Oc(i).toPromise()}function Rp(){const i=indexedDB.open(qE,YN);return new Promise((e,t)=>{i.addEventListener("error",()=>{t(i.error)}),i.addEventListener("upgradeneeded",()=>{const s=i.result;try{s.createObjectStore(tf,{keyPath:FE})}catch(o){t(o)}}),i.addEventListener("success",async()=>{const s=i.result;s.objectStoreNames.contains(tf)?e(s):(s.close(),await QN(),e(await Rp()))})})}async function lb(i,e,t){const s=Af(i,!0).put({[FE]:e,value:t});return new Oc(s).toPromise()}async function KN(i,e){const t=Af(i,!1).get(e),s=await new Oc(t).toPromise();return s===void 0?null:s.value}function cb(i,e){const t=Af(i,!0).delete(e);return new Oc(t).toPromise()}const XN=800,WN=3;class HE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Rp(),this.db)}async _withRetries(e){let t=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(t++>WN)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return BE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=wf._getInstance($N()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await HN(),!this.activeServiceWorker)return;this.sender=new qN(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||GN()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Rp();return await lb(e,ef,"1"),await cb(e,ef),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(s=>lb(s,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(s=>KN(s,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>cb(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const c=Af(o,!1).getAll();return new Oc(c).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:c}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(c)&&(this.notifyListeners(o,c),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),XN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}HE.type="LOCAL";const ZN=HE;new Ic(3e4,6e4);function JN(i,e){return e?gr(e):(Re(i._popupRedirectResolver,i,"argument-error"),i._popupRedirectResolver)}class yg extends mg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Eo(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Eo(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Eo(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function eC(i){return VE(i.auth,new yg(i),i.bypassAuthState)}function tC(i){const{auth:e,user:t}=i;return Re(t,e,"internal-error"),RN(t,new yg(i),i.bypassAuthState)}async function nC(i){const{auth:e,user:t}=i;return Re(t,e,"internal-error"),CN(t,new yg(i),i.bypassAuthState)}class GE{constructor(e,t,s,o,c=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:s,postBody:o,tenantId:c,error:u,type:m}=e;if(u){this.reject(u);return}const p={auth:this.auth,requestUri:t,sessionId:s,tenantId:c||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(p))}catch(g){this.reject(g)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return eC;case"linkViaPopup":case"linkViaRedirect":return nC;case"reauthViaPopup":case"reauthViaRedirect":return tC;default:hi(this.auth,"internal-error")}}resolve(e){br(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){br(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const iC=new Ic(2e3,1e4);class _o extends GE{constructor(e,t,s,o,c){super(e,t,o,c),this.provider=s,this.authWindow=null,this.pollId=null,_o.currentPopupAction&&_o.currentPopupAction.cancel(),_o.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Re(e,this.auth,"internal-error"),e}async onExecution(){br(this.filter.length===1,"Popup operations only handle one event");const e=gg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Li(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Li(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,_o.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Li(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,iC.get())};e()}}_o.currentPopupAction=null;const rC="pendingRedirect",Oh=new Map;class sC extends GE{constructor(e,t,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,s),this.eventId=null}async execute(){let e=Oh.get(this.auth._key());if(!e){try{const s=await aC(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(t){e=()=>Promise.reject(t)}Oh.set(this.auth._key(),e)}return this.bypassAuthState||Oh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function aC(i,e){const t=cC(e),s=lC(i);if(!await s._isAvailable())return!1;const o=await s._get(t)==="true";return await s._remove(t),o}function oC(i,e){Oh.set(i._key(),e)}function lC(i){return gr(i._redirectPersistence)}function cC(i){return Mh(rC,i.config.apiKey,i.name)}async function uC(i,e,t=!1){if(Yn(i.app))return Promise.reject(yr(i));const s=Ns(i),o=JN(s,e),u=await new sC(s,o,t).execute();return u&&!t&&(delete u.user._redirectEventId,await s._persistUserIfCurrent(u.user),await s._setRedirectUser(null,e)),u}const hC=600*1e3;class fC{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(t=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!dC(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!$E(e)){const s=e.error.code?.split("auth/")[1]||"internal-error";t.onError(Li(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const s=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=hC&&this.cachedEventUids.clear(),this.cachedEventUids.has(ub(e))}saveEventToCache(e){this.cachedEventUids.add(ub(e)),this.lastProcessedEventTime=Date.now()}}function ub(i){return[i.type,i.eventId,i.sessionId,i.tenantId].filter(e=>e).join("-")}function $E({type:i,error:e}){return i==="unknown"&&e?.code==="auth/no-auth-event"}function dC(i){switch(i.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return $E(i);default:return!1}}async function mC(i,e={}){return Sr(i,"GET","/v1/projects",e)}const pC=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,gC=/^https?/;async function yC(i){if(i.config.emulator)return;const{authorizedDomains:e}=await mC(i);for(const t of e)try{if(_C(t))return}catch{}hi(i,"unauthorized-domain")}function _C(i){const e=Np(),{protocol:t,hostname:s}=new URL(e);if(i.startsWith("chrome-extension://")){const u=new URL(i);return u.hostname===""&&s===""?t==="chrome-extension:"&&i.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&u.hostname===s}if(!gC.test(t))return!1;if(pC.test(i))return s===i;const o=i.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}const vC=new Ic(3e4,6e4);function hb(){const i=Pi().___jsl;if(i?.H){for(const e of Object.keys(i.H))if(i.H[e].r=i.H[e].r||[],i.H[e].L=i.H[e].L||[],i.H[e].r=[...i.H[e].L],i.CP)for(let t=0;t<i.CP.length;t++)i.CP[t]=null}}function bC(i){return new Promise((e,t)=>{function s(){hb(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{hb(),t(Li(i,"network-request-failed"))},timeout:vC.get()})}if(Pi().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Pi().gapi?.load)s();else{const o=lN("iframefcb");return Pi()[o]=()=>{gapi.load?s():t(Li(i,"network-request-failed"))},IE(`${oN()}?onload=${o}`).catch(c=>t(c))}}).catch(e=>{throw kh=null,e})}let kh=null;function xC(i){return kh=kh||bC(i),kh}const EC=new Ic(5e3,15e3),TC="__/auth/iframe",wC="emulator/auth/iframe",AC={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},SC=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function NC(i){const e=i.config;Re(e.authDomain,i,"auth-domain-config-required");const t=e.emulator?hg(e,wC):`https://${i.config.authDomain}/${TC}`,s={apiKey:e.apiKey,appName:i.name,v:jo},o=SC.get(i.config.apiHost);o&&(s.eid=o);const c=i._getFrameworks();return c.length&&(s.fw=c.join(",")),`${t}?${Rc(s).slice(1)}`}async function CC(i){const e=await xC(i),t=Pi().gapi;return Re(t,i,"internal-error"),e.open({where:document.body,url:NC(i),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:AC,dontclear:!0},s=>new Promise(async(o,c)=>{await s.restyle({setHideOnLeave:!1});const u=Li(i,"network-request-failed"),m=Pi().setTimeout(()=>{c(u)},EC.get());function p(){Pi().clearTimeout(m),o(s)}s.ping(p).then(p,()=>{c(u)})}))}const RC={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},IC=500,DC=600,MC="_blank",OC="http://localhost";class fb{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function kC(i,e,t,s=IC,o=DC){const c=Math.max((window.screen.availHeight-o)/2,0).toString(),u=Math.max((window.screen.availWidth-s)/2,0).toString();let m="";const p={...RC,width:s.toString(),height:o.toString(),top:c,left:u},g=rn().toLowerCase();t&&(m=TE(g)?MC:t),xE(g)&&(e=e||OC,p.scrollbars="yes");const v=Object.entries(p).reduce((T,[I,U])=>`${T}${I}=${U},`,"");if(Z2(g)&&m!=="_self")return VC(e||"",m),new fb(null);const x=window.open(e||"",m,v);Re(x,i,"popup-blocked");try{x.focus()}catch{}return new fb(x)}function VC(i,e){const t=document.createElement("a");t.href=i,t.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(s)}const jC="__/auth/handler",LC="emulator/auth/handler",PC=encodeURIComponent("fac");async function db(i,e,t,s,o,c){Re(i.config.authDomain,i,"auth-domain-config-required"),Re(i.config.apiKey,i,"invalid-api-key");const u={apiKey:i.config.apiKey,appName:i.name,authType:t,redirectUrl:s,v:jo,eventId:o};if(e instanceof OE){e.setDefaultLanguage(i.languageCode),u.providerId=e.providerId||"",_S(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,x]of Object.entries({}))u[v]=x}if(e instanceof Mc){const v=e.getScopes().filter(x=>x!=="");v.length>0&&(u.scopes=v.join(","))}i.tenantId&&(u.tid=i.tenantId);const m=u;for(const v of Object.keys(m))m[v]===void 0&&delete m[v];const p=await i._getAppCheckToken(),g=p?`#${PC}=${encodeURIComponent(p)}`:"";return`${UC(i)}?${Rc(m).slice(1)}${g}`}function UC({config:i}){return i.emulator?hg(i,LC):`https://${i.authDomain}/${jC}`}const rp="webStorageSupport";class zC{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=zE,this._completeRedirectFn=uC,this._overrideRedirectResult=oC}async _openPopup(e,t,s,o){br(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const c=await db(e,t,s,Np(),o);return kC(e,c,gg())}async _openRedirect(e,t,s,o){await this._originValidation(e);const c=await db(e,t,s,Np(),o);return FN(c),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:c}=this.eventManagers[t];return o?Promise.resolve(o):(br(c,"If manager is not set, promise should be"),c)}const s=this.initAndGetManager(e);return this.eventManagers[t]={promise:s},s.catch(()=>{delete this.eventManagers[t]}),s}async initAndGetManager(e){const t=await CC(e),s=new fC(e);return t.register("authEvent",o=>(Re(o?.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=t,s}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(rp,{type:rp},o=>{const c=o?.[0]?.[rp];c!==void 0&&t(!!c),hi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=yC(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return CE()||EE()||dg()}}const BC=zC;var mb="@firebase/auth",pb="1.12.0";class qC{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(s=>{e(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Re(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function FC(i){switch(i){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function HC(i){So(new _a("auth",(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),c=e.getProvider("app-check-internal"),{apiKey:u,authDomain:m}=s.options;Re(u&&!u.includes(":"),"invalid-api-key",{appName:s.name});const p={apiKey:u,authDomain:m,clientPlatform:i,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:RE(i)},g=new rN(s,o,c,p);return mN(g,t),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,s)=>{e.getProvider("auth-internal").initialize()})),So(new _a("auth-internal",e=>{const t=Ns(e.getProvider("auth").getImmediate());return(s=>new qC(s))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),ys(mb,pb,FC(i)),ys(mb,pb,"esm2020")}const GC=300,$C=rE("authIdTokenMaxAge")||GC;let gb=null;const YC=i=>async e=>{const t=e&&await e.getIdTokenResult(),s=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(s&&s>$C)return;const o=t?.token;gb!==o&&(gb=o,await fetch(i,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function QC(i=uE()){const e=cg(i,"auth");if(e.isInitialized())return e.getImmediate();const t=dN(i,{popupRedirectResolver:BC,persistence:[ZN,zN,zE]}),s=rE("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(s,location.origin);if(location.origin===c.origin){const u=YC(c.toString());VN(t,u,()=>u(t.currentUser)),kN(t,m=>u(m))}}const o=nE("auth");return o&&pN(t,`http://${o}`),t}function KC(){return document.getElementsByTagName("head")?.[0]??document}sN({loadJS(i){return new Promise((e,t)=>{const s=document.createElement("script");s.setAttribute("src",i),s.onload=e,s.onerror=o=>{const c=Li("internal-error");c.customData=o,t(c)},s.type="text/javascript",s.charset="UTF-8",KC().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});HC("Browser");var yb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var _s,YE;(function(){var i;function e(D,C){function N(){}N.prototype=C.prototype,D.F=C.prototype,D.prototype=new N,D.prototype.constructor=D,D.D=function(O,k,R){for(var w=Array(arguments.length-2),oe=2;oe<arguments.length;oe++)w[oe-2]=arguments[oe];return C.prototype[k].apply(O,w)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,t),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(D,C,N){N||(N=0);const O=Array(16);if(typeof C=="string")for(var k=0;k<16;++k)O[k]=C.charCodeAt(N++)|C.charCodeAt(N++)<<8|C.charCodeAt(N++)<<16|C.charCodeAt(N++)<<24;else for(k=0;k<16;++k)O[k]=C[N++]|C[N++]<<8|C[N++]<<16|C[N++]<<24;C=D.g[0],N=D.g[1],k=D.g[2];let R=D.g[3],w;w=C+(R^N&(k^R))+O[0]+3614090360&4294967295,C=N+(w<<7&4294967295|w>>>25),w=R+(k^C&(N^k))+O[1]+3905402710&4294967295,R=C+(w<<12&4294967295|w>>>20),w=k+(N^R&(C^N))+O[2]+606105819&4294967295,k=R+(w<<17&4294967295|w>>>15),w=N+(C^k&(R^C))+O[3]+3250441966&4294967295,N=k+(w<<22&4294967295|w>>>10),w=C+(R^N&(k^R))+O[4]+4118548399&4294967295,C=N+(w<<7&4294967295|w>>>25),w=R+(k^C&(N^k))+O[5]+1200080426&4294967295,R=C+(w<<12&4294967295|w>>>20),w=k+(N^R&(C^N))+O[6]+2821735955&4294967295,k=R+(w<<17&4294967295|w>>>15),w=N+(C^k&(R^C))+O[7]+4249261313&4294967295,N=k+(w<<22&4294967295|w>>>10),w=C+(R^N&(k^R))+O[8]+1770035416&4294967295,C=N+(w<<7&4294967295|w>>>25),w=R+(k^C&(N^k))+O[9]+2336552879&4294967295,R=C+(w<<12&4294967295|w>>>20),w=k+(N^R&(C^N))+O[10]+4294925233&4294967295,k=R+(w<<17&4294967295|w>>>15),w=N+(C^k&(R^C))+O[11]+2304563134&4294967295,N=k+(w<<22&4294967295|w>>>10),w=C+(R^N&(k^R))+O[12]+1804603682&4294967295,C=N+(w<<7&4294967295|w>>>25),w=R+(k^C&(N^k))+O[13]+4254626195&4294967295,R=C+(w<<12&4294967295|w>>>20),w=k+(N^R&(C^N))+O[14]+2792965006&4294967295,k=R+(w<<17&4294967295|w>>>15),w=N+(C^k&(R^C))+O[15]+1236535329&4294967295,N=k+(w<<22&4294967295|w>>>10),w=C+(k^R&(N^k))+O[1]+4129170786&4294967295,C=N+(w<<5&4294967295|w>>>27),w=R+(N^k&(C^N))+O[6]+3225465664&4294967295,R=C+(w<<9&4294967295|w>>>23),w=k+(C^N&(R^C))+O[11]+643717713&4294967295,k=R+(w<<14&4294967295|w>>>18),w=N+(R^C&(k^R))+O[0]+3921069994&4294967295,N=k+(w<<20&4294967295|w>>>12),w=C+(k^R&(N^k))+O[5]+3593408605&4294967295,C=N+(w<<5&4294967295|w>>>27),w=R+(N^k&(C^N))+O[10]+38016083&4294967295,R=C+(w<<9&4294967295|w>>>23),w=k+(C^N&(R^C))+O[15]+3634488961&4294967295,k=R+(w<<14&4294967295|w>>>18),w=N+(R^C&(k^R))+O[4]+3889429448&4294967295,N=k+(w<<20&4294967295|w>>>12),w=C+(k^R&(N^k))+O[9]+568446438&4294967295,C=N+(w<<5&4294967295|w>>>27),w=R+(N^k&(C^N))+O[14]+3275163606&4294967295,R=C+(w<<9&4294967295|w>>>23),w=k+(C^N&(R^C))+O[3]+4107603335&4294967295,k=R+(w<<14&4294967295|w>>>18),w=N+(R^C&(k^R))+O[8]+1163531501&4294967295,N=k+(w<<20&4294967295|w>>>12),w=C+(k^R&(N^k))+O[13]+2850285829&4294967295,C=N+(w<<5&4294967295|w>>>27),w=R+(N^k&(C^N))+O[2]+4243563512&4294967295,R=C+(w<<9&4294967295|w>>>23),w=k+(C^N&(R^C))+O[7]+1735328473&4294967295,k=R+(w<<14&4294967295|w>>>18),w=N+(R^C&(k^R))+O[12]+2368359562&4294967295,N=k+(w<<20&4294967295|w>>>12),w=C+(N^k^R)+O[5]+4294588738&4294967295,C=N+(w<<4&4294967295|w>>>28),w=R+(C^N^k)+O[8]+2272392833&4294967295,R=C+(w<<11&4294967295|w>>>21),w=k+(R^C^N)+O[11]+1839030562&4294967295,k=R+(w<<16&4294967295|w>>>16),w=N+(k^R^C)+O[14]+4259657740&4294967295,N=k+(w<<23&4294967295|w>>>9),w=C+(N^k^R)+O[1]+2763975236&4294967295,C=N+(w<<4&4294967295|w>>>28),w=R+(C^N^k)+O[4]+1272893353&4294967295,R=C+(w<<11&4294967295|w>>>21),w=k+(R^C^N)+O[7]+4139469664&4294967295,k=R+(w<<16&4294967295|w>>>16),w=N+(k^R^C)+O[10]+3200236656&4294967295,N=k+(w<<23&4294967295|w>>>9),w=C+(N^k^R)+O[13]+681279174&4294967295,C=N+(w<<4&4294967295|w>>>28),w=R+(C^N^k)+O[0]+3936430074&4294967295,R=C+(w<<11&4294967295|w>>>21),w=k+(R^C^N)+O[3]+3572445317&4294967295,k=R+(w<<16&4294967295|w>>>16),w=N+(k^R^C)+O[6]+76029189&4294967295,N=k+(w<<23&4294967295|w>>>9),w=C+(N^k^R)+O[9]+3654602809&4294967295,C=N+(w<<4&4294967295|w>>>28),w=R+(C^N^k)+O[12]+3873151461&4294967295,R=C+(w<<11&4294967295|w>>>21),w=k+(R^C^N)+O[15]+530742520&4294967295,k=R+(w<<16&4294967295|w>>>16),w=N+(k^R^C)+O[2]+3299628645&4294967295,N=k+(w<<23&4294967295|w>>>9),w=C+(k^(N|~R))+O[0]+4096336452&4294967295,C=N+(w<<6&4294967295|w>>>26),w=R+(N^(C|~k))+O[7]+1126891415&4294967295,R=C+(w<<10&4294967295|w>>>22),w=k+(C^(R|~N))+O[14]+2878612391&4294967295,k=R+(w<<15&4294967295|w>>>17),w=N+(R^(k|~C))+O[5]+4237533241&4294967295,N=k+(w<<21&4294967295|w>>>11),w=C+(k^(N|~R))+O[12]+1700485571&4294967295,C=N+(w<<6&4294967295|w>>>26),w=R+(N^(C|~k))+O[3]+2399980690&4294967295,R=C+(w<<10&4294967295|w>>>22),w=k+(C^(R|~N))+O[10]+4293915773&4294967295,k=R+(w<<15&4294967295|w>>>17),w=N+(R^(k|~C))+O[1]+2240044497&4294967295,N=k+(w<<21&4294967295|w>>>11),w=C+(k^(N|~R))+O[8]+1873313359&4294967295,C=N+(w<<6&4294967295|w>>>26),w=R+(N^(C|~k))+O[15]+4264355552&4294967295,R=C+(w<<10&4294967295|w>>>22),w=k+(C^(R|~N))+O[6]+2734768916&4294967295,k=R+(w<<15&4294967295|w>>>17),w=N+(R^(k|~C))+O[13]+1309151649&4294967295,N=k+(w<<21&4294967295|w>>>11),w=C+(k^(N|~R))+O[4]+4149444226&4294967295,C=N+(w<<6&4294967295|w>>>26),w=R+(N^(C|~k))+O[11]+3174756917&4294967295,R=C+(w<<10&4294967295|w>>>22),w=k+(C^(R|~N))+O[2]+718787259&4294967295,k=R+(w<<15&4294967295|w>>>17),w=N+(R^(k|~C))+O[9]+3951481745&4294967295,D.g[0]=D.g[0]+C&4294967295,D.g[1]=D.g[1]+(k+(w<<21&4294967295|w>>>11))&4294967295,D.g[2]=D.g[2]+k&4294967295,D.g[3]=D.g[3]+R&4294967295}s.prototype.v=function(D,C){C===void 0&&(C=D.length);const N=C-this.blockSize,O=this.C;let k=this.h,R=0;for(;R<C;){if(k==0)for(;R<=N;)o(this,D,R),R+=this.blockSize;if(typeof D=="string"){for(;R<C;)if(O[k++]=D.charCodeAt(R++),k==this.blockSize){o(this,O),k=0;break}}else for(;R<C;)if(O[k++]=D[R++],k==this.blockSize){o(this,O),k=0;break}}this.h=k,this.o+=C},s.prototype.A=function(){var D=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);D[0]=128;for(var C=1;C<D.length-8;++C)D[C]=0;C=this.o*8;for(var N=D.length-8;N<D.length;++N)D[N]=C&255,C/=256;for(this.v(D),D=Array(16),C=0,N=0;N<4;++N)for(let O=0;O<32;O+=8)D[C++]=this.g[N]>>>O&255;return D};function c(D,C){var N=m;return Object.prototype.hasOwnProperty.call(N,D)?N[D]:N[D]=C(D)}function u(D,C){this.h=C;const N=[];let O=!0;for(let k=D.length-1;k>=0;k--){const R=D[k]|0;O&&R==C||(N[k]=R,O=!1)}this.g=N}var m={};function p(D){return-128<=D&&D<128?c(D,function(C){return new u([C|0],C<0?-1:0)}):new u([D|0],D<0?-1:0)}function g(D){if(isNaN(D)||!isFinite(D))return x;if(D<0)return $(g(-D));const C=[];let N=1;for(let O=0;D>=N;O++)C[O]=D/N|0,N*=4294967296;return new u(C,0)}function v(D,C){if(D.length==0)throw Error("number format error: empty string");if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(D.charAt(0)=="-")return $(v(D.substring(1),C));if(D.indexOf("-")>=0)throw Error('number format error: interior "-" character');const N=g(Math.pow(C,8));let O=x;for(let R=0;R<D.length;R+=8){var k=Math.min(8,D.length-R);const w=parseInt(D.substring(R,R+k),C);k<8?(k=g(Math.pow(C,k)),O=O.j(k).add(g(w))):(O=O.j(N),O=O.add(g(w)))}return O}var x=p(0),T=p(1),I=p(16777216);i=u.prototype,i.m=function(){if(q(this))return-$(this).m();let D=0,C=1;for(let N=0;N<this.g.length;N++){const O=this.i(N);D+=(O>=0?O:4294967296+O)*C,C*=4294967296}return D},i.toString=function(D){if(D=D||10,D<2||36<D)throw Error("radix out of range: "+D);if(U(this))return"0";if(q(this))return"-"+$(this).toString(D);const C=g(Math.pow(D,6));var N=this;let O="";for(;;){const k=ie(N,C).g;N=ce(N,k.j(C));let R=((N.g.length>0?N.g[0]:N.h)>>>0).toString(D);if(N=k,U(N))return R+O;for(;R.length<6;)R="0"+R;O=R+O}},i.i=function(D){return D<0?0:D<this.g.length?this.g[D]:this.h};function U(D){if(D.h!=0)return!1;for(let C=0;C<D.g.length;C++)if(D.g[C]!=0)return!1;return!0}function q(D){return D.h==-1}i.l=function(D){return D=ce(this,D),q(D)?-1:U(D)?0:1};function $(D){const C=D.g.length,N=[];for(let O=0;O<C;O++)N[O]=~D.g[O];return new u(N,~D.h).add(T)}i.abs=function(){return q(this)?$(this):this},i.add=function(D){const C=Math.max(this.g.length,D.g.length),N=[];let O=0;for(let k=0;k<=C;k++){let R=O+(this.i(k)&65535)+(D.i(k)&65535),w=(R>>>16)+(this.i(k)>>>16)+(D.i(k)>>>16);O=w>>>16,R&=65535,w&=65535,N[k]=w<<16|R}return new u(N,N[N.length-1]&-2147483648?-1:0)};function ce(D,C){return D.add($(C))}i.j=function(D){if(U(this)||U(D))return x;if(q(this))return q(D)?$(this).j($(D)):$($(this).j(D));if(q(D))return $(this.j($(D)));if(this.l(I)<0&&D.l(I)<0)return g(this.m()*D.m());const C=this.g.length+D.g.length,N=[];for(var O=0;O<2*C;O++)N[O]=0;for(O=0;O<this.g.length;O++)for(let k=0;k<D.g.length;k++){const R=this.i(O)>>>16,w=this.i(O)&65535,oe=D.i(k)>>>16,F=D.i(k)&65535;N[2*O+2*k]+=w*F,G(N,2*O+2*k),N[2*O+2*k+1]+=R*F,G(N,2*O+2*k+1),N[2*O+2*k+1]+=w*oe,G(N,2*O+2*k+1),N[2*O+2*k+2]+=R*oe,G(N,2*O+2*k+2)}for(D=0;D<C;D++)N[D]=N[2*D+1]<<16|N[2*D];for(D=C;D<2*C;D++)N[D]=0;return new u(N,0)};function G(D,C){for(;(D[C]&65535)!=D[C];)D[C+1]+=D[C]>>>16,D[C]&=65535,C++}function te(D,C){this.g=D,this.h=C}function ie(D,C){if(U(C))throw Error("division by zero");if(U(D))return new te(x,x);if(q(D))return C=ie($(D),C),new te($(C.g),$(C.h));if(q(C))return C=ie(D,$(C)),new te($(C.g),C.h);if(D.g.length>30){if(q(D)||q(C))throw Error("slowDivide_ only works with positive integers.");for(var N=T,O=C;O.l(D)<=0;)N=de(N),O=de(O);var k=he(N,1),R=he(O,1);for(O=he(O,2),N=he(N,2);!U(O);){var w=R.add(O);w.l(D)<=0&&(k=k.add(N),R=w),O=he(O,1),N=he(N,1)}return C=ce(D,k.j(C)),new te(k,C)}for(k=x;D.l(C)>=0;){for(N=Math.max(1,Math.floor(D.m()/C.m())),O=Math.ceil(Math.log(N)/Math.LN2),O=O<=48?1:Math.pow(2,O-48),R=g(N),w=R.j(C);q(w)||w.l(D)>0;)N-=O,R=g(N),w=R.j(C);U(R)&&(R=T),k=k.add(R),D=ce(D,w)}return new te(k,D)}i.B=function(D){return ie(this,D).h},i.and=function(D){const C=Math.max(this.g.length,D.g.length),N=[];for(let O=0;O<C;O++)N[O]=this.i(O)&D.i(O);return new u(N,this.h&D.h)},i.or=function(D){const C=Math.max(this.g.length,D.g.length),N=[];for(let O=0;O<C;O++)N[O]=this.i(O)|D.i(O);return new u(N,this.h|D.h)},i.xor=function(D){const C=Math.max(this.g.length,D.g.length),N=[];for(let O=0;O<C;O++)N[O]=this.i(O)^D.i(O);return new u(N,this.h^D.h)};function de(D){const C=D.g.length+1,N=[];for(let O=0;O<C;O++)N[O]=D.i(O)<<1|D.i(O-1)>>>31;return new u(N,D.h)}function he(D,C){const N=C>>5;C%=32;const O=D.g.length-N,k=[];for(let R=0;R<O;R++)k[R]=C>0?D.i(R+N)>>>C|D.i(R+N+1)<<32-C:D.i(R+N);return new u(k,D.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,YE=s,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.B,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=g,u.fromString=v,_s=u}).apply(typeof yb<"u"?yb:typeof self<"u"?self:typeof window<"u"?window:{});var vh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var QE,ec,KE,Vh,Ip,XE,WE,ZE;(function(){var i,e=Object.defineProperty;function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof vh=="object"&&vh];for(var _=0;_<h.length;++_){var E=h[_];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var s=t(this);function o(h,_){if(_)e:{var E=s;h=h.split(".");for(var S=0;S<h.length-1;S++){var H=h[S];if(!(H in E))break e;E=E[H]}h=h[h.length-1],S=E[h],_=_(S),_!=S&&_!=null&&e(E,h,{configurable:!0,writable:!0,value:_})}}o("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(h){return h||function(_){var E=[],S;for(S in _)Object.prototype.hasOwnProperty.call(_,S)&&E.push([S,_[S]]);return E}});var c=c||{},u=this||self;function m(h){var _=typeof h;return _=="object"&&h!=null||_=="function"}function p(h,_,E){return h.call.apply(h.bind,arguments)}function g(h,_,E){return g=p,g.apply(null,arguments)}function v(h,_){var E=Array.prototype.slice.call(arguments,1);return function(){var S=E.slice();return S.push.apply(S,arguments),h.apply(this,S)}}function x(h,_){function E(){}E.prototype=_.prototype,h.Z=_.prototype,h.prototype=new E,h.prototype.constructor=h,h.Ob=function(S,H,J){for(var pe=Array(arguments.length-2),Ve=2;Ve<arguments.length;Ve++)pe[Ve-2]=arguments[Ve];return _.prototype[H].apply(S,pe)}}var T=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function I(h){const _=h.length;if(_>0){const E=Array(_);for(let S=0;S<_;S++)E[S]=h[S];return E}return[]}function U(h,_){for(let S=1;S<arguments.length;S++){const H=arguments[S];var E=typeof H;if(E=E!="object"?E:H?Array.isArray(H)?"array":E:"null",E=="array"||E=="object"&&typeof H.length=="number"){E=h.length||0;const J=H.length||0;h.length=E+J;for(let pe=0;pe<J;pe++)h[E+pe]=H[pe]}else h.push(H)}}class q{constructor(_,E){this.i=_,this.j=E,this.h=0,this.g=null}get(){let _;return this.h>0?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function $(h){u.setTimeout(()=>{throw h},0)}function ce(){var h=D;let _=null;return h.g&&(_=h.g,h.g=h.g.next,h.g||(h.h=null),_.next=null),_}class G{constructor(){this.h=this.g=null}add(_,E){const S=te.get();S.set(_,E),this.h?this.h.next=S:this.g=S,this.h=S}}var te=new q(()=>new ie,h=>h.reset());class ie{constructor(){this.next=this.g=this.h=null}set(_,E){this.h=_,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let de,he=!1,D=new G,C=()=>{const h=Promise.resolve(void 0);de=()=>{h.then(N)}};function N(){for(var h;h=ce();){try{h.h.call(h.g)}catch(E){$(E)}var _=te;_.j(h),_.h<100&&(_.h++,h.next=_.g,_.g=h)}he=!1}function O(){this.u=this.u,this.C=this.C}O.prototype.u=!1,O.prototype.dispose=function(){this.u||(this.u=!0,this.N())},O.prototype[Symbol.dispose]=function(){this.dispose()},O.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function k(h,_){this.type=h,this.g=this.target=_,this.defaultPrevented=!1}k.prototype.h=function(){this.defaultPrevented=!0};var R=(function(){if(!u.addEventListener||!Object.defineProperty)return!1;var h=!1,_=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const E=()=>{};u.addEventListener("test",E,_),u.removeEventListener("test",E,_)}catch{}return h})();function w(h){return/^[\s\xa0]*$/.test(h)}function oe(h,_){k.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,_)}x(oe,k),oe.prototype.init=function(h,_){const E=this.type=h.type,S=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=_,_=h.relatedTarget,_||(E=="mouseover"?_=h.fromElement:E=="mouseout"&&(_=h.toElement)),this.relatedTarget=_,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&oe.Z.h.call(this)},oe.prototype.h=function(){oe.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var F="closure_listenable_"+(Math.random()*1e6|0),j=0;function z(h,_,E,S,H){this.listener=h,this.proxy=null,this.src=_,this.type=E,this.capture=!!S,this.ha=H,this.key=++j,this.da=this.fa=!1}function W(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function L(h,_,E){for(const S in h)_.call(E,h[S],S,h)}function K(h,_){for(const E in h)_.call(void 0,h[E],E,h)}function M(h){const _={};for(const E in h)_[E]=h[E];return _}const X="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function fe(h,_){let E,S;for(let H=1;H<arguments.length;H++){S=arguments[H];for(E in S)h[E]=S[E];for(let J=0;J<X.length;J++)E=X[J],Object.prototype.hasOwnProperty.call(S,E)&&(h[E]=S[E])}}function me(h){this.src=h,this.g={},this.h=0}me.prototype.add=function(h,_,E,S,H){const J=h.toString();h=this.g[J],h||(h=this.g[J]=[],this.h++);const pe=se(h,_,S,H);return pe>-1?(_=h[pe],E||(_.fa=!1)):(_=new z(_,this.src,J,!!S,H),_.fa=E,h.push(_)),_};function ye(h,_){const E=_.type;if(E in h.g){var S=h.g[E],H=Array.prototype.indexOf.call(S,_,void 0),J;(J=H>=0)&&Array.prototype.splice.call(S,H,1),J&&(W(_),h.g[E].length==0&&(delete h.g[E],h.h--))}}function se(h,_,E,S){for(let H=0;H<h.length;++H){const J=h[H];if(!J.da&&J.listener==_&&J.capture==!!E&&J.ha==S)return H}return-1}var ge="closure_lm_"+(Math.random()*1e6|0),Se={};function Ne(h,_,E,S,H){if(Array.isArray(_)){for(let J=0;J<_.length;J++)Ne(h,_[J],E,S,H);return null}return E=Cr(E),h&&h[F]?h.J(_,E,m(S)?!!S.capture:!1,H):at(h,_,E,!1,S,H)}function at(h,_,E,S,H,J){if(!_)throw Error("Invalid event type");const pe=m(H)?!!H.capture:!!H;let Ve=mi(h);if(Ve||(h[ge]=Ve=new me(h)),E=Ve.add(_,E,S,pe,J),E.proxy)return E;if(S=Me(),E.proxy=S,S.src=h,S.listener=E,h.addEventListener)R||(H=pe),H===void 0&&(H=!1),h.addEventListener(_.toString(),S,H);else if(h.attachEvent)h.attachEvent(jt(_.toString()),S);else if(h.addListener&&h.removeListener)h.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return E}function Me(){function h(E){return _.call(h.src,h.listener,E)}const _=Kn;return h}function tt(h,_,E,S,H){if(Array.isArray(_))for(var J=0;J<_.length;J++)tt(h,_[J],E,S,H);else S=m(S)?!!S.capture:!!S,E=Cr(E),h&&h[F]?(h=h.i,J=String(_).toString(),J in h.g&&(_=h.g[J],E=se(_,E,S,H),E>-1&&(W(_[E]),Array.prototype.splice.call(_,E,1),_.length==0&&(delete h.g[J],h.h--)))):h&&(h=mi(h))&&(_=h.g[_.toString()],h=-1,_&&(h=se(_,E,S,H)),(E=h>-1?_[h]:null)&&sn(E))}function sn(h){if(typeof h!="number"&&h&&!h.da){var _=h.src;if(_&&_[F])ye(_.i,h);else{var E=h.type,S=h.proxy;_.removeEventListener?_.removeEventListener(E,S,h.capture):_.detachEvent?_.detachEvent(jt(E),S):_.addListener&&_.removeListener&&_.removeListener(S),(E=mi(_))?(ye(E,h),E.h==0&&(E.src=null,_[ge]=null)):W(h)}}}function jt(h){return h in Se?Se[h]:Se[h]="on"+h}function Kn(h,_){if(h.da)h=!0;else{_=new oe(_,this);const E=h.listener,S=h.ha||h.src;h.fa&&sn(h),h=E.call(S,_)}return h}function mi(h){return h=h[ge],h instanceof me?h:null}var Ds="__closure_events_fn_"+(Math.random()*1e9>>>0);function Cr(h){return typeof h=="function"?h:(h[Ds]||(h[Ds]=function(_){return h.handleEvent(_)}),h[Ds])}function pt(){O.call(this),this.i=new me(this),this.M=this,this.G=null}x(pt,O),pt.prototype[F]=!0,pt.prototype.removeEventListener=function(h,_,E,S){tt(this,h,_,E,S)};function gt(h,_){var E,S=h.G;if(S)for(E=[];S;S=S.G)E.push(S);if(h=h.M,S=_.type||_,typeof _=="string")_=new k(_,h);else if(_ instanceof k)_.target=_.target||h;else{var H=_;_=new k(S,h),fe(_,H)}H=!0;let J,pe;if(E)for(pe=E.length-1;pe>=0;pe--)J=_.g=E[pe],H=Rr(J,S,!0,_)&&H;if(J=_.g=h,H=Rr(J,S,!0,_)&&H,H=Rr(J,S,!1,_)&&H,E)for(pe=0;pe<E.length;pe++)J=_.g=E[pe],H=Rr(J,S,!1,_)&&H}pt.prototype.N=function(){if(pt.Z.N.call(this),this.i){var h=this.i;for(const _ in h.g){const E=h.g[_];for(let S=0;S<E.length;S++)W(E[S]);delete h.g[_],h.h--}}this.G=null},pt.prototype.J=function(h,_,E,S){return this.i.add(String(h),_,!1,E,S)},pt.prototype.K=function(h,_,E,S){return this.i.add(String(h),_,!0,E,S)};function Rr(h,_,E,S){if(_=h.i.g[String(_)],!_)return!0;_=_.concat();let H=!0;for(let J=0;J<_.length;++J){const pe=_[J];if(pe&&!pe.da&&pe.capture==E){const Ve=pe.listener,xt=pe.ha||pe.src;pe.fa&&ye(h.i,pe),H=Ve.call(xt,S)!==!1&&H}}return H&&!S.defaultPrevented}function Qf(h,_){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=g(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(_)>2147483647?-1:u.setTimeout(h,_||0)}function Fc(h){h.g=Qf(()=>{h.g=null,h.i&&(h.i=!1,Fc(h))},h.l);const _=h.h;h.h=null,h.m.apply(null,_)}class an extends O{constructor(_,E){super(),this.m=_,this.l=E,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:Fc(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ms(h){O.call(this),this.h=h,this.g={}}x(Ms,O);var Ho=[];function Go(h){L(h.g,function(_,E){this.g.hasOwnProperty(E)&&sn(_)},h),h.g={}}Ms.prototype.N=function(){Ms.Z.N.call(this),Go(this)},Ms.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ir=u.JSON.stringify,Kf=u.JSON.parse,Hc=class{stringify(h){return u.JSON.stringify(h,void 0)}parse(h){return u.JSON.parse(h,void 0)}};function Gc(){}function $c(){}var Xn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Ht(){k.call(this,"d")}x(Ht,k);function kn(){k.call(this,"c")}x(kn,k);var bt={},Yc=null;function Sa(){return Yc=Yc||new pt}bt.Ia="serverreachability";function Qc(h){k.call(this,bt.Ia,h)}x(Qc,k);function pi(h){const _=Sa();gt(_,new Qc(_))}bt.STAT_EVENT="statevent";function Os(h,_){k.call(this,bt.STAT_EVENT,h),this.stat=_}x(Os,k);function At(h){const _=Sa();gt(_,new Os(_,h))}bt.Ja="timingevent";function gi(h,_){k.call(this,bt.Ja,h),this.size=_}x(gi,k);function yi(h,_){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){h()},_)}function Wn(){this.g=!0}Wn.prototype.ua=function(){this.g=!1};function Xf(h,_,E,S,H,J){h.info(function(){if(h.g)if(J){var pe="",Ve=J.split("&");for(let Ke=0;Ke<Ve.length;Ke++){var xt=Ve[Ke].split("=");if(xt.length>1){const ft=xt[0];xt=xt[1];const Pn=ft.split("_");pe=Pn.length>=2&&Pn[1]=="type"?pe+(ft+"="+xt+"&"):pe+(ft+"=redacted&")}}}else pe=null;else pe=J;return"XMLHTTP REQ ("+S+") [attempt "+H+"]: "+_+`
`+E+`
`+pe})}function Kc(h,_,E,S,H,J,pe){h.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+H+"]: "+_+`
`+E+`
`+J+" "+pe})}function _i(h,_,E,S){h.info(function(){return"XMLHTTP TEXT ("+_+"): "+Wf(h,E)+(S?" "+S:"")})}function ks(h,_){h.info(function(){return"TIMEOUT: "+_})}Wn.prototype.info=function(){};function Wf(h,_){if(!h.g)return _;if(!_)return null;try{const J=JSON.parse(_);if(J){for(h=0;h<J.length;h++)if(Array.isArray(J[h])){var E=J[h];if(!(E.length<2)){var S=E[1];if(Array.isArray(S)&&!(S.length<1)){var H=S[0];if(H!="noop"&&H!="stop"&&H!="close")for(let pe=1;pe<S.length;pe++)S[pe]=""}}}}return Ir(J)}catch{return _}}var Vs={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},$o={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Yo;function js(){}x(js,Gc),js.prototype.g=function(){return new XMLHttpRequest},Yo=new js;function Yi(h){return encodeURIComponent(String(h))}function Xc(h){var _=1;h=h.split(":");const E=[];for(;_>0&&h.length;)E.push(h.shift()),_--;return h.length&&E.push(h.join(":")),E}function Zn(h,_,E,S){this.j=h,this.i=_,this.l=E,this.S=S||1,this.V=new Ms(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Jn}function Jn(){this.i=null,this.g="",this.h=!1}var St={},zt={};function vi(h,_,E){h.M=1,h.A=Ls(Ct(_)),h.u=E,h.R=!0,Na(h,null)}function Na(h,_){h.F=Date.now(),bi(h),h.B=Ct(h.A);var E=h.B,S=h.S;Array.isArray(S)||(S=[String(S)]),Da(E.i,"t",S),h.C=0,E=h.j.L,h.h=new Jn,h.g=hu(h.j,E?_:null,!h.u),h.P>0&&(h.O=new an(g(h.Y,h,h.g),h.P)),_=h.V,E=h.g,S=h.ba;var H="readystatechange";Array.isArray(H)||(H&&(Ho[0]=H.toString()),H=Ho);for(let J=0;J<H.length;J++){const pe=Ne(E,H[J],S||_.handleEvent,!1,_.h||_);if(!pe)break;_.g[pe.key]=pe}_=h.J?M(h.J):{},h.u?(h.v||(h.v="POST"),_["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,_)):(h.v="GET",h.g.ea(h.B,h.v,null,_)),pi(),Xf(h.i,h.v,h.B,h.l,h.S,h.u)}Zn.prototype.ba=function(h){h=h.target;const _=this.O;_&&ni(h)==3?_.j():this.Y(h)},Zn.prototype.Y=function(h){try{if(h==this.g)e:{const Ve=ni(this.g),xt=this.g.ya(),Ke=this.g.ca();if(!(Ve<3)&&(Ve!=3||this.g&&(this.h.h||this.g.la()||Gt(this.g)))){this.K||Ve!=4||xt==7||(xt==8||Ke<=0?pi(3):pi(2)),xi(this);var _=this.g.ca();this.X=_;var E=Zf(this);if(this.o=_==200,Kc(this.i,this.v,this.B,this.l,this.S,Ve,_),this.o){if(this.U&&!this.L){t:{if(this.g){var S,H=this.g;if((S=H.g?H.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(S)){var J=S;break t}}J=null}if(h=J)_i(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ei(this,h);else{this.o=!1,this.m=3,At(12),bn(this),Vn(this);break e}}if(this.R){h=!0;let ft;for(;!this.K&&this.C<E.length;)if(ft=Zc(this,E),ft==zt){Ve==4&&(this.m=4,At(14),h=!1),_i(this.i,this.l,null,"[Incomplete Response]");break}else if(ft==St){this.m=4,At(15),_i(this.i,this.l,E,"[Invalid Chunk]"),h=!1;break}else _i(this.i,this.l,ft,null),Ei(this,ft);if(Wc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ve!=4||E.length!=0||this.h.h||(this.m=1,At(16),h=!1),this.o=this.o&&h,!h)_i(this.i,this.l,E,"[Invalid Chunked Response]"),bn(this),Vn(this);else if(E.length>0&&!this.W){this.W=!0;var pe=this.j;pe.g==this&&pe.aa&&!pe.P&&(pe.j.info("Great, no buffering proxy detected. Bytes received: "+E.length),ll(pe),pe.P=!0,At(11))}}else _i(this.i,this.l,E,null),Ei(this,E);Ve==4&&bn(this),this.o&&!this.K&&(Ve==4?ou(this.j,this):(this.o=!1,bi(this)))}else Ki(this.g),_==400&&E.indexOf("Unknown SID")>0?(this.m=3,At(12)):(this.m=0,At(13)),bn(this),Vn(this)}}}catch{}finally{}};function Zf(h){if(!Wc(h))return h.g.la();const _=Gt(h.g);if(_==="")return"";let E="";const S=_.length,H=ni(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return bn(h),Vn(h),"";h.h.i=new u.TextDecoder}for(let J=0;J<S;J++)h.h.h=!0,E+=h.h.i.decode(_[J],{stream:!(H&&J==S-1)});return _.length=0,h.h.g+=E,h.C=0,h.h.g}function Wc(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function Zc(h,_){var E=h.C,S=_.indexOf(`
`,E);return S==-1?zt:(E=Number(_.substring(E,S)),isNaN(E)?St:(S+=1,S+E>_.length?zt:(_=_.slice(S,S+E),h.C=S+E,_)))}Zn.prototype.cancel=function(){this.K=!0,bn(this)};function bi(h){h.T=Date.now()+h.H,Ca(h,h.H)}function Ca(h,_){if(h.D!=null)throw Error("WatchDog timer not null");h.D=yi(g(h.aa,h),_)}function xi(h){h.D&&(u.clearTimeout(h.D),h.D=null)}Zn.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(ks(this.i,this.B),this.M!=2&&(pi(),At(17)),bn(this),this.m=2,Vn(this)):Ca(this,this.T-h)};function Vn(h){h.j.I==0||h.K||ou(h.j,h)}function bn(h){xi(h);var _=h.O;_&&typeof _.dispose=="function"&&_.dispose(),h.O=null,Go(h.V),h.g&&(_=h.g,h.g=null,_.abort(),_.dispose())}function Ei(h,_){try{var E=h.j;if(E.I!=0&&(E.g==h||wi(E.h,h))){if(!h.L&&wi(E.h,h)&&E.I==3){try{var S=E.Ba.g.parse(_)}catch{S=null}if(Array.isArray(S)&&S.length==3){var H=S;if(H[0]==0){e:if(!E.v){if(E.g)if(E.g.F+3e3<h.F)ja(E),Pr(E);else break e;Hs(E),At(18)}}else E.xa=H[1],0<E.xa-E.K&&H[2]<37500&&E.F&&E.A==0&&!E.C&&(E.C=yi(g(E.Va,E),6e3));Ti(E.h)<=1&&E.ta&&(E.ta=void 0)}else Ii(E,11)}else if((h.L||E.g==h)&&ja(E),!w(_))for(H=E.Ba.g.parse(_),_=0;_<H.length;_++){let Ke=H[_];const ft=Ke[0];if(!(ft<=E.K))if(E.K=ft,Ke=Ke[1],E.I==2)if(Ke[0]=="c"){E.M=Ke[1],E.ba=Ke[2];const Pn=Ke[3];Pn!=null&&(E.ka=Pn,E.j.info("VER="+E.ka));const Di=Ke[4];Di!=null&&(E.za=Di,E.j.info("SVER="+E.za));const ii=Ke[5];ii!=null&&typeof ii=="number"&&ii>0&&(S=1.5*ii,E.O=S,E.j.info("backChannelRequestTimeoutMs_="+S)),S=E;const ri=h.g;if(ri){const Gs=ri.g?ri.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Gs){var J=S.h;J.g||Gs.indexOf("spdy")==-1&&Gs.indexOf("quic")==-1&&Gs.indexOf("h2")==-1||(J.j=J.l,J.g=new Set,J.h&&(Xo(J,J.h),J.h=null))}if(S.G){const La=ri.g?ri.g.getResponseHeader("X-HTTP-Session-Id"):null;La&&(S.wa=La,Ze(S.J,S.G,La))}}E.I=3,E.l&&E.l.ra(),E.aa&&(E.T=Date.now()-h.F,E.j.info("Handshake RTT: "+E.T+"ms")),S=E;var pe=h;if(S.na=uu(S,S.L?S.ba:null,S.W),pe.L){Wo(S.h,pe);var Ve=pe,xt=S.O;xt&&(Ve.H=xt),Ve.D&&(xi(Ve),bi(Ve)),S.g=pe}else su(S);E.i.length>0&&Ri(E)}else Ke[0]!="stop"&&Ke[0]!="close"||Ii(E,7);else E.I==3&&(Ke[0]=="stop"||Ke[0]=="close"?Ke[0]=="stop"?Ii(E,7):al(E):Ke[0]!="noop"&&E.l&&E.l.qa(Ke),E.A=0)}}pi(4)}catch{}}var Nt=class{constructor(h,_){this.g=h,this.map=_}};function Qo(h){this.l=h||10,u.PerformanceNavigationTiming?(h=u.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Ko(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Ti(h){return h.h?1:h.g?h.g.size:0}function wi(h,_){return h.h?h.h==_:h.g?h.g.has(_):!1}function Xo(h,_){h.g?h.g.add(_):h.h=_}function Wo(h,_){h.h&&h.h==_?h.h=null:h.g&&h.g.has(_)&&h.g.delete(_)}Qo.prototype.cancel=function(){if(this.i=Zo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function Zo(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let _=h.i;for(const E of h.g.values())_=_.concat(E.G);return _}return I(h.i)}var Jc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ra(h,_){if(h){h=h.split("&");for(let E=0;E<h.length;E++){const S=h[E].indexOf("=");let H,J=null;S>=0?(H=h[E].substring(0,S),J=h[E].substring(S+1)):H=h[E],_(H,J?decodeURIComponent(J.replace(/\+/g," ")):"")}}}function xn(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let _;h instanceof xn?(this.l=h.l,Bt(this,h.j),this.o=h.o,this.g=h.g,Dr(this,h.u),this.h=h.h,Jo(this,iu(h.i)),this.m=h.m):h&&(_=String(h).match(Jc))?(this.l=!1,Bt(this,_[1]||"",!0),this.o=Ai(_[2]||""),this.g=Ai(_[3]||"",!0),Dr(this,_[4]),this.h=Ai(_[5]||"",!0),Jo(this,_[6]||"",!0),this.m=Ai(_[7]||"")):(this.l=!1,this.i=new Or(null,this.l))}xn.prototype.toString=function(){const h=[];var _=this.j;_&&h.push(Ps(_,Ia,!0),":");var E=this.g;return(E||_=="file")&&(h.push("//"),(_=this.o)&&h.push(Ps(_,Ia,!0),"@"),h.push(Yi(E).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.u,E!=null&&h.push(":",String(E))),(E=this.h)&&(this.g&&E.charAt(0)!="/"&&h.push("/"),h.push(Ps(E,E.charAt(0)=="/"?el:eu,!0))),(E=this.i.toString())&&h.push("?",E),(E=this.m)&&h.push("#",Ps(E,tu)),h.join("")},xn.prototype.resolve=function(h){const _=Ct(this);let E=!!h.j;E?Bt(_,h.j):E=!!h.o,E?_.o=h.o:E=!!h.g,E?_.g=h.g:E=h.u!=null;var S=h.h;if(E)Dr(_,h.u);else if(E=!!h.h){if(S.charAt(0)!="/")if(this.g&&!this.h)S="/"+S;else{var H=_.h.lastIndexOf("/");H!=-1&&(S=_.h.slice(0,H+1)+S)}if(H=S,H==".."||H==".")S="";else if(H.indexOf("./")!=-1||H.indexOf("/.")!=-1){S=H.lastIndexOf("/",0)==0,H=H.split("/");const J=[];for(let pe=0;pe<H.length;){const Ve=H[pe++];Ve=="."?S&&pe==H.length&&J.push(""):Ve==".."?((J.length>1||J.length==1&&J[0]!="")&&J.pop(),S&&pe==H.length&&J.push("")):(J.push(Ve),S=!0)}S=J.join("/")}else S=H}return E?_.h=S:E=h.i.toString()!=="",E?Jo(_,iu(h.i)):E=!!h.m,E&&(_.m=h.m),_};function Ct(h){return new xn(h)}function Bt(h,_,E){h.j=E?Ai(_,!0):_,h.j&&(h.j=h.j.replace(/:$/,""))}function Dr(h,_){if(_){if(_=Number(_),isNaN(_)||_<0)throw Error("Bad port number "+_);h.u=_}else h.u=null}function Jo(h,_,E){_ instanceof Or?(h.i=_,Ma(h.i,h.l)):(E||(_=Ps(_,Mr)),h.i=new Or(_,h.l))}function Ze(h,_,E){h.i.set(_,E)}function Ls(h){return Ze(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function Ai(h,_){return h?_?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Ps(h,_,E){return typeof h=="string"?(h=encodeURI(h).replace(_,cn),E&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function cn(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Ia=/[#\/\?@]/g,eu=/[#\?:]/g,el=/[#\?]/g,Mr=/[#\?@]/g,tu=/#/g;function Or(h,_){this.h=this.g=null,this.i=h||null,this.j=!!_}function un(h){h.g||(h.g=new Map,h.h=0,h.i&&Ra(h.i,function(_,E){h.add(decodeURIComponent(_.replace(/\+/g," ")),E)}))}i=Or.prototype,i.add=function(h,_){un(this),this.i=null,h=kr(this,h);let E=this.g.get(h);return E||this.g.set(h,E=[]),E.push(_),this.h+=1,this};function nu(h,_){un(h),_=kr(h,_),h.g.has(_)&&(h.i=null,h.h-=h.g.get(_).length,h.g.delete(_))}function tl(h,_){return un(h),_=kr(h,_),h.g.has(_)}i.forEach=function(h,_){un(this),this.g.forEach(function(E,S){E.forEach(function(H){h.call(_,H,S,this)},this)},this)};function nl(h,_){un(h);let E=[];if(typeof _=="string")tl(h,_)&&(E=E.concat(h.g.get(kr(h,_))));else for(h=Array.from(h.g.values()),_=0;_<h.length;_++)E=E.concat(h[_]);return E}i.set=function(h,_){return un(this),this.i=null,h=kr(this,h),tl(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[_]),this.h+=1,this},i.get=function(h,_){return h?(h=nl(this,h),h.length>0?String(h[0]):_):_};function Da(h,_,E){nu(h,_),E.length>0&&(h.i=null,h.g.set(kr(h,_),I(E)),h.h+=E.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],_=Array.from(this.g.keys());for(let S=0;S<_.length;S++){var E=_[S];const H=Yi(E);E=nl(this,E);for(let J=0;J<E.length;J++){let pe=H;E[J]!==""&&(pe+="="+Yi(E[J])),h.push(pe)}}return this.i=h.join("&")};function iu(h){const _=new Or;return _.i=h.i,h.g&&(_.g=new Map(h.g),_.h=h.h),_}function kr(h,_){return _=String(_),h.j&&(_=_.toLowerCase()),_}function Ma(h,_){_&&!h.j&&(un(h),h.i=null,h.g.forEach(function(E,S){const H=S.toLowerCase();S!=H&&(nu(this,S),Da(this,H,E))},h)),h.j=_}function ei(h,_){const E=new Wn;if(u.Image){const S=new Image;S.onload=v(jn,E,"TestLoadImage: loaded",!0,_,S),S.onerror=v(jn,E,"TestLoadImage: error",!1,_,S),S.onabort=v(jn,E,"TestLoadImage: abort",!1,_,S),S.ontimeout=v(jn,E,"TestLoadImage: timeout",!1,_,S),u.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=h}else _(!1)}function il(h,_){const E=new Wn,S=new AbortController,H=setTimeout(()=>{S.abort(),jn(E,"TestPingServer: timeout",!1,_)},1e4);fetch(h,{signal:S.signal}).then(J=>{clearTimeout(H),J.ok?jn(E,"TestPingServer: ok",!0,_):jn(E,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout(H),jn(E,"TestPingServer: error",!1,_)})}function jn(h,_,E,S,H){try{H&&(H.onload=null,H.onerror=null,H.onabort=null,H.ontimeout=null),S(E)}catch{}}function Vr(){this.g=new Hc}function Si(h){this.i=h.Sb||null,this.h=h.ab||!1}x(Si,Gc),Si.prototype.g=function(){return new Us(this.i,this.h)};function Us(h,_){pt.call(this),this.H=h,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}x(Us,pt),i=Us.prototype,i.open=function(h,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=_,this.readyState=1,ti(this)},i.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const _={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(_.body=h),(this.H||u).fetch(new Request(this.D,_)).then(this.Pa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,jr(this)),this.readyState=0},i.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,ti(this)),this.g&&(this.readyState=3,ti(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Oa(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function Oa(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}i.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var _=h.value?h.value:new Uint8Array(0);(_=this.B.decode(_,{stream:!h.done}))&&(this.response=this.responseText+=_)}h.done?jr(this):ti(this),this.readyState==3&&Oa(this)}},i.Oa=function(h){this.g&&(this.response=this.responseText=h,jr(this))},i.Na=function(h){this.g&&(this.response=h,jr(this))},i.ga=function(){this.g&&jr(this)};function jr(h){h.readyState=4,h.l=null,h.j=null,h.B=null,ti(h)}i.setRequestHeader=function(h,_){this.A.append(h,_)},i.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],_=this.h.entries();for(var E=_.next();!E.done;)E=E.value,h.push(E[0]+": "+E[1]),E=_.next();return h.join(`\r
`)};function ti(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Us.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Ln(h){let _="";return L(h,function(E,S){_+=S,_+=":",_+=E,_+=`\r
`}),_}function zs(h,_,E){e:{for(S in E){var S=!1;break e}S=!0}S||(E=Ln(E),typeof h=="string"?E!=null&&Yi(E):Ze(h,_,E))}function nt(h){pt.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}x(nt,pt);var Ni=/^https?$/i,rl=["POST","PUT"];i=nt.prototype,i.Fa=function(h){this.H=h},i.ea=function(h,_,E,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);_=_?_.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Yo.g(),this.g.onreadystatechange=T(g(this.Ca,this));try{this.B=!0,this.g.open(_,String(h),!0),this.B=!1}catch(J){Bs(this,J);return}if(h=E||"",E=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var H in S)E.set(H,S[H]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const J of S.keys())E.set(J,S.get(J));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(E.keys()).find(J=>J.toLowerCase()=="content-type"),H=u.FormData&&h instanceof u.FormData,!(Array.prototype.indexOf.call(rl,_,void 0)>=0)||S||H||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[J,pe]of E)this.g.setRequestHeader(J,pe);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(J){Bs(this,J)}};function Bs(h,_){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=_,h.o=5,sl(h),Qi(h)}function sl(h){h.A||(h.A=!0,gt(h,"complete"),gt(h,"error"))}i.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,gt(this,"complete"),gt(this,"abort"),Qi(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Qi(this,!0)),nt.Z.N.call(this)},i.Ca=function(){this.u||(this.B||this.v||this.j?qs(this):this.Xa())},i.Xa=function(){qs(this)};function qs(h){if(h.h&&typeof c<"u"){if(h.v&&ni(h)==4)setTimeout(h.Ca.bind(h),0);else if(gt(h,"readystatechange"),ni(h)==4){h.h=!1;try{const J=h.ca();e:switch(J){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var E;if(!(E=_)){var S;if(S=J===0){let pe=String(h.D).match(Jc)[1]||null;!pe&&u.self&&u.self.location&&(pe=u.self.location.protocol.slice(0,-1)),S=!Ni.test(pe?pe.toLowerCase():"")}E=S}if(E)gt(h,"complete"),gt(h,"success");else{h.o=6;try{var H=ni(h)>2?h.g.statusText:""}catch{H=""}h.l=H+" ["+h.ca()+"]",sl(h)}}finally{Qi(h)}}}}function Qi(h,_){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const E=h.g;h.g=null,_||gt(h,"ready");try{E.onreadystatechange=null}catch{}}}i.isActive=function(){return!!this.g};function ni(h){return h.g?h.g.readyState:0}i.ca=function(){try{return ni(this)>2?this.g.status:-1}catch{return-1}},i.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.La=function(h){if(this.g){var _=this.g.responseText;return h&&_.indexOf(h)==0&&(_=_.substring(h.length)),Kf(_)}};function Gt(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Ki(h){const _={};h=(h.g&&ni(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<h.length;S++){if(w(h[S]))continue;var E=Xc(h[S]);const H=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const J=_[H]||[];_[H]=J,J.push(E)}K(_,function(S){return S.join(", ")})}i.ya=function(){return this.o},i.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ci(h,_,E){return E&&E.internalChannelParams&&E.internalChannelParams[h]||_}function Lr(h){this.za=0,this.i=[],this.j=new Wn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ci("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ci("baseRetryDelayMs",5e3,h),this.Za=Ci("retryDelaySeedMs",1e4,h),this.Ta=Ci("forwardChannelMaxRetries",2,h),this.va=Ci("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new Qo(h&&h.concurrentRequestLimit),this.Ba=new Vr,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}i=Lr.prototype,i.ka=8,i.I=1,i.connect=function(h,_,E,S){At(0),this.W=h,this.H=_||{},E&&S!==void 0&&(this.H.OSID=E,this.H.OAID=S),this.F=this.X,this.J=uu(this,null,this.W),Ri(this)};function al(h){if(ka(h),h.I==3){var _=h.V++,E=Ct(h.J);if(Ze(E,"SID",h.M),Ze(E,"RID",_),Ze(E,"TYPE","terminate"),Fs(h,E),_=new Zn(h,h.j,_),_.M=2,_.A=Ls(Ct(E)),E=!1,u.navigator&&u.navigator.sendBeacon)try{E=u.navigator.sendBeacon(_.A.toString(),"")}catch{}!E&&u.Image&&(new Image().src=_.A,E=!0),E||(_.g=hu(_.j,null),_.g.ea(_.A)),_.F=Date.now(),bi(_)}cu(h)}function Pr(h){h.g&&(ll(h),h.g.cancel(),h.g=null)}function ka(h){Pr(h),h.v&&(u.clearTimeout(h.v),h.v=null),ja(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&u.clearTimeout(h.m),h.m=null)}function Ri(h){if(!Ko(h.h)&&!h.m){h.m=!0;var _=h.Ea;de||C(),he||(de(),he=!0),D.add(_,h),h.D=0}}function Va(h,_){return Ti(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=_.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=yi(g(h.Ea,h,_),lu(h,h.D)),h.D++,!0)}i.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const H=new Zn(this,this.j,h);let J=this.o;if(this.U&&(J?(J=M(J),fe(J,this.U)):J=this.U),this.u!==null||this.R||(H.J=J,J=null),this.S)e:{for(var _=0,E=0;E<this.i.length;E++){t:{var S=this.i[E];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(_+=S,_>4096){_=E;break e}if(_===4096||E===this.i.length-1){_=E+1;break e}}_=1e3}else _=1e3;_=ru(this,H,_),E=Ct(this.J),Ze(E,"RID",h),Ze(E,"CVER",22),this.G&&Ze(E,"X-HTTP-Session-Id",this.G),Fs(this,E),J&&(this.R?_="headers="+Yi(Ln(J))+"&"+_:this.u&&zs(E,this.u,J)),Xo(this.h,H),this.Ra&&Ze(E,"TYPE","init"),this.S?(Ze(E,"$req",_),Ze(E,"SID","null"),H.U=!0,vi(H,E,null)):vi(H,E,_),this.I=2}}else this.I==3&&(h?ol(this,h):this.i.length==0||Ko(this.h)||ol(this))};function ol(h,_){var E;_?E=_.l:E=h.V++;const S=Ct(h.J);Ze(S,"SID",h.M),Ze(S,"RID",E),Ze(S,"AID",h.K),Fs(h,S),h.u&&h.o&&zs(S,h.u,h.o),E=new Zn(h,h.j,E,h.D+1),h.u===null&&(E.J=h.o),_&&(h.i=_.G.concat(h.i)),_=ru(h,E,1e3),E.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),Xo(h.h,E),vi(E,S,_)}function Fs(h,_){h.H&&L(h.H,function(E,S){Ze(_,S,E)}),h.l&&L({},function(E,S){Ze(_,S,E)})}function ru(h,_,E){E=Math.min(h.i.length,E);const S=h.l?g(h.l.Ka,h.l,h):null;e:{var H=h.i;let Ve=-1;for(;;){const xt=["count="+E];Ve==-1?E>0?(Ve=H[0].g,xt.push("ofs="+Ve)):Ve=0:xt.push("ofs="+Ve);let Ke=!0;for(let ft=0;ft<E;ft++){var J=H[ft].g;const Pn=H[ft].map;if(J-=Ve,J<0)Ve=Math.max(0,H[ft].g-100),Ke=!1;else try{J="req"+J+"_"||"";try{var pe=Pn instanceof Map?Pn:Object.entries(Pn);for(const[Di,ii]of pe){let ri=ii;m(ii)&&(ri=Ir(ii)),xt.push(J+Di+"="+encodeURIComponent(ri))}}catch(Di){throw xt.push(J+"type="+encodeURIComponent("_badmap")),Di}}catch{S&&S(Pn)}}if(Ke){pe=xt.join("&");break e}}pe=void 0}return h=h.i.splice(0,E),_.G=h,pe}function su(h){if(!h.g&&!h.v){h.Y=1;var _=h.Da;de||C(),he||(de(),he=!0),D.add(_,h),h.A=0}}function Hs(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=yi(g(h.Da,h),lu(h,h.A)),h.A++,!0)}i.Da=function(){if(this.v=null,au(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=yi(g(this.Wa,this),h)}},i.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,At(10),Pr(this),au(this))};function ll(h){h.B!=null&&(u.clearTimeout(h.B),h.B=null)}function au(h){h.g=new Zn(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var _=Ct(h.na);Ze(_,"RID","rpc"),Ze(_,"SID",h.M),Ze(_,"AID",h.K),Ze(_,"CI",h.F?"0":"1"),!h.F&&h.ia&&Ze(_,"TO",h.ia),Ze(_,"TYPE","xmlhttp"),Fs(h,_),h.u&&h.o&&zs(_,h.u,h.o),h.O&&(h.g.H=h.O);var E=h.g;h=h.ba,E.M=1,E.A=Ls(Ct(_)),E.u=null,E.R=!0,Na(E,h)}i.Va=function(){this.C!=null&&(this.C=null,Pr(this),Hs(this),At(19))};function ja(h){h.C!=null&&(u.clearTimeout(h.C),h.C=null)}function ou(h,_){var E=null;if(h.g==_){ja(h),ll(h),h.g=null;var S=2}else if(wi(h.h,_))E=_.G,Wo(h.h,_),S=1;else return;if(h.I!=0){if(_.o)if(S==1){E=_.u?_.u.length:0,_=Date.now()-_.F;var H=h.D;S=Sa(),gt(S,new gi(S,E)),Ri(h)}else su(h);else if(H=_.m,H==3||H==0&&_.X>0||!(S==1&&Va(h,_)||S==2&&Hs(h)))switch(E&&E.length>0&&(_=h.h,_.i=_.i.concat(E)),H){case 1:Ii(h,5);break;case 4:Ii(h,10);break;case 3:Ii(h,6);break;default:Ii(h,2)}}}function lu(h,_){let E=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(E*=2),E*_}function Ii(h,_){if(h.j.info("Error code "+_),_==2){var E=g(h.bb,h),S=h.Ua;const H=!S;S=new xn(S||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||Bt(S,"https"),Ls(S),H?ei(S.toString(),E):il(S.toString(),E)}else At(2);h.I=0,h.l&&h.l.pa(_),cu(h),ka(h)}i.bb=function(h){h?(this.j.info("Successfully pinged google.com"),At(2)):(this.j.info("Failed to ping google.com"),At(1))};function cu(h){if(h.I=0,h.ja=[],h.l){const _=Zo(h.h);(_.length!=0||h.i.length!=0)&&(U(h.ja,_),U(h.ja,h.i),h.h.i.length=0,I(h.i),h.i.length=0),h.l.oa()}}function uu(h,_,E){var S=E instanceof xn?Ct(E):new xn(E);if(S.g!="")_&&(S.g=_+"."+S.g),Dr(S,S.u);else{var H=u.location;S=H.protocol,_=_?_+"."+H.hostname:H.hostname,H=+H.port;const J=new xn(null);S&&Bt(J,S),_&&(J.g=_),H&&Dr(J,H),E&&(J.h=E),S=J}return E=h.G,_=h.wa,E&&_&&Ze(S,E,_),Ze(S,"VER",h.ka),Fs(h,S),S}function hu(h,_,E){if(_&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return _=h.Aa&&!h.ma?new nt(new Si({ab:E})):new nt(h.ma),_.Fa(h.L),_}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function fu(){}i=fu.prototype,i.ra=function(){},i.qa=function(){},i.pa=function(){},i.oa=function(){},i.isActive=function(){return!0},i.Ka=function(){};function Ur(){}Ur.prototype.g=function(h,_){return new on(h,_)};function on(h,_){pt.call(this),this.g=new Lr(_),this.l=h,this.h=_&&_.messageUrlParams||null,h=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(h?h["X-WebChannel-Content-Type"]=_.messageContentType:h={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.sa&&(h?h["X-WebChannel-Client-Profile"]=_.sa:h={"X-WebChannel-Client-Profile":_.sa}),this.g.U=h,(h=_&&_.Qb)&&!w(h)&&(this.g.u=h),this.A=_&&_.supportsCrossDomainXhr||!1,this.v=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!w(_)&&(this.g.G=_,h=this.h,h!==null&&_ in h&&(h=this.h,_ in h&&delete h[_])),this.j=new Xi(this)}x(on,pt),on.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},on.prototype.close=function(){al(this.g)},on.prototype.o=function(h){var _=this.g;if(typeof h=="string"){var E={};E.__data__=h,h=E}else this.v&&(E={},E.__data__=Ir(h),h=E);_.i.push(new Nt(_.Ya++,h)),_.I==3&&Ri(_)},on.prototype.N=function(){this.g.l=null,delete this.j,al(this.g),delete this.g,on.Z.N.call(this)};function du(h){Ht.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var _=h.__sm__;if(_){e:{for(const E in _){h=E;break e}h=void 0}(this.i=h)&&(h=this.i,_=_!==null&&h in _?_[h]:void 0),this.data=_}else this.data=h}x(du,Ht);function mu(){kn.call(this),this.status=1}x(mu,kn);function Xi(h){this.g=h}x(Xi,fu),Xi.prototype.ra=function(){gt(this.g,"a")},Xi.prototype.qa=function(h){gt(this.g,new du(h))},Xi.prototype.pa=function(h){gt(this.g,new mu)},Xi.prototype.oa=function(){gt(this.g,"b")},Ur.prototype.createWebChannel=Ur.prototype.g,on.prototype.send=on.prototype.o,on.prototype.open=on.prototype.m,on.prototype.close=on.prototype.close,ZE=function(){return new Ur},WE=function(){return Sa()},XE=bt,Ip={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Vs.NO_ERROR=0,Vs.TIMEOUT=8,Vs.HTTP_ERROR=6,Vh=Vs,$o.COMPLETE="complete",KE=$o,$c.EventType=Xn,Xn.OPEN="a",Xn.CLOSE="b",Xn.ERROR="c",Xn.MESSAGE="d",pt.prototype.listen=pt.prototype.J,ec=$c,nt.prototype.listenOnce=nt.prototype.K,nt.prototype.getLastError=nt.prototype.Ha,nt.prototype.getLastErrorCode=nt.prototype.ya,nt.prototype.getStatus=nt.prototype.ca,nt.prototype.getResponseJson=nt.prototype.La,nt.prototype.getResponseText=nt.prototype.la,nt.prototype.send=nt.prototype.ea,nt.prototype.setWithCredentials=nt.prototype.Fa,QE=nt}).apply(typeof vh<"u"?vh:typeof self<"u"?self:typeof window<"u"?window:{});const _b="@firebase/firestore",vb="4.9.3";class tn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}tn.UNAUTHENTICATED=new tn(null),tn.GOOGLE_CREDENTIALS=new tn("google-credentials-uid"),tn.FIRST_PARTY=new tn("first-party-uid"),tn.MOCK_USER=new tn("mock-user");let Po="12.7.0";const xa=new og("@firebase/firestore");function mo(){return xa.logLevel}function ve(i,...e){if(xa.logLevel<=qe.DEBUG){const t=e.map(_g);xa.debug(`Firestore (${Po}): ${i}`,...t)}}function xr(i,...e){if(xa.logLevel<=qe.ERROR){const t=e.map(_g);xa.error(`Firestore (${Po}): ${i}`,...t)}}function No(i,...e){if(xa.logLevel<=qe.WARN){const t=e.map(_g);xa.warn(`Firestore (${Po}): ${i}`,...t)}}function _g(i){if(typeof i=="string")return i;try{return(function(t){return JSON.stringify(t)})(i)}catch{return i}}function Ie(i,e,t){let s="Unexpected state";typeof e=="string"?s=e:t=e,JE(i,s,t)}function JE(i,e,t){let s=`FIRESTORE (${Po}) INTERNAL ASSERTION FAILED: ${e} (ID: ${i.toString(16)})`;if(t!==void 0)try{s+=" CONTEXT: "+JSON.stringify(t)}catch{s+=" CONTEXT: "+t}throw xr(s),new Error(s)}function We(i,e,t,s){let o="Unexpected state";typeof t=="string"?o=t:s=t,i||JE(e,o,s)}function ke(i,e){return i}const ae={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class _e extends wr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class _r{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class e1{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class XC{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(tn.UNAUTHENTICATED)))}shutdown(){}}class WC{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class ZC{constructor(e){this.t=e,this.currentUser=tn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){We(this.o===void 0,42304);let s=this.i;const o=p=>this.i!==s?(s=this.i,t(p)):Promise.resolve();let c=new _r;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new _r,e.enqueueRetryable((()=>o(this.currentUser)))};const u=()=>{const p=c;e.enqueueRetryable((async()=>{await p.promise,await o(this.currentUser)}))},m=p=>{ve("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((p=>m(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?m(p):(ve("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new _r)}}),0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((s=>this.i!==e?(ve("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(We(typeof s.accessToken=="string",31837,{l:s}),new e1(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return We(e===null||typeof e=="string",2055,{h:e}),new tn(e)}}class JC{constructor(e,t,s){this.P=e,this.T=t,this.I=s,this.type="FirstParty",this.user=tn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class eR{constructor(e,t,s){this.P=e,this.T=t,this.I=s}getToken(){return Promise.resolve(new JC(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(tn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class bb{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class tR{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Yn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){We(this.o===void 0,3512);const s=c=>{c.error!=null&&ve("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const u=c.token!==this.m;return this.m=c.token,ve("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable((()=>s(c)))};const o=c=>{ve("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((c=>o(c))),setTimeout((()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?o(c):ve("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new bb(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(We(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new bb(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function nR(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<i;s++)t[s]=Math.floor(256*Math.random());return t}class vg{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=nR(40);for(let c=0;c<o.length;++c)s.length<20&&o[c]<t&&(s+=e.charAt(o[c]%62))}return s}}function Fe(i,e){return i<e?-1:i>e?1:0}function Dp(i,e){const t=Math.min(i.length,e.length);for(let s=0;s<t;s++){const o=i.charAt(s),c=e.charAt(s);if(o!==c)return sp(o)===sp(c)?Fe(o,c):sp(o)?1:-1}return Fe(i.length,e.length)}const iR=55296,rR=57343;function sp(i){const e=i.charCodeAt(0);return e>=iR&&e<=rR}function Co(i,e,t){return i.length===e.length&&i.every(((s,o)=>t(s,e[o])))}const xb="__name__";class ji{constructor(e,t,s){t===void 0?t=0:t>e.length&&Ie(637,{offset:t,range:e.length}),s===void 0?s=e.length-t:s>e.length-t&&Ie(1746,{length:s,range:e.length-t}),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return ji.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ji?e.forEach((s=>{t.push(s)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let o=0;o<s;o++){const c=ji.compareSegments(e.get(o),t.get(o));if(c!==0)return c}return Fe(e.length,t.length)}static compareSegments(e,t){const s=ji.isNumericId(e),o=ji.isNumericId(t);return s&&!o?-1:!s&&o?1:s&&o?ji.extractNumericId(e).compare(ji.extractNumericId(t)):Dp(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return _s.fromString(e.substring(4,e.length-2))}}class lt extends ji{construct(e,t,s){return new lt(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new _e(ae.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter((o=>o.length>0)))}return new lt(t)}static emptyPath(){return new lt([])}}const sR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Wt extends ji{construct(e,t,s){return new Wt(e,t,s)}static isValidIdentifier(e){return sR.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Wt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===xb}static keyField(){return new Wt([xb])}static fromServerFormat(e){const t=[];let s="",o=0;const c=()=>{if(s.length===0)throw new _e(ae.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let u=!1;for(;o<e.length;){const m=e[o];if(m==="\\"){if(o+1===e.length)throw new _e(ae.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new _e(ae.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=p,o+=2}else m==="`"?(u=!u,o++):m!=="."||u?(s+=m,o++):(c(),o++)}if(c(),u)throw new _e(ae.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Wt(t)}static emptyPath(){return new Wt([])}}class Ae{constructor(e){this.path=e}static fromPath(e){return new Ae(lt.fromString(e))}static fromName(e){return new Ae(lt.fromString(e).popFirst(5))}static empty(){return new Ae(lt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&lt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return lt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ae(new lt(e.slice()))}}function bg(i,e,t){if(!t)throw new _e(ae.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function aR(i,e,t,s){if(e===!0&&s===!0)throw new _e(ae.INVALID_ARGUMENT,`${i} and ${t} cannot be used together.`)}function Eb(i){if(!Ae.isDocumentKey(i))throw new _e(ae.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function Tb(i){if(Ae.isDocumentKey(i))throw new _e(ae.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function t1(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}function Sf(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":Ie(12329,{type:typeof i})}function vn(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new _e(ae.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Sf(i);throw new _e(ae.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return i}function Vt(i,e){const t={typeString:i};return e&&(t.value=e),t}function kc(i,e){if(!t1(i))throw new _e(ae.INVALID_ARGUMENT,"JSON must be an object");let t;for(const s in e)if(e[s]){const o=e[s].typeString,c="value"in e[s]?{value:e[s].value}:void 0;if(!(s in i)){t=`JSON missing required field: '${s}'`;break}const u=i[s];if(o&&typeof u!==o){t=`JSON field '${s}' must be a ${o}.`;break}if(c!==void 0&&u!==c.value){t=`Expected '${s}' field to equal '${c.value}'`;break}}if(t)throw new _e(ae.INVALID_ARGUMENT,t);return!0}const wb=-62135596800,Ab=1e6;class ht{static now(){return ht.fromMillis(Date.now())}static fromDate(e){return ht.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor((e-1e3*t)*Ab);return new ht(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new _e(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new _e(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<wb)throw new _e(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new _e(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Ab}_compareTo(e){return this.seconds===e.seconds?Fe(this.nanoseconds,e.nanoseconds):Fe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ht._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(kc(e,ht._jsonSchema))return new ht(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-wb;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ht._jsonSchemaVersion="firestore/timestamp/1.0",ht._jsonSchema={type:Vt("string",ht._jsonSchemaVersion),seconds:Vt("number"),nanoseconds:Vt("number")};class De{static fromTimestamp(e){return new De(e)}static min(){return new De(new ht(0,0))}static max(){return new De(new ht(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const yc=-1;function oR(i,e){const t=i.toTimestamp().seconds,s=i.toTimestamp().nanoseconds+1,o=De.fromTimestamp(s===1e9?new ht(t+1,0):new ht(t,s));return new bs(o,Ae.empty(),e)}function lR(i){return new bs(i.readTime,i.key,yc)}class bs{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new bs(De.min(),Ae.empty(),yc)}static max(){return new bs(De.max(),Ae.empty(),yc)}}function cR(i,e){let t=i.readTime.compareTo(e.readTime);return t!==0?t:(t=Ae.comparator(i.documentKey,e.documentKey),t!==0?t:Fe(i.largestBatchId,e.largestBatchId))}const uR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class hR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Uo(i){if(i.code!==ae.FAILED_PRECONDITION||i.message!==uR)throw i;ve("LocalStore","Unexpectedly lost primary lease")}class ue{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ie(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ue(((s,o)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(s,o)},this.catchCallback=c=>{this.wrapFailure(t,c).next(s,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof ue?t:ue.resolve(t)}catch(t){return ue.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):ue.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):ue.reject(t)}static resolve(e){return new ue(((t,s)=>{t(e)}))}static reject(e){return new ue(((t,s)=>{s(e)}))}static waitFor(e){return new ue(((t,s)=>{let o=0,c=0,u=!1;e.forEach((m=>{++o,m.next((()=>{++c,u&&c===o&&t()}),(p=>s(p)))})),u=!0,c===o&&t()}))}static or(e){let t=ue.resolve(!1);for(const s of e)t=t.next((o=>o?ue.resolve(o):s()));return t}static forEach(e,t){const s=[];return e.forEach(((o,c)=>{s.push(t.call(this,o,c))})),this.waitFor(s)}static mapArray(e,t){return new ue(((s,o)=>{const c=e.length,u=new Array(c);let m=0;for(let p=0;p<c;p++){const g=p;t(e[g]).next((v=>{u[g]=v,++m,m===c&&s(u)}),(v=>o(v)))}}))}static doWhile(e,t){return new ue(((s,o)=>{const c=()=>{e()===!0?t().next((()=>{c()}),o):s()};c()}))}}function fR(i){const e=i.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function zo(i){return i.name==="IndexedDbTransactionError"}class Nf{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>t.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Nf.ce=-1;const xg=-1;function Cf(i){return i==null}function nf(i){return i===0&&1/i==-1/0}function dR(i){return typeof i=="number"&&Number.isInteger(i)&&!nf(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}const n1="";function mR(i){let e="";for(let t=0;t<i.length;t++)e.length>0&&(e=Sb(e)),e=pR(i.get(t),e);return Sb(e)}function pR(i,e){let t=e;const s=i.length;for(let o=0;o<s;o++){const c=i.charAt(o);switch(c){case"\0":t+="";break;case n1:t+="";break;default:t+=c}}return t}function Sb(i){return i+n1+""}function Nb(i){let e=0;for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e++;return e}function Cs(i,e){for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e(t,i[t])}function i1(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}class mt{constructor(e,t){this.comparator=e,this.root=t||Xt.EMPTY}insert(e,t){return new mt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Xt.BLACK,null,null))}remove(e){return new mt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Xt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return t+s.left.size;o<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,s)=>(e(t,s),!1)))}toString(){const e=[];return this.inorderTraversal(((t,s)=>(e.push(`${t}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new bh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new bh(this.root,e,this.comparator,!1)}getReverseIterator(){return new bh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new bh(this.root,e,this.comparator,!0)}}class bh{constructor(e,t,s,o){this.isReverse=o,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=t?s(e.key,t):1,t&&o&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Xt{constructor(e,t,s,o,c){this.key=e,this.value=t,this.color=s??Xt.RED,this.left=o??Xt.EMPTY,this.right=c??Xt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,o,c){return new Xt(e??this.key,t??this.value,s??this.color,o??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let o=this;const c=s(e,o.key);return o=c<0?o.copy(null,null,null,o.left.insert(e,t,s),null):c===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Xt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Xt.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Xt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Xt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ie(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ie(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ie(27949);return e+(this.isRed()?0:1)}}Xt.EMPTY=null,Xt.RED=!0,Xt.BLACK=!1;Xt.EMPTY=new class{constructor(){this.size=0}get key(){throw Ie(57766)}get value(){throw Ie(16141)}get color(){throw Ie(16727)}get left(){throw Ie(29726)}get right(){throw Ie(36894)}copy(e,t,s,o,c){return this}insert(e,t,s){return new Xt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Pt{constructor(e){this.comparator=e,this.data=new mt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,s)=>(e(t),!1)))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Cb(this.data.getIterator())}getIteratorFrom(e){return new Cb(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((s=>{t=t.add(s)})),t}isEqual(e){if(!(e instanceof Pt)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,c=s.getNext().key;if(this.comparator(o,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Pt(this.comparator);return t.data=e,t}}class Cb{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class In{constructor(e){this.fields=e,e.sort(Wt.comparator)}static empty(){return new In([])}unionWith(e){let t=new Pt(Wt.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new In(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Co(this.fields,e.fields,((t,s)=>t.isEqual(s)))}}class r1 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Zt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new r1("Invalid base64 string: "+c):c}})(e);return new Zt(t)}static fromUint8Array(e){const t=(function(o){let c="";for(let u=0;u<o.length;++u)c+=String.fromCharCode(o[u]);return c})(e);return new Zt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const s=new Uint8Array(t.length);for(let o=0;o<t.length;o++)s[o]=t.charCodeAt(o);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Fe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Zt.EMPTY_BYTE_STRING=new Zt("");const gR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function xs(i){if(We(!!i,39018),typeof i=="string"){let e=0;const t=gR.exec(i);if(We(!!t,46558,{timestamp:i}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(i);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:wt(i.seconds),nanos:wt(i.nanos)}}function wt(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function Es(i){return typeof i=="string"?Zt.fromBase64String(i):Zt.fromUint8Array(i)}const s1="server_timestamp",a1="__type__",o1="__previous_value__",l1="__local_write_time__";function Eg(i){return(i?.mapValue?.fields||{})[a1]?.stringValue===s1}function Rf(i){const e=i.mapValue.fields[o1];return Eg(e)?Rf(e):e}function _c(i){const e=xs(i.mapValue.fields[l1].timestampValue);return new ht(e.seconds,e.nanos)}class yR{constructor(e,t,s,o,c,u,m,p,g,v){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=o,this.ssl=c,this.forceLongPolling=u,this.autoDetectLongPolling=m,this.longPollingOptions=p,this.useFetchStreams=g,this.isUsingEmulator=v}}const rf="(default)";class vc{constructor(e,t){this.projectId=e,this.database=t||rf}static empty(){return new vc("","")}get isDefaultDatabase(){return this.database===rf}isEqual(e){return e instanceof vc&&e.projectId===this.projectId&&e.database===this.database}}const c1="__type__",_R="__max__",xh={mapValue:{}},u1="__vector__",sf="value";function Ts(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?Eg(i)?4:bR(i)?9007199254740991:vR(i)?10:11:Ie(28295,{value:i})}function Hi(i,e){if(i===e)return!0;const t=Ts(i);if(t!==Ts(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return _c(i).isEqual(_c(e));case 3:return(function(o,c){if(typeof o.timestampValue=="string"&&typeof c.timestampValue=="string"&&o.timestampValue.length===c.timestampValue.length)return o.timestampValue===c.timestampValue;const u=xs(o.timestampValue),m=xs(c.timestampValue);return u.seconds===m.seconds&&u.nanos===m.nanos})(i,e);case 5:return i.stringValue===e.stringValue;case 6:return(function(o,c){return Es(o.bytesValue).isEqual(Es(c.bytesValue))})(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return(function(o,c){return wt(o.geoPointValue.latitude)===wt(c.geoPointValue.latitude)&&wt(o.geoPointValue.longitude)===wt(c.geoPointValue.longitude)})(i,e);case 2:return(function(o,c){if("integerValue"in o&&"integerValue"in c)return wt(o.integerValue)===wt(c.integerValue);if("doubleValue"in o&&"doubleValue"in c){const u=wt(o.doubleValue),m=wt(c.doubleValue);return u===m?nf(u)===nf(m):isNaN(u)&&isNaN(m)}return!1})(i,e);case 9:return Co(i.arrayValue.values||[],e.arrayValue.values||[],Hi);case 10:case 11:return(function(o,c){const u=o.mapValue.fields||{},m=c.mapValue.fields||{};if(Nb(u)!==Nb(m))return!1;for(const p in u)if(u.hasOwnProperty(p)&&(m[p]===void 0||!Hi(u[p],m[p])))return!1;return!0})(i,e);default:return Ie(52216,{left:i})}}function bc(i,e){return(i.values||[]).find((t=>Hi(t,e)))!==void 0}function Ro(i,e){if(i===e)return 0;const t=Ts(i),s=Ts(e);if(t!==s)return Fe(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return Fe(i.booleanValue,e.booleanValue);case 2:return(function(c,u){const m=wt(c.integerValue||c.doubleValue),p=wt(u.integerValue||u.doubleValue);return m<p?-1:m>p?1:m===p?0:isNaN(m)?isNaN(p)?0:-1:1})(i,e);case 3:return Rb(i.timestampValue,e.timestampValue);case 4:return Rb(_c(i),_c(e));case 5:return Dp(i.stringValue,e.stringValue);case 6:return(function(c,u){const m=Es(c),p=Es(u);return m.compareTo(p)})(i.bytesValue,e.bytesValue);case 7:return(function(c,u){const m=c.split("/"),p=u.split("/");for(let g=0;g<m.length&&g<p.length;g++){const v=Fe(m[g],p[g]);if(v!==0)return v}return Fe(m.length,p.length)})(i.referenceValue,e.referenceValue);case 8:return(function(c,u){const m=Fe(wt(c.latitude),wt(u.latitude));return m!==0?m:Fe(wt(c.longitude),wt(u.longitude))})(i.geoPointValue,e.geoPointValue);case 9:return Ib(i.arrayValue,e.arrayValue);case 10:return(function(c,u){const m=c.fields||{},p=u.fields||{},g=m[sf]?.arrayValue,v=p[sf]?.arrayValue,x=Fe(g?.values?.length||0,v?.values?.length||0);return x!==0?x:Ib(g,v)})(i.mapValue,e.mapValue);case 11:return(function(c,u){if(c===xh.mapValue&&u===xh.mapValue)return 0;if(c===xh.mapValue)return 1;if(u===xh.mapValue)return-1;const m=c.fields||{},p=Object.keys(m),g=u.fields||{},v=Object.keys(g);p.sort(),v.sort();for(let x=0;x<p.length&&x<v.length;++x){const T=Dp(p[x],v[x]);if(T!==0)return T;const I=Ro(m[p[x]],g[v[x]]);if(I!==0)return I}return Fe(p.length,v.length)})(i.mapValue,e.mapValue);default:throw Ie(23264,{he:t})}}function Rb(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return Fe(i,e);const t=xs(i),s=xs(e),o=Fe(t.seconds,s.seconds);return o!==0?o:Fe(t.nanos,s.nanos)}function Ib(i,e){const t=i.values||[],s=e.values||[];for(let o=0;o<t.length&&o<s.length;++o){const c=Ro(t[o],s[o]);if(c)return c}return Fe(t.length,s.length)}function Io(i){return Mp(i)}function Mp(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?(function(t){const s=xs(t);return`time(${s.seconds},${s.nanos})`})(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?(function(t){return Es(t).toBase64()})(i.bytesValue):"referenceValue"in i?(function(t){return Ae.fromName(t).toString()})(i.referenceValue):"geoPointValue"in i?(function(t){return`geo(${t.latitude},${t.longitude})`})(i.geoPointValue):"arrayValue"in i?(function(t){let s="[",o=!0;for(const c of t.values||[])o?o=!1:s+=",",s+=Mp(c);return s+"]"})(i.arrayValue):"mapValue"in i?(function(t){const s=Object.keys(t.fields||{}).sort();let o="{",c=!0;for(const u of s)c?c=!1:o+=",",o+=`${u}:${Mp(t.fields[u])}`;return o+"}"})(i.mapValue):Ie(61005,{value:i})}function jh(i){switch(Ts(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Rf(i);return e?16+jh(e):16;case 5:return 2*i.stringValue.length;case 6:return Es(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((o,c)=>o+jh(c)),0)})(i.arrayValue);case 10:case 11:return(function(s){let o=0;return Cs(s.fields,((c,u)=>{o+=c.length+jh(u)})),o})(i.mapValue);default:throw Ie(13486,{value:i})}}function Db(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function Op(i){return!!i&&"integerValue"in i}function Tg(i){return!!i&&"arrayValue"in i}function Mb(i){return!!i&&"nullValue"in i}function Ob(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function Lh(i){return!!i&&"mapValue"in i}function vR(i){return(i?.mapValue?.fields||{})[c1]?.stringValue===u1}function cc(i){if(i.geoPointValue)return{geoPointValue:{...i.geoPointValue}};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:{...i.timestampValue}};if(i.mapValue){const e={mapValue:{fields:{}}};return Cs(i.mapValue.fields,((t,s)=>e.mapValue.fields[t]=cc(s))),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(i.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=cc(i.arrayValue.values[t]);return e}return{...i}}function bR(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue===_R}class yn{constructor(e){this.value=e}static empty(){return new yn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!Lh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=cc(t)}setAll(e){let t=Wt.emptyPath(),s={},o=[];e.forEach(((u,m)=>{if(!t.isImmediateParentOf(m)){const p=this.getFieldsMap(t);this.applyChanges(p,s,o),s={},o=[],t=m.popLast()}u?s[m.lastSegment()]=cc(u):o.push(m.lastSegment())}));const c=this.getFieldsMap(t);this.applyChanges(c,s,o)}delete(e){const t=this.field(e.popLast());Lh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Hi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=t.mapValue.fields[e.get(s)];Lh(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,s){Cs(t,((o,c)=>e[o]=c));for(const o of s)delete e[o]}clone(){return new yn(cc(this.value))}}function h1(i){const e=[];return Cs(i.fields,((t,s)=>{const o=new Wt([t]);if(Lh(s)){const c=h1(s.mapValue).fields;if(c.length===0)e.push(o);else for(const u of c)e.push(o.child(u))}else e.push(o)})),new In(e)}class nn{constructor(e,t,s,o,c,u,m){this.key=e,this.documentType=t,this.version=s,this.readTime=o,this.createTime=c,this.data=u,this.documentState=m}static newInvalidDocument(e){return new nn(e,0,De.min(),De.min(),De.min(),yn.empty(),0)}static newFoundDocument(e,t,s,o){return new nn(e,1,t,De.min(),s,o,0)}static newNoDocument(e,t){return new nn(e,2,t,De.min(),De.min(),yn.empty(),0)}static newUnknownDocument(e,t){return new nn(e,3,t,De.min(),De.min(),yn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(De.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=yn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=yn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=De.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof nn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new nn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class af{constructor(e,t){this.position=e,this.inclusive=t}}function kb(i,e,t){let s=0;for(let o=0;o<i.position.length;o++){const c=e[o],u=i.position[o];if(c.field.isKeyField()?s=Ae.comparator(Ae.fromName(u.referenceValue),t.key):s=Ro(u,t.data.field(c.field)),c.dir==="desc"&&(s*=-1),s!==0)break}return s}function Vb(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let t=0;t<i.position.length;t++)if(!Hi(i.position[t],e.position[t]))return!1;return!0}class of{constructor(e,t="asc"){this.field=e,this.dir=t}}function xR(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}class f1{}class kt extends f1{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new TR(e,t,s):t==="array-contains"?new SR(e,s):t==="in"?new NR(e,s):t==="not-in"?new CR(e,s):t==="array-contains-any"?new RR(e,s):new kt(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new wR(e,s):new AR(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Ro(t,this.value)):t!==null&&Ts(this.value)===Ts(t)&&this.matchesComparison(Ro(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ie(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class fi extends f1{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new fi(e,t)}matches(e){return d1(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function d1(i){return i.op==="and"}function m1(i){return ER(i)&&d1(i)}function ER(i){for(const e of i.filters)if(e instanceof fi)return!1;return!0}function kp(i){if(i instanceof kt)return i.field.canonicalString()+i.op.toString()+Io(i.value);if(m1(i))return i.filters.map((e=>kp(e))).join(",");{const e=i.filters.map((t=>kp(t))).join(",");return`${i.op}(${e})`}}function p1(i,e){return i instanceof kt?(function(s,o){return o instanceof kt&&s.op===o.op&&s.field.isEqual(o.field)&&Hi(s.value,o.value)})(i,e):i instanceof fi?(function(s,o){return o instanceof fi&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce(((c,u,m)=>c&&p1(u,o.filters[m])),!0):!1})(i,e):void Ie(19439)}function g1(i){return i instanceof kt?(function(t){return`${t.field.canonicalString()} ${t.op} ${Io(t.value)}`})(i):i instanceof fi?(function(t){return t.op.toString()+" {"+t.getFilters().map(g1).join(" ,")+"}"})(i):"Filter"}class TR extends kt{constructor(e,t,s){super(e,t,s),this.key=Ae.fromName(s.referenceValue)}matches(e){const t=Ae.comparator(e.key,this.key);return this.matchesComparison(t)}}class wR extends kt{constructor(e,t){super(e,"in",t),this.keys=y1("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class AR extends kt{constructor(e,t){super(e,"not-in",t),this.keys=y1("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function y1(i,e){return(e.arrayValue?.values||[]).map((t=>Ae.fromName(t.referenceValue)))}class SR extends kt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Tg(t)&&bc(t.arrayValue,this.value)}}class NR extends kt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&bc(this.value.arrayValue,t)}}class CR extends kt{constructor(e,t){super(e,"not-in",t)}matches(e){if(bc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!bc(this.value.arrayValue,t)}}class RR extends kt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Tg(t)||!t.arrayValue.values)&&t.arrayValue.values.some((s=>bc(this.value.arrayValue,s)))}}class IR{constructor(e,t=null,s=[],o=[],c=null,u=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=o,this.limit=c,this.startAt=u,this.endAt=m,this.Te=null}}function jb(i,e=null,t=[],s=[],o=null,c=null,u=null){return new IR(i,e,t,s,o,c,u)}function wg(i){const e=ke(i);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((s=>kp(s))).join(","),t+="|ob:",t+=e.orderBy.map((s=>(function(c){return c.field.canonicalString()+c.dir})(s))).join(","),Cf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((s=>Io(s))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((s=>Io(s))).join(",")),e.Te=t}return e.Te}function Ag(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<i.orderBy.length;t++)if(!xR(i.orderBy[t],e.orderBy[t]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let t=0;t<i.filters.length;t++)if(!p1(i.filters[t],e.filters[t]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!Vb(i.startAt,e.startAt)&&Vb(i.endAt,e.endAt)}function Vp(i){return Ae.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}class Bo{constructor(e,t=null,s=[],o=[],c=null,u="F",m=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=o,this.limit=c,this.limitType=u,this.startAt=m,this.endAt=p,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function DR(i,e,t,s,o,c,u,m){return new Bo(i,e,t,s,o,c,u,m)}function If(i){return new Bo(i)}function Lb(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function _1(i){return i.collectionGroup!==null}function uc(i){const e=ke(i);if(e.Ie===null){e.Ie=[];const t=new Set;for(const c of e.explicitOrderBy)e.Ie.push(c),t.add(c.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let m=new Pt(Wt.comparator);return u.filters.forEach((p=>{p.getFlattenedFilters().forEach((g=>{g.isInequality()&&(m=m.add(g.field))}))})),m})(e).forEach((c=>{t.has(c.canonicalString())||c.isKeyField()||e.Ie.push(new of(c,s))})),t.has(Wt.keyField().canonicalString())||e.Ie.push(new of(Wt.keyField(),s))}return e.Ie}function Ui(i){const e=ke(i);return e.Ee||(e.Ee=MR(e,uc(i))),e.Ee}function MR(i,e){if(i.limitType==="F")return jb(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map((o=>{const c=o.dir==="desc"?"asc":"desc";return new of(o.field,c)}));const t=i.endAt?new af(i.endAt.position,i.endAt.inclusive):null,s=i.startAt?new af(i.startAt.position,i.startAt.inclusive):null;return jb(i.path,i.collectionGroup,e,i.filters,i.limit,t,s)}}function jp(i,e){const t=i.filters.concat([e]);return new Bo(i.path,i.collectionGroup,i.explicitOrderBy.slice(),t,i.limit,i.limitType,i.startAt,i.endAt)}function Lp(i,e,t){return new Bo(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,t,i.startAt,i.endAt)}function Df(i,e){return Ag(Ui(i),Ui(e))&&i.limitType===e.limitType}function v1(i){return`${wg(Ui(i))}|lt:${i.limitType}`}function po(i){return`Query(target=${(function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map((o=>g1(o))).join(", ")}]`),Cf(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map((o=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(o))).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map((o=>Io(o))).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map((o=>Io(o))).join(",")),`Target(${s})`})(Ui(i))}; limitType=${i.limitType})`}function Mf(i,e){return e.isFoundDocument()&&(function(s,o){const c=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(c):Ae.isDocumentKey(s.path)?s.path.isEqual(c):s.path.isImmediateParentOf(c)})(i,e)&&(function(s,o){for(const c of uc(s))if(!c.field.isKeyField()&&o.data.field(c.field)===null)return!1;return!0})(i,e)&&(function(s,o){for(const c of s.filters)if(!c.matches(o))return!1;return!0})(i,e)&&(function(s,o){return!(s.startAt&&!(function(u,m,p){const g=kb(u,m,p);return u.inclusive?g<=0:g<0})(s.startAt,uc(s),o)||s.endAt&&!(function(u,m,p){const g=kb(u,m,p);return u.inclusive?g>=0:g>0})(s.endAt,uc(s),o))})(i,e)}function OR(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function b1(i){return(e,t)=>{let s=!1;for(const o of uc(i)){const c=kR(o,e,t);if(c!==0)return c;s=s||o.field.isKeyField()}return 0}}function kR(i,e,t){const s=i.field.isKeyField()?Ae.comparator(e.key,t.key):(function(c,u,m){const p=u.data.field(c),g=m.data.field(c);return p!==null&&g!==null?Ro(p,g):Ie(42886)})(i.field,e,t);switch(i.dir){case"asc":return s;case"desc":return-1*s;default:return Ie(19790,{direction:i.dir})}}class wa{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[o,c]of s)if(this.equalsFn(o,e))return c}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let c=0;c<o.length;c++)if(this.equalsFn(o[c][0],e))return void(o[c]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[t]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Cs(this.inner,((t,s)=>{for(const[o,c]of s)e(o,c)}))}isEmpty(){return i1(this.inner)}size(){return this.innerSize}}const VR=new mt(Ae.comparator);function Er(){return VR}const x1=new mt(Ae.comparator);function tc(...i){let e=x1;for(const t of i)e=e.insert(t.key,t);return e}function E1(i){let e=x1;return i.forEach(((t,s)=>e=e.insert(t,s.overlayedDocument))),e}function fa(){return hc()}function T1(){return hc()}function hc(){return new wa((i=>i.toString()),((i,e)=>i.isEqual(e)))}const jR=new mt(Ae.comparator),LR=new Pt(Ae.comparator);function He(...i){let e=LR;for(const t of i)e=e.add(t);return e}const PR=new Pt(Fe);function UR(){return PR}function Sg(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:nf(e)?"-0":e}}function w1(i){return{integerValue:""+i}}function zR(i,e){return dR(e)?w1(e):Sg(i,e)}class Of{constructor(){this._=void 0}}function BR(i,e,t){return i instanceof xc?(function(o,c){const u={fields:{[a1]:{stringValue:s1},[l1]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return c&&Eg(c)&&(c=Rf(c)),c&&(u.fields[o1]=c),{mapValue:u}})(t,e):i instanceof Ec?S1(i,e):i instanceof Tc?N1(i,e):(function(o,c){const u=A1(o,c),m=Pb(u)+Pb(o.Ae);return Op(u)&&Op(o.Ae)?w1(m):Sg(o.serializer,m)})(i,e)}function qR(i,e,t){return i instanceof Ec?S1(i,e):i instanceof Tc?N1(i,e):t}function A1(i,e){return i instanceof lf?(function(s){return Op(s)||(function(c){return!!c&&"doubleValue"in c})(s)})(e)?e:{integerValue:0}:null}class xc extends Of{}class Ec extends Of{constructor(e){super(),this.elements=e}}function S1(i,e){const t=C1(e);for(const s of i.elements)t.some((o=>Hi(o,s)))||t.push(s);return{arrayValue:{values:t}}}class Tc extends Of{constructor(e){super(),this.elements=e}}function N1(i,e){let t=C1(e);for(const s of i.elements)t=t.filter((o=>!Hi(o,s)));return{arrayValue:{values:t}}}class lf extends Of{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function Pb(i){return wt(i.integerValue||i.doubleValue)}function C1(i){return Tg(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}class FR{constructor(e,t){this.field=e,this.transform=t}}function HR(i,e){return i.field.isEqual(e.field)&&(function(s,o){return s instanceof Ec&&o instanceof Ec||s instanceof Tc&&o instanceof Tc?Co(s.elements,o.elements,Hi):s instanceof lf&&o instanceof lf?Hi(s.Ae,o.Ae):s instanceof xc&&o instanceof xc})(i.transform,e.transform)}class GR{constructor(e,t){this.version=e,this.transformResults=t}}class ui{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ui}static exists(e){return new ui(void 0,e)}static updateTime(e){return new ui(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ph(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class kf{}function R1(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new D1(i.key,ui.none()):new Vc(i.key,i.data,ui.none());{const t=i.data,s=yn.empty();let o=new Pt(Wt.comparator);for(let c of e.fields)if(!o.has(c)){let u=t.field(c);u===null&&c.length>1&&(c=c.popLast(),u=t.field(c)),u===null?s.delete(c):s.set(c,u),o=o.add(c)}return new Rs(i.key,s,new In(o.toArray()),ui.none())}}function $R(i,e,t){i instanceof Vc?(function(o,c,u){const m=o.value.clone(),p=zb(o.fieldTransforms,c,u.transformResults);m.setAll(p),c.convertToFoundDocument(u.version,m).setHasCommittedMutations()})(i,e,t):i instanceof Rs?(function(o,c,u){if(!Ph(o.precondition,c))return void c.convertToUnknownDocument(u.version);const m=zb(o.fieldTransforms,c,u.transformResults),p=c.data;p.setAll(I1(o)),p.setAll(m),c.convertToFoundDocument(u.version,p).setHasCommittedMutations()})(i,e,t):(function(o,c,u){c.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,t)}function fc(i,e,t,s){return i instanceof Vc?(function(c,u,m,p){if(!Ph(c.precondition,u))return m;const g=c.value.clone(),v=Bb(c.fieldTransforms,p,u);return g.setAll(v),u.convertToFoundDocument(u.version,g).setHasLocalMutations(),null})(i,e,t,s):i instanceof Rs?(function(c,u,m,p){if(!Ph(c.precondition,u))return m;const g=Bb(c.fieldTransforms,p,u),v=u.data;return v.setAll(I1(c)),v.setAll(g),u.convertToFoundDocument(u.version,v).setHasLocalMutations(),m===null?null:m.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map((x=>x.field)))})(i,e,t,s):(function(c,u,m){return Ph(c.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):m})(i,e,t)}function YR(i,e){let t=null;for(const s of i.fieldTransforms){const o=e.data.field(s.field),c=A1(s.transform,o||null);c!=null&&(t===null&&(t=yn.empty()),t.set(s.field,c))}return t||null}function Ub(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!(function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&Co(s,o,((c,u)=>HR(c,u)))})(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class Vc extends kf{constructor(e,t,s,o=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Rs extends kf{constructor(e,t,s,o,c=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=o,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function I1(i){const e=new Map;return i.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const s=i.data.field(t);e.set(t,s)}})),e}function zb(i,e,t){const s=new Map;We(i.length===t.length,32656,{Re:t.length,Ve:i.length});for(let o=0;o<t.length;o++){const c=i[o],u=c.transform,m=e.data.field(c.field);s.set(c.field,qR(u,m,t[o]))}return s}function Bb(i,e,t){const s=new Map;for(const o of i){const c=o.transform,u=t.data.field(o.field);s.set(o.field,BR(c,u,e))}return s}class D1 extends kf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class QR extends kf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class KR{constructor(e,t,s,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const c=this.mutations[o];c.key.isEqual(e.key)&&$R(c,e,s[o])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=fc(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=fc(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=T1();return this.mutations.forEach((o=>{const c=e.get(o.key),u=c.overlayedDocument;let m=this.applyToLocalView(u,c.mutatedFields);m=t.has(o.key)?null:m;const p=R1(u,m);p!==null&&s.set(o.key,p),u.isValidDocument()||u.convertToNoDocument(De.min())})),s}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),He())}isEqual(e){return this.batchId===e.batchId&&Co(this.mutations,e.mutations,((t,s)=>Ub(t,s)))&&Co(this.baseMutations,e.baseMutations,((t,s)=>Ub(t,s)))}}class Ng{constructor(e,t,s,o){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=o}static from(e,t,s){We(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let o=(function(){return jR})();const c=e.mutations;for(let u=0;u<c.length;u++)o=o.insert(c[u].key,s[u].version);return new Ng(e,t,s,o)}}class XR{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class WR{constructor(e,t){this.count=e,this.unchangedNames=t}}var Ot,$e;function ZR(i){switch(i){case ae.OK:return Ie(64938);case ae.CANCELLED:case ae.UNKNOWN:case ae.DEADLINE_EXCEEDED:case ae.RESOURCE_EXHAUSTED:case ae.INTERNAL:case ae.UNAVAILABLE:case ae.UNAUTHENTICATED:return!1;case ae.INVALID_ARGUMENT:case ae.NOT_FOUND:case ae.ALREADY_EXISTS:case ae.PERMISSION_DENIED:case ae.FAILED_PRECONDITION:case ae.ABORTED:case ae.OUT_OF_RANGE:case ae.UNIMPLEMENTED:case ae.DATA_LOSS:return!0;default:return Ie(15467,{code:i})}}function M1(i){if(i===void 0)return xr("GRPC error has no .code"),ae.UNKNOWN;switch(i){case Ot.OK:return ae.OK;case Ot.CANCELLED:return ae.CANCELLED;case Ot.UNKNOWN:return ae.UNKNOWN;case Ot.DEADLINE_EXCEEDED:return ae.DEADLINE_EXCEEDED;case Ot.RESOURCE_EXHAUSTED:return ae.RESOURCE_EXHAUSTED;case Ot.INTERNAL:return ae.INTERNAL;case Ot.UNAVAILABLE:return ae.UNAVAILABLE;case Ot.UNAUTHENTICATED:return ae.UNAUTHENTICATED;case Ot.INVALID_ARGUMENT:return ae.INVALID_ARGUMENT;case Ot.NOT_FOUND:return ae.NOT_FOUND;case Ot.ALREADY_EXISTS:return ae.ALREADY_EXISTS;case Ot.PERMISSION_DENIED:return ae.PERMISSION_DENIED;case Ot.FAILED_PRECONDITION:return ae.FAILED_PRECONDITION;case Ot.ABORTED:return ae.ABORTED;case Ot.OUT_OF_RANGE:return ae.OUT_OF_RANGE;case Ot.UNIMPLEMENTED:return ae.UNIMPLEMENTED;case Ot.DATA_LOSS:return ae.DATA_LOSS;default:return Ie(39323,{code:i})}}($e=Ot||(Ot={}))[$e.OK=0]="OK",$e[$e.CANCELLED=1]="CANCELLED",$e[$e.UNKNOWN=2]="UNKNOWN",$e[$e.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",$e[$e.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",$e[$e.NOT_FOUND=5]="NOT_FOUND",$e[$e.ALREADY_EXISTS=6]="ALREADY_EXISTS",$e[$e.PERMISSION_DENIED=7]="PERMISSION_DENIED",$e[$e.UNAUTHENTICATED=16]="UNAUTHENTICATED",$e[$e.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",$e[$e.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",$e[$e.ABORTED=10]="ABORTED",$e[$e.OUT_OF_RANGE=11]="OUT_OF_RANGE",$e[$e.UNIMPLEMENTED=12]="UNIMPLEMENTED",$e[$e.INTERNAL=13]="INTERNAL",$e[$e.UNAVAILABLE=14]="UNAVAILABLE",$e[$e.DATA_LOSS=15]="DATA_LOSS";function JR(){return new TextEncoder}const eI=new _s([4294967295,4294967295],0);function qb(i){const e=JR().encode(i),t=new YE;return t.update(e),new Uint8Array(t.digest())}function Fb(i){const e=new DataView(i.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new _s([t,s],0),new _s([o,c],0)]}class Cg{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new nc(`Invalid padding: ${t}`);if(s<0)throw new nc(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new nc(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new nc(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=_s.fromNumber(this.ge)}ye(e,t,s){let o=e.add(t.multiply(_s.fromNumber(s)));return o.compare(eI)===1&&(o=new _s([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=qb(e),[s,o]=Fb(t);for(let c=0;c<this.hashCount;c++){const u=this.ye(s,o,c);if(!this.we(u))return!1}return!0}static create(e,t,s){const o=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),u=new Cg(c,o,t);return s.forEach((m=>u.insert(m))),u}insert(e){if(this.ge===0)return;const t=qb(e),[s,o]=Fb(t);for(let c=0;c<this.hashCount;c++){const u=this.ye(s,o,c);this.Se(u)}}Se(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class nc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Vf{constructor(e,t,s,o,c){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const o=new Map;return o.set(e,jc.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new Vf(De.min(),o,new mt(Fe),Er(),He())}}class jc{constructor(e,t,s,o,c){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new jc(s,t,He(),He(),He())}}class Uh{constructor(e,t,s,o){this.be=e,this.removedTargetIds=t,this.key=s,this.De=o}}class O1{constructor(e,t){this.targetId=e,this.Ce=t}}class k1{constructor(e,t,s=Zt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=o}}class Hb{constructor(){this.ve=0,this.Fe=Gb(),this.Me=Zt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=He(),t=He(),s=He();return this.Fe.forEach(((o,c)=>{switch(c){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:s=s.add(o);break;default:Ie(38017,{changeType:c})}})),new jc(this.Me,this.xe,e,t,s)}qe(){this.Oe=!1,this.Fe=Gb()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,We(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class tI{constructor(e){this.Ge=e,this.ze=new Map,this.je=Er(),this.Je=Eh(),this.He=Eh(),this.Ye=new mt(Fe)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const s=this.nt(t);switch(e.state){case 0:this.rt(t)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),s.Le(e.resumeToken));break;default:Ie(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((s,o)=>{this.rt(o)&&t(o)}))}st(e){const t=e.targetId,s=e.Ce.count,o=this.ot(t);if(o){const c=o.target;if(Vp(c))if(s===0){const u=new Ae(c.path);this.et(t,u,nn.newNoDocument(u,De.min()))}else We(s===1,20013,{expectedCount:s});else{const u=this._t(t);if(u!==s){const m=this.ut(e),p=m?this.ct(m,e,u):1;if(p!==0){this.it(t);const g=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,g)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:c=0}=t;let u,m;try{u=Es(s).toUint8Array()}catch(p){if(p instanceof r1)return No("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{m=new Cg(u,o,c)}catch(p){return No(p instanceof nc?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return m.ge===0?null:m}ct(e,t,s){return t.Ce.count===s-this.Pt(e,t.targetId)?0:2}Pt(e,t){const s=this.Ge.getRemoteKeysForTarget(t);let o=0;return s.forEach((c=>{const u=this.Ge.ht(),m=`projects/${u.projectId}/databases/${u.database}/documents/${c.path.canonicalString()}`;e.mightContain(m)||(this.et(t,c,null),o++)})),o}Tt(e){const t=new Map;this.ze.forEach(((c,u)=>{const m=this.ot(u);if(m){if(c.current&&Vp(m.target)){const p=new Ae(m.target.path);this.It(p).has(u)||this.Et(u,p)||this.et(u,p,nn.newNoDocument(p,e))}c.Be&&(t.set(u,c.ke()),c.qe())}}));let s=He();this.He.forEach(((c,u)=>{let m=!0;u.forEachWhile((p=>{const g=this.ot(p);return!g||g.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)})),m&&(s=s.add(c))})),this.je.forEach(((c,u)=>u.setReadTime(e)));const o=new Vf(e,t,this.Ye,this.je,s);return this.je=Er(),this.Je=Eh(),this.He=Eh(),this.Ye=new mt(Fe),o}Xe(e,t){if(!this.rt(e))return;const s=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,s),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,s){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,t)?o.Qe(t,1):o.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),s&&(this.je=this.je.insert(t,s))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new Hb,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Pt(Fe),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Pt(Fe),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||ve("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Hb),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Eh(){return new mt(Ae.comparator)}function Gb(){return new mt(Ae.comparator)}const nI={asc:"ASCENDING",desc:"DESCENDING"},iI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},rI={and:"AND",or:"OR"};class sI{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Pp(i,e){return i.useProto3Json||Cf(e)?e:{value:e}}function cf(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function V1(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function aI(i,e){return cf(i,e.toTimestamp())}function zi(i){return We(!!i,49232),De.fromTimestamp((function(t){const s=xs(t);return new ht(s.seconds,s.nanos)})(i))}function Rg(i,e){return Up(i,e).canonicalString()}function Up(i,e){const t=(function(o){return new lt(["projects",o.projectId,"databases",o.database])})(i).child("documents");return e===void 0?t:t.child(e)}function j1(i){const e=lt.fromString(i);return We(B1(e),10190,{key:e.toString()}),e}function zp(i,e){return Rg(i.databaseId,e.path)}function ap(i,e){const t=j1(e);if(t.get(1)!==i.databaseId.projectId)throw new _e(ae.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+i.databaseId.projectId);if(t.get(3)!==i.databaseId.database)throw new _e(ae.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+i.databaseId.database);return new Ae(P1(t))}function L1(i,e){return Rg(i.databaseId,e)}function oI(i){const e=j1(i);return e.length===4?lt.emptyPath():P1(e)}function Bp(i){return new lt(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function P1(i){return We(i.length>4&&i.get(4)==="documents",29091,{key:i.toString()}),i.popFirst(5)}function $b(i,e,t){return{name:zp(i,e),fields:t.value.mapValue.fields}}function lI(i,e){let t;if("targetChange"in e){e.targetChange;const s=(function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:Ie(39313,{state:g})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],c=(function(g,v){return g.useProto3Json?(We(v===void 0||typeof v=="string",58123),Zt.fromBase64String(v||"")):(We(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),Zt.fromUint8Array(v||new Uint8Array))})(i,e.targetChange.resumeToken),u=e.targetChange.cause,m=u&&(function(g){const v=g.code===void 0?ae.UNKNOWN:M1(g.code);return new _e(v,g.message||"")})(u);t=new k1(s,o,c,m||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=ap(i,s.document.name),c=zi(s.document.updateTime),u=s.document.createTime?zi(s.document.createTime):De.min(),m=new yn({mapValue:{fields:s.document.fields}}),p=nn.newFoundDocument(o,c,u,m),g=s.targetIds||[],v=s.removedTargetIds||[];t=new Uh(g,v,p.key,p)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=ap(i,s.document),c=s.readTime?zi(s.readTime):De.min(),u=nn.newNoDocument(o,c),m=s.removedTargetIds||[];t=new Uh([],m,u.key,u)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=ap(i,s.document),c=s.removedTargetIds||[];t=new Uh([],c,o,null)}else{if(!("filter"in e))return Ie(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:c}=s,u=new WR(o,c),m=s.targetId;t=new O1(m,u)}}return t}function cI(i,e){let t;if(e instanceof Vc)t={update:$b(i,e.key,e.value)};else if(e instanceof D1)t={delete:zp(i,e.key)};else if(e instanceof Rs)t={update:$b(i,e.key,e.data),updateMask:_I(e.fieldMask)};else{if(!(e instanceof QR))return Ie(16599,{Vt:e.type});t={verify:zp(i,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((s=>(function(c,u){const m=u.transform;if(m instanceof xc)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof Ec)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof Tc)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof lf)return{fieldPath:u.field.canonicalString(),increment:m.Ae};throw Ie(20930,{transform:u.transform})})(0,s)))),e.precondition.isNone||(t.currentDocument=(function(o,c){return c.updateTime!==void 0?{updateTime:aI(o,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:Ie(27497)})(i,e.precondition)),t}function uI(i,e){return i&&i.length>0?(We(e!==void 0,14353),i.map((t=>(function(o,c){let u=o.updateTime?zi(o.updateTime):zi(c);return u.isEqual(De.min())&&(u=zi(c)),new GR(u,o.transformResults||[])})(t,e)))):[]}function hI(i,e){return{documents:[L1(i,e.path)]}}function fI(i,e){const t={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=L1(i,o);const c=(function(g){if(g.length!==0)return z1(fi.create(g,"and"))})(e.filters);c&&(t.structuredQuery.where=c);const u=(function(g){if(g.length!==0)return g.map((v=>(function(T){return{field:go(T.field),direction:pI(T.dir)}})(v)))})(e.orderBy);u&&(t.structuredQuery.orderBy=u);const m=Pp(i,e.limit);return m!==null&&(t.structuredQuery.limit=m),e.startAt&&(t.structuredQuery.startAt=(function(g){return{before:g.inclusive,values:g.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(g){return{before:!g.inclusive,values:g.position}})(e.endAt)),{ft:t,parent:o}}function dI(i){let e=oI(i.parent);const t=i.structuredQuery,s=t.from?t.from.length:0;let o=null;if(s>0){We(s===1,65062);const v=t.from[0];v.allDescendants?o=v.collectionId:e=e.child(v.collectionId)}let c=[];t.where&&(c=(function(x){const T=U1(x);return T instanceof fi&&m1(T)?T.getFilters():[T]})(t.where));let u=[];t.orderBy&&(u=(function(x){return x.map((T=>(function(U){return new of(yo(U.field),(function($){switch($){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(U.direction))})(T)))})(t.orderBy));let m=null;t.limit&&(m=(function(x){let T;return T=typeof x=="object"?x.value:x,Cf(T)?null:T})(t.limit));let p=null;t.startAt&&(p=(function(x){const T=!!x.before,I=x.values||[];return new af(I,T)})(t.startAt));let g=null;return t.endAt&&(g=(function(x){const T=!x.before,I=x.values||[];return new af(I,T)})(t.endAt)),DR(e,o,u,c,m,"F",p,g)}function mI(i,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ie(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function U1(i){return i.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=yo(t.unaryFilter.field);return kt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=yo(t.unaryFilter.field);return kt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=yo(t.unaryFilter.field);return kt.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=yo(t.unaryFilter.field);return kt.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ie(61313);default:return Ie(60726)}})(i):i.fieldFilter!==void 0?(function(t){return kt.create(yo(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ie(58110);default:return Ie(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(i):i.compositeFilter!==void 0?(function(t){return fi.create(t.compositeFilter.filters.map((s=>U1(s))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Ie(1026)}})(t.compositeFilter.op))})(i):Ie(30097,{filter:i})}function pI(i){return nI[i]}function gI(i){return iI[i]}function yI(i){return rI[i]}function go(i){return{fieldPath:i.canonicalString()}}function yo(i){return Wt.fromServerFormat(i.fieldPath)}function z1(i){return i instanceof kt?(function(t){if(t.op==="=="){if(Ob(t.value))return{unaryFilter:{field:go(t.field),op:"IS_NAN"}};if(Mb(t.value))return{unaryFilter:{field:go(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Ob(t.value))return{unaryFilter:{field:go(t.field),op:"IS_NOT_NAN"}};if(Mb(t.value))return{unaryFilter:{field:go(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:go(t.field),op:gI(t.op),value:t.value}}})(i):i instanceof fi?(function(t){const s=t.getFilters().map((o=>z1(o)));return s.length===1?s[0]:{compositeFilter:{op:yI(t.op),filters:s}}})(i):Ie(54877,{filter:i})}function _I(i){const e=[];return i.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function B1(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}class ms{constructor(e,t,s,o,c=De.min(),u=De.min(),m=Zt.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=m,this.expectedCount=p}withSequenceNumber(e){return new ms(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new ms(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ms(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ms(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class vI{constructor(e){this.yt=e}}function bI(i){const e=dI({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?Lp(e,e.limit,"L"):e}class xI{constructor(){this.Cn=new EI}addToCollectionParentIndex(e,t){return this.Cn.add(t),ue.resolve()}getCollectionParents(e,t){return ue.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return ue.resolve()}deleteFieldIndex(e,t){return ue.resolve()}deleteAllFieldIndexes(e){return ue.resolve()}createTargetIndexes(e,t){return ue.resolve()}getDocumentsMatchingTarget(e,t){return ue.resolve(null)}getIndexType(e,t){return ue.resolve(0)}getFieldIndexes(e,t){return ue.resolve([])}getNextCollectionGroupToUpdate(e){return ue.resolve(null)}getMinOffset(e,t){return ue.resolve(bs.min())}getMinOffsetFromCollectionGroup(e,t){return ue.resolve(bs.min())}updateCollectionGroup(e,t,s){return ue.resolve()}updateIndexEntries(e,t){return ue.resolve()}}class EI{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t]||new Pt(lt.comparator),c=!o.has(s);return this.index[t]=o.add(s),c}has(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t];return o&&o.has(s)}getEntries(e){return(this.index[e]||new Pt(lt.comparator)).toArray()}}const Yb={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},q1=41943040;class gn{static withCacheSize(e){return new gn(e,gn.DEFAULT_COLLECTION_PERCENTILE,gn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}gn.DEFAULT_COLLECTION_PERCENTILE=10,gn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,gn.DEFAULT=new gn(q1,gn.DEFAULT_COLLECTION_PERCENTILE,gn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),gn.DISABLED=new gn(-1,0,0);class Do{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Do(0)}static cr(){return new Do(-1)}}const Qb="LruGarbageCollector",TI=1048576;function Kb([i,e],[t,s]){const o=Fe(i,t);return o===0?Fe(e,s):o}class wI{constructor(e){this.Ir=e,this.buffer=new Pt(Kb),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();Kb(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class AI{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ve(Qb,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){zo(t)?ve(Qb,"Ignoring IndexedDB error during garbage collection: ",t):await Uo(t)}await this.Vr(3e5)}))}}class SI{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((s=>Math.floor(t/100*s)))}nthSequenceNumber(e,t){if(t===0)return ue.resolve(Nf.ce);const s=new wI(t);return this.mr.forEachTarget(e,(o=>s.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>s.Ar(o))))).next((()=>s.maxValue))}removeTargets(e,t,s){return this.mr.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ve("LruGarbageCollector","Garbage collection skipped; disabled"),ue.resolve(Yb)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(ve("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Yb):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let s,o,c,u,m,p,g;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((x=>(x>this.params.maximumSequenceNumbersToCollect?(ve("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${x}`),o=this.params.maximumSequenceNumbersToCollect):o=x,u=Date.now(),this.nthSequenceNumber(e,o)))).next((x=>(s=x,m=Date.now(),this.removeTargets(e,s,t)))).next((x=>(c=x,p=Date.now(),this.removeOrphanedDocuments(e,s)))).next((x=>(g=Date.now(),mo()<=qe.DEBUG&&ve("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-v}ms
	Determined least recently used ${o} in `+(m-u)+`ms
	Removed ${c} targets in `+(p-m)+`ms
	Removed ${x} documents in `+(g-p)+`ms
Total Duration: ${g-v}ms`),ue.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:c,documentsRemoved:x}))))}}function NI(i,e){return new SI(i,e)}class CI{constructor(){this.changes=new wa((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,nn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?ue.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class RI{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class II{constructor(e,t,s,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(s=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(s!==null&&fc(s.mutation,o,In.empty(),ht.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.getLocalViewOfDocuments(e,s,He()).next((()=>s))))}getLocalViewOfDocuments(e,t,s=He()){const o=fa();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,s).next((c=>{let u=tc();return c.forEach(((m,p)=>{u=u.insert(m,p.overlayedDocument)})),u}))))}getOverlayedDocuments(e,t){const s=fa();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,He())))}populateOverlays(e,t,s){const o=[];return s.forEach((c=>{t.has(c)||o.push(c)})),this.documentOverlayCache.getOverlays(e,o).next((c=>{c.forEach(((u,m)=>{t.set(u,m)}))}))}computeViews(e,t,s,o){let c=Er();const u=hc(),m=(function(){return hc()})();return t.forEach(((p,g)=>{const v=s.get(g.key);o.has(g.key)&&(v===void 0||v.mutation instanceof Rs)?c=c.insert(g.key,g):v!==void 0?(u.set(g.key,v.mutation.getFieldMask()),fc(v.mutation,g,v.mutation.getFieldMask(),ht.now())):u.set(g.key,In.empty())})),this.recalculateAndSaveOverlays(e,c).next((p=>(p.forEach(((g,v)=>u.set(g,v))),t.forEach(((g,v)=>m.set(g,new RI(v,u.get(g)??null)))),m)))}recalculateAndSaveOverlays(e,t){const s=hc();let o=new mt(((u,m)=>u-m)),c=He();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((u=>{for(const m of u)m.keys().forEach((p=>{const g=t.get(p);if(g===null)return;let v=s.get(p)||In.empty();v=m.applyToLocalView(g,v),s.set(p,v);const x=(o.get(m.batchId)||He()).add(p);o=o.insert(m.batchId,x)}))})).next((()=>{const u=[],m=o.getReverseIterator();for(;m.hasNext();){const p=m.getNext(),g=p.key,v=p.value,x=T1();v.forEach((T=>{if(!c.has(T)){const I=R1(t.get(T),s.get(T));I!==null&&x.set(T,I),c=c.add(T)}})),u.push(this.documentOverlayCache.saveOverlays(e,g,x))}return ue.waitFor(u)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,t,s,o){return(function(u){return Ae.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):_1(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,o):this.getDocumentsMatchingCollectionQuery(e,t,s,o)}getNextDocuments(e,t,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,o).next((c=>{const u=o-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,o-c.size):ue.resolve(fa());let m=yc,p=c;return u.next((g=>ue.forEach(g,((v,x)=>(m<x.largestBatchId&&(m=x.largestBatchId),c.get(v)?ue.resolve():this.remoteDocumentCache.getEntry(e,v).next((T=>{p=p.insert(v,T)}))))).next((()=>this.populateOverlays(e,g,c))).next((()=>this.computeViews(e,p,g,He()))).next((v=>({batchId:m,changes:E1(v)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ae(t)).next((s=>{let o=tc();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,s,o){const c=t.collectionGroup;let u=tc();return this.indexManager.getCollectionParents(e,c).next((m=>ue.forEach(m,(p=>{const g=(function(x,T){return new Bo(T,null,x.explicitOrderBy.slice(),x.filters.slice(),x.limit,x.limitType,x.startAt,x.endAt)})(t,p.child(c));return this.getDocumentsMatchingCollectionQuery(e,g,s,o).next((v=>{v.forEach(((x,T)=>{u=u.insert(x,T)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,t,s,o){let c;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next((u=>(c=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,c,o)))).next((u=>{c.forEach(((p,g)=>{const v=g.getKey();u.get(v)===null&&(u=u.insert(v,nn.newInvalidDocument(v)))}));let m=tc();return u.forEach(((p,g)=>{const v=c.get(p);v!==void 0&&fc(v.mutation,g,In.empty(),ht.now()),Mf(t,g)&&(m=m.insert(p,g))})),m}))}}class DI{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return ue.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:zi(o.createTime)}})(t)),ue.resolve()}getNamedQuery(e,t){return ue.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(o){return{name:o.name,query:bI(o.bundledQuery),readTime:zi(o.readTime)}})(t)),ue.resolve()}}class MI{constructor(){this.overlays=new mt(Ae.comparator),this.qr=new Map}getOverlay(e,t){return ue.resolve(this.overlays.get(t))}getOverlays(e,t){const s=fa();return ue.forEach(t,(o=>this.getOverlay(e,o).next((c=>{c!==null&&s.set(o,c)})))).next((()=>s))}saveOverlays(e,t,s){return s.forEach(((o,c)=>{this.St(e,t,c)})),ue.resolve()}removeOverlaysForBatchId(e,t,s){const o=this.qr.get(s);return o!==void 0&&(o.forEach((c=>this.overlays=this.overlays.remove(c))),this.qr.delete(s)),ue.resolve()}getOverlaysForCollection(e,t,s){const o=fa(),c=t.length+1,u=new Ae(t.child("")),m=this.overlays.getIteratorFrom(u);for(;m.hasNext();){const p=m.getNext().value,g=p.getKey();if(!t.isPrefixOf(g.path))break;g.path.length===c&&p.largestBatchId>s&&o.set(p.getKey(),p)}return ue.resolve(o)}getOverlaysForCollectionGroup(e,t,s,o){let c=new mt(((g,v)=>g-v));const u=this.overlays.getIterator();for(;u.hasNext();){const g=u.getNext().value;if(g.getKey().getCollectionGroup()===t&&g.largestBatchId>s){let v=c.get(g.largestBatchId);v===null&&(v=fa(),c=c.insert(g.largestBatchId,v)),v.set(g.getKey(),g)}}const m=fa(),p=c.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((g,v)=>m.set(g,v))),!(m.size()>=o)););return ue.resolve(m)}St(e,t,s){const o=this.overlays.get(s.key);if(o!==null){const u=this.qr.get(o.largestBatchId).delete(s.key);this.qr.set(o.largestBatchId,u)}this.overlays=this.overlays.insert(s.key,new XR(t,s));let c=this.qr.get(t);c===void 0&&(c=He(),this.qr.set(t,c)),this.qr.set(t,c.add(s.key))}}class OI{constructor(){this.sessionToken=Zt.EMPTY_BYTE_STRING}getSessionToken(e){return ue.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ue.resolve()}}class Ig{constructor(){this.Qr=new Pt(Ft.$r),this.Ur=new Pt(Ft.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const s=new Ft(e,t);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,t){e.forEach((s=>this.addReference(s,t)))}removeReference(e,t){this.Gr(new Ft(e,t))}zr(e,t){e.forEach((s=>this.removeReference(s,t)))}jr(e){const t=new Ae(new lt([])),s=new Ft(t,e),o=new Ft(t,e+1),c=[];return this.Ur.forEachInRange([s,o],(u=>{this.Gr(u),c.push(u.key)})),c}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Ae(new lt([])),s=new Ft(t,e),o=new Ft(t,e+1);let c=He();return this.Ur.forEachInRange([s,o],(u=>{c=c.add(u.key)})),c}containsKey(e){const t=new Ft(e,0),s=this.Qr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class Ft{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Ae.comparator(e.key,t.key)||Fe(e.Yr,t.Yr)}static Kr(e,t){return Fe(e.Yr,t.Yr)||Ae.comparator(e.key,t.key)}}class kI{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Pt(Ft.$r)}checkEmpty(e){return ue.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,o){const c=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new KR(c,t,s,o);this.mutationQueue.push(u);for(const m of o)this.Zr=this.Zr.add(new Ft(m.key,c)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return ue.resolve(u)}lookupMutationBatch(e,t){return ue.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,o=this.ei(s),c=o<0?0:o;return ue.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return ue.resolve(this.mutationQueue.length===0?xg:this.tr-1)}getAllMutationBatches(e){return ue.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new Ft(t,0),o=new Ft(t,Number.POSITIVE_INFINITY),c=[];return this.Zr.forEachInRange([s,o],(u=>{const m=this.Xr(u.Yr);c.push(m)})),ue.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new Pt(Fe);return t.forEach((o=>{const c=new Ft(o,0),u=new Ft(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([c,u],(m=>{s=s.add(m.Yr)}))})),ue.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,o=s.length+1;let c=s;Ae.isDocumentKey(c)||(c=c.child(""));const u=new Ft(new Ae(c),0);let m=new Pt(Fe);return this.Zr.forEachWhile((p=>{const g=p.key.path;return!!s.isPrefixOf(g)&&(g.length===o&&(m=m.add(p.Yr)),!0)}),u),ue.resolve(this.ti(m))}ti(e){const t=[];return e.forEach((s=>{const o=this.Xr(s);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){We(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return ue.forEach(t.mutations,(o=>{const c=new Ft(o.key,t.batchId);return s=s.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,t){const s=new Ft(t,0),o=this.Zr.firstAfterOrEqual(s);return ue.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,ue.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class VI{constructor(e){this.ri=e,this.docs=(function(){return new mt(Ae.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,o=this.docs.get(s),c=o?o.size:0,u=this.ri(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:u}),this.size+=u-c,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return ue.resolve(s?s.document.mutableCopy():nn.newInvalidDocument(t))}getEntries(e,t){let s=Er();return t.forEach((o=>{const c=this.docs.get(o);s=s.insert(o,c?c.document.mutableCopy():nn.newInvalidDocument(o))})),ue.resolve(s)}getDocumentsMatchingQuery(e,t,s,o){let c=Er();const u=t.path,m=new Ae(u.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(m);for(;p.hasNext();){const{key:g,value:{document:v}}=p.getNext();if(!u.isPrefixOf(g.path))break;g.path.length>u.length+1||cR(lR(v),s)<=0||(o.has(v.key)||Mf(t,v))&&(c=c.insert(v.key,v.mutableCopy()))}return ue.resolve(c)}getAllFromCollectionGroup(e,t,s,o){Ie(9500)}ii(e,t){return ue.forEach(this.docs,(s=>t(s)))}newChangeBuffer(e){return new jI(this)}getSize(e){return ue.resolve(this.size)}}class jI extends CI{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((s,o)=>{o.isValidDocument()?t.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(s)})),ue.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class LI{constructor(e){this.persistence=e,this.si=new wa((t=>wg(t)),Ag),this.lastRemoteSnapshotVersion=De.min(),this.highestTargetId=0,this.oi=0,this._i=new Ig,this.targetCount=0,this.ai=Do.ur()}forEachTarget(e,t){return this.si.forEach(((s,o)=>t(o))),ue.resolve()}getLastRemoteSnapshotVersion(e){return ue.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ue.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ue.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.oi&&(this.oi=t),ue.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Do(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,ue.resolve()}updateTargetData(e,t){return this.Pr(t),ue.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,ue.resolve()}removeTargets(e,t,s){let o=0;const c=[];return this.si.forEach(((u,m)=>{m.sequenceNumber<=t&&s.get(m.targetId)===null&&(this.si.delete(u),c.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)})),ue.waitFor(c).next((()=>o))}getTargetCount(e){return ue.resolve(this.targetCount)}getTargetData(e,t){const s=this.si.get(t)||null;return ue.resolve(s)}addMatchingKeys(e,t,s){return this._i.Wr(t,s),ue.resolve()}removeMatchingKeys(e,t,s){this._i.zr(t,s);const o=this.persistence.referenceDelegate,c=[];return o&&t.forEach((u=>{c.push(o.markPotentiallyOrphaned(e,u))})),ue.waitFor(c)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),ue.resolve()}getMatchingKeysForTargetId(e,t){const s=this._i.Hr(t);return ue.resolve(s)}containsKey(e,t){return ue.resolve(this._i.containsKey(t))}}class F1{constructor(e,t){this.ui={},this.overlays={},this.ci=new Nf(0),this.li=!1,this.li=!0,this.hi=new OI,this.referenceDelegate=e(this),this.Pi=new LI(this),this.indexManager=new xI,this.remoteDocumentCache=(function(o){return new VI(o)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new vI(t),this.Ii=new DI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new MI,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.ui[e.toKey()];return s||(s=new kI(t,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,s){ve("MemoryPersistence","Starting transaction:",e);const o=new PI(this.ci.next());return this.referenceDelegate.Ei(),s(o).next((c=>this.referenceDelegate.di(o).next((()=>c)))).toPromise().then((c=>(o.raiseOnCommittedEvent(),c)))}Ai(e,t){return ue.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,t))))}}class PI extends hR{constructor(e){super(),this.currentSequenceNumber=e}}class Dg{constructor(e){this.persistence=e,this.Ri=new Ig,this.Vi=null}static mi(e){return new Dg(e)}get fi(){if(this.Vi)return this.Vi;throw Ie(60996)}addReference(e,t,s){return this.Ri.addReference(s,t),this.fi.delete(s.toString()),ue.resolve()}removeReference(e,t,s){return this.Ri.removeReference(s,t),this.fi.add(s.toString()),ue.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),ue.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((o=>this.fi.add(o.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((c=>this.fi.add(c.toString())))})).next((()=>s.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ue.forEach(this.fi,(s=>{const o=Ae.fromPath(s);return this.gi(e,o).next((c=>{c||t.removeEntry(o,De.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((s=>{s?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return ue.or([()=>ue.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class uf{constructor(e,t){this.persistence=e,this.pi=new wa((s=>mR(s.path)),((s,o)=>s.isEqual(o))),this.garbageCollector=NI(this,t)}static mi(e,t){return new uf(e,t)}Ei(){}di(e){return ue.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>t.next((o=>s+o))))}wr(e){let t=0;return this.pr(e,(s=>{t++})).next((()=>t))}pr(e,t){return ue.forEach(this.pi,((s,o)=>this.br(e,s,o).next((c=>c?ue.resolve():t(o)))))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const o=this.persistence.getRemoteDocumentCache(),c=o.newChangeBuffer();return o.ii(e,(u=>this.br(e,u,t).next((m=>{m||(s++,c.removeEntry(u,De.min()))})))).next((()=>c.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),ue.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),ue.resolve()}removeReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),ue.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),ue.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=jh(e.data.value)),t}br(e,t,s){return ue.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.pi.get(t);return ue.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Mg{constructor(e,t,s,o){this.targetId=e,this.fromCache=t,this.Es=s,this.ds=o}static As(e,t){let s=He(),o=He();for(const c of t.docChanges)switch(c.type){case 0:s=s.add(c.doc.key);break;case 1:o=o.add(c.doc.key)}return new Mg(e,t.fromCache,s,o)}}class UI{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class zI{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return fS()?8:fR(rn())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,s,o){const c={result:null};return this.ys(e,t).next((u=>{c.result=u})).next((()=>{if(!c.result)return this.ws(e,t,o,s).next((u=>{c.result=u}))})).next((()=>{if(c.result)return;const u=new UI;return this.Ss(e,t,u).next((m=>{if(c.result=m,this.Vs)return this.bs(e,t,u,m.size)}))})).next((()=>c.result))}bs(e,t,s,o){return s.documentReadCount<this.fs?(mo()<=qe.DEBUG&&ve("QueryEngine","SDK will not create cache indexes for query:",po(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ue.resolve()):(mo()<=qe.DEBUG&&ve("QueryEngine","Query:",po(t),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.gs*o?(mo()<=qe.DEBUG&&ve("QueryEngine","The SDK decides to create cache indexes for query:",po(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ui(t))):ue.resolve())}ys(e,t){if(Lb(t))return ue.resolve(null);let s=Ui(t);return this.indexManager.getIndexType(e,s).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=Lp(t,null,"F"),s=Ui(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next((c=>{const u=He(...c);return this.ps.getDocuments(e,u).next((m=>this.indexManager.getMinOffset(e,s).next((p=>{const g=this.Ds(t,m);return this.Cs(t,g,u,p.readTime)?this.ys(e,Lp(t,null,"F")):this.vs(e,g,t,p)}))))})))))}ws(e,t,s,o){return Lb(t)||o.isEqual(De.min())?ue.resolve(null):this.ps.getDocuments(e,s).next((c=>{const u=this.Ds(t,c);return this.Cs(t,u,s,o)?ue.resolve(null):(mo()<=qe.DEBUG&&ve("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),po(t)),this.vs(e,u,t,oR(o,yc)).next((m=>m)))}))}Ds(e,t){let s=new Pt(b1(e));return t.forEach(((o,c)=>{Mf(e,c)&&(s=s.add(c))})),s}Cs(e,t,s,o){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const c=e.limitType==="F"?t.last():t.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(o)>0)}Ss(e,t,s){return mo()<=qe.DEBUG&&ve("QueryEngine","Using full collection scan to execute query:",po(t)),this.ps.getDocumentsMatchingQuery(e,t,bs.min(),s)}vs(e,t,s,o){return this.ps.getDocumentsMatchingQuery(e,s,o).next((c=>(t.forEach((u=>{c=c.insert(u.key,u)})),c)))}}const Og="LocalStore",BI=3e8;class qI{constructor(e,t,s,o){this.persistence=e,this.Fs=t,this.serializer=o,this.Ms=new mt(Fe),this.xs=new wa((c=>wg(c)),Ag),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new II(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function FI(i,e,t,s){return new qI(i,e,t,s)}async function H1(i,e){const t=ke(i);return await t.persistence.runTransaction("Handle user change","readonly",(s=>{let o;return t.mutationQueue.getAllMutationBatches(s).next((c=>(o=c,t.Bs(e),t.mutationQueue.getAllMutationBatches(s)))).next((c=>{const u=[],m=[];let p=He();for(const g of o){u.push(g.batchId);for(const v of g.mutations)p=p.add(v.key)}for(const g of c){m.push(g.batchId);for(const v of g.mutations)p=p.add(v.key)}return t.localDocuments.getDocuments(s,p).next((g=>({Ls:g,removedBatchIds:u,addedBatchIds:m})))}))}))}function HI(i,e){const t=ke(i);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const o=e.batch.keys(),c=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(m,p,g,v){const x=g.batch,T=x.keys();let I=ue.resolve();return T.forEach((U=>{I=I.next((()=>v.getEntry(p,U))).next((q=>{const $=g.docVersions.get(U);We($!==null,48541),q.version.compareTo($)<0&&(x.applyToRemoteDocument(q,g),q.isValidDocument()&&(q.setReadTime(g.commitVersion),v.addEntry(q)))}))})),I.next((()=>m.mutationQueue.removeMutationBatch(p,x)))})(t,s,e,c).next((()=>c.apply(s))).next((()=>t.mutationQueue.performConsistencyCheck(s))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(m){let p=He();for(let g=0;g<m.mutationResults.length;++g)m.mutationResults[g].transformResults.length>0&&(p=p.add(m.batch.mutations[g].key));return p})(e)))).next((()=>t.localDocuments.getDocuments(s,o)))}))}function G1(i){const e=ke(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function GI(i,e){const t=ke(i),s=e.snapshotVersion;let o=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(c=>{const u=t.Ns.newChangeBuffer({trackRemovals:!0});o=t.Ms;const m=[];e.targetChanges.forEach(((v,x)=>{const T=o.get(x);if(!T)return;m.push(t.Pi.removeMatchingKeys(c,v.removedDocuments,x).next((()=>t.Pi.addMatchingKeys(c,v.addedDocuments,x))));let I=T.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(x)!==null?I=I.withResumeToken(Zt.EMPTY_BYTE_STRING,De.min()).withLastLimboFreeSnapshotVersion(De.min()):v.resumeToken.approximateByteSize()>0&&(I=I.withResumeToken(v.resumeToken,s)),o=o.insert(x,I),(function(q,$,ce){return q.resumeToken.approximateByteSize()===0||$.snapshotVersion.toMicroseconds()-q.snapshotVersion.toMicroseconds()>=BI?!0:ce.addedDocuments.size+ce.modifiedDocuments.size+ce.removedDocuments.size>0})(T,I,v)&&m.push(t.Pi.updateTargetData(c,I))}));let p=Er(),g=He();if(e.documentUpdates.forEach((v=>{e.resolvedLimboDocuments.has(v)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(c,v))})),m.push($I(c,u,e.documentUpdates).next((v=>{p=v.ks,g=v.qs}))),!s.isEqual(De.min())){const v=t.Pi.getLastRemoteSnapshotVersion(c).next((x=>t.Pi.setTargetsMetadata(c,c.currentSequenceNumber,s)));m.push(v)}return ue.waitFor(m).next((()=>u.apply(c))).next((()=>t.localDocuments.getLocalViewOfDocuments(c,p,g))).next((()=>p))})).then((c=>(t.Ms=o,c)))}function $I(i,e,t){let s=He(),o=He();return t.forEach((c=>s=s.add(c))),e.getEntries(i,s).next((c=>{let u=Er();return t.forEach(((m,p)=>{const g=c.get(m);p.isFoundDocument()!==g.isFoundDocument()&&(o=o.add(m)),p.isNoDocument()&&p.version.isEqual(De.min())?(e.removeEntry(m,p.readTime),u=u.insert(m,p)):!g.isValidDocument()||p.version.compareTo(g.version)>0||p.version.compareTo(g.version)===0&&g.hasPendingWrites?(e.addEntry(p),u=u.insert(m,p)):ve(Og,"Ignoring outdated watch update for ",m,". Current version:",g.version," Watch version:",p.version)})),{ks:u,qs:o}}))}function YI(i,e){const t=ke(i);return t.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=xg),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function QI(i,e){const t=ke(i);return t.persistence.runTransaction("Allocate target","readwrite",(s=>{let o;return t.Pi.getTargetData(s,e).next((c=>c?(o=c,ue.resolve(o)):t.Pi.allocateTargetId(s).next((u=>(o=new ms(e,u,"TargetPurposeListen",s.currentSequenceNumber),t.Pi.addTargetData(s,o).next((()=>o)))))))})).then((s=>{const o=t.Ms.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(s.targetId,s),t.xs.set(e,s.targetId)),s}))}async function qp(i,e,t){const s=ke(i),o=s.Ms.get(e),c=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",c,(u=>s.persistence.referenceDelegate.removeTarget(u,o)))}catch(u){if(!zo(u))throw u;ve(Og,`Failed to update sequence numbers for target ${e}: ${u}`)}s.Ms=s.Ms.remove(e),s.xs.delete(o.target)}function Xb(i,e,t){const s=ke(i);let o=De.min(),c=He();return s.persistence.runTransaction("Execute query","readwrite",(u=>(function(p,g,v){const x=ke(p),T=x.xs.get(v);return T!==void 0?ue.resolve(x.Ms.get(T)):x.Pi.getTargetData(g,v)})(s,u,Ui(e)).next((m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(u,m.targetId).next((p=>{c=p}))})).next((()=>s.Fs.getDocumentsMatchingQuery(u,e,t?o:De.min(),t?c:He()))).next((m=>(KI(s,OR(e),m),{documents:m,Qs:c})))))}function KI(i,e,t){let s=i.Os.get(e)||De.min();t.forEach(((o,c)=>{c.readTime.compareTo(s)>0&&(s=c.readTime)})),i.Os.set(e,s)}class Wb{constructor(){this.activeTargetIds=UR()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class XI{constructor(){this.Mo=new Wb,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,s){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Wb,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class WI{Oo(e){}shutdown(){}}const Zb="ConnectivityMonitor";class Jb{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ve(Zb,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ve(Zb,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Th=null;function Fp(){return Th===null?Th=(function(){return 268435456+Math.round(2147483648*Math.random())})():Th++,"0x"+Th.toString(16)}const op="RestConnection",ZI={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class JI{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${s}/databases/${o}`,this.Wo=this.databaseId.database===rf?`project_id=${s}`:`project_id=${s}&database_id=${o}`}Go(e,t,s,o,c){const u=Fp(),m=this.zo(e,t.toUriEncodedString());ve(op,`Sending RPC '${e}' ${u}:`,m,s);const p={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(p,o,c);const{host:g}=new URL(m),v=Vo(g);return this.Jo(e,m,p,s,v).then((x=>(ve(op,`Received RPC '${e}' ${u}: `,x),x)),(x=>{throw No(op,`RPC '${e}' ${u} failed with error: `,x,"url: ",m,"request:",s),x}))}Ho(e,t,s,o,c,u){return this.Go(e,t,s,o,c)}jo(e,t,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Po})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,c)=>e[c]=o)),s&&s.headers.forEach(((o,c)=>e[c]=o))}zo(e,t){const s=ZI[e];return`${this.Uo}/v1/${t}:${s}`}terminate(){}}class eD{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const en="WebChannelConnection";class tD extends JI{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,s,o,c){const u=Fp();return new Promise(((m,p)=>{const g=new QE;g.setWithCredentials(!0),g.listenOnce(KE.COMPLETE,(()=>{try{switch(g.getLastErrorCode()){case Vh.NO_ERROR:const x=g.getResponseJson();ve(en,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(x)),m(x);break;case Vh.TIMEOUT:ve(en,`RPC '${e}' ${u} timed out`),p(new _e(ae.DEADLINE_EXCEEDED,"Request time out"));break;case Vh.HTTP_ERROR:const T=g.getStatus();if(ve(en,`RPC '${e}' ${u} failed with status:`,T,"response text:",g.getResponseText()),T>0){let I=g.getResponseJson();Array.isArray(I)&&(I=I[0]);const U=I?.error;if(U&&U.status&&U.message){const q=(function(ce){const G=ce.toLowerCase().replace(/_/g,"-");return Object.values(ae).indexOf(G)>=0?G:ae.UNKNOWN})(U.status);p(new _e(q,U.message))}else p(new _e(ae.UNKNOWN,"Server responded with status "+g.getStatus()))}else p(new _e(ae.UNAVAILABLE,"Connection failed."));break;default:Ie(9055,{l_:e,streamId:u,h_:g.getLastErrorCode(),P_:g.getLastError()})}}finally{ve(en,`RPC '${e}' ${u} completed.`)}}));const v=JSON.stringify(o);ve(en,`RPC '${e}' ${u} sending request:`,o),g.send(t,"POST",v,s,15)}))}T_(e,t,s){const o=Fp(),c=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=ZE(),m=WE(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(p.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(p.useFetchStreams=!0),this.jo(p.initMessageHeaders,t,s),p.encodeInitMessageHeaders=!0;const v=c.join("");ve(en,`Creating RPC '${e}' stream ${o}: ${v}`,p);const x=u.createWebChannel(v,p);this.I_(x);let T=!1,I=!1;const U=new eD({Yo:$=>{I?ve(en,`Not sending because RPC '${e}' stream ${o} is closed:`,$):(T||(ve(en,`Opening RPC '${e}' stream ${o} transport.`),x.open(),T=!0),ve(en,`RPC '${e}' stream ${o} sending:`,$),x.send($))},Zo:()=>x.close()}),q=($,ce,G)=>{$.listen(ce,(te=>{try{G(te)}catch(ie){setTimeout((()=>{throw ie}),0)}}))};return q(x,ec.EventType.OPEN,(()=>{I||(ve(en,`RPC '${e}' stream ${o} transport opened.`),U.o_())})),q(x,ec.EventType.CLOSE,(()=>{I||(I=!0,ve(en,`RPC '${e}' stream ${o} transport closed`),U.a_(),this.E_(x))})),q(x,ec.EventType.ERROR,($=>{I||(I=!0,No(en,`RPC '${e}' stream ${o} transport errored. Name:`,$.name,"Message:",$.message),U.a_(new _e(ae.UNAVAILABLE,"The operation could not be completed")))})),q(x,ec.EventType.MESSAGE,($=>{if(!I){const ce=$.data[0];We(!!ce,16349);const G=ce,te=G?.error||G[0]?.error;if(te){ve(en,`RPC '${e}' stream ${o} received error:`,te);const ie=te.status;let de=(function(C){const N=Ot[C];if(N!==void 0)return M1(N)})(ie),he=te.message;de===void 0&&(de=ae.INTERNAL,he="Unknown error status: "+ie+" with message "+te.message),I=!0,U.a_(new _e(de,he)),x.close()}else ve(en,`RPC '${e}' stream ${o} received:`,ce),U.u_(ce)}})),q(m,XE.STAT_EVENT,($=>{$.stat===Ip.PROXY?ve(en,`RPC '${e}' stream ${o} detected buffering proxy`):$.stat===Ip.NOPROXY&&ve(en,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{U.__()}),0),U}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function lp(){return typeof document<"u"?document:null}function jf(i){return new sI(i,!0)}class $1{constructor(e,t,s=1e3,o=1.5,c=6e4){this.Mi=e,this.timerId=t,this.d_=s,this.A_=o,this.R_=c,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),o=Math.max(0,t-s);o>0&&ve("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const ex="PersistentStream";class Y1{constructor(e,t,s,o,c,u,m,p){this.Mi=e,this.S_=s,this.b_=o,this.connection=c,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=m,this.listener=p,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new $1(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===ae.RESOURCE_EXHAUSTED?(xr(t.toString()),xr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===ae.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,o])=>{this.D_===t&&this.G_(s,o)}),(s=>{e((()=>{const o=new _e(ae.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(o)}))}))}G_(e,t){const s=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{s((()=>this.z_(o)))})),this.stream.onMessage((o=>{s((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ve(ex,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(ve(ex,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class nD extends Y1{constructor(e,t,s,o,c,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,o,u),this.serializer=c}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=lI(this.serializer,e),s=(function(c){if(!("targetChange"in c))return De.min();const u=c.targetChange;return u.targetIds&&u.targetIds.length?De.min():u.readTime?zi(u.readTime):De.min()})(e);return this.listener.H_(t,s)}Y_(e){const t={};t.database=Bp(this.serializer),t.addTarget=(function(c,u){let m;const p=u.target;if(m=Vp(p)?{documents:hI(c,p)}:{query:fI(c,p).ft},m.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){m.resumeToken=V1(c,u.resumeToken);const g=Pp(c,u.expectedCount);g!==null&&(m.expectedCount=g)}else if(u.snapshotVersion.compareTo(De.min())>0){m.readTime=cf(c,u.snapshotVersion.toTimestamp());const g=Pp(c,u.expectedCount);g!==null&&(m.expectedCount=g)}return m})(this.serializer,e);const s=mI(this.serializer,e);s&&(t.labels=s),this.q_(t)}Z_(e){const t={};t.database=Bp(this.serializer),t.removeTarget=e,this.q_(t)}}class iD extends Y1{constructor(e,t,s,o,c,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,o,u),this.serializer=c}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return We(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,We(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){We(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=uI(e.writeResults,e.commitTime),s=zi(e.commitTime);return this.listener.na(s,t)}ra(){const e={};e.database=Bp(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((s=>cI(this.serializer,s)))};this.q_(t)}}class rD{}class sD extends rD{constructor(e,t,s,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new _e(ae.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,u])=>this.connection.Go(e,Up(t,s),o,c,u))).catch((c=>{throw c.name==="FirebaseError"?(c.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new _e(ae.UNKNOWN,c.toString())}))}Ho(e,t,s,o,c){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,m])=>this.connection.Ho(e,Up(t,s),o,u,m,c))).catch((u=>{throw u.name==="FirebaseError"?(u.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new _e(ae.UNKNOWN,u.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class aD{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(xr(t),this.aa=!1):ve("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Ea="RemoteStore";class oD{constructor(e,t,s,o,c){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=c,this.Aa.Oo((u=>{s.enqueueAndForget((async()=>{Aa(this)&&(ve(Ea,"Restarting streams for network reachability change."),await(async function(p){const g=ke(p);g.Ea.add(4),await Lc(g),g.Ra.set("Unknown"),g.Ea.delete(4),await Lf(g)})(this))}))})),this.Ra=new aD(s,o)}}async function Lf(i){if(Aa(i))for(const e of i.da)await e(!0)}async function Lc(i){for(const e of i.da)await e(!1)}function Q1(i,e){const t=ke(i);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Lg(t)?jg(t):qo(t).O_()&&Vg(t,e))}function kg(i,e){const t=ke(i),s=qo(t);t.Ia.delete(e),s.O_()&&K1(t,e),t.Ia.size===0&&(s.O_()?s.L_():Aa(t)&&t.Ra.set("Unknown"))}function Vg(i,e){if(i.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(De.min())>0){const t=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}qo(i).Y_(e)}function K1(i,e){i.Va.Ue(e),qo(i).Z_(e)}function jg(i){i.Va=new tI({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),At:e=>i.Ia.get(e)||null,ht:()=>i.datastore.serializer.databaseId}),qo(i).start(),i.Ra.ua()}function Lg(i){return Aa(i)&&!qo(i).x_()&&i.Ia.size>0}function Aa(i){return ke(i).Ea.size===0}function X1(i){i.Va=void 0}async function lD(i){i.Ra.set("Online")}async function cD(i){i.Ia.forEach(((e,t)=>{Vg(i,e)}))}async function uD(i,e){X1(i),Lg(i)?(i.Ra.ha(e),jg(i)):i.Ra.set("Unknown")}async function hD(i,e,t){if(i.Ra.set("Online"),e instanceof k1&&e.state===2&&e.cause)try{await(async function(o,c){const u=c.cause;for(const m of c.targetIds)o.Ia.has(m)&&(await o.remoteSyncer.rejectListen(m,u),o.Ia.delete(m),o.Va.removeTarget(m))})(i,e)}catch(s){ve(Ea,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await hf(i,s)}else if(e instanceof Uh?i.Va.Ze(e):e instanceof O1?i.Va.st(e):i.Va.tt(e),!t.isEqual(De.min()))try{const s=await G1(i.localStore);t.compareTo(s)>=0&&await(function(c,u){const m=c.Va.Tt(u);return m.targetChanges.forEach(((p,g)=>{if(p.resumeToken.approximateByteSize()>0){const v=c.Ia.get(g);v&&c.Ia.set(g,v.withResumeToken(p.resumeToken,u))}})),m.targetMismatches.forEach(((p,g)=>{const v=c.Ia.get(p);if(!v)return;c.Ia.set(p,v.withResumeToken(Zt.EMPTY_BYTE_STRING,v.snapshotVersion)),K1(c,p);const x=new ms(v.target,p,g,v.sequenceNumber);Vg(c,x)})),c.remoteSyncer.applyRemoteEvent(m)})(i,t)}catch(s){ve(Ea,"Failed to raise snapshot:",s),await hf(i,s)}}async function hf(i,e,t){if(!zo(e))throw e;i.Ea.add(1),await Lc(i),i.Ra.set("Offline"),t||(t=()=>G1(i.localStore)),i.asyncQueue.enqueueRetryable((async()=>{ve(Ea,"Retrying IndexedDB access"),await t(),i.Ea.delete(1),await Lf(i)}))}function W1(i,e){return e().catch((t=>hf(i,t,e)))}async function Pf(i){const e=ke(i),t=ws(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:xg;for(;fD(e);)try{const o=await YI(e.localStore,s);if(o===null){e.Ta.length===0&&t.L_();break}s=o.batchId,dD(e,o)}catch(o){await hf(e,o)}Z1(e)&&J1(e)}function fD(i){return Aa(i)&&i.Ta.length<10}function dD(i,e){i.Ta.push(e);const t=ws(i);t.O_()&&t.X_&&t.ea(e.mutations)}function Z1(i){return Aa(i)&&!ws(i).x_()&&i.Ta.length>0}function J1(i){ws(i).start()}async function mD(i){ws(i).ra()}async function pD(i){const e=ws(i);for(const t of i.Ta)e.ea(t.mutations)}async function gD(i,e,t){const s=i.Ta.shift(),o=Ng.from(s,e,t);await W1(i,(()=>i.remoteSyncer.applySuccessfulWrite(o))),await Pf(i)}async function yD(i,e){e&&ws(i).X_&&await(async function(s,o){if((function(u){return ZR(u)&&u!==ae.ABORTED})(o.code)){const c=s.Ta.shift();ws(s).B_(),await W1(s,(()=>s.remoteSyncer.rejectFailedWrite(c.batchId,o))),await Pf(s)}})(i,e),Z1(i)&&J1(i)}async function tx(i,e){const t=ke(i);t.asyncQueue.verifyOperationInProgress(),ve(Ea,"RemoteStore received new credentials");const s=Aa(t);t.Ea.add(3),await Lc(t),s&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Lf(t)}async function _D(i,e){const t=ke(i);e?(t.Ea.delete(2),await Lf(t)):e||(t.Ea.add(2),await Lc(t),t.Ra.set("Unknown"))}function qo(i){return i.ma||(i.ma=(function(t,s,o){const c=ke(t);return c.sa(),new nD(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)})(i.datastore,i.asyncQueue,{Xo:lD.bind(null,i),t_:cD.bind(null,i),r_:uD.bind(null,i),H_:hD.bind(null,i)}),i.da.push((async e=>{e?(i.ma.B_(),Lg(i)?jg(i):i.Ra.set("Unknown")):(await i.ma.stop(),X1(i))}))),i.ma}function ws(i){return i.fa||(i.fa=(function(t,s,o){const c=ke(t);return c.sa(),new iD(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)})(i.datastore,i.asyncQueue,{Xo:()=>Promise.resolve(),t_:mD.bind(null,i),r_:yD.bind(null,i),ta:pD.bind(null,i),na:gD.bind(null,i)}),i.da.push((async e=>{e?(i.fa.B_(),await Pf(i)):(await i.fa.stop(),i.Ta.length>0&&(ve(Ea,`Stopping write stream with ${i.Ta.length} pending writes`),i.Ta=[]))}))),i.fa}class Pg{constructor(e,t,s,o,c){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=o,this.removalCallback=c,this.deferred=new _r,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,o,c){const u=Date.now()+s,m=new Pg(e,t,u,o,c);return m.start(s),m}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new _e(ae.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ug(i,e){if(xr("AsyncQueue",`${e}: ${i}`),zo(i))return new _e(ae.UNAVAILABLE,`${e}: ${i}`);throw i}class To{static emptySet(e){return new To(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||Ae.comparator(t.key,s.key):(t,s)=>Ae.comparator(t.key,s.key),this.keyedMap=tc(),this.sortedSet=new mt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,s)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof To)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,c=s.getNext().key;if(!o.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new To;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}class nx{constructor(){this.ga=new mt(Ae.comparator)}track(e){const t=e.doc.key,s=this.ga.get(t);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(t,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(t):e.type===1&&s.type===2?this.ga=this.ga.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Ie(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,s)=>{e.push(s)})),e}}class Mo{constructor(e,t,s,o,c,u,m,p,g){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=c,this.fromCache=u,this.syncStateChanged=m,this.excludesMetadataChanges=p,this.hasCachedResults=g}static fromInitialDocuments(e,t,s,o,c){const u=[];return t.forEach((m=>{u.push({type:0,doc:m})})),new Mo(e,t,To.emptySet(t),u,s,o,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Df(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==s[o].type||!t[o].doc.isEqual(s[o].doc))return!1;return!0}}class vD{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class bD{constructor(){this.queries=ix(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,s){const o=ke(t),c=o.queries;o.queries=ix(),c.forEach(((u,m)=>{for(const p of m.Sa)p.onError(s)}))})(this,new _e(ae.ABORTED,"Firestore shutting down"))}}function ix(){return new wa((i=>v1(i)),Df)}async function zg(i,e){const t=ke(i);let s=3;const o=e.query;let c=t.queries.get(o);c?!c.ba()&&e.Da()&&(s=2):(c=new vD,s=e.Da()?0:1);try{switch(s){case 0:c.wa=await t.onListen(o,!0);break;case 1:c.wa=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(u){const m=Ug(u,`Initialization of query '${po(e.query)}' failed`);return void e.onError(m)}t.queries.set(o,c),c.Sa.push(e),e.va(t.onlineState),c.wa&&e.Fa(c.wa)&&qg(t)}async function Bg(i,e){const t=ke(i),s=e.query;let o=3;const c=t.queries.get(s);if(c){const u=c.Sa.indexOf(e);u>=0&&(c.Sa.splice(u,1),c.Sa.length===0?o=e.Da()?0:1:!c.ba()&&e.Da()&&(o=2))}switch(o){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function xD(i,e){const t=ke(i);let s=!1;for(const o of e){const c=o.query,u=t.queries.get(c);if(u){for(const m of u.Sa)m.Fa(o)&&(s=!0);u.wa=o}}s&&qg(t)}function ED(i,e,t){const s=ke(i),o=s.queries.get(e);if(o)for(const c of o.Sa)c.onError(t);s.queries.delete(e)}function qg(i){i.Ca.forEach((e=>{e.next()}))}var Hp,rx;(rx=Hp||(Hp={})).Ma="default",rx.Cache="cache";class Fg{constructor(e,t,s){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new Mo(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const s=t!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Mo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Hp.Cache}}class eT{constructor(e){this.key=e}}class tT{constructor(e){this.key=e}}class TD{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=He(),this.mutatedKeys=He(),this.eu=b1(e),this.tu=new To(this.eu)}get nu(){return this.Ya}ru(e,t){const s=t?t.iu:new nx,o=t?t.tu:this.tu;let c=t?t.mutatedKeys:this.mutatedKeys,u=o,m=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,g=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((v,x)=>{const T=o.get(v),I=Mf(this.query,x)?x:null,U=!!T&&this.mutatedKeys.has(T.key),q=!!I&&(I.hasLocalMutations||this.mutatedKeys.has(I.key)&&I.hasCommittedMutations);let $=!1;T&&I?T.data.isEqual(I.data)?U!==q&&(s.track({type:3,doc:I}),$=!0):this.su(T,I)||(s.track({type:2,doc:I}),$=!0,(p&&this.eu(I,p)>0||g&&this.eu(I,g)<0)&&(m=!0)):!T&&I?(s.track({type:0,doc:I}),$=!0):T&&!I&&(s.track({type:1,doc:T}),$=!0,(p||g)&&(m=!0)),$&&(I?(u=u.add(I),c=q?c.add(v):c.delete(v)):(u=u.delete(v),c=c.delete(v)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const v=this.query.limitType==="F"?u.last():u.first();u=u.delete(v.key),c=c.delete(v.key),s.track({type:1,doc:v})}return{tu:u,iu:s,Cs:m,mutatedKeys:c}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,o){const c=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const u=e.iu.ya();u.sort(((v,x)=>(function(I,U){const q=$=>{switch($){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ie(20277,{Rt:$})}};return q(I)-q(U)})(v.type,x.type)||this.eu(v.doc,x.doc))),this.ou(s),o=o??!1;const m=t&&!o?this._u():[],p=this.Xa.size===0&&this.current&&!o?1:0,g=p!==this.Za;return this.Za=p,u.length!==0||g?{snapshot:new Mo(this.query,e.tu,c,u,e.mutatedKeys,p===0,g,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:m}:{au:m}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new nx,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=He(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const t=[];return e.forEach((s=>{this.Xa.has(s)||t.push(new tT(s))})),this.Xa.forEach((s=>{e.has(s)||t.push(new eT(s))})),t}cu(e){this.Ya=e.Qs,this.Xa=He();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Mo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Hg="SyncEngine";class wD{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class AD{constructor(e){this.key=e,this.hu=!1}}class SD{constructor(e,t,s,o,c,u){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=o,this.currentUser=c,this.maxConcurrentLimboResolutions=u,this.Pu={},this.Tu=new wa((m=>v1(m)),Df),this.Iu=new Map,this.Eu=new Set,this.du=new mt(Ae.comparator),this.Au=new Map,this.Ru=new Ig,this.Vu={},this.mu=new Map,this.fu=Do.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function ND(i,e,t=!0){const s=oT(i);let o;const c=s.Tu.get(e);return c?(s.sharedClientState.addLocalQueryTarget(c.targetId),o=c.view.lu()):o=await nT(s,e,t,!0),o}async function CD(i,e){const t=oT(i);await nT(t,e,!0,!1)}async function nT(i,e,t,s){const o=await QI(i.localStore,Ui(e)),c=o.targetId,u=i.sharedClientState.addLocalQueryTarget(c,t);let m;return s&&(m=await RD(i,e,c,u==="current",o.resumeToken)),i.isPrimaryClient&&t&&Q1(i.remoteStore,o),m}async function RD(i,e,t,s,o){i.pu=(x,T,I)=>(async function(q,$,ce,G){let te=$.view.ru(ce);te.Cs&&(te=await Xb(q.localStore,$.query,!1).then((({documents:D})=>$.view.ru(D,te))));const ie=G&&G.targetChanges.get($.targetId),de=G&&G.targetMismatches.get($.targetId)!=null,he=$.view.applyChanges(te,q.isPrimaryClient,ie,de);return ax(q,$.targetId,he.au),he.snapshot})(i,x,T,I);const c=await Xb(i.localStore,e,!0),u=new TD(e,c.Qs),m=u.ru(c.documents),p=jc.createSynthesizedTargetChangeForCurrentChange(t,s&&i.onlineState!=="Offline",o),g=u.applyChanges(m,i.isPrimaryClient,p);ax(i,t,g.au);const v=new wD(e,t,u);return i.Tu.set(e,v),i.Iu.has(t)?i.Iu.get(t).push(e):i.Iu.set(t,[e]),g.snapshot}async function ID(i,e,t){const s=ke(i),o=s.Tu.get(e),c=s.Iu.get(o.targetId);if(c.length>1)return s.Iu.set(o.targetId,c.filter((u=>!Df(u,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await qp(s.localStore,o.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(o.targetId),t&&kg(s.remoteStore,o.targetId),Gp(s,o.targetId)})).catch(Uo)):(Gp(s,o.targetId),await qp(s.localStore,o.targetId,!0))}async function DD(i,e){const t=ke(i),s=t.Tu.get(e),o=t.Iu.get(s.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),kg(t.remoteStore,s.targetId))}async function MD(i,e,t){const s=UD(i);try{const o=await(function(u,m){const p=ke(u),g=ht.now(),v=m.reduce(((I,U)=>I.add(U.key)),He());let x,T;return p.persistence.runTransaction("Locally write mutations","readwrite",(I=>{let U=Er(),q=He();return p.Ns.getEntries(I,v).next(($=>{U=$,U.forEach(((ce,G)=>{G.isValidDocument()||(q=q.add(ce))}))})).next((()=>p.localDocuments.getOverlayedDocuments(I,U))).next(($=>{x=$;const ce=[];for(const G of m){const te=YR(G,x.get(G.key).overlayedDocument);te!=null&&ce.push(new Rs(G.key,te,h1(te.value.mapValue),ui.exists(!0)))}return p.mutationQueue.addMutationBatch(I,g,ce,m)})).next(($=>{T=$;const ce=$.applyToLocalDocumentSet(x,q);return p.documentOverlayCache.saveOverlays(I,$.batchId,ce)}))})).then((()=>({batchId:T.batchId,changes:E1(x)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),(function(u,m,p){let g=u.Vu[u.currentUser.toKey()];g||(g=new mt(Fe)),g=g.insert(m,p),u.Vu[u.currentUser.toKey()]=g})(s,o.batchId,t),await Pc(s,o.changes),await Pf(s.remoteStore)}catch(o){const c=Ug(o,"Failed to persist write");t.reject(c)}}async function iT(i,e){const t=ke(i);try{const s=await GI(t.localStore,e);e.targetChanges.forEach(((o,c)=>{const u=t.Au.get(c);u&&(We(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?u.hu=!0:o.modifiedDocuments.size>0?We(u.hu,14607):o.removedDocuments.size>0&&(We(u.hu,42227),u.hu=!1))})),await Pc(t,s,e)}catch(s){await Uo(s)}}function sx(i,e,t){const s=ke(i);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const o=[];s.Tu.forEach(((c,u)=>{const m=u.view.va(e);m.snapshot&&o.push(m.snapshot)})),(function(u,m){const p=ke(u);p.onlineState=m;let g=!1;p.queries.forEach(((v,x)=>{for(const T of x.Sa)T.va(m)&&(g=!0)})),g&&qg(p)})(s.eventManager,e),o.length&&s.Pu.H_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function OD(i,e,t){const s=ke(i);s.sharedClientState.updateQueryState(e,"rejected",t);const o=s.Au.get(e),c=o&&o.key;if(c){let u=new mt(Ae.comparator);u=u.insert(c,nn.newNoDocument(c,De.min()));const m=He().add(c),p=new Vf(De.min(),new Map,new mt(Fe),u,m);await iT(s,p),s.du=s.du.remove(c),s.Au.delete(e),Gg(s)}else await qp(s.localStore,e,!1).then((()=>Gp(s,e,t))).catch(Uo)}async function kD(i,e){const t=ke(i),s=e.batch.batchId;try{const o=await HI(t.localStore,e);sT(t,s,null),rT(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await Pc(t,o)}catch(o){await Uo(o)}}async function VD(i,e,t){const s=ke(i);try{const o=await(function(u,m){const p=ke(u);return p.persistence.runTransaction("Reject batch","readwrite-primary",(g=>{let v;return p.mutationQueue.lookupMutationBatch(g,m).next((x=>(We(x!==null,37113),v=x.keys(),p.mutationQueue.removeMutationBatch(g,x)))).next((()=>p.mutationQueue.performConsistencyCheck(g))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(g,v,m))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,v))).next((()=>p.localDocuments.getDocuments(g,v)))}))})(s.localStore,e);sT(s,e,t),rT(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await Pc(s,o)}catch(o){await Uo(o)}}function rT(i,e){(i.mu.get(e)||[]).forEach((t=>{t.resolve()})),i.mu.delete(e)}function sT(i,e,t){const s=ke(i);let o=s.Vu[s.currentUser.toKey()];if(o){const c=o.get(e);c&&(t?c.reject(t):c.resolve(),o=o.remove(e)),s.Vu[s.currentUser.toKey()]=o}}function Gp(i,e,t=null){i.sharedClientState.removeLocalQueryTarget(e);for(const s of i.Iu.get(e))i.Tu.delete(s),t&&i.Pu.yu(s,t);i.Iu.delete(e),i.isPrimaryClient&&i.Ru.jr(e).forEach((s=>{i.Ru.containsKey(s)||aT(i,s)}))}function aT(i,e){i.Eu.delete(e.path.canonicalString());const t=i.du.get(e);t!==null&&(kg(i.remoteStore,t),i.du=i.du.remove(e),i.Au.delete(t),Gg(i))}function ax(i,e,t){for(const s of t)s instanceof eT?(i.Ru.addReference(s.key,e),jD(i,s)):s instanceof tT?(ve(Hg,"Document no longer in limbo: "+s.key),i.Ru.removeReference(s.key,e),i.Ru.containsKey(s.key)||aT(i,s.key)):Ie(19791,{wu:s})}function jD(i,e){const t=e.key,s=t.path.canonicalString();i.du.get(t)||i.Eu.has(s)||(ve(Hg,"New document in limbo: "+t),i.Eu.add(s),Gg(i))}function Gg(i){for(;i.Eu.size>0&&i.du.size<i.maxConcurrentLimboResolutions;){const e=i.Eu.values().next().value;i.Eu.delete(e);const t=new Ae(lt.fromString(e)),s=i.fu.next();i.Au.set(s,new AD(t)),i.du=i.du.insert(t,s),Q1(i.remoteStore,new ms(Ui(If(t.path)),s,"TargetPurposeLimboResolution",Nf.ce))}}async function Pc(i,e,t){const s=ke(i),o=[],c=[],u=[];s.Tu.isEmpty()||(s.Tu.forEach(((m,p)=>{u.push(s.pu(p,e,t).then((g=>{if((g||t)&&s.isPrimaryClient){const v=g?!g.fromCache:t?.targetChanges.get(p.targetId)?.current;s.sharedClientState.updateQueryState(p.targetId,v?"current":"not-current")}if(g){o.push(g);const v=Mg.As(p.targetId,g);c.push(v)}})))})),await Promise.all(u),s.Pu.H_(o),await(async function(p,g){const v=ke(p);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",(x=>ue.forEach(g,(T=>ue.forEach(T.Es,(I=>v.persistence.referenceDelegate.addReference(x,T.targetId,I))).next((()=>ue.forEach(T.ds,(I=>v.persistence.referenceDelegate.removeReference(x,T.targetId,I)))))))))}catch(x){if(!zo(x))throw x;ve(Og,"Failed to update sequence numbers: "+x)}for(const x of g){const T=x.targetId;if(!x.fromCache){const I=v.Ms.get(T),U=I.snapshotVersion,q=I.withLastLimboFreeSnapshotVersion(U);v.Ms=v.Ms.insert(T,q)}}})(s.localStore,c))}async function LD(i,e){const t=ke(i);if(!t.currentUser.isEqual(e)){ve(Hg,"User change. New user:",e.toKey());const s=await H1(t.localStore,e);t.currentUser=e,(function(c,u){c.mu.forEach((m=>{m.forEach((p=>{p.reject(new _e(ae.CANCELLED,u))}))})),c.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Pc(t,s.Ls)}}function PD(i,e){const t=ke(i),s=t.Au.get(e);if(s&&s.hu)return He().add(s.key);{let o=He();const c=t.Iu.get(e);if(!c)return o;for(const u of c){const m=t.Tu.get(u);o=o.unionWith(m.view.nu)}return o}}function oT(i){const e=ke(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=iT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=PD.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=OD.bind(null,e),e.Pu.H_=xD.bind(null,e.eventManager),e.Pu.yu=ED.bind(null,e.eventManager),e}function UD(i){const e=ke(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=kD.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=VD.bind(null,e),e}class ff{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=jf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return FI(this.persistence,new zI,e.initialUser,this.serializer)}Cu(e){return new F1(Dg.mi,this.serializer)}Du(e){return new XI}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}ff.provider={build:()=>new ff};class zD extends ff{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){We(this.persistence.referenceDelegate instanceof uf,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new AI(s,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?gn.withCacheSize(this.cacheSizeBytes):gn.DEFAULT;return new F1((s=>uf.mi(s,t)),this.serializer)}}class $p{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>sx(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=LD.bind(null,this.syncEngine),await _D(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new bD})()}createDatastore(e){const t=jf(e.databaseInfo.databaseId),s=(function(c){return new tD(c)})(e.databaseInfo);return(function(c,u,m,p){return new sD(c,u,m,p)})(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return(function(s,o,c,u,m){return new oD(s,o,c,u,m)})(this.localStore,this.datastore,e.asyncQueue,(t=>sx(this.syncEngine,t,0)),(function(){return Jb.v()?new Jb:new WI})())}createSyncEngine(e,t){return(function(o,c,u,m,p,g,v){const x=new SD(o,c,u,m,p,g);return v&&(x.gu=!0),x})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const s=ke(t);ve(Ea,"RemoteStore shutting down."),s.Ea.add(5),await Lc(s),s.Aa.shutdown(),s.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}$p.provider={build:()=>new $p};class $g{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):xr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}const As="FirestoreClient";class BD{constructor(e,t,s,o,c){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=o,this.user=tn.UNAUTHENTICATED,this.clientId=vg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(s,(async u=>{ve(As,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(s,(u=>(ve(As,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new _r;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=Ug(t,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function cp(i,e){i.asyncQueue.verifyOperationInProgress(),ve(As,"Initializing OfflineComponentProvider");const t=i.configuration;await e.initialize(t);let s=t.initialUser;i.setCredentialChangeListener((async o=>{s.isEqual(o)||(await H1(e.localStore,o),s=o)})),e.persistence.setDatabaseDeletedListener((()=>i.terminate())),i._offlineComponents=e}async function ox(i,e){i.asyncQueue.verifyOperationInProgress();const t=await qD(i);ve(As,"Initializing OnlineComponentProvider"),await e.initialize(t,i.configuration),i.setCredentialChangeListener((s=>tx(e.remoteStore,s))),i.setAppCheckTokenChangeListener(((s,o)=>tx(e.remoteStore,o))),i._onlineComponents=e}async function qD(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){ve(As,"Using user provided OfflineComponentProvider");try{await cp(i,i._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===ae.FAILED_PRECONDITION||o.code===ae.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;No("Error using user provided cache. Falling back to memory cache: "+t),await cp(i,new ff)}}else ve(As,"Using default OfflineComponentProvider"),await cp(i,new zD(void 0));return i._offlineComponents}async function lT(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(ve(As,"Using user provided OnlineComponentProvider"),await ox(i,i._uninitializedComponentsProvider._online)):(ve(As,"Using default OnlineComponentProvider"),await ox(i,new $p))),i._onlineComponents}function FD(i){return lT(i).then((e=>e.syncEngine))}async function df(i){const e=await lT(i),t=e.eventManager;return t.onListen=ND.bind(null,e.syncEngine),t.onUnlisten=ID.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=CD.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=DD.bind(null,e.syncEngine),t}function HD(i,e,t={}){const s=new _r;return i.asyncQueue.enqueueAndForget((async()=>(function(c,u,m,p,g){const v=new $g({next:T=>{v.Nu(),u.enqueueAndForget((()=>Bg(c,x)));const I=T.docs.has(m);!I&&T.fromCache?g.reject(new _e(ae.UNAVAILABLE,"Failed to get document because the client is offline.")):I&&T.fromCache&&p&&p.source==="server"?g.reject(new _e(ae.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(T)},error:T=>g.reject(T)}),x=new Fg(If(m.path),v,{includeMetadataChanges:!0,qa:!0});return zg(c,x)})(await df(i),i.asyncQueue,e,t,s))),s.promise}function GD(i,e,t={}){const s=new _r;return i.asyncQueue.enqueueAndForget((async()=>(function(c,u,m,p,g){const v=new $g({next:T=>{v.Nu(),u.enqueueAndForget((()=>Bg(c,x))),T.fromCache&&p.source==="server"?g.reject(new _e(ae.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(T)},error:T=>g.reject(T)}),x=new Fg(m,v,{includeMetadataChanges:!0,qa:!0});return zg(c,x)})(await df(i),i.asyncQueue,e,t,s))),s.promise}function cT(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}const lx=new Map;const uT="firestore.googleapis.com",cx=!0;class ux{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new _e(ae.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=uT,this.ssl=cx}else this.host=e.host,this.ssl=e.ssl??cx;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=q1;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<TI)throw new _e(ae.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}aR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=cT(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new _e(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new _e(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new _e(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,o){return s.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Uc{constructor(e,t,s,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ux({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new _e(ae.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new _e(ae.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ux(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new XC;switch(s.type){case"firstParty":return new eR(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new _e(ae.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const s=lx.get(t);s&&(ve("ComponentProvider","Removing Datastore"),lx.delete(t),s.terminate())})(this),Promise.resolve()}}function $D(i,e,t,s={}){i=vn(i,Uc);const o=Vo(e),c=i._getSettings(),u={...c,emulatorOptions:i._getEmulatorOptions()},m=`${e}:${t}`;o&&(sE(`https://${m}`),aE("Firestore",!0)),c.host!==uT&&c.host!==m&&No("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p={...c,host:m,ssl:o,emulatorOptions:s};if(!ya(p,u)&&(i._setSettings(p),s.mockUserToken)){let g,v;if(typeof s.mockUserToken=="string")g=s.mockUserToken,v=tn.MOCK_USER;else{g=iS(s.mockUserToken,i._app?.options.projectId);const x=s.mockUserToken.sub||s.mockUserToken.user_id;if(!x)throw new _e(ae.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new tn(x)}i._authCredentials=new WC(new e1(g,v))}}class Is{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Is(this.firestore,e,this._query)}}class vt{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new vs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new vt(this.firestore,e,this._key)}toJSON(){return{type:vt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,s){if(kc(t,vt._jsonSchema))return new vt(e,s||null,new Ae(lt.fromString(t.referencePath)))}}vt._jsonSchemaVersion="firestore/documentReference/1.0",vt._jsonSchema={type:Vt("string",vt._jsonSchemaVersion),referencePath:Vt("string")};class vs extends Is{constructor(e,t,s){super(e,t,If(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new vt(this.firestore,null,new Ae(e))}withConverter(e){return new vs(this.firestore,e,this._path)}}function YD(i,e,...t){if(i=Ut(i),bg("collection","path",e),i instanceof Uc){const s=lt.fromString(e,...t);return Tb(s),new vs(i,null,s)}{if(!(i instanceof vt||i instanceof vs))throw new _e(ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(lt.fromString(e,...t));return Tb(s),new vs(i.firestore,null,s)}}function QD(i,e){if(i=vn(i,Uc),bg("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new _e(ae.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Is(i,null,(function(s){return new Bo(lt.emptyPath(),s)})(e))}function Nr(i,e,...t){if(i=Ut(i),arguments.length===1&&(e=vg.newId()),bg("doc","path",e),i instanceof Uc){const s=lt.fromString(e,...t);return Eb(s),new vt(i,null,new Ae(s))}{if(!(i instanceof vt||i instanceof vs))throw new _e(ae.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(lt.fromString(e,...t));return Eb(s),new vt(i.firestore,i instanceof vs?i.converter:null,new Ae(s))}}const hx="AsyncQueue";class fx{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new $1(this,"async_queue_retry"),this._c=()=>{const s=lp();s&&ve(hx,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const t=lp();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=lp();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new _r;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!zo(e))throw e;ve(hx,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,xr("INTERNAL UNHANDLED ERROR: ",dx(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=t,t}enqueueAfterDelay(e,t,s){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const o=Pg.createAndSchedule(this,e,t,s,(c=>this.hc(c)));return this.tc.push(o),o}uc(){this.nc&&Ie(47125,{Pc:dx(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,s)=>t.targetTimeMs-s.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function dx(i){let e=i.message||"";return i.stack&&(e=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),e}function mx(i){return(function(t,s){if(typeof t!="object"||t===null)return!1;const o=t;for(const c of s)if(c in o&&typeof o[c]=="function")return!0;return!1})(i,["next","error","complete"])}class Ss extends Uc{constructor(e,t,s,o){super(e,t,s,o),this.type="firestore",this._queue=new fx,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new fx(e),this._firestoreClient=void 0,await e}}}function KD(i,e){const t=typeof i=="object"?i:uE(),s=typeof i=="string"?i:rf,o=cg(t,"firestore").getImmediate({identifier:s});if(!o._initialized){const c=tS("firestore");c&&$D(o,...c)}return o}function Uf(i){if(i._terminated)throw new _e(ae.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||XD(i),i._firestoreClient}function XD(i){const e=i._freezeSettings(),t=(function(o,c,u,m){return new yR(o,c,u,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,cT(m.experimentalLongPollingOptions),m.useFetchStreams,m.isUsingEmulator)})(i._databaseId,i._app?.options.appId||"",i._persistenceKey,e);i._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(i._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),i._firestoreClient=new BD(i._authCredentials,i._appCheckCredentials,i._queue,t,i._componentsProvider&&(function(o){const c=o?._online.build();return{_offline:o?._offline.build(c),_online:c}})(i._componentsProvider))}class Qn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Qn(Zt.fromBase64String(e))}catch(t){throw new _e(ae.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Qn(Zt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Qn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(kc(e,Qn._jsonSchema))return Qn.fromBase64String(e.bytes)}}Qn._jsonSchemaVersion="firestore/bytes/1.0",Qn._jsonSchema={type:Vt("string",Qn._jsonSchemaVersion),bytes:Vt("string")};class zf{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new _e(ae.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Wt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Bf{constructor(e){this._methodName=e}}class Bi{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new _e(ae.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new _e(ae.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Fe(this._lat,e._lat)||Fe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Bi._jsonSchemaVersion}}static fromJSON(e){if(kc(e,Bi._jsonSchema))return new Bi(e.latitude,e.longitude)}}Bi._jsonSchemaVersion="firestore/geoPoint/1.0",Bi._jsonSchema={type:Vt("string",Bi._jsonSchemaVersion),latitude:Vt("number"),longitude:Vt("number")};class qi{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,o){if(s.length!==o.length)return!1;for(let c=0;c<s.length;++c)if(s[c]!==o[c])return!1;return!0})(this._values,e._values)}toJSON(){return{type:qi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(kc(e,qi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new qi(e.vectorValues);throw new _e(ae.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}qi._jsonSchemaVersion="firestore/vectorValue/1.0",qi._jsonSchema={type:Vt("string",qi._jsonSchemaVersion),vectorValues:Vt("object")};const WD=/^__.*__$/;class ZD{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new Rs(e,this.data,this.fieldMask,t,this.fieldTransforms):new Vc(e,this.data,t,this.fieldTransforms)}}class hT{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new Rs(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function fT(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ie(40011,{Ac:i})}}class Yg{constructor(e,t,s,o,c,u){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=o,c===void 0&&this.Rc(),this.fieldTransforms=c||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Yg({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),s=this.Vc({path:t,fc:!1});return s.gc(e),s}yc(e){const t=this.path?.child(e),s=this.Vc({path:t,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return mf(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(fT(this.Ac)&&WD.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class JD{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||jf(e)}Cc(e,t,s,o=!1){return new Yg({Ac:e,methodName:t,Dc:s,path:Wt.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function qf(i){const e=i._freezeSettings(),t=jf(i._databaseId);return new JD(i._databaseId,!!e.ignoreUndefinedProperties,t)}function dT(i,e,t,s,o,c={}){const u=i.Cc(c.merge||c.mergeFields?2:0,e,t,o);Kg("Data must be an object, but it was:",u,s);const m=mT(s,u);let p,g;if(c.merge)p=new In(u.fieldMask),g=u.fieldTransforms;else if(c.mergeFields){const v=[];for(const x of c.mergeFields){const T=Yp(e,x,t);if(!u.contains(T))throw new _e(ae.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);gT(v,T)||v.push(T)}p=new In(v),g=u.fieldTransforms.filter((x=>p.covers(x.field)))}else p=null,g=u.fieldTransforms;return new ZD(new yn(m),p,g)}class Ff extends Bf{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Ff}}class Qg extends Bf{_toFieldTransform(e){return new FR(e.path,new xc)}isEqual(e){return e instanceof Qg}}function e4(i,e,t,s){const o=i.Cc(1,e,t);Kg("Data must be an object, but it was:",o,s);const c=[],u=yn.empty();Cs(s,((p,g)=>{const v=Xg(e,p,t);g=Ut(g);const x=o.yc(v);if(g instanceof Ff)c.push(v);else{const T=zc(g,x);T!=null&&(c.push(v),u.set(v,T))}}));const m=new In(c);return new hT(u,m,o.fieldTransforms)}function t4(i,e,t,s,o,c){const u=i.Cc(1,e,t),m=[Yp(e,s,t)],p=[o];if(c.length%2!=0)throw new _e(ae.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<c.length;T+=2)m.push(Yp(e,c[T])),p.push(c[T+1]);const g=[],v=yn.empty();for(let T=m.length-1;T>=0;--T)if(!gT(g,m[T])){const I=m[T];let U=p[T];U=Ut(U);const q=u.yc(I);if(U instanceof Ff)g.push(I);else{const $=zc(U,q);$!=null&&(g.push(I),v.set(I,$))}}const x=new In(g);return new hT(v,x,u.fieldTransforms)}function n4(i,e,t,s=!1){return zc(t,i.Cc(s?4:3,e))}function zc(i,e){if(pT(i=Ut(i)))return Kg("Unsupported field value:",e,i),mT(i,e);if(i instanceof Bf)return(function(s,o){if(!fT(o.Ac))throw o.Sc(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${s._methodName}() is not currently supported inside arrays`);const c=s._toFieldTransform(o);c&&o.fieldTransforms.push(c)})(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(s,o){const c=[];let u=0;for(const m of s){let p=zc(m,o.wc(u));p==null&&(p={nullValue:"NULL_VALUE"}),c.push(p),u++}return{arrayValue:{values:c}}})(i,e)}return(function(s,o){if((s=Ut(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return zR(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const c=ht.fromDate(s);return{timestampValue:cf(o.serializer,c)}}if(s instanceof ht){const c=new ht(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:cf(o.serializer,c)}}if(s instanceof Bi)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Qn)return{bytesValue:V1(o.serializer,s._byteString)};if(s instanceof vt){const c=o.databaseId,u=s.firestore._databaseId;if(!u.isEqual(c))throw o.Sc(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:Rg(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof qi)return(function(u,m){return{mapValue:{fields:{[c1]:{stringValue:u1},[sf]:{arrayValue:{values:u.toArray().map((g=>{if(typeof g!="number")throw m.Sc("VectorValues must only contain numeric values.");return Sg(m.serializer,g)}))}}}}}})(s,o);throw o.Sc(`Unsupported field value: ${Sf(s)}`)})(i,e)}function mT(i,e){const t={};return i1(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Cs(i,((s,o)=>{const c=zc(o,e.mc(s));c!=null&&(t[s]=c)})),{mapValue:{fields:t}}}function pT(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof ht||i instanceof Bi||i instanceof Qn||i instanceof vt||i instanceof Bf||i instanceof qi)}function Kg(i,e,t){if(!pT(t)||!t1(t)){const s=Sf(t);throw s==="an object"?e.Sc(i+" a custom object"):e.Sc(i+" "+s)}}function Yp(i,e,t){if((e=Ut(e))instanceof zf)return e._internalPath;if(typeof e=="string")return Xg(i,e);throw mf("Field path arguments must be of type string or ",i,!1,void 0,t)}const i4=new RegExp("[~\\*/\\[\\]]");function Xg(i,e,t){if(e.search(i4)>=0)throw mf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,t);try{return new zf(...e.split("."))._internalPath}catch{throw mf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,t)}}function mf(i,e,t,s,o){const c=s&&!s.isEmpty(),u=o!==void 0;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let p="";return(c||u)&&(p+=" (found",c&&(p+=` in field ${s}`),u&&(p+=` in document ${o}`),p+=")"),new _e(ae.INVALID_ARGUMENT,m+i+p)}function gT(i,e){return i.some((t=>t.isEqual(e)))}class yT{constructor(e,t,s,o,c){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=o,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new vt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new r4(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Wg("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class r4 extends yT{data(){return super.data()}}function Wg(i,e){return typeof e=="string"?Xg(i,e):e instanceof zf?e._internalPath:e._delegate._internalPath}function _T(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new _e(ae.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Zg{}class s4 extends Zg{}function a4(i,e,...t){let s=[];e instanceof Zg&&s.push(e),s=s.concat(t),(function(c){const u=c.filter((p=>p instanceof Jg)).length,m=c.filter((p=>p instanceof Hf)).length;if(u>1||u>0&&m>0)throw new _e(ae.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const o of s)i=o._apply(i);return i}class Hf extends s4{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new Hf(e,t,s)}_apply(e){const t=this._parse(e);return vT(e._query,t),new Is(e.firestore,e.converter,jp(e._query,t))}_parse(e){const t=qf(e.firestore);return(function(c,u,m,p,g,v,x){let T;if(g.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new _e(ae.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){gx(x,v);const U=[];for(const q of x)U.push(px(p,c,q));T={arrayValue:{values:U}}}else T=px(p,c,x)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||gx(x,v),T=n4(m,u,x,v==="in"||v==="not-in");return kt.create(g,v,T)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function o4(i,e,t){const s=e,o=Wg("where",i);return Hf._create(o,s,t)}class Jg extends Zg{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Jg(e,t)}_parse(e){const t=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return t.length===1?t[0]:fi.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(o,c){let u=o;const m=c.getFlattenedFilters();for(const p of m)vT(u,p),u=jp(u,p)})(e._query,t),new Is(e.firestore,e.converter,jp(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function px(i,e,t){if(typeof(t=Ut(t))=="string"){if(t==="")throw new _e(ae.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!_1(e)&&t.indexOf("/")!==-1)throw new _e(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(lt.fromString(t));if(!Ae.isDocumentKey(s))throw new _e(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return Db(i,new Ae(s))}if(t instanceof vt)return Db(i,t._key);throw new _e(ae.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Sf(t)}.`)}function gx(i,e){if(!Array.isArray(i)||i.length===0)throw new _e(ae.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function vT(i,e){const t=(function(o,c){for(const u of o)for(const m of u.getFlattenedFilters())if(c.indexOf(m.op)>=0)return m.op;return null})(i.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new _e(ae.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new _e(ae.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class l4{convertValue(e,t="none"){switch(Ts(e)){case 0:return null;case 1:return e.booleanValue;case 2:return wt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Es(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ie(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return Cs(e,((o,c)=>{s[o]=this.convertValue(c,t)})),s}convertVectorValue(e){const t=e.fields?.[sf].arrayValue?.values?.map((s=>wt(s.doubleValue)));return new qi(t)}convertGeoPoint(e){return new Bi(wt(e.latitude),wt(e.longitude))}convertArray(e,t){return(e.values||[]).map((s=>this.convertValue(s,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const s=Rf(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(_c(e));default:return null}}convertTimestamp(e){const t=xs(e);return new ht(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=lt.fromString(e);We(B1(s),9688,{name:e});const o=new vc(s.get(1),s.get(3)),c=new Ae(s.popFirst(5));return o.isEqual(t)||xr(`Document ${c} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),c}}function bT(i,e,t){let s;return s=i?t&&(t.merge||t.mergeFields)?i.toFirestore(e,t):i.toFirestore(e):e,s}class ic{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ma extends yT{constructor(e,t,s,o,c,u){super(e,t,s,o,u),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new zh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(Wg("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new _e(ae.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=ma._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}ma._jsonSchemaVersion="firestore/documentSnapshot/1.0",ma._jsonSchema={type:Vt("string",ma._jsonSchemaVersion),bundleSource:Vt("string","DocumentSnapshot"),bundleName:Vt("string"),bundle:Vt("string")};class zh extends ma{data(e={}){return super.data(e)}}class pa{constructor(e,t,s,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new ic(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((s=>{e.call(t,new zh(this._firestore,this._userDataWriter,s.key,s,new ic(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new _e(ae.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,c){if(o._snapshot.oldDocs.isEmpty()){let u=0;return o._snapshot.docChanges.map((m=>{const p=new zh(o._firestore,o._userDataWriter,m.doc.key,m.doc,new ic(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:p,oldIndex:-1,newIndex:u++}}))}{let u=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((m=>c||m.type!==3)).map((m=>{const p=new zh(o._firestore,o._userDataWriter,m.doc.key,m.doc,new ic(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let g=-1,v=-1;return m.type!==0&&(g=u.indexOf(m.doc.key),u=u.delete(m.doc.key)),m.type!==1&&(u=u.add(m.doc),v=u.indexOf(m.doc.key)),{type:c4(m.type),doc:p,oldIndex:g,newIndex:v}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new _e(ae.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=pa._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=vg.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],s=[],o=[];return this.docs.forEach((c=>{c._document!==null&&(t.push(c._document),s.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),o.push(c.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function c4(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ie(61501,{type:i})}}function Fo(i){i=vn(i,vt);const e=vn(i.firestore,Ss);return HD(Uf(e),i._key).then((t=>ET(e,i,t)))}pa._jsonSchemaVersion="firestore/querySnapshot/1.0",pa._jsonSchema={type:Vt("string",pa._jsonSchemaVersion),bundleSource:Vt("string","QuerySnapshot"),bundleName:Vt("string"),bundle:Vt("string")};class e0 extends l4{constructor(e){super(),this.firestore=e}convertBytes(e){return new Qn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new vt(this.firestore,null,t)}}function u4(i){i=vn(i,Is);const e=vn(i.firestore,Ss),t=Uf(e),s=new e0(e);return _T(i._query),GD(t,i._query).then((o=>new pa(e,s,i,o)))}function xT(i,e,t){i=vn(i,vt);const s=vn(i.firestore,Ss),o=bT(i.converter,e,t);return n0(s,[dT(qf(s),"setDoc",i._key,o,i.converter!==null,t).toMutation(i._key,ui.none())])}function t0(i,e,t,...s){i=vn(i,vt);const o=vn(i.firestore,Ss),c=qf(o);let u;return u=typeof(e=Ut(e))=="string"||e instanceof zf?t4(c,"updateDoc",i._key,e,t,s):e4(c,"updateDoc",i._key,e),n0(o,[u.toMutation(i._key,ui.exists(!0))])}function h4(i,e){const t=vn(i.firestore,Ss),s=Nr(i),o=bT(i.converter,e);return n0(t,[dT(qf(i.firestore),"addDoc",s._key,o,i.converter!==null,{}).toMutation(s._key,ui.exists(!1))]).then((()=>s))}function f4(i,...e){i=Ut(i);let t={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||mx(e[s])||(t=e[s++]);const o={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(mx(e[s])){const p=e[s];e[s]=p.next?.bind(p),e[s+1]=p.error?.bind(p),e[s+2]=p.complete?.bind(p)}let c,u,m;if(i instanceof vt)u=vn(i.firestore,Ss),m=If(i._key.path),c={next:p=>{e[s]&&e[s](ET(u,i,p))},error:e[s+1],complete:e[s+2]};else{const p=vn(i,Is);u=vn(p.firestore,Ss),m=p._query;const g=new e0(u);c={next:v=>{e[s]&&e[s](new pa(u,g,p,v))},error:e[s+1],complete:e[s+2]},_T(i._query)}return(function(g,v,x,T){const I=new $g(T),U=new Fg(v,I,x);return g.asyncQueue.enqueueAndForget((async()=>zg(await df(g),U))),()=>{I.Nu(),g.asyncQueue.enqueueAndForget((async()=>Bg(await df(g),U)))}})(Uf(u),m,o,c)}function n0(i,e){return(function(s,o){const c=new _r;return s.asyncQueue.enqueueAndForget((async()=>MD(await FD(s),o,c))),c.promise})(Uf(i),e)}function ET(i,e,t){const s=t.docs.get(e._key),o=new e0(i);return new ma(i,o,e._key,s,new ic(t.hasPendingWrites,t.fromCache),e.converter)}function dr(){return new Qg("serverTimestamp")}(function(e,t=!0){(function(o){Po=o})(jo),So(new _a("firestore",((s,{instanceIdentifier:o,options:c})=>{const u=s.getProvider("app").getImmediate(),m=new Ss(new ZC(s.getProvider("auth-internal")),new tR(u,s.getProvider("app-check-internal")),(function(g,v){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new _e(ae.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new vc(g.options.projectId,v)})(u,o),u);return c={useFetchStreams:t,...c},m._setSettings(c),m}),"PUBLIC").setMultipleInstances(!0)),ys(_b,vb,e),ys(_b,vb,"esm2020")})();const d4={apiKey:"AIzaSyDJLZ07IsSV0efiWNzZDvSDltscm7yFMGc",authDomain:"flowmetrics-a7669.firebaseapp.com",projectId:"flowmetrics-a7669",storageBucket:"flowmetrics-a7669.appspot.com",messagingSenderId:"13206232192",appId:"1:13206232192:web:97d4b158974350ed5ada65"},TT=cE(d4),Yl=QC(TT),Gi=KD(TT),wT=Ee.createContext(null);function m4({children:i}){const[e,t]=Ee.useState(null),[s,o]=Ee.useState(!0);Ee.useEffect(()=>{const g=jN(Yl,v=>{t(v??null),o(!1)});return()=>g()},[]);async function c(g,v){await ON(Yl,g,v)}async function u(g,v){return await MN(Yl,g,v)}async function m(){await LN(Yl),t(null)}async function p(g){await DN(Yl,g)}return y.jsx(wT.Provider,{value:{user:e,authLoading:s,signInWithEmail:c,signUpWithEmail:u,signOut:m,resetPassword:p},children:i})}function p4(){const i=Ee.useContext(wT);if(!i)throw new Error("useFirebaseAuth must be used inside FirebaseAuthProvider");return i}const g4=1e3*60*10;async function AT(i,e){if(!i||!e)return!1;const t=Nr(Gi,"workspaces",i),s=Date.now(),o={...e,clientUpdatedAt:s};try{const c=await Fo(t),u=c.exists()?c.data():null,m=u?.lastHistorySnapshotAt?.toMillis?u.lastHistorySnapshotAt.toMillis():0,p=!!u?.state&&s-m>=g4;if(p){const g=YD(Gi,"workspaces",i,"history");await h4(g,{state:u.state,timestamp:dr(),snapshot:!0})}return c.exists()?(await t0(t,{state:o,version:(u?.version||0)+1,lastModified:dr(),...p?{lastHistorySnapshotAt:dr()}:{}}),!0):(await xT(t,{state:o,name:u?.name||"My Budget",version:1,createdAt:dr(),lastModified:dr(),lastHistorySnapshotAt:dr()}),!0)}catch(c){throw console.error("saveWorkspaceState failed:",c),c}}async function y4(i,e){if(!i)return e??null;const t=Nr(Gi,"workspaces",i);try{const s=await Fo(t);if(!s.exists())return e?(await AT(i,e),e):null;const o=s.data()?.state??null;return _4(e,o)}catch(s){return console.error("initializeWorkspace failed:",s),e??null}}function _4(i,e){return e?i?{accounts:up(i.accounts||[],e.accounts||[]),goals:up(i.goals||[],e.goals||[]),scheduledTemplates:up(i.scheduledTemplates||[],e.scheduledTemplates||[]),budgetsByMonth:{...i.budgetsByMonth||{},...e.budgetsByMonth||{}},scheduleChecks:{...i.scheduleChecks||{},...e.scheduleChecks||{}},activeMonth:e.activeMonth||i.activeMonth||"2026-01",currentAccountId:e.currentAccountId||i.currentAccountId||"main",selectedGoalId:e.selectedGoalId!==void 0?e.selectedGoalId:i.selectedGoalId,theme:e.theme||i.theme||"dark",navOrder:Array.isArray(e.navOrder)?e.navOrder:i.navOrder,dashboardSectionsOrder:Array.isArray(e.dashboardSectionsOrder)?e.dashboardSectionsOrder:i.dashboardSectionsOrder,homePage:i.homePage||e.homePage||"dashboard",txFilter:i.txFilter??e.txFilter??"",clientUpdatedAt:Math.max(Number(i.clientUpdatedAt||0),Number(e.clientUpdatedAt||0))}:e:i}function up(i,e){const t=new Map;for(const s of i)s?.id&&t.set(s.id,s);for(const s of e)s?.id&&t.set(s.id,s);return Array.from(t.values())}async function v4(i,e){const t=Nr(Gi,"workspaces",i,"members",e),s=await Fo(t);return s.exists()&&s.data()?.role||null}async function b4(i){const e=a4(QD(Gi,"members"),o4("userId","==",i)),t=await u4(e),s=[];for(const o of t.docs){const u=o.ref.path.split("/")[1],m=Nr(Gi,"workspaces",u),p=await Fo(m);s.push({id:u,role:o.data()?.role,name:p.exists()&&p.data()?.name||"My Budget",lastModified:p.exists()?p.data()?.lastModified:null,version:p.exists()?p.data()?.version:null})}return s.sort((o,c)=>{const u=o.lastModified?.toMillis?o.lastModified.toMillis():0;return(c.lastModified?.toMillis?c.lastModified.toMillis():0)-u}),s}async function x4(i,e){const t=Nr(Gi,"workspaces",i,"members",e);await t0(t,{lastActive:dr()})}const dc=["","","","","","","","","",""];function E4(i=""){let e=0;for(let t=0;t<i.length;t++)e=(e<<5)-e+i.charCodeAt(t),e|=0;return Math.abs(e)}function ST(i,e="Budgeteer"){if(!i)return e;const t=i.trim();return t&&t.replace(/[^a-zA-Z0-9_\- ]+/g,"").slice(0,32)||e}function T4(i){const e=i?.email?.split("@")[0]??"",t=ST(e,"Budgeteer"),s=i?.uid||i?.email||t||String(Date.now()),o=E4(s)%dc.length;return{username:t,avatarEmoji:dc[o]}}async function w4(i){const e=i?.uid;if(!e)return null;const t=Nr(Gi,"users",e),s=await Fo(t);if(s.exists())return s.data();const o=T4(i);return await xT(t,{...o,createdAt:dr()},{merge:!0}),o}async function A4(i,{username:e,avatarEmoji:t}={}){if(!i)throw new Error("Missing uid");const s={};typeof e=="string"&&(s.username=ST(e)),typeof t=="string"&&(s.avatarEmoji=t);const o=Nr(Gi,"users",i);return await t0(o,s),(await Fo(o)).data()}function Ql({label:i,children:e,active:t,onClick:s,className:o=""}){const c=e??i??"";return y.jsx("button",{type:"button",onClick:s,className:["px-3 py-1 rounded-full border text-xs transition whitespace-nowrap",t?"border-cyan-400 bg-cyan-500/10 text-cyan-200":"border-slate-600/60 text-slate-300 hover:border-cyan-400/60 hover:text-cyan-200",o].join(" "),children:c})}const Qp=[{key:"dark",label:"Cyber Dark",description:"Charcoal with neon cyan highlights",shellClass:"bg-[#05060A] text-slate-100",headerClass:"border-[#1f2937] bg-[#05060F]/90",pillClass:"border-slate-600/70 bg-black/20 hover:bg-black/40",previewGradient:"from-[#020617] via-[#05060f] to-[#020617]"},{key:"light",label:"Soft Light",description:"Warm whites with slate ink",shellClass:"bg-slate-50 text-slate-900",headerClass:"border-slate-200 bg-white/80",pillClass:"border-slate-300 bg-white/70 hover:bg-slate-100",previewGradient:"from-white via-slate-100 to-slate-200"},{key:"midnight",label:"Midnight Pulse",description:"Indigo mist with electric purple",shellClass:"bg-[#070718] text-indigo-100",headerClass:"border-[#191d3a] bg-gradient-to-r from-[#0f1032cc] to-[#1b0d3fcc]",pillClass:"border-indigo-600/50 bg-indigo-900/40 hover:bg-indigo-900/70",previewGradient:"from-[#0b1433] via-[#25124f] to-[#3b0f49]"},{key:"aurora",label:"Aurora Mist",description:"Deep teal with aurora glow",shellClass:"bg-gradient-to-br from-[#041b1f] via-[#082831] to-[#041b1f] text-emerald-50",headerClass:"border-emerald-900/40 bg-[#051f25]/90",pillClass:"border-emerald-500/40 bg-emerald-900/40 hover:bg-emerald-900/70",previewGradient:"from-[#052528] via-[#0b4b4f] to-[#0f766e]"},{key:"crimson",label:"Crimson Bloom",description:"Deep burgundy with neon rose edges",shellClass:"bg-gradient-to-br from-[#19070a] via-[#2b0d12] to-[#19070a] text-rose-50",headerClass:"border-rose-900/40 bg-[#2b0d12]/90",pillClass:"border-rose-500/50 bg-rose-900/40 hover:bg-rose-900/70",previewGradient:"from-[#300911] via-[#5b0a1c] to-[#be123c]"}];function S4(i){return Qp.find(e=>e.key===i)||Qp[0]}function N4({option:i,active:e,onSelect:t}){return y.jsxs("button",{type:"button",onClick:()=>t(i.key),className:`w-full text-left rounded-xl border px-3 py-2 transition ${e?"border-cyan-400 bg-cyan-500/10":"border-white/10 hover:border-cyan-400/60"}`,children:[y.jsx("div",{className:`h-10 rounded-lg bg-gradient-to-r ${i.previewGradient} mb-2`}),y.jsx("p",{className:"text-sm font-semibold text-white",children:i.label}),y.jsx("p",{className:"text-[11px] text-slate-300",children:i.description})]})}function C4({value:i,onChange:e,variant:t="default",onAfterSelect:s=()=>{}}){const[o,c]=Ee.useState(!1),u=Ee.useMemo(()=>S4(i),[i]),m=t==="menu";function p(x){e?.(x),c(!1),s?.()}const g=m?"w-full text-left px-3 py-2 text-slate-200 hover:bg-slate-800/80 rounded-md transition":`px-2 py-1 rounded border transition ${u.pillClass}`,v=`absolute ${m?"left-0":"right-0"} ${m?"mt-1":"mt-2"} w-64 rounded-2xl border border-white/15 bg-[#05060F]/95 p-3 shadow-xl backdrop-blur z-50 transition-all duration-150 ${o?"opacity-100 translate-y-0 pointer-events-auto":"opacity-0 -translate-y-1 pointer-events-none"}`;return y.jsxs("div",{className:`relative text-xs ${m?"w-full":""}`,children:[y.jsxs("button",{type:"button",onClick:()=>c(x=>!x),className:g,children:["Theme: ",u.label]}),y.jsx("div",{className:v,children:y.jsx("div",{className:"space-y-2",children:Qp.map(x=>y.jsx(N4,{option:x,active:x.key===u.key,onSelect:p},x.key))})})]})}function R4({customizeMode:i,setCustomizeMode:e,onReset:t,onSignOut:s,themeValue:o,onChangeTheme:c=()=>{}}){const[u,m]=Ee.useState(!1);return y.jsxs("div",{className:"relative",children:[y.jsx("button",{type:"button",className:"flex items-center justify-center w-9 h-9 rounded-full border border-slate-600/70 text-slate-300 hover:border-cyan-400/60 hover:text-cyan-200 transition",onClick:()=>m(p=>!p),children:y.jsxs("span",{className:"relative flex flex-col justify-between w-4 h-3",children:[y.jsx("span",{className:`h-[2px] rounded-full bg-current transition-transform duration-200 ${u?"translate-y-[5px] rotate-45":""}`}),y.jsx("span",{className:`h-[2px] rounded-full bg-current transition-opacity duration-200 ${u?"opacity-0":"opacity-100"}`}),y.jsx("span",{className:`h-[2px] rounded-full bg-current transition-transform duration-200 ${u?"-translate-y-[5px] -rotate-45":""}`})]})}),y.jsxs("div",{className:`absolute right-0 mt-2 w-52 bg-[#0B0C14] border border-slate-700/70 rounded-lg shadow-lg z-50 text-xs origin-top-right transform transition-all duration-150 ${u?"opacity-100 scale-100 translate-y-0 pointer-events-auto":"opacity-0 scale-95 -translate-y-1 pointer-events-none"}`,children:[y.jsx("div",{className:"px-2 py-2 border-b border-slate-800/70",children:y.jsx(C4,{value:o,onChange:c,variant:"menu",onAfterSelect:()=>m(!1)})}),y.jsx("button",{type:"button",className:"w-full text-left px-3 py-2 hover:bg-slate-800/80 text-slate-200",onClick:()=>{e(p=>!p),m(!1)},children:i?"Finish Customizing":"Customize Layout"}),y.jsx("button",{type:"button",className:"w-full text-left px-3 py-2 hover:bg-slate-800/80 text-rose-300",onClick:()=>{m(!1),t()},children:"Reset Data"}),y.jsx("button",{type:"button",className:"w-full text-left px-3 py-2 hover:bg-slate-800/80 text-slate-200",onClick:async()=>{m(!1);try{await s()}catch(p){console.error("Sign out failed:",p)}},children:"Sign Out"})]})]})}function I4({onSignIn:i,onSignUp:e,onResetPassword:t,loading:s}){const[o,c]=Te.useState("signin"),[u,m]=Te.useState(""),[p,g]=Te.useState(""),[v,x]=Te.useState(null),[T,I]=Te.useState(null),[U,q]=Te.useState(!1),[$,ce]=Te.useState(!1);async function G(){if(x(null),I(null),!u){x("Please enter your email first, then click 'Forgot password?'.");return}if(t){ce(!0);try{await t(u),I("If an account exists with that email, a reset link has been sent. Check your inbox.")}catch(ie){x(ie.message||"Failed to start password reset.")}finally{ce(!1)}}}async function te(ie){ie.preventDefault(),x(null),I(null),q(!0);try{if(o==="signin")await i(u,p);else{const de=await e(u,p),he=de?.user||null,D=de?.session||null;I(he&&!D?"Account created! Check your email and click the confirmation link.":"Account created!")}}catch(de){x(de.message||"Something went wrong.")}finally{q(!1)}}return s?y.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-950 text-slate-200",children:y.jsx("div",{className:"text-sm text-slate-400",children:"Checking session..."})}):y.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-950 text-slate-100 px-4",children:y.jsxs("div",{className:"w-full max-w-md space-y-6 rounded-2xl border border-white/10 bg-black/30 p-8 shadow-[0_20px_50px_rgba(8,8,12,0.8)]",children:[y.jsxs("div",{className:"space-y-2 text-center",children:[y.jsx("p",{className:"text-xs tracking-[0.4em] uppercase text-cyan-300",children:"Budget Center"}),y.jsx("h1",{className:"text-2xl font-semibold text-white",children:"Access portal"}),y.jsx("p",{className:"text-sm text-slate-400",children:o==="signin"?"Sign in to load your encrypted budgets.":"Create an account to sync your budgets and goals across devices."})]}),y.jsxs("div",{className:"grid grid-cols-2 rounded-full bg-white/5 p-1 text-sm",children:[y.jsx("button",{type:"button",onClick:()=>c("signin"),className:`rounded-full py-2 font-medium transition ${o==="signin"?"bg-cyan-500 text-black":"text-slate-400 hover:text-white"}`,children:"Sign in"}),y.jsx("button",{type:"button",onClick:()=>c("signup"),className:`rounded-full py-2 font-medium transition ${o==="signup"?"bg-cyan-500 text-black":"text-slate-400 hover:text-white"}`,children:"Create account"})]}),v&&y.jsx("div",{className:"rounded border border-red-500/60 bg-red-500/10 px-3 py-2 text-sm text-red-100",children:v}),T&&y.jsx("div",{className:"rounded border border-emerald-400/60 bg-emerald-400/10 px-3 py-2 text-sm text-emerald-100",children:T}),y.jsxs("form",{onSubmit:te,className:"space-y-4",children:[y.jsxs("label",{className:"block text-sm",children:[y.jsx("span",{className:"text-slate-300",children:"Email"}),y.jsx("input",{type:"email",required:!0,value:u,onChange:ie=>m(ie.target.value),className:"mt-1 w-full rounded-lg border border-white/10 bg-black/40 px-3 py-2 text-sm text-white placeholder-slate-500 focus:border-cyan-400 focus:outline-none",placeholder:"you@email.com",autoComplete:"email"})]}),y.jsxs("label",{className:"block text-sm",children:[y.jsx("span",{className:"text-slate-300",children:"Password"}),y.jsx("input",{type:"password",required:!0,minLength:6,value:p,onChange:ie=>g(ie.target.value),className:"mt-1 w-full rounded-lg border border-white/10 bg-black/40 px-3 py-2 text-sm text-white placeholder-slate-500 focus:border-cyan-400 focus:outline-none",placeholder:"",autoComplete:o==="signin"?"current-password":"new-password"})]}),y.jsx("button",{type:"submit",disabled:U,className:"w-full rounded-lg bg-cyan-500 py-2 text-sm font-semibold text-black transition hover:bg-cyan-400 disabled:opacity-60",children:U?"Please wait...":o==="signin"?"Sign in":"Create account"})]}),y.jsx("div",{className:"text-center text-sm text-slate-400",children:y.jsx("button",{type:"button",className:"font-medium text-cyan-300 hover:text-cyan-200 disabled:opacity-60",onClick:G,disabled:$,children:$?"Sending reset link...":"Forgot password?"})})]})})}function D4({message:i,variant:e="info",actionLabel:t,onAction:s,onClose:o}){const c=e==="success";return y.jsx("div",{className:"fixed bottom-4 right-4 z-50 max-w-xs sm:max-w-sm",children:y.jsxs("div",{className:`toast-enter flex items-start gap-3 rounded-xl border px-4 py-3 text-xs shadow-xl bg-[#05060F]/95 backdrop-blur
        ${c?"border-emerald-400/80 text-emerald-100":"border-cyan-400/80 text-cyan-100"}`,children:[y.jsx("div",{className:"mt-[2px] text-lg",children:c?"":""}),y.jsxs("div",{className:"flex-1 space-y-1",children:[y.jsx("p",{className:"leading-snug",children:i}),t&&s&&y.jsxs("button",{onClick:s,className:"inline-flex items-center gap-1 text-[0.7rem] mt-1 px-2 py-1 rounded-full border border-cyan-400/70 text-cyan-100 hover:bg-cyan-500/10 hover:border-cyan-300 transition",children:[y.jsx("span",{children:t}),y.jsx("span",{className:"text-[0.75rem]",children:""})]})]}),o&&y.jsx("button",{className:"ml-1 text-[0.7rem] text-slate-500 hover:text-slate-200",onClick:o,children:""})]})})}function M4({emoji:i,active:e,onSelect:t}){return y.jsx("button",{type:"button",onClick:()=>t(i),className:`w-9 h-9 text-lg rounded-full border transition flex items-center justify-center
      ${e?"border-cyan-400/80 bg-cyan-500/10":"border-slate-600/60 bg-black/30 hover:border-cyan-400/40"}`,children:i})}function O4({profile:i,email:e,loading:t,onUpdateProfile:s}){const[o,c]=Ee.useState(!1),[u,m]=Ee.useState(i?.username??""),[p,g]=Ee.useState(i?.avatar_emoji??dc[0]),[v,x]=Ee.useState(!1);Ee.useEffect(()=>{m(i?.username??""),g(i?.avatar_emoji??dc[0])},[i?.username,i?.avatar_emoji]);async function T(q){if(q.preventDefault(),!s)return;x(!0);const $=await s({username:u,avatar_emoji:p});x(!1),$&&c(!1)}const I=i?.avatar_emoji??"",U=i?.username||"Budgeteer";return y.jsxs("div",{className:"relative",children:[y.jsxs("button",{type:"button",onClick:()=>c(q=>!q),className:"flex items-center gap-2 rounded-full border border-slate-600/70 bg-black/20 px-2 py-1 text-left hover:border-cyan-400/60 transition",children:[y.jsx("span",{className:"inline-flex h-8 w-8 items-center justify-center rounded-full bg-cyan-500/10 text-lg",children:I}),y.jsxs("span",{className:"flex flex-col leading-tight text-xs text-slate-300",children:[y.jsx("span",{className:"text-cyan-200",children:U}),y.jsx("span",{className:"text-[10px] text-slate-500",children:t?"Syncing...":"Profile"})]})]}),y.jsxs("form",{className:`absolute right-0 mt-2 w-64 rounded-xl border border-slate-700/70 bg-[#05060F] p-4 text-xs shadow-xl transition-all duration-150 ${o?"opacity-100 translate-y-0 pointer-events-auto":"opacity-0 -translate-y-1 pointer-events-none"}`,onSubmit:T,children:[y.jsxs("div",{className:"space-y-2",children:[y.jsx("p",{className:"text-[11px] text-slate-400",children:e?`Signed in as ${e}`:"Signed in"}),y.jsxs("label",{className:"block",children:[y.jsx("span",{className:"text-slate-300",children:"Display name"}),y.jsx("input",{type:"text",value:u,onChange:q=>m(q.target.value),placeholder:"Budgeteer",className:"mt-1 w-full rounded-lg border border-white/10 bg-black/40 px-3 py-2 text-xs text-white placeholder-slate-500 focus:border-cyan-400 focus:outline-none"})]})]}),y.jsxs("div",{className:"mt-3",children:[y.jsx("p",{className:"mb-2 text-slate-300",children:"Avatar"}),y.jsx("div",{className:"grid grid-cols-5 gap-2",children:dc.map(q=>y.jsx(M4,{emoji:q,active:p===q,onSelect:g},q))})]}),y.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[y.jsx("button",{type:"button",className:"text-[11px] text-slate-500 hover:text-slate-200",onClick:()=>c(!1),children:"Cancel"}),y.jsx("button",{type:"submit",disabled:v,className:"rounded-full bg-cyan-500 px-3 py-1 text-[11px] font-semibold text-black transition hover:bg-cyan-400 disabled:opacity-60",children:v?"Saving...":"Save changes"})]})]})]})}const k4=i=>i.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),V4=i=>i.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase()),yx=i=>{const e=V4(i);return e.charAt(0).toUpperCase()+e.slice(1)},NT=(...i)=>i.filter((e,t,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===t).join(" ").trim(),j4=i=>{for(const e in i)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var L4={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const P4=Ee.forwardRef(({color:i="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:s,className:o="",children:c,iconNode:u,...m},p)=>Ee.createElement("svg",{ref:p,...L4,width:e,height:e,stroke:i,strokeWidth:s?Number(t)*24/Number(e):t,className:NT("lucide",o),...!c&&!j4(m)&&{"aria-hidden":"true"},...m},[...u.map(([g,v])=>Ee.createElement(g,v)),...Array.isArray(c)?c:[c]]));const On=(i,e)=>{const t=Ee.forwardRef(({className:s,...o},c)=>Ee.createElement(P4,{ref:c,iconNode:e,className:NT(`lucide-${k4(yx(i))}`,`lucide-${i}`,s),...o}));return t.displayName=yx(i),t};const U4=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],z4=On("check",U4);const B4=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],q4=On("copy",B4);const F4=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],H4=On("crown",F4);const G4=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],$4=On("eye",G4);const Y4=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],Q4=On("history",Y4);const K4=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],X4=On("settings",K4);const W4=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],Z4=On("share-2",W4);const J4=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],eM=On("shield",J4);const tM=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],nM=On("square-pen",tM);const iM=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],_x=On("trash-2",iM);const rM=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],vx=On("user-plus",rM);const sM=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],aM=On("users",sM);const oM=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],lM=On("x",oM),Rn={OWNER:"owner",ADMIN:"admin",EDITOR:"editor",VIEWER:"viewer"};function cM({workspaceId:i,currentUserId:e,onClose:t}){const[s,o]=Ee.useState("members"),[c,u]=Ee.useState([]),[m,p]=Ee.useState([]),[g,v]=Ee.useState([]),[x,T]=Ee.useState(!0),[I,U]=Ee.useState(Rn.EDITOR),[q,$]=Ee.useState(!1),[ce,G]=Ee.useState(""),[te,ie]=Ee.useState(!1);Ee.useEffect(()=>{de()},[i]);async function de(){T(!0),setTimeout(()=>{u([{id:e,displayName:"You",email:"you@example.com",role:Rn.OWNER,joinedAt:"2024-01-01",lastActive:"2024-01-06"}]),p([]),v([{id:"1",timestamp:"2024-01-06T10:30:00Z",description:"Added 3 transactions"},{id:"2",timestamp:"2024-01-05T15:20:00Z",description:"Updated budget categories"}]),T(!1)},500)}async function he(){G("https://yourdomain.com/invite/ABC123XYZ"),$(!0),de()}function D(){navigator.clipboard.writeText(ce),ie(!0),setTimeout(()=>ie(!1),2e3)}function C(O){switch(O){case Rn.OWNER:return y.jsx(H4,{className:"w-4 h-4 text-yellow-400"});case Rn.ADMIN:return y.jsx(eM,{className:"w-4 h-4 text-purple-400"});case Rn.EDITOR:return y.jsx(nM,{className:"w-4 h-4 text-cyan-400"});case Rn.VIEWER:return y.jsx($4,{className:"w-4 h-4 text-slate-400"});default:return null}}function N(O){switch(O){case Rn.OWNER:return"text-yellow-400";case Rn.ADMIN:return"text-purple-400";case Rn.EDITOR:return"text-cyan-400";case Rn.VIEWER:return"text-slate-400";default:return"text-slate-400"}}return x?y.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",children:y.jsx("div",{className:"bg-slate-900 rounded-xl p-8",children:y.jsx("div",{className:"text-slate-300",children:"Loading workspace..."})})}):y.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:y.jsxs("div",{className:"bg-slate-900 rounded-xl border border-white/10 w-full max-w-3xl max-h-[90vh] overflow-hidden flex flex-col",children:[y.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-white/10",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx(X4,{className:"w-6 h-6 text-cyan-400"}),y.jsx("h2",{className:"text-xl font-semibold text-white",children:"Workspace Settings"})]}),y.jsx("button",{onClick:t,className:"text-slate-400 hover:text-white transition",children:y.jsx(lM,{className:"w-6 h-6"})})]}),y.jsxs("div",{className:"flex gap-1 p-2 bg-black/20 border-b border-white/5",children:[y.jsxs("button",{onClick:()=>o("members"),className:`flex items-center gap-2 px-4 py-2 rounded-lg transition ${s==="members"?"bg-cyan-500 text-black font-medium":"text-slate-400 hover:text-white hover:bg-white/5"}`,children:[y.jsx(aM,{className:"w-4 h-4"}),"Members"]}),y.jsxs("button",{onClick:()=>o("invitations"),className:`flex items-center gap-2 px-4 py-2 rounded-lg transition ${s==="invitations"?"bg-cyan-500 text-black font-medium":"text-slate-400 hover:text-white hover:bg-white/5"}`,children:[y.jsx(Z4,{className:"w-4 h-4"}),"Invitations"]}),y.jsxs("button",{onClick:()=>o("history"),className:`flex items-center gap-2 px-4 py-2 rounded-lg transition ${s==="history"?"bg-cyan-500 text-black font-medium":"text-slate-400 hover:text-white hover:bg-white/5"}`,children:[y.jsx(Q4,{className:"w-4 h-4"}),"History"]})]}),y.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[s==="members"&&y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsx("h3",{className:"text-lg font-medium text-white",children:"Team Members"}),y.jsxs("button",{onClick:()=>o("invitations"),className:"flex items-center gap-2 px-4 py-2 bg-cyan-500 text-black rounded-lg hover:bg-cyan-400 transition font-medium text-sm",children:[y.jsx(vx,{className:"w-4 h-4"}),"Invite Member"]})]}),y.jsx("div",{className:"space-y-2",children:c.map(O=>y.jsxs("div",{className:"flex items-center justify-between p-4 bg-white/5 rounded-lg border border-white/10",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-cyan-500 to-blue-500 flex items-center justify-center text-white font-semibold",children:O.displayName[0]}),y.jsxs("div",{children:[y.jsx("div",{className:"text-white font-medium",children:O.displayName}),y.jsx("div",{className:"text-sm text-slate-400",children:O.email})]})]}),y.jsxs("div",{className:"flex items-center gap-4",children:[y.jsxs("div",{className:`flex items-center gap-1 text-sm font-medium ${N(O.role)}`,children:[C(O.role),y.jsx("span",{className:"capitalize",children:O.role})]}),O.id!==e&&y.jsx("button",{className:"text-slate-400 hover:text-red-400 transition",children:y.jsx(_x,{className:"w-4 h-4"})})]})]},O.id))})]}),s==="invitations"&&y.jsxs("div",{className:"space-y-6",children:[y.jsxs("div",{children:[y.jsx("h3",{className:"text-lg font-medium text-white mb-4",children:"Create Invitation"}),y.jsxs("div",{className:"space-y-4 p-4 bg-white/5 rounded-lg border border-white/10",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm text-slate-300 mb-2",children:"Permission Level"}),y.jsxs("select",{value:I,onChange:O=>U(O.target.value),className:"w-full px-3 py-2 bg-black/40 border border-white/10 rounded-lg text-white focus:border-cyan-400 focus:outline-none",children:[y.jsx("option",{value:Rn.EDITOR,children:"Editor - Can edit budget & transactions"}),y.jsx("option",{value:Rn.ADMIN,children:"Admin - Full access except deletion"}),y.jsx("option",{value:Rn.VIEWER,children:"Viewer - Read-only access"})]})]}),y.jsxs("button",{onClick:he,className:"w-full flex items-center justify-center gap-2 px-4 py-2 bg-cyan-500 text-black rounded-lg hover:bg-cyan-400 transition font-medium",children:[y.jsx(vx,{className:"w-4 h-4"}),"Generate Invitation Link"]})]}),q&&y.jsxs("div",{className:"mt-4 p-4 bg-emerald-500/10 border border-emerald-400/30 rounded-lg",children:[y.jsx("div",{className:"text-sm text-emerald-300 mb-2",children:"Invitation link created!"}),y.jsxs("div",{className:"flex gap-2",children:[y.jsx("input",{type:"text",value:ce,readOnly:!0,className:"flex-1 px-3 py-2 bg-black/40 border border-white/10 rounded-lg text-white text-sm"}),y.jsxs("button",{onClick:D,className:"px-4 py-2 bg-cyan-500 text-black rounded-lg hover:bg-cyan-400 transition font-medium text-sm flex items-center gap-2",children:[te?y.jsx(z4,{className:"w-4 h-4"}):y.jsx(q4,{className:"w-4 h-4"}),te?"Copied!":"Copy"]})]}),y.jsx("div",{className:"text-xs text-slate-400 mt-2",children:"Link expires in 7 days"})]})]}),m.length>0&&y.jsxs("div",{children:[y.jsx("h3",{className:"text-lg font-medium text-white mb-4",children:"Pending Invitations"}),y.jsx("div",{className:"space-y-2",children:m.map(O=>y.jsxs("div",{className:"flex items-center justify-between p-4 bg-white/5 rounded-lg border border-white/10",children:[y.jsxs("div",{children:[y.jsxs("div",{className:"text-white",children:["Invitation for ",O.role]}),y.jsxs("div",{className:"text-sm text-slate-400",children:["Created ",new Date(O.createdAt).toLocaleDateString()]})]}),y.jsx("button",{className:"text-slate-400 hover:text-red-400 transition",children:y.jsx(_x,{className:"w-4 h-4"})})]},O.id))})]})]}),s==="history"&&y.jsxs("div",{className:"space-y-4",children:[y.jsx("h3",{className:"text-lg font-medium text-white",children:"Version History"}),y.jsx("div",{className:"space-y-2",children:g.map(O=>y.jsxs("div",{className:"flex items-center justify-between p-4 bg-white/5 rounded-lg border border-white/10 hover:bg-white/10 transition",children:[y.jsxs("div",{children:[y.jsx("div",{className:"text-white font-medium",children:O.description}),y.jsx("div",{className:"text-sm text-slate-400",children:new Date(O.timestamp).toLocaleString()})]}),y.jsx("button",{className:"px-3 py-1 bg-cyan-500/20 text-cyan-300 rounded hover:bg-cyan-500/30 transition text-sm font-medium",children:"Restore"})]},O.id))})]})]})]})})}function Dn({title:i,actions:e=null,className:t="",children:s}){return y.jsxs("section",{className:`card-surface border rounded-xl p-4 ${t}`,children:[(i||e)&&y.jsxs("div",{className:"flex items-center justify-between gap-3 mb-3",children:[i?y.jsx("h2",{className:"text-xs font-semibold tracking-[0.25em] text-slate-400 uppercase",children:i}):y.jsx("div",{}),e?y.jsx("div",{className:"shrink-0",children:e}):null]}),s]})}function i0({value:i=0}){const e=Math.max(0,Math.min(100,Number.isNaN(i)?0:i));return y.jsx("div",{className:"progress-bar",children:y.jsx("div",{className:"progress-bar-filled",style:{width:`${e}%`},children:e>2&&y.jsx("div",{className:"progress-shine shine"})})})}function uM(i){switch(i){case"sunset":return"bg-gradient-to-br from-orange-500/70 via-pink-500/60 to-rose-500/60 border-rose-400/60";case"forest":return"bg-gradient-to-br from-emerald-900/70 via-emerald-800/60 to-emerald-700/60 border-emerald-400/60";case"midnight":return"bg-gradient-to-br from-indigo-900/70 via-purple-900/60 to-indigo-900/70 border-indigo-400/60";case"cyber":default:return"bg-[#090a11] border-slate-800"}}function CT({goal:i,onClick:e,onEdit:t}){const s=Number(i?.saved??i?.current??0),o=Number(i?.target??0),c=Number(i?.monthlyPlan??0),u=i?.icon||i?.emoji||"",m=i?.name||"Untitled Goal",p=o>0?Math.min(100,s/o*100):0,g=uM(i?.theme),v=typeof e=="function",x=typeof t=="function";return y.jsxs("div",{className:`relative rounded-xl border p-3 ${g} ${v?"hover:border-cyan-400/70 hover:shadow-[0_0_18px_rgba(34,211,238,0.35)] transition":""}`,children:[y.jsxs("button",{type:"button",onClick:v?e:void 0,className:`w-full text-left ${v?"cursor-pointer":"cursor-default"}`,"aria-label":v?`Open goal ${m}`:`Goal ${m}`,children:[y.jsxs("div",{className:"flex items-center justify-between mb-1.5 pr-10",children:[y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("span",{className:"text-lg",children:u}),y.jsx("span",{className:"text-sm font-medium text-slate-100",children:m})]}),y.jsxs("span",{className:"text-[0.7rem] text-slate-400",children:["Plan: $",Number.isFinite(c)?c.toFixed(0):"0","/mo"]})]}),y.jsxs("div",{className:"text-xs text-slate-400 mb-1",children:["$",Number.isFinite(s)?s.toFixed(0):"0"," / $",Number.isFinite(o)?o.toFixed(0):"0"]}),y.jsx(i0,{value:p})]}),x&&y.jsx("button",{type:"button",onClick:T=>{T.preventDefault(),T.stopPropagation(),t(i?.id)},className:"absolute top-2 right-2 px-2 py-1 rounded-md border border-slate-700/80 bg-slate-900/40 text-slate-100 text-xs hover:border-cyan-400/70 hover:bg-slate-900/60 transition","aria-label":"Edit goal",title:"Edit",children:""})]})}const hM="modulepreload",fM=function(i){return"/budget-app/"+i},bx={},dM=function(e,t,s){let o=Promise.resolve();if(t&&t.length>0){let p=function(g){return Promise.all(g.map(v=>Promise.resolve(v).then(x=>({status:"fulfilled",value:x}),x=>({status:"rejected",reason:x}))))};document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),m=u?.nonce||u?.getAttribute("nonce");o=p(t.map(g=>{if(g=fM(g),g in bx)return;bx[g]=!0;const v=g.endsWith(".css"),x=v?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${g}"]${x}`))return;const T=document.createElement("link");if(T.rel=v?"stylesheet":hM,v||(T.as="script"),T.crossOrigin="",T.href=g,m&&T.setAttribute("nonce",m),document.head.appendChild(T),v)return new Promise((I,U)=>{T.addEventListener("load",I),T.addEventListener("error",()=>U(new Error(`Unable to preload CSS for ${g}`)))})}))}function c(u){const m=new Event("vite:preloadError",{cancelable:!0});if(m.payload=u,window.dispatchEvent(m),!m.defaultPrevented)throw u}return o.then(u=>{for(const m of u||[])m.status==="rejected"&&c(m.reason);return e().catch(c)})},mM=[{key:"chase",label:"Chase"},{key:"capitalone",label:"Capital One"},{key:"wellsfargo",label:"Wells Fargo"},{key:"americanexpress",label:"Amex"},{key:"discover",label:"Discover"},{key:"navyfederal",label:"Navy Federal"},{key:"mountainamerica",label:"Mountain America"},{key:"bankofamerica",label:"Bank of America"},{key:"usbank",label:"US Bank"},{key:"pnc",label:"PNC"}];function pM(i=""){return i.toLowerCase().replace(/[^a-z0-9]/g,"")}function xx(i="",e=""){const t=pM((e||"")+" "+i.slice(0,4e3));for(const s of mM)if(t.includes(s.key))return s.label;return null}function r0(i=""){const e=i.split(/\r\n|\n|\r/).find(p=>p.trim().length>0)||"";let t=0,s=0,o=0,c=0,u=!1;for(let p=0;p<e.length;p++){const g=e[p];if(g==='"'){u=!u;continue}u||(g===","?t++:g===";"?s++:g==="	"?o++:g==="|"&&c++)}const m=[{d:",",c:t},{d:";",c:s},{d:"	",c:o},{d:"|",c}].sort((p,g)=>g.c-p.c);return m[0].c>0?m[0].d:","}function wo(i,e=","){const t=[];let s="",o=!1;for(let c=0;c<i.length;c++){const u=i[c];if(u==='"'){if(o&&i[c+1]==='"'){s+='"',c+=1;continue}o=!o;continue}u===e&&!o?(t.push(s),s=""):s+=u}return t.push(s),t}function mr(i){if(i==null)return NaN;let e=String(i).trim();e=e.replace(/"/g,"");let t=!1;e.startsWith("(")&&e.endsWith(")")&&(t=!0,e=e.slice(1,-1));let s=!1,o=!1;if(/[a-z]/i.test(e.slice(-1))&&(e.trim().toUpperCase().endsWith("CR")?(s=!0,e=e.replace(/cr$/i,"")):e.trim().toUpperCase().endsWith("DR")&&(o=!0,e=e.replace(/dr$/i,""))),e=e.replace(/[$,]/g,""),e.endsWith("-")&&(e="-"+e.slice(0,-1)),e.endsWith("+")&&(e=e.slice(0,-1)),e=e.replace(/^\+/,""),e==="")return NaN;const c=Number(e);if(Number.isNaN(c))return NaN;let u=t?-c:c;return s&&(u=Math.abs(u)),o&&(u=-Math.abs(u)),u}function RT(i,e){const t=(i||"").toLowerCase();return e>0?t.includes("payroll")||t.includes("direct deposit")?"Income  Paycheck":t.includes("refund")||t.includes("rebate")?"Income  Refund":"Income  Other":t.includes("uber")||t.includes("lyft")||t.includes("taxi")?"Transport  Rideshare":t.includes("shell")||t.includes("chevron")||t.includes("exxon")||t.includes("gas")||t.includes("fuel")?"Transport  Gas":t.includes("walmart")||t.includes("costco")||t.includes("grocery")||t.includes("smith")||t.includes("kroger")?"Groceries":t.includes("starbucks")||t.includes("coffee")||t.includes("mcdonald")||t.includes("taco bell")||t.includes("restaurant")||t.includes("cafe")?"Food & Dining":t.includes("netflix")||t.includes("spotify")||t.includes("hulu")||t.includes("disney")||t.includes("subscription")||t.includes("prime")?"Subscriptions":t.includes("rent")||t.includes("landlord")||t.includes("mortgage")?"Housing  Rent/Mortgage":t.includes("power")||t.includes("electric")||t.includes("water")||t.includes("utility")||t.includes("utilities")?"Utilities":t.includes("gym")||t.includes("fitness")?"Health & Fitness":t.includes("insurance")||t.includes("geico")||t.includes("allstate")?"Insurance":t.includes("amazon")||t.includes("target")||t.includes("best buy")||t.includes("shop")?"Shopping":"Other"}const oa={date:["date","transaction date","posted date","posting date","trans date"],description:["description","details","memo","payee","transaction description","narrative"],debit:["debit","withdrawal","outflow","money out","charge","dr"],credit:["credit","deposit","inflow","money in","payment","credit amount","cr"],amount:["amount","amt","transaction amount","value","amount (usd)","amount (cad)"],type:["type","dr/cr","transaction type","debit/credit"],balance:["balance","running balance","current balance","ending balance","available balance","ledger balance"]};function gM(i,e=","){return wo(i,e).map(s=>s.trim()).map(s=>{let o=s.toLowerCase().replace(/"/g,"");return o=o.replace(/\s+/g," ").trim(),o})}function la(i,e){return i.findIndex(t=>e.includes(t)||e.some(s=>t.includes(s)))}function IT(i){if(!i)return"";let e=String(i).trim().replace(/"/g,"");if(!e)return"";let t=e.match(/^(\d{4})[-/.](\d{1,2})[-/.](\d{1,2})$/);if(t){const[,o,c,u]=t;return`${o}-${c.padStart(2,"0")}-${u.padStart(2,"0")}`}if(t=e.match(/^(\d{4})(\d{2})(\d{2})$/),t){const[,o,c,u]=t;return`${o}-${c}-${u}`}if(t=e.match(/^(\d{1,2})[\/.-](\d{1,2})[\/.-](\d{2,4})$/),t){let[,o,c,u]=t,m=u.length===2?Number(u)>=70?`19${u}`:`20${u}`:u;const p=Number(o),g=Number(c);let v,x;return p>12&&g<=12?(x=p,v=g):(v=p,x=g),`${m}-${String(v).padStart(2,"0")}-${String(x).padStart(2,"0")}`}if(t=e.match(/^(\d{1,2})\s+([A-Za-z]{3,})\s+(\d{2,4})$/),t){const[,o,c,u]=t,m=u.length===2?`20${u}`:u,g=["jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"].indexOf(c.toLowerCase().slice(0,3));if(g>=0){const v=String(g+1).padStart(2,"0"),x=String(o).padStart(2,"0");return`${m}-${v}-${x}`}}if(t=e.match(/^([A-Za-z]{3,})\s+(\d{1,2}),?\s+(\d{2,4})$/),t){const[,o,c,u]=t,m=u.length===2?`20${u}`:u,g=["jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"].indexOf(o.toLowerCase().slice(0,3));if(g>=0){const v=String(g+1).padStart(2,"0"),x=String(c).padStart(2,"0");return`${m}-${v}-${x}`}}const s=new Date(e);return Number.isNaN(s.getTime())?e:s.toISOString().slice(0,10)}function yM(i){const e=r0(i),t=i.split(/\r?\n/).find(c=>c.trim().length>0)||"";if(!t)return[];const s=wo(t,e).map(c=>c.trim().replace(/^"|"$/g,""));return s.some(c=>/[a-zA-Z]/.test(c))?s.map((c,u)=>c||`Column ${u+1}`):s.map((c,u)=>`Column ${u+1}`)}function _M(i){if(!i)return[];const e=i.replace(/^\uFEFF/,""),t=r0(e),s=e.split(/\r\n|\n|\r/).filter(G=>G.trim()!=="");if(s.length===0)return[];let o=gM(s[0],t),c=1;function u(G){const te=la(G,oa.date),ie=la(G,oa.description),de=la(G,oa.amount),he=la(G,oa.debit),D=la(G,oa.credit),C=la(G,oa.type),N=la(G,oa.balance);return{dateIndex:te,descIndex:ie,amountIndex:de,debitIndex:he,creditIndex:D,typeIndex:C,balanceIndex:N}}let{dateIndex:m,descIndex:p,amountIndex:g,debitIndex:v,creditIndex:x,typeIndex:T,balanceIndex:I}=u(o);if(m<0&&p<0&&g<0&&v<0&&x<0&&I<0){const G=wo(s[0],t).map(ie=>ie.trim());o=G.map((ie,de)=>de===0?"date":de===1?"description":de===2||de===G.length-1?"amount":`col${de+1}`),c=0,{dateIndex:m,descIndex:p,amountIndex:g,debitIndex:v,creditIndex:x,typeIndex:T,balanceIndex:I}=u(o)}function q(){const G=Math.min(s.length,25),te=[];for(let he=c;he<G;he++)wo(s[he],t).forEach((C,N)=>{const O=mr(C);Number.isNaN(O)||(te[N]=(te[N]||0)+1)});let ie=-1,de=0;return te.forEach((he,D)=>{he>de&&(de=he,ie=D)}),de>=2?ie:-1}if(g<0&&v<0&&x<0){const G=q();G>=0&&(g=G)}function $(G,te){if(!te||T<0)return G;const ie=te[T]?.toString().toLowerCase()||"";if(!ie)return G;const de=ie.includes("debit")||ie.includes("withdrawal")||ie.includes("payment")||ie.includes("dr")||ie==="d",he=ie.includes("credit")||ie.includes("deposit")||ie.includes("refund")||ie.includes("cr")||ie==="c";return de?-Math.abs(G):he?Math.abs(G):G}const ce=[];for(let G=c;G<s.length;G++){const te=s[G],ie=wo(te,t).map(R=>R.trim());if(ie.length===0||ie.every(R=>R===""))continue;const de=m>=0?ie[m]:"",he=IT(de),D=p>=0?ie[p]:"";let C=NaN;if(g>=0)C=mr(ie[g]),C=$(C,ie);else if(v>=0||x>=0){const R=v>=0?mr(ie[v]):0,w=x>=0?mr(ie[x]):0,oe=Number.isFinite(R)?R:0;C=(Number.isFinite(w)?w:0)-oe}let N=NaN;if(I>=0&&(N=mr(ie[I])),!he&&!D&&Number.isNaN(C)&&Number.isNaN(N)||typeof C!="number"||Number.isNaN(C))continue;const O=RT(D,C),k={date:he,description:D,amount:C,category:O};typeof N=="number"&&!Number.isNaN(N)&&(k.balance=N),ce.push(k)}return ce}function Ex(i,{dateIndex:e=null,descIndex:t=null,amountIndex:s=null,debitIndex:o=null,creditIndex:c=null,typeIndex:u=null,balanceIndex:m=null}={}){if(!i)return[];const p=i.replace(/^\uFEFF/,""),g=r0(p),v=p.split(/\r\n|\n|\r/).filter(I=>I.trim()!=="");if(v.length===0)return[];const x=(I,U)=>{if(!U||u==null||u<0)return I;const q=U[u]?.toString().toLowerCase()||"";if(!q)return I;const $=q.includes("debit")||q.includes("withdrawal")||q.includes("payment")||q.includes("dr")||q==="d",ce=q.includes("credit")||q.includes("deposit")||q.includes("refund")||q.includes("cr")||q==="c";return $?-Math.abs(I):ce?Math.abs(I):I},T=[];for(let I=1;I<v.length;I++){const U=v[I],q=wo(U,g).map(D=>D.trim());if(q.length===0||q.every(D=>D===""))continue;const $=e!=null&&e>=0?q[e]:"",ce=IT($),G=t!=null&&t>=0?q[t]:"";let te=NaN;if(s!=null&&s>=0)te=mr(q[s]),te=x(te,q);else if(o!=null||c!=null){const D=o!=null&&o>=0?mr(q[o]):0,C=c!=null&&c>=0?mr(q[c]):0,N=Number.isFinite(D)?D:0;te=(Number.isFinite(C)?C:0)-N}let ie=NaN;if(m!=null&&m>=0&&(ie=mr(q[m])),!ce&&!G&&Number.isNaN(te)&&Number.isNaN(ie)||typeof te!="number"||Number.isNaN(te))continue;const de=RT(G,te),he={date:ce,description:G,amount:te,category:de};typeof ie=="number"&&!Number.isNaN(ie)&&(he.balance=ie),T.push(he)}return T}function vM(i){return new Promise((e,t)=>{const s=new FileReader;s.onload=o=>e(String(o.target?.result||"")),s.onerror=()=>t(new Error("Failed to read file")),s.readAsText(i)})}function wh(i){i.preventDefault(),i.stopPropagation()}function bM(){return typeof crypto<"u"&&crypto.randomUUID?crypto.randomUUID():`f-${Date.now()}-${Math.random().toString(16).slice(2)}`}function xM(i){return(i?.name||"").toLowerCase().endsWith(".pdf")||i?.type==="application/pdf"?"pdf":"csv"}function EM(i){return{id:bM(),file:i,name:i?.name||"unknown",kind:xM(i),detectedBank:"",rawText:"",columns:[],mapping:{date:"",description:"",amount:""},previewRows:[],status:"pending",error:"",importedCount:0,createdAt:Date.now()}}function TM(i=[]){const e=T=>String(T||"").trim().toLowerCase(),t=["date","posting date","posted date","transaction date","trans date"],s=["description","desc","merchant","name","memo","details","payee"],o=["amount","amt","value","total"],c=["debit","withdrawal","outflow","charge","money out"],u=["credit","deposit","inflow","payment","money in"],m=(T,I)=>{const U=e(T);if(!U)return 0;let q=0;for(const $ of I)U===$?q+=10:U.includes($)&&(q+=6);return q},p=T=>{let I={idx:null,s:0};for(let U=0;U<i.length;U++){const q=m(i[U],T);q>I.s&&(I={idx:U,s:q})}return I.s>0?I.idx:null},g=p(t),v=p(s);let x=p(o);if(x==null){const T=p(c),I=p(u);T!=null&&I==null&&(x=T),I!=null&&T==null&&(x=I),T!=null&&I!=null&&(x=I)}return{date:g,description:v,amount:x}}function Tx(i,e,t){const s=t&&(t.date!==""||t.description!==""||t.amount!==""),o=v=>({dateIndex:v?.date===""?null:Number.parseInt(v.date,10),descIndex:v?.description===""?null:Number.parseInt(v.description,10),amountIndex:v?.amount===""?null:Number.parseInt(v.amount,10)}),c=_M(i);if(Array.isArray(c)&&c.length)return{rows:c,status:"ready",error:"",nextMapping:t};if(s){const v=Ex(i,o(t));return Array.isArray(v)&&v.length?{rows:v,status:"ready",error:"",nextMapping:t}:{rows:[],status:"needsMapping",error:"No rows were parsed with that mapping. Try different columns.",nextMapping:t}}const u=TM(e),m={date:u.date==null?"":String(u.date),description:u.description==null?"":String(u.description),amount:u.amount==null?"":String(u.amount)},p=o(m);if(p.dateIndex!=null&&p.descIndex!=null&&p.amountIndex!=null){const v=Ex(i,p);if(Array.isArray(v)&&v.length)return{rows:v,status:"ready",error:"",nextMapping:m}}return{rows:[],status:"needsMapping",error:"We couldn't automatically detect the right columns. Pick Date/Description/Amount below  it will re-parse automatically.",nextMapping:m}}function wM({onTransactionsParsed:i=()=>{}}){const[e,t]=Te.useState([]),[s,o]=Te.useState(null),[c,u]=Te.useState(!1),[m,p]=Te.useState(!0),g=Te.useRef(e);Te.useEffect(()=>{g.current=e},[e]);const v=Te.useMemo(()=>e.find(R=>R.id===s)||null,[e,s]),x=e.filter(R=>R.status==="imported").length,T=e.filter(R=>R.status==="ready").length,I=e.filter(R=>R.status==="pending"||R.status==="parsing").length,U=e.filter(R=>R.status==="needsMapping").length,q=e.filter(R=>R.status==="error").length;function $(R=[]){const w=Array.from(R||[]).filter(Boolean);if(!w.length)return;const oe=w.map(EM);t(F=>{const j=new Set(F.map(W=>`${W.name}::${W.file?.size}::${W.file?.lastModified}`)),z=oe.filter(W=>{const L=`${W.name}::${W.file?.size}::${W.file?.lastModified}`;return j.has(L)?!1:(j.add(L),!0)});return[...F,...z]}),o(F=>F||oe[0].id)}async function ce(R){t(oe=>oe.map(F=>F.id===R?{...F,status:"parsing",error:""}:F));const w=g.current.find(oe=>oe.id===R);if(w)try{if(w.kind==="pdf"){const{parsePdfTransactions:W}=await dM(async()=>{const{parsePdfTransactions:fe}=await import("./pdf-BCitf8bW.js");return{parsePdfTransactions:fe}},[]),{text:L,rows:K}=await W(w.file),M=xx(L,w.name||""),X=Array.isArray(K)?K:[];t(fe=>fe.map(me=>me.id!==R?me:X.length?{...me,rawText:L||"",detectedBank:M||"",previewRows:X,columns:[],status:"ready",error:""}:{...me,rawText:L||"",detectedBank:M||"",previewRows:[],columns:[],status:"error",error:"We couldn't detect any transactions in that PDF. Try CSV instead."}));return}const oe=await vM(w.file),F=xx(oe,w.name||""),j=yM(oe),z=Tx(oe,j,w.mapping);t(W=>W.map(L=>L.id!==R?L:{...L,rawText:oe,detectedBank:F||"",columns:j,mapping:z.nextMapping??L.mapping,previewRows:z.rows,status:z.status,error:z.error||""}))}catch(oe){console.error("Parse error:",oe),t(F=>F.map(j=>j.id===R?{...j,status:"error",error:j.kind==="pdf"?"We couldn't read this PDF. Try downloading it as CSV.":"We couldn't understand this CSV. Try a different export format."}:j))}}Te.useEffect(()=>{const R=e.find(oe=>oe.status==="pending");if(!R)return;const w=setTimeout(()=>ce(R.id),0);return()=>clearTimeout(w)},[e]);const G=Te.useRef(null);function te(R,w){v&&(t(oe=>oe.map(F=>F.id===v.id?{...F,mapping:{...F.mapping,[R]:w},status:F.kind==="csv"?"parsing":F.status,error:""}:F)),G.current&&clearTimeout(G.current),G.current=setTimeout(()=>{const oe=g.current.find(z=>z.id===v.id);if(!oe||oe.kind!=="csv"||!oe.rawText)return;const F=oe.columns||[],j=Tx(oe.rawText,F,oe.mapping);t(z=>z.map(W=>W.id!==oe.id?W:{...W,mapping:j.nextMapping??W.mapping,previewRows:j.rows,status:j.status,error:j.error||""}))},120))}function ie(R){return new Promise(w=>{t(oe=>{const F=oe.find(z=>z.id===R);if(!F||F.status!=="ready")return oe;const j=oe.map(z=>z.id===R?{...z,status:"importing"}:z);return queueMicrotask(()=>{try{i(F.previewRows,{rawText:F.rawText,bank:F.detectedBank||"",filename:F.name||"",kind:F.kind||"csv"}),t(z=>z.map(W=>W.id===R?{...W,status:"imported",importedCount:F.previewRows.length,error:""}:W)),w(!0)}catch(z){console.error("Import error:",z),t(W=>W.map(L=>L.id===R?{...L,status:"error",error:z?.message||"Import failed."}:L)),w(!1)}}),j})})}async function de(){const R=g.current.filter(w=>w.status==="ready");for(const w of R)await ie(w.id)}const he=Te.useRef(!1);Te.useEffect(()=>{!m||he.current||!e.some(w=>w.status==="ready")||(he.current=!0,(async()=>{try{for(;;){const w=g.current.find(oe=>oe.status==="ready");if(!w)break;await ie(w.id)}}finally{he.current=!1}})())},[e,m]);function D(R){if(t(w=>w.filter(oe=>oe.id!==R)),s===R){const w=g.current.filter(oe=>oe.id!==R);o(w[0]?.id||null)}}function C(){G.current&&clearTimeout(G.current),t([]),o(null),u(!1)}const N=Math.min(10,v?.previewRows?.length||0),O=(v?.previewRows||[]).slice(0,N).reduce((R,w)=>R+(typeof w.amount=="number"?w.amount:0),0),k=v&&v.kind==="csv"&&v.rawText&&v.columns.length>0&&(v.status==="needsMapping"||v.error);return y.jsxs("div",{className:`space-y-2 text-xs rounded-xl border p-3 transition ${c?"border-cyan-400/70 bg-cyan-500/5":"border-slate-800 bg-slate-950/30"}`,onDragEnter:R=>{wh(R),u(!0)},onDragOver:R=>{wh(R),u(!0)},onDragLeave:R=>{wh(R),u(!1)},onDrop:R=>{wh(R),u(!1),$(R.dataTransfer?.files||[])},children:[y.jsxs("p",{className:"text-slate-400",children:["Upload ",y.jsx("span",{className:"text-cyan-300 font-semibold",children:".csv"})," or"," ",y.jsx("span",{className:"text-cyan-300 font-semibold",children:".pdf"})," bank statements. Drop multiple files. Most files will auto-parse and (optionally) auto-import."]}),y.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[y.jsxs("label",{className:"inline-flex items-center gap-2 px-3 py-1.5 rounded-md border border-cyan-400/70 text-cyan-200 bg-cyan-500/10 hover:bg-cyan-500/20 cursor-pointer transition",children:[y.jsx("span",{children:"Choose file(s)"}),y.jsx("input",{type:"file",accept:".csv,.pdf,text/csv,application/pdf,text/plain",multiple:!0,className:"hidden",onChange:R=>{$(R.target.files||[]),R.target.value=""}})]}),y.jsxs("label",{className:"inline-flex items-center gap-2 px-2 py-1.5 rounded-md border border-slate-700 text-slate-200 bg-black/20",children:[y.jsx("input",{type:"checkbox",checked:m,onChange:R=>p(R.target.checked)}),y.jsx("span",{className:"text-[0.7rem] text-slate-300",children:"Auto-import when ready"})]}),e.length>0&&y.jsxs(y.Fragment,{children:[y.jsxs("button",{type:"button",onClick:de,disabled:T===0,className:"px-3 py-1.5 rounded-md border border-emerald-400/70 text-emerald-100 bg-emerald-500/10 hover:bg-emerald-500/20 transition disabled:opacity-40 disabled:cursor-not-allowed",children:["Import all ready (",T,")"]}),y.jsx("button",{type:"button",onClick:C,className:"px-3 py-1.5 rounded-md border border-slate-600 text-slate-200 hover:border-slate-400 transition",children:"Clear"}),y.jsxs("div",{className:"text-[0.7rem] text-slate-500",children:["Imported ",y.jsx("span",{className:"text-slate-200 font-mono",children:x}),"/",y.jsx("span",{className:"text-slate-200 font-mono",children:e.length}),I?y.jsxs("span",{className:"ml-2 text-slate-400",children:["(",I," parsing)"]}):null,U?y.jsxs("span",{className:"ml-2 text-amber-300",children:["(",U," need mapping)"]}):null,q?y.jsxs("span",{className:"ml-2 text-rose-400",children:["(",q," error",q===1?"":"s",")"]}):null]})]})]}),e.length>0&&y.jsx("div",{className:"flex gap-2 overflow-x-auto pb-1",children:e.slice().sort((R,w)=>R.createdAt-w.createdAt).map(R=>{const w=R.id===s,oe=R.status==="imported"?"text-emerald-300":R.status==="ready"?"text-cyan-300":R.status==="error"?"text-rose-400":R.status==="needsMapping"?"text-amber-300":R.status==="parsing"?"text-slate-300":"text-slate-400";return y.jsxs("div",{className:`flex items-center gap-2 px-2 py-1.5 rounded-md border text-[0.7rem] whitespace-nowrap ${w?"border-cyan-400/70 bg-cyan-500/10 text-cyan-200":"border-slate-700 text-slate-300 hover:border-slate-500"}`,children:[y.jsxs("button",{type:"button",onClick:()=>o(R.id),children:[R.name,y.jsxs("span",{className:`ml-2 ${oe}`,children:[" ",R.status]})]}),y.jsx("button",{type:"button",className:"ml-1 text-slate-500 hover:text-slate-200",title:"Remove",onClick:()=>D(R.id),children:""})]},R.id)})}),v&&y.jsxs("div",{className:"mt-1 space-y-2",children:[y.jsxs("div",{className:"rounded-md border border-slate-800 bg-black/20 p-2 text-[0.7rem] text-slate-400",children:[y.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-1",children:[y.jsxs("div",{children:[y.jsx("span",{className:"text-slate-200 font-semibold",children:v.name})," ",y.jsxs("span",{className:"text-slate-500",children:["(",v.kind.toUpperCase(),")"]})]}),y.jsxs("div",{className:"text-slate-500",children:["Rows:"," ",y.jsx("span",{className:"text-slate-200 font-mono",children:v.previewRows?.length||0}),v.detectedBank?y.jsxs(y.Fragment,{children:[" "," Bank:"," ",y.jsx("span",{className:"text-cyan-300 font-semibold",children:v.detectedBank})]}):null]})]}),v.error?y.jsx("div",{className:"mt-1 text-rose-400",children:v.error}):null]}),k&&y.jsxs("div",{className:"border border-slate-700 rounded-md p-2 space-y-2",children:[y.jsx("p",{className:"text-[0.7rem] text-slate-400",children:"Quick fix: choose the correct columns below  it will re-parse automatically."}),y.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-2",children:["date","description","amount"].map(R=>y.jsxs("label",{className:"flex flex-col gap-1 text-[0.7rem]",children:[y.jsx("span",{className:"uppercase tracking-[0.16em] text-slate-500",children:R}),y.jsxs("select",{className:"bg-[#05060F] border border-slate-700 rounded px-2 py-1 text-slate-200",value:v.mapping?.[R]??"",onChange:w=>te(R,w.target.value),children:[y.jsx("option",{value:"",children:"Auto detect"}),v.columns.map((w,oe)=>y.jsxs("option",{value:oe,children:[w," (column ",oe+1,")"]},oe))]})]},R))}),v.status==="needsMapping"?y.jsx("p",{className:"text-[0.7rem] text-amber-300",children:"Pick Date/Description/Amount and it should become ready."}):null]}),v.previewRows?.length>0&&y.jsxs("div",{className:"border border-slate-700 rounded-md p-2 space-y-2",children:[y.jsxs("div",{className:"flex items-center justify-between text-[0.7rem] text-slate-400",children:[y.jsxs("span",{children:["Previewing ",N," of ",v.previewRows.length," rows"]}),y.jsxs("span",{children:["Net amount (preview):"," ",y.jsxs("span",{className:O<0?"text-rose-300":"text-emerald-300",children:[O<0?"-":"","$",Math.abs(O).toFixed(2)]})]})]}),y.jsx("div",{className:"max-h-40 overflow-auto text-[0.7rem]",children:y.jsxs("table",{className:"w-full text-left border-collapse",children:[y.jsx("thead",{className:"sticky top-0 bg-[#05060F]",children:y.jsxs("tr",{className:"border-b border-slate-700",children:[y.jsx("th",{className:"py-1 pr-2 font-semibold text-slate-300",children:"Date"}),y.jsx("th",{className:"py-1 pr-2 font-semibold text-slate-300",children:"Description"}),y.jsx("th",{className:"py-1 text-right font-semibold text-slate-300",children:"Amount"})]})}),y.jsx("tbody",{children:v.previewRows.slice(0,N).map((R,w)=>y.jsxs("tr",{className:"border-b border-slate-800/60",children:[y.jsx("td",{className:"py-1 pr-2 text-slate-200",children:R.date}),y.jsx("td",{className:"py-1 pr-2 text-slate-300",children:R.description}),y.jsxs("td",{className:`py-1 text-right ${R.amount<0?"text-rose-300":"text-emerald-300"}`,children:[R.amount<0?"-":"","$",Math.abs(R.amount).toFixed(2)]})]},w))})]})}),y.jsxs("div",{className:"flex flex-wrap gap-2 mt-1",children:[y.jsx("button",{type:"button",onClick:()=>ie(v.id),disabled:v.status!=="ready",className:"px-3 py-1.5 text-[0.7rem] rounded-md border border-emerald-400/70 text-emerald-100 bg-emerald-500/10 hover:bg-emerald-500/20 transition disabled:opacity-40 disabled:cursor-not-allowed",children:"Import this file"}),y.jsx("button",{type:"button",onClick:()=>ce(v.id),className:"px-3 py-1.5 text-[0.7rem] rounded-md border border-slate-600 text-slate-200 hover:border-slate-400 transition",children:"Re-parse"})]})]})]}),y.jsx("p",{className:"text-[0.7rem] text-slate-500",children:"Tip: Most banks let you export recent transactions as CSV from their website."})]})}function Ah({label:i,value:e,accent:t}){return y.jsxs("div",{className:"flex flex-col",children:[y.jsx("span",{className:"text-[0.65rem] uppercase tracking-[0.22em] text-slate-500",children:i}),y.jsxs("span",{className:`text-base font-semibold ${t}`,children:["$",e.toFixed(2)]})]})}function hp(i){const e=Number(i);return Number.isFinite(e)?e.toLocaleString(void 0,{style:"currency",currency:"USD"}):""}function wx(i){if(i==null)return null;const e=String(i).trim();if(!e)return null;const t=/^\(.*\)$/.test(e),s=e.replace(/[(),$]/g,"").replace(/\s+/g,""),o=Number(s);return Number.isFinite(o)?t?-o:o:null}function AM({open:i,onClose:e,onConfirm:t,accountName:s,statementRangeLabel:o,suggestedEndingBalance:c,transactionSum:u}){const[m,p]=Ee.useState(""),[g,v]=Ee.useState("");Ee.useEffect(()=>{i&&(v(""),p(Number.isFinite(c)?String(c):""))},[i,c]);const x=Ee.useMemo(()=>wx(m),[m]),T=Ee.useMemo(()=>Number.isFinite(x)?x-(Number.isFinite(u)?u:0):null,[x,u]);if(!i)return null;function I(){v("");const U=wx(m);if(!Number.isFinite(U)){v("Please enter a valid ending balance (example: 1284.32).");return}t({endingBalance:U,startingBalance:T})}return y.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[y.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:e}),y.jsxs("div",{className:"relative w-[92vw] max-w-xl rounded-2xl bg-white p-5 shadow-xl",children:[y.jsxs("div",{className:"flex items-start justify-between gap-3",children:[y.jsxs("div",{children:[y.jsx("h2",{className:"text-lg font-semibold",children:"Confirm statement balance"}),y.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["This statement doesnt include a running balance. Enter the"," ",y.jsx("b",{children:"Ending Balance"})," shown on your statement so we can set the correct account balance."]})]}),y.jsx("button",{onClick:e,className:"rounded-xl px-3 py-1 text-sm bg-gray-100 hover:bg-gray-200",children:""})]}),y.jsxs("div",{className:"mt-4 space-y-2",children:[y.jsxs("div",{className:"text-sm text-gray-700",children:[y.jsxs("div",{children:[y.jsx("b",{children:"Account:"})," ",s||"New account"]}),o?y.jsxs("div",{children:[y.jsx("b",{children:"Statement:"})," ",o]}):null,Number.isFinite(u)?y.jsxs("div",{children:[y.jsx("b",{children:"Transactions total:"})," ",hp(u)]}):null]}),Number.isFinite(c)?y.jsxs("button",{type:"button",onClick:()=>p(String(c)),className:"w-full rounded-xl border px-3 py-2 text-left hover:bg-gray-50",title:"Use last known ending balance",children:["Use last ending balance: ",y.jsx("b",{children:hp(c)})]}):null,y.jsx("label",{className:"block text-sm font-medium mt-2",children:"Ending Balance"}),y.jsx("input",{value:m,onChange:U=>p(U.target.value),placeholder:"e.g. 1284.32",className:"w-full rounded-xl border px-3 py-2 outline-none focus:ring",inputMode:"decimal"}),Number.isFinite(T)?y.jsxs("div",{className:"text-sm text-gray-700",children:["Starting balance will be: ",y.jsx("b",{children:hp(T)})]}):null,g?y.jsx("div",{className:"text-sm text-red-600",children:g}):null]}),y.jsxs("div",{className:"mt-5 flex justify-end gap-2",children:[y.jsx("button",{onClick:e,className:"rounded-xl px-4 py-2 text-sm bg-gray-100 hover:bg-gray-200",children:"Cancel"}),y.jsx("button",{onClick:I,className:"rounded-xl px-4 py-2 text-sm bg-black text-white hover:opacity-90",children:"Confirm & Import"})]})]})]})}function SM(i){if(i==null)return null;const e=String(i).trim();if(!e)return null;const t=/^\(.*\)$/.test(e),s=e.replace(/[(),$]/g,"").replace(/\s+/g,""),o=Number(s);return Number.isFinite(o)?t?-o:o:null}function NM(i,e="Amount"){let t=0;for(const s of i||[]){const o=SM(s?.[e]);Number.isFinite(o)&&(t+=o)}return t}function CM(i){const e=new Date(i);return Number.isFinite(e.getTime())?e:null}function RM(i,e="Date"){let t=null,s=null;for(const o of i||[]){const c=CM(o?.[e]);c&&((!t||c<t)&&(t=c),(!s||c>s)&&(s=c))}return{start:t,end:s}}function vo(i){if(!(i instanceof Date))return null;const e=i.getFullYear(),t=String(i.getMonth()+1).padStart(2,"0"),s=String(i.getDate()).padStart(2,"0");return`${e}-${t}-${s}`}function IM(i){return!i?.start||!i?.end?null:`${vo(i.start)}_${vo(i.end)}`}const DM=["monthOverview","accountSnapshot","goals","csvImport"];function MM({month:i="",income:e=0,fixed:t=0,variable:s=0,leftover:o=0,goals:c=[],transactions:u=[],accounts:m=[],currentAccountId:p,onChangeCurrentAccount:g=()=>{},onOpenGoal:v=()=>{},onCreateGoal:x=()=>{},onCsvImported:T=()=>{},onTransactionsParsed:I,currentAccountBalance:U=0,totalBalance:q=0,sectionsOrder:$}){const ce=T||I||(()=>{}),G=Number(e)||0,te=Number(t)||0,ie=Number(s)||0,de=Number(o)||0,he=Number(U)||0,D=Number(q)||0,C=G>0?(G-de)/G*100:0,N=$&&$.length?$:DM,O=Array.isArray(u)&&u.length>0,[k,R]=Te.useState(!1);Te.useEffect(()=>{R(!1)},[u]);const[w,oe]=Te.useState(!1),[F,j]=Te.useState(!1),[z,W]=Te.useState(null);return y.jsxs("div",{className:"space-y-6",children:[y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsx("h1",{className:"text-lg font-semibold text-slate-100",children:i}),y.jsx("span",{className:"text-xs text-slate-400",children:"Overview of this month's money flow"})]}),N.map(L=>{switch(L){case"monthOverview":return y.jsxs(Dn,{title:"MONTH OVERVIEW",children:[y.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 text-sm",children:[y.jsx(Ah,{label:"Income",value:G,accent:"text-emerald-300"}),y.jsx(Ah,{label:"Fixed",value:te,accent:"text-rose-300"}),y.jsx(Ah,{label:"Variable",value:ie,accent:"text-amber-300"}),y.jsx(Ah,{label:"Leftover",value:de,accent:"text-cyan-300"})]}),y.jsxs("div",{className:"mt-4",children:[y.jsx("p",{className:"text-xs text-slate-400 mb-1",children:"Allocation this month"}),y.jsx(i0,{value:C})]})]},"monthOverview");case"accountSnapshot":return y.jsxs(Dn,{title:"ACCOUNT SNAPSHOT",children:[y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsxs("div",{className:"flex flex-col",children:[y.jsx("span",{className:"text-[0.65rem] uppercase tracking-[0.18em] text-slate-500",children:"Current account"}),y.jsx("select",{className:"mt-1 bg-[#05060F] border border-slate-700 rounded-md px-2 py-1 text-[0.75rem] text-slate-100",value:p,onChange:K=>g(K.target.value),children:(m||[]).map(K=>y.jsx("option",{value:K.id,children:K.name},K.id))})]}),y.jsxs("div",{className:"text-right",children:[y.jsx("div",{className:"text-[0.65rem] uppercase tracking-[0.18em] text-slate-500",children:"Balance"}),y.jsxs("div",{className:"text-2xl font-semibold text-cyan-300",children:["$",he.toFixed(2)]}),y.jsxs("div",{className:"text-[0.7rem] text-slate-500",children:["of $",D.toFixed(2)," total"]})]})]}),y.jsx("hr",{className:"my-3 border-slate-800"}),y.jsxs("div",{children:[y.jsx("div",{className:"text-[0.65rem] uppercase tracking-[0.2em] text-slate-500",children:"All accounts"}),y.jsxs("div",{className:"mt-1 text-xl font-semibold text-emerald-300",children:["$",D.toFixed(2)]}),y.jsx("p",{className:"mt-1 text-[0.7rem] text-slate-500",children:"Total estimated cash across all linked accounts."})]})]},"accountSnapshot");case"goals":return y.jsxs("div",{className:"space-y-3",children:[y.jsx("h2",{className:"text-xs tracking-[0.25em] text-slate-400 uppercase",children:"Goals"}),y.jsx("div",{className:"grid md:grid-cols-2 gap-3",children:(Array.isArray(c)?c:[]).map(K=>y.jsx(CT,{goal:K,onClick:null,onEdit:()=>v(K.id)},K.id))}),y.jsx("button",{type:"button",onClick:x,className:"mt-1 px-4 py-2 rounded-lg border border-cyan-400/70 text-xs text-cyan-200 bg-cyan-500/10 hover:bg-cyan-500/20 transition",children:"+ Add Goal"})]},"goals");case"csvImport":return y.jsxs(Dn,{title:"BANK STATEMENT IMPORT (CSV)",children:[y.jsx(wM,{onTransactionsParsed:async(K,M)=>{R(!1);const X=NM(K,"amount"),fe=RM(K,"date"),me=IM(fe),ye=(m||[]).find(Se=>Se.id===p)||null,se=[...K||[]].reverse().find(Se=>typeof Se?.balance=="number"&&Number.isFinite(Se.balance));if(se){const Se=Number(se.balance),Ne=Se-Number(X||0),at=fe?.start?vo(fe.start):"",Me=fe?.end?vo(fe.end):"";await ce(K,{...M,accountId:p,statement:{startISO:at,endISO:Me,statementKey:me,transactionSum:X,endingBalance:Se,startingBalance:Ne,balanceSource:"csv"}});return}const ge=ye&&Number.isFinite(Number(ye.lastConfirmedEndingBalance))?Number(ye.lastConfirmedEndingBalance):null;W({rows:K,raw:M,transactionSum:X,range:fe,statementKey:me,accountId:p,accountName:ye?.name||"",suggestedEndingBalance:ge}),oe(!0)}}),O&&y.jsxs("div",{className:"mt-4 space-y-2",children:[y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsx("h3",{className:"text-xs uppercase tracking-[0.18em] text-slate-400",children:"Current account transactions"}),y.jsx("button",{type:"button",className:"text-[0.7rem] px-2 py-1 rounded-md border border-slate-600 text-slate-200 hover:border-cyan-400 transition",onClick:()=>R(K=>!K),children:k?"Hide":"Show"})]}),k&&y.jsx("div",{className:"max-h-64 overflow-auto border border-slate-800 rounded-lg",children:y.jsxs("table",{className:"w-full text-xs text-left",children:[y.jsx("thead",{className:"bg-slate-900 text-slate-300",children:y.jsxs("tr",{children:[y.jsx("th",{className:"px-2 py-1",children:"Date"}),y.jsx("th",{className:"px-2 py-1",children:"Description"}),y.jsx("th",{className:"px-2 py-1",children:"Category"}),y.jsx("th",{className:"px-2 py-1 text-right",children:"Amount"})]})}),y.jsx("tbody",{className:"divide-y divide-slate-800",children:u.map((K,M)=>y.jsxs("tr",{className:"hover:bg-slate-900/70",children:[y.jsx("td",{className:"px-2 py-1 text-slate-300",children:K.date||"-"}),y.jsx("td",{className:"px-2 py-1 text-slate-200",children:K.description||"-"}),y.jsx("td",{className:"px-2 py-1 text-slate-300",children:K.category||"Other"}),y.jsx("td",{className:`px-2 py-1 text-right ${typeof K.amount=="number"&&K.amount<0?"text-rose-300":"text-emerald-300"}`,children:typeof K.amount!="number"||Number.isNaN(K.amount)?"-":`$${K.amount.toFixed(2)}`})]},M))})]})})]})]},"csvImport");default:return null}}),y.jsx(AM,{open:w,busy:F,accountName:z?.accountName||"",statementLabel:z?.range?.start&&z?.range?.end?`${z.range.start.toLocaleDateString()}  ${z.range.end.toLocaleDateString()}`:"",transactionSum:z?.transactionSum??0,suggestedEndingBalance:z?.suggestedEndingBalance??null,onClose:()=>{F||(oe(!1),W(null))},onConfirm:async({endingBalance:L,startingBalance:K})=>{if(z){j(!0);try{const M=z.range?.start?vo(z.range.start):"",X=z.range?.end?vo(z.range.end):"";await ce(z.rows,{...z.raw,accountId:z.accountId,statement:{startISO:M,endISO:X,statementKey:z.statementKey,transactionSum:z.transactionSum,endingBalance:L,startingBalance:K,balanceSource:"user"}}),oe(!1),W(null)}finally{j(!1)}}}})]})}function OM(i){return(Array.isArray(i?.transactions)?i.transactions:[]).reduce((t,s)=>t+(typeof s.amount=="number"?s.amount:0),0)}function fp(i){const e=Number(i);return Number.isFinite(e)?`$${e.toFixed(2)}`:"-"}function kM(i){if(!i)return"";const e=Date.parse(i);return Number.isFinite(e)?new Date(e).toLocaleDateString():""}function VM({accounts:i=[],currentAccountId:e,onChangeCurrentAccount:t=()=>{},onCreateAccount:s=()=>{},onDeleteAccount:o=()=>{},onSetAccountBalance:c=()=>{},onRenameAccount:u=()=>{}}){const m=Array.isArray(i)&&i.length>0,[p,g]=Ee.useState([]),v=x=>{g(T=>T.includes(x)?T.filter(I=>I!==x):[...T,x])};return y.jsxs("div",{className:"space-y-4",children:[y.jsxs("header",{className:"flex items-center justify-between",children:[y.jsx("h1",{className:"text-lg font-semibold text-slate-100",children:"Accounts"}),y.jsx("button",{type:"button",onClick:s,className:"px-2 py-1 rounded-md bg-emerald-500 hover:bg-emerald-400 text-xs font-medium text-slate-900",children:"+ New account"})]}),y.jsxs(Dn,{title:"ALL ACCOUNTS",children:[!m&&y.jsx("p",{className:"text-xs text-slate-400",children:"No accounts yet. Create one to start tracking balances."}),m&&y.jsx("div",{className:"space-y-2",children:i.map(x=>{const T=Array.isArray(x.transactions)?x.transactions.length:0,I=OM(x),U=(typeof x.startingBalance=="number"?x.startingBalance:0)+I,q=Number.isFinite(Number(x.currentBalance)),$=q?Number(x.currentBalance):U,ce=q?kM(x.currentBalanceAsOf):"",G=x.lastStatementKey||"",te=Number.isFinite(Number(x.lastConfirmedEndingBalance))?Number(x.lastConfirmedEndingBalance):null,de=(G&&x.statementBalances&&typeof x.statementBalances=="object"&&x.statementBalances[G]||null)?.balanceSource||"",he=Array.isArray(x.transactions)?x.transactions.slice().filter(N=>N&&typeof N=="object").sort((N,O)=>{const k=Date.parse(N.date),R=Date.parse(O.date),w=Number.isFinite(k),oe=Number.isFinite(R);return!w&&!oe?0:w?oe?R-k:-1:1}):[],D=he.length>0,C=p.includes(x.id);return y.jsxs("div",{className:`space-y-2 rounded-md px-3 py-2 text-xs ${x.id===e?"bg-slate-800/70 border border-cyan-400/50":"bg-slate-900/60 border border-slate-700/70"}`,children:[y.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[y.jsxs("div",{className:"flex-1",children:[y.jsx("input",{className:"bg-transparent text-slate-100 font-medium text-xs w-full focus:outline-none",value:x.name,onChange:N=>u(x.id,N.target.value)}),y.jsxs("p",{className:"text-[11px] text-slate-400",children:["Type: ",x.type||"checking"]}),y.jsxs("p",{className:"text-[11px] text-slate-400",children:["Transactions:"," ",y.jsx("span",{className:"text-slate-200",children:T}),"  Net:"," ",y.jsx("span",{className:I>=0?"text-emerald-300":"text-rose-300",children:fp(I)}),"  ","Current:"," ",y.jsx("span",{className:$>=0?"text-emerald-300":"text-rose-300",children:fp($)}),q?y.jsxs("span",{className:"text-slate-500",children:[" ","(confirmed",ce?` as of ${ce}`:"",")"]}):y.jsx("span",{className:"text-slate-500",children:" (computed)"})]}),q&&y.jsxs("p",{className:"text-[11px] text-slate-500",children:["Last statement:"," ",y.jsx("span",{className:"text-slate-300",children:G||""}),de?y.jsxs("span",{className:"text-slate-500",children:[" "," source:"," ",y.jsx("span",{className:"text-slate-300",children:de})]}):null,te!=null?y.jsxs("span",{className:"text-slate-500",children:[" "," ending:"," ",y.jsx("span",{className:"text-slate-300",children:fp(te)})]}):null]})]}),y.jsxs("div",{className:"flex flex-col items-end gap-2",children:[y.jsxs("div",{className:"flex flex-col items-end",children:[y.jsx("label",{className:"text-[11px] text-slate-400",children:"Starting balance"}),y.jsx("input",{type:"number",className:"w-24 bg-slate-900/80 border border-slate-700 rounded px-1 py-0.5 text-right text-xs font-mono text-slate-100 focus:outline-none focus:ring-1 focus:ring-cyan-400",value:x.startingBalance??0,onChange:N=>c(x.id,parseFloat(N.target.value||"0"))})]}),q&&y.jsx("button",{type:"button",className:"px-2 py-0.5 rounded text-[11px] border border-slate-500 hover:border-cyan-400 text-slate-200",onClick:()=>c(x.id,$),title:"Sets starting balance to the confirmed current balance",children:"Use current as starting"})]}),y.jsxs("div",{className:"flex flex-col items-end gap-1",children:[y.jsx("button",{type:"button",onClick:()=>{t(x.id),v(x.id)},className:"px-2 py-0.5 rounded text-[11px] border border-slate-500 hover:border-cyan-400",children:C?"Hide":"View"}),y.jsx("button",{type:"button",onClick:()=>o(x.id),className:"px-2 py-0.5 rounded text-[11px] text-red-300 hover:bg-red-500/10",children:"Delete"})]})]}),y.jsxs("div",{className:"border-t border-slate-800/70 pt-2",children:[!D&&y.jsx("p",{className:"mt-1 text-[0.65rem] text-slate-500",children:"No transactions imported yet."}),C&&D&&y.jsx("div",{className:"mt-2 max-h-72 overflow-auto rounded-md border border-slate-800/50",children:y.jsxs("table",{className:"w-full text-[0.7rem] text-left",children:[y.jsx("thead",{className:"bg-slate-900 text-slate-300 sticky top-0",children:y.jsxs("tr",{children:[y.jsx("th",{className:"px-2 py-1",children:"Date"}),y.jsx("th",{className:"px-2 py-1",children:"Description"}),y.jsx("th",{className:"px-2 py-1",children:"Category"}),y.jsx("th",{className:"px-2 py-1 text-right",children:"Amount"})]})}),y.jsx("tbody",{className:"divide-y divide-slate-800/70",children:he.map((N,O)=>{const k=Number(N.amount),R=Number.isFinite(k)?`$${k.toFixed(2)}`:"-";return y.jsxs("tr",{children:[y.jsx("td",{className:"px-2 py-1 text-slate-300",children:N.date||"-"}),y.jsx("td",{className:"px-2 py-1 text-slate-200",children:N.description||"Transaction"}),y.jsx("td",{className:"px-2 py-1 text-slate-400",children:N.category||"Other"}),y.jsx("td",{className:`px-2 py-1 text-right ${k<0?"text-rose-300":"text-emerald-300"}`,children:R})]},N.id||`${x.id}-full-${O}`)})})]})})]})]},x.id)})})]})]})}function Kl(){const i=new Date,e=i.getFullYear(),t=String(i.getMonth()+1).padStart(2,"0"),s=String(i.getDate()).padStart(2,"0");return`${e}-${t}-${s}`}function ha(i){if(!i||typeof i!="string")return null;const e=i.match(/^(\d{4})-(\d{2})-(\d{2})$/);if(!e)return null;const t=Number(e[1]),s=Number(e[2])-1,o=Number(e[3]),c=new Date(t,s,o);return c.setHours(0,0,0,0),c}function Bh(i){const e=new Date(i),t=e.getFullYear(),s=String(e.getMonth()+1).padStart(2,"0"),o=String(e.getDate()).padStart(2,"0");return`${t}-${s}-${o}`}function Kp(i,e){const t=new Date(i);return t.setDate(t.getDate()+e),t}function Ax(i,e){const t=new Date(i),s=t.getDate();t.setDate(1),t.setMonth(t.getMonth()+e);const o=new Date(t.getFullYear(),t.getMonth()+1,0).getDate();return t.setDate(Math.min(s,o)),t}function qh(i){const e=Number(i);return Number.isFinite(e)?e:0}function Sh(i){return!i||typeof i!="string"?"":i.slice(0,7)}function Fh(i,e){return`${i}|${e}`}function jM(i=[],e){if(!e||typeof e!="string"||e.length<7)return[];const t=ha(`${e}-01`);if(!t)return[];const s=new Date(t.getFullYear(),t.getMonth()+1,0);s.setHours(0,0,0,0);const o=Array.isArray(i)?i:[],c=[],u=(m,p)=>{if(!p)return;const g=new Date(p);g.setHours(0,0,0,0),!(g<t||g>s)&&c.push({templateId:m.id,label:m.label||"Due item",amount:Number.isFinite(Number(m.amount))?Number(m.amount):0,dueDate:Bh(g)})};for(const m of o){if(!m?.id)continue;const p=String(m.cadence||"once").toLowerCase(),g=ha(m.startDate);if(g){if(p==="once"){u(m,g);continue}if(p==="weekly"||p==="biweekly"){const v=p==="weekly"?7:14;let x=new Date(g);if(x.setHours(0,0,0,0),x<t){const T=Math.floor((t-x)/864e5),I=Math.ceil(T/v);x=Kp(x,I*v)}for(;x<=s;)u(m,x),x=Kp(x,v);continue}if(p==="monthly"){const v=Number(m.dayOfMonth)||g.getDate();let x=new Date(g);for(x.setHours(0,0,0,0);x<t;)x=Ax(x,1);for(;x<=s;){const T=new Date(x.getFullYear(),x.getMonth(),1),I=new Date(T.getFullYear(),T.getMonth()+1,0).getDate(),U=new Date(T.getFullYear(),T.getMonth(),Math.min(v,I));U.setHours(0,0,0,0),u(m,U),x=Ax(x,1)}continue}if(p==="yearly"){const v=new Date(t.getFullYear(),g.getMonth(),g.getDate());v.setHours(0,0,0,0),u(m,v);continue}u(m,g)}}return c.sort((m,p)=>m.dueDate>p.dueDate?1:m.dueDate<p.dueDate?-1:0),c}function LM(i=[]){return(Array.isArray(i)?i:[]).reduce((t,s)=>{const o=Number(s?.amount);if(!Number.isFinite(o))return t;const c=(s?.flowType||"").toLowerCase();return c==="income"?t+Math.max(0,o):c==="expense"||c==="transfer"||c==="ignore"?t:o>0?t+o:t},0)}function PM({month:i,budget:e,totals:t={},onBudgetChange:s,scheduledTemplates:o=[],scheduleChecks:c={},onScheduledTemplatesChange:u=()=>{},onScheduleChecksChange:m=()=>{},accounts:p=[],currentAccountId:g="main",onAddTransaction:v=()=>{}}){const x=Number(t?.fixed??t?.fixedTotal??0),T=Number(t?.variable??t?.variableTotal??0),I=Array.isArray(e?.fixed)?e.fixed:[],U=Array.isArray(e?.variable)?e.variable:[],q=Array.isArray(e?.transactions)?e.transactions:[],$=Number.isFinite(Number(e?.estimatedIncome))?Number(e.estimatedIncome):Number.isFinite(Number(e?.income))?Number(e.income):0,ce=Te.useMemo(()=>LM(q),[q]),G=!!e?.useActualIncome,ie=(G?ce:$)-x-T,[de,he]=Te.useState(()=>Kl()),[D,C]=Te.useState(()=>`${Sh(de)}-01`);Te.useEffect(()=>{if(!de)return;const se=Sh(de);C(`${se}-01`)},[de]);const N=Te.useMemo(()=>Sh(D),[D]),O=Te.useMemo(()=>jM(o,N),[o,N]),k=Te.useMemo(()=>{const se={};for(const ge of Array.isArray(o)?o:[])ge?.id&&(se[ge.id]=ge);return se},[o]),w=Te.useMemo(()=>{const se=new Map;for(const ge of O){const Se=ge?.dueDate;if(!Se)continue;const Ne=se.get(Se)||[];Ne.push(ge),se.set(Se,Ne)}return se},[O]).get(de)||[],oe=Te.useMemo(()=>ha(Kl()),[]),F=Te.useMemo(()=>oe?Bh(oe):"",[oe]),j=Te.useMemo(()=>oe?Kp(oe,7):null,[oe]),z=Te.useMemo(()=>{const ge=O.map(Me=>{const tt=ha(Me?.dueDate);return{...Me,_due:tt,paid:!!c[Fh(Me.templateId,Me.dueDate)]?.paid,cadence:k[Me.templateId]?.cadence||"once"}}).filter(Me=>Me._due).filter(Me=>!Me.paid),Se=ge.filter(Me=>oe&&Me._due<oe).sort((Me,tt)=>Me._due-tt._due),Ne=ge.filter(Me=>Me.dueDate===F).sort((Me,tt)=>qh(tt.amount)-qh(Me.amount)),at=ge.filter(Me=>j&&oe&&Me._due>oe&&Me._due<=j).sort((Me,tt)=>Me._due-tt._due);return{overdue:Se,dueToday:Ne,upcoming:at}},[O,c,k,oe,F,j]);function W(){const se=window.prompt("Estimated monthly income amount:",$.toString());if(se===null)return;const ge=Number(se);if(!Number.isFinite(ge)){window.alert("Enter a valid number for estimated income.");return}s({...e,estimatedIncome:ge,income:ge})}function L(){s({...e,useActualIncome:!G})}function K(se){const ge=se==="income",Se=ge?"Paycheck":"Expense",Ne=window.prompt("Description:",Se);if(!Ne)return;const at=window.prompt(`Amount (${ge?"positive":"positive (we'll store as negative)"})`,"0");if(at===null)return;const Me=Number(at);if(!Number.isFinite(Me)){window.alert("Please enter a valid number for amount.");return}const tt=window.prompt("Date (YYYY-MM-DD):",de||Kl());if(!tt)return;if(!/^\d{4}-\d{2}-\d{2}$/.test(tt)){window.alert("Use YYYY-MM-DD format for dates.");return}const sn=window.prompt("Category (optional):",ge?"Income":""),jt=ge?Math.abs(Me):-Math.abs(Me);v({description:Ne.trim(),amount:jt,date:tt,category:(sn||"").trim(),accountId:g||"main",flowType:ge?"income":"expense"})}function M({label:se,amount:ge,kind:Se,source:Ne,defaultDateISO:at}){if(!window.confirm("Add to calendar as repeating due item?"))return null;const tt=window.prompt("Start date (YYYY-MM-DD):",at||Kl());if(!tt)return null;if(!/^\d{4}-\d{2}-\d{2}$/.test(tt))return window.alert("Please use YYYY-MM-DD format (example: 2026-01-15)."),null;const sn=ha(tt);if(!sn)return window.alert("Could not parse that date. Try again with YYYY-MM-DD."),null;const jt=window.prompt("Cadence? (once, weekly, biweekly, monthly, yearly)","monthly");if(jt===null)return null;const Kn=["once","weekly","biweekly","monthly","yearly"],mi=(jt||"monthly").trim().toLowerCase(),Ds=Kn.includes(mi)?mi:"monthly",Cr={id:`sched-${Date.now()}`,label:(se||"").trim()||"Due item",amount:Number(ge)||0,kind:Se,source:Ne,startDate:Bh(sn),cadence:Ds,dayOfMonth:sn.getDate(),accountId:g||"main"},pt=Array.isArray(o)?o:[];u([...pt,Cr]);const gt=Bh(sn);return he(gt),C(`${Sh(gt)}-01`),Cr.id}function X(se){const ge=window.prompt(`New ${se} item name:`);if(!ge)return;const Se=window.prompt(`Amount for "${ge}" (numbers only):`),Ne=Number(Se);if(!Number.isFinite(Ne)){window.alert("That didn't look like a valid number.");return}const Me=M({label:ge,amount:Ne,kind:"expense",source:se==="fixed"?"budget-fixed":"budget-variable",defaultDateISO:de||Kl()}),tt={id:`budget-${se}-${Date.now()}`,label:ge,amount:Ne,templateId:Me||void 0},jt=[...se==="fixed"?I:U,tt];s({...e,[se]:jt})}function fe(se,ge){const Se=se==="fixed"?I:U,Ne=Se[ge];if(!window.confirm("Delete this item?"))return;if(Ne?.templateId&&window.confirm("This item is linked to a calendar due item. Delete that too?")){const tt=Array.isArray(o)?o:[];u(tt.filter(Kn=>Kn.id!==Ne.templateId));const jt=Object.entries(c||{}).filter(([Kn])=>!Kn.startsWith(`${Ne.templateId}|`));m(Object.fromEntries(jt))}const at=Se.filter((Me,tt)=>tt!==ge);s({...e,[se]:at})}function me(se){if(!se?.templateId||!se?.dueDate)return;const ge=Fh(se.templateId,se.dueDate),Se=!!c[ge]?.paid;m({...c||{},[ge]:{paid:!Se}})}function ye(se){if(!se||!window.confirm("Delete this repeating due item?"))return;const Se=(Array.isArray(o)?o:[]).filter(Me=>Me.id!==se);u(Se);const at=Object.entries(c||{}).filter(([Me])=>!Me.startsWith(`${se}|`));m(Object.fromEntries(at))}return y.jsxs("div",{className:"space-y-6",children:[y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsxs("h1",{className:"text-lg font-semibold text-slate-100",children:[i," Budget"]}),y.jsx("span",{className:"text-xs text-slate-400",children:"Income + Expenses + Goals"})]}),y.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[y.jsx(Dn,{title:"INCOME",children:y.jsxs("div",{className:"grid gap-2",children:[y.jsxs("div",{className:"flex items-end justify-between",children:[y.jsxs("div",{children:[y.jsx("div",{className:"text-[0.7rem] uppercase tracking-[0.18em] text-slate-500",children:"Estimated"}),y.jsxs("div",{className:"text-2xl font-semibold text-emerald-300",children:["$",$.toFixed(2)]})]}),y.jsxs("div",{className:"text-right",children:[y.jsx("div",{className:"text-[0.7rem] uppercase tracking-[0.18em] text-slate-500",children:"Actual so far"}),y.jsxs("div",{className:"text-2xl font-semibold text-cyan-200",children:["$",ce.toFixed(2)]})]})]}),y.jsxs("div",{className:"text-xs text-slate-400",children:["Leftover (using ",G?"actual":"estimated","):"," ",y.jsxs("span",{className:"text-slate-100 font-semibold",children:["$",ie.toFixed(2)]})]}),y.jsxs("div",{className:"flex flex-wrap gap-2 pt-1",children:[y.jsx("button",{className:"px-3 py-1.5 text-xs rounded-md border border-emerald-400/70 text-emerald-200 bg-emerald-500/10 hover:bg-emerald-500/20 transition",onClick:W,type:"button",children:"Edit estimate"}),y.jsx("button",{className:"px-3 py-1.5 text-xs rounded-md border border-cyan-400/70 text-cyan-200 bg-cyan-500/10 hover:bg-cyan-500/20 transition",onClick:L,type:"button",title:"Use actual income from your logged income transactions",children:G?"Using actual ":"Use actual income"}),y.jsx("button",{className:"px-3 py-1.5 text-xs rounded-md border border-cyan-400/70 text-cyan-200 bg-cyan-500/10 hover:bg-cyan-500/20 transition",onClick:()=>K("income"),type:"button",title:"Add a paycheck / income transaction (no CSV needed)",children:"+ Add income"})]}),y.jsx("p",{className:"text-[0.7rem] text-slate-500",children:"Tip: Add paychecks here to build Actual income automatically."})]})}),y.jsxs(Dn,{title:"FIXED EXPENSES",children:[y.jsx(Sx,{items:I,total:x,onDelete:se=>fe("fixed",se)}),y.jsxs("div",{className:"mt-3 flex flex-wrap gap-2",children:[y.jsx("button",{className:"px-3 py-1.5 text-xs rounded-md border border-rose-400/70 text-rose-200 bg-rose-500/10 hover:bg-rose-500/20 transition",onClick:()=>X("fixed"),type:"button",children:"+ Add Fixed Expense"}),y.jsx("button",{className:"px-3 py-1.5 text-xs rounded-md border border-rose-400/60 text-rose-200 bg-black/10 hover:bg-rose-500/10 transition",onClick:()=>K("expense"),type:"button",title:"Add an expense transaction (no CSV needed)",children:"+ Add expense"})]})]}),y.jsxs(Dn,{title:"VARIABLE SPENDING",children:[y.jsx(Sx,{items:U,total:T,onDelete:se=>fe("variable",se)}),y.jsxs("div",{className:"mt-3 flex flex-wrap gap-2",children:[y.jsx("button",{className:"px-3 py-1.5 text-xs rounded-md border border-amber-400/70 text-amber-200 bg-amber-500/10 hover:bg-amber-500/20 transition",onClick:()=>X("variable"),type:"button",children:"+ Add Variable Expense"}),y.jsx("button",{className:"px-3 py-1.5 text-xs rounded-md border border-amber-400/60 text-amber-200 bg-black/10 hover:bg-amber-500/10 transition",onClick:()=>K("expense"),type:"button",title:"Add an expense transaction (no CSV needed)",children:"+ Add expense"})]})]}),y.jsxs(Dn,{title:"MONTHLY DUE DATES",children:[y.jsx("div",{className:"grid gap-3 md:grid-cols-2",children:y.jsxs("div",{className:"space-y-3",children:[y.jsx(dp,{title:"OVERDUE",subtitle:"Due before today",emptyText:"No overdue items ",items:z.overdue,tone:"rose",templateLookup:k,scheduleChecks:c,onJump:se=>he(se),onTogglePaid:me,onDelete:se=>ye(se.templateId)}),y.jsx(dp,{title:"DUE TODAY",subtitle:F,emptyText:"Nothing due today.",items:z.dueToday,tone:"amber",templateLookup:k,scheduleChecks:c,onJump:se=>he(se),onTogglePaid:me,onDelete:se=>ye(se.templateId)}),y.jsx(dp,{title:"UPCOMING",subtitle:"Next 7 days",emptyText:"No upcoming items.",items:z.upcoming,tone:"cyan",templateLookup:k,scheduleChecks:c,onJump:se=>he(se),onTogglePaid:me,onDelete:se=>ye(se.templateId)})]})}),y.jsxs("div",{className:"mt-4 text-xs text-slate-400",children:["Due on ",y.jsx("span",{className:"text-slate-200",children:de})]}),y.jsx("div",{className:"mt-2 space-y-2 text-sm",children:w.length===0?y.jsx("p",{className:"text-xs text-slate-500",children:"No items due that day."}):w.map(se=>{const ge=qh(se?.amount),Se=!!c[Fh(se.templateId,se.dueDate)]?.paid,Ne=!Se&&!!oe&&ha(se.dueDate)&&ha(se.dueDate)<oe,at=k[se.templateId]?.cadence||"once";return y.jsxs("div",{className:["flex items-center justify-between gap-2 rounded-md border bg-black/20 px-3 py-2",Ne?"border-rose-400/60":"border-slate-700/70"].join(" "),children:[y.jsxs("div",{className:"flex-1",children:[y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("span",{className:"text-slate-200",children:se.label}),y.jsxs("span",{className:"text-slate-400",children:["$",ge.toFixed(2)]}),Ne&&y.jsx("span",{className:"text-[0.65rem] rounded-full border border-rose-400/60 px-2 py-0.5 text-rose-200 bg-rose-500/10",children:"overdue"})]}),y.jsxs("div",{className:"text-[0.7rem] text-slate-500",children:[at,"  ",Se?"paid":"unpaid"]})]}),y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("button",{className:"px-2 py-1 text-[0.7rem] rounded-md border border-slate-600/70 text-slate-200 hover:border-cyan-400/60",onClick:()=>me(se),type:"button",children:Se?"Unpay":"Paid"}),y.jsx("button",{className:"text-[0.75rem] text-slate-500 hover:text-rose-400",onClick:()=>ye(se.templateId),type:"button","aria-label":"Delete due item",children:""})]})]},`${se.templateId}-${se.dueDate}`)})})]})]})]})}function Sx({items:i=[],total:e=0,onDelete:t}){return y.jsxs("div",{className:"space-y-2 text-sm",children:[i.length===0&&y.jsx("p",{className:"text-xs text-slate-500",children:"No items yet."}),i.map((s,o)=>{const c=Number(s?.amount??0),u=s?.label||s?.name||`Item ${o+1}`,m=!!s?.templateId;return y.jsxs("div",{className:"flex items-center justify-between text-slate-200 gap-2",children:[y.jsxs("div",{className:"flex-1 flex justify-between items-center",children:[y.jsxs("span",{className:"flex items-center gap-2",children:[u,m&&y.jsx("span",{className:"rounded-full border border-slate-600/70 px-2 py-[2px] text-[0.65rem] text-slate-200 bg-black/20",children:"linked"})]}),y.jsxs("span",{className:"text-slate-300",children:["$",c.toFixed(2)]})]}),t&&y.jsx("button",{className:"text-[0.65rem] text-slate-500 hover:text-rose-400",onClick:()=>t(o),type:"button","aria-label":"Delete item",children:""})]},(s?.id||u)+o)}),y.jsxs("div",{className:"mt-2 pt-2 border-t border-slate-700 flex items-center justify-between text-xs",children:[y.jsx("span",{className:"uppercase tracking-[0.18em] text-slate-500",children:"Total"}),y.jsxs("span",{className:"text-slate-100",children:["$",Number(e).toFixed(2)]})]})]})}function dp({title:i,subtitle:e,items:t=[],emptyText:s,tone:o="cyan",templateLookup:c={},scheduleChecks:u={},onJump:m=()=>{},onTogglePaid:p=()=>{},onDelete:g=()=>{}}){const v={rose:"border-rose-400/30 text-rose-200 bg-rose-500/5",amber:"border-amber-400/30 text-amber-200 bg-amber-500/5",cyan:"border-cyan-400/30 text-cyan-200 bg-cyan-500/5"};return y.jsxs("div",{className:`rounded-md border ${v[o]||v.cyan} p-3`,children:[y.jsxs("div",{className:"flex items-baseline justify-between",children:[y.jsx("div",{className:"text-[0.7rem] tracking-[0.18em] uppercase",children:i}),y.jsx("div",{className:"text-[0.7rem] text-slate-400",children:e})]}),y.jsxs("div",{className:"mt-2 space-y-2",children:[t.length===0?y.jsx("div",{className:"text-xs text-slate-500",children:s}):t.slice(0,5).map(x=>{const T=qh(x?.amount),I=c[x.templateId]?.cadence||"once",U=!!u[Fh(x.templateId,x.dueDate)]?.paid;return y.jsxs("div",{className:"flex items-center justify-between gap-2 rounded-md border border-slate-700/60 bg-black/20 px-2 py-2",children:[y.jsxs("button",{type:"button",className:"flex-1 text-left",onClick:()=>m(x.dueDate),title:"Jump to this day",children:[y.jsxs("div",{className:"text-xs text-slate-200 leading-4",children:[x.label,y.jsxs("span",{className:"text-slate-400",children:["  $",T.toFixed(2)]}),U&&y.jsx("span",{className:"ml-2 text-[0.65rem] rounded-full border border-emerald-400/50 px-2 py-[2px] text-emerald-200 bg-emerald-500/10",children:"paid"})]}),y.jsxs("div",{className:"text-[0.7rem] text-slate-500",children:[x.dueDate,"  ",I]})]}),y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("button",{type:"button",className:"px-2 py-1 text-[0.7rem] rounded-md border border-slate-600/70 text-slate-200 hover:border-cyan-400/60",onClick:()=>p(x),children:U?"Unpay":"Paid"}),y.jsx("button",{type:"button",className:"text-[0.75rem] text-slate-500 hover:text-rose-400",onClick:()=>g(x),"aria-label":"Delete due item",children:""})]})]},`${x.templateId}-${x.dueDate}`)}),t.length>5&&y.jsxs("div",{className:"text-[0.7rem] text-slate-500",children:["+",t.length-5," more"]})]})]})}function Nx(){const i=new Date,e=i.getFullYear(),t=String(i.getMonth()+1).padStart(2,"0"),s=String(i.getDate()).padStart(2,"0");return`${e}-${t}-${s}`}function UM(i){return typeof i=="string"&&/^\d{4}-\d{2}-\d{2}$/.test(i)}function zM({open:i,title:e="Add Transaction",initial:t={},accounts:s=[],defaultAccountId:o="main",onClose:c=()=>{},onSave:u=()=>{},allowRecurring:m=!1,onCreateRecurring:p=()=>{}}){const[g,v]=Te.useState(""),[x,T]=Te.useState(""),[I,U]=Te.useState(Nx()),[q,$]=Te.useState(""),[ce,G]=Te.useState(o),[te,ie]=Te.useState(!1),[de,he]=Te.useState("monthly");if(Te.useEffect(()=>{i&&(v(String(t.description||"")),T(t.amount===0||typeof t.amount=="number"?String(t.amount):String(t.amount||"")),U(String(t.date||Nx())),$(String(t.category||"")),G(String(t.accountId||o)),ie(!1),he("monthly"))},[i,t,o]),!i)return null;function D(){const N=g.trim();if(!N)return window.alert("Please enter a description.");const O=Number(x);if(!Number.isFinite(O))return window.alert("Please enter a valid number for amount.");if(!UM(I))return window.alert("Use YYYY-MM-DD format for dates.");const k={description:N,amount:O,date:I,category:q.trim(),accountId:ce||o||"main"};if(u(k),m&&te){const w=["once","weekly","biweekly","monthly","yearly"].includes(de)?de:"monthly",oe=I.match(/^\d{4}-\d{2}-(\d{2})$/),F=oe?Number(oe[1]):void 0;p({label:k.description||"Transaction",amount:O,kind:O>=0?"income":"expense",source:"transaction",startDate:I,cadence:w,dayOfMonth:F,accountId:k.accountId,category:k.category||void 0})}c()}const C=Array.isArray(s)&&s.length>0;return y.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4",children:[y.jsx("div",{className:"absolute inset-0 bg-black/70",onClick:c,role:"button","aria-label":"Close modal",tabIndex:-1}),y.jsxs("div",{className:"relative w-full max-w-lg rounded-2xl border border-slate-700/70 bg-[#05060F] p-4 shadow-xl",children:[y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsx("div",{className:"text-sm font-semibold text-slate-100",children:e}),y.jsx("button",{type:"button",onClick:c,className:"text-slate-400 hover:text-rose-300 transition","aria-label":"Close",children:""})]}),y.jsxs("div",{className:"mt-3 grid gap-3",children:[y.jsxs("div",{children:[y.jsx("label",{className:"text-[0.65rem] uppercase tracking-[0.18em] text-slate-500",children:"Description"}),y.jsx("input",{value:g,onChange:N=>v(N.target.value),className:"mt-1 h-9 w-full rounded-md bg-slate-900/70 px-3 text-[0.8rem] text-slate-100 outline-none ring-1 ring-slate-700 focus:ring-2 focus:ring-cyan-500",placeholder:"Walmart, Rent, Paycheck..."})]}),y.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[y.jsxs("div",{children:[y.jsx("label",{className:"text-[0.65rem] uppercase tracking-[0.18em] text-slate-500",children:"Amount"}),y.jsx("input",{value:x,onChange:N=>T(N.target.value),inputMode:"decimal",className:"mt-1 h-9 w-full rounded-md bg-slate-900/70 px-3 text-[0.8rem] text-slate-100 outline-none ring-1 ring-slate-700 focus:ring-2 focus:ring-cyan-500",placeholder:"-45.21 or 1200"}),y.jsx("div",{className:"mt-1 text-[0.65rem] text-slate-500",children:"Negative = expense, positive = income"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"text-[0.65rem] uppercase tracking-[0.18em] text-slate-500",children:"Date"}),y.jsx("input",{value:I,onChange:N=>U(N.target.value),className:"mt-1 h-9 w-full rounded-md bg-slate-900/70 px-3 text-[0.8rem] text-slate-100 outline-none ring-1 ring-slate-700 focus:ring-2 focus:ring-cyan-500",placeholder:"YYYY-MM-DD"})]})]}),y.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[y.jsxs("div",{children:[y.jsx("label",{className:"text-[0.65rem] uppercase tracking-[0.18em] text-slate-500",children:"Category (optional)"}),y.jsx("input",{value:q,onChange:N=>$(N.target.value),className:"mt-1 h-9 w-full rounded-md bg-slate-900/70 px-3 text-[0.8rem] text-slate-100 outline-none ring-1 ring-slate-700 focus:ring-2 focus:ring-cyan-500",placeholder:"Groceries, Rent..."})]}),y.jsxs("div",{children:[y.jsx("label",{className:"text-[0.65rem] uppercase tracking-[0.18em] text-slate-500",children:"Account"}),C?y.jsx("select",{value:ce,onChange:N=>G(N.target.value),className:"mt-1 h-9 w-full rounded-md bg-slate-900/70 px-2 text-[0.8rem] text-slate-100 outline-none ring-1 ring-slate-700 focus:ring-2 focus:ring-cyan-500",children:s.map(N=>y.jsx("option",{value:N.id,children:N.name||N.id},N.id))}):y.jsx("input",{value:ce,onChange:N=>G(N.target.value),className:"mt-1 h-9 w-full rounded-md bg-slate-900/70 px-3 text-[0.8rem] text-slate-100 outline-none ring-1 ring-slate-700 focus:ring-2 focus:ring-cyan-500",placeholder:"main"})]})]}),m&&y.jsxs("div",{className:"rounded-xl border border-slate-700/60 bg-black/20 p-3",children:[y.jsxs("label",{className:"flex items-center gap-2 text-xs text-slate-200",children:[y.jsx("input",{type:"checkbox",checked:te,onChange:N=>ie(N.target.checked)}),"Add to calendar as repeating due item"]}),te&&y.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[y.jsx("span",{className:"text-[0.65rem] uppercase tracking-[0.18em] text-slate-500",children:"Cadence"}),y.jsxs("select",{value:de,onChange:N=>he(N.target.value),className:"h-8 rounded-md bg-slate-900/70 px-2 text-[0.75rem] text-slate-100 outline-none ring-1 ring-slate-700 focus:ring-2 focus:ring-cyan-500",children:[y.jsx("option",{value:"once",children:"Once"}),y.jsx("option",{value:"weekly",children:"Weekly"}),y.jsx("option",{value:"biweekly",children:"Biweekly"}),y.jsx("option",{value:"monthly",children:"Monthly"}),y.jsx("option",{value:"yearly",children:"Yearly"})]})]})]}),y.jsxs("div",{className:"mt-1 flex items-center justify-end gap-2",children:[y.jsx("button",{type:"button",onClick:c,className:"h-9 px-3 rounded-md border border-slate-600 text-slate-200 hover:border-cyan-400 hover:text-cyan-200 transition",children:"Cancel"}),y.jsx("button",{type:"button",onClick:D,className:"h-9 px-3 rounded-md border border-cyan-500/60 text-cyan-200 hover:bg-cyan-500/10 transition",children:"Save"})]})]})]})]})}const BM=[{value:"auto",label:"Auto (detect)"},{value:"income",label:"Income"},{value:"expense",label:"Expense"},{value:"transfer",label:"Transfer"},{value:"ignore",label:"Ignore"}],qM={income:"Income",expense:"Expense",transfer:"Transfer",ignore:"Ignored",unknown:"Unknown"};function FM(){const i=new Date,e=i.getFullYear(),t=String(i.getMonth()+1).padStart(2,"0"),s=String(i.getDate()).padStart(2,"0");return`${e}-${t}-${s}`}function HM(i){const{transactions:e=[],accountName:t="",accounts:s=[],currentAccountId:o="main",onAddTransaction:c=()=>{},onUpdateTransaction:u=()=>{},onDeleteTransaction:m=()=>{},typeHints:p=[],scheduledTemplates:g=[],onScheduledTemplatesChange:v=()=>{},filter:x,onFilterChange:T,filterText:I,onChangeFilterText:U}=i,q=Array.isArray(s)&&s.length>0?s.find(L=>L.id===o):null,$=t||q?.name||"",ce=(I??x??"").toString(),G=U??T??(()=>{}),te=Array.isArray(e)&&e.length>0,[ie,de]=Ee.useState({query:"",minAmount:"",maxAmount:""}),[he,D]=Ee.useState("date"),[C,N]=Ee.useState("desc"),[O,k]=Ee.useState(!1);Ee.useEffect(()=>{const L=(ce||"").trim();L&&de(K=>({...K,query:L}))},[ce]);const R=L=>K=>{const M=K.target.value;de(X=>({...X,[L]:M})),L==="query"&&G(M)},w=()=>{de({query:"",minAmount:"",maxAmount:""}),G("")},oe=ie.query||ie.minAmount||ie.maxAmount,F=()=>{N(L=>L==="asc"?"desc":"asc")},j=Ee.useMemo(()=>te?[...e.map((X,fe)=>({tx:X,index:fe})).filter(({tx:X})=>{const fe=ie.query.trim().toLowerCase(),me=Number(X.amount);if(fe&&![X.description||"",X.category||""].join(" ").toLowerCase().includes(fe))return!1;if(ie.minAmount!==""){const ye=Number(ie.minAmount);if(!Number.isNaN(ye)&&!Number.isNaN(me)&&me<ye)return!1}if(ie.maxAmount!==""){const ye=Number(ie.maxAmount);if(!Number.isNaN(ye)&&!Number.isNaN(me)&&me>ye)return!1}return!0})].sort((X,fe)=>{const me=X.tx,ye=fe.tx,se=C==="asc"?1:-1;if(he==="amount"){const Ne=Number(me.amount)||0,at=Number(ye.amount)||0;return(Ne-at)*se}if(he==="description"||he==="category"){const Ne=(me[he]||"").toLowerCase(),at=(ye[he]||"").toLowerCase();return Ne.localeCompare(at)*se}const ge=Date.parse(me.date)||0,Se=Date.parse(ye.date)||0;return(ge-Se)*se}):[],[e,ie,he,C,te]);function z(L){c({...L,accountId:L.accountId||o||"main"})}function W(L){const K={id:`sched-${Date.now()}`,...L},M=Array.isArray(g)?g:[];v([...M,K])}return y.jsxs("div",{className:"space-y-4 w-full",children:[y.jsxs("header",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2",children:[y.jsxs("div",{children:[y.jsx("h1",{className:"text-lg font-semibold text-slate-100",children:"Transactions"}),y.jsx("span",{className:"text-xs text-slate-400",children:"Imported + manual entries"}),y.jsxs("p",{className:"text-[0.65rem] text-slate-500",children:["Currently viewing:"," ",y.jsx("span",{className:"font-semibold text-cyan-200",children:$||"None"})]}),!!ce.trim()&&y.jsxs("div",{className:"mt-2 inline-flex items-center gap-2 rounded-lg border border-cyan-500/40 bg-cyan-500/10 px-2 py-1 text-[0.65rem] text-cyan-200",children:[y.jsx("span",{className:"font-mono",children:"Report filter:"}),y.jsx("span",{className:"text-slate-100",children:ce}),y.jsx("button",{type:"button",onClick:w,className:"ml-1 rounded border border-cyan-500/40 px-2 py-[2px] text-[0.65rem] hover:bg-cyan-500/10",children:"Clear"})]})]}),te&&y.jsxs("span",{className:"text-[0.65rem] text-slate-500",children:["Showing ",j.length," of ",e.length]})]}),y.jsxs(Dn,{title:"ALL TRANSACTIONS",children:[y.jsx("div",{className:"mb-3 flex justify-end",children:y.jsx("button",{type:"button",onClick:()=>k(!0),className:"h-8 px-3 rounded-md border border-cyan-500/60 text-[0.7rem] font-medium text-cyan-200 hover:bg-cyan-500/10",children:"+ Add Transaction"})}),!te&&y.jsx("p",{className:"text-xs text-slate-400",children:"No transactions yet. Import a CSV on the Dashboard or add one manually."}),te&&y.jsxs(y.Fragment,{children:[y.jsxs("div",{className:"mb-3 flex flex-col gap-3 md:flex-row md:items-end md:justify-between",children:[y.jsxs("div",{className:"flex flex-col gap-1 w-full md:w-auto",children:[y.jsx("label",{className:"text-[0.65rem] uppercase tracking-[0.18em] text-slate-500",children:"Search"}),y.jsx("input",{type:"text",value:ie.query,onChange:R("query"),placeholder:"Search description or category...",className:"h-8 w-full md:w-64 rounded-md bg-slate-900/70 px-2 text-[0.7rem] text-slate-100 outline-none ring-1 ring-slate-700 focus:ring-2 focus:ring-cyan-500"})]}),y.jsxs("div",{className:"flex flex-col gap-2 md:flex-row md:items-end md:justify-end",children:[y.jsxs("div",{className:"flex gap-2",children:[y.jsxs("div",{className:"flex flex-col gap-1",children:[y.jsx("label",{className:"text-[0.65rem] uppercase tracking-[0.18em] text-slate-500",children:"Min"}),y.jsx("input",{type:"number",value:ie.minAmount,onChange:R("minAmount"),className:"h-8 w-24 rounded-md bg-slate-900/70 px-2 text-[0.7rem] text-slate-100 outline-none ring-1 ring-slate-700 focus:ring-2 focus:ring-cyan-500"})]}),y.jsxs("div",{className:"flex flex-col gap-1",children:[y.jsx("label",{className:"text-[0.65rem] uppercase tracking-[0.18em] text-slate-500",children:"Max"}),y.jsx("input",{type:"number",value:ie.maxAmount,onChange:R("maxAmount"),className:"h-8 w-24 rounded-md bg-slate-900/70 px-2 text-[0.7rem] text-slate-100 outline-none ring-1 ring-slate-700 focus:ring-2 focus:ring-cyan-500"})]})]}),y.jsx("button",{type:"button",onClick:w,disabled:!oe,className:"h-8 px-3 rounded-md border text-[0.7rem] font-medium transition border-slate-600 text-slate-200 hover:border-cyan-400 hover:text-cyan-200 disabled:opacity-40 disabled:cursor-not-allowed",children:"Clear filters"})]})]}),y.jsx("div",{className:"mb-3 flex flex-col sm:flex-row sm:items-center sm:justify-end gap-2 text-[0.7rem]",children:y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("span",{className:"uppercase tracking-[0.18em] text-slate-500",children:"Sort by"}),y.jsxs("select",{value:he,onChange:L=>D(L.target.value),className:"h-8 rounded-md bg-slate-900/70 px-2 text-[0.7rem] text-slate-100 outline-none ring-1 ring-slate-700 focus:ring-2 focus:ring-cyan-500",children:[y.jsx("option",{value:"date",children:"Date"}),y.jsx("option",{value:"amount",children:"Amount"}),y.jsx("option",{value:"description",children:"Description"}),y.jsx("option",{value:"category",children:"Category"})]}),y.jsx("button",{type:"button",onClick:F,className:"h-8 px-3 rounded-md border border-slate-600 text-slate-200 hover:border-cyan-400 hover:text-cyan-200 transition",children:C==="asc"?"Asc ":"Desc "})]})})]}),te&&j.length===0&&y.jsx("p",{className:"text-xs text-slate-400",children:"No transactions match your current filters."}),te&&j.length>0&&y.jsx("div",{className:"hScroll",children:y.jsx("div",{className:"min-w-[640px] max-h-[65vh] overflow-y-auto border border-slate-800 rounded-lg",children:y.jsxs("table",{className:"w-full text-[0.7rem] sm:text-xs text-left",children:[y.jsx("thead",{className:"bg-slate-900 text-slate-300 sticky top-0",children:y.jsxs("tr",{children:[y.jsx("th",{className:"px-2 py-1",children:"Date"}),y.jsx("th",{className:"px-2 py-1",children:"Description"}),y.jsx("th",{className:"px-2 py-1 hidden sm:table-cell",children:"Category"}),y.jsx("th",{className:"px-2 py-1 hidden sm:table-cell",children:"Type"}),y.jsx("th",{className:"px-2 py-1 text-right",children:"Amount"}),y.jsx("th",{className:"px-2 py-1 text-right",children:"Actions"})]})}),y.jsx("tbody",{className:"divide-y divide-slate-800",children:j.map(({tx:L,index:K})=>y.jsxs("tr",{className:"hover:bg-slate-900/70",children:[y.jsx("td",{className:"px-2 py-1 text-slate-300 whitespace-nowrap",children:L.date||"-"}),y.jsxs("td",{className:"px-2 py-1 text-slate-200",children:[y.jsx("input",{className:"w-full bg-transparent border-b border-slate-700 focus:outline-none focus:border-cyan-400 text-[0.7rem] sm:text-xs",value:L.description||"",onChange:M=>u(K,{description:M.target.value})}),y.jsx("div",{className:"sm:hidden mt-1 text-[0.65rem] text-slate-500",children:(L.category||"").trim()?L.category:"Uncategorized"})]}),y.jsx("td",{className:"px-2 py-1 text-slate-300 hidden sm:table-cell",children:y.jsx("input",{className:"w-full bg-transparent border-b border-slate-700 focus:outline-none focus:border-cyan-400 text-[0.7rem] sm:text-xs",value:L.category||"",onChange:M=>u(K,{category:M.target.value})})}),y.jsx("td",{className:"px-2 py-1 text-slate-300 hidden sm:table-cell",children:y.jsxs("div",{className:"flex flex-col gap-1",children:[y.jsx("select",{className:"w-full bg-slate-900/40 rounded-md border border-slate-700 px-2 py-1 text-[0.65rem] focus:outline-none focus:border-cyan-400",value:L.flowType||"auto",onChange:M=>{const X=M.target.value;u(K,{flowType:X==="auto"?void 0:X})},children:BM.map(M=>y.jsx("option",{value:M.value,children:M.label},M.value))}),y.jsxs("span",{className:"text-[0.6rem] text-slate-500",children:["Detected: ",qM[p[K]]||"Unknown"]})]})}),y.jsx("td",{className:`px-2 py-1 text-right whitespace-nowrap ${L.amount<0?"text-rose-300":"text-emerald-300"}`,children:Number.isFinite(Number(L.amount))?`$${Number(L.amount).toFixed(2)}`:"-"}),y.jsx("td",{className:"px-2 py-1 text-right",children:y.jsx("button",{className:"text-[0.7rem] px-2 py-1 rounded-md border border-rose-500/60 text-rose-300 hover:bg-rose-400/10",onClick:()=>{window.confirm("Delete this transaction from this account?")&&m(K)},children:"Delete"})})]},K))})]})})})]}),y.jsx(zM,{open:O,title:"Add Transaction",accounts:s,defaultAccountId:o||"main",initial:{date:FM(),accountId:o||"main"},allowRecurring:!0,onCreateRecurring:W,onSave:z,onClose:()=>k(!1)})]})}function GM({onViewAll:i,onEdit:e,onDelete:t,onDuplicate:s,onExport:o}){const[c,u]=Ee.useState(!1);function m(){u(!1),t?.()}return y.jsxs("div",{className:"relative",children:[y.jsx("button",{type:"button",className:"rounded-full border border-slate-600/70 px-3 py-1 text-xs text-slate-300 hover:border-cyan-400/60",onClick:()=>u(p=>!p),children:"Manage goal "}),y.jsxs("div",{className:`absolute right-0 mt-2 w-40 rounded-xl border border-slate-700/70 bg-[#05060F] text-xs shadow-lg transition-all duration-150 ${c?"opacity-100 translate-y-0 pointer-events-auto":"opacity-0 -translate-y-1 pointer-events-none"}`,children:[y.jsx("button",{type:"button",className:"block w-full px-3 py-2 text-left text-slate-200 hover:bg-slate-800/70",onClick:()=>{u(!1),i?.()},children:"View all goals"}),y.jsx("div",{className:"h-px bg-slate-800/80"}),y.jsx("button",{type:"button",className:"block w-full px-3 py-2 text-left text-slate-200 hover:bg-slate-800/70",onClick:()=>{u(!1),e?.()},children:"Edit goal"}),y.jsx("button",{type:"button",className:"block w-full px-3 py-2 text-left text-slate-200 hover:bg-slate-800/70",onClick:()=>{u(!1),s?.()},children:"Duplicate goal"}),y.jsx("button",{type:"button",className:"block w-full px-3 py-2 text-left text-slate-200 hover:bg-slate-800/70",onClick:()=>{u(!1),o?.()},children:"Export progress"}),y.jsx("button",{type:"button",className:"block w-full px-3 py-2 text-left text-rose-300 hover:bg-slate-800/70",onClick:()=>{window.confirm("Delete this goal?")&&m()},children:"Delete goal"})]})]})}function mp(i,e=0){const t=Number(i);return Number.isFinite(t)?t:e}function $M({goals:i=[],onSelectGoal:e=()=>{},goal:t,mode:s="edit",onRequestCreateGoal:o=()=>{},onEditGoal:c=()=>{},onDeleteGoal:u=()=>{},onDuplicateGoal:m=()=>{},onExportGoal:p=()=>{},onAddContributionRequest:g=()=>{}}){const[v,x]=Te.useState("detail");if(Te.useEffect(()=>{s==="create"&&(t?.id||o())},[s,t?.id]),Te.useEffect(()=>{t?.id||x("all")},[t?.id]),v==="all"){const G=Array.isArray(i)?i:[];return y.jsxs("div",{className:"space-y-5",children:[y.jsxs("header",{className:"flex items-center justify-between gap-3",children:[y.jsxs("div",{className:"space-y-1",children:[y.jsx("h1",{className:"text-xl font-semibold text-slate-100",children:"All Goals"}),y.jsx("p",{className:"text-xs text-slate-400",children:"Select a goal to view details, or create a new one."})]}),y.jsx("button",{type:"button",className:"px-3 py-1.5 rounded-md border border-cyan-400/70 text-xs text-cyan-200 bg-cyan-500/10 hover:bg-cyan-500/20 transition",onClick:()=>o(),children:"+ New Goal"})]}),G.length===0?y.jsx(Dn,{title:"NO GOALS YET",children:y.jsx("p",{className:"text-sm text-slate-300",children:"You dont have any goals yet. Create one to get started."})}):y.jsx("div",{className:"grid md:grid-cols-2 gap-3",children:G.map(te=>y.jsx(CT,{goal:te,onClick:()=>{e(te.id),x("detail")},onEdit:()=>{e(te.id),x("detail")}},te.id))})]})}if(!t)return y.jsx("div",{className:"space-y-4",children:y.jsxs(Dn,{title:"GOALS",children:[y.jsx("p",{className:"text-sm text-slate-300",children:"No goal selected."}),y.jsxs("div",{className:"mt-3 flex gap-2",children:[y.jsx("button",{type:"button",onClick:()=>x("all"),className:"px-4 py-2 rounded-lg border border-slate-700 text-xs text-slate-200 bg-slate-900/40 hover:border-cyan-400/70 transition",children:"View all goals"}),y.jsx("button",{type:"button",onClick:o,className:"px-4 py-2 rounded-lg border border-cyan-400/70 text-xs text-cyan-200 bg-cyan-500/10 hover:bg-cyan-500/20 transition",children:"+ Create a goal"})]})]})});const T=mp(t?.saved??t?.current??0,0),I=mp(t?.target??0,0),U=mp(t?.monthlyPlan??0,0),q=t?.icon||t?.emoji||"",$=t?.name||"Untitled Goal",ce=I>0?Math.min(100,T/I*100):0;return y.jsxs("div",{className:"space-y-5",children:[y.jsxs("header",{className:"flex items-center justify-between gap-3",children:[y.jsx("div",{className:"space-y-1",children:y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("span",{className:"text-2xl",children:q}),y.jsxs("div",{children:[y.jsx("h1",{className:"text-xl font-semibold text-slate-100",children:$}),y.jsx("p",{className:"text-xs text-slate-400",children:"Personalized goal view  future: themed backgrounds & animations."})]})]})}),y.jsx(GM,{onViewAll:()=>x("all"),onEdit:()=>c(t?.id),onDelete:()=>t?.id&&u(t.id),onDuplicate:()=>m(t?.id),onExport:()=>p(t?.id)})]}),y.jsx(Dn,{title:"PROGRESS",children:y.jsxs("div",{className:"flex flex-col gap-2 text-sm",children:[y.jsxs("span",{className:"text-slate-200",children:["$",T.toFixed(2)," / $",I.toFixed(2)]}),y.jsx(i0,{value:ce}),y.jsxs("span",{className:"text-xs text-slate-400",children:[ce.toFixed(1),"% complete"]})]})}),y.jsxs(Dn,{title:"PLAN",children:[y.jsxs("p",{className:"text-sm text-slate-200",children:["Recommended monthly contribution:",y.jsxs("span",{className:"ml-1 text-cyan-300 font-semibold",children:["$",U.toFixed(2)]})]}),y.jsx("div",{className:"mt-3 flex flex-wrap gap-2 text-xs",children:y.jsx("button",{type:"button",className:"px-3 py-1.5 text-xs rounded-md border border-pink-400/70 text-pink-200 bg-pink-500/10 hover:bg-pink-500/20 transition",onClick:()=>g(t?.id),children:"Add Contribution"})})]})]})}var YM={value:()=>{}};function DT(){for(var i=0,e=arguments.length,t={},s;i<e;++i){if(!(s=arguments[i]+"")||s in t||/[\s.]/.test(s))throw new Error("illegal type: "+s);t[s]=[]}return new Hh(t)}function Hh(i){this._=i}function QM(i,e){return i.trim().split(/^|\s+/).map(function(t){var s="",o=t.indexOf(".");if(o>=0&&(s=t.slice(o+1),t=t.slice(0,o)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:s}})}Hh.prototype=DT.prototype={constructor:Hh,on:function(i,e){var t=this._,s=QM(i+"",t),o,c=-1,u=s.length;if(arguments.length<2){for(;++c<u;)if((o=(i=s[c]).type)&&(o=KM(t[o],i.name)))return o;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++c<u;)if(o=(i=s[c]).type)t[o]=Cx(t[o],i.name,e);else if(e==null)for(o in t)t[o]=Cx(t[o],i.name,null);return this},copy:function(){var i={},e=this._;for(var t in e)i[t]=e[t].slice();return new Hh(i)},call:function(i,e){if((o=arguments.length-2)>0)for(var t=new Array(o),s=0,o,c;s<o;++s)t[s]=arguments[s+2];if(!this._.hasOwnProperty(i))throw new Error("unknown type: "+i);for(c=this._[i],s=0,o=c.length;s<o;++s)c[s].value.apply(e,t)},apply:function(i,e,t){if(!this._.hasOwnProperty(i))throw new Error("unknown type: "+i);for(var s=this._[i],o=0,c=s.length;o<c;++o)s[o].value.apply(e,t)}};function KM(i,e){for(var t=0,s=i.length,o;t<s;++t)if((o=i[t]).name===e)return o.value}function Cx(i,e,t){for(var s=0,o=i.length;s<o;++s)if(i[s].name===e){i[s]=YM,i=i.slice(0,s).concat(i.slice(s+1));break}return t!=null&&i.push({name:e,value:t}),i}var Xp="http://www.w3.org/1999/xhtml";const Rx={svg:"http://www.w3.org/2000/svg",xhtml:Xp,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Gf(i){var e=i+="",t=e.indexOf(":");return t>=0&&(e=i.slice(0,t))!=="xmlns"&&(i=i.slice(t+1)),Rx.hasOwnProperty(e)?{space:Rx[e],local:i}:i}function XM(i){return function(){var e=this.ownerDocument,t=this.namespaceURI;return t===Xp&&e.documentElement.namespaceURI===Xp?e.createElement(i):e.createElementNS(t,i)}}function WM(i){return function(){return this.ownerDocument.createElementNS(i.space,i.local)}}function MT(i){var e=Gf(i);return(e.local?WM:XM)(e)}function ZM(){}function s0(i){return i==null?ZM:function(){return this.querySelector(i)}}function JM(i){typeof i!="function"&&(i=s0(i));for(var e=this._groups,t=e.length,s=new Array(t),o=0;o<t;++o)for(var c=e[o],u=c.length,m=s[o]=new Array(u),p,g,v=0;v<u;++v)(p=c[v])&&(g=i.call(p,p.__data__,v,c))&&("__data__"in p&&(g.__data__=p.__data__),m[v]=g);return new Mn(s,this._parents)}function eO(i){return i==null?[]:Array.isArray(i)?i:Array.from(i)}function tO(){return[]}function OT(i){return i==null?tO:function(){return this.querySelectorAll(i)}}function nO(i){return function(){return eO(i.apply(this,arguments))}}function iO(i){typeof i=="function"?i=nO(i):i=OT(i);for(var e=this._groups,t=e.length,s=[],o=[],c=0;c<t;++c)for(var u=e[c],m=u.length,p,g=0;g<m;++g)(p=u[g])&&(s.push(i.call(p,p.__data__,g,u)),o.push(p));return new Mn(s,o)}function kT(i){return function(){return this.matches(i)}}function VT(i){return function(e){return e.matches(i)}}var rO=Array.prototype.find;function sO(i){return function(){return rO.call(this.children,i)}}function aO(){return this.firstElementChild}function oO(i){return this.select(i==null?aO:sO(typeof i=="function"?i:VT(i)))}var lO=Array.prototype.filter;function cO(){return Array.from(this.children)}function uO(i){return function(){return lO.call(this.children,i)}}function hO(i){return this.selectAll(i==null?cO:uO(typeof i=="function"?i:VT(i)))}function fO(i){typeof i!="function"&&(i=kT(i));for(var e=this._groups,t=e.length,s=new Array(t),o=0;o<t;++o)for(var c=e[o],u=c.length,m=s[o]=[],p,g=0;g<u;++g)(p=c[g])&&i.call(p,p.__data__,g,c)&&m.push(p);return new Mn(s,this._parents)}function jT(i){return new Array(i.length)}function dO(){return new Mn(this._enter||this._groups.map(jT),this._parents)}function pf(i,e){this.ownerDocument=i.ownerDocument,this.namespaceURI=i.namespaceURI,this._next=null,this._parent=i,this.__data__=e}pf.prototype={constructor:pf,appendChild:function(i){return this._parent.insertBefore(i,this._next)},insertBefore:function(i,e){return this._parent.insertBefore(i,e)},querySelector:function(i){return this._parent.querySelector(i)},querySelectorAll:function(i){return this._parent.querySelectorAll(i)}};function mO(i){return function(){return i}}function pO(i,e,t,s,o,c){for(var u=0,m,p=e.length,g=c.length;u<g;++u)(m=e[u])?(m.__data__=c[u],s[u]=m):t[u]=new pf(i,c[u]);for(;u<p;++u)(m=e[u])&&(o[u]=m)}function gO(i,e,t,s,o,c,u){var m,p,g=new Map,v=e.length,x=c.length,T=new Array(v),I;for(m=0;m<v;++m)(p=e[m])&&(T[m]=I=u.call(p,p.__data__,m,e)+"",g.has(I)?o[m]=p:g.set(I,p));for(m=0;m<x;++m)I=u.call(i,c[m],m,c)+"",(p=g.get(I))?(s[m]=p,p.__data__=c[m],g.delete(I)):t[m]=new pf(i,c[m]);for(m=0;m<v;++m)(p=e[m])&&g.get(T[m])===p&&(o[m]=p)}function yO(i){return i.__data__}function _O(i,e){if(!arguments.length)return Array.from(this,yO);var t=e?gO:pO,s=this._parents,o=this._groups;typeof i!="function"&&(i=mO(i));for(var c=o.length,u=new Array(c),m=new Array(c),p=new Array(c),g=0;g<c;++g){var v=s[g],x=o[g],T=x.length,I=vO(i.call(v,v&&v.__data__,g,s)),U=I.length,q=m[g]=new Array(U),$=u[g]=new Array(U),ce=p[g]=new Array(T);t(v,x,q,$,ce,I,e);for(var G=0,te=0,ie,de;G<U;++G)if(ie=q[G]){for(G>=te&&(te=G+1);!(de=$[te])&&++te<U;);ie._next=de||null}}return u=new Mn(u,s),u._enter=m,u._exit=p,u}function vO(i){return typeof i=="object"&&"length"in i?i:Array.from(i)}function bO(){return new Mn(this._exit||this._groups.map(jT),this._parents)}function xO(i,e,t){var s=this.enter(),o=this,c=this.exit();return typeof i=="function"?(s=i(s),s&&(s=s.selection())):s=s.append(i+""),e!=null&&(o=e(o),o&&(o=o.selection())),t==null?c.remove():t(c),s&&o?s.merge(o).order():o}function EO(i){for(var e=i.selection?i.selection():i,t=this._groups,s=e._groups,o=t.length,c=s.length,u=Math.min(o,c),m=new Array(o),p=0;p<u;++p)for(var g=t[p],v=s[p],x=g.length,T=m[p]=new Array(x),I,U=0;U<x;++U)(I=g[U]||v[U])&&(T[U]=I);for(;p<o;++p)m[p]=t[p];return new Mn(m,this._parents)}function TO(){for(var i=this._groups,e=-1,t=i.length;++e<t;)for(var s=i[e],o=s.length-1,c=s[o],u;--o>=0;)(u=s[o])&&(c&&u.compareDocumentPosition(c)^4&&c.parentNode.insertBefore(u,c),c=u);return this}function wO(i){i||(i=AO);function e(x,T){return x&&T?i(x.__data__,T.__data__):!x-!T}for(var t=this._groups,s=t.length,o=new Array(s),c=0;c<s;++c){for(var u=t[c],m=u.length,p=o[c]=new Array(m),g,v=0;v<m;++v)(g=u[v])&&(p[v]=g);p.sort(e)}return new Mn(o,this._parents).order()}function AO(i,e){return i<e?-1:i>e?1:i>=e?0:NaN}function SO(){var i=arguments[0];return arguments[0]=this,i.apply(null,arguments),this}function NO(){return Array.from(this)}function CO(){for(var i=this._groups,e=0,t=i.length;e<t;++e)for(var s=i[e],o=0,c=s.length;o<c;++o){var u=s[o];if(u)return u}return null}function RO(){let i=0;for(const e of this)++i;return i}function IO(){return!this.node()}function DO(i){for(var e=this._groups,t=0,s=e.length;t<s;++t)for(var o=e[t],c=0,u=o.length,m;c<u;++c)(m=o[c])&&i.call(m,m.__data__,c,o);return this}function MO(i){return function(){this.removeAttribute(i)}}function OO(i){return function(){this.removeAttributeNS(i.space,i.local)}}function kO(i,e){return function(){this.setAttribute(i,e)}}function VO(i,e){return function(){this.setAttributeNS(i.space,i.local,e)}}function jO(i,e){return function(){var t=e.apply(this,arguments);t==null?this.removeAttribute(i):this.setAttribute(i,t)}}function LO(i,e){return function(){var t=e.apply(this,arguments);t==null?this.removeAttributeNS(i.space,i.local):this.setAttributeNS(i.space,i.local,t)}}function PO(i,e){var t=Gf(i);if(arguments.length<2){var s=this.node();return t.local?s.getAttributeNS(t.space,t.local):s.getAttribute(t)}return this.each((e==null?t.local?OO:MO:typeof e=="function"?t.local?LO:jO:t.local?VO:kO)(t,e))}function LT(i){return i.ownerDocument&&i.ownerDocument.defaultView||i.document&&i||i.defaultView}function UO(i){return function(){this.style.removeProperty(i)}}function zO(i,e,t){return function(){this.style.setProperty(i,e,t)}}function BO(i,e,t){return function(){var s=e.apply(this,arguments);s==null?this.style.removeProperty(i):this.style.setProperty(i,s,t)}}function qO(i,e,t){return arguments.length>1?this.each((e==null?UO:typeof e=="function"?BO:zO)(i,e,t??"")):Oo(this.node(),i)}function Oo(i,e){return i.style.getPropertyValue(e)||LT(i).getComputedStyle(i,null).getPropertyValue(e)}function FO(i){return function(){delete this[i]}}function HO(i,e){return function(){this[i]=e}}function GO(i,e){return function(){var t=e.apply(this,arguments);t==null?delete this[i]:this[i]=t}}function $O(i,e){return arguments.length>1?this.each((e==null?FO:typeof e=="function"?GO:HO)(i,e)):this.node()[i]}function PT(i){return i.trim().split(/^|\s+/)}function a0(i){return i.classList||new UT(i)}function UT(i){this._node=i,this._names=PT(i.getAttribute("class")||"")}UT.prototype={add:function(i){var e=this._names.indexOf(i);e<0&&(this._names.push(i),this._node.setAttribute("class",this._names.join(" ")))},remove:function(i){var e=this._names.indexOf(i);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(i){return this._names.indexOf(i)>=0}};function zT(i,e){for(var t=a0(i),s=-1,o=e.length;++s<o;)t.add(e[s])}function BT(i,e){for(var t=a0(i),s=-1,o=e.length;++s<o;)t.remove(e[s])}function YO(i){return function(){zT(this,i)}}function QO(i){return function(){BT(this,i)}}function KO(i,e){return function(){(e.apply(this,arguments)?zT:BT)(this,i)}}function XO(i,e){var t=PT(i+"");if(arguments.length<2){for(var s=a0(this.node()),o=-1,c=t.length;++o<c;)if(!s.contains(t[o]))return!1;return!0}return this.each((typeof e=="function"?KO:e?YO:QO)(t,e))}function WO(){this.textContent=""}function ZO(i){return function(){this.textContent=i}}function JO(i){return function(){var e=i.apply(this,arguments);this.textContent=e??""}}function ek(i){return arguments.length?this.each(i==null?WO:(typeof i=="function"?JO:ZO)(i)):this.node().textContent}function tk(){this.innerHTML=""}function nk(i){return function(){this.innerHTML=i}}function ik(i){return function(){var e=i.apply(this,arguments);this.innerHTML=e??""}}function rk(i){return arguments.length?this.each(i==null?tk:(typeof i=="function"?ik:nk)(i)):this.node().innerHTML}function sk(){this.nextSibling&&this.parentNode.appendChild(this)}function ak(){return this.each(sk)}function ok(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function lk(){return this.each(ok)}function ck(i){var e=typeof i=="function"?i:MT(i);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function uk(){return null}function hk(i,e){var t=typeof i=="function"?i:MT(i),s=e==null?uk:typeof e=="function"?e:s0(e);return this.select(function(){return this.insertBefore(t.apply(this,arguments),s.apply(this,arguments)||null)})}function fk(){var i=this.parentNode;i&&i.removeChild(this)}function dk(){return this.each(fk)}function mk(){var i=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(i,this.nextSibling):i}function pk(){var i=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(i,this.nextSibling):i}function gk(i){return this.select(i?pk:mk)}function yk(i){return arguments.length?this.property("__data__",i):this.node().__data__}function _k(i){return function(e){i.call(this,e,this.__data__)}}function vk(i){return i.trim().split(/^|\s+/).map(function(e){var t="",s=e.indexOf(".");return s>=0&&(t=e.slice(s+1),e=e.slice(0,s)),{type:e,name:t}})}function bk(i){return function(){var e=this.__on;if(e){for(var t=0,s=-1,o=e.length,c;t<o;++t)c=e[t],(!i.type||c.type===i.type)&&c.name===i.name?this.removeEventListener(c.type,c.listener,c.options):e[++s]=c;++s?e.length=s:delete this.__on}}}function xk(i,e,t){return function(){var s=this.__on,o,c=_k(e);if(s){for(var u=0,m=s.length;u<m;++u)if((o=s[u]).type===i.type&&o.name===i.name){this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=c,o.options=t),o.value=e;return}}this.addEventListener(i.type,c,t),o={type:i.type,name:i.name,value:e,listener:c,options:t},s?s.push(o):this.__on=[o]}}function Ek(i,e,t){var s=vk(i+""),o,c=s.length,u;if(arguments.length<2){var m=this.node().__on;if(m){for(var p=0,g=m.length,v;p<g;++p)for(o=0,v=m[p];o<c;++o)if((u=s[o]).type===v.type&&u.name===v.name)return v.value}return}for(m=e?xk:bk,o=0;o<c;++o)this.each(m(s[o],e,t));return this}function qT(i,e,t){var s=LT(i),o=s.CustomEvent;typeof o=="function"?o=new o(e,t):(o=s.document.createEvent("Event"),t?(o.initEvent(e,t.bubbles,t.cancelable),o.detail=t.detail):o.initEvent(e,!1,!1)),i.dispatchEvent(o)}function Tk(i,e){return function(){return qT(this,i,e)}}function wk(i,e){return function(){return qT(this,i,e.apply(this,arguments))}}function Ak(i,e){return this.each((typeof e=="function"?wk:Tk)(i,e))}function*Sk(){for(var i=this._groups,e=0,t=i.length;e<t;++e)for(var s=i[e],o=0,c=s.length,u;o<c;++o)(u=s[o])&&(yield u)}var FT=[null];function Mn(i,e){this._groups=i,this._parents=e}function Bc(){return new Mn([[document.documentElement]],FT)}function Nk(){return this}Mn.prototype=Bc.prototype={constructor:Mn,select:JM,selectAll:iO,selectChild:oO,selectChildren:hO,filter:fO,data:_O,enter:dO,exit:bO,join:xO,merge:EO,selection:Nk,order:TO,sort:wO,call:SO,nodes:NO,node:CO,size:RO,empty:IO,each:DO,attr:PO,style:qO,property:$O,classed:XO,text:ek,html:rk,raise:ak,lower:lk,append:ck,insert:hk,remove:dk,clone:gk,datum:yk,on:Ek,dispatch:Ak,[Symbol.iterator]:Sk};function Ck(i){return typeof i=="string"?new Mn([[document.querySelector(i)]],[document.documentElement]):new Mn([[i]],FT)}function o0(i,e,t){i.prototype=e.prototype=t,t.constructor=i}function HT(i,e){var t=Object.create(i.prototype);for(var s in e)t[s]=e[s];return t}function qc(){}var wc=.7,gf=1/wc,Ao="\\s*([+-]?\\d+)\\s*",Ac="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Fi="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Rk=/^#([0-9a-f]{3,8})$/,Ik=new RegExp(`^rgb\\(${Ao},${Ao},${Ao}\\)$`),Dk=new RegExp(`^rgb\\(${Fi},${Fi},${Fi}\\)$`),Mk=new RegExp(`^rgba\\(${Ao},${Ao},${Ao},${Ac}\\)$`),Ok=new RegExp(`^rgba\\(${Fi},${Fi},${Fi},${Ac}\\)$`),kk=new RegExp(`^hsl\\(${Ac},${Fi},${Fi}\\)$`),Vk=new RegExp(`^hsla\\(${Ac},${Fi},${Fi},${Ac}\\)$`),Ix={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};o0(qc,Sc,{copy(i){return Object.assign(new this.constructor,this,i)},displayable(){return this.rgb().displayable()},hex:Dx,formatHex:Dx,formatHex8:jk,formatHsl:Lk,formatRgb:Mx,toString:Mx});function Dx(){return this.rgb().formatHex()}function jk(){return this.rgb().formatHex8()}function Lk(){return GT(this).formatHsl()}function Mx(){return this.rgb().formatRgb()}function Sc(i){var e,t;return i=(i+"").trim().toLowerCase(),(e=Rk.exec(i))?(t=e[1].length,e=parseInt(e[1],16),t===6?Ox(e):t===3?new _n(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):t===8?Nh(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):t===4?Nh(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Ik.exec(i))?new _n(e[1],e[2],e[3],1):(e=Dk.exec(i))?new _n(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Mk.exec(i))?Nh(e[1],e[2],e[3],e[4]):(e=Ok.exec(i))?Nh(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=kk.exec(i))?jx(e[1],e[2]/100,e[3]/100,1):(e=Vk.exec(i))?jx(e[1],e[2]/100,e[3]/100,e[4]):Ix.hasOwnProperty(i)?Ox(Ix[i]):i==="transparent"?new _n(NaN,NaN,NaN,0):null}function Ox(i){return new _n(i>>16&255,i>>8&255,i&255,1)}function Nh(i,e,t,s){return s<=0&&(i=e=t=NaN),new _n(i,e,t,s)}function Pk(i){return i instanceof qc||(i=Sc(i)),i?(i=i.rgb(),new _n(i.r,i.g,i.b,i.opacity)):new _n}function Wp(i,e,t,s){return arguments.length===1?Pk(i):new _n(i,e,t,s??1)}function _n(i,e,t,s){this.r=+i,this.g=+e,this.b=+t,this.opacity=+s}o0(_n,Wp,HT(qc,{brighter(i){return i=i==null?gf:Math.pow(gf,i),new _n(this.r*i,this.g*i,this.b*i,this.opacity)},darker(i){return i=i==null?wc:Math.pow(wc,i),new _n(this.r*i,this.g*i,this.b*i,this.opacity)},rgb(){return this},clamp(){return new _n(ga(this.r),ga(this.g),ga(this.b),yf(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:kx,formatHex:kx,formatHex8:Uk,formatRgb:Vx,toString:Vx}));function kx(){return`#${da(this.r)}${da(this.g)}${da(this.b)}`}function Uk(){return`#${da(this.r)}${da(this.g)}${da(this.b)}${da((isNaN(this.opacity)?1:this.opacity)*255)}`}function Vx(){const i=yf(this.opacity);return`${i===1?"rgb(":"rgba("}${ga(this.r)}, ${ga(this.g)}, ${ga(this.b)}${i===1?")":`, ${i})`}`}function yf(i){return isNaN(i)?1:Math.max(0,Math.min(1,i))}function ga(i){return Math.max(0,Math.min(255,Math.round(i)||0))}function da(i){return i=ga(i),(i<16?"0":"")+i.toString(16)}function jx(i,e,t,s){return s<=0?i=e=t=NaN:t<=0||t>=1?i=e=NaN:e<=0&&(i=NaN),new li(i,e,t,s)}function GT(i){if(i instanceof li)return new li(i.h,i.s,i.l,i.opacity);if(i instanceof qc||(i=Sc(i)),!i)return new li;if(i instanceof li)return i;i=i.rgb();var e=i.r/255,t=i.g/255,s=i.b/255,o=Math.min(e,t,s),c=Math.max(e,t,s),u=NaN,m=c-o,p=(c+o)/2;return m?(e===c?u=(t-s)/m+(t<s)*6:t===c?u=(s-e)/m+2:u=(e-t)/m+4,m/=p<.5?c+o:2-c-o,u*=60):m=p>0&&p<1?0:u,new li(u,m,p,i.opacity)}function zk(i,e,t,s){return arguments.length===1?GT(i):new li(i,e,t,s??1)}function li(i,e,t,s){this.h=+i,this.s=+e,this.l=+t,this.opacity=+s}o0(li,zk,HT(qc,{brighter(i){return i=i==null?gf:Math.pow(gf,i),new li(this.h,this.s,this.l*i,this.opacity)},darker(i){return i=i==null?wc:Math.pow(wc,i),new li(this.h,this.s,this.l*i,this.opacity)},rgb(){var i=this.h%360+(this.h<0)*360,e=isNaN(i)||isNaN(this.s)?0:this.s,t=this.l,s=t+(t<.5?t:1-t)*e,o=2*t-s;return new _n(pp(i>=240?i-240:i+120,o,s),pp(i,o,s),pp(i<120?i+240:i-120,o,s),this.opacity)},clamp(){return new li(Lx(this.h),Ch(this.s),Ch(this.l),yf(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const i=yf(this.opacity);return`${i===1?"hsl(":"hsla("}${Lx(this.h)}, ${Ch(this.s)*100}%, ${Ch(this.l)*100}%${i===1?")":`, ${i})`}`}}));function Lx(i){return i=(i||0)%360,i<0?i+360:i}function Ch(i){return Math.max(0,Math.min(1,i||0))}function pp(i,e,t){return(i<60?e+(t-e)*i/60:i<180?t:i<240?e+(t-e)*(240-i)/60:e)*255}const $T=i=>()=>i;function Bk(i,e){return function(t){return i+t*e}}function qk(i,e,t){return i=Math.pow(i,t),e=Math.pow(e,t)-i,t=1/t,function(s){return Math.pow(i+s*e,t)}}function Fk(i){return(i=+i)==1?YT:function(e,t){return t-e?qk(e,t,i):$T(isNaN(e)?t:e)}}function YT(i,e){var t=e-i;return t?Bk(i,t):$T(isNaN(i)?e:i)}const Px=(function i(e){var t=Fk(e);function s(o,c){var u=t((o=Wp(o)).r,(c=Wp(c)).r),m=t(o.g,c.g),p=t(o.b,c.b),g=YT(o.opacity,c.opacity);return function(v){return o.r=u(v),o.g=m(v),o.b=p(v),o.opacity=g(v),o+""}}return s.gamma=i,s})(1);function cs(i,e){return i=+i,e=+e,function(t){return i*(1-t)+e*t}}var Zp=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,gp=new RegExp(Zp.source,"g");function Hk(i){return function(){return i}}function Gk(i){return function(e){return i(e)+""}}function $k(i,e){var t=Zp.lastIndex=gp.lastIndex=0,s,o,c,u=-1,m=[],p=[];for(i=i+"",e=e+"";(s=Zp.exec(i))&&(o=gp.exec(e));)(c=o.index)>t&&(c=e.slice(t,c),m[u]?m[u]+=c:m[++u]=c),(s=s[0])===(o=o[0])?m[u]?m[u]+=o:m[++u]=o:(m[++u]=null,p.push({i:u,x:cs(s,o)})),t=gp.lastIndex;return t<e.length&&(c=e.slice(t),m[u]?m[u]+=c:m[++u]=c),m.length<2?p[0]?Gk(p[0].x):Hk(e):(e=p.length,function(g){for(var v=0,x;v<e;++v)m[(x=p[v]).i]=x.x(g);return m.join("")})}var Ux=180/Math.PI,Jp={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function QT(i,e,t,s,o,c){var u,m,p;return(u=Math.sqrt(i*i+e*e))&&(i/=u,e/=u),(p=i*t+e*s)&&(t-=i*p,s-=e*p),(m=Math.sqrt(t*t+s*s))&&(t/=m,s/=m,p/=m),i*s<e*t&&(i=-i,e=-e,p=-p,u=-u),{translateX:o,translateY:c,rotate:Math.atan2(e,i)*Ux,skewX:Math.atan(p)*Ux,scaleX:u,scaleY:m}}var Rh;function Yk(i){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(i+"");return e.isIdentity?Jp:QT(e.a,e.b,e.c,e.d,e.e,e.f)}function Qk(i){return i==null||(Rh||(Rh=document.createElementNS("http://www.w3.org/2000/svg","g")),Rh.setAttribute("transform",i),!(i=Rh.transform.baseVal.consolidate()))?Jp:(i=i.matrix,QT(i.a,i.b,i.c,i.d,i.e,i.f))}function KT(i,e,t,s){function o(g){return g.length?g.pop()+" ":""}function c(g,v,x,T,I,U){if(g!==x||v!==T){var q=I.push("translate(",null,e,null,t);U.push({i:q-4,x:cs(g,x)},{i:q-2,x:cs(v,T)})}else(x||T)&&I.push("translate("+x+e+T+t)}function u(g,v,x,T){g!==v?(g-v>180?v+=360:v-g>180&&(g+=360),T.push({i:x.push(o(x)+"rotate(",null,s)-2,x:cs(g,v)})):v&&x.push(o(x)+"rotate("+v+s)}function m(g,v,x,T){g!==v?T.push({i:x.push(o(x)+"skewX(",null,s)-2,x:cs(g,v)}):v&&x.push(o(x)+"skewX("+v+s)}function p(g,v,x,T,I,U){if(g!==x||v!==T){var q=I.push(o(I)+"scale(",null,",",null,")");U.push({i:q-4,x:cs(g,x)},{i:q-2,x:cs(v,T)})}else(x!==1||T!==1)&&I.push(o(I)+"scale("+x+","+T+")")}return function(g,v){var x=[],T=[];return g=i(g),v=i(v),c(g.translateX,g.translateY,v.translateX,v.translateY,x,T),u(g.rotate,v.rotate,x,T),m(g.skewX,v.skewX,x,T),p(g.scaleX,g.scaleY,v.scaleX,v.scaleY,x,T),g=v=null,function(I){for(var U=-1,q=T.length,$;++U<q;)x[($=T[U]).i]=$.x(I);return x.join("")}}}var Kk=KT(Yk,"px, ","px)","deg)"),Xk=KT(Qk,", ",")",")"),ko=0,rc=0,Xl=0,XT=1e3,_f,sc,vf=0,Ta=0,$f=0,Nc=typeof performance=="object"&&performance.now?performance:Date,WT=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(i){setTimeout(i,17)};function l0(){return Ta||(WT(Wk),Ta=Nc.now()+$f)}function Wk(){Ta=0}function bf(){this._call=this._time=this._next=null}bf.prototype=ZT.prototype={constructor:bf,restart:function(i,e,t){if(typeof i!="function")throw new TypeError("callback is not a function");t=(t==null?l0():+t)+(e==null?0:+e),!this._next&&sc!==this&&(sc?sc._next=this:_f=this,sc=this),this._call=i,this._time=t,eg()},stop:function(){this._call&&(this._call=null,this._time=1/0,eg())}};function ZT(i,e,t){var s=new bf;return s.restart(i,e,t),s}function Zk(){l0(),++ko;for(var i=_f,e;i;)(e=Ta-i._time)>=0&&i._call.call(void 0,e),i=i._next;--ko}function zx(){Ta=(vf=Nc.now())+$f,ko=rc=0;try{Zk()}finally{ko=0,e3(),Ta=0}}function Jk(){var i=Nc.now(),e=i-vf;e>XT&&($f-=e,vf=i)}function e3(){for(var i,e=_f,t,s=1/0;e;)e._call?(s>e._time&&(s=e._time),i=e,e=e._next):(t=e._next,e._next=null,e=i?i._next=t:_f=t);sc=i,eg(s)}function eg(i){if(!ko){rc&&(rc=clearTimeout(rc));var e=i-Ta;e>24?(i<1/0&&(rc=setTimeout(zx,i-Nc.now()-$f)),Xl&&(Xl=clearInterval(Xl))):(Xl||(vf=Nc.now(),Xl=setInterval(Jk,XT)),ko=1,WT(zx))}}function Bx(i,e,t){var s=new bf;return e=e==null?0:+e,s.restart(o=>{s.stop(),i(o+e)},e,t),s}var t3=DT("start","end","cancel","interrupt"),n3=[],JT=0,qx=1,tg=2,Gh=3,Fx=4,ng=5,$h=6;function Yf(i,e,t,s,o,c){var u=i.__transition;if(!u)i.__transition={};else if(t in u)return;i3(i,t,{name:e,index:s,group:o,on:t3,tween:n3,time:c.time,delay:c.delay,duration:c.duration,ease:c.ease,timer:null,state:JT})}function c0(i,e){var t=di(i,e);if(t.state>JT)throw new Error("too late; already scheduled");return t}function $i(i,e){var t=di(i,e);if(t.state>Gh)throw new Error("too late; already running");return t}function di(i,e){var t=i.__transition;if(!t||!(t=t[e]))throw new Error("transition not found");return t}function i3(i,e,t){var s=i.__transition,o;s[e]=t,t.timer=ZT(c,0,t.time);function c(g){t.state=qx,t.timer.restart(u,t.delay,t.time),t.delay<=g&&u(g-t.delay)}function u(g){var v,x,T,I;if(t.state!==qx)return p();for(v in s)if(I=s[v],I.name===t.name){if(I.state===Gh)return Bx(u);I.state===Fx?(I.state=$h,I.timer.stop(),I.on.call("interrupt",i,i.__data__,I.index,I.group),delete s[v]):+v<e&&(I.state=$h,I.timer.stop(),I.on.call("cancel",i,i.__data__,I.index,I.group),delete s[v])}if(Bx(function(){t.state===Gh&&(t.state=Fx,t.timer.restart(m,t.delay,t.time),m(g))}),t.state=tg,t.on.call("start",i,i.__data__,t.index,t.group),t.state===tg){for(t.state=Gh,o=new Array(T=t.tween.length),v=0,x=-1;v<T;++v)(I=t.tween[v].value.call(i,i.__data__,t.index,t.group))&&(o[++x]=I);o.length=x+1}}function m(g){for(var v=g<t.duration?t.ease.call(null,g/t.duration):(t.timer.restart(p),t.state=ng,1),x=-1,T=o.length;++x<T;)o[x].call(i,v);t.state===ng&&(t.on.call("end",i,i.__data__,t.index,t.group),p())}function p(){t.state=$h,t.timer.stop(),delete s[e];for(var g in s)return;delete i.__transition}}function r3(i,e){var t=i.__transition,s,o,c=!0,u;if(t){e=e==null?null:e+"";for(u in t){if((s=t[u]).name!==e){c=!1;continue}o=s.state>tg&&s.state<ng,s.state=$h,s.timer.stop(),s.on.call(o?"interrupt":"cancel",i,i.__data__,s.index,s.group),delete t[u]}c&&delete i.__transition}}function s3(i){return this.each(function(){r3(this,i)})}function a3(i,e){var t,s;return function(){var o=$i(this,i),c=o.tween;if(c!==t){s=t=c;for(var u=0,m=s.length;u<m;++u)if(s[u].name===e){s=s.slice(),s.splice(u,1);break}}o.tween=s}}function o3(i,e,t){var s,o;if(typeof t!="function")throw new Error;return function(){var c=$i(this,i),u=c.tween;if(u!==s){o=(s=u).slice();for(var m={name:e,value:t},p=0,g=o.length;p<g;++p)if(o[p].name===e){o[p]=m;break}p===g&&o.push(m)}c.tween=o}}function l3(i,e){var t=this._id;if(i+="",arguments.length<2){for(var s=di(this.node(),t).tween,o=0,c=s.length,u;o<c;++o)if((u=s[o]).name===i)return u.value;return null}return this.each((e==null?a3:o3)(t,i,e))}function u0(i,e,t){var s=i._id;return i.each(function(){var o=$i(this,s);(o.value||(o.value={}))[e]=t.apply(this,arguments)}),function(o){return di(o,s).value[e]}}function ew(i,e){var t;return(typeof e=="number"?cs:e instanceof Sc?Px:(t=Sc(e))?(e=t,Px):$k)(i,e)}function c3(i){return function(){this.removeAttribute(i)}}function u3(i){return function(){this.removeAttributeNS(i.space,i.local)}}function h3(i,e,t){var s,o=t+"",c;return function(){var u=this.getAttribute(i);return u===o?null:u===s?c:c=e(s=u,t)}}function f3(i,e,t){var s,o=t+"",c;return function(){var u=this.getAttributeNS(i.space,i.local);return u===o?null:u===s?c:c=e(s=u,t)}}function d3(i,e,t){var s,o,c;return function(){var u,m=t(this),p;return m==null?void this.removeAttribute(i):(u=this.getAttribute(i),p=m+"",u===p?null:u===s&&p===o?c:(o=p,c=e(s=u,m)))}}function m3(i,e,t){var s,o,c;return function(){var u,m=t(this),p;return m==null?void this.removeAttributeNS(i.space,i.local):(u=this.getAttributeNS(i.space,i.local),p=m+"",u===p?null:u===s&&p===o?c:(o=p,c=e(s=u,m)))}}function p3(i,e){var t=Gf(i),s=t==="transform"?Xk:ew;return this.attrTween(i,typeof e=="function"?(t.local?m3:d3)(t,s,u0(this,"attr."+i,e)):e==null?(t.local?u3:c3)(t):(t.local?f3:h3)(t,s,e))}function g3(i,e){return function(t){this.setAttribute(i,e.call(this,t))}}function y3(i,e){return function(t){this.setAttributeNS(i.space,i.local,e.call(this,t))}}function _3(i,e){var t,s;function o(){var c=e.apply(this,arguments);return c!==s&&(t=(s=c)&&y3(i,c)),t}return o._value=e,o}function v3(i,e){var t,s;function o(){var c=e.apply(this,arguments);return c!==s&&(t=(s=c)&&g3(i,c)),t}return o._value=e,o}function b3(i,e){var t="attr."+i;if(arguments.length<2)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;var s=Gf(i);return this.tween(t,(s.local?_3:v3)(s,e))}function x3(i,e){return function(){c0(this,i).delay=+e.apply(this,arguments)}}function E3(i,e){return e=+e,function(){c0(this,i).delay=e}}function T3(i){var e=this._id;return arguments.length?this.each((typeof i=="function"?x3:E3)(e,i)):di(this.node(),e).delay}function w3(i,e){return function(){$i(this,i).duration=+e.apply(this,arguments)}}function A3(i,e){return e=+e,function(){$i(this,i).duration=e}}function S3(i){var e=this._id;return arguments.length?this.each((typeof i=="function"?w3:A3)(e,i)):di(this.node(),e).duration}function N3(i,e){if(typeof e!="function")throw new Error;return function(){$i(this,i).ease=e}}function C3(i){var e=this._id;return arguments.length?this.each(N3(e,i)):di(this.node(),e).ease}function R3(i,e){return function(){var t=e.apply(this,arguments);if(typeof t!="function")throw new Error;$i(this,i).ease=t}}function I3(i){if(typeof i!="function")throw new Error;return this.each(R3(this._id,i))}function D3(i){typeof i!="function"&&(i=kT(i));for(var e=this._groups,t=e.length,s=new Array(t),o=0;o<t;++o)for(var c=e[o],u=c.length,m=s[o]=[],p,g=0;g<u;++g)(p=c[g])&&i.call(p,p.__data__,g,c)&&m.push(p);return new Tr(s,this._parents,this._name,this._id)}function M3(i){if(i._id!==this._id)throw new Error;for(var e=this._groups,t=i._groups,s=e.length,o=t.length,c=Math.min(s,o),u=new Array(s),m=0;m<c;++m)for(var p=e[m],g=t[m],v=p.length,x=u[m]=new Array(v),T,I=0;I<v;++I)(T=p[I]||g[I])&&(x[I]=T);for(;m<s;++m)u[m]=e[m];return new Tr(u,this._parents,this._name,this._id)}function O3(i){return(i+"").trim().split(/^|\s+/).every(function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||e==="start"})}function k3(i,e,t){var s,o,c=O3(e)?c0:$i;return function(){var u=c(this,i),m=u.on;m!==s&&(o=(s=m).copy()).on(e,t),u.on=o}}function V3(i,e){var t=this._id;return arguments.length<2?di(this.node(),t).on.on(i):this.each(k3(t,i,e))}function j3(i){return function(){var e=this.parentNode;for(var t in this.__transition)if(+t!==i)return;e&&e.removeChild(this)}}function L3(){return this.on("end.remove",j3(this._id))}function P3(i){var e=this._name,t=this._id;typeof i!="function"&&(i=s0(i));for(var s=this._groups,o=s.length,c=new Array(o),u=0;u<o;++u)for(var m=s[u],p=m.length,g=c[u]=new Array(p),v,x,T=0;T<p;++T)(v=m[T])&&(x=i.call(v,v.__data__,T,m))&&("__data__"in v&&(x.__data__=v.__data__),g[T]=x,Yf(g[T],e,t,T,g,di(v,t)));return new Tr(c,this._parents,e,t)}function U3(i){var e=this._name,t=this._id;typeof i!="function"&&(i=OT(i));for(var s=this._groups,o=s.length,c=[],u=[],m=0;m<o;++m)for(var p=s[m],g=p.length,v,x=0;x<g;++x)if(v=p[x]){for(var T=i.call(v,v.__data__,x,p),I,U=di(v,t),q=0,$=T.length;q<$;++q)(I=T[q])&&Yf(I,e,t,q,T,U);c.push(T),u.push(v)}return new Tr(c,u,e,t)}var z3=Bc.prototype.constructor;function B3(){return new z3(this._groups,this._parents)}function q3(i,e){var t,s,o;return function(){var c=Oo(this,i),u=(this.style.removeProperty(i),Oo(this,i));return c===u?null:c===t&&u===s?o:o=e(t=c,s=u)}}function tw(i){return function(){this.style.removeProperty(i)}}function F3(i,e,t){var s,o=t+"",c;return function(){var u=Oo(this,i);return u===o?null:u===s?c:c=e(s=u,t)}}function H3(i,e,t){var s,o,c;return function(){var u=Oo(this,i),m=t(this),p=m+"";return m==null&&(p=m=(this.style.removeProperty(i),Oo(this,i))),u===p?null:u===s&&p===o?c:(o=p,c=e(s=u,m))}}function G3(i,e){var t,s,o,c="style."+e,u="end."+c,m;return function(){var p=$i(this,i),g=p.on,v=p.value[c]==null?m||(m=tw(e)):void 0;(g!==t||o!==v)&&(s=(t=g).copy()).on(u,o=v),p.on=s}}function $3(i,e,t){var s=(i+="")=="transform"?Kk:ew;return e==null?this.styleTween(i,q3(i,s)).on("end.style."+i,tw(i)):typeof e=="function"?this.styleTween(i,H3(i,s,u0(this,"style."+i,e))).each(G3(this._id,i)):this.styleTween(i,F3(i,s,e),t).on("end.style."+i,null)}function Y3(i,e,t){return function(s){this.style.setProperty(i,e.call(this,s),t)}}function Q3(i,e,t){var s,o;function c(){var u=e.apply(this,arguments);return u!==o&&(s=(o=u)&&Y3(i,u,t)),s}return c._value=e,c}function K3(i,e,t){var s="style."+(i+="");if(arguments.length<2)return(s=this.tween(s))&&s._value;if(e==null)return this.tween(s,null);if(typeof e!="function")throw new Error;return this.tween(s,Q3(i,e,t??""))}function X3(i){return function(){this.textContent=i}}function W3(i){return function(){var e=i(this);this.textContent=e??""}}function Z3(i){return this.tween("text",typeof i=="function"?W3(u0(this,"text",i)):X3(i==null?"":i+""))}function J3(i){return function(e){this.textContent=i.call(this,e)}}function e5(i){var e,t;function s(){var o=i.apply(this,arguments);return o!==t&&(e=(t=o)&&J3(o)),e}return s._value=i,s}function t5(i){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(i==null)return this.tween(e,null);if(typeof i!="function")throw new Error;return this.tween(e,e5(i))}function n5(){for(var i=this._name,e=this._id,t=nw(),s=this._groups,o=s.length,c=0;c<o;++c)for(var u=s[c],m=u.length,p,g=0;g<m;++g)if(p=u[g]){var v=di(p,e);Yf(p,i,t,g,u,{time:v.time+v.delay+v.duration,delay:0,duration:v.duration,ease:v.ease})}return new Tr(s,this._parents,i,t)}function i5(){var i,e,t=this,s=t._id,o=t.size();return new Promise(function(c,u){var m={value:u},p={value:function(){--o===0&&c()}};t.each(function(){var g=$i(this,s),v=g.on;v!==i&&(e=(i=v).copy(),e._.cancel.push(m),e._.interrupt.push(m),e._.end.push(p)),g.on=e}),o===0&&c()})}var r5=0;function Tr(i,e,t,s){this._groups=i,this._parents=e,this._name=t,this._id=s}function nw(){return++r5}var fr=Bc.prototype;Tr.prototype={constructor:Tr,select:P3,selectAll:U3,selectChild:fr.selectChild,selectChildren:fr.selectChildren,filter:D3,merge:M3,selection:B3,transition:n5,call:fr.call,nodes:fr.nodes,node:fr.node,size:fr.size,empty:fr.empty,each:fr.each,on:V3,attr:p3,attrTween:b3,style:$3,styleTween:K3,text:Z3,textTween:t5,remove:L3,tween:l3,delay:T3,duration:S3,ease:C3,easeVarying:I3,end:i5,[Symbol.iterator]:fr[Symbol.iterator]};function s5(i){return((i*=2)<=1?i*i*i:(i-=2)*i*i+2)/2}var a5={time:null,delay:0,duration:250,ease:s5};function o5(i,e){for(var t;!(t=i.__transition)||!(t=t[e]);)if(!(i=i.parentNode))throw new Error(`transition ${e} not found`);return t}function l5(i){var e,t;i instanceof Tr?(e=i._id,i=i._name):(e=nw(),(t=a5).time=l0(),i=i==null?null:i+"");for(var s=this._groups,o=s.length,c=0;c<o;++c)for(var u=s[c],m=u.length,p,g=0;g<m;++g)(p=u[g])&&Yf(p,i,e,g,u,t||o5(p,e));return new Tr(s,this._parents,i,e)}Bc.prototype.interrupt=s3;Bc.prototype.transition=l5;function ac(i,e,t){this.k=i,this.x=e,this.y=t}ac.prototype={constructor:ac,scale:function(i){return i===1?this:new ac(this.k*i,this.x,this.y)},translate:function(i,e){return i===0&e===0?this:new ac(this.k,this.x+this.k*i,this.y+this.k*e)},apply:function(i){return[i[0]*this.k+this.x,i[1]*this.k+this.y]},applyX:function(i){return i*this.k+this.x},applyY:function(i){return i*this.k+this.y},invert:function(i){return[(i[0]-this.x)/this.k,(i[1]-this.y)/this.k]},invertX:function(i){return(i-this.x)/this.k},invertY:function(i){return(i-this.y)/this.k},rescaleX:function(i){return i.copy().domain(i.range().map(this.invertX,this).map(i.invert,i))},rescaleY:function(i){return i.copy().domain(i.range().map(this.invertY,this).map(i.invert,i))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};ac.prototype;function Hx(i,e){let t;if(e===void 0)for(const s of i)s!=null&&(t<s||t===void 0&&s>=s)&&(t=s);else{let s=-1;for(let o of i)(o=e(o,++s,i))!=null&&(t<o||t===void 0&&o>=o)&&(t=o)}return t}function c5(i,e){let t;if(e===void 0)for(const s of i)s!=null&&(t>s||t===void 0&&s>=s)&&(t=s);else{let s=-1;for(let o of i)(o=e(o,++s,i))!=null&&(t>o||t===void 0&&o>=o)&&(t=o)}return t}function yp(i,e){let t=0;if(e===void 0)for(let s of i)(s=+s)&&(t+=s);else{let s=-1;for(let o of i)(o=+e(o,++s,i))&&(t+=o)}return t}function u5(i,e){return i.sourceLinks.length?i.depth:e-1}function Ih(i){return function(){return i}}function Gx(i,e){return xf(i.source,e.source)||i.index-e.index}function $x(i,e){return xf(i.target,e.target)||i.index-e.index}function xf(i,e){return i.y0-e.y0}function _p(i){return i.value}function h5(i){return i.index}function f5(i){return i.nodes}function d5(i){return i.links}function Yx(i,e){const t=i.get(e);if(!t)throw new Error("missing: "+e);return t}function Qx({nodes:i}){for(const e of i){let t=e.y0,s=t;for(const o of e.sourceLinks)o.y0=t+o.width/2,t+=o.width;for(const o of e.targetLinks)o.y1=s+o.width/2,s+=o.width}}function m5(){let i=0,e=0,t=1,s=1,o=24,c=8,u,m=h5,p=u5,g,v,x=f5,T=d5,I=6;function U(){const F={nodes:x.apply(null,arguments),links:T.apply(null,arguments)};return q(F),$(F),ce(F),G(F),de(F),Qx(F),F}U.update=function(F){return Qx(F),F},U.nodeId=function(F){return arguments.length?(m=typeof F=="function"?F:Ih(F),U):m},U.nodeAlign=function(F){return arguments.length?(p=typeof F=="function"?F:Ih(F),U):p},U.nodeSort=function(F){return arguments.length?(g=F,U):g},U.nodeWidth=function(F){return arguments.length?(o=+F,U):o},U.nodePadding=function(F){return arguments.length?(c=u=+F,U):c},U.nodes=function(F){return arguments.length?(x=typeof F=="function"?F:Ih(F),U):x},U.links=function(F){return arguments.length?(T=typeof F=="function"?F:Ih(F),U):T},U.linkSort=function(F){return arguments.length?(v=F,U):v},U.size=function(F){return arguments.length?(i=e=0,t=+F[0],s=+F[1],U):[t-i,s-e]},U.extent=function(F){return arguments.length?(i=+F[0][0],t=+F[1][0],e=+F[0][1],s=+F[1][1],U):[[i,e],[t,s]]},U.iterations=function(F){return arguments.length?(I=+F,U):I};function q({nodes:F,links:j}){for(const[W,L]of F.entries())L.index=W,L.sourceLinks=[],L.targetLinks=[];const z=new Map(F.map((W,L)=>[m(W,L,F),W]));for(const[W,L]of j.entries()){L.index=W;let{source:K,target:M}=L;typeof K!="object"&&(K=L.source=Yx(z,K)),typeof M!="object"&&(M=L.target=Yx(z,M)),K.sourceLinks.push(L),M.targetLinks.push(L)}if(v!=null)for(const{sourceLinks:W,targetLinks:L}of F)W.sort(v),L.sort(v)}function $({nodes:F}){for(const j of F)j.value=j.fixedValue===void 0?Math.max(yp(j.sourceLinks,_p),yp(j.targetLinks,_p)):j.fixedValue}function ce({nodes:F}){const j=F.length;let z=new Set(F),W=new Set,L=0;for(;z.size;){for(const K of z){K.depth=L;for(const{target:M}of K.sourceLinks)W.add(M)}if(++L>j)throw new Error("circular link");z=W,W=new Set}}function G({nodes:F}){const j=F.length;let z=new Set(F),W=new Set,L=0;for(;z.size;){for(const K of z){K.height=L;for(const{source:M}of K.targetLinks)W.add(M)}if(++L>j)throw new Error("circular link");z=W,W=new Set}}function te({nodes:F}){const j=Hx(F,L=>L.depth)+1,z=(t-i-o)/(j-1),W=new Array(j);for(const L of F){const K=Math.max(0,Math.min(j-1,Math.floor(p.call(null,L,j))));L.layer=K,L.x0=i+K*z,L.x1=L.x0+o,W[K]?W[K].push(L):W[K]=[L]}if(g)for(const L of W)L.sort(g);return W}function ie(F){const j=c5(F,z=>(s-e-(z.length-1)*u)/yp(z,_p));for(const z of F){let W=e;for(const L of z){L.y0=W,L.y1=W+L.value*j,W=L.y1+u;for(const K of L.sourceLinks)K.width=K.value*j}W=(s-W+u)/(z.length+1);for(let L=0;L<z.length;++L){const K=z[L];K.y0+=W*(L+1),K.y1+=W*(L+1)}R(z)}}function de(F){const j=te(F);u=Math.min(c,(s-e)/(Hx(j,z=>z.length)-1)),ie(j);for(let z=0;z<I;++z){const W=Math.pow(.99,z),L=Math.max(1-W,(z+1)/I);D(j,W,L),he(j,W,L)}}function he(F,j,z){for(let W=1,L=F.length;W<L;++W){const K=F[W];for(const M of K){let X=0,fe=0;for(const{source:ye,value:se}of M.targetLinks){let ge=se*(M.layer-ye.layer);X+=w(ye,M)*ge,fe+=ge}if(!(fe>0))continue;let me=(X/fe-M.y0)*j;M.y0+=me,M.y1+=me,k(M)}g===void 0&&K.sort(xf),C(K,z)}}function D(F,j,z){for(let W=F.length,L=W-2;L>=0;--L){const K=F[L];for(const M of K){let X=0,fe=0;for(const{target:ye,value:se}of M.sourceLinks){let ge=se*(ye.layer-M.layer);X+=oe(M,ye)*ge,fe+=ge}if(!(fe>0))continue;let me=(X/fe-M.y0)*j;M.y0+=me,M.y1+=me,k(M)}g===void 0&&K.sort(xf),C(K,z)}}function C(F,j){const z=F.length>>1,W=F[z];O(F,W.y0-u,z-1,j),N(F,W.y1+u,z+1,j),O(F,s,F.length-1,j),N(F,e,0,j)}function N(F,j,z,W){for(;z<F.length;++z){const L=F[z],K=(j-L.y0)*W;K>1e-6&&(L.y0+=K,L.y1+=K),j=L.y1+u}}function O(F,j,z,W){for(;z>=0;--z){const L=F[z],K=(L.y1-j)*W;K>1e-6&&(L.y0-=K,L.y1-=K),j=L.y0-u}}function k({sourceLinks:F,targetLinks:j}){if(v===void 0){for(const{source:{sourceLinks:z}}of j)z.sort($x);for(const{target:{targetLinks:z}}of F)z.sort(Gx)}}function R(F){if(v===void 0)for(const{sourceLinks:j,targetLinks:z}of F)j.sort($x),z.sort(Gx)}function w(F,j){let z=F.y0-(F.sourceLinks.length-1)*u/2;for(const{target:W,width:L}of F.sourceLinks){if(W===j)break;z+=L+u}for(const{source:W,width:L}of j.targetLinks){if(W===F)break;z-=L}return z}function oe(F,j){let z=j.y0-(j.targetLinks.length-1)*u/2;for(const{source:W,width:L}of j.targetLinks){if(W===F)break;z+=L+u}for(const{target:W,width:L}of F.sourceLinks){if(W===j)break;z-=L}return z}return U}var ig=Math.PI,rg=2*ig,ua=1e-6,p5=rg-ua;function sg(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function iw(){return new sg}sg.prototype=iw.prototype={constructor:sg,moveTo:function(i,e){this._+="M"+(this._x0=this._x1=+i)+","+(this._y0=this._y1=+e)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(i,e){this._+="L"+(this._x1=+i)+","+(this._y1=+e)},quadraticCurveTo:function(i,e,t,s){this._+="Q"+ +i+","+ +e+","+(this._x1=+t)+","+(this._y1=+s)},bezierCurveTo:function(i,e,t,s,o,c){this._+="C"+ +i+","+ +e+","+ +t+","+ +s+","+(this._x1=+o)+","+(this._y1=+c)},arcTo:function(i,e,t,s,o){i=+i,e=+e,t=+t,s=+s,o=+o;var c=this._x1,u=this._y1,m=t-i,p=s-e,g=c-i,v=u-e,x=g*g+v*v;if(o<0)throw new Error("negative radius: "+o);if(this._x1===null)this._+="M"+(this._x1=i)+","+(this._y1=e);else if(x>ua)if(!(Math.abs(v*m-p*g)>ua)||!o)this._+="L"+(this._x1=i)+","+(this._y1=e);else{var T=t-c,I=s-u,U=m*m+p*p,q=T*T+I*I,$=Math.sqrt(U),ce=Math.sqrt(x),G=o*Math.tan((ig-Math.acos((U+x-q)/(2*$*ce)))/2),te=G/ce,ie=G/$;Math.abs(te-1)>ua&&(this._+="L"+(i+te*g)+","+(e+te*v)),this._+="A"+o+","+o+",0,0,"+ +(v*T>g*I)+","+(this._x1=i+ie*m)+","+(this._y1=e+ie*p)}},arc:function(i,e,t,s,o,c){i=+i,e=+e,t=+t,c=!!c;var u=t*Math.cos(s),m=t*Math.sin(s),p=i+u,g=e+m,v=1^c,x=c?s-o:o-s;if(t<0)throw new Error("negative radius: "+t);this._x1===null?this._+="M"+p+","+g:(Math.abs(this._x1-p)>ua||Math.abs(this._y1-g)>ua)&&(this._+="L"+p+","+g),t&&(x<0&&(x=x%rg+rg),x>p5?this._+="A"+t+","+t+",0,1,"+v+","+(i-u)+","+(e-m)+"A"+t+","+t+",0,1,"+v+","+(this._x1=p)+","+(this._y1=g):x>ua&&(this._+="A"+t+","+t+",0,"+ +(x>=ig)+","+v+","+(this._x1=i+t*Math.cos(o))+","+(this._y1=e+t*Math.sin(o))))},rect:function(i,e,t,s){this._+="M"+(this._x0=this._x1=+i)+","+(this._y0=this._y1=+e)+"h"+ +t+"v"+ +s+"h"+-t+"Z"},toString:function(){return this._}};function Kx(i){return function(){return i}}function g5(i){return i[0]}function y5(i){return i[1]}var _5=Array.prototype.slice;function v5(i){return i.source}function b5(i){return i.target}function x5(i){var e=v5,t=b5,s=g5,o=y5,c=null;function u(){var m,p=_5.call(arguments),g=e.apply(this,p),v=t.apply(this,p);if(c||(c=m=iw()),i(c,+s.apply(this,(p[0]=g,p)),+o.apply(this,p),+s.apply(this,(p[0]=v,p)),+o.apply(this,p)),m)return c=null,m+""||null}return u.source=function(m){return arguments.length?(e=m,u):e},u.target=function(m){return arguments.length?(t=m,u):t},u.x=function(m){return arguments.length?(s=typeof m=="function"?m:Kx(+m),u):s},u.y=function(m){return arguments.length?(o=typeof m=="function"?m:Kx(+m),u):o},u.context=function(m){return arguments.length?(c=m??null,u):c},u}function E5(i,e,t,s,o){i.moveTo(e,t),i.bezierCurveTo(e=(e+s)/2,t,e,o,s,o)}function T5(){return x5(E5)}function w5(i){return[i.source.x1,i.y0]}function A5(i){return[i.target.x0,i.y1]}function S5(){return T5().source(w5).target(A5)}function N5({data:i,height:e=560,nodeWidth:t=16,nodePadding:s=18,onNodeClick:o}){const c=Te.useRef(null),[u,m]=Te.useState(0);return Te.useEffect(()=>{const p=c.current;if(!p)return;const g=new ResizeObserver(v=>{const x=Math.floor(v[0]?.contentRect?.width||0);m(x)});return g.observe(p),m(Math.floor(p.clientWidth||0)),()=>g.disconnect()},[]),Te.useEffect(()=>{const p=c.current;if(!p)return;p.innerHTML="";const g=Math.max(320,u||p.clientWidth||0),v=Ck(p).append("svg").attr("width",g).attr("height",e).attr("viewBox",`0 0 ${g} ${e}`).style("display","block"),x=G=>{v.append("text").attr("x",16).attr("y",28).attr("fill","#e2e8f0").attr("font-size",12).text(G)},T={Income:"#22c55e",Fixed:"#f97316",Essential:"#3b82f6",Variable:"#a855f7",Transfers:"#eab308",Leftover:"#10b981"},I=Number(i?.meta?.incomeTotal||0),U=G=>I>0?G/I*100:0,q=G=>`$${Number(G||0).toFixed(2)}`,$=g<420?10:12;let ce=requestAnimationFrame(()=>{try{const G=Array.isArray(i?.nodes)?i.nodes:[],te=Array.isArray(i?.links)?i.links:[];if(!G.length||!te.length){x("No report data yet  import transactions to see cash flow.");return}const ie=new Set(G.map(w=>w?.name).filter(Boolean));for(const w of te)typeof w?.source=="string"&&ie.add(w.source),typeof w?.target=="string"&&ie.add(w.target);const de=[...ie],he=new Map(de.map((w,oe)=>[w,oe])),D=de.map(w=>({name:w})),C=te.map(w=>{const oe=typeof w.source=="string"?he.get(w.source):w.source,F=typeof w.target=="string"?he.get(w.target):w.target,j=Number(w.value||0);return typeof oe!="number"||typeof F!="number"||!Number.isFinite(j)||j<=0?null:{source:oe,target:F,value:j}}).filter(Boolean);if(!C.length){x("Report links are empty after validation.");return}const O=m5().nodeWidth(t).nodePadding(s).extent([[12,12],[g-12,e-12]])({nodes:D.map(w=>({...w})),links:C.map(w=>({...w}))});v.append("g").attr("fill","none").attr("stroke-opacity",.35).selectAll("path").data(O.links).join("path").attr("d",S5()).attr("stroke",w=>{const oe=O.nodes[w.source.index]?.name;return T[oe]||"#94a3b8"}).attr("stroke-width",w=>Math.max(1,w.width)).append("title").text(w=>{const oe=Number(w.value||0),F=O.nodes[w.source.index]?.name,j=O.nodes[w.target.index]?.name;return`${F}  ${j}
${q(oe)} (${U(oe).toFixed(1)}% of income)`});const R=v.append("g").selectAll("g").data(O.nodes).join("g");R.append("rect").attr("x",w=>w.x0).attr("y",w=>w.y0).attr("height",w=>Math.max(1,w.y1-w.y0)).attr("width",w=>w.x1-w.x0).attr("rx",6).attr("fill",w=>T[w.name]||"#64748b").attr("opacity",.9).style("cursor",typeof o=="function"?"pointer":"default").on("click",(w,oe)=>{typeof o=="function"&&o(oe.name,oe)}).append("title").text(w=>{const oe=Number(w.value||0);return`${w.name}
${q(oe)} (${U(oe).toFixed(1)}% of income)`}),R.append("text").attr("x",w=>w.x0<g/2?w.x1+8:w.x0-8).attr("y",w=>(w.y0+w.y1)/2).attr("dy","0.35em").attr("text-anchor",w=>w.x0<g/2?"start":"end").attr("font-size",$).attr("fill","#e2e8f0").text(w=>w.name)}catch(G){console.error("FlowSankey render error:",G),x(`Sankey render error: ${G?.message||String(G)}`)}});return()=>cancelAnimationFrame(ce)},[i,e,t,s,o,u]),y.jsx("div",{ref:c,style:{width:"100%"}})}const vp={topNPerBucket:10,maxRows:2e4,includeTransfers:!0,preset:"Detailed"};function C5(i){return!i||typeof i!="string"||i.length<7?null:i.slice(0,7)}function bp(i){const e=Number(i);return Number.isFinite(e)?e:0}function R5(i=""){let e=String(i).trim().toLowerCase();return e=e.replace(/\s+/g," "),e}function I5(i=""){let e=String(i).trim();return e=e.replace(/[*#]{3,}\w{2,}$/g,"").trim(),e=e.replace(/\b(?:\d{3,}|x{3,}\d+)\b/gi,"").trim(),e=e.replace(/\s+/g," "),e.length>28&&(e=e.slice(0,26)+""),e||"Uncategorized"}const D5=["rent","mortgage","apts","apt","apartment","lease","property management","hoa","insurance","internet","phone","utilities","loan","payment"],M5=["amazon prime","prime membership","netflix","hulu","spotify","youtube premium","rocket money","membership","subscription","icloud","google one","dropbox"],O5=["grocery","costco","walmart","gas","fuel","medical","pharmacy","power","water"],k5=["transfer","zelle","venmo","cash app","withdrawal","deposit"];function V5(i=""){const e=i.toLowerCase();return k5.some(t=>e.includes(t))?"Transfers":D5.some(t=>e.includes(t))?"Fixed":M5.some(t=>e.includes(t))?"Subscriptions":O5.some(t=>e.includes(t))?"Essential":"Variable"}function j5(i,e){const t=[];for(const s of i.entries())t.push(s),t.sort((o,c)=>c[1]-o[1]),t.length>e&&(t.length=e);return t}function L5({accounts:i=[],monthKey:e,topNPerBucket:t=10,maxRows:s=2e4,includeTransfers:o=!0}){const c=(i||[]).flatMap(G=>G.transactions||[]),u=e?c.filter(G=>C5(G.date)===e):c,m=u.length>s?u.slice(-s):u,p=m.reduce((G,te)=>G+(bp(te.amount)>0?bp(te.amount):0),0),g=new Map,v=new Map;for(const G of m){const te=bp(G.amount);if(!(te<0))continue;const ie=R5(G.description||""),de=I5(G.description||""),he=V5(ie);if(!o&&he==="Transfers")continue;const D=Math.abs(te);g.set(he,(g.get(he)||0)+D),v.has(he)||v.set(he,new Map);const C=v.get(he);C.set(de,(C.get(de)||0)+D)}if(p<=0&&g.size===0)return{nodes:[],links:[],meta:{incomeTotal:0}};const x=o?["Fixed","Subscriptions","Essential","Variable","Transfers"]:["Fixed","Subscriptions","Essential","Variable"],T=[{name:"Income"},...x.map(G=>({name:G}))],I=[];for(const G of x){const te=g.get(G)||0;te>0&&I.push({source:"Income",target:G,value:te})}for(const G of x){const te=v.get(G);if(te)for(const[ie,de]of j5(te,t))T.push({name:ie}),I.push({source:G,target:ie,value:de})}const U=x.reduce((G,te)=>te==="Transfers"?G:G+(g.get(te)||0),0),q=Math.max(0,p-U);q>0&&(T.push({name:"Leftover"}),I.push({source:"Income",target:"Leftover",value:q}));const $=new Set,ce=[];for(const G of T)$.has(G.name)||($.add(G.name),ce.push(G));return{nodes:ce,links:I,meta:{incomeTotal:p,totalIncome:p,spentTotal:U,totalSpent:U,transfersTotal:g.get("Transfers")||0,leftover:q}}}const Xx="budgetApp_reportSettings_v1",P5={Minimal:{topNPerBucket:5,maxRows:1e4,includeTransfers:!1,preset:"Minimal"},Detailed:{topNPerBucket:12,maxRows:6e4,includeTransfers:!0,preset:"Detailed"},Audit:{topNPerBucket:30,maxRows:2e5,includeTransfers:!0,preset:"Audit"}};function Wx(i,e,t,s){const o=Number(i);return Number.isFinite(o)?Math.max(e,Math.min(t,Math.trunc(o))):s}function U5({accounts:i=[],monthKey:e,onMerchantPick:t}){const[s,o]=Te.useState("overview"),[c,u]=Te.useState({nodes:[],links:[],meta:{incomeTotal:0}}),[m,p]=Te.useState(560);Te.useEffect(()=>{function T(){const I=Math.max(380,Math.min(680,Math.round(window.innerHeight*.55)));p(I)}return T(),window.addEventListener("resize",T),()=>window.removeEventListener("resize",T)},[]);const[g,v]=Te.useState(()=>{try{const T=localStorage.getItem(Xx),I=T?JSON.parse(T):null;return{...vp,...I||{}}}catch{return{...vp}}});Te.useEffect(()=>{const T=setTimeout(()=>{u(L5({accounts:i,monthKey:e,topNPerBucket:g.topNPerBucket,maxRows:g.maxRows,includeTransfers:g.includeTransfers}))},0);return()=>clearTimeout(T)},[i,e,g.topNPerBucket,g.maxRows,g.includeTransfers]),Te.useEffect(()=>{const T=setTimeout(()=>{try{localStorage.setItem(Xx,JSON.stringify(g))}catch{}},300);return()=>clearTimeout(T)},[g]);function x(T){const I=P5[T];I&&v(U=>({...U,...I,preset:T}))}return y.jsxs("div",{className:"space-y-3",children:[y.jsx("div",{className:"flex items-center justify-between gap-3",children:y.jsxs("div",{className:"inline-flex rounded-xl border border-slate-800 bg-slate-950/40 p-1",children:[y.jsx("button",{onClick:()=>o("overview"),className:`px-3 py-1.5 text-sm rounded-lg ${s==="overview"?"bg-slate-900 text-slate-100":"text-slate-300 hover:text-slate-100"}`,children:"Overview"}),y.jsx("button",{onClick:()=>o("settings"),className:`px-3 py-1.5 text-sm rounded-lg ${s==="settings"?"bg-slate-900 text-slate-100":"text-slate-300 hover:text-slate-100"}`,children:"Settings"})]})}),s==="overview"&&y.jsx("div",{className:"rounded-2xl border border-slate-800 bg-slate-950/40 p-3",children:y.jsx("div",{className:"hScroll",children:y.jsx("div",{style:{minHeight:m},children:y.jsx(N5,{data:c,height:m,onNodeClick:T=>{!["Income","Fixed","Subscriptions","Essential","Variable","Transfers","Leftover"].includes(T)&&typeof t=="function"&&t(T)}})})})}),s==="settings"&&y.jsxs("div",{className:"rounded-2xl border border-slate-800 bg-slate-950/40 p-4 space-y-5",children:[y.jsxs("div",{className:"space-y-2",children:[y.jsx("div",{className:"text-sm font-medium text-slate-100",children:"Presets"}),y.jsxs("div",{className:"flex flex-wrap gap-2",children:[["Minimal","Detailed","Audit"].map(T=>y.jsx("button",{onClick:()=>x(T),className:"text-sm px-3 py-2 rounded-md border border-slate-800 bg-slate-900 hover:bg-slate-800 text-slate-100",children:T},T)),y.jsx("button",{onClick:()=>v({...vp,preset:"Custom"}),className:"text-sm px-3 py-2 rounded-md border border-slate-800 bg-slate-900 hover:bg-slate-800 text-slate-100",children:"Reset"})]})]}),y.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[y.jsxs("div",{className:"space-y-2",children:[y.jsx("label",{className:"text-slate-100 text-sm font-medium",children:"Top merchants per bucket"}),y.jsx("input",{type:"number",min:1,max:50,value:g.topNPerBucket,onChange:T=>v(I=>({...I,topNPerBucket:Wx(T.target.value,1,50,10),preset:"Custom"})),className:"w-full bg-slate-900 border border-slate-800 rounded-md px-3 py-2 text-slate-100"})]}),y.jsxs("div",{className:"space-y-2",children:[y.jsx("label",{className:"text-slate-100 text-sm font-medium",children:"Max rows to process"}),y.jsx("input",{type:"number",min:1e3,max:2e5,step:1e3,value:g.maxRows,onChange:T=>v(I=>({...I,maxRows:Wx(T.target.value,1e3,2e5,2e4),preset:"Custom"})),className:"w-full bg-slate-900 border border-slate-800 rounded-md px-3 py-2 text-slate-100"})]}),y.jsxs("div",{className:"flex items-center justify-between gap-4 md:col-span-2",children:[y.jsxs("div",{children:[y.jsx("p",{className:"text-slate-100 text-sm font-medium",children:"Include Transfers"}),y.jsx("p",{className:"text-slate-400 text-xs",children:"Show/hide Transfers bucket in the chart."})]}),y.jsx("input",{type:"checkbox",checked:!!g.includeTransfers,onChange:T=>v(I=>({...I,includeTransfers:T.target.checked,preset:"Custom"})),className:"h-5 w-5"})]})]})]})]})}const rw="budgetAppState_v1";function z5(i=rw){if(typeof window>"u")return null;try{const e=window.localStorage.getItem(i);return e?JSON.parse(e):null}catch(e){return console.error("Failed to load stored state",e),null}}function B5(i,e){if(typeof window>"u")return;let t=rw,s=i;typeof i=="string"&&(t=i,s=e);try{window.localStorage.setItem(t,JSON.stringify(s))}catch(o){console.error("Failed to save state",o)}}function q5(i){if(!i||typeof i!="string"||i.length<7)return String(i||"");const[e,t]=i.split("-"),s=Number(e),o=Number(t)-1,c=new Date(s,o,1);return Number.isNaN(c.getTime())?i:c.toLocaleString(void 0,{month:"long",year:"numeric"})}function Zx(i){if(!i)return null;if(i.accounts&&Array.isArray(i.accounts))return i;const e={id:"main",name:"Main Account",type:"checking",transactions:Array.isArray(i.transactions)?i.transactions:[]};return{...i,accounts:[e],currentAccountId:i.currentAccountId||"main"}}function sw(){const i=new Date,e=i.getFullYear(),t=String(i.getMonth()+1).padStart(2,"0");return`${e}-${t}`}function Wl(i,e=0){const t=Number(i);return Number.isFinite(t)?t:e}const xp={monthKey:sw(),budgetsByMonth:{},accounts:[{id:"main",name:"Main Account",type:"checking"}],currentAccountId:"main",scheduledTemplates:[],scheduleChecks:{},goals:[],currentGoalId:null,currentPage:"dashboard"};function F5(){const{user:i,authLoading:e,signInWithEmail:t,signUpWithEmail:s,signOut:o,resetPassword:c}=p4(),[u,m]=Ee.useState(null),[p,g]=Ee.useState(!1),[v,x]=Ee.useState(null),[T,I]=Ee.useState([]),[U,q]=Ee.useState(null),[$,ce]=Ee.useState(()=>{const L=Zx(z5());return L?{...xp,...L}:xp}),G=Ee.useRef(!1),te=Ee.useRef(!1);Ee.useEffect(()=>{B5($)},[$]),Ee.useEffect(()=>{if(!i||te.current)return;async function L(){try{const K=await b4(i.uid);I(K);const M=K.length>0?K[0].id:i.uid;x(M);const X=await v4(M,i.uid);q(X);const fe=await y4(M,$);fe&&ce(fe),te.current=!0}catch(K){console.error("Failed to initialize workspace:",K),m({kind:"error",message:"Failed to load workspace"})}}L()},[i]),Ee.useEffect(()=>{if(!i||!v)return;const L=Nr(Gi,"workspaces",v),K=f4(L,M=>{const X=M.exists()?M.data()?.state:null;X&&ce(fe=>({...xp,...fe,...Zx(X)}))},M=>{console.error("onSnapshot(workspace) failed",M),m({kind:"error",message:"Failed to sync workspace."})});return()=>K()},[i,v]),Ee.useEffect(()=>{if(!i||!v||G.current)return;G.current=!0;const L=setTimeout(async()=>{try{await AT(v,$),await x4(v,i.uid)}catch(K){console.error("saveWorkspaceState failed",K)}finally{G.current=!1}},450);return()=>clearTimeout(L)},[$,i,v]),Ee.useEffect(()=>{i&&w4(i.uid).catch(L=>{console.error("loadOrCreateUserProfile failed",L)})},[i]);const ie=$.monthKey||sw(),de=Ee.useMemo(()=>q5(ie),[ie]),he=Ee.useMemo(()=>$.budgetsByMonth?.[ie]||{estimatedIncome:0,useActualIncome:!1,fixed:[],variable:[],goals:[],transactions:[]},[$.budgetsByMonth,ie]),D=Array.isArray(he?.transactions)?he.transactions:[],C=Array.isArray($.accounts)?$.accounts:[],N=$.currentAccountId||"main",O=Ee.useMemo(()=>{const L=(Array.isArray(he.fixed)?he.fixed:[]).reduce((M,X)=>M+Wl(X?.amount),0),K=(Array.isArray(he.variable)?he.variable:[]).reduce((M,X)=>M+Wl(X?.amount),0);return{fixedTotal:L,variableTotal:K,fixed:L,variable:K}},[he.fixed,he.variable]);function k(L){ce(K=>({...K,monthKey:L}))}function R(L){ce(K=>({...K,budgetsByMonth:{...K.budgetsByMonth||{},[ie]:L}}))}function w(L){const K={id:`tx-${Date.now()}`,description:String(L?.description||"").trim()||"Transaction",amount:Wl(L?.amount),date:String(L?.date||"").slice(0,10),category:String(L?.category||""),accountId:L?.accountId||N,flowType:L?.flowType||void 0};R({...he,transactions:[...D,K]}),m({kind:"success",message:"Transaction added."})}function oe(L){ce(K=>({...K,scheduledTemplates:L}))}function F(L){ce(K=>({...K,scheduleChecks:L}))}function j(L){ce(K=>({...K,currentPage:L}))}function z(L){ce(K=>({...K,currentGoalId:L,currentPage:"goal"}))}if(!i)return y.jsx(I4,{onSignIn:t,onSignUp:s,onResetPassword:c,loading:e});const W=$.currentPage||"dashboard";return y.jsxs("div",{className:"app-shell",children:[y.jsx("header",{className:"app-header",children:y.jsxs("div",{className:"content headerRow",children:[y.jsxs("div",{className:"brandAndNav",children:[y.jsxs("div",{className:"appTitle",children:["FlowMetrics Budget ",y.jsx("span",{style:{opacity:.6},children:""})," ",y.jsx("span",{style:{opacity:.85},children:de})]}),y.jsxs("nav",{className:"navRow","aria-label":"Primary navigation",children:[y.jsx(Ql,{active:W==="dashboard",onClick:()=>j("dashboard"),children:"Dashboard"}),y.jsx(Ql,{active:W==="balances",onClick:()=>j("balances"),children:"Balances"}),y.jsx(Ql,{active:W==="budget",onClick:()=>j("budget"),children:"Budget"}),y.jsx(Ql,{active:W==="transactions",onClick:()=>j("transactions"),children:"Transactions"}),y.jsx(Ql,{active:W==="reports",onClick:()=>j("reports"),children:"Reports"})]})]}),y.jsxs("div",{className:"headerRight",children:[y.jsx(R4,{monthKey:ie,onSetMonthKey:k,onToast:m,onOpenWorkspaceManager:()=>g(!0)}),y.jsx(O4,{user:i,onSignOut:o,onUpdateProfile:L=>A4(i.uid,L)})]})]})}),y.jsx("main",{className:"app-main",children:y.jsxs("div",{className:"content",children:[W==="dashboard"&&y.jsx(MM,{month:de,income:Wl(he?.estimatedIncome??he?.income),fixed:O.fixedTotal,variable:O.variableTotal,leftover:Wl(he?.estimatedIncome??he?.income)-O.fixedTotal-O.variableTotal,goals:Array.isArray($.goals)?$.goals:[],transactions:D,accounts:C,currentAccountId:N,onChangeCurrentAccount:L=>ce(K=>({...K,currentAccountId:L})),onOpenGoal:z,onTransactionsUpdate:L=>R({...he,transactions:L}),currentAccountBalance:0,totalBalance:0,sectionsOrder:he?.sectionsOrder}),W==="balances"&&y.jsx(VM,{accounts:C,currentAccountId:N,onChangeCurrentAccount:L=>ce(K=>({...K,currentAccountId:L})),transactions:D}),W==="budget"&&y.jsx(PM,{month:de,budget:he,totals:O,onBudgetChange:R,scheduledTemplates:$.scheduledTemplates||[],scheduleChecks:$.scheduleChecks||{},onScheduledTemplatesChange:oe,onScheduleChecksChange:F,accounts:C,currentAccountId:N,onAddTransaction:w}),W==="transactions"&&y.jsx(HM,{month:de,transactions:D,accounts:C,currentAccountId:N,onChangeCurrentAccount:L=>ce(K=>({...K,currentAccountId:L})),onTransactionsChange:L=>R({...he,transactions:L}),onAddTransaction:w}),W==="goal"&&y.jsx($M,{goalId:$.currentGoalId,goals:Array.isArray($.goals)?$.goals:[],onBack:()=>j("dashboard"),onUpdateGoals:L=>ce(K=>({...K,goals:L}))}),W==="reports"&&y.jsx(U5,{monthKey:ie,month:de,budget:he,transactions:D,accounts:C})]})}),p&&y.jsx(cM,{workspaceId:v,currentUserId:i.uid,onClose:()=>g(!1)}),u&&y.jsx(D4,{kind:u.kind,message:u.message,onClose:()=>m(null)})]})}$A.createRoot(document.getElementById("root")).render(y.jsx(Ee.StrictMode,{children:y.jsx(m4,{children:y.jsx(F5,{})})}));export{mr as a,RT as c,IT as p};
//# sourceMappingURL=index-DA383GzF.js.map
